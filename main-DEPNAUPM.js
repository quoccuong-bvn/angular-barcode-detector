var iR=Object.defineProperty,aR=Object.defineProperties;var sR=Object.getOwnPropertyDescriptors;var Qv=Object.getOwnPropertySymbols;var uR=Object.prototype.hasOwnProperty,lR=Object.prototype.propertyIsEnumerable;var Jv=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var eb=(t,e,r)=>e in t?iR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N=(t,e)=>{for(var r in e||={})uR.call(e,r)&&eb(t,r,e[r]);if(Qv)for(var r of Qv(e))lR.call(e,r)&&eb(t,r,e[r]);return t},B=(t,e)=>aR(t,sR(e));var U=(t,e,r)=>new Promise((n,i)=>{var a=l=>{try{s(r.next(l))}catch(o){i(o)}},u=l=>{try{s(r.throw(l))}catch(o){i(o)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,u);s((r=r.apply(t,e)).next())});var mf=(t,e,r)=>(e=t[Jv("asyncIterator")])?e.call(t):(t=t[Jv("iterator")](),e={},r=(n,i)=>(i=t[n])&&(e[n]=a=>new Promise((u,s,l)=>(a=i.call(t,a),l=a.done,Promise.resolve(a.value).then(o=>u({value:o,done:l}),s)))),r("next"),r("return"),e);var tb=null;var ip=1,ap=Symbol("SIGNAL");function ft(t){let e=tb;return tb=t,e}var rb={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function cR(t){if(!(lp(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ip)){if(!t.producerMustRecompute(t)&&!sp(t)){t.dirty=!1,t.lastCleanEpoch=ip;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ip}}function nb(t){return t&&(t.nextProducerIndex=0),ft(t)}function ob(t,e){if(ft(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(lp(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)up(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function sp(t){yf(t);for(let e=0;e<t.producerNode.length;e++){let r=t.producerNode[e],n=t.producerLastReadVersion[e];if(n!==r.version||(cR(r),n!==r.version))return!0}return!1}function ib(t){if(yf(t),lp(t))for(let e=0;e<t.producerNode.length;e++)up(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function up(t,e){if(fR(t),yf(t),t.liveConsumerNode.length===1)for(let n=0;n<t.producerNode.length;n++)up(t.producerNode[n],t.producerIndexOfThis[n]);let r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let n=t.liveConsumerIndexOfThis[e],i=t.liveConsumerNode[e];yf(i),i.producerIndexOfThis[n]=e}}function lp(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function yf(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function fR(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function dR(){throw new Error}var hR=dR;function ab(t){hR=t}function vt(t){return typeof t=="function"}function vf(t){let r=t(n=>{Error.call(n),n.stack=new Error().stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var bf=vf(t=>function(r){t(this),this.message=r?`${r.length} errors occurred during unsubscription:
${r.map((n,i)=>`${i+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=r});function ll(t,e){if(t){let r=t.indexOf(e);0<=r&&t.splice(r,1)}}var dn=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(let a of r)a.remove(this);else r.remove(this);let{initialTeardown:n}=this;if(vt(n))try{n()}catch(a){e=a instanceof bf?a.errors:[a]}let{_finalizers:i}=this;if(i){this._finalizers=null;for(let a of i)try{sb(a)}catch(u){e=e??[],u instanceof bf?e=[...e,...u.errors]:e.push(u)}}if(e)throw new bf(e)}}add(e){var r;if(e&&e!==this)if(this.closed)sb(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}}_hasParent(e){let{_parentage:r}=this;return r===e||Array.isArray(r)&&r.includes(e)}_addParent(e){let{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e}_removeParent(e){let{_parentage:r}=this;r===e?this._parentage=null:Array.isArray(r)&&ll(r,e)}remove(e){let{_finalizers:r}=this;r&&ll(r,e),e instanceof t&&e._removeParent(this)}};dn.EMPTY=(()=>{let t=new dn;return t.closed=!0,t})();var cp=dn.EMPTY;function wf(t){return t instanceof dn||t&&"closed"in t&&vt(t.remove)&&vt(t.add)&&vt(t.unsubscribe)}function sb(t){vt(t)?t():t.unsubscribe()}var co={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var cs={setTimeout(t,e,...r){let{delegate:n}=cs;return n?.setTimeout?n.setTimeout(t,e,...r):setTimeout(t,e,...r)},clearTimeout(t){let{delegate:e}=cs;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function xf(t){cs.setTimeout(()=>{let{onUnhandledError:e}=co;if(e)e(t);else throw t})}function fp(){}var ub=dp("C",void 0,void 0);function lb(t){return dp("E",void 0,t)}function cb(t){return dp("N",t,void 0)}function dp(t,e,r){return{kind:t,value:e,error:r}}var va=null;function fs(t){if(co.useDeprecatedSynchronousErrorHandling){let e=!va;if(e&&(va={errorThrown:!1,error:null}),t(),e){let{errorThrown:r,error:n}=va;if(va=null,r)throw n}}else t()}function fb(t){co.useDeprecatedSynchronousErrorHandling&&va&&(va.errorThrown=!0,va.error=t)}var ba=class extends dn{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,wf(e)&&e.add(this)):this.destination=mR}static create(e,r,n){return new ds(e,r,n)}next(e){this.isStopped?pp(cb(e),this):this._next(e)}error(e){this.isStopped?pp(lb(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?pp(ub,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},pR=Function.prototype.bind;function hp(t,e){return pR.call(t,e)}var gp=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:r}=this;if(r.next)try{r.next(e)}catch(n){_f(n)}}error(e){let{partialObserver:r}=this;if(r.error)try{r.error(e)}catch(n){_f(n)}else _f(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(r){_f(r)}}},ds=class extends ba{constructor(e,r,n){super();let i;if(vt(e)||!e)i={next:e??void 0,error:r??void 0,complete:n??void 0};else{let a;this&&co.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=()=>this.unsubscribe(),i={next:e.next&&hp(e.next,a),error:e.error&&hp(e.error,a),complete:e.complete&&hp(e.complete,a)}):i=e}this.destination=new gp(i)}};function _f(t){co.useDeprecatedSynchronousErrorHandling?fb(t):xf(t)}function gR(t){throw t}function pp(t,e){let{onStoppedNotification:r}=co;r&&cs.setTimeout(()=>r(t,e))}var mR={closed:!0,next:fp,error:gR,complete:fp};var hs=typeof Symbol=="function"&&Symbol.observable||"@@observable";function db(t){return t}function hb(t){return t.length===0?db:t.length===1?t[0]:function(r){return t.reduce((n,i)=>i(n),r)}}var Nr=(()=>{class t{constructor(r){r&&(this._subscribe=r)}lift(r){let n=new t;return n.source=this,n.operator=r,n}subscribe(r,n,i){let a=vR(r)?r:new ds(r,n,i);return fs(()=>{let{operator:u,source:s}=this;a.add(u?u.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(r){try{return this._subscribe(r)}catch(n){r.error(n)}}forEach(r,n){return n=pb(n),new n((i,a)=>{let u=new ds({next:s=>{try{r(s)}catch(l){a(l),u.unsubscribe()}},error:a,complete:i});this.subscribe(u)})}_subscribe(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)}[hs](){return this}pipe(...r){return hb(r)(this)}toPromise(r){return r=pb(r),new r((n,i)=>{let a;this.subscribe(u=>a=u,u=>i(u),()=>n(a))})}}return t.create=e=>new t(e),t})();function pb(t){var e;return(e=t??co.Promise)!==null&&e!==void 0?e:Promise}function yR(t){return t&&vt(t.next)&&vt(t.error)&&vt(t.complete)}function vR(t){return t&&t instanceof ba||yR(t)&&wf(t)}function bR(t){return vt(t?.lift)}function ps(t){return e=>{if(bR(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function gs(t,e,r,n,i){return new mp(t,e,r,n,i)}var mp=class extends ba{constructor(e,r,n,i,a,u){super(e),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=r?function(s){try{r(s)}catch(l){e.error(l)}}:super._next,this._error=i?function(s){try{i(s)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:r}=this;super.unsubscribe(),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var gb=vf(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var Ai=(()=>{class t extends Nr{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){let n=new Ef(this,this);return n.operator=r,n}_throwIfClosed(){if(this.closed)throw new gb}next(r){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(r)}})}error(r){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;let{observers:n}=this;for(;n.length;)n.shift().error(r)}})}complete(){fs(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){let{hasError:n,isStopped:i,observers:a}=this;return n||i?cp:(this.currentObservers=null,a.push(r),new dn(()=>{this.currentObservers=null,ll(a,r)}))}_checkFinalizedStatuses(r){let{hasError:n,thrownError:i,isStopped:a}=this;n?r.error(i):a&&r.complete()}asObservable(){let r=new Nr;return r.source=this,r}}return t.create=(e,r)=>new Ef(e,r),t})(),Ef=class extends Ai{constructor(e,r){super(),this.destination=e,this.source=r}next(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.next)===null||n===void 0||n.call(r,e)}error(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.error)===null||n===void 0||n.call(r,e)}complete(){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e)}_subscribe(e){var r,n;return(n=(r=this.source)===null||r===void 0?void 0:r.subscribe(e))!==null&&n!==void 0?n:cp}};var cl=class extends Ai{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let r=super._subscribe(e);return!r.closed&&e.next(this._value),r}getValue(){let{hasError:e,thrownError:r,_value:n}=this;if(e)throw r;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};function wR(t){return t[t.length-1]}function mb(t){return vt(wR(t))?t.pop():void 0}function vb(t,e,r,n){function i(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function s(c){try{o(n.next(c))}catch(f){u(f)}}function l(c){try{o(n.throw(c))}catch(f){u(f)}}function o(c){c.done?a(c.value):i(c.value).then(s,l)}o((n=n.apply(t,e||[])).next())})}function yb(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function wa(t){return this instanceof wa?(this.v=t,this):new wa(t)}function bb(t,e,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n=r.apply(t,e||[]),i,a=[];return i=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),s("next"),s("throw"),s("return",u),i[Symbol.asyncIterator]=function(){return this},i;function u(h){return function(p){return Promise.resolve(p).then(h,f)}}function s(h,p){n[h]&&(i[h]=function(m){return new Promise(function(v,x){a.push([h,m,v,x])>1||l(h,m)})},p&&(i[h]=p(i[h])))}function l(h,p){try{o(n[h](p))}catch(m){d(a[0][3],m)}}function o(h){h.value instanceof wa?Promise.resolve(h.value.v).then(c,f):d(a[0][2],h)}function c(h){l("next",h)}function f(h){l("throw",h)}function d(h,p){h(p),a.shift(),a.length&&l(a[0][0],a[0][1])}}function wb(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],r;return e?e.call(t):(t=typeof yb=="function"?yb(t):t[Symbol.iterator](),r={},n("next"),n("throw"),n("return"),r[Symbol.asyncIterator]=function(){return this},r);function n(a){r[a]=t[a]&&function(u){return new Promise(function(s,l){u=t[a](u),i(s,l,u.done,u.value)})}}function i(a,u,s,l){Promise.resolve(l).then(function(o){a({value:o,done:s})},u)}}var Tf=t=>t&&typeof t.length=="number"&&typeof t!="function";function If(t){return vt(t?.then)}function Af(t){return vt(t[hs])}function Sf(t){return Symbol.asyncIterator&&vt(t?.[Symbol.asyncIterator])}function Df(t){return new TypeError(`You provided ${t!==null&&typeof t=="object"?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}function xR(){return typeof Symbol!="function"||!Symbol.iterator?"@@iterator":Symbol.iterator}var Cf=xR();function Of(t){return vt(t?.[Cf])}function Pf(t){return bb(this,arguments,function*(){let r=t.getReader();try{for(;;){let{value:n,done:i}=yield wa(r.read());if(i)return yield wa(void 0);yield yield wa(n)}}finally{r.releaseLock()}})}function Mf(t){return vt(t?.getReader)}function Si(t){if(t instanceof Nr)return t;if(t!=null){if(Af(t))return _R(t);if(Tf(t))return ER(t);if(If(t))return TR(t);if(Sf(t))return xb(t);if(Of(t))return IR(t);if(Mf(t))return AR(t)}throw Df(t)}function _R(t){return new Nr(e=>{let r=t[hs]();if(vt(r.subscribe))return r.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}function ER(t){return new Nr(e=>{for(let r=0;r<t.length&&!e.closed;r++)e.next(t[r]);e.complete()})}function TR(t){return new Nr(e=>{t.then(r=>{e.closed||(e.next(r),e.complete())},r=>e.error(r)).then(null,xf)})}function IR(t){return new Nr(e=>{for(let r of t)if(e.next(r),e.closed)return;e.complete()})}function xb(t){return new Nr(e=>{SR(t,e).catch(r=>e.error(r))})}function AR(t){return xb(Pf(t))}function SR(t,e){var r,n,i,a;return vb(this,void 0,void 0,function*(){try{for(r=wb(t);n=yield r.next(),!n.done;){let u=n.value;if(e.next(u),e.closed)return}}catch(u){i={error:u}}finally{try{n&&!n.done&&(a=r.return)&&(yield a.call(r))}finally{if(i)throw i.error}}e.complete()})}function Oo(t,e,r,n=0,i=!1){let a=e.schedule(function(){r(),i?t.add(this.schedule(null,n)):this.unsubscribe()},n);if(t.add(a),!i)return a}function Nf(t,e=0){return ps((r,n)=>{r.subscribe(gs(n,i=>Oo(n,t,()=>n.next(i),e),()=>Oo(n,t,()=>n.complete(),e),i=>Oo(n,t,()=>n.error(i),e)))})}function Rf(t,e=0){return ps((r,n)=>{n.add(t.schedule(()=>r.subscribe(n),e))})}function _b(t,e){return Si(t).pipe(Rf(e),Nf(e))}function Eb(t,e){return Si(t).pipe(Rf(e),Nf(e))}function Tb(t,e){return new Nr(r=>{let n=0;return e.schedule(function(){n===t.length?r.complete():(r.next(t[n++]),r.closed||this.schedule())})})}function Ib(t,e){return new Nr(r=>{let n;return Oo(r,e,()=>{n=t[Cf](),Oo(r,e,()=>{let i,a;try{({value:i,done:a}=n.next())}catch(u){r.error(u);return}a?r.complete():r.next(i)},0,!0)}),()=>vt(n?.return)&&n.return()})}function Ff(t,e){if(!t)throw new Error("Iterable cannot be null");return new Nr(r=>{Oo(r,e,()=>{let n=t[Symbol.asyncIterator]();Oo(r,e,()=>{n.next().then(i=>{i.done?r.complete():r.next(i.value)})},0,!0)})})}function Ab(t,e){return Ff(Pf(t),e)}function Sb(t,e){if(t!=null){if(Af(t))return _b(t,e);if(Tf(t))return Tb(t,e);if(If(t))return Eb(t,e);if(Sf(t))return Ff(t,e);if(Of(t))return Ib(t,e);if(Mf(t))return Ab(t,e)}throw Df(t)}function yp(t,e){return e?Sb(t,e):Si(t)}function xa(t,e){return ps((r,n)=>{let i=0;r.subscribe(gs(n,a=>{n.next(t.call(e,a,i++))}))})}var{isArray:DR}=Array;function CR(t,e){return DR(e)?t(...e):t(e)}function Db(t){return xa(e=>CR(t,e))}var{isArray:OR}=Array,{getPrototypeOf:PR,prototype:MR,keys:NR}=Object;function Cb(t){if(t.length===1){let e=t[0];if(OR(e))return{args:e,keys:null};if(RR(e)){let r=NR(e);return{args:r.map(n=>e[n]),keys:r}}}return{args:t,keys:null}}function RR(t){return t&&typeof t=="object"&&PR(t)===MR}function Ob(t,e){return t.reduce((r,n,i)=>(r[n]=e[i],r),{})}function vp(...t){let e=mb(t),{args:r,keys:n}=Cb(t),i=new Nr(a=>{let{length:u}=r;if(!u){a.complete();return}let s=new Array(u),l=u,o=u;for(let c=0;c<u;c++){let f=!1;Si(r[c]).subscribe(gs(a,d=>{f||(f=!0,o--),s[c]=d},()=>l--,void 0,()=>{(!l||!f)&&(o||a.next(n?Ob(n,s):s),a.complete())}))}});return e?i.pipe(Db(e)):i}var FR="https://g.co/ng/security#xss",rt=class extends Error{constructor(e,r){super(Ag(e,r)),this.code=e}};function Ag(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function _l(t){return{toString:t}.toString()}var kf="__parameters__";function kR(t){return function(...r){if(t){let n=t(...r);for(let i in n)this[i]=n[i]}}}function pw(t,e,r){return _l(()=>{let n=kR(e);function i(...a){if(this instanceof i)return n.apply(this,a),this;let u=new i(...a);return s.annotation=u,s;function s(l,o,c){let f=l.hasOwnProperty(kf)?l[kf]:Object.defineProperty(l,kf,{value:[]})[kf];for(;f.length<=c;)f.push(null);return(f[c]=f[c]||[]).push(u),l}}return r&&(i.prototype=Object.create(r.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}var fl=globalThis;function Zt(t){for(let e in t)if(t[e]===Zt)return e;throw Error("Could not find renamed property on target object.")}function LR(t,e){for(let r in e)e.hasOwnProperty(r)&&!t.hasOwnProperty(r)&&(t[r]=e[r])}function An(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(An).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r===-1?e:e.substring(0,r)}function Pb(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var BR=Zt({__forward_ref__:Zt});function Mi(t){return t.__forward_ref__=Mi,t.toString=function(){return An(this())},t}function nn(t){return gw(t)?t():t}function gw(t){return typeof t=="function"&&t.hasOwnProperty(BR)&&t.__forward_ref__===Mi}function Kt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function Os(t){return{providers:t.providers||[],imports:t.imports||[]}}function Sg(t){return Mb(t,mw)||Mb(t,yw)}function Mb(t,e){return t.hasOwnProperty(e)?t[e]:null}function $R(t){let e=t&&(t[mw]||t[yw]);return e||null}function Nb(t){return t&&(t.hasOwnProperty(Rb)||t.hasOwnProperty(VR))?t[Rb]:null}var mw=Zt({\u0275prov:Zt}),Rb=Zt({\u0275inj:Zt}),yw=Zt({ngInjectableDef:Zt}),VR=Zt({ngInjectorDef:Zt}),bt=class{constructor(e,r){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof r=="number"?this.__NG_ELEMENT_ID__=r:r!==void 0&&(this.\u0275prov=Kt({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function vw(t){return t&&!!t.\u0275providers}var jR=Zt({\u0275cmp:Zt}),UR=Zt({\u0275dir:Zt}),HR=Zt({\u0275pipe:Zt});var Gf=Zt({\u0275fac:Zt}),dl=Zt({__NG_ELEMENT_ID__:Zt}),Fb=Zt({__NG_ENV_ID__:Zt});function bw(t){return typeof t=="string"?t:t==null?"":String(t)}function zR(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():bw(t)}function GR(t,e){let r=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new rt(-200,t)}function Dg(t,e){throw new rt(-201,!1)}var Ze=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ze||{}),Rp;function ww(){return Rp}function Po(t){let e=Rp;return Rp=t,e}function xw(t,e,r){let n=Sg(t);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(r&Ze.Optional)return null;if(e!==void 0)return e;Dg(t,"Injector")}var WR={},hl=WR,Fp="__NG_DI_FLAG__",Wf="ngTempTokenPath",qR="ngTokenPath",XR=/\n/gm,YR="\u0275",kb="__source",ws;function ZR(){return ws}function ms(t){let e=ws;return ws=t,e}function KR(t,e=Ze.Default){if(ws===void 0)throw new rt(-203,!1);return ws===null?xw(t,void 0,e):ws.get(t,e&Ze.Optional?null:void 0,e)}function Dt(t,e=Ze.Default){return(ww()||KR)(nn(t),e)}function Dr(t,e=Ze.Default){return Dt(t,cd(e))}function cd(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function kp(t){let e=[];for(let r=0;r<t.length;r++){let n=nn(t[r]);if(Array.isArray(n)){if(n.length===0)throw new rt(900,!1);let i,a=Ze.Default;for(let u=0;u<n.length;u++){let s=n[u],l=QR(s);typeof l=="number"?l===-1?i=s.token:a|=l:i=s}e.push(Dt(i,a))}else e.push(Dt(n))}return e}function _w(t,e){return t[Fp]=e,t.prototype[Fp]=e,t}function QR(t){return t[Fp]}function JR(t,e,r,n){let i=t[Wf];throw e[kb]&&i.unshift(e[kb]),t.message=eF(`
`+t.message,i,r,n),t[qR]=i,t[Wf]=null,t}function eF(t,e,r,n=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==YR?t.slice(2):t;let i=An(e);if(Array.isArray(e))i=e.map(An).join(" -> ");else if(typeof e=="object"){let a=[];for(let u in e)if(e.hasOwnProperty(u)){let s=e[u];a.push(u+":"+(typeof s=="string"?JSON.stringify(s):An(s)))}i=`{${a.join(", ")}}`}return`${r}${n?"("+n+")":""}[${i}]: ${t.replace(XR,`
  `)}`}var Ew=_w(pw("Optional"),8);var tF=_w(pw("SkipSelf"),4);function _s(t,e){let r=t.hasOwnProperty(Gf);return r?t[Gf]:null}function rF(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){let i=t[n],a=e[n];if(r&&(i=r(i),a=r(a)),a!==i)return!1}return!0}function nF(t){return t.flat(Number.POSITIVE_INFINITY)}function Cg(t,e){t.forEach(r=>Array.isArray(r)?Cg(r,e):e(r))}function Tw(t,e,r){e>=t.length?t.push(r):t.splice(e,0,r)}function qf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function oF(t,e,r,n){let i=t.length;if(i==e)t.push(r,n);else if(i===1)t.push(n,t[0]),t[0]=r;else{for(i--,t.push(t[i-1],t[i]);i>e;){let a=i-2;t[i]=t[a],i--}t[e]=r,t[e+1]=n}}function iF(t,e,r){let n=El(t,e);return n>=0?t[n|1]=r:(n=~n,oF(t,n,e,r)),n}function bp(t,e){let r=El(t,e);if(r>=0)return t[r|1]}function El(t,e){return aF(t,e,1)}function aF(t,e,r){let n=0,i=t.length>>r;for(;i!==n;){let a=n+(i-n>>1),u=t[a<<r];if(e===u)return a<<r;u>e?i=a:n=a+1}return~(i<<r)}var Es={},jn=[],pl=new bt(""),Iw=new bt("",-1),Aw=new bt(""),Xf=class{get(e,r=hl){if(r===hl){let n=new Error(`NullInjectorError: No provider for ${An(e)}!`);throw n.name="NullInjectorError",n}return r}},Sw=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Sw||{}),Fo=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Fo||{}),po=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(po||{});function sF(t,e,r){let n=t.length;for(;;){let i=t.indexOf(e,r);if(i===-1)return i;if(i===0||t.charCodeAt(i-1)<=32){let a=e.length;if(i+a===n||t.charCodeAt(i+a)<=32)return i}r=i+1}}function Lp(t,e,r){let n=0;for(;n<r.length;){let i=r[n];if(typeof i=="number"){if(i!==0)break;n++;let a=r[n++],u=r[n++],s=r[n++];t.setAttribute(e,u,s,a)}else{let a=i,u=r[++n];lF(a)?t.setProperty(e,a,u):t.setAttribute(e,a,u),n++}}return n}function uF(t){return t===3||t===4||t===6}function lF(t){return t.charCodeAt(0)===64}function gl(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let r=-1;for(let n=0;n<e.length;n++){let i=e[n];typeof i=="number"?r=i:r===0||(r===-1||r===2?Lb(t,r,i,null,e[++n]):Lb(t,r,i,null,null))}}return t}function Lb(t,e,r,n,i){let a=0,u=t.length;if(e===-1)u=-1;else for(;a<t.length;){let s=t[a++];if(typeof s=="number"){if(s===e){u=-1;break}else if(s>e){u=a-1;break}}}for(;a<t.length;){let s=t[a];if(typeof s=="number")break;if(s===r){if(n===null){i!==null&&(t[a+1]=i);return}else if(n===t[a+1]){t[a+2]=i;return}}a++,n!==null&&a++,i!==null&&a++}u!==-1&&(t.splice(u,0,e),a=u+1),t.splice(a++,0,r),n!==null&&t.splice(a++,0,n),i!==null&&t.splice(a++,0,i)}var Dw="ng-template";function cF(t,e,r,n){let i=0;if(n){for(;i<e.length&&typeof e[i]=="string";i+=2)if(e[i]==="class"&&sF(e[i+1].toLowerCase(),r,0)!==-1)return!0}else if(Og(t))return!1;if(i=e.indexOf(1,i),i>-1){let a;for(;++i<e.length&&typeof(a=e[i])=="string";)if(a.toLowerCase()===r)return!0}return!1}function Og(t){return t.type===4&&t.value!==Dw}function fF(t,e,r){let n=t.type===4&&!r?Dw:t.value;return e===n}function dF(t,e,r){let n=4,i=t.attrs,a=i!==null?gF(i):0,u=!1;for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number"){if(!u&&!fo(n)&&!fo(l))return!1;if(u&&fo(l))continue;u=!1,n=l|n&1;continue}if(!u)if(n&4){if(n=2|n&1,l!==""&&!fF(t,l,r)||l===""&&e.length===1){if(fo(n))return!1;u=!0}}else if(n&8){if(i===null||!cF(t,i,l,r)){if(fo(n))return!1;u=!0}}else{let o=e[++s],c=hF(l,i,Og(t),r);if(c===-1){if(fo(n))return!1;u=!0;continue}if(o!==""){let f;if(c>a?f="":f=i[c+1].toLowerCase(),n&2&&o!==f){if(fo(n))return!1;u=!0}}}}return fo(n)||u}function fo(t){return(t&1)===0}function hF(t,e,r,n){if(e===null)return-1;let i=0;if(n||!r){let a=!1;for(;i<e.length;){let u=e[i];if(u===t)return i;if(u===3||u===6)a=!0;else if(u===1||u===2){let s=e[++i];for(;typeof s=="string";)s=e[++i];continue}else{if(u===4)break;if(u===0){i+=4;continue}}i+=a?1:2}return-1}else return mF(e,t)}function pF(t,e,r=!1){for(let n=0;n<e.length;n++)if(dF(t,e[n],r))return!0;return!1}function gF(t){for(let e=0;e<t.length;e++){let r=t[e];if(uF(r))return e}return t.length}function mF(t,e){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){let n=t[r];if(typeof n=="number")return-1;if(n===e)return r;r++}return-1}function Bb(t,e){return t?":not("+e.trim()+")":e}function yF(t){let e=t[0],r=1,n=2,i="",a=!1;for(;r<t.length;){let u=t[r];if(typeof u=="string")if(n&2){let s=t[++r];i+="["+u+(s.length>0?'="'+s+'"':"")+"]"}else n&8?i+="."+u:n&4&&(i+=" "+u);else i!==""&&!fo(u)&&(e+=Bb(a,i),i=""),n=u,a=a||!fo(n);r++}return i!==""&&(e+=Bb(a,i)),e}function vF(t){return t.map(yF).join(",")}function bF(t){let e=[],r=[],n=1,i=2;for(;n<t.length;){let a=t[n];if(typeof a=="string")i===2?a!==""&&e.push(a,t[++n]):i===8&&r.push(a);else{if(!fo(i))break;i=a}n++}return{attrs:e,classes:r}}function fd(t){return _l(()=>{let e=Pw(t),r=B(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Sw.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Fo.Emulated,styles:t.styles||jn,_:null,schemas:t.schemas||null,tView:null,id:""});Mw(r);let n=t.dependencies;return r.directiveDefs=Vb(n,!1),r.pipeDefs=Vb(n,!0),r.id=EF(r),r})}function wF(t){return Ts(t)||Cw(t)}function xF(t){return t!==null}function Ps(t){return _l(()=>({type:t.type,bootstrap:t.bootstrap||jn,declarations:t.declarations||jn,imports:t.imports||jn,exports:t.exports||jn,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function $b(t,e){if(t==null)return Es;let r={};for(let n in t)if(t.hasOwnProperty(n)){let i=t[n],a,u,s=po.None;Array.isArray(i)?(s=i[0],a=i[1],u=i[2]??a):(a=i,u=i),e?(r[a]=s!==po.None?[n,s]:n,e[a]=u):r[a]=n}return r}function hn(t){return _l(()=>{let e=Pw(t);return Mw(e),e})}function Ts(t){return t[jR]||null}function Cw(t){return t[UR]||null}function Ow(t){return t[HR]||null}function _F(t){let e=Ts(t)||Cw(t)||Ow(t);return e!==null?e.standalone:!1}function Pw(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Es,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||jn,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:$b(t.inputs,e),outputs:$b(t.outputs),debugInfo:null}}function Mw(t){t.features?.forEach(e=>e(t))}function Vb(t,e){if(!t)return null;let r=e?Ow:wF;return()=>(typeof t=="function"?t():t).map(n=>r(n)).filter(xF)}function EF(t){let e=0,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let i of r)e=Math.imul(31,e)+i.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function Nw(t){return{\u0275providers:t}}function TF(...t){return{\u0275providers:Rw(!0,t),\u0275fromNgModule:!0}}function Rw(t,...e){let r=[],n=new Set,i,a=u=>{r.push(u)};return Cg(e,u=>{let s=u;Bp(s,a,[],n)&&(i||=[],i.push(s))}),i!==void 0&&Fw(i,a),r}function Fw(t,e){for(let r=0;r<t.length;r++){let{ngModule:n,providers:i}=t[r];Pg(i,a=>{e(a,n)})}}function Bp(t,e,r,n){if(t=nn(t),!t)return!1;let i=null,a=Nb(t),u=!a&&Ts(t);if(!a&&!u){let l=t.ngModule;if(a=Nb(l),a)i=l;else return!1}else{if(u&&!u.standalone)return!1;i=t}let s=n.has(i);if(u){if(s)return!1;if(n.add(i),u.dependencies){let l=typeof u.dependencies=="function"?u.dependencies():u.dependencies;for(let o of l)Bp(o,e,r,n)}}else if(a){if(a.imports!=null&&!s){n.add(i);let o;try{Cg(a.imports,c=>{Bp(c,e,r,n)&&(o||=[],o.push(c))})}finally{}o!==void 0&&Fw(o,e)}if(!s){let o=_s(i)||(()=>new i);e({provide:i,useFactory:o,deps:jn},i),e({provide:Aw,useValue:i,multi:!0},i),e({provide:pl,useValue:()=>Dt(i),multi:!0},i)}let l=a.providers;if(l!=null&&!s){let o=t;Pg(l,c=>{e(c,o)})}}else return!1;return i!==t&&t.providers!==void 0}function Pg(t,e){for(let r of t)vw(r)&&(r=r.\u0275providers),Array.isArray(r)?Pg(r,e):e(r)}var IF=Zt({provide:String,useValue:Zt});function kw(t){return t!==null&&typeof t=="object"&&IF in t}function AF(t){return!!(t&&t.useExisting)}function SF(t){return!!(t&&t.useFactory)}function Is(t){return typeof t=="function"}function DF(t){return!!t.useClass}var dd=new bt(""),$f={},CF={},wp;function Mg(){return wp===void 0&&(wp=new Xf),wp}var Ci=class{},Yf=class extends Ci{get destroyed(){return this._destroyed}constructor(e,r,n,i){super(),this.parent=r,this.source=n,this.scopes=i,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,Vp(e,u=>this.processProvider(u)),this.records.set(Iw,ys(void 0,this)),i.has("environment")&&this.records.set(Ci,ys(void 0,this));let a=this.records.get(dd);a!=null&&typeof a.value=="string"&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(Aw,jn,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=ft(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let r=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of r)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),ft(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let r=ms(this),n=Po(void 0),i;try{return e()}finally{ms(r),Po(n)}}get(e,r=hl,n=Ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(Fb))return e[Fb](this);n=cd(n);let i,a=ms(this),u=Po(void 0);try{if(!(n&Ze.SkipSelf)){let l=this.records.get(e);if(l===void 0){let o=RF(e)&&Sg(e);o&&this.injectableDefInScope(o)?l=ys($p(e),$f):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let s=n&Ze.Self?Mg():this.parent;return r=n&Ze.Optional&&r===hl?null:r,s.get(e,r)}catch(s){if(s.name==="NullInjectorError"){if((s[Wf]=s[Wf]||[]).unshift(An(e)),a)throw s;return JR(s,e,"R3InjectorError",this.source)}else throw s}finally{Po(u),ms(a)}}resolveInjectorInitializers(){let e=ft(null),r=ms(this),n=Po(void 0),i;try{let a=this.get(pl,jn,Ze.Self);for(let u of a)u()}finally{ms(r),Po(n),ft(e)}}toString(){let e=[],r=this.records;for(let n of r.keys())e.push(An(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new rt(205,!1)}processProvider(e){e=nn(e);let r=Is(e)?e:nn(e&&e.provide),n=PF(e);if(!Is(e)&&e.multi===!0){let i=this.records.get(r);i||(i=ys(void 0,$f,!0),i.factory=()=>kp(i.multi),this.records.set(r,i)),r=e,i.multi.push(e)}this.records.set(r,n)}hydrate(e,r){let n=ft(null);try{return r.value===$f&&(r.value=CF,r.value=r.factory()),typeof r.value=="object"&&r.value&&NF(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{ft(n)}}injectableDefInScope(e){if(!e.providedIn)return!1;let r=nn(e.providedIn);return typeof r=="string"?r==="any"||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(e){let r=this._onDestroyHooks.indexOf(e);r!==-1&&this._onDestroyHooks.splice(r,1)}};function $p(t){let e=Sg(t),r=e!==null?e.factory:_s(t);if(r!==null)return r;if(t instanceof bt)throw new rt(204,!1);if(t instanceof Function)return OF(t);throw new rt(204,!1)}function OF(t){if(t.length>0)throw new rt(204,!1);let r=$R(t);return r!==null?()=>r.factory(t):()=>new t}function PF(t){if(kw(t))return ys(void 0,t.useValue);{let e=Lw(t);return ys(e,$f)}}function Lw(t,e,r){let n;if(Is(t)){let i=nn(t);return _s(i)||$p(i)}else if(kw(t))n=()=>nn(t.useValue);else if(SF(t))n=()=>t.useFactory(...kp(t.deps||[]));else if(AF(t))n=()=>Dt(nn(t.useExisting));else{let i=nn(t&&(t.useClass||t.provide));if(MF(t))n=()=>new i(...kp(t.deps));else return _s(i)||$p(i)}return n}function ys(t,e,r=!1){return{factory:t,value:e,multi:r?[]:void 0}}function MF(t){return!!t.deps}function NF(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function RF(t){return typeof t=="function"||typeof t=="object"&&t instanceof bt}function Vp(t,e){for(let r of t)Array.isArray(r)?Vp(r,e):r&&vw(r)?Vp(r.\u0275providers,e):e(r)}function FF(){return ww()!==void 0||ZR()!=null}function kF(t){return typeof t=="function"}var si=0,je=1,Te=2,zr=3,ho=4,mo=5,Zf=6,ml=7,go=8,As=9,ko=10,Fr=11,yl=12,jb=13,Ms=14,Lo=15,Tl=16,vs=17,oi=18,hd=19,Bw=20,Di=21,xp=22,Ta=23,Oi=25,$w=1;var Ia=7,Kf=8,Ss=9,Sn=10,Ng=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ng||{});function _a(t){return Array.isArray(t)&&typeof t[$w]=="object"}function ui(t){return Array.isArray(t)&&t[$w]===!0}function Vw(t){return(t.flags&4)!==0}function pd(t){return t.componentOffset>-1}function Rg(t){return(t.flags&1)===1}function Pi(t){return!!t.template}function LF(t){return(t[Te]&512)!==0}var jp=class{constructor(e,r,n){this.previousValue=e,this.currentValue=r,this.firstChange=n}isFirstChange(){return this.firstChange}};function jw(t,e,r,n){e!==null?e.applyValueToInputSignal(e,n):t[r]=n}function gd(){return Uw}function Uw(t){return t.type.prototype.ngOnChanges&&(t.setInput=$F),BF}gd.ngInherit=!0;function BF(){let t=zw(this),e=t?.current;if(e){let r=t.previous;if(r===Es)t.previous=e;else for(let n in e)r[n]=e[n];t.current=null,this.ngOnChanges(e)}}function $F(t,e,r,n,i){let a=this.declaredInputs[n],u=zw(t)||VF(t,{previous:Es,current:null}),s=u.current||(u.current={}),l=u.previous,o=l[a];s[a]=new jp(o&&o.currentValue,r,l===Es),jw(t,e,i,r)}var Hw="__ngSimpleChanges__";function zw(t){return t[Hw]||null}function VF(t,e){return t[Hw]=e}var Ub=null;var Mo=function(t,e,r){Ub?.(t,e,r)},jF="svg",UF="math",HF=!1;function zF(){return HF}function Bo(t){for(;Array.isArray(t);)t=t[si];return t}function Gw(t,e){return Bo(e[t])}function yo(t,e){return Bo(e[t.index])}function Ww(t,e){return t.data[e]}function Ni(t,e){let r=e[t];return _a(r)?r:r[si]}function GF(t){return(t[Te]&4)===4}function Fg(t){return(t[Te]&128)===128}function WF(t){return ui(t[zr])}function Qf(t,e){return e==null?null:t[e]}function qw(t){t[vs]=0}function qF(t){t[Te]&1024||(t[Te]|=1024,Fg(t)&&vl(t))}function XF(t,e){for(;t>0;)e=e[Ms],t--;return e}function kg(t){return!!(t[Te]&9216||t[Ta]?.dirty)}function Up(t){t[ko].changeDetectionScheduler?.notify(1),kg(t)?vl(t):t[Te]&64&&(zF()?(t[Te]|=1024,vl(t)):t[ko].changeDetectionScheduler?.notify())}function vl(t){t[ko].changeDetectionScheduler?.notify();let e=bl(t);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!Fg(e)));)e=bl(e)}function Xw(t,e){if((t[Te]&256)===256)throw new rt(911,!1);t[Di]===null&&(t[Di]=[]),t[Di].push(e)}function YF(t,e){if(t[Di]===null)return;let r=t[Di].indexOf(e);r!==-1&&t[Di].splice(r,1)}function bl(t){let e=t[zr];return ui(e)?e[zr]:e}var ze={lFrame:tx(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function ZF(){return ze.lFrame.elementDepthCount}function KF(){ze.lFrame.elementDepthCount++}function QF(){ze.lFrame.elementDepthCount--}function Yw(){return ze.bindingsEnabled}function JF(){return ze.skipHydrationRootTNode!==null}function e8(t){return ze.skipHydrationRootTNode===t}function t8(){ze.skipHydrationRootTNode=null}function Vt(){return ze.lFrame.lView}function pn(){return ze.lFrame.tView}function Il(t){return ze.lFrame.contextLView=t,t[go]}function Al(t){return ze.lFrame.contextLView=null,t}function Dn(){let t=Zw();for(;t!==null&&t.type===64;)t=t.parent;return t}function Zw(){return ze.lFrame.currentTNode}function r8(){let t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function Sl(t,e){let r=ze.lFrame;r.currentTNode=t,r.isParent=e}function Kw(){return ze.lFrame.isParent}function n8(){ze.lFrame.isParent=!1}function o8(t){return ze.lFrame.bindingIndex=t}function Lg(){return ze.lFrame.bindingIndex++}function i8(t){let e=ze.lFrame,r=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,r}function a8(){return ze.lFrame.inI18n}function s8(t,e){let r=ze.lFrame;r.bindingIndex=r.bindingRootIndex=t,Hp(e)}function u8(){return ze.lFrame.currentDirectiveIndex}function Hp(t){ze.lFrame.currentDirectiveIndex=t}function l8(t){let e=ze.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Qw(){return ze.lFrame.currentQueryIndex}function Bg(t){ze.lFrame.currentQueryIndex=t}function c8(t){let e=t[je];return e.type===2?e.declTNode:e.type===1?t[mo]:null}function Jw(t,e,r){if(r&Ze.SkipSelf){let i=e,a=t;for(;i=i.parent,i===null&&!(r&Ze.Host);)if(i=c8(a),i===null||(a=a[Ms],i.type&10))break;if(i===null)return!1;e=i,t=a}let n=ze.lFrame=ex();return n.currentTNode=e,n.lView=t,!0}function $g(t){let e=ex(),r=t[je];ze.lFrame=e,e.currentTNode=r.firstChild,e.lView=t,e.tView=r,e.contextLView=t,e.bindingIndex=r.bindingStartIndex,e.inI18n=!1}function ex(){let t=ze.lFrame,e=t===null?null:t.child;return e===null?tx(t):e}function tx(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function rx(){let t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var nx=rx;function Vg(){let t=rx();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function f8(t){return(ze.lFrame.contextLView=XF(t,ze.lFrame.contextLView))[go]}function Ns(){return ze.lFrame.selectedIndex}function Aa(t){ze.lFrame.selectedIndex=t}function ox(){let t=ze.lFrame;return Ww(t.tView,t.selectedIndex)}function d8(){return ze.lFrame.currentNamespace}var ix=!0;function jg(){return ix}function Ug(t){ix=t}function h8(t,e,r){let{ngOnChanges:n,ngOnInit:i,ngDoCheck:a}=e.type.prototype;if(n){let u=Uw(e);(r.preOrderHooks??=[]).push(t,u),(r.preOrderCheckHooks??=[]).push(t,u)}i&&(r.preOrderHooks??=[]).push(0-t,i),a&&((r.preOrderHooks??=[]).push(t,a),(r.preOrderCheckHooks??=[]).push(t,a))}function Hg(t,e){for(let r=e.directiveStart,n=e.directiveEnd;r<n;r++){let a=t.data[r].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:o,ngOnDestroy:c}=a;u&&(t.contentHooks??=[]).push(-r,u),s&&((t.contentHooks??=[]).push(r,s),(t.contentCheckHooks??=[]).push(r,s)),l&&(t.viewHooks??=[]).push(-r,l),o&&((t.viewHooks??=[]).push(r,o),(t.viewCheckHooks??=[]).push(r,o)),c!=null&&(t.destroyHooks??=[]).push(r,c)}}function Vf(t,e,r){ax(t,e,3,r)}function jf(t,e,r,n){(t[Te]&3)===r&&ax(t,e,r,n)}function _p(t,e){let r=t[Te];(r&3)===e&&(r&=16383,r+=1,t[Te]=r)}function ax(t,e,r,n){let i=n!==void 0?t[vs]&65535:0,a=n??-1,u=e.length-1,s=0;for(let l=i;l<u;l++)if(typeof e[l+1]=="number"){if(s=e[l],n!=null&&s>=n)break}else e[l]<0&&(t[vs]+=65536),(s<a||a==-1)&&(p8(t,r,e,l),t[vs]=(t[vs]&4294901760)+l+2),l++}function Hb(t,e){Mo(4,t,e);let r=ft(null);try{e.call(t)}finally{ft(r),Mo(5,t,e)}}function p8(t,e,r,n){let i=r[n]<0,a=r[n+1],u=i?-r[n]:r[n],s=t[u];i?t[Te]>>14<t[vs]>>16&&(t[Te]&3)===e&&(t[Te]+=16384,Hb(s,a)):Hb(s,a)}var xs=-1,Sa=class{constructor(e,r,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=n}};function g8(t){return t instanceof Sa}function m8(t){return(t.flags&8)!==0}function y8(t){return(t.flags&16)!==0}function sx(t){return t!==xs}function Jf(t){return t&32767}function v8(t){return t>>16}function ed(t,e){let r=v8(t),n=e;for(;r>0;)n=n[Ms],r--;return n}var zp=!0;function zb(t){let e=zp;return zp=t,e}var b8=256,ux=b8-1,lx=5,w8=0,No={};function x8(t,e,r){let n;typeof r=="string"?n=r.charCodeAt(0)||0:r.hasOwnProperty(dl)&&(n=r[dl]),n==null&&(n=r[dl]=w8++);let i=n&ux,a=1<<i;e.data[t+(i>>lx)]|=a}function td(t,e){let r=cx(t,e);if(r!==-1)return r;let n=e[je];n.firstCreatePass&&(t.injectorIndex=e.length,Ep(n.data,t),Ep(e,null),Ep(n.blueprint,null));let i=zg(t,e),a=t.injectorIndex;if(sx(i)){let u=Jf(i),s=ed(i,e),l=s[je].data;for(let o=0;o<8;o++)e[a+o]=s[u+o]|l[u+o]}return e[a+8]=i,a}function Ep(t,e){t.push(0,0,0,0,0,0,0,0,e)}function cx(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function zg(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let r=0,n=null,i=e;for(;i!==null;){if(n=gx(i),n===null)return xs;if(r++,i=i[Ms],n.injectorIndex!==-1)return n.injectorIndex|r<<16}return xs}function Gp(t,e,r){x8(t,e,r)}function fx(t,e,r){if(r&Ze.Optional||t!==void 0)return t;Dg(e,"NodeInjector")}function dx(t,e,r,n){if(r&Ze.Optional&&n===void 0&&(n=null),!(r&(Ze.Self|Ze.Host))){let i=t[As],a=Po(void 0);try{return i?i.get(e,n,r&Ze.Optional):xw(e,n,r&Ze.Optional)}finally{Po(a)}}return fx(n,e,r)}function hx(t,e,r,n=Ze.Default,i){if(t!==null){if(e[Te]&2048&&!(n&Ze.Self)){let u=I8(t,e,r,n,No);if(u!==No)return u}let a=px(t,e,r,n,No);if(a!==No)return a}return dx(e,r,n,i)}function px(t,e,r,n,i){let a=E8(r);if(typeof a=="function"){if(!Jw(e,t,n))return n&Ze.Host?fx(i,r,n):dx(e,r,n,i);try{let u;if(u=a(n),u==null&&!(n&Ze.Optional))Dg(r);else return u}finally{nx()}}else if(typeof a=="number"){let u=null,s=cx(t,e),l=xs,o=n&Ze.Host?e[Lo][mo]:null;for((s===-1||n&Ze.SkipSelf)&&(l=s===-1?zg(t,e):e[s+8],l===xs||!Wb(n,!1)?s=-1:(u=e[je],s=Jf(l),e=ed(l,e)));s!==-1;){let c=e[je];if(Gb(a,s,c.data)){let f=_8(s,e,r,u,n,o);if(f!==No)return f}l=e[s+8],l!==xs&&Wb(n,e[je].data[s+8]===o)&&Gb(a,s,e)?(u=c,s=Jf(l),e=ed(l,e)):s=-1}}return i}function _8(t,e,r,n,i,a){let u=e[je],s=u.data[t+8],l=n==null?pd(s)&&zp:n!=u&&(s.type&3)!==0,o=i&Ze.Host&&a===s,c=Uf(s,u,r,l,o);return c!==null?Da(e,u,c,s):No}function Uf(t,e,r,n,i){let a=t.providerIndexes,u=e.data,s=a&1048575,l=t.directiveStart,o=t.directiveEnd,c=a>>20,f=n?s:s+c,d=i?s+c:o;for(let h=f;h<d;h++){let p=u[h];if(h<l&&r===p||h>=l&&p.type===r)return h}if(i){let h=u[l];if(h&&Pi(h)&&h.type===r)return l}return null}function Da(t,e,r,n){let i=t[r],a=e.data;if(g8(i)){let u=i;u.resolving&&GR(zR(a[r]));let s=zb(u.canSeeViewProviders);u.resolving=!0;let l,o=u.injectImpl?Po(u.injectImpl):null,c=Jw(t,n,Ze.Default);try{i=t[r]=u.factory(void 0,a,t,n),e.firstCreatePass&&r>=n.directiveStart&&h8(r,a[r],e)}finally{o!==null&&Po(o),zb(s),u.resolving=!1,nx()}}return i}function E8(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(dl)?t[dl]:void 0;return typeof e=="number"?e>=0?e&ux:T8:e}function Gb(t,e,r){let n=1<<t;return!!(r[e+(t>>lx)]&n)}function Wb(t,e){return!(t&Ze.Self)&&!(t&Ze.Host&&e)}var Ea=class{constructor(e,r){this._tNode=e,this._lView=r}get(e,r,n){return hx(this._tNode,this._lView,e,cd(n),r)}};function T8(){return new Ea(Dn(),Vt())}function Dl(t){return _l(()=>{let e=t.prototype.constructor,r=e[Gf]||Wp(e),n=Object.prototype,i=Object.getPrototypeOf(t.prototype).constructor;for(;i&&i!==n;){let a=i[Gf]||Wp(i);if(a&&a!==r)return a;i=Object.getPrototypeOf(i)}return a=>new a})}function Wp(t){return gw(t)?()=>{let e=Wp(nn(t));return e&&e()}:_s(t)}function I8(t,e,r,n,i){let a=t,u=e;for(;a!==null&&u!==null&&u[Te]&2048&&!(u[Te]&512);){let s=px(a,u,r,n|Ze.Self,No);if(s!==No)return s;let l=a.parent;if(!l){let o=u[Bw];if(o){let c=o.get(r,No,n);if(c!==No)return c}l=gx(u),u=u[Ms]}a=l}return i}function gx(t){let e=t[je],r=e.type;return r===2?e.declTNode:r===1?t[mo]:null}function qb(t,e=null,r=null,n){let i=A8(t,e,r,n);return i.resolveInjectorInitializers(),i}function A8(t,e=null,r=null,n,i=new Set){let a=[r||jn,TF(t)];return n=n||(typeof t=="object"?void 0:An(t)),new Yf(a,e||Mg(),n||null,i)}var md=(()=>{let e=class e{static create(n,i){if(Array.isArray(n))return qb({name:""},i,n,"");{let a=n.name??"";return qb({name:a},n.parent,n.providers,a)}}};e.THROW_IF_NOT_FOUND=hl,e.NULL=new Xf,e.\u0275prov=Kt({token:e,providedIn:"any",factory:()=>Dt(Iw)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var S8="ngOriginalError";function Tp(t){return t[S8]}var ii=class{constructor(){this._console=console}handleError(e){let r=this._findOriginalError(e);this._console.error("ERROR",e),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(e){let r=e&&Tp(e);for(;r&&Tp(r);)r=Tp(r);return r||null}},mx=new bt("",{providedIn:"root",factory:()=>Dr(ii).handleError.bind(void 0)}),yx=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=D8,e.__NG_ENV_ID__=n=>n;let t=e;return t})(),qp=class extends yx{constructor(e){super(),this._lView=e}onDestroy(e){return Xw(this._lView,e),()=>YF(this._lView,e)}};function D8(){return new qp(Vt())}function C8(){return Rs(Dn(),Vt())}function Rs(t,e){return new vo(yo(t,e))}var vo=(()=>{let e=class e{constructor(n){this.nativeElement=n}};e.__NG_ELEMENT_ID__=C8;let t=e;return t})();function O8(t){return t instanceof vo?t.nativeElement:t}var Xp=class extends Ai{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,FF()&&(this.destroyRef=Dr(yx,{optional:!0})??void 0)}emit(e){let r=ft(null);try{super.next(e)}finally{ft(r)}}subscribe(e,r,n){let i=e,a=r||(()=>null),u=n;if(e&&typeof e=="object"){let l=e;i=l.next?.bind(l),a=l.error?.bind(l),u=l.complete?.bind(l)}this.__isAsync&&(a=Ip(a),i&&(i=Ip(i)),u&&(u=Ip(u)));let s=super.subscribe({next:i,error:a,complete:u});return e instanceof dn&&e.add(s),s}};function Ip(t){return e=>{setTimeout(t,void 0,e)}}var Ro=Xp;function P8(){return this._results[Symbol.iterator]()}var Yp=class t{get changes(){return this._changes??=new Ro}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let r=t.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=P8)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,r){return this._results.reduce(e,r)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,r){this.dirty=!1;let n=nF(e);(this._changesDetected=!rF(this._results,n,r))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function vx(t){return(t.flags&128)===128}var bx=new Map,M8=0;function N8(){return M8++}function R8(t){bx.set(t[hd],t)}function F8(t){bx.delete(t[hd])}var Xb="__ngContext__";function Ca(t,e){_a(e)?(t[Xb]=e[hd],R8(e)):t[Xb]=e}function wx(t){return _x(t[yl])}function xx(t){return _x(t[ho])}function _x(t){for(;t!==null&&!ui(t);)t=t[ho];return t}var Zp;function Ex(t){Zp=t}function k8(){if(Zp!==void 0)return Zp;if(typeof document<"u")return document;throw new rt(210,!1)}var Gg=new bt("",{providedIn:"root",factory:()=>L8}),L8="ng",Wg=new bt(""),Fs=new bt("",{providedIn:"platform",factory:()=>"unknown"});var qg=new bt("",{providedIn:"root",factory:()=>k8().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var B8="h",$8="b";var V8=()=>null;function Xg(t,e,r=!1){return V8(t,e,r)}var Tx=!1,j8=new bt("",{providedIn:"root",factory:()=>Tx});var Kp=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${FR})`}};function Yg(t){return t instanceof Kp?t.changingThisBreaksApplicationSecurity:t}var ai=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(ai||{}),U8;function Zg(t,e){return U8(t,e)}function bs(t,e,r,n,i){if(n!=null){let a,u=!1;ui(n)?a=n:_a(n)&&(u=!0,n=n[si]);let s=Bo(n);t===0&&r!==null?i==null?Cx(e,r,s):rd(e,r,s,i||null,!0):t===1&&r!==null?rd(e,r,s,i||null,!0):t===2?ik(e,s,u):t===3&&e.destroyNode(s),a!=null&&sk(e,t,a,r,i)}}function H8(t,e){return t.createText(e)}function z8(t,e,r){t.setValue(e,r)}function Ix(t,e,r){return t.createElement(e,r)}function G8(t,e){Ax(t,e),e[si]=null,e[mo]=null}function W8(t,e,r,n,i,a){n[si]=i,n[mo]=e,yd(t,n,r,1,i,a)}function Ax(t,e){e[ko].changeDetectionScheduler?.notify(1),yd(t,e,e[Fr],2,null,null)}function q8(t){let e=t[yl];if(!e)return Ap(t[je],t);for(;e;){let r=null;if(_a(e))r=e[yl];else{let n=e[Sn];n&&(r=n)}if(!r){for(;e&&!e[ho]&&e!==t;)_a(e)&&Ap(e[je],e),e=e[zr];e===null&&(e=t),_a(e)&&Ap(e[je],e),r=e&&e[ho]}e=r}}function X8(t,e,r,n){let i=Sn+n,a=r.length;n>0&&(r[i-1][ho]=e),n<a-Sn?(e[ho]=r[i],Tw(r,Sn+n,e)):(r.push(e),e[ho]=null),e[zr]=r;let u=e[Tl];u!==null&&r!==u&&Y8(u,e);let s=e[oi];s!==null&&s.insertView(t),Up(e),e[Te]|=128}function Y8(t,e){let r=t[Ss],i=e[zr][zr][Lo];e[Lo]!==i&&(t[Te]|=Ng.HasTransplantedViews),r===null?t[Ss]=[e]:r.push(e)}function Sx(t,e){let r=t[Ss],n=r.indexOf(e);r.splice(n,1)}function Qp(t,e){if(t.length<=Sn)return;let r=Sn+e,n=t[r];if(n){let i=n[Tl];i!==null&&i!==t&&Sx(i,n),e>0&&(t[r-1][ho]=n[ho]);let a=qf(t,Sn+e);G8(n[je],n);let u=a[oi];u!==null&&u.detachView(a[je]),n[zr]=null,n[ho]=null,n[Te]&=-129}return n}function Dx(t,e){if(!(e[Te]&256)){let r=e[Fr];r.destroyNode&&yd(t,e,r,3,null,null),q8(e)}}function Ap(t,e){if(e[Te]&256)return;let r=ft(null);try{e[Te]&=-129,e[Te]|=256,e[Ta]&&ib(e[Ta]),K8(t,e),Z8(t,e),e[je].type===1&&e[Fr].destroy();let n=e[Tl];if(n!==null&&ui(e[zr])){n!==e[zr]&&Sx(n,e);let i=e[oi];i!==null&&i.detachView(t)}F8(e)}finally{ft(r)}}function Z8(t,e){let r=t.cleanup,n=e[ml];if(r!==null)for(let a=0;a<r.length-1;a+=2)if(typeof r[a]=="string"){let u=r[a+3];u>=0?n[u]():n[-u].unsubscribe(),a+=2}else{let u=n[r[a+1]];r[a].call(u)}n!==null&&(e[ml]=null);let i=e[Di];if(i!==null){e[Di]=null;for(let a=0;a<i.length;a++){let u=i[a];u()}}}function K8(t,e){let r;if(t!=null&&(r=t.destroyHooks)!=null)for(let n=0;n<r.length;n+=2){let i=e[r[n]];if(!(i instanceof Sa)){let a=r[n+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){let s=i[a[u]],l=a[u+1];Mo(4,s,l);try{l.call(s)}finally{Mo(5,s,l)}}else{Mo(4,i,a);try{a.call(i)}finally{Mo(5,i,a)}}}}}function Q8(t,e,r){return J8(t,e.parent,r)}function J8(t,e,r){let n=e;for(;n!==null&&n.type&40;)e=n,n=e.parent;if(n===null)return r[si];{let{componentOffset:i}=n;if(i>-1){let{encapsulation:a}=t.data[n.directiveStart+i];if(a===Fo.None||a===Fo.Emulated)return null}return yo(n,r)}}function rd(t,e,r,n,i){t.insertBefore(e,r,n,i)}function Cx(t,e,r){t.appendChild(e,r)}function Yb(t,e,r,n,i){n!==null?rd(t,e,r,n,i):Cx(t,e,r)}function ek(t,e,r,n){t.removeChild(e,r,n)}function Kg(t,e){return t.parentNode(e)}function tk(t,e){return t.nextSibling(e)}function rk(t,e,r){return ok(t,e,r)}function nk(t,e,r){return t.type&40?yo(t,r):null}var ok=nk,Zb;function Qg(t,e,r,n){let i=Q8(t,n,e),a=e[Fr],u=n.parent||e[mo],s=rk(u,n,e);if(i!=null)if(Array.isArray(r))for(let l=0;l<r.length;l++)Yb(a,i,r[l],s,!1);else Yb(a,i,r,s,!1);Zb!==void 0&&Zb(a,n,e,r,i)}function Hf(t,e){if(e!==null){let r=e.type;if(r&3)return yo(e,t);if(r&4)return Jp(-1,t[e.index]);if(r&8){let n=e.child;if(n!==null)return Hf(t,n);{let i=t[e.index];return ui(i)?Jp(-1,i):Bo(i)}}else{if(r&32)return Zg(e,t)()||Bo(t[e.index]);{let n=Ox(t,e);if(n!==null){if(Array.isArray(n))return n[0];let i=bl(t[Lo]);return Hf(i,n)}else return Hf(t,e.next)}}}return null}function Ox(t,e){if(e!==null){let n=t[Lo][mo],i=e.projection;return n.projection[i]}return null}function Jp(t,e){let r=Sn+t+1;if(r<e.length){let n=e[r],i=n[je].firstChild;if(i!==null)return Hf(n,i)}return e[Ia]}function ik(t,e,r){let n=Kg(t,e);n&&ek(t,n,e,r)}function Jg(t,e,r,n,i,a,u){for(;r!=null;){let s=n[r.index],l=r.type;if(u&&e===0&&(s&&Ca(Bo(s),n),r.flags|=2),(r.flags&32)!==32)if(l&8)Jg(t,e,r.child,n,i,a,!1),bs(e,t,i,s,a);else if(l&32){let o=Zg(r,n),c;for(;c=o();)bs(e,t,i,c,a);bs(e,t,i,s,a)}else l&16?ak(t,e,n,r,i,a):bs(e,t,i,s,a);r=u?r.projectionNext:r.next}}function yd(t,e,r,n,i,a){Jg(r,n,t.firstChild,e,i,a,!1)}function ak(t,e,r,n,i,a){let u=r[Lo],l=u[mo].projection[n.projection];if(Array.isArray(l))for(let o=0;o<l.length;o++){let c=l[o];bs(e,t,i,c,a)}else{let o=l,c=u[zr];vx(n)&&(o.flags|=128),Jg(t,e,o,c,i,a,!0)}}function sk(t,e,r,n,i){let a=r[Ia],u=Bo(r);a!==u&&bs(e,t,n,a,i);for(let s=Sn;s<r.length;s++){let l=r[s];yd(l[je],l,t,e,n,a)}}function uk(t,e,r,n,i){if(e)i?t.addClass(r,n):t.removeClass(r,n);else{let a=n.indexOf("-")===-1?void 0:ai.DashCase;i==null?t.removeStyle(r,n,a):(typeof i=="string"&&i.endsWith("!important")&&(i=i.slice(0,-10),a|=ai.Important),t.setStyle(r,n,i,a))}}function lk(t,e,r){t.setAttribute(e,"style",r)}function Px(t,e,r){r===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",r)}function Mx(t,e,r){let{mergedAttrs:n,classes:i,styles:a}=r;n!==null&&Lp(t,e,n),i!==null&&Px(t,e,i),a!==null&&lk(t,e,a)}var ks={};function Ct(t=1){Nx(pn(),Vt(),Ns()+t,!1)}function Nx(t,e,r,n){if(!n)if((e[Te]&3)===3){let a=t.preOrderCheckHooks;a!==null&&Vf(e,a,r)}else{let a=t.preOrderHooks;a!==null&&jf(e,a,0,r)}Aa(r)}function ot(t,e=Ze.Default){let r=Vt();if(r===null)return Dt(t,e);let n=Dn();return hx(n,r,nn(t),e)}function Rx(t,e,r,n,i,a){let u=ft(null);try{let s=null;i&po.SignalBased&&(s=e[n][ap]),s!==null&&s.transformFn!==void 0&&(a=s.transformFn(a)),i&po.HasDecoratorInputTransform&&(a=t.inputTransforms[n].call(e,a)),t.setInput!==null?t.setInput(e,s,a,r,n):jw(e,s,n,a)}finally{ft(u)}}function ck(t,e){let r=t.hostBindingOpCodes;if(r!==null)try{for(let n=0;n<r.length;n++){let i=r[n];if(i<0)Aa(~i);else{let a=i,u=r[++n],s=r[++n];s8(u,a);let l=e[a];s(2,l)}}}finally{Aa(-1)}}function vd(t,e,r,n,i,a,u,s,l,o,c){let f=e.blueprint.slice();return f[si]=i,f[Te]=n|4|128|8|64,(o!==null||t&&t[Te]&2048)&&(f[Te]|=2048),qw(f),f[zr]=f[Ms]=t,f[go]=r,f[ko]=u||t&&t[ko],f[Fr]=s||t&&t[Fr],f[As]=l||t&&t[As]||null,f[mo]=a,f[hd]=N8(),f[Zf]=c,f[Bw]=o,f[Lo]=e.type==2?t[Lo]:f,f}function bd(t,e,r,n,i){let a=t.data[e];if(a===null)a=fk(t,e,r,n,i),a8()&&(a.flags|=32);else if(a.type&64){a.type=r,a.value=n,a.attrs=i;let u=r8();a.injectorIndex=u===null?-1:u.injectorIndex}return Sl(a,!0),a}function fk(t,e,r,n,i){let a=Zw(),u=Kw(),s=u?a:a&&a.parent,l=t.data[e]=yk(t,s,r,e,n,i);return t.firstChild===null&&(t.firstChild=l),a!==null&&(u?a.child==null&&l.parent!==null&&(a.child=l):a.next===null&&(a.next=l,l.prev=a)),l}function Fx(t,e,r,n){if(r===0)return-1;let i=e.length;for(let a=0;a<r;a++)e.push(n),t.blueprint.push(n),t.data.push(null);return i}function kx(t,e,r,n,i){let a=Ns(),u=n&2;try{Aa(-1),u&&e.length>Oi&&Nx(t,e,Oi,!1),Mo(u?2:0,i),r(n,i)}finally{Aa(a),Mo(u?3:1,i)}}function Lx(t,e,r){if(Vw(e)){let n=ft(null);try{let i=e.directiveStart,a=e.directiveEnd;for(let u=i;u<a;u++){let s=t.data[u];if(s.contentQueries){let l=r[u];s.contentQueries(1,l,u)}}}finally{ft(n)}}}function Bx(t,e,r){Yw()&&(Ek(t,e,r,yo(r,e)),(r.flags&64)===64&&zx(t,e,r))}function $x(t,e,r=yo){let n=e.localNames;if(n!==null){let i=e.index+1;for(let a=0;a<n.length;a+=2){let u=n[a+1],s=u===-1?r(e,t):t[u];t[i++]=s}}}function Vx(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=e0(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function e0(t,e,r,n,i,a,u,s,l,o,c){let f=Oi+n,d=f+i,h=dk(f,d),p=typeof o=="function"?o():o;return h[je]={type:t,blueprint:h,template:r,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof a=="function"?a():a,pipeRegistry:typeof u=="function"?u():u,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function dk(t,e){let r=[];for(let n=0;n<e;n++)r.push(n<t?null:ks);return r}function hk(t,e,r,n){let a=n.get(j8,Tx)||r===Fo.ShadowDom,u=t.selectRootElement(e,a);return pk(u),u}function pk(t){gk(t)}var gk=()=>null;function mk(t,e,r,n){let i=qx(e);i.push(r),t.firstCreatePass&&Xx(t).push(n,i.length-1)}function yk(t,e,r,n,i,a){let u=e?e.injectorIndex:-1,s=0;return JF()&&(s|=128),{type:r,index:n,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:i,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Kb(t,e,r,n,i){for(let a in e){if(!e.hasOwnProperty(a))continue;let u=e[a];if(u===void 0)continue;n??={};let s,l=po.None;Array.isArray(u)?(s=u[0],l=u[1]):s=u;let o=a;if(i!==null){if(!i.hasOwnProperty(a))continue;o=i[a]}t===0?Qb(n,r,o,s,l):Qb(n,r,o,s)}return n}function Qb(t,e,r,n,i){let a;t.hasOwnProperty(r)?(a=t[r]).push(e,n):a=t[r]=[e,n],i!==void 0&&a.push(i)}function vk(t,e,r){let n=e.directiveStart,i=e.directiveEnd,a=t.data,u=e.attrs,s=[],l=null,o=null;for(let c=n;c<i;c++){let f=a[c],d=r?r.get(f):null,h=d?d.inputs:null,p=d?d.outputs:null;l=Kb(0,f.inputs,c,l,h),o=Kb(1,f.outputs,c,o,p);let m=l!==null&&u!==null&&!Og(e)?Mk(l,c,u):null;s.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=s,e.inputs=l,e.outputs=o}function bk(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function jx(t,e,r,n,i,a,u,s){let l=yo(e,r),o=e.inputs,c;!s&&o!=null&&(c=o[n])?(t0(t,r,c,n,i),pd(e)&&wk(r,e.index)):e.type&3?(n=bk(n),i=u!=null?u(i,e.value||"",n):i,a.setProperty(l,n,i)):e.type&12}function wk(t,e){let r=Ni(e,t);r[Te]&16||(r[Te]|=64)}function Ux(t,e,r,n){if(Yw()){let i=n===null?null:{"":-1},a=Ik(t,r),u,s;a===null?u=s=null:[u,s]=a,u!==null&&Hx(t,e,r,u,i,s),i&&Ak(r,n,i)}r.mergedAttrs=gl(r.mergedAttrs,r.attrs)}function Hx(t,e,r,n,i,a){for(let o=0;o<n.length;o++)Gp(td(r,e),t,n[o].type);Dk(r,t.data.length,n.length);for(let o=0;o<n.length;o++){let c=n[o];c.providersResolver&&c.providersResolver(c)}let u=!1,s=!1,l=Fx(t,e,n.length,null);for(let o=0;o<n.length;o++){let c=n[o];r.mergedAttrs=gl(r.mergedAttrs,c.hostAttrs),Ck(t,r,e,l,c),Sk(l,c,i),c.contentQueries!==null&&(r.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(r.flags|=64);let f=c.type.prototype;!u&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),u=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),s=!0),l++}vk(t,r,a)}function xk(t,e,r,n,i){let a=i.hostBindings;if(a){let u=t.hostBindingOpCodes;u===null&&(u=t.hostBindingOpCodes=[]);let s=~e.index;_k(u)!=s&&u.push(s),u.push(r,n,a)}}function _k(t){let e=t.length;for(;e>0;){let r=t[--e];if(typeof r=="number"&&r<0)return r}return 0}function Ek(t,e,r,n){let i=r.directiveStart,a=r.directiveEnd;pd(r)&&Ok(e,r,t.data[i+r.componentOffset]),t.firstCreatePass||td(r,e),Ca(n,e);let u=r.initialInputs;for(let s=i;s<a;s++){let l=t.data[s],o=Da(e,t,s,r);if(Ca(o,e),u!==null&&Pk(e,s-i,o,l,r,u),Pi(l)){let c=Ni(r.index,e);c[go]=Da(e,t,s,r)}}}function zx(t,e,r){let n=r.directiveStart,i=r.directiveEnd,a=r.index,u=u8();try{Aa(a);for(let s=n;s<i;s++){let l=t.data[s],o=e[s];Hp(s),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&Tk(l,o)}}finally{Aa(-1),Hp(u)}}function Tk(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function Ik(t,e){let r=t.directiveRegistry,n=null,i=null;if(r)for(let a=0;a<r.length;a++){let u=r[a];if(pF(e,u.selectors,!1))if(n||(n=[]),Pi(u))if(u.findHostDirectiveDefs!==null){let s=[];i=i||new Map,u.findHostDirectiveDefs(u,s,i),n.unshift(...s,u);let l=s.length;eg(t,e,l)}else n.unshift(u),eg(t,e,0);else i=i||new Map,u.findHostDirectiveDefs?.(u,n,i),n.push(u)}return n===null?null:[n,i]}function eg(t,e,r){e.componentOffset=r,(t.components??=[]).push(e.index)}function Ak(t,e,r){if(e){let n=t.localNames=[];for(let i=0;i<e.length;i+=2){let a=r[e[i+1]];if(a==null)throw new rt(-301,!1);n.push(e[i],a)}}}function Sk(t,e,r){if(r){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)r[e.exportAs[n]]=t;Pi(e)&&(r[""]=t)}}function Dk(t,e,r){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+r,t.providerIndexes=e}function Ck(t,e,r,n,i){t.data[n]=i;let a=i.factory||(i.factory=_s(i.type,!0)),u=new Sa(a,Pi(i),ot);t.blueprint[n]=u,r[n]=u,xk(t,e,n,Fx(t,r,i.hostVars,ks),i)}function Ok(t,e,r){let n=yo(e,t),i=Vx(r),a=t[ko].rendererFactory,u=16;r.signals?u=4096:r.onPush&&(u=64);let s=wd(t,vd(t,i,null,u,n,e,null,a.createRenderer(n,r),null,null,null));t[e.index]=s}function Pk(t,e,r,n,i,a){let u=a[e];if(u!==null)for(let s=0;s<u.length;){let l=u[s++],o=u[s++],c=u[s++],f=u[s++];Rx(n,r,l,o,c,f)}}function Mk(t,e,r){let n=null,i=0;for(;i<r.length;){let a=r[i];if(a===0){i+=4;continue}else if(a===5){i+=2;continue}if(typeof a=="number")break;if(t.hasOwnProperty(a)){n===null&&(n=[]);let u=t[a];for(let s=0;s<u.length;s+=3)if(u[s]===e){n.push(a,u[s+1],u[s+2],r[i+1]);break}}i+=2}return n}function Gx(t,e,r,n){return[t,!0,0,e,null,n,null,r,null,null]}function Wx(t,e){let r=t.contentQueries;if(r!==null){let n=ft(null);try{for(let i=0;i<r.length;i+=2){let a=r[i],u=r[i+1];if(u!==-1){let s=t.data[u];Bg(a),s.contentQueries(2,e[u],u)}}}finally{ft(n)}}}function wd(t,e){return t[yl]?t[jb][ho]=e:t[yl]=e,t[jb]=e,e}function tg(t,e,r){Bg(0);let n=ft(null);try{e(t,r)}finally{ft(n)}}function qx(t){return t[ml]||(t[ml]=[])}function Xx(t){return t.cleanup||(t.cleanup=[])}function Yx(t,e){let r=t[As],n=r?r.get(ii,null):null;n&&n.handleError(e)}function t0(t,e,r,n,i){for(let a=0;a<r.length;){let u=r[a++],s=r[a++],l=r[a++],o=e[u],c=t.data[u];Rx(c,o,n,s,l,i)}}function Nk(t,e,r){let n=Gw(e,t);z8(t[Fr],n,r)}function Rk(t,e){let r=Ni(e,t),n=r[je];Fk(n,r);let i=r[si];i!==null&&r[Zf]===null&&(r[Zf]=Xg(i,r[As])),r0(n,r,r[go])}function Fk(t,e){for(let r=e.length;r<t.blueprint.length;r++)e.push(t.blueprint[r])}function r0(t,e,r){$g(e);try{let n=t.viewQuery;n!==null&&tg(1,n,r);let i=t.template;i!==null&&kx(t,e,i,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),e[oi]?.finishViewCreation(t),t.staticContentQueries&&Wx(t,e),t.staticViewQueries&&tg(2,t.viewQuery,r);let a=t.components;a!==null&&kk(e,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{e[Te]&=-5,Vg()}}function kk(t,e){for(let r=0;r<e.length;r++)Rk(t,e[r])}function Lk(t,e,r,n){let i=ft(null);try{let a=e.tView,s=t[Te]&4096?4096:16,l=vd(t,a,r,s,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),o=t[e.index];l[Tl]=o;let c=t[oi];return c!==null&&(l[oi]=c.createEmbeddedView(a)),r0(a,l,r),l}finally{ft(i)}}function Jb(t,e){return!e||e.firstChild===null||vx(t)}function Bk(t,e,r,n=!0){let i=e[je];if(X8(i,e,t,r),n){let u=Jp(r,t),s=e[Fr],l=Kg(s,t[Ia]);l!==null&&W8(i,t[mo],s,e,l,u)}let a=e[Zf];a!==null&&a.firstChild!==null&&(a.firstChild=null)}function nd(t,e,r,n,i=!1){for(;r!==null;){let a=e[r.index];a!==null&&n.push(Bo(a)),ui(a)&&$k(a,n);let u=r.type;if(u&8)nd(t,e,r.child,n);else if(u&32){let s=Zg(r,e),l;for(;l=s();)n.push(l)}else if(u&16){let s=Ox(e,r);if(Array.isArray(s))n.push(...s);else{let l=bl(e[Lo]);nd(l[je],l,s,n,!0)}}r=i?r.projectionNext:r.next}return n}function $k(t,e){for(let r=Sn;r<t.length;r++){let n=t[r],i=n[je].firstChild;i!==null&&nd(n[je],n,i,e)}t[Ia]!==t[si]&&e.push(t[Ia])}var Zx=[];function Vk(t){return t[Ta]??jk(t)}function jk(t){let e=Zx.pop()??Object.create(Hk);return e.lView=t,e}function Uk(t){t.lView[Ta]!==t&&(t.lView=null,Zx.push(t))}var Hk=B(N({},rb),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{vl(t.lView)},consumerOnSignalRead(){this.lView[Ta]=this}}),Kx=100;function Qx(t,e=!0,r=0){let n=t[ko],i=n.rendererFactory,a=!1;a||i.begin?.();try{zk(t,r)}catch(u){throw e&&Yx(t,u),u}finally{a||(i.end?.(),n.inlineEffectRunner?.flush())}}function zk(t,e){rg(t,e);let r=0;for(;kg(t);){if(r===Kx)throw new rt(103,!1);r++,rg(t,1)}}function Gk(t,e,r,n){let i=e[Te];if((i&256)===256)return;let a=!1;!a&&e[ko].inlineEffectRunner?.flush(),$g(e);let u=null,s=null;!a&&Wk(t)&&(s=Vk(e),u=nb(s));try{qw(e),o8(t.bindingStartIndex),r!==null&&kx(t,e,r,2,n);let l=(i&3)===3;if(!a)if(l){let f=t.preOrderCheckHooks;f!==null&&Vf(e,f,null)}else{let f=t.preOrderHooks;f!==null&&jf(e,f,0,null),_p(e,0)}if(qk(e),Jx(e,0),t.contentQueries!==null&&Wx(t,e),!a)if(l){let f=t.contentCheckHooks;f!==null&&Vf(e,f)}else{let f=t.contentHooks;f!==null&&jf(e,f,1),_p(e,1)}ck(t,e);let o=t.components;o!==null&&t2(e,o,0);let c=t.viewQuery;if(c!==null&&tg(2,c,n),!a)if(l){let f=t.viewCheckHooks;f!==null&&Vf(e,f)}else{let f=t.viewHooks;f!==null&&jf(e,f,2),_p(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[xp]){for(let f of e[xp])f();e[xp]=null}a||(e[Te]&=-73)}catch(l){throw vl(e),l}finally{s!==null&&(ob(s,u),Uk(s)),Vg()}}function Wk(t){return t.type!==2}function Jx(t,e){for(let r=wx(t);r!==null;r=xx(r))for(let n=Sn;n<r.length;n++){let i=r[n];e2(i,e)}}function qk(t){for(let e=wx(t);e!==null;e=xx(e)){if(!(e[Te]&Ng.HasTransplantedViews))continue;let r=e[Ss];for(let n=0;n<r.length;n++){let i=r[n],a=i[zr];qF(i)}}}function Xk(t,e,r){let n=Ni(e,t);e2(n,r)}function e2(t,e){Fg(t)&&rg(t,e)}function rg(t,e){let n=t[je],i=t[Te],a=t[Ta],u=!!(e===0&&i&16);if(u||=!!(i&64&&e===0),u||=!!(i&1024),u||=!!(a?.dirty&&sp(a)),a&&(a.dirty=!1),t[Te]&=-9217,u)Gk(n,t,n.template,t[go]);else if(i&8192){Jx(t,1);let s=n.components;s!==null&&t2(t,s,1)}}function t2(t,e,r){for(let n=0;n<e.length;n++)Xk(t,e[n],r)}function n0(t){for(t[ko].changeDetectionScheduler?.notify();t;){t[Te]|=64;let e=bl(t);if(LF(t)&&!e)return t;t=e}return null}var Oa=class{get rootNodes(){let e=this._lView,r=e[je];return nd(r,e,r.firstChild,[])}constructor(e,r,n=!0){this._lView=e,this._cdRefInjectingView=r,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[go]}set context(e){this._lView[go]=e}get destroyed(){return(this._lView[Te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[zr];if(ui(e)){let r=e[Kf],n=r?r.indexOf(this):-1;n>-1&&(Qp(e,n),qf(r,n))}this._attachedToViewContainer=!1}Dx(this._lView[je],this._lView)}onDestroy(e){Xw(this._lView,e)}markForCheck(){n0(this._cdRefInjectingView||this._lView)}detach(){this._lView[Te]&=-129}reattach(){Up(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,Qx(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new rt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Ax(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new rt(902,!1);this._appRef=e,Up(this._lView)}},Pa=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=Kk;let t=e;return t})(),Yk=Pa,Zk=class extends Yk{constructor(e,r,n){super(),this._declarationLView=e,this._declarationTContainer=r,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,n){let i=Lk(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:n});return new Oa(i)}};function Kk(){return o0(Dn(),Vt())}function o0(t,e){return t.type&4?new Zk(e,t,Rs(t,e)):null}var vQ=new RegExp(`^(\\d+)*(${$8}|${B8})*(.*)`);var Qk=()=>null;function ew(t,e){return Qk(t,e)}var ng=class{},og=class{},od=class{};function Jk(t){let e=Error(`No component factory found for ${An(t)}.`);return e[eL]=t,e}var eL="ngComponent";var ig=class{resolveComponentFactory(e){throw Jk(e)}},i0=(()=>{let e=class e{};e.NULL=new ig;let t=e;return t})(),wl=class{},Na=(()=>{let e=class e{constructor(){this.destroyNode=null}};e.__NG_ELEMENT_ID__=()=>tL();let t=e;return t})();function tL(){let t=Vt(),e=Dn(),r=Ni(e.index,t);return(_a(r)?r:t)[Fr]}var rL=(()=>{let e=class e{};e.\u0275prov=Kt({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Sp={};var tw=new Set;function r2(t){tw.has(t)||(tw.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function rw(...t){}function nL(){let t=typeof fl.requestAnimationFrame=="function",e=fl[t?"requestAnimationFrame":"setTimeout"],r=fl[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&r){let n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);let i=r[Zone.__symbol__("OriginalDelegate")];i&&(r=i)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:r}}var Rr=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new Ro(!1),this.onMicrotaskEmpty=new Ro(!1),this.onStable=new Ro(!1),this.onError=new Ro(!1),typeof Zone>"u")throw new rt(908,!1);Zone.assertZonePatched();let i=this;i._nesting=0,i._outer=i._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(i._inner=i._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(i._inner=i._inner.fork(Zone.longStackTraceZoneSpec)),i.shouldCoalesceEventChangeDetection=!n&&r,i.shouldCoalesceRunChangeDetection=n,i.lastRequestAnimationFrameId=-1,i.nativeRequestAnimationFrame=nL().nativeRequestAnimationFrame,aL(i)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new rt(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new rt(909,!1)}run(e,r,n){return this._inner.run(e,r,n)}runTask(e,r,n,i){let a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+i,e,oL,rw,rw);try{return a.runTask(u,r,n)}finally{a.cancelTask(u)}}runGuarded(e,r,n){return this._inner.runGuarded(e,r,n)}runOutsideAngular(e){return this._outer.run(e)}},oL={};function a0(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function iL(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(fl,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ag(t),t.isCheckStableRunning=!0,a0(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ag(t))}function aL(t){let e=()=>{iL(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,n,i,a,u,s)=>{if(sL(s))return r.invokeTask(i,a,u,s);try{return nw(t),r.invokeTask(i,a,u,s)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),ow(t)}},onInvoke:(r,n,i,a,u,s,l)=>{try{return nw(t),r.invoke(i,a,u,s,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),ow(t)}},onHasTask:(r,n,i,a)=>{r.hasTask(i,a),n===i&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,ag(t),a0(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,n,i,a)=>(r.handleError(i,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function ag(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function nw(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ow(t){t._nesting--,a0(t)}function sL(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var n2=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let i of n)i()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Kt({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function sg(t,e,r){let n=r?t.styles:null,i=r?t.classes:null,a=0;if(e!==null)for(let u=0;u<e.length;u++){let s=e[u];if(typeof s=="number")a=s;else if(a==1)i=Pb(i,s);else if(a==2){let l=s,o=e[++u];n=Pb(n,l+": "+o+";")}}r?t.styles=n:t.stylesWithoutHost=n,r?t.classes=i:t.classesWithoutHost=i}var ug=class extends i0{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let r=Ts(e);return new id(r,this.ngModule)}};function iw(t){let e=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let n=t[r];n!==void 0&&e.push({propName:Array.isArray(n)?n[0]:n,templateName:r})}return e}function uL(t){let e=t.toLowerCase();return e==="svg"?jF:e==="math"?UF:null}var lg=class{constructor(e,r){this.injector=e,this.parentInjector=r}get(e,r,n){n=cd(n);let i=this.injector.get(e,Sp,n);return i!==Sp||r===Sp?i:this.parentInjector.get(e,r,n)}},id=class extends od{get inputs(){let e=this.componentDef,r=e.inputTransforms,n=iw(e.inputs);if(r!==null)for(let i of n)r.hasOwnProperty(i.propName)&&(i.transform=r[i.propName]);return n}get outputs(){return iw(this.componentDef.outputs)}constructor(e,r){super(),this.componentDef=e,this.ngModule=r,this.componentType=e.type,this.selector=vF(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!r}create(e,r,n,i){let a=ft(null);try{i=i||this.ngModule;let u=i instanceof Ci?i:i?.injector;u&&this.componentDef.getStandaloneInjector!==null&&(u=this.componentDef.getStandaloneInjector(u)||u);let s=u?new lg(e,u):e,l=s.get(wl,null);if(l===null)throw new rt(407,!1);let o=s.get(rL,null),c=s.get(n2,null),f=s.get(ng,null),d={rendererFactory:l,sanitizer:o,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:f},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=n?hk(h,n,this.componentDef.encapsulation,s):Ix(h,p,uL(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let x=null;m!==null&&(x=Xg(m,s,!0));let y=e0(0,null,null,1,0,null,null,null,null,null,null),_=vd(null,y,null,v,null,null,d,h,s,null,x);$g(_);let I,C;try{let j=this.componentDef,z,W=null;j.findHostDirectiveDefs?(z=[],W=new Map,j.findHostDirectiveDefs(j,z,W),z.push(j)):z=[j];let k=lL(_,m),X=cL(k,m,j,z,_,d,h);C=Ww(y,Oi),m&&hL(h,j,m,n),r!==void 0&&pL(C,this.ngContentSelectors,r),I=dL(X,j,z,W,_,[gL]),r0(y,_,null)}finally{Vg()}return new cg(this.componentType,I,Rs(C,_),_,C)}finally{ft(a)}}},cg=class extends og{constructor(e,r,n,i,a){super(),this.location=n,this._rootLView=i,this._tNode=a,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Oa(i,void 0,!1),this.componentType=e}setInput(e,r){let n=this._tNode.inputs,i;if(n!==null&&(i=n[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),r))return;let a=this._rootLView;t0(a[je],a,i,e,r),this.previousInputValues.set(e,r);let u=Ni(this._tNode.index,a);n0(u)}}get injector(){return new Ea(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function lL(t,e){let r=t[je],n=Oi;return t[n]=e,bd(r,n,2,"#host",null)}function cL(t,e,r,n,i,a,u){let s=i[je];fL(n,t,e,u);let l=null;e!==null&&(l=Xg(e,i[As]));let o=a.rendererFactory.createRenderer(e,r),c=16;r.signals?c=4096:r.onPush&&(c=64);let f=vd(i,Vx(r),null,c,i[t.index],t,a,o,null,null,l);return s.firstCreatePass&&eg(s,t,n.length-1),wd(i,f),i[t.index]=f}function fL(t,e,r,n){for(let i of t)e.mergedAttrs=gl(e.mergedAttrs,i.hostAttrs);e.mergedAttrs!==null&&(sg(e,e.mergedAttrs,!0),r!==null&&Mx(n,r,e))}function dL(t,e,r,n,i,a){let u=Dn(),s=i[je],l=yo(u,i);Hx(s,i,u,r,null,n);for(let c=0;c<r.length;c++){let f=u.directiveStart+c,d=Da(i,s,f,u);Ca(d,i)}zx(s,i,u),l&&Ca(l,i);let o=Da(i,s,u.directiveStart+u.componentOffset,u);if(t[go]=i[go]=o,a!==null)for(let c of a)c(o,e);return Lx(s,u,i),o}function hL(t,e,r,n){if(n)Lp(t,r,["ng-version","17.3.12"]);else{let{attrs:i,classes:a}=bF(e.selectors[0]);i&&Lp(t,r,i),a&&a.length>0&&Px(t,r,a.join(" "))}}function pL(t,e,r){let n=t.projection=[];for(let i=0;i<e.length;i++){let a=r[i];n.push(a!=null?Array.from(a):null)}}function gL(){let t=Dn();Hg(Vt()[je],t)}var Ls=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=mL;let t=e;return t})();function mL(){let t=Dn();return i2(t,Vt())}var yL=Ls,o2=class extends yL{constructor(e,r,n){super(),this._lContainer=e,this._hostTNode=r,this._hostLView=n}get element(){return Rs(this._hostTNode,this._hostLView)}get injector(){return new Ea(this._hostTNode,this._hostLView)}get parentInjector(){let e=zg(this._hostTNode,this._hostLView);if(sx(e)){let r=ed(e,this._hostLView),n=Jf(e),i=r[je].data[n+8];return new Ea(i,r)}else return new Ea(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let r=aw(this._lContainer);return r!==null&&r[e]||null}get length(){return this._lContainer.length-Sn}createEmbeddedView(e,r,n){let i,a;typeof n=="number"?i=n:n!=null&&(i=n.index,a=n.injector);let u=ew(this._lContainer,e.ssrId),s=e.createEmbeddedViewImpl(r||{},a,u);return this.insertImpl(s,i,Jb(this._hostTNode,u)),s}createComponent(e,r,n,i,a){let u=e&&!kF(e),s;if(u)s=r;else{let p=r||{};s=p.index,n=p.injector,i=p.projectableNodes,a=p.environmentInjector||p.ngModuleRef}let l=u?e:new id(Ts(e)),o=n||this.parentInjector;if(!a&&l.ngModule==null){let m=(u?o:this.parentInjector).get(Ci,null);m&&(a=m)}let c=Ts(l.componentType??{}),f=ew(this._lContainer,c?.id??null),d=f?.firstChild??null,h=l.create(o,i,d,a);return this.insertImpl(h.hostView,s,Jb(this._hostTNode,f)),h}insert(e,r){return this.insertImpl(e,r,!0)}insertImpl(e,r,n){let i=e._lView;if(WF(i)){let s=this.indexOf(e);if(s!==-1)this.detach(s);else{let l=i[zr],o=new o2(l,l[mo],l[zr]);o.detach(o.indexOf(e))}}let a=this._adjustIndex(r),u=this._lContainer;return Bk(u,i,a,n),e.attachToViewContainerRef(),Tw(Dp(u),a,e),e}move(e,r){return this.insert(e,r)}indexOf(e){let r=aw(this._lContainer);return r!==null?r.indexOf(e):-1}remove(e){let r=this._adjustIndex(e,-1),n=Qp(this._lContainer,r);n&&(qf(Dp(this._lContainer),r),Dx(n[je],n))}detach(e){let r=this._adjustIndex(e,-1),n=Qp(this._lContainer,r);return n&&qf(Dp(this._lContainer),r)!=null?new Oa(n):null}_adjustIndex(e,r=0){return e??this.length+r}};function aw(t){return t[Kf]}function Dp(t){return t[Kf]||(t[Kf]=[])}function i2(t,e){let r,n=e[t.index];return ui(n)?r=n:(r=Gx(n,e,null,t),e[t.index]=r,wd(e,r)),bL(r,e,t,n),new o2(r,t,e)}function vL(t,e){let r=t[Fr],n=r.createComment(""),i=yo(e,t),a=Kg(r,i);return rd(r,a,n,tk(r,i),!1),n}var bL=_L,wL=()=>!1;function xL(t,e,r){return wL(t,e,r)}function _L(t,e,r,n){if(t[Ia])return;let i;r.type&8?i=Bo(n):i=vL(e,r),t[Ia]=i}var fg=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},dg=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let r=e.queries;if(r!==null){let n=e.contentQueries!==null?e.contentQueries[0]:r.length,i=[];for(let a=0;a<n;a++){let u=r.getByIndex(a),s=this.queries[u.indexInDeclarationView];i.push(s.clone())}return new t(i)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let r=0;r<this.queries.length;r++)s0(e,r).matches!==null&&this.queries[r].setDirty()}},hg=class{constructor(e,r,n=null){this.flags=r,this.read=n,typeof e=="string"?this.predicate=OL(e):this.predicate=e}},pg=class t{constructor(e=[]){this.queries=e}elementStart(e,r){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,r)}elementEnd(e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(e)}embeddedTView(e){let r=null;for(let n=0;n<this.length;n++){let i=r!==null?r.length:0,a=this.getByIndex(n).embeddedTView(e,i);a&&(a.indexInDeclarationView=n,r!==null?r.push(a):r=[a])}return r!==null?new t(r):null}template(e,r){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,r)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},gg=class t{constructor(e,r=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(e,r){this.isApplyingToNode(r)&&this.matchTNode(e,r)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,r){this.elementStart(e,r)}embeddedTView(e,r){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,r),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let r=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==r;)n=n.parent;return r===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,r){let n=this.metadata.predicate;if(Array.isArray(n))for(let i=0;i<n.length;i++){let a=n[i];this.matchTNodeWithReadOption(e,r,EL(r,a)),this.matchTNodeWithReadOption(e,r,Uf(r,e,a,!1,!1))}else n===Pa?r.type&4&&this.matchTNodeWithReadOption(e,r,-1):this.matchTNodeWithReadOption(e,r,Uf(r,e,n,!1,!1))}matchTNodeWithReadOption(e,r,n){if(n!==null){let i=this.metadata.read;if(i!==null)if(i===vo||i===Ls||i===Pa&&r.type&4)this.addMatch(r.index,-2);else{let a=Uf(r,e,i,!1,!1);a!==null&&this.addMatch(r.index,a)}else this.addMatch(r.index,n)}}addMatch(e,r){this.matches===null?this.matches=[e,r]:this.matches.push(e,r)}};function EL(t,e){let r=t.localNames;if(r!==null){for(let n=0;n<r.length;n+=2)if(r[n]===e)return r[n+1]}return null}function TL(t,e){return t.type&11?Rs(t,e):t.type&4?o0(t,e):null}function IL(t,e,r,n){return r===-1?TL(e,t):r===-2?AL(t,e,n):Da(t,t[je],r,e)}function AL(t,e,r){if(r===vo)return Rs(e,t);if(r===Pa)return o0(e,t);if(r===Ls)return i2(e,t)}function a2(t,e,r,n){let i=e[oi].queries[n];if(i.matches===null){let a=t.data,u=r.matches,s=[];for(let l=0;u!==null&&l<u.length;l+=2){let o=u[l];if(o<0)s.push(null);else{let c=a[o];s.push(IL(e,c,u[l+1],r.metadata.read))}}i.matches=s}return i.matches}function mg(t,e,r,n){let i=t.queries.getByIndex(r),a=i.matches;if(a!==null){let u=a2(t,e,i,r);for(let s=0;s<a.length;s+=2){let l=a[s];if(l>0)n.push(u[s/2]);else{let o=a[s+1],c=e[-l];for(let f=Sn;f<c.length;f++){let d=c[f];d[Tl]===d[zr]&&mg(d[je],d,o,n)}if(c[Ss]!==null){let f=c[Ss];for(let d=0;d<f.length;d++){let h=f[d];mg(h[je],h,o,n)}}}}}return n}function SL(t,e){return t[oi].queries[e].queryList}function DL(t,e,r){let n=new Yp((r&4)===4);return mk(t,e,n,n.destroy),(e[oi]??=new dg).queries.push(new fg(n))-1}function CL(t,e,r){let n=pn();return n.firstCreatePass&&(PL(n,new hg(t,e,r),-1),(e&2)===2&&(n.staticViewQueries=!0)),DL(n,Vt(),e)}function OL(t){return t.split(",").map(e=>e.trim())}function PL(t,e,r){t.queries===null&&(t.queries=new pg),t.queries.track(new gg(e,r))}function s0(t,e){return t.queries.getByIndex(e)}function ML(t,e){let r=t[je],n=s0(r,e);return n.crossesNgTemplate?mg(r,t,e,[]):a2(r,t,n,e)}function NL(t){return typeof t=="function"&&t[ap]!==void 0}function s2(t){return NL(t)&&typeof t.set=="function"}function RL(t){return Object.getPrototypeOf(t.prototype).constructor}function li(t){let e=RL(t.type),r=!0,n=[t];for(;e;){let i;if(Pi(t))i=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new rt(903,!1);i=e.\u0275dir}if(i){if(r){n.push(i);let u=t;u.inputs=Lf(t.inputs),u.inputTransforms=Lf(t.inputTransforms),u.declaredInputs=Lf(t.declaredInputs),u.outputs=Lf(t.outputs);let s=i.hostBindings;s&&$L(t,s);let l=i.viewQuery,o=i.contentQueries;if(l&&LL(t,l),o&&BL(t,o),FL(t,i),LR(t.outputs,i.outputs),Pi(i)&&i.data.animation){let c=t.data;c.animation=(c.animation||[]).concat(i.data.animation)}}let a=i.features;if(a)for(let u=0;u<a.length;u++){let s=a[u];s&&s.ngInherit&&s(t),s===li&&(r=!1)}}e=Object.getPrototypeOf(e)}kL(n)}function FL(t,e){for(let r in e.inputs){if(!e.inputs.hasOwnProperty(r)||t.inputs.hasOwnProperty(r))continue;let n=e.inputs[r];if(n!==void 0&&(t.inputs[r]=n,t.declaredInputs[r]=e.declaredInputs[r],e.inputTransforms!==null)){let i=Array.isArray(n)?n[0]:n;if(!e.inputTransforms.hasOwnProperty(i))continue;t.inputTransforms??={},t.inputTransforms[i]=e.inputTransforms[i]}}}function kL(t){let e=0,r=null;for(let n=t.length-1;n>=0;n--){let i=t[n];i.hostVars=e+=i.hostVars,i.hostAttrs=gl(i.hostAttrs,r=gl(r,i.hostAttrs))}}function Lf(t){return t===Es?{}:t===jn?[]:t}function LL(t,e){let r=t.viewQuery;r?t.viewQuery=(n,i)=>{e(n,i),r(n,i)}:t.viewQuery=e}function BL(t,e){let r=t.contentQueries;r?t.contentQueries=(n,i,a)=>{e(n,i,a),r(n,i,a)}:t.contentQueries=e}function $L(t,e){let r=t.hostBindings;r?t.hostBindings=(n,i)=>{e(n,i),r(n,i)}:t.hostBindings=e}var Ds=class{};var ad=class extends Ds{constructor(e){super(),this.componentFactoryResolver=new ug(this),this.instance=null;let r=new Yf([...e.providers,{provide:Ds,useValue:this},{provide:i0,useValue:this.componentFactoryResolver}],e.parent||Mg(),e.debugName,new Set(["environment"]));this.injector=r,e.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function VL(t,e,r=null){return new ad({providers:t,parent:e,debugName:r,runEnvironmentInitializers:!0}).injector}var u2=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new cl(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function l2(t){return UL(t)?Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t:!1}function jL(t,e){if(Array.isArray(t))for(let r=0;r<t.length;r++)e(t[r]);else{let r=t[Symbol.iterator](),n;for(;!(n=r.next()).done;)e(n.value)}}function UL(t){return t!==null&&(typeof t=="function"||typeof t=="object")}function xd(t,e,r){let n=t[e];return Object.is(n,r)?!1:(t[e]=r,!0)}function HL(t){return(t.flags&32)===32}function zL(t,e,r,n,i,a,u,s,l){let o=e.consts,c=bd(e,t,4,u||null,Qf(o,s));Ux(e,r,c,Qf(o,l)),Hg(e,c);let f=c.tView=e0(2,c,n,i,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,o,null);return e.queries!==null&&(e.queries.template(e,c),f.queries=e.queries.embeddedTView(c)),c}function Ri(t,e,r,n,i,a,u,s){let l=Vt(),o=pn(),c=t+Oi,f=o.firstCreatePass?zL(c,o,l,e,r,n,i,a,u):o.data[c];Sl(f,!1);let d=GL(o,l,f,t);jg()&&Qg(o,l,d,f),Ca(d,l);let h=Gx(d,l,d,f);return l[c]=h,wd(l,h),xL(h,f,l),Rg(f)&&Bx(o,l,f),u!=null&&$x(l,f,s),Ri}var GL=WL;function WL(t,e,r,n){return Ug(!0),e[Fr].createComment("")}function qL(t,e,r,n){return xd(t,Lg(),r)?e+bw(r)+n:ks}function Bf(t,e){return t<<17|e<<2}function Ma(t){return t>>17&32767}function XL(t){return(t&2)==2}function YL(t,e){return t&131071|e<<17}function yg(t){return t|2}function Cs(t){return(t&131068)>>2}function Cp(t,e){return t&-131069|e<<2}function ZL(t){return(t&1)===1}function vg(t){return t|1}function KL(t,e,r,n,i,a){let u=a?e.classBindings:e.styleBindings,s=Ma(u),l=Cs(u);t[n]=r;let o=!1,c;if(Array.isArray(r)){let f=r;c=f[1],(c===null||El(f,c)>0)&&(o=!0)}else c=r;if(i)if(l!==0){let d=Ma(t[s+1]);t[n+1]=Bf(d,s),d!==0&&(t[d+1]=Cp(t[d+1],n)),t[s+1]=YL(t[s+1],n)}else t[n+1]=Bf(s,0),s!==0&&(t[s+1]=Cp(t[s+1],n)),s=n;else t[n+1]=Bf(l,0),s===0?s=n:t[l+1]=Cp(t[l+1],n),l=n;o&&(t[n+1]=yg(t[n+1])),sw(t,c,n,!0),sw(t,c,n,!1),QL(e,c,t,n,a),u=Bf(s,l),a?e.classBindings=u:e.styleBindings=u}function QL(t,e,r,n,i){let a=i?t.residualClasses:t.residualStyles;a!=null&&typeof e=="string"&&El(a,e)>=0&&(r[n+1]=vg(r[n+1]))}function sw(t,e,r,n){let i=t[r+1],a=e===null,u=n?Ma(i):Cs(i),s=!1;for(;u!==0&&(s===!1||a);){let l=t[u],o=t[u+1];JL(l,e)&&(s=!0,t[u+1]=n?vg(o):yg(o)),u=n?Ma(o):Cs(o)}s&&(t[r+1]=n?yg(i):vg(i))}function JL(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?El(t,e)>=0:!1}function Cn(t,e,r){let n=Vt(),i=Lg();if(xd(n,i,e)){let a=pn(),u=ox();jx(a,u,n,t,e,n[Fr],r,!1)}return Cn}function uw(t,e,r,n,i){let a=e.inputs,u=i?"class":"style";t0(t,r,a[u],u,n)}function ci(t,e){return e5(t,e,null,!0),ci}function e5(t,e,r,n){let i=Vt(),a=pn(),u=i8(2);if(a.firstUpdatePass&&r5(a,t,u,n),e!==ks&&xd(i,u,e)){let s=a.data[Ns()];s5(a,s,i,i[Fr],t,i[u+1]=u5(e,r),n,u)}}function t5(t,e){return e>=t.expandoStartIndex}function r5(t,e,r,n){let i=t.data;if(i[r+1]===null){let a=i[Ns()],u=t5(t,r);l5(a,n)&&e===null&&!u&&(e=!1),e=n5(i,a,e,n),KL(i,a,e,r,u,n)}}function n5(t,e,r,n){let i=l8(t),a=n?e.residualClasses:e.residualStyles;if(i===null)(n?e.classBindings:e.styleBindings)===0&&(r=Op(null,t,e,r,n),r=xl(r,e.attrs,n),a=null);else{let u=e.directiveStylingLast;if(u===-1||t[u]!==i)if(r=Op(i,t,e,r,n),a===null){let l=o5(t,e,n);l!==void 0&&Array.isArray(l)&&(l=Op(null,t,e,l[1],n),l=xl(l,e.attrs,n),i5(t,e,n,l))}else a=a5(t,e,n)}return a!==void 0&&(n?e.residualClasses=a:e.residualStyles=a),r}function o5(t,e,r){let n=r?e.classBindings:e.styleBindings;if(Cs(n)!==0)return t[Ma(n)]}function i5(t,e,r,n){let i=r?e.classBindings:e.styleBindings;t[Ma(i)]=n}function a5(t,e,r){let n,i=e.directiveEnd;for(let a=1+e.directiveStylingLast;a<i;a++){let u=t[a].hostAttrs;n=xl(n,u,r)}return xl(n,e.attrs,r)}function Op(t,e,r,n,i){let a=null,u=r.directiveEnd,s=r.directiveStylingLast;for(s===-1?s=r.directiveStart:s++;s<u&&(a=e[s],n=xl(n,a.hostAttrs,i),a!==t);)s++;return t!==null&&(r.directiveStylingLast=s),n}function xl(t,e,r){let n=r?1:2,i=-1;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];typeof u=="number"?i=u:i===n&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),iF(t,u,r?!0:e[++a]))}return t===void 0?null:t}function s5(t,e,r,n,i,a,u,s){if(!(e.type&3))return;let l=t.data,o=l[s+1],c=ZL(o)?lw(l,e,r,i,Cs(o),u):void 0;if(!sd(c)){sd(a)||XL(o)&&(a=lw(l,null,r,i,s,u));let f=Gw(Ns(),r);uk(n,u,f,i,a)}}function lw(t,e,r,n,i,a){let u=e===null,s;for(;i>0;){let l=t[i],o=Array.isArray(l),c=o?l[1]:l,f=c===null,d=r[i+1];d===ks&&(d=f?jn:void 0);let h=f?bp(d,n):c===n?d:void 0;if(o&&!sd(h)&&(h=bp(l,n)),sd(h)&&(s=h,u))return s;let p=t[i+1];i=u?Ma(p):Cs(p)}if(e!==null){let l=a?e.residualClasses:e.residualStyles;l!=null&&(s=bp(l,n))}return s}function sd(t){return t!==void 0}function u5(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=An(Yg(t)))),t}function l5(t,e){return(t.flags&(e?8:16))!==0}function c5(t,e,r,n,i,a){let u=e.consts,s=Qf(u,i),l=bd(e,t,2,n,s);return Ux(e,r,l,Qf(u,a)),l.attrs!==null&&sg(l,l.attrs,!1),l.mergedAttrs!==null&&sg(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function wt(t,e,r,n){let i=Vt(),a=pn(),u=Oi+t,s=i[Fr],l=a.firstCreatePass?c5(u,a,i,e,r,n):a.data[u],o=f5(a,i,l,s,e,t);i[u]=o;let c=Rg(l);return Sl(l,!0),Mx(s,o,l),!HL(l)&&jg()&&Qg(a,i,o,l),ZF()===0&&Ca(o,i),KF(),c&&(Bx(a,i,l),Lx(a,l,i)),n!==null&&$x(i,l),wt}function dt(){let t=Dn();Kw()?n8():(t=t.parent,Sl(t,!1));let e=t;e8(e)&&t8(),QF();let r=pn();return r.firstCreatePass&&(Hg(r,t),Vw(t)&&r.queries.elementEnd(t)),e.classesWithoutHost!=null&&m8(e)&&uw(r,e,Vt(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&y8(e)&&uw(r,e,Vt(),e.stylesWithoutHost,!1),dt}function Ra(t,e,r,n){return wt(t,e,r,n),dt(),Ra}var f5=(t,e,r,n,i,a)=>(Ug(!0),Ix(n,i,d8()));function c2(){return Vt()}var ud="en-US";var d5=ud;function h5(t){typeof t=="string"&&(d5=t.toLowerCase().replace(/_/g,"-"))}function fi(t,e,r,n){let i=Vt(),a=pn(),u=Dn();return f2(a,i,i[Fr],u,t,e,n),fi}function p5(t,e,r,n){let i=t.cleanup;if(i!=null)for(let a=0;a<i.length-1;a+=2){let u=i[a];if(u===r&&i[a+1]===n){let s=e[ml],l=i[a+2];return s.length>l?s[l]:null}typeof u=="string"&&(a+=2)}return null}function f2(t,e,r,n,i,a,u){let s=Rg(n),o=t.firstCreatePass&&Xx(t),c=e[go],f=qx(e),d=!0;if(n.type&3||u){let m=yo(n,e),v=u?u(m):m,x=f.length,y=u?I=>u(Bo(I[n.index])):n.index,_=null;if(!u&&s&&(_=p5(t,e,i,n.index)),_!==null){let I=_.__ngLastListenerFn__||_;I.__ngNextListenerFn__=a,_.__ngLastListenerFn__=a,d=!1}else{a=fw(n,e,c,a,!1);let I=r.listen(v,i,a);f.push(a,I),o&&o.push(i,y,x,x+1)}}else a=fw(n,e,c,a,!1);let h=n.outputs,p;if(d&&h!==null&&(p=h[i])){let m=p.length;if(m)for(let v=0;v<m;v+=2){let x=p[v],y=p[v+1],C=e[x][y].subscribe(a),j=f.length;f.push(a,C),o&&o.push(i,n.index,j,-(j+1))}}}function cw(t,e,r,n){let i=ft(null);try{return Mo(6,e,r),r(n)!==!1}catch(a){return Yx(t,a),!1}finally{Mo(7,e,r),ft(i)}}function fw(t,e,r,n,i){return function a(u){if(u===Function)return n;let s=t.componentOffset>-1?Ni(t.index,e):e;n0(s);let l=cw(e,r,n,u),o=a.__ngNextListenerFn__;for(;o;)l=cw(e,r,o,u)&&l,o=o.__ngNextListenerFn__;return i&&l===!1&&u.preventDefault(),l}}function Fa(t=1){return f8(t)}function u0(t,e,r){CL(t,e,r)}function l0(t){let e=Vt(),r=pn(),n=Qw();Bg(n+1);let i=s0(r,n);if(t.dirty&&GF(e)===((i.metadata.flags&2)===2)){if(i.matches===null)t.reset([]);else{let a=ML(e,n);t.reset(a,O8),t.notifyOnChanges()}return!0}return!1}function c0(){return SL(Vt(),Qw())}function ar(t,e=""){let r=Vt(),n=pn(),i=t+Oi,a=n.firstCreatePass?bd(n,i,1,e,null):n.data[i],u=g5(n,r,a,e,t);r[i]=u,jg()&&Qg(n,r,u,a),Sl(a,!1)}var g5=(t,e,r,n,i)=>(Ug(!0),H8(e[Fr],n));function Fi(t){return di("",t,""),Fi}function di(t,e,r){let n=Vt(),i=qL(n,t,e,r);return i!==ks&&Nk(n,Ns(),i),di}function _d(t,e,r){s2(e)&&(e=e());let n=Vt(),i=Lg();if(xd(n,i,e)){let a=pn(),u=ox();jx(a,u,n,t,e,n[Fr],r,!1)}return _d}function f0(t,e){let r=s2(t);return r&&t.set(e),r}function Ed(t,e){let r=Vt(),n=pn(),i=Dn();return f2(n,r,r[Fr],i,t,e),Ed}function m5(t,e,r){let n=pn();if(n.firstCreatePass){let i=Pi(t);bg(r,n.data,n.blueprint,i,!0),bg(e,n.data,n.blueprint,i,!1)}}function bg(t,e,r,n,i){if(t=nn(t),Array.isArray(t))for(let a=0;a<t.length;a++)bg(t[a],e,r,n,i);else{let a=pn(),u=Vt(),s=Dn(),l=Is(t)?t:nn(t.provide),o=Lw(t),c=s.providerIndexes&1048575,f=s.directiveStart,d=s.providerIndexes>>20;if(Is(t)||!t.multi){let h=new Sa(o,i,ot),p=Mp(l,e,i?c:c+d,f);p===-1?(Gp(td(s,u),a,l),Pp(a,t,e.length),e.push(l),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),r.push(h),u.push(h)):(r[p]=h,u[p]=h)}else{let h=Mp(l,e,c+d,f),p=Mp(l,e,c,c+d),m=h>=0&&r[h],v=p>=0&&r[p];if(i&&!v||!i&&!m){Gp(td(s,u),a,l);let x=b5(i?v5:y5,r.length,i,n,o);!i&&v&&(r[p].providerFactory=x),Pp(a,t,e.length,0),e.push(l),s.directiveStart++,s.directiveEnd++,i&&(s.providerIndexes+=1048576),r.push(x),u.push(x)}else{let x=d2(r[i?p:h],o,!i&&n);Pp(a,t,h>-1?h:p,x)}!i&&n&&v&&r[p].componentProviders++}}}function Pp(t,e,r,n){let i=Is(e),a=DF(e);if(i||a){let l=(a?nn(e.useClass):e).prototype.ngOnDestroy;if(l){let o=t.destroyHooks||(t.destroyHooks=[]);if(!i&&e.multi){let c=o.indexOf(r);c===-1?o.push(r,[n,l]):o[c+1].push(n,l)}else o.push(r,l)}}}function d2(t,e,r){return r&&t.componentProviders++,t.multi.push(e)-1}function Mp(t,e,r,n){for(let i=r;i<n;i++)if(e[i]===t)return i;return-1}function y5(t,e,r,n){return wg(this.multi,[])}function v5(t,e,r,n){let i=this.multi,a;if(this.providerFactory){let u=this.providerFactory.componentProviders,s=Da(r,r[je],this.providerFactory.index,n);a=s.slice(0,u),wg(i,a);for(let l=u;l<s.length;l++)a.push(s[l])}else a=[],wg(i,a);return a}function wg(t,e){for(let r=0;r<t.length;r++){let n=t[r];e.push(n())}return e}function b5(t,e,r,n,i){let a=new Sa(t,r,ot);return a.multi=[],a.index=e,a.componentProviders=0,d2(a,i,n&&!r),a}function Bs(t,e=[]){return r=>{r.providersResolver=(n,i)=>m5(n,i?i(t):t,e)}}var w5=(()=>{let e=class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let i=Rw(!1,n.type),a=i.length>0?VL([i],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,a)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Kt({token:e,providedIn:"environment",factory:()=>new e(Dt(Ci))});let t=e;return t})();function Td(t){r2("NgStandalone"),t.getStandaloneInjector=e=>e.get(w5).getOrCreateStandaloneInjector(t)}var h2=new bt("");function Cl(t){return!!t&&typeof t.then=="function"}function p2(t){return!!t&&typeof t.subscribe=="function"}var x5=new bt(""),g2=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,i)=>{this.resolve=n,this.reject=i}),this.appInits=Dr(x5,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let a of this.appInits){let u=a();if(Cl(u))n.push(u);else if(p2(u)){let s=new Promise((l,o)=>{u.subscribe({complete:l,error:o})});n.push(s)}}let i=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{i()}).catch(a=>{this.reject(a)}),n.length===0&&i(),this.initialized=!0}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),_5=new bt("");function E5(){ab(()=>{throw new rt(600,!1)})}function T5(t){return t.isBoundToModule}function I5(t,e,r){try{let n=r();return Cl(n)?n.catch(i=>{throw e.runOutsideAngular(()=>t.handleError(i)),i}):n}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}var d0=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Dr(mx),this.afterRenderEffectManager=Dr(n2),this.externalTestViews=new Set,this.beforeRender=new Ai,this.afterTick=new Ai,this.componentTypes=[],this.components=[],this.isStable=Dr(u2).hasPendingTasks.pipe(xa(n=>!n)),this._injector=Dr(Ci)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,i){let a=n instanceof od;if(!this._injector.get(g2).done){let h=!a&&_F(n),p=!1;throw new rt(405,p)}let s;a?s=n:s=this._injector.get(i0).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let l=T5(s)?void 0:this._injector.get(Ds),o=i||s.selector,c=s.create(md.NULL,[],o,l),f=c.location.nativeElement,d=c.injector.get(h2,null);return d?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Np(this.components,c),d?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new rt(101,!1);let i=ft(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(a){this.internalErrorHandler(a)}finally{this.afterTick.next(),this._runningTick=!1,ft(i)}}detectChangesInAttachedViews(n){let i=0,a=this.afterRenderEffectManager;for(;;){if(i===Kx)throw new rt(103,!1);if(n){let u=i===0;this.beforeRender.next(u);for(let{_lView:s,notifyErrorHandler:l}of this._views)A5(s,u,l)}if(i++,a.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>xg(u))&&(a.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>xg(u))))break}}attachView(n){let i=n;this._views.push(i),i.attachToAppRef(this)}detachView(n){let i=n;Np(this._views,i),i.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let i=this._injector.get(_5,[]);[...this._bootstrapListeners,...i].forEach(a=>a(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Np(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new rt(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Np(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}function A5(t,e,r){!e&&!xg(t)||S5(t,r,e)}function xg(t){return kg(t)}function S5(t,e,r){let n;r?(n=0,t[Te]|=1024):t[Te]&64?n=0:n=1,Qx(t,e,n)}var D5=(()=>{let e=class e{constructor(){this.zone=Dr(Rr),this.applicationRef=Dr(d0)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function C5(t){return[{provide:Rr,useFactory:t},{provide:pl,multi:!0,useFactory:()=>{let e=Dr(D5,{optional:!0});return()=>e.initialize()}},{provide:pl,multi:!0,useFactory:()=>{let e=Dr(N5);return()=>{e.initialize()}}},{provide:mx,useFactory:O5}]}function O5(){let t=Dr(Rr),e=Dr(ii);return r=>t.runOutsideAngular(()=>e.handleError(r))}function P5(t){let e=C5(()=>new Rr(M5(t)));return Nw([[],e])}function M5(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var N5=(()=>{let e=class e{constructor(){this.subscription=new dn,this.initialized=!1,this.zone=Dr(Rr),this.pendingTasks=Dr(u2)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Rr.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Rr.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function R5(){return typeof $localize<"u"&&$localize.locale||ud}var h0=new bt("",{providedIn:"root",factory:()=>Dr(h0,Ze.Optional|Ze.SkipSelf)||R5()});var m2=new bt("");var zf=null;function F5(t=[],e){return md.create({name:e,providers:[{provide:dd,useValue:"platform"},{provide:m2,useValue:new Set([()=>zf=null])},...t]})}function k5(t=[]){if(zf)return zf;let e=F5(t);return zf=e,E5(),L5(e),e}function L5(t){t.get(Wg,null)?.forEach(r=>r())}var Id=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=B5;let t=e;return t})();function B5(t){return $5(Dn(),Vt(),(t&16)===16)}function $5(t,e,r){if(pd(t)&&!r){let n=Ni(t.index,e);return new Oa(n,n)}else if(t.type&47){let n=e[Lo];return new Oa(n,e)}return null}var _g=class{constructor(){}supports(e){return l2(e)}create(e){return new Eg(e)}},V5=(t,e)=>e,Eg=class{constructor(e){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=e||V5}forEachItem(e){let r;for(r=this._itHead;r!==null;r=r._next)e(r)}forEachOperation(e){let r=this._itHead,n=this._removalsHead,i=0,a=null;for(;r||n;){let u=!n||r&&r.currentIndex<dw(n,i,a)?r:n,s=dw(u,i,a),l=u.currentIndex;if(u===n)i--,n=n._nextRemoved;else if(r=r._next,u.previousIndex==null)i++;else{a||(a=[]);let o=s-i,c=l-i;if(o!=c){for(let d=0;d<o;d++){let h=d<a.length?a[d]:a[d]=0,p=h+d;c<=p&&p<o&&(a[d]=h+1)}let f=u.previousIndex;a[f]=c-o}}s!==l&&e(u,s,l)}}forEachPreviousItem(e){let r;for(r=this._previousItHead;r!==null;r=r._nextPrevious)e(r)}forEachAddedItem(e){let r;for(r=this._additionsHead;r!==null;r=r._nextAdded)e(r)}forEachMovedItem(e){let r;for(r=this._movesHead;r!==null;r=r._nextMoved)e(r)}forEachRemovedItem(e){let r;for(r=this._removalsHead;r!==null;r=r._nextRemoved)e(r)}forEachIdentityChange(e){let r;for(r=this._identityChangesHead;r!==null;r=r._nextIdentityChange)e(r)}diff(e){if(e==null&&(e=[]),!l2(e))throw new rt(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let r=this._itHead,n=!1,i,a,u;if(Array.isArray(e)){this.length=e.length;for(let s=0;s<this.length;s++)a=e[s],u=this._trackByFn(s,a),r===null||!Object.is(r.trackById,u)?(r=this._mismatch(r,a,u,s),n=!0):(n&&(r=this._verifyReinsertion(r,a,u,s)),Object.is(r.item,a)||this._addIdentityChange(r,a)),r=r._next}else i=0,jL(e,s=>{u=this._trackByFn(i,s),r===null||!Object.is(r.trackById,u)?(r=this._mismatch(r,s,u,i),n=!0):(n&&(r=this._verifyReinsertion(r,s,u,i)),Object.is(r.item,s)||this._addIdentityChange(r,s)),r=r._next,i++}),this.length=i;return this._truncate(r),this.collection=e,this.isDirty}get isDirty(){return this._additionsHead!==null||this._movesHead!==null||this._removalsHead!==null||this._identityChangesHead!==null}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;e!==null;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;e!==null;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;e!==null;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,r,n,i){let a;return e===null?a=this._itTail:(a=e._prev,this._remove(e)),e=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null),e!==null?(Object.is(e.item,r)||this._addIdentityChange(e,r),this._reinsertAfter(e,a,i)):(e=this._linkedRecords===null?null:this._linkedRecords.get(n,i),e!==null?(Object.is(e.item,r)||this._addIdentityChange(e,r),this._moveAfter(e,a,i)):e=this._addAfter(new Tg(r,n),a,i)),e}_verifyReinsertion(e,r,n,i){let a=this._unlinkedRecords===null?null:this._unlinkedRecords.get(n,null);return a!==null?e=this._reinsertAfter(a,e._prev,i):e.currentIndex!=i&&(e.currentIndex=i,this._addToMoves(e,i)),e}_truncate(e){for(;e!==null;){let r=e._next;this._addToRemovals(this._unlink(e)),e=r}this._unlinkedRecords!==null&&this._unlinkedRecords.clear(),this._additionsTail!==null&&(this._additionsTail._nextAdded=null),this._movesTail!==null&&(this._movesTail._nextMoved=null),this._itTail!==null&&(this._itTail._next=null),this._removalsTail!==null&&(this._removalsTail._nextRemoved=null),this._identityChangesTail!==null&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,r,n){this._unlinkedRecords!==null&&this._unlinkedRecords.remove(e);let i=e._prevRemoved,a=e._nextRemoved;return i===null?this._removalsHead=a:i._nextRemoved=a,a===null?this._removalsTail=i:a._prevRemoved=i,this._insertAfter(e,r,n),this._addToMoves(e,n),e}_moveAfter(e,r,n){return this._unlink(e),this._insertAfter(e,r,n),this._addToMoves(e,n),e}_addAfter(e,r,n){return this._insertAfter(e,r,n),this._additionsTail===null?this._additionsTail=this._additionsHead=e:this._additionsTail=this._additionsTail._nextAdded=e,e}_insertAfter(e,r,n){let i=r===null?this._itHead:r._next;return e._next=i,e._prev=r,i===null?this._itTail=e:i._prev=e,r===null?this._itHead=e:r._next=e,this._linkedRecords===null&&(this._linkedRecords=new ld),this._linkedRecords.put(e),e.currentIndex=n,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){this._linkedRecords!==null&&this._linkedRecords.remove(e);let r=e._prev,n=e._next;return r===null?this._itHead=n:r._next=n,n===null?this._itTail=r:n._prev=r,e}_addToMoves(e,r){return e.previousIndex===r||(this._movesTail===null?this._movesTail=this._movesHead=e:this._movesTail=this._movesTail._nextMoved=e),e}_addToRemovals(e){return this._unlinkedRecords===null&&(this._unlinkedRecords=new ld),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,this._removalsTail===null?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,r){return e.item=r,this._identityChangesTail===null?this._identityChangesTail=this._identityChangesHead=e:this._identityChangesTail=this._identityChangesTail._nextIdentityChange=e,e}},Tg=class{constructor(e,r){this.item=e,this.trackById=r,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}},Ig=class{constructor(){this._head=null,this._tail=null}add(e){this._head===null?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,r){let n;for(n=this._head;n!==null;n=n._nextDup)if((r===null||r<=n.currentIndex)&&Object.is(n.trackById,e))return n;return null}remove(e){let r=e._prevDup,n=e._nextDup;return r===null?this._head=n:r._nextDup=n,n===null?this._tail=r:n._prevDup=r,this._head===null}},ld=class{constructor(){this.map=new Map}put(e){let r=e.trackById,n=this.map.get(r);n||(n=new Ig,this.map.set(r,n)),n.add(e)}get(e,r){let n=e,i=this.map.get(n);return i?i.get(e,r):null}remove(e){let r=e.trackById;return this.map.get(r).remove(e)&&this.map.delete(r),e}get isEmpty(){return this.map.size===0}clear(){this.map.clear()}};function dw(t,e,r){let n=t.previousIndex;if(n===null)return n;let i=0;return r&&n<r.length&&(i=r[n]),n+e+i}function hw(){return new p0([new _g])}var p0=(()=>{let e=class e{constructor(n){this.factories=n}static create(n,i){if(i!=null){let a=i.factories.slice();n=n.concat(a)}return new e(n)}static extend(n){return{provide:e,useFactory:i=>e.create(n,i||hw()),deps:[[e,new tF,new Ew]]}}find(n){let i=this.factories.find(a=>a.supports(n));if(i!=null)return i;throw new rt(901,!1)}};e.\u0275prov=Kt({token:e,providedIn:"root",factory:hw});let t=e;return t})();function y2(t){try{let{rootComponent:e,appProviders:r,platformProviders:n}=t,i=k5(n),a=[P5(),...r||[]],s=new ad({providers:a,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,l=s.get(Rr);return l.run(()=>{s.resolveInjectorInitializers();let o=s.get(ii,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:h=>{o.handleError(h)}})});let f=()=>s.destroy(),d=i.get(m2);return d.add(f),s.onDestroy(()=>{c.unsubscribe(),d.delete(f)}),I5(o,l,()=>{let h=s.get(g2);return h.runInitializers(),h.donePromise.then(()=>{let p=s.get(h0,ud);h5(p||ud);let m=s.get(d0);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}function g0(t){return typeof t=="boolean"?t:t!=null&&t!=="false"}var x2=null;function $s(){return x2}function _2(t){x2??=t}var Ad=class{};var $o=new bt("");function E2(t,e){e=encodeURIComponent(e);for(let r of t.split(";")){let n=r.indexOf("="),[i,a]=n==-1?[r,""]:[r.slice(0,n),r.slice(n+1)];if(i.trim()===e)return decodeURIComponent(a)}return null}var m0=class{constructor(e,r,n,i){this.$implicit=e,this.ngForOf=r,this.index=n,this.count=i}get first(){return this.index===0}get last(){return this.index===this.count-1}get even(){return this.index%2===0}get odd(){return!this.even}},T2=(()=>{let e=class e{set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}constructor(n,i,a){this._viewContainer=n,this._template=i,this._differs=a,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;let n=this._ngForOf;if(!this._differ&&n)if(0)try{}catch{}else this._differ=this._differs.find(n).create(this.ngForTrackBy)}if(this._differ){let n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){let i=this._viewContainer;n.forEachOperation((a,u,s)=>{if(a.previousIndex==null)i.createEmbeddedView(this._template,new m0(a.item,this._ngForOf,-1,-1),s===null?void 0:s);else if(s==null)i.remove(u===null?void 0:u);else if(u!==null){let l=i.get(u);i.move(l,s),v2(l,a)}});for(let a=0,u=i.length;a<u;a++){let l=i.get(a).context;l.index=a,l.count=u,l.ngForOf=this._ngForOf}n.forEachIdentityChange(a=>{let u=i.get(a.currentIndex);v2(u,a)})}static ngTemplateContextGuard(n,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ot(Ls),ot(Pa),ot(p0))},e.\u0275dir=hn({type:e,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0});let t=e;return t})();function v2(t,e){t.context.$implicit=e.item}var I2=(()=>{let e=class e{constructor(n,i){this._viewContainer=n,this._context=new y0,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=i}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){b2("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){b2("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,i){return!0}};e.\u0275fac=function(i){return new(i||e)(ot(Ls),ot(Pa))},e.\u0275dir=hn({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),y0=class{constructor(){this.$implicit=null,this.ngIf=null}};function b2(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${An(e)}'.`)}var Ol=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ps({type:e}),e.\u0275inj=Os({});let t=e;return t})(),A2="browser",j5="server";function v0(t){return t===j5}var Sd=class{};var x0=class extends Ad{constructor(){super(...arguments),this.supportsDOMEvents=!0}},_0=class t extends x0{static makeCurrent(){_2(new t)}onAndCancel(e,r,n){return e.addEventListener(r,n),()=>{e.removeEventListener(r,n)}}dispatchEvent(e,r){e.dispatchEvent(r)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,r){return r=r||this.getDefaultDocument(),r.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,r){return r==="window"?window:r==="document"?e:r==="body"?e.body:null}getBaseHref(e){let r=z5();return r==null?null:G5(r)}resetBaseElement(){Pl=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return E2(document.cookie,e)}},Pl=null;function z5(){return Pl=Pl||document.querySelector("base"),Pl?Pl.getAttribute("href"):null}function G5(t){return new URL(t,document.baseURI).pathname}var W5=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})(),E0=new bt(""),O2=(()=>{let e=class e{constructor(n,i){this._zone=i,this._eventNameToPlugin=new Map,n.forEach(a=>{a.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,i,a){return this._findPluginFor(i).addEventListener(n,i,a)}getZone(){return this._zone}_findPluginFor(n){let i=this._eventNameToPlugin.get(n);if(i)return i;if(i=this._plugins.find(u=>u.supports(n)),!i)throw new rt(5101,!1);return this._eventNameToPlugin.set(n,i),i}};e.\u0275fac=function(i){return new(i||e)(Dt(E0),Dt(Rr))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})(),Dd=class{constructor(e){this._doc=e}},b0="ng-app-id",P2=(()=>{let e=class e{constructor(n,i,a,u={}){this.doc=n,this.appId=i,this.nonce=a,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=v0(u),this.resetHostNodes()}addStyles(n){for(let i of n)this.changeUsageCount(i,1)===1&&this.onStyleAdded(i)}removeStyles(n){for(let i of n)this.changeUsageCount(i,-1)<=0&&this.onStyleRemoved(i)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(i=>i.remove()),n.clear());for(let i of this.getAllStyles())this.onStyleRemoved(i);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let i of this.getAllStyles())this.addStyleToHost(n,i)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let i of this.hostNodes)this.addStyleToHost(i,n)}onStyleRemoved(n){let i=this.styleRef;i.get(n)?.elements?.forEach(a=>a.remove()),i.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${b0}="${this.appId}"]`);if(n?.length){let i=new Map;return n.forEach(a=>{a.textContent!=null&&i.set(a.textContent,a)}),i}return null}changeUsageCount(n,i){let a=this.styleRef;if(a.has(n)){let u=a.get(n);return u.usage+=i,u.usage}return a.set(n,{usage:i,elements:[]}),i}getStyleElement(n,i){let a=this.styleNodesInDOM,u=a?.get(i);if(u?.parentNode===n)return a.delete(i),u.removeAttribute(b0),u;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=i,this.platformIsServer&&s.setAttribute(b0,this.appId),n.appendChild(s),s}}addStyleToHost(n,i){let a=this.getStyleElement(n,i),u=this.styleRef,s=u.get(i)?.elements;s?s.push(a):u.set(i,{elements:[a],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(i){return new(i||e)(Dt($o),Dt(Gg),Dt(qg,8),Dt(Fs))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})(),w0={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},I0=/%COMP%/g,M2="%COMP%",q5=`_nghost-${M2}`,X5=`_ngcontent-${M2}`,Y5=!0,Z5=new bt("",{providedIn:"root",factory:()=>Y5});function K5(t){return X5.replace(I0,t)}function Q5(t){return q5.replace(I0,t)}function N2(t,e){return e.map(r=>r.replace(I0,t))}var S2=(()=>{let e=class e{constructor(n,i,a,u,s,l,o,c=null){this.eventManager=n,this.sharedStylesHost=i,this.appId=a,this.removeStylesOnCompDestroy=u,this.doc=s,this.platformId=l,this.ngZone=o,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=v0(l),this.defaultRenderer=new Ml(n,s,o,this.platformIsServer)}createRenderer(n,i){if(!n||!i)return this.defaultRenderer;this.platformIsServer&&i.encapsulation===Fo.ShadowDom&&(i=B(N({},i),{encapsulation:Fo.Emulated}));let a=this.getOrCreateRenderer(n,i);return a instanceof Cd?a.applyToHost(n):a instanceof Nl&&a.applyStyles(),a}getOrCreateRenderer(n,i){let a=this.rendererByCompId,u=a.get(i.id);if(!u){let s=this.doc,l=this.ngZone,o=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(i.encapsulation){case Fo.Emulated:u=new Cd(o,c,i,this.appId,f,s,l,d);break;case Fo.ShadowDom:return new T0(o,c,n,i,s,l,this.nonce,d);default:u=new Nl(o,c,i,f,s,l,d);break}a.set(i.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(i){return new(i||e)(Dt(O2),Dt(P2),Dt(Gg),Dt(Z5),Dt($o),Dt(Fs),Dt(Rr),Dt(qg))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})(),Ml=class{constructor(e,r,n,i){this.eventManager=e,this.doc=r,this.ngZone=n,this.platformIsServer=i,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,r){return r?this.doc.createElementNS(w0[r]||r,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,r){(D2(e)?e.content:e).appendChild(r)}insertBefore(e,r,n){e&&(D2(e)?e.content:e).insertBefore(r,n)}removeChild(e,r){e&&e.removeChild(r)}selectRootElement(e,r){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new rt(-5104,!1);return r||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,r,n,i){if(i){r=i+":"+r;let a=w0[i];a?e.setAttributeNS(a,r,n):e.setAttribute(r,n)}else e.setAttribute(r,n)}removeAttribute(e,r,n){if(n){let i=w0[n];i?e.removeAttributeNS(i,r):e.removeAttribute(`${n}:${r}`)}else e.removeAttribute(r)}addClass(e,r){e.classList.add(r)}removeClass(e,r){e.classList.remove(r)}setStyle(e,r,n,i){i&(ai.DashCase|ai.Important)?e.style.setProperty(r,n,i&ai.Important?"important":""):e.style[r]=n}removeStyle(e,r,n){n&ai.DashCase?e.style.removeProperty(r):e.style[r]=""}setProperty(e,r,n){e!=null&&(e[r]=n)}setValue(e,r){e.nodeValue=r}listen(e,r,n){if(typeof e=="string"&&(e=$s().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${r}`);return this.eventManager.addEventListener(e,r,this.decoratePreventDefault(n))}decoratePreventDefault(e){return r=>{if(r==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(r)):e(r))===!1&&r.preventDefault()}}};function D2(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var T0=class extends Ml{constructor(e,r,n,i,a,u,s,l){super(e,a,u,l),this.sharedStylesHost=r,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let o=N2(i.id,i.styles);for(let c of o){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=c,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,r){return super.appendChild(this.nodeOrShadowRoot(e),r)}insertBefore(e,r,n){return super.insertBefore(this.nodeOrShadowRoot(e),r,n)}removeChild(e,r){return super.removeChild(this.nodeOrShadowRoot(e),r)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},Nl=class extends Ml{constructor(e,r,n,i,a,u,s,l){super(e,a,u,s),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=i,this.styles=l?N2(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Cd=class extends Nl{constructor(e,r,n,i,a,u,s,l){let o=i+"-"+n.id;super(e,r,n,a,u,s,l,o),this.contentAttr=K5(o),this.hostAttr=Q5(o)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,r){let n=super.createElement(e,r);return super.setAttribute(n,this.contentAttr,""),n}},J5=(()=>{let e=class e extends Dd{constructor(n){super(n)}supports(n){return!0}addEventListener(n,i,a){return n.addEventListener(i,a,!1),()=>this.removeEventListener(n,i,a)}removeEventListener(n,i,a){return n.removeEventListener(i,a)}};e.\u0275fac=function(i){return new(i||e)(Dt($o))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})(),C2=["alt","control","meta","shift"],eB={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},tB={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},rB=(()=>{let e=class e extends Dd{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,i,a){let u=e.parseEventName(i),s=e.eventCallback(u.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>$s().onAndCancel(n,u.domEventName,s))}static parseEventName(n){let i=n.toLowerCase().split("."),a=i.shift();if(i.length===0||!(a==="keydown"||a==="keyup"))return null;let u=e._normalizeKey(i.pop()),s="",l=i.indexOf("code");if(l>-1&&(i.splice(l,1),s="code."),C2.forEach(c=>{let f=i.indexOf(c);f>-1&&(i.splice(f,1),s+=c+".")}),s+=u,i.length!=0||u.length===0)return null;let o={};return o.domEventName=a,o.fullKey=s,o}static matchEventFullKeyCode(n,i){let a=eB[n.key]||n.key,u="";return i.indexOf("code.")>-1&&(a=n.code,u="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),C2.forEach(s=>{if(s!==a){let l=tB[s];l(n)&&(u+=s+".")}}),u+=a,u===i)}static eventCallback(n,i,a){return u=>{e.matchEventFullKeyCode(u,n)&&a.runGuarded(()=>i(u))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(i){return new(i||e)(Dt($o))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac});let t=e;return t})();function R2(t,e){return y2(N({rootComponent:t},nB(e)))}function nB(t){return{appProviders:[...uB,...t?.providers??[]],platformProviders:sB}}function oB(){_0.makeCurrent()}function iB(){return new ii}function aB(){return Ex(document),document}var sB=[{provide:Fs,useValue:A2},{provide:Wg,useValue:oB,multi:!0},{provide:$o,useFactory:aB,deps:[]}];var uB=[{provide:dd,useValue:"root"},{provide:ii,useFactory:iB,deps:[]},{provide:E0,useClass:J5,multi:!0,deps:[$o,Rr,Fs]},{provide:E0,useClass:rB,multi:!0,deps:[$o]},S2,P2,O2,{provide:wl,useExisting:S2},{provide:Sd,useClass:W5,deps:[]},[]];var H2=(()=>{let e=class e{constructor(n,i){this._renderer=n,this._elementRef=i,this.onChange=a=>{},this.onTouched=()=>{}}setProperty(n,i){this._renderer.setProperty(this._elementRef.nativeElement,n,i)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}};e.\u0275fac=function(i){return new(i||e)(ot(Na),ot(vo))},e.\u0275dir=hn({type:e});let t=e;return t})(),Nd=(()=>{let e=class e extends H2{};e.\u0275fac=(()=>{let n;return function(a){return(n||(n=Dl(e)))(a||e)}})(),e.\u0275dir=hn({type:e,features:[li]});let t=e;return t})(),Ll=new bt(""),lB={provide:Ll,useExisting:Mi(()=>O0),multi:!0},O0=(()=>{let e=class e extends Nd{writeValue(n){this.setProperty("checked",n)}};e.\u0275fac=(()=>{let n;return function(a){return(n||(n=Dl(e)))(a||e)}})(),e.\u0275dir=hn({type:e,selectors:[["input","type","checkbox","formControlName",""],["input","type","checkbox","formControl",""],["input","type","checkbox","ngModel",""]],hostBindings:function(i,a){i&1&&fi("change",function(s){return a.onChange(s.target.checked)})("blur",function(){return a.onTouched()})},features:[Bs([lB]),li]});let t=e;return t})(),cB={provide:Ll,useExisting:Mi(()=>z2),multi:!0};function fB(){let t=$s()?$s().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}var dB=new bt(""),z2=(()=>{let e=class e extends H2{constructor(n,i,a){super(n,i),this._compositionMode=a,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!fB())}writeValue(n){let i=n??"";this.setProperty("value",i)}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}};e.\u0275fac=function(i){return new(i||e)(ot(Na),ot(vo),ot(dB,8))},e.\u0275dir=hn({type:e,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(i,a){i&1&&fi("input",function(s){return a._handleInput(s.target.value)})("blur",function(){return a.onTouched()})("compositionstart",function(){return a._compositionStart()})("compositionend",function(s){return a._compositionEnd(s.target.value)})},features:[Bs([cB]),li]});let t=e;return t})();var hB=new bt(""),pB=new bt("");function G2(t){return t!=null}function W2(t){return Cl(t)?yp(t):t}function q2(t){let e={};return t.forEach(r=>{e=r!=null?N(N({},e),r):e}),Object.keys(e).length===0?null:e}function X2(t,e){return e.map(r=>r(t))}function gB(t){return!t.validate}function Y2(t){return t.map(e=>gB(e)?e:r=>e.validate(r))}function mB(t){if(!t)return null;let e=t.filter(G2);return e.length==0?null:function(r){return q2(X2(r,e))}}function Z2(t){return t!=null?mB(Y2(t)):null}function yB(t){if(!t)return null;let e=t.filter(G2);return e.length==0?null:function(r){let n=X2(r,e).map(W2);return vp(n).pipe(xa(q2))}}function K2(t){return t!=null?yB(Y2(t)):null}function F2(t,e){return t===null?[e]:Array.isArray(t)?[...t,e]:[t,e]}function vB(t){return t._rawValidators}function bB(t){return t._rawAsyncValidators}function A0(t){return t?Array.isArray(t)?t:[t]:[]}function Pd(t,e){return Array.isArray(t)?t.includes(e):t===e}function k2(t,e){let r=A0(e);return A0(t).forEach(i=>{Pd(r,i)||r.push(i)}),r}function L2(t,e){return A0(e).filter(r=>!Pd(t,r))}var Md=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=Z2(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=K2(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,r){return this.control?this.control.hasError(e,r):!1}getError(e,r){return this.control?this.control.getError(e,r):null}},S0=class extends Md{get formDirective(){return null}get path(){return null}},kl=class extends Md{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},D0=class{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},wB={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},BJ=B(N({},wB),{"[class.ng-submitted]":"isSubmitted"}),Q2=(()=>{let e=class e extends D0{constructor(n){super(n)}};e.\u0275fac=function(i){return new(i||e)(ot(kl,2))},e.\u0275dir=hn({type:e,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(i,a){i&2&&ci("ng-untouched",a.isUntouched)("ng-touched",a.isTouched)("ng-pristine",a.isPristine)("ng-dirty",a.isDirty)("ng-valid",a.isValid)("ng-invalid",a.isInvalid)("ng-pending",a.isPending)},features:[li]});let t=e;return t})();var Rl="VALID",Od="INVALID",Vs="PENDING",Fl="DISABLED";function xB(t){return(Rd(t)?t.validators:t)||null}function _B(t){return Array.isArray(t)?Z2(t):t||null}function EB(t,e){return(Rd(e)?e.asyncValidators:t)||null}function TB(t){return Array.isArray(t)?K2(t):t||null}function Rd(t){return t!=null&&!Array.isArray(t)&&typeof t=="object"}var C0=class{constructor(e,r){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(r)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===Rl}get invalid(){return this.status===Od}get pending(){return this.status==Vs}get disabled(){return this.status===Fl}get enabled(){return this.status!==Fl}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(k2(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(k2(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(L2(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(L2(e,this._rawAsyncValidators))}hasValidator(e){return Pd(this._rawValidators,e)}hasAsyncValidator(e){return Pd(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(r=>{r.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(r=>{r.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=Vs,e.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){let r=this._parentMarkedDirty(e.onlySelf);this.status=Fl,this.errors=null,this._forEachChild(n=>{n.disable(B(N({},e),{onlySelf:!0}))}),this._updateValue(),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(B(N({},e),{skipPristineCheck:r})),this._onDisabledChange.forEach(n=>n(!0))}enable(e={}){let r=this._parentMarkedDirty(e.onlySelf);this.status=Rl,this._forEachChild(n=>{n.enable(B(N({},e),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors(B(N({},e),{skipPristineCheck:r})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Rl||this.status===Vs)&&this._runAsyncValidator(e.emitEvent)),e.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(r=>r._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?Fl:Rl}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=Vs,this._hasOwnPendingAsyncValidator=!0;let r=W2(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,r={}){this.errors=e,this._updateControlsErrors(r.emitEvent!==!1)}get(e){let r=e;return r==null||(Array.isArray(r)||(r=r.split(".")),r.length===0)?null:r.reduce((n,i)=>n&&n._find(i),this)}getError(e,r){let n=r?this.get(r):this;return n&&n.errors?n.errors[e]:null}hasError(e,r){return!!this.getError(e,r)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new Ro,this.statusChanges=new Ro}_calculateStatus(){return this._allControlsDisabled()?Fl:this.errors?Od:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Vs)?Vs:this._anyControlsHaveStatus(Od)?Od:Rl}_anyControlsHaveStatus(e){return this._anyControls(r=>r.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Rd(e)&&e.updateOn!=null&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){let r=this._parent&&this._parent.dirty;return!e&&!!r&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=_B(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=TB(this._rawAsyncValidators)}};var J2=new bt("CallSetDisabledState",{providedIn:"root",factory:()=>P0}),P0="always";function IB(t,e){return[...e.path,t]}function AB(t,e,r=P0){DB(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||r==="always")&&e.valueAccessor.setDisabledState?.(t.disabled),CB(t,e),PB(t,e),OB(t,e),SB(t,e)}function B2(t,e){t.forEach(r=>{r.registerOnValidatorChange&&r.registerOnValidatorChange(e)})}function SB(t,e){if(e.valueAccessor.setDisabledState){let r=n=>{e.valueAccessor.setDisabledState(n)};t.registerOnDisabledChange(r),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(r)})}}function DB(t,e){let r=vB(t);e.validator!==null?t.setValidators(F2(r,e.validator)):typeof r=="function"&&t.setValidators([r]);let n=bB(t);e.asyncValidator!==null?t.setAsyncValidators(F2(n,e.asyncValidator)):typeof n=="function"&&t.setAsyncValidators([n]);let i=()=>t.updateValueAndValidity();B2(e._rawValidators,i),B2(e._rawAsyncValidators,i)}function CB(t,e){e.valueAccessor.registerOnChange(r=>{t._pendingValue=r,t._pendingChange=!0,t._pendingDirty=!0,t.updateOn==="change"&&e_(t,e)})}function OB(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,t.updateOn==="blur"&&t._pendingChange&&e_(t,e),t.updateOn!=="submit"&&t.markAsTouched()})}function e_(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}function PB(t,e){let r=(n,i)=>{e.valueAccessor.writeValue(n),i&&e.viewToModelUpdate(n)};t.registerOnChange(r),e._registerOnDestroy(()=>{t._unregisterOnChange(r)})}function MB(t,e){if(!t.hasOwnProperty("model"))return!1;let r=t.model;return r.isFirstChange()?!0:!Object.is(e,r.currentValue)}function NB(t){return Object.getPrototypeOf(t.constructor)===Nd}function RB(t,e){if(!e)return null;Array.isArray(e);let r,n,i;return e.forEach(a=>{a.constructor===z2?r=a:NB(a)?n=a:i=a}),i||n||r||null}function $2(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}function V2(t){return typeof t=="object"&&t!==null&&Object.keys(t).length===2&&"value"in t&&"disabled"in t}var FB=class extends C0{constructor(e=null,r,n){super(xB(r),EB(n,r)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(r),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Rd(r)&&(r.nonNullable||r.initialValueIsDefault)&&(V2(e)?this.defaultValue=e.value:this.defaultValue=e)}setValue(e,r={}){this.value=this._pendingValue=e,this._onChange.length&&r.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,r.emitViewToModelChange!==!1)),this.updateValueAndValidity(r)}patchValue(e,r={}){this.setValue(e,r)}reset(e=this.defaultValue,r={}){this._applyFormState(e),this.markAsPristine(r),this.markAsUntouched(r),this.setValue(this.value,r),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){$2(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){$2(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(e){V2(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}};var kB={provide:kl,useExisting:Mi(()=>M0)},j2=Promise.resolve(),M0=(()=>{let e=class e extends kl{constructor(n,i,a,u,s,l){super(),this._changeDetectorRef=s,this.callSetDisabledState=l,this.control=new FB,this._registered=!1,this.name="",this.update=new Ro,this._parent=n,this._setValidators(i),this._setAsyncValidators(a),this.valueAccessor=RB(this,u)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){let i=n.name.previousValue;this.formDirective.removeControl({name:i,path:this._getPath(i)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),MB(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){AB(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(n){j2.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){let i=n.isDisabled.currentValue,a=i!==0&&g0(i);j2.then(()=>{a&&!this.control.disabled?this.control.disable():!a&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?IB(n,this._parent):[n]}};e.\u0275fac=function(i){return new(i||e)(ot(S0,9),ot(hB,10),ot(pB,10),ot(Ll,10),ot(Id,8),ot(J2,8))},e.\u0275dir=hn({type:e,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[po.None,"disabled","isDisabled"],model:[po.None,"ngModel","model"],options:[po.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[Bs([kB]),li,gd]});let t=e;return t})();var LB={provide:Ll,useExisting:Mi(()=>Fd),multi:!0};function t_(t,e){return t==null?`${e}`:(e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function BB(t){return t.split(":")[0]}var Fd=(()=>{let e=class e extends Nd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let i=this._getOptionId(n),a=t_(i,n);this.setProperty("value",a)}registerOnChange(n){this.onChange=i=>{this.value=this._getOptionValue(i),n(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i),n))return i;return null}_getOptionValue(n){let i=BB(n);return this._optionMap.has(i)?this._optionMap.get(i):n}};e.\u0275fac=(()=>{let n;return function(a){return(n||(n=Dl(e)))(a||e)}})(),e.\u0275dir=hn({type:e,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(i,a){i&1&&fi("change",function(s){return a.onChange(s.target.value)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bs([LB]),li]});let t=e;return t})(),r_=(()=>{let e=class e{constructor(n,i,a){this._element=n,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption())}set ngValue(n){this._select!=null&&(this._select._optionMap.set(this.id,n),this._setElementValue(t_(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._setElementValue(n),this._select&&this._select.writeValue(this._select.value)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ot(vo),ot(Na),ot(Fd,9))},e.\u0275dir=hn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})(),$B={provide:Ll,useExisting:Mi(()=>n_),multi:!0};function U2(t,e){return t==null?`${e}`:(typeof e=="string"&&(e=`'${e}'`),e&&typeof e=="object"&&(e="Object"),`${t}: ${e}`.slice(0,50))}function VB(t){return t.split(":")[0]}var n_=(()=>{let e=class e extends Nd{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(n){this._compareWith=n}writeValue(n){this.value=n;let i;if(Array.isArray(n)){let a=n.map(u=>this._getOptionId(u));i=(u,s)=>{u._setSelected(a.indexOf(s.toString())>-1)}}else i=(a,u)=>{a._setSelected(!1)};this._optionMap.forEach(i)}registerOnChange(n){this.onChange=i=>{let a=[],u=i.selectedOptions;if(u!==void 0){let s=u;for(let l=0;l<s.length;l++){let o=s[l],c=this._getOptionValue(o.value);a.push(c)}}else{let s=i.options;for(let l=0;l<s.length;l++){let o=s[l];if(o.selected){let c=this._getOptionValue(o.value);a.push(c)}}}this.value=a,n(a)}}_registerOption(n){let i=(this._idCounter++).toString();return this._optionMap.set(i,n),i}_getOptionId(n){for(let i of this._optionMap.keys())if(this._compareWith(this._optionMap.get(i)._value,n))return i;return null}_getOptionValue(n){let i=VB(n);return this._optionMap.has(i)?this._optionMap.get(i)._value:n}};e.\u0275fac=(()=>{let n;return function(a){return(n||(n=Dl(e)))(a||e)}})(),e.\u0275dir=hn({type:e,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(i,a){i&1&&fi("change",function(s){return a.onChange(s.target)})("blur",function(){return a.onTouched()})},inputs:{compareWith:"compareWith"},features:[Bs([$B]),li]});let t=e;return t})(),o_=(()=>{let e=class e{constructor(n,i,a){this._element=n,this._renderer=i,this._select=a,this._select&&(this.id=this._select._registerOption(this))}set ngValue(n){this._select!=null&&(this._value=n,this._setElementValue(U2(this.id,n)),this._select.writeValue(this._select.value))}set value(n){this._select?(this._value=n,this._setElementValue(U2(this.id,n)),this._select.writeValue(this._select.value)):this._setElementValue(n)}_setElementValue(n){this._renderer.setProperty(this._element.nativeElement,"value",n)}_setSelected(n){this._renderer.setProperty(this._element.nativeElement,"selected",n)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}};e.\u0275fac=function(i){return new(i||e)(ot(vo),ot(Na),ot(n_,9))},e.\u0275dir=hn({type:e,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}});let t=e;return t})();var jB=(()=>{let e=class e{};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ps({type:e}),e.\u0275inj=Os({});let t=e;return t})();var i_=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:J2,useValue:n.callSetDisabledState??P0}]}}};e.\u0275fac=function(i){return new(i||e)},e.\u0275mod=Ps({type:e}),e.\u0275inj=Os({imports:[jB]});let t=e;return t})();function HB(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function zB(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var GB=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,a){i.__proto__=a}||function(i,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(i[u]=a[u])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a_=function(t){GB(e,t);function e(r,n){var i=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:i.name,enumerable:!1,configurable:!0}),HB(a,i.prototype),zB(a),a}return e}(Error);var WB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),qB=function(t){WB(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(a_),Ot=qB;var XB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),YB=function(t){XB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Ot),Qt=YB;var ZB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),KB=function(t){ZB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Ot),re=KB;var QB=function(){function t(e){if(this.binarizer=e,e===null)throw new re("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,i){var a=this.binarizer.getLuminanceSource().crop(e,r,n,i);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),Bl=QB;var JB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),e$=function(t){JB(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Ot),it=e$;var t$=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),N0=t$;var r$=function(){function t(){}return t.arraycopy=function(e,r,n,i,a){for(;a--;)n[i++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Pe=r$;var n$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),o$=function(t){n$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Ot),js=o$;var i$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a$=function(t){i$(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var i=t.call(this,n)||this;return i.index=r,i.message=n,i}return e.kind="ArrayIndexOutOfBoundsException",e}(js),R0=a$;var s$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u$=function(){function t(){}return t.fill=function(e,r){for(var n=0,i=e.length;n<i;n++)e[n]=r},t.fillWithin=function(e,r,n,i){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=i},t.rangeCheck=function(e,r,n){if(r>n)throw new re("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new R0(r);if(n>e)throw new R0(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var i=Array.from({length:e});return i.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,i=e.length;n<i;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var i=1;try{for(var a=s$(e),u=a.next();!u.done;u=a.next()){var s=u.value;i=31*i+s}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var i=n-r,a=new Int32Array(i);return Pe.arraycopy(e,r,a,0,i),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var i=0,a=e.length-1;i<=a;){var u=a+i>>1,s=n(r,e[u]);if(s>0)i=u+1;else if(s<0)a=u-1;else return u}return-i-1},t.numberComparator=function(e,r){return e-r},t}(),at=u$;var l$=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ge=l$;var c$=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Pe.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=n[i];a&=~((1<<(e&31))-1);for(var u=n.length;a===0;){if(++i===u)return r;a=n[i]}var s=i*32+ge.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,i=Math.floor(e/32),a=~n[i];a&=~((1<<(e&31))-1);for(var u=n.length;a===0;){if(++i===u)return r;a=~n[i]}var s=i*32+ge.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new re;if(r!==e){r--;for(var n=Math.floor(e/32),i=Math.floor(r/32),a=this.bits,u=n;u<=i;u++){var s=u>n?0:e&31,l=u<i?31:r&31,o=(2<<l)-(1<<s);a[u]|=o}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new re;if(r===e)return!0;r--;for(var i=Math.floor(e/32),a=Math.floor(r/32),u=this.bits,s=i;s<=a;s++){var l=s>i?0:e&31,o=s<a?31:r&31,c=(2<<o)-(1<<l)&4294967295;if((u[s]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new re("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new re("Sizes don't match");for(var r=this.bits,n=0,i=r.length;n<i;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,i){for(var a=0;a<i;a++){for(var u=0,s=0;s<8;s++)this.get(e)&&(u|=1<<7-s),e++;r[n+a]=u}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,i=this.bits,a=0;a<n;a++){var u=i[a];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[r-a]=u}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var o=e[a];l|=o<<32-s,e[a-1]=l,l=o>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&at.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+at.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),kt=c$;var s_=function(t){return t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",t}(s_||{}),Me=s_;var f$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),d$=function(t){f$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Ot),K=d$;var h$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Mt=function(t){return t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR",t}(Mt||{}),p$=function(){function t(e,r,n){for(var i,a,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=u,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,o=0,c=l.length;o!==c;o++){var f=l[o];t.VALUES_TO_ECI.set(f,this)}try{for(var d=h$(u),h=d.next();!h.done;h=d.next()){var p=h.value;t.NAME_TO_ECI.set(p,this)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new K("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new K("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new K("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(Mt.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(Mt.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(Mt.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(Mt.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(Mt.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(Mt.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(Mt.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(Mt.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(Mt.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(Mt.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(Mt.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(Mt.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(Mt.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(Mt.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(Mt.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(Mt.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(Mt.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(Mt.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(Mt.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(Mt.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(Mt.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(Mt.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(Mt.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(Mt.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(Mt.Big5,28,"Big5"),t.GB18030=new t(Mt.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(Mt.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),Lt=p$;var g$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m$=function(t){g$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Ot),La=m$;var y$=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Lt?e:Lt.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var i="",a=0,u=e.length;a<u;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),i+="%"+s}return decodeURIComponent(i)}if(n.equals(Lt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new La("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Lt.UTF8)||e.equals(Lt.ISO8859_1)||e.equals(Lt.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),i=[],a=0;a<n.length;a++)i.push(n[a].charCodeAt(0));return new Uint8Array(i)},t}(),Cr=y$;var v$=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Cr.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Me.CHARACTER_SET)!==void 0)return r.get(Me.CHARACTER_SET).toString();for(var n=e.length,i=!0,a=!0,u=!0,s=0,l=0,o=0,c=0,f=0,d=0,h=0,p=0,m=0,v=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,_=0;_<n&&(i||a||u);_++){var I=e[_]&255;u&&(s>0?I&128?s--:u=!1:I&128&&(I&64?(s++,I&32?(s++,I&16?(s++,I&8?u=!1:c++):o++):l++):u=!1)),i&&(I>127&&I<160?i=!1:I>159&&(I<192||I===215||I===247)&&x++),a&&(f>0?I<64||I===127||I>252?a=!1:f--:I===128||I===160||I>239?a=!1:I>160&&I<224?(d++,p=0,h++,h>m&&(m=h)):I>127?(f++,h=0,p++,p>v&&(v=p)):(h=0,p=0))}return u&&s>0&&(u=!1),a&&f>0&&(a=!1),u&&(y||l+o+c>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||m>=3||v>=3)?t.SHIFT_JIS:i&&a?m===2&&d===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:i?t.ISO88591:a?t.SHIFT_JIS:u?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=-1;function a(s,l,o,c,f,d){if(s==="%%")return"%";if(r[++i]!==void 0){s=c?parseInt(c.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,p;switch(d){case"s":p=r[i];break;case"c":p=r[i][0];break;case"f":p=parseFloat(r[i]).toFixed(s);break;case"p":p=parseFloat(r[i]).toPrecision(s);break;case"e":p=parseFloat(r[i]).toExponential(s);break;case"x":p=parseInt(r[i]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[i],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(o),v=o&&o[0]+""=="0"?"0":" ";p.length<m;)p=l!==void 0?p+v:v+p;return p}}var u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,a)},t.getBytes=function(e,r){return Cr.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Lt.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Lt.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Lt.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),_e=v$;var b$=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var i=r;r<r+n;i++)this.append(e[i]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),de=b$;var w$=function(){function t(e,r,n,i){if(this.width=e,this.height=r,this.rowSize=n,this.bits=i,r==null&&(r=e),this.height=r,e<1||r<1)throw new re("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,i==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,i=new t(n,r),a=0;a<r;a++)for(var u=e[a],s=0;s<n;s++)u[s]&&i.set(s,a);return i},t.parseFromString=function(e,r,n){if(e===null)throw new re("stringRepresentation cannot be null");for(var i=new Array(e.length),a=0,u=0,s=-1,l=0,o=0;o<e.length;)if(e.charAt(o)===`
`||e.charAt(o)==="\r"){if(a>u){if(s===-1)s=a-u;else if(a-u!==s)throw new re("row lengths do not match");u=a,l++}o++}else if(e.substring(o,o+r.length)===r)o+=r.length,i[a]=!0,a++;else if(e.substring(o,o+n.length)===n)o+=n.length,i[a]=!1,a++;else throw new re("illegal character encountered: "+e.substring(o));if(a>u){if(s===-1)s=a-u;else if(a-u!==s)throw new re("row lengths do not match");l++}for(var c=new t(s,l),f=0;f<a;f++)i[f]&&c.set(Math.floor(f%s),Math.floor(f/s));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new re("input matrix dimensions do not match");for(var r=new kt(Math.floor(this.width/32)+1),n=this.rowSize,i=this.bits,a=0,u=this.height;a<u;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),o=0;o<n;o++)i[s+o]^=l[o]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,i){if(r<0||e<0)throw new re("Left and top must be nonnegative");if(i<1||n<1)throw new re("Height and width must be at least 1");var a=e+n,u=r+i;if(u>this.height||a>this.width)throw new re("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,o=r;o<u;o++)for(var c=o*s,f=e;f<a;f++)l[c+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new kt(this.width):r.clear();for(var n=this.rowSize,i=this.bits,a=e*n,u=0;u<n;u++)r.setBulk(u*32,i[a+u]);return r},t.prototype.setRow=function(e,r){Pe.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new kt(e),i=new kt(e),a=0,u=Math.floor((r+1)/2);a<u;a++)n=this.getRow(a,n),i=this.getRow(r-1-a,i),n.reverse(),i.reverse(),this.setRow(a,i),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,i=this.bits,a=e,u=r,s=-1,l=-1,o=0;o<r;o++)for(var c=0;c<n;c++){var f=i[o*n+c];if(f!==0){if(o<u&&(u=o),o>l&&(l=o),c*32<a){for(var d=0;!(f<<31-d&4294967295);)d++;c*32+d<a&&(a=c*32+d)}if(c*32+31>s){for(var d=31;!(f>>>d);)d--;c*32+d>s&&(s=c*32+d)}}}return s<a||l<u?null:Int32Array.from([a,u,s-a+1,l-u+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var i=n/e,a=n%e*32,u=r[n],s=0;!(u<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,i])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var i=Math.floor(n/e),a=Math.floor(n%e)*32,u=r[n],s=31;!(u>>>s);)s--;return a+=s,Int32Array.from([a,i])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&at.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+at.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var i=new de,a=0,u=this.height;a<u;a++){for(var s=0,l=this.width;s<l;s++)i.append(this.get(s,a)?e:r);i.append(n)}return i.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),Bt=w$;var x$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_$=function(t){x$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Ot),L=_$;var E$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),T$=function(t){E$(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var i=this.getLuminanceSource(),a=i.getWidth();n==null||n.getSize()<a?n=new kt(a):n.clear(),this.initArrays(a);for(var u=i.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(u[l]&255)>>e.LUMINANCE_SHIFT]++;var o=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(u[l]&255)<o&&n.set(l);else for(var c=u[0]&255,f=u[1]&255,l=1;l<a-1;l++){var d=u[l+1]&255;(f*4-c-d)/2<o&&n.set(l),c=f,f=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight(),a=new Bt(n,i);this.initArrays(n);for(var u=this.buckets,s=1;s<5;s++)for(var l=Math.floor(i*s/5),o=r.getRow(l,this.luminances),c=Math.floor(n*4/5),f=Math.floor(n/5);f<c;f++){var d=o[f]&255;u[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(u),p=r.getMatrix(),s=0;s<i;s++)for(var m=s*n,f=0;f<n;f++){var d=p[m+f]&255;d<h&&a.set(f,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,i=0;i<e.LUMINANCE_BUCKETS;i++)n[i]=0},e.estimateBlackPoint=function(r){for(var n=r.length,i=0,a=0,u=0,s=0;s<n;s++)r[s]>u&&(a=s,u=r[s]),r[s]>i&&(i=r[s]);for(var l=0,o=0,s=0;s<n;s++){var c=s-a,f=r[s]*c*c;f>o&&(l=s,o=f)}if(a>l){var d=a;a=l,l=d}if(l-a<=n/16)throw new L;for(var h=l-1,p=-1,s=l-1;s>a;s--){var m=s-a,f=m*m*(l-s)*(i-r[s]);f>p&&(h=s,p=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(N0),F0=T$;var I$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),A$=function(t){I$(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),i=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&i>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),u=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&u++;var s=i>>e.BLOCK_SIZE_POWER;i&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,u,s,n,i),o=new Bt(n,i);e.calculateThresholdForBlock(a,u,s,n,i,l,o),this.matrix=o}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,i,a,u,s,l){for(var o=u-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=0;f<i;f++){var d=f<<e.BLOCK_SIZE_POWER;d>o&&(d=o);for(var h=e.cap(f,2,i-3),p=0;p<n;p++){var m=p<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var v=e.cap(p,2,n-3),x=0,y=-2;y<=2;y++){var _=s[h+y];x+=_[v-2]+_[v-1]+_[v]+_[v+1]+_[v+2]}var I=x/25;e.thresholdBlock(r,m,d,I,a,l)}}},e.cap=function(r,n,i){return r<n?n:r>i?i:r},e.thresholdBlock=function(r,n,i,a,u,s){for(var l=0,o=i*u+n;l<e.BLOCK_SIZE;l++,o+=u)for(var c=0;c<e.BLOCK_SIZE;c++)(r[o+c]&255)<=a&&s.set(n+c,i+l)},e.calculateBlackPoints=function(r,n,i,a,u){for(var s=u-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,o=new Array(i),c=0;c<i;c++){o[c]=new Int32Array(n);var f=c<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var d=0;d<n;d++){var h=d<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var p=0,m=255,v=0,x=0,y=f*a+h;x<e.BLOCK_SIZE;x++,y+=a){for(var _=0;_<e.BLOCK_SIZE;_++){var I=r[y+_]&255;p+=I,I<m&&(m=I),I>v&&(v=I)}if(v-m>e.MIN_DYNAMIC_RANGE)for(x++,y+=a;x<e.BLOCK_SIZE;x++,y+=a)for(var _=0;_<e.BLOCK_SIZE;_++)p+=r[y+_]&255}var C=p>>e.BLOCK_SIZE_POWER*2;if(v-m<=e.MIN_DYNAMIC_RANGE&&(C=m/2,c>0&&d>0)){var j=(o[c-1][d]+2*o[c][d-1]+o[c-1][d-1])/4;m<j&&(C=j)}o[c][d]=C}}return o},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(F0),$l=A$;var S$=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,i){throw new La("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new La("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new La("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new de,n=0;n<this.height;n++){for(var i=this.getRow(n,e),a=0;a<this.width;a++){var u=i[a]&255,s=void 0;u<64?s="#":u<128?s="+":u<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),bo=S$;var D$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C$=function(t){D$(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var i=this.delegate.getRow(r,n),a=this.getWidth(),u=0;u<a;u++)i[u]=255-(i[u]&255);return i},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),i=new Uint8ClampedArray(n),a=0;a<n;a++)i[a]=255-(r[a]&255);return i},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,i,a){return new e(this.delegate.crop(r,n,i,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(bo),hi=C$;var O$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),u_=function(t){O$(e,t);function e(r,n){n===void 0&&(n=!1);var i=t.call(this,r.width,r.height)||this;return i.canvas=r,i.tempCanvasElement=null,i.buffer=e.makeBufferFromCanvasImageData(r,n),i}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var i=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,i,a){a===void 0&&(a=!1);var u=new Uint8ClampedArray(n*i);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,o=r.length;s<o;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],h=r[s+1],p=r[s+2];c=306*d+601*h+117*p+512>>10}u[l]=c}else for(var s=0,l=0,m=r.length;s<m;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],h=r[s+1],p=r[s+2];c=306*d+601*h+117*p+512>>10}u[l]=255-c}return u},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),i=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,u=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*s),o=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*s);return n.width=l,n.height=o,i.translate(l/2,o/2),i.rotate(a),i.drawImage(this.canvas,u/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new hi(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(bo);var l_=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}();var on=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function s(c){try{o(n.next(c))}catch(f){u(f)}}function l(c){try{o(n.throw(c))}catch(f){u(f)}}function o(c){c.done?a(c.value):i(c.value).then(s,l)}o((n=n.apply(t,e||[])).next())})},an=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(o){return function(c){return l([o,c])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(c){o=[6,c],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},P$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Un=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return on(this,void 0,void 0,function(){var e,r,n,i,a,u,s,l,o,c,f,d;return an(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=P$(e),i=n.next();!i.done;i=n.next())a=i.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),o=a.groupId,c={deviceId:s,label:l,kind:u,groupId:o},r.push(c))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return on(this,void 0,void 0,function(){var e;return an(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new l_(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return on(this,void 0,void 0,function(){var r;return an(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return on(this,void 0,void 0,function(){return an(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return on(this,void 0,void 0,function(){var n,i;return an(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return on(this,void 0,void 0,function(){var n;return an(this,function(i){switch(i.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return on(this,void 0,void 0,function(){var n,i;return an(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return i=a.sent(),[2,i]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return on(this,void 0,void 0,function(){return an(this,function(i){switch(i.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,i.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return on(this,void 0,void 0,function(){var i,a;return an(this,function(u){switch(u.label){case 0:return e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,u.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return on(this,void 0,void 0,function(){var i;return an(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return i=a.sent(),[4,this.decodeFromStream(i,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return on(this,void 0,void 0,function(){var i;return an(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return i=a.sent(),[4,this.decodeContinuously(i,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return on(this,void 0,void 0,function(){var n;return an(this,function(i){switch(i.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return i.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,i){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return on(this,void 0,void 0,function(){var r;return an(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Qt("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Qt("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Qt("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Qt("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Qt("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Qt("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Qt("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Qt("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Qt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Qt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),i=this.decodeFromVideoElementContinuously(n,r);return n.src=e,i},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,i){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,i)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return on(this,void 0,void 0,function(){return an(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return on(this,void 0,void 0,function(){return an(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var i=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(u,s){if(i._stopAsyncDecode){s(new L("Video stream has ended before any code could be detected.")),i._stopAsyncDecode=void 0;return}try{var l=i.decode(e);u(l)}catch(d){var o=r&&d instanceof L,c=d instanceof it||d instanceof K,f=c&&n;if(o||f)return setTimeout(a,i._timeBetweenDecodingAttempts,u,s);s(d)}};return new Promise(function(u,s){return a(u,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var i=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(i,n.timeBetweenScansMillis)}catch(l){r(null,l);var u=l instanceof it||l instanceof K,s=l instanceof L;(u||s)&&setTimeout(i,n._timeBetweenDecodingAttempts)}};i()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){var r=this.getCaptureCanvasContext(e),n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var i=this.getCaptureCanvas(e),a=new u_(i,n),u=new $l(a);return new Bl(u)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,i;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,i=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,i=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=i+"px",r.width=n,r.height=i,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}();var M$=function(){function t(e,r,n,i,a,u){n===void 0&&(n=r==null?0:8*r.length),u===void 0&&(u=Pe.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=i,this.format=a,this.timestamp=u,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=i,this.format=a,this.resultMetadata=null,u==null?this.timestamp=Pe.currentTimeMillis():this.timestamp=u}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Pe.arraycopy(r,0,n,0,r.length),Pe.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),nt=M$;var c_=function(t){return t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",t}(c_||{}),ae=c_;var f_=function(t){return t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",t}(f_||{}),jt=f_;var N$=function(){function t(e,r,n,i,a,u){a===void 0&&(a=-1),u===void 0&&(u=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=i,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),pi=N$;var R$=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),Ba=R$;var F$=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-i),Pe.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var i=0,a=r.length;i!==a;i++){var u=r[i];n=Ba.addOrSubtract(n,u)}return n}n=r[0];for(var s=r.length,l=this.field,i=1;i<s;i++)n=Ba.addOrSubtract(l.multiply(e,n),r[i]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),u=n.length-r.length;Pe.arraycopy(n,0,a,0,u);for(var s=u;s<n.length;s++)a[s]=Ba.addOrSubtract(r[s-u],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,u=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var o=r[l],c=0;c<a;c++)u[l+c]=Ba.addOrSubtract(u[l+c],s.multiply(o,i[c]));return new t(s,u)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,i=new Int32Array(r),a=this.coefficients,u=0;u<r;u++)i[u]=n.multiply(a[u],e);return new t(n,i)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return this.field.getZero();for(var n=this.coefficients,i=n.length,a=new Int32Array(i+e),u=this.field,s=0;s<i;s++)a[s]=u.multiply(n[s],r);return new t(u,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new re("Divide by 0");for(var r=this.field,n=r.getZero(),i=this,a=e.getCoefficient(e.getDegree()),u=r.inverse(a);i.getDegree()>=e.getDegree()&&!i.isZero();){var s=i.getDegree()-e.getDegree(),l=r.multiply(i.getCoefficient(i.getDegree()),u),o=e.multiplyByMonomial(s,l),c=r.buildMonomial(s,l);n=n.addOrSubtract(c),i=i.addOrSubtract(o)}return[n,i]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var i=this.field.log(n);i===0?e+="1":i===1?e+="a":(e+="a^",e+=i)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Hn=F$;var k$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L$=function(t){k$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Ot),Vl=L$;var B$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$$=function(t){B$(e,t);function e(r,n,i){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=i;for(var u=new Int32Array(n),s=1,l=0;l<n;l++)u[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=u;for(var o=new Int32Array(n),l=0;l<n-1;l++)o[u[l]]=l;return a.logTable=o,a.zero=new Hn(a,Int32Array.from([0])),a.one=new Hn(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new Hn(this,i)},e.prototype.inverse=function(r){if(r===0)throw new Vl;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ge.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(Ba),sr=$$;var V$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),j$=function(t){V$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Ot),Us=j$;var U$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),H$=function(t){U$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Ot),mr=H$;var z$=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,i=new Hn(n,e),a=new Int32Array(r),u=!0,s=0;s<r;s++){var l=i.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(u=!1)}if(!u)for(var o=new Hn(n,a),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),o,r),f=c[0],d=c[1],h=this.findErrorLocations(f),p=this.findErrorMagnitudes(d,h),s=0;s<h.length;s++){var m=e.length-1-n.log(h[s]);if(m<0)throw new Us("Bad error location");e[m]=sr.addOrSubtract(e[m],p[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=this.field,u=e,s=r,l=a.getZero(),o=a.getOne();s.getDegree()>=(n/2|0);){var c=u,f=l;if(u=s,l=o,u.isZero())throw new Us("r_{i-1} was zero");s=c;for(var d=a.getZero(),h=u.getCoefficient(u.getDegree()),p=a.inverse(h);s.getDegree()>=u.getDegree()&&!s.isZero();){var m=s.getDegree()-u.getDegree(),v=a.multiply(s.getCoefficient(s.getDegree()),p);d=d.addOrSubtract(a.buildMonomial(m,v)),s=s.addOrSubtract(u.multiplyByMonomial(m,v))}if(o=d.multiply(l).addOrSubtract(f),s.getDegree()>=u.getDegree())throw new mr("Division algorithm failed to reduce polynomial?")}var x=o.getCoefficient(0);if(x===0)throw new Us("sigmaTilde(0) was zero");var y=a.inverse(x),_=o.multiplyScalar(y),I=s.multiplyScalar(y);return[_,I]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),i=0,a=this.field,u=1;u<a.getSize()&&i<r;u++)e.evaluateAt(u)===0&&(n[i]=a.inverse(u),i++);if(i!==r)throw new Us("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,i=new Int32Array(n),a=this.field,u=0;u<n;u++){for(var s=a.inverse(r[u]),l=1,o=0;o<n;o++)if(u!==o){var c=a.multiply(r[o],s),f=c&1?c&-2:c|1;l=a.multiply(l,f)}i[u]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(i[u]=a.multiply(i[u],s))}return i},t}(),gi=z$;var Yr=function(t){return t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY",t}(Yr||{}),G$=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),i=this.correctBits(n),a=t.convertBoolArrayToByteArray(i),u=t.getEncodedData(i),s=new pi(a,u,null,null);return s.setNumBits(i.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Yr.UPPER,i=Yr.UPPER,a="",u=0;u<r;)if(i===Yr.BINARY){if(r-u<5)break;var s=t.readCode(e,u,5);if(u+=5,s===0){if(r-u<11)break;s=t.readCode(e,u,11)+31,u+=11}for(var l=0;l<s;l++){if(r-u<8){u=r;break}var o=t.readCode(e,u,8);a+=_e.castAsNonUtf8Char(o),u+=8}i=n}else{var c=i===Yr.DIGIT?4:5;if(r-u<c)break;var o=t.readCode(e,u,c);u+=c;var f=t.getCharacter(i,o);f.startsWith("CTRL_")?(n=i,i=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=i)):(a+=f,i=n)}return a},t.getTable=function(e){switch(e){case"L":return Yr.LOWER;case"P":return Yr.PUNCT;case"M":return Yr.MIXED;case"D":return Yr.DIGIT;case"B":return Yr.BINARY;case"U":default:return Yr.UPPER}},t.getCharacter=function(e,r){switch(e){case Yr.UPPER:return t.UPPER_TABLE[r];case Yr.LOWER:return t.LOWER_TABLE[r];case Yr.MIXED:return t.MIXED_TABLE[r];case Yr.PUNCT:return t.PUNCT_TABLE[r];case Yr.DIGIT:return t.DIGIT_TABLE[r];default:throw new mr("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=sr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=sr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=sr.AZTEC_DATA_10):(n=12,r=sr.AZTEC_DATA_12);var i=this.ddata.getNbDatablocks(),a=e.length/n;if(a<i)throw new K;for(var u=e.length%n,s=new Int32Array(a),l=0;l<a;l++,u+=n)s[l]=t.readCode(e,u,n);try{var o=new gi(r);o.decode(s,a-i)}catch(v){throw new K(v)}for(var c=(1<<n)-1,f=0,l=0;l<i;l++){var d=s[l];if(d===0||d===c)throw new K;(d===1||d===c-1)&&f++}for(var h=new Array(i*n-f),p=0,l=0;l<i;l++){var d=s[l];if(d===1||d===c-1)h.fill(d>1,p,p+n-1),p+=n-1;else for(var m=n-1;m>=0;--m)h[p++]=(d&1<<m)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),i=(r?11:14)+n*4,a=new Int32Array(i),u=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=i+1+2*ge.truncDivision(ge.truncDivision(i,2)-1,15),o=i/2,c=ge.truncDivision(l,2),s=0;s<o;s++){var f=s+ge.truncDivision(s,15);a[o-s-1]=c-f-1,a[o+s]=c+f+1}for(var s=0,d=0;s<n;s++){for(var h=(n-s)*4+(r?9:12),p=s*2,m=i-1-p,v=0;v<h;v++)for(var x=v*2,y=0;y<2;y++)u[d+x+y]=e.get(a[p+y],a[p+v]),u[d+2*h+x+y]=e.get(a[p+v],a[m-y]),u[d+4*h+x+y]=e.get(a[m-y],a[m-v]),u[d+6*h+x+y]=e.get(a[m-v],a[p+y]);d+=h*8}return u},t.readCode=function(e,r,n){for(var i=0,a=r;a<r+n;a++)i<<=1,e[a]&&(i|=1);return i},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),kd=G$;var W$=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,i){var a=e-n,u=r-i;return Math.sqrt(a*a+u*u)},t.sum=function(e){for(var r=0,n=0,i=e.length;n!==i;n++){var a=e[n];r+=a}return r},t}(),Ne=W$;var q$=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),jl=q$;var X$=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*jl.floatToIntBits(this.x)+jl.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),i=this.distance(e[0],e[2]),a,u,s;if(n>=r&&n>=i?(u=e[0],a=e[1],s=e[2]):i>=n&&i>=r?(u=e[1],a=e[0],s=e[2]):(u=e[2],a=e[0],s=e[1]),this.crossProductZ(a,u,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=u,e[2]=s},t.distance=function(e,r){return Ne.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var i=r.x,a=r.y;return(n.x-i)*(e.y-a)-(n.y-a)*(e.x-i)},t}(),se=X$;var Y$=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),$a=Y$;var Z$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K$=function(t){Z$(e,t);function e(r,n,i,a,u){var s=t.call(this,r,n)||this;return s.compact=i,s.nbDatablocks=a,s.nbLayers=u,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}($a),k0=K$;var Q$=function(){function t(e,r,n,i){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),i==null&&(i=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=i-a,this.downInit=i+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new L}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,i=this.downInit,a=!1,u=!0,s=!1,l=!1,o=!1,c=!1,f=!1,d=this.width,h=this.height;u;){u=!1;for(var p=!0;(p||!l)&&r<d;)p=this.containsBlackPoint(n,i,r,!1),p?(r++,u=!0,l=!0):l||r++;if(r>=d){a=!0;break}for(var m=!0;(m||!o)&&i<h;)m=this.containsBlackPoint(e,r,i,!0),m?(i++,u=!0,o=!0):o||i++;if(i>=h){a=!0;break}for(var v=!0;(v||!c)&&e>=0;)v=this.containsBlackPoint(n,i,e,!1),v?(e--,u=!0,c=!0):c||e--;if(e<0){a=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,u=!0,f=!0):f||n--;if(n<0){a=!0;break}u&&(s=!0)}if(!a&&s){for(var y=r-e,_=null,I=1;_===null&&I<y;I++)_=this.getBlackPointOnSegment(e,i-I,e+I,i);if(_==null)throw new L;for(var C=null,I=1;C===null&&I<y;I++)C=this.getBlackPointOnSegment(e,n+I,e+I,n);if(C==null)throw new L;for(var j=null,I=1;j===null&&I<y;I++)j=this.getBlackPointOnSegment(r,n+I,r-I,n);if(j==null)throw new L;for(var z=null,I=1;z===null&&I<y;I++)z=this.getBlackPointOnSegment(r,i-I,r-I,i);if(z==null)throw new L;return this.centerEdges(z,_,j,C)}else throw new L},t.prototype.getBlackPointOnSegment=function(e,r,n,i){for(var a=Ne.round(Ne.distance(e,r,n,i)),u=(n-e)/a,s=(i-r)/a,l=this.image,o=0;o<a;o++){var c=Ne.round(e+o*u),f=Ne.round(r+o*s);if(l.get(c,f))return new se(c,f)}return null},t.prototype.centerEdges=function(e,r,n,i){var a=e.getX(),u=e.getY(),s=r.getX(),l=r.getY(),o=n.getX(),c=n.getY(),f=i.getX(),d=i.getY(),h=t.CORR;return a<this.width/2?[new se(f-h,d+h),new se(s+h,l+h),new se(o-h,c-h),new se(a+h,u-h)]:[new se(f+h,d+h),new se(s+h,l-h),new se(o-h,c+h),new se(a-h,u-h)]},t.prototype.containsBlackPoint=function(e,r,n,i){var a=this.image;if(i){for(var u=e;u<=r;u++)if(a.get(u,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),Hs=Q$;var J$=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),i=e.getHeight(),a=!0,u=0;u<r.length&&a;u+=2){var s=Math.floor(r[u]),l=Math.floor(r[u+1]);if(s<-1||s>n||l<-1||l>i)throw new L;a=!1,s===-1?(r[u]=0,a=!0):s===n&&(r[u]=n-1,a=!0),l===-1?(r[u+1]=0,a=!0):l===i&&(r[u+1]=i-1,a=!0)}a=!0;for(var u=r.length-2;u>=0&&a;u-=2){var s=Math.floor(r[u]),l=Math.floor(r[u+1]);if(s<-1||s>n||l<-1||l>i)throw new L;a=!1,s===-1?(r[u]=0,a=!0):s===n&&(r[u]=n-1,a=!0),l===-1?(r[u+1]=0,a=!0):l===i&&(r[u+1]=i-1,a=!0)}},t}(),Ld=J$;var e7=function(){function t(e,r,n,i,a,u,s,l,o){this.a11=e,this.a21=r,this.a31=n,this.a12=i,this.a22=a,this.a32=u,this.a13=s,this.a23=l,this.a33=o}return t.quadrilateralToQuadrilateral=function(e,r,n,i,a,u,s,l,o,c,f,d,h,p,m,v){var x=t.quadrilateralToSquare(e,r,n,i,a,u,s,l),y=t.squareToQuadrilateral(o,c,f,d,h,p,m,v);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,i=this.a12,a=this.a13,u=this.a21,s=this.a22,l=this.a23,o=this.a31,c=this.a32,f=this.a33,d=0;d<r;d+=2){var h=e[d],p=e[d+1],m=a*h+l*p+f;e[d]=(n*h+u*p+o)/m,e[d+1]=(i*h+s*p+c)/m}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,i=this.a12,a=this.a13,u=this.a21,s=this.a22,l=this.a23,o=this.a31,c=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var p=e[h],m=r[h],v=a*p+l*m+f;e[h]=(n*p+u*m+o)/v,r[h]=(i*p+s*m+c)/v}},t.squareToQuadrilateral=function(e,r,n,i,a,u,s,l){var o=e-n+a-s,c=r-i+u-l;if(o===0&&c===0)return new t(n-e,a-n,e,i-r,u-i,r,0,0,1);var f=n-a,d=s-a,h=i-u,p=l-u,m=f*p-d*h,v=(o*p-d*c)/m,x=(f*c-o*h)/m;return new t(n-e+v*n,s-e+x*s,e,i-r+v*i,l-r+x*l,r,v,x,1)},t.quadrilateralToSquare=function(e,r,n,i,a,u,s,l){return t.squareToQuadrilateral(e,r,n,i,a,u,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),Ul=e7;var t7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),r7=function(t){t7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,i,a,u,s,l,o,c,f,d,h,p,m,v,x,y,_,I){var C=Ul.quadrilateralToQuadrilateral(a,u,s,l,o,c,f,d,h,p,m,v,x,y,_,I);return this.sampleGridWithTransform(r,n,i,C)},e.prototype.sampleGridWithTransform=function(r,n,i,a){if(n<=0||i<=0)throw new L;for(var u=new Bt(n,i),s=new Float32Array(2*n),l=0;l<i;l++){for(var o=s.length,c=l+.5,f=0;f<o;f+=2)s[f]=f/2+.5,s[f+1]=c;a.transformPoints(s),Ld.checkAndNudgePoints(r,s);try{for(var f=0;f<o;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&u.set(f/2,l)}catch{throw new L}}return u},e}(Ld),L0=r7;var n7=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new L0,t}(),Va=n7;var sn=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new se(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}();var o7=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var i=n[0];n[0]=n[2],n[2]=i}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),u=this.getMatrixCornerPoints(n);return new k0(a,u,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new L;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var i=0,a=0;a<4;a++){var u=n[(this.shift+a)%4];this.compact?(i<<=7,i+=u>>1&127):(i<<=10,i+=(u>>2&992)+(u>>1&31))}var s=this.getCorrectedParameterData(i,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,u,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var i=0;i<4;i++)if(ge.bitCount(n^this.EXPECTED_CORNER_BITS[i])<=2)return i;throw new L},t.prototype.getCorrectedParameterData=function(e,r){var n,i;r?(n=7,i=2):(n=10,i=4);for(var a=n-i,u=new Int32Array(n),s=n-1;s>=0;--s)u[s]=e&15,e>>=4;try{var l=new gi(sr.AZTEC_PARAM);l.decode(u,a)}catch{throw new L}for(var o=0,s=0;s<i;s++)o=(o<<4)+u[s];return o},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,i=e,a=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,u,1,-1),l=this.getFirstDifferent(n,u,1,1),o=this.getFirstDifferent(i,u,-1,1),c=this.getFirstDifferent(a,u,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,o,c))break}r=s,n=l,i=o,a=c,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new L;this.compact=this.nbCenterLayers===5;var d=new se(r.getX()+.5,r.getY()-.5),h=new se(n.getX()+.5,n.getY()+.5),p=new se(i.getX()-.5,i.getY()+.5),m=new se(a.getX()-.5,a.getY()-.5);return this.expandSquare([d,h,p,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,i;try{var a=new Hs(this.image).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{var u=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new sn(u+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new sn(u+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new sn(u-7,s+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new sn(u-7,s-7),!1,-1,-1).toResultPoint()}var l=Ne.round((e.getX()+i.getX()+r.getX()+n.getX())/4),o=Ne.round((e.getY()+i.getY()+r.getY()+n.getY())/4);try{var a=new Hs(this.image,15,l,o).detect();e=a[0],r=a[1],n=a[2],i=a[3]}catch{e=this.getFirstDifferent(new sn(l+7,o-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new sn(l+7,o+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new sn(l-7,o+7),!1,-1,1).toResultPoint(),i=this.getFirstDifferent(new sn(l-7,o-7),!1,-1,-1).toResultPoint()}return l=Ne.round((e.getX()+i.getX()+r.getX()+n.getX())/4),o=Ne.round((e.getY()+i.getY()+r.getY()+n.getY())/4),new sn(l,o)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,i,a){var u=Va.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,o=s/2+this.nbCenterLayers;return u.sampleGrid(e,s,s,l,l,o,l,o,o,l,o,r.getX(),r.getY(),n.getX(),n.getY(),i.getX(),i.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var i=0,a=this.distanceResultPoint(e,r),u=a/n,s=e.getX(),l=e.getY(),o=u*(r.getX()-e.getX())/a,c=u*(r.getY()-e.getY())/a,f=0;f<n;f++)this.image.get(Ne.round(s+f*o),Ne.round(l+f*c))&&(i|=1<<n-f-1);return i},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,i){var a=3;e=new sn(e.getX()-a,e.getY()+a),r=new sn(r.getX()-a,r.getY()-a),n=new sn(n.getX()+a,n.getY()-a),i=new sn(i.getX()+a,i.getY()+a);var u=this.getColor(i,e);if(u===0)return!1;var s=this.getColor(e,r);return s!==u||(s=this.getColor(r,n),s!==u)?!1:(s=this.getColor(n,i),s===u)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),i=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,u=0,s=e.getX(),l=e.getY(),o=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),f=0;f<c;f++)s+=i,l+=a,this.image.get(Ne.round(s),Ne.round(l))!==o&&u++;var d=u/n;return d>.1&&d<.9?0:d<=.1===o?1:-1},t.prototype.getFirstDifferent=function(e,r,n,i){for(var a=e.getX()+n,u=e.getY()+i;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=n,u+=i;for(a-=n,u-=i;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=n;for(a-=n;this.isValid(a,u)&&this.image.get(a,u)===r;)u+=i;return u-=i,new sn(a,u)},t.prototype.expandSquare=function(e,r,n){var i=n/(2*r),a=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,o=new se(s+i*a,l+i*u),c=new se(s-i*a,l-i*u);a=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new se(s+i*a,l+i*u),d=new se(s-i*a,l-i*u),h=[o,f,c,d];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Ne.round(e.getX()),n=Ne.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Ne.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Ne.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ge.truncDivision(this.nbLayers-4,8)+1)+15},t}(),B0=o7;var i7=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,i=new B0(e.getBlackMatrix()),a=null,u=null;try{var s=i.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),u=new kd().decode(s)}catch(f){n=f}if(u==null)try{var s=i.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),u=new kd().decode(s)}catch(f){throw n??f}var l=new nt(u.getText(),u.getRawBytes(),u.getNumBits(),a,ae.AZTEC,Pe.currentTimeMillis()),o=u.getByteSegments();o!=null&&l.putMetadata(jt.BYTE_SEGMENTS,o);var c=u.getECLevel();return c!=null&&l.putMetadata(jt.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Me.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(i,a,u){n.foundPossibleResultPoint(i)})}},t.prototype.reset=function(){},t}(),ki=i7;var a7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Fre=function(t){a7(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ki,r)||this}return e}(Un);var s7=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Me.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var i=e.rotateCounterClockwise(),a=this.doDecode(i,r),u=a.getResultMetadata(),s=270;u!==null&&u.get(jt.ORIENTATION)===!0&&(s=s+u.get(jt.ORIENTATION)%360),a.putMetadata(jt.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var o=i.getHeight(),c=0;c<l.length;c++)l[c]=new se(o-l[c].getY()-1,l[c].getX());return a}else throw new L}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),i=e.getHeight(),a=new kt(n),u=r&&r.get(Me.TRY_HARDER)===!0,s=Math.max(1,i>>(u?8:5)),l;u?l=i:l=15;for(var o=Math.trunc(i/2),c=0;c<l;c++){var f=Math.trunc((c+1)/2),d=(c&1)===0,h=o+s*(d?f:-f);if(h<0||h>=i)break;try{a=e.getBlackRow(h,a)}catch{continue}for(var p=function(y){if(y===1&&(a.reverse(),r&&r.get(Me.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;r.forEach(function(j,z){return _.set(z,j)}),_.delete(Me.NEED_RESULT_POINT_CALLBACK),r=_}try{var I=m.decodeRow(h,a,r);if(y===1){I.putMetadata(jt.ORIENTATION,180);var C=I.getResultPoints();C!==null&&(C[0]=new se(n-C[0].getX()-1,C[0].getY()),C[1]=new se(n-C[1].getX()-1,C[1].getY()))}return{value:I}}catch{}},m=this,v=0;v<2;v++){var x=p(v);if(typeof x=="object")return x.value}}throw new L},t.recordPattern=function(e,r,n){for(var i=n.length,a=0;a<i;a++)n[a]=0;var u=e.getSize();if(r>=u)throw new L;for(var s=!e.get(r),l=0,o=r;o<u;){if(e.get(o)!==s)n[l]++;else{if(++l===i)break;n[l]=1,s=!s}o++}if(!(l===i||l===i-1&&o===u))throw new L},t.recordPatternInReverse=function(e,r,n){for(var i=n.length,a=e.get(r);r>0&&i>=0;)e.get(--r)!==a&&(i--,a=!a);if(i>=0)throw new L;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,u=0,s=0;s<i;s++)a+=e[s],u+=r[s];if(a<u)return Number.POSITIVE_INFINITY;var l=a/u;n*=l;for(var o=0,c=0;c<i;c++){var f=e[c],d=r[c]*l,h=f>d?f-d:d-f;if(h>n)return Number.POSITIVE_INFINITY;o+=h}return o/a},t}(),xt=s7;var u7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),l7=function(t){u7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),i=r.getNextSet(0),a=0,u=Int32Array.from([0,0,0,0,0,0]),s=i,l=!1,o=6,c=i;c<n;c++)if(r.get(c)!==l)u[a]++;else{if(a===o-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var p=xt.patternMatchVariance(u,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,d=h)}if(d>=0&&r.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,d]);s+=u[0]+u[1],u=u.slice(2,u.length),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,l=!l}throw new L},e.decodeCode=function(r,n,i){xt.recordPattern(r,i,n);for(var a=e.MAX_AVG_VARIANCE,u=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],o=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);o<a&&(a=o,u=s)}if(u>=0)return u;throw new L},e.prototype.decodeRow=function(r,n,i){var a=i&&i.get(Me.ASSUME_GS1)===!0,u=e.findStartPattern(n),s=u[2],l=0,o=new Uint8Array(20);o[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new K}for(var f=!1,d=!1,h="",p=u[0],m=u[1],v=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,_=s,I=0,C=!0,j=!1,z=!1;!f;){var W=d;switch(d=!1,x=y,y=e.decodeCode(n,v,m),o[l++]=y,y!==e.CODE_STOP&&(C=!0),y!==e.CODE_STOP&&(I++,_+=I*y),p=m,m+=v.reduce(function(qe,Ue){return qe+Ue},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new K}switch(c){case e.CODE_CODE_A:if(y<64)z===j?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),z=!1;else if(y<96)z===j?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),z=!1;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!j&&z?(j=!0,z=!1):j&&z?(j=!1,z=!1):z=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)z===j?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),z=!1;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!j&&z?(j=!0,z=!1):j&&z?(j=!1,z=!1):z=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}W&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=m-p;if(m=n.getNextUnset(m),!n.isRange(m,Math.min(n.getSize(),m+(m-p)/2),!1))throw new L;if(_-=I*x,_%103!==x)throw new it;var X=h.length;if(X===0)throw new L;X>0&&C&&(c===e.CODE_CODE_C?h=h.substring(0,X-2):h=h.substring(0,X-1));for(var ke=(u[1]+u[0])/2,me=p+k/2,ye=o.length,Z=new Uint8Array(ye),he=0;he<ye;he++)Z[he]=o[he];var yt=[new se(ke,r),new se(me,r)];return new nt(h,Z,0,yt,ae.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(xt),Bd=l7;var c7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},f7=function(t){c7(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var i=t.call(this)||this;return i.usingCheckDigit=r,i.extendedMode=n,i.decodeRowResult="",i.counters=new Int32Array(9),i}return e.prototype.decodeRow=function(r,n,i){var a,u,s,l,o=this.counters;o.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,o),f=n.getNextSet(c[1]),d=n.getSize(),h,p;do{e.recordPattern(n,f,o);var m=e.toNarrowWidePattern(o);if(m<0)throw new L;h=e.patternToChar(m),this.decodeRowResult+=h,p=f;try{for(var v=(a=void 0,$0(o)),x=v.next();!x.done;x=v.next()){var y=x.value;f+=y}}catch(ye){a={error:ye}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var I=$0(o),C=I.next();!C.done;C=I.next()){var y=C.value;_+=y}}catch(ye){s={error:ye}}finally{try{C&&!C.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}var j=f-p-_;if(f!==d&&j*2<_)throw new L;if(this.usingCheckDigit){for(var z=this.decodeRowResult.length-1,W=0,k=0;k<z;k++)W+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(z)!==e.ALPHABET_STRING.charAt(W%43))throw new it;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new L;var X;this.extendedMode?X=e.decodeExtended(this.decodeRowResult):X=this.decodeRowResult;var ke=(c[1]+c[0])/2,me=p+_/2;return new nt(X,null,0,[new se(ke,r),new se(me,r)],ae.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var i=r.getSize(),a=r.getNextSet(0),u=0,s=a,l=!1,o=n.length,c=a;c<i;c++)if(r.get(c)!==l)n[u]++;else{if(u===o-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,l=!l}throw new L},e.toNarrowWidePattern=function(r){var n,i,a=r.length,u=0,s;do{var l=2147483647;try{for(var o=(n=void 0,$0(r)),c=o.next();!c.done;c=o.next()){var f=c.value;f<l&&f>u&&(l=f)}}catch(m){n={error:m}}finally{try{c&&!c.done&&(i=o.return)&&i.call(o)}finally{if(n)throw n.error}}u=l,s=0;for(var d=0,h=0,p=0;p<a;p++){var f=r[p];f>u&&(h|=1<<a-1-p,s++,d+=f)}if(s===3){for(var p=0;p<a&&s>0;p++){var f=r[p];if(f>u&&(s--,f*2>=d))return-1}return h}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new L},e.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var u=r.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){var s=r.charAt(a+1),l="\0";switch(u){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new K;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new K;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="\x7F";else throw new K;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new K;break}i+=l,a++}else i+=u}return i},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(xt),$d=f7;var d7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h7=function(t){d7(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,i){var a,u,s,l,o=this.findAsteriskPattern(n),c=n.getNextSet(o[1]),f=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,p;do{e.recordPattern(n,c,d);var m=this.toPattern(d);if(m<0)throw new L;h=this.patternToChar(m),this.decodeRowResult+=h,p=c;try{for(var v=(a=void 0,V0(d)),x=v.next();!x.done;x=v.next()){var y=x.value;c+=y}}catch(k){a={error:k}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}c=n.getNextSet(c)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var I=V0(d),C=I.next();!C.done;C=I.next()){var y=C.value;_+=y}}catch(k){s={error:k}}finally{try{C&&!C.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}if(c===f||!n.get(c))throw new L;if(this.decodeRowResult.length<2)throw new L;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var j=this.decodeExtended(this.decodeRowResult),z=(o[1]+o[0])/2,W=p+_/2;return new nt(j,null,0,[new se(z,r),new se(W,r)],ae.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),i=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,u=i,s=!1,l=a.length,o=0,c=i;c<n;c++)if(r.get(c)!==s)a[o]++;else{if(o===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([u,c]);u+=a[0]+a[1],a.copyWithin(0,2,2+o-1),a[o-1]=0,a[o]=0,o--}else o++;a[o]=1,s=!s}throw new L},e.prototype.toPattern=function(r){var n,i,a=0;try{for(var u=V0(r),s=u.next();!s.done;s=u.next()){var l=s.value;a+=l}}catch(p){n={error:p}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}for(var o=0,c=r.length,f=0;f<c;f++){var d=Math.round(r[f]*9/a);if(d<1||d>4)return-1;if(f&1)o<<=d;else for(var h=0;h<d;h++)o=o<<1|1}return o},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new L},e.prototype.decodeExtended=function(r){for(var n=r.length,i="",a=0;a<n;a++){var u=r.charAt(a);if(u>="a"&&u<="d"){if(a>=n-1)throw new K;var s=r.charAt(a+1),l="\0";switch(u){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new K;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new K;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="\x7F";else throw new K;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new K;break}i+=l,a++}else i+=u}return i},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,i){for(var a=1,u=0,s=n-1;s>=0;s--)u+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>i&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[u%47])throw new it},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(xt),Vd=h7;var p7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m7=function(t){p7(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,i){var a,u,s=this.decodeStart(n),l=this.decodeEnd(n),o=new de;e.decodeMiddle(n,s[1],l[0],o);var c=o.toString(),f=null;i!=null&&(f=i.get(Me.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,h=!1,p=0;try{for(var m=g7(f),v=m.next();!v.done;v=m.next()){var x=v.value;if(d===x){h=!0;break}x>p&&(p=x)}}catch(I){a={error:I}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}if(!h&&d>p&&(h=!0),!h)throw new K;var y=[new se(s[1],r),new se(l[0],r)],_=new nt(c,null,0,y,ae.ITF,new Date().getTime());return _},e.decodeMiddle=function(r,n,i,a){var u=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(u.fill(0),s.fill(0),l.fill(0);n<i;){xt.recordPattern(r,n,u);for(var o=0;o<5;o++){var c=2*o;s[o]=u[c],l[o]=u[c+1]}var f=e.decodeDigit(s);a.append(f.toString()),f=this.decodeDigit(l),a.append(f.toString()),u.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),i=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(i[1]-i[0])/4,this.validateQuietZone(r,i[0]),i},e.prototype.validateQuietZone=function(r,n){var i=this.narrowLineWidth*10;i=i<n?i:n;for(var a=n-1;i>0&&a>=0&&!r.get(a);a--)i--;if(i!==0)throw new L},e.skipWhiteSpace=function(r){var n=r.getSize(),i=r.getNextSet(0);if(i===n)throw new L;return i},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),i=void 0;try{i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(u){u instanceof L&&(i=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,i[0]);var a=i[0];return i[0]=r.getSize()-i[1],i[1]=r.getSize()-a,i}finally{r.reverse()}},e.findGuardPattern=function(r,n,i){var a=i.length,u=new Int32Array(a),s=r.getSize(),l=!1,o=0,c=n;u.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)u[o]++;else{if(o===a-1){if(xt.patternMatchVariance(u,i,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,f];c+=u[0]+u[1],Pe.arraycopy(u,2,u,0,o-1),u[o-1]=0,u[o]=0,o--}else o++;u[o]=1,l=!l}throw new L},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,i=-1,a=e.PATTERNS.length,u=0;u<a;u++){var s=e.PATTERNS[u],l=xt.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,i=u):l===n&&(i=-1)}if(i>=0)return i%10;throw new L},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(xt),jd=m7;var y7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),v7=function(t){y7(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,i,a=0,u=Int32Array.from([0,0,0]);!n;){u=Int32Array.from([0,0,0]),i=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,u);var s=i[0];a=i[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return i},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;i+=u}i*=3;for(var a=n-2;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;i+=u}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,i,a){return this.findGuardPattern(r,n,i,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,i,a,u){var s=r.getSize();n=i?r.getNextUnset(n):r.getNextSet(n);for(var l=0,o=n,c=a.length,f=i,d=n;d<s;d++)if(r.get(d)!==f)u[l]++;else{if(l===c-1){if(xt.patternMatchVariance(u,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([o,d]);o+=u[0]+u[1];for(var h=u.slice(2,u.length),p=0;p<l-1;p++)u[p]=h[p];u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,f=!f}throw new L},e.decodeDigit=function(r,n,i,a){this.recordPattern(r,i,n);for(var u=this.MAX_AVG_VARIANCE,s=-1,l=a.length,o=0;o<l;o++){var c=a[o],f=xt.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<u&&(u=f,s=o)}if(s>=0)return s;throw new L},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(xt),Vo=v7;var b7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w7=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),u=i.toString(),s=t.parseExtensionString(u),l=[new se((n[0]+n[1])/2,e),new se(a,e)],o=new nt(u,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&o.putAllMetadata(s),o},t.prototype.decodeMiddle=function(e,r,n){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var s=e.getSize(),l=r[1],o=0,c=0;c<5&&l<s;c++){var f=Vo.decodeDigit(e,u,l,Vo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,b7(u)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}f>=10&&(o|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new L;var m=this.determineCheckDigit(o);if(t.extensionChecksum(n.toString())!==m)throw new L;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,i=r-2;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;n*=3;for(var i=r-1;i>=0;i-=2)n+=e.charAt(i).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new L},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[jt.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="\xA3";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),i=(n/100).toString(),a=n%100,u=a<10?"0"+a:a.toString();return r+i+"."+u},t}(),d_=w7;var x7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_7=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var i=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,i),u=i.toString(),s=t.parseExtensionString(u),l=[new se((n[0]+n[1])/2,e),new se(a,e)],o=new nt(u,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&o.putAllMetadata(s),o},t.prototype.decodeMiddle=function(e,r,n){var i,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var s=e.getSize(),l=r[1],o=0,c=0;c<2&&l<s;c++){var f=Vo.decodeDigit(e,u,l,Vo.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(i=void 0,x7(u)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(m){i={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}f>=10&&(o|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new L;if(parseInt(n.toString())%4!==o)throw new L;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[jt.ISSUE_NUMBER,parseInt(e)]])},t}(),h_=_7;var E7=function(){function t(){}return t.decodeRow=function(e,r,n){var i=Vo.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new d_;return a.decodeRow(e,r,i)}catch{var u=new h_;return u.decodeRow(e,r,i)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),p_=E7;var T7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I7=function(t){T7(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var i=e.L_PATTERNS[n-10],a=new Int32Array(i.length),u=0;u<i.length;u++)a[u]=i[i.length-u-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,i){var a=e.findStartGuardPattern(n),u=i==null?null:i.get(Me.NEED_RESULT_POINT_CALLBACK);if(u!=null){var s=new se((a[0]+a[1])/2,r);u.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),o=l.rowOffset,c=l.resultString;if(u!=null){var f=new se(o,r);u.foundPossibleResultPoint(f)}var d=e.decodeEnd(n,o);if(u!=null){var h=new se((d[0]+d[1])/2,r);u.foundPossibleResultPoint(h)}var p=d[1],m=p+(p-d[0]);if(m>=n.getSize()||!n.isRange(p,m,!1))throw new L;var v=c.toString();if(v.length<8)throw new K;if(!e.checkChecksum(v))throw new it;var x=(a[1]+a[0])/2,y=(d[1]+d[0])/2,_=this.getBarcodeFormat(),I=[new se(x,r),new se(y,r)],C=new nt(v,null,0,I,_,new Date().getTime()),j=0;try{var z=p_.decodeRow(r,n,d[1]);C.putMetadata(jt.UPC_EAN_EXTENSION,z.getText()),C.putAllMetadata(z.getResultMetadata()),C.addResultPoints(z.getResultPoints()),j=z.getText().length}catch{}var W=i==null?null:i.get(Me.ALLOWED_EAN_EXTENSIONS);if(W!=null){var k=!1;for(var X in W)if(j.toString()===X){k=!0;break}if(!k)throw new L}return _===ae.EAN_13||ae.UPC_A,C},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var i=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===i},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,i=0,a=n-1;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;i+=u}i*=3;for(var a=n-2;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;i+=u}return(1e3-i)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Vo),tr=I7;var A7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),g_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S7=function(t){A7(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,u,s,l,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=r.getSize(),f=n[1],d=0,h=0;h<6&&f<c;h++){var p=tr.decodeDigit(r,o,f,tr.L_AND_G_PATTERNS);i+=String.fromCharCode(48+p%10);try{for(var m=(a=void 0,g_(o)),v=m.next();!v.done;v=m.next()){var x=v.value;f+=x}}catch(C){a={error:C}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}p>=10&&(d|=1<<5-h)}i=e.determineFirstDigit(i,d);var y=tr.findGuardPattern(r,f,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<c;h++){var p=tr.decodeDigit(r,o,f,tr.L_PATTERNS);i+=String.fromCharCode(48+p);try{for(var _=(s=void 0,g_(o)),I=_.next();!I.done;I=_.next()){var x=I.value;f+=x}}catch(z){s={error:z}}finally{try{I&&!I.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ae.EAN_13},e.determineFirstDigit=function(r,n){for(var i=0;i<10;i++)if(n===this.FIRST_DIGIT_ENCODINGS[i])return r=String.fromCharCode(48+i)+r,r;throw new L},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(tr),zs=S7;var D7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),m_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C7=function(t){D7(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,i){var a,u,s,l,o=this.decodeMiddleCounters;o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var c=r.getSize(),f=n[1],d=0;d<4&&f<c;d++){var h=tr.decodeDigit(r,o,f,tr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var p=(a=void 0,m_(o)),m=p.next();!m.done;m=p.next()){var v=m.value;f+=v}}catch(I){a={error:I}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}}var x=tr.findGuardPattern(r,f,!0,tr.MIDDLE_PATTERN,new Int32Array(tr.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var d=0;d<4&&f<c;d++){var h=tr.decodeDigit(r,o,f,tr.L_PATTERNS);i+=String.fromCharCode(48+h);try{for(var y=(s=void 0,m_(o)),_=y.next();!_.done;_=y.next()){var v=_.value;f+=v}}catch(j){s={error:j}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:i}},e.prototype.getBarcodeFormat=function(){return ae.EAN_8},e}(tr),j0=C7;var O7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),P7=function(t){O7(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new zs,r}return e.prototype.getBarcodeFormat=function(){return ae.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,i){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,i))},e.prototype.decodeMiddle=function(r,n,i){return this.ean13Reader.decodeMiddle(r,n,i)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var i=new nt(n.substring(1),null,null,r.getResultPoints(),ae.UPC_A);return r.getResultMetadata()!=null&&i.putAllMetadata(r.getResultMetadata()),i}else throw new L},e.prototype.reset=function(){this.ean13Reader.reset()},e}(tr),U0=P7;var M7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),N7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R7=function(t){M7(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,i){var a,u,s=this.decodeMiddleCounters.map(function(v){return v});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),o=n[1],c=0,f=0;f<6&&o<l;f++){var d=e.decodeDigit(r,s,o,e.L_AND_G_PATTERNS);i+=String.fromCharCode(48+d%10);try{for(var h=(a=void 0,N7(s)),p=h.next();!p.done;p=h.next()){var m=p.value;o+=m}}catch(v){a={error:v}}finally{try{p&&!p.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}d>=10&&(c|=1<<5-f)}return e.determineNumSysAndCheckDigit(new de(i),c),o},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return tr.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var i=0;i<=1;i++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[i][a]){r.insert(0,"0"+i),r.append("0"+a);return}throw L.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ae.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(u){return u.charCodeAt(0)}),i=new de;i.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:i.appendChars(n,0,2),i.append(a),i.append("0000"),i.appendChars(n,2,3);break;case 3:i.appendChars(n,0,3),i.append("00000"),i.appendChars(n,3,2);break;case 4:i.appendChars(n,0,4),i.append("00000"),i.append(n[4]);break;default:i.appendChars(n,0,5),i.append("0000"),i.append(a);break}return r.length>=8&&i.append(r.charAt(7)),i.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(tr),H0=R7;var F7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},k7=function(t){F7(e,t);function e(r){var n=t.call(this)||this,i=r==null?null:r.get(Me.POSSIBLE_FORMATS),a=[];return i!=null&&(i.indexOf(ae.EAN_13)>-1&&a.push(new zs),i.indexOf(ae.UPC_A)>-1&&a.push(new U0),i.indexOf(ae.EAN_8)>-1&&a.push(new j0),i.indexOf(ae.UPC_E)>-1&&a.push(new H0)),a.length===0&&(a.push(new zs),a.push(new U0),a.push(new j0),a.push(new H0)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,i){var a,u;try{for(var s=y_(this.readers),l=s.next();!l.done;l=s.next()){var o=l.value;try{var c=o.decodeRow(r,n,i),f=c.getBarcodeFormat()===ae.EAN_13&&c.getText().charAt(0)==="0",d=i==null?null:i.get(Me.POSSIBLE_FORMATS),h=d==null||d.includes(ae.UPC_A);if(f&&h){var p=c.getRawBytes(),m=new nt(c.getText().substring(1),p,p?p.length:null,c.getResultPoints(),ae.UPC_A);return m.putAllMetadata(c.getResultMetadata()),m}return c}catch{}}}catch(v){a={error:v}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}throw new L},e.prototype.reset=function(){var r,n;try{for(var i=y_(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;u.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e}(xt),Ud=k7;var L7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B7=function(t){L7(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,i){var a=this.getValidRowData(n);if(!a)throw new L;var u=this.codaBarDecodeRow(a.row);if(!u)throw new L;return new nt(u,null,0,[new se(a.left,r),new se(a.right,r)],ae.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),i=n.indexOf(!0);if(i===-1)return null;var a=n.lastIndexOf(!0);if(a<=i)return null;n=n.slice(i,a+1);for(var u=[],s=n[0],l=1,o=1;o<n.length;o++)n[o]===s?l++:(s=n[o],u.push(l),l=1);return u.push(l),u.length<23&&(u.length+1)%8!==0?null:{row:u,left:i,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],i=Math.ceil(r.reduce(function(l,o){return(l+o)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),u=a.map(function(l){return l<i?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[u]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[u])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(xt),z0=B7;var $7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},j7=function(t){$7(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var i=0;i<n.length;i++)if(xt.patternMatchVariance(r,n[i],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return i;throw new L},e.count=function(r){return Ne.sum(new Int32Array(r))},e.increment=function(r,n){for(var i=0,a=n[0],u=1;u<r.length;u++)n[u]>a&&(a=n[u],i=u);r[i]++},e.decrement=function(r,n){for(var i=0,a=n[0],u=1;u<r.length;u++)n[u]<a&&(a=n[u],i=u);r[i]--},e.isFinderPattern=function(r){var n,i,a=r[0]+r[1],u=a+r[2]+r[3],s=a/u;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,o=Number.MIN_SAFE_INTEGER;try{for(var c=V7(r),f=c.next();!f.done;f=c.next()){var d=f.value;d>o&&(o=d),d<l&&(l=d)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}return o<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(xt),mi=j7;var U7=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),ja=U7;var H7=function(){function t(e,r,n,i,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new se(n,a)),this.resultPoints.push(new se(i,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),Hd=H7;var z7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G7=function(){function t(){}return t.getRSSvalue=function(e,r,n){var i,a,u=0;try{for(var s=z7(e),l=s.next();!l.done;l=s.next()){var o=l.value;u+=o}}catch(y){i={error:y}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}for(var c=0,f=0,d=e.length,h=0;h<d-1;h++){var p=void 0;for(p=1,f|=1<<h;p<e[h];p++,f&=~(1<<h)){var m=t.combins(u-p-1,d-h-2);if(n&&f===0&&u-p-(d-h-1)>=d-h-1&&(m-=t.combins(u-p-(d-h),d-h-2)),d-h-1>1){for(var v=0,x=u-p-(d-h-2);x>r;x--)v+=t.combins(u-p-x-1,d-h-3);m-=v*(d-1-h)}else u-p>r&&m--;c+=m}u-=p}return c},t.combins=function(e,r){var n,i;e-r>r?(i=r,n=e-r):(i=e-r,n=r);for(var a=1,u=1,s=e;s>n;s--)a*=s,u<=i&&(a/=u,u++);for(;u<=i;)a/=u,u++;return a},t}(),Li=G7;var W7=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,i=new kt(n),a=0,u=e[0],s=u.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&i.set(a),a++;for(var l=1;l<e.length;++l){for(var o=e[l],c=o.getLeftChar().getValue(),f=11;f>=0;--f)c&1<<f&&i.set(a),a++;if(o.getRightChar()!==null)for(var d=o.getRightChar().getValue(),f=11;f>=0;--f)d&1<<f&&i.set(a),a++}return i},t}(),v_=W7;var q7=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Bi=q7;var X7=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),Gs=X7;var Y7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z7=function(t){Y7(e,t);function e(r,n){var i=t.call(this,r)||this;return i.value=n,i}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(Gs),zn=Z7;var K7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q7=function(t){K7(e,t);function e(r,n,i){var a=t.call(this,r)||this;return i?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(Gs),$i=Q7;var J7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),eV=function(t){J7(e,t);function e(r,n,i){var a=t.call(this,r)||this;if(n<0||n>10||i<0||i>10)throw new K;return a.firstDigit=n,a.secondDigit=i,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(Gs),Ua=eV;var zd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tV=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,i,a,u,s,l,o;if(!e)return null;if(e.length<2)throw new L;var c=e.substring(0,2);try{for(var f=zd(t.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===c)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(j){r={error:j}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new L;var p=e.substring(0,3);try{for(var m=zd(t.THREE_DIGIT_DATA_LENGTH),v=m.next();!v.done;v=m.next()){var h=v.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(j){i={error:j}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(i)throw i.error}}try{for(var x=zd(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var h=y.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(j){u={error:j}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(u)throw u.error}}if(e.length<4)throw new L;var _=e.substring(0,4);try{for(var I=zd(t.FOUR_DIGIT_DATA_LENGTH),C=I.next();!C.done;C=I.next()){var h=C.value;if(h[0]===_)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(j){l={error:j}}finally{try{C&&!C.done&&(o=I.return)&&o.call(I)}finally{if(l)throw l.error}}throw new L},t.processFixedAI=function(e,r,n){if(n.length<e)throw new L;var i=n.substring(0,e);if(n.length<e+r)throw new L;var a=n.substring(e,e+r),u=n.substring(e+r),s="("+i+")"+a,l=t.parseFieldsInGeneralPurpose(u);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var i=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var u=n.substring(e,a),s=n.substring(a),l="("+i+")"+u,o=t.parseFieldsInGeneralPurpose(s);return o==null?l:l+o},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),b_=tV;var rV=function(){function t(e){this.buffer=new de,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,i=null;do{var a=this.decodeGeneralPurposeField(n,i),u=b_.parseFieldsInGeneralPurpose(a.getNewString());if(u!=null&&e.append(u),a.isRemaining()?i=""+a.getRemainingValue():i=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Ua(this.information.getSize(),Ua.FNC1,Ua.FNC1):new Ua(this.information.getSize(),r-1,Ua.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),i=(n-8)/11,a=(n-8)%11;return new Ua(e+7,i,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var i=0,a=0;a<n;++a)e.get(r+a)&&(i|=1<<n-a-1);return i},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new $i(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new $i(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var i=n!==this.current.getPosition();if(!i&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new $i(this.current.getPosition(),this.buffer.toString()):r=new $i(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Bi(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new $i(this.current.getPosition(),this.buffer.toString());return new Bi(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Bi(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new $i(this.current.getPosition(),this.buffer.toString());return new Bi(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Bi(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new $i(this.current.getPosition(),this.buffer.toString());return new Bi(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Bi(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var i=this.extractNumericValueFromBitArray(e,8);return i>=232&&i<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new zn(e+5,zn.FNC1);if(r>=5&&r<15)return new zn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new zn(e+7,""+(n+1));if(n>=90&&n<116)return new zn(e+7,""+(n+7));var i=this.extractNumericValueFromBitArray(e,8),a;switch(i){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new K}return new zn(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new zn(e+5,zn.FNC1);if(r>=5&&r<15)return new zn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new zn(e+6,""+(n+33));var i;switch(n){case 58:i="*";break;case 59:i=",";break;case 60:i="-";break;case 61:i=".";break;case 62:i="/";break;default:throw new mr("Decoding invalid alphanumeric value: "+n)}return new zn(e+6,i)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Ws=rV;var nV=function(){function t(e){this.information=e,this.generalDecoder=new Ws(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),Hl=nV;var oV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iV=function(t){oV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var i=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,i)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,i){for(var a=0;a<4;++a){var u=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}e.appendCheckDigit(r,i)},e.appendCheckDigit=function(r,n){for(var i=0,a=0;a<13;a++){var u=r.charAt(a+n).charCodeAt(0)-48;i+=a&1?u:3*u}i=10-i%10,i===10&&(i=0),r.append(i)},e.GTIN_SIZE=40,e}(Hl),un=iV;var aV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sV=function(t){aV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new de;r.append("(01)");var n=r.length(),i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(i),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(un),w_=sV;var uV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lV=function(t){uV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new de;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(Hl),x_=lV;var cV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fV=function(t){cV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,i){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,i);this.addWeightCode(r,a);for(var u=this.checkWeight(a),s=1e5,l=0;l<5;++l)u/s===0&&r.append("0"),s/=10;r.append(u)},e}(un),qs=fV;var dV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hV=function(t){dV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+qs.GTIN_SIZE+e.WEIGHT_SIZE)throw new L;var r=new de;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+qs.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(qs),Gd=hV;var pV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gV=function(t){pV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(Gd),__=gV;var mV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),yV=function(t){mV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(Gd),E_=yV;var vV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),bV=function(t){vV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+un.GTIN_SIZE)throw new L;var r=new de;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+un.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var i=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+un.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(i.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(un),T_=bV;var wV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xV=function(t){wV(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+un.GTIN_SIZE)throw new L;var r=new de;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+un.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var i=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+un.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);i/100===0&&r.append("0"),i/10===0&&r.append("0"),r.append(i);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+un.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(un),I_=xV;var _V=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),EV=function(t){_V(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.dateCode=i,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new L;var r=new de;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var i=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(i!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=i%32;i/=32;var u=i%12+1;i/=12;var s=i;s/10===0&&r.append("0"),r.append(s),u/10===0&&r.append("0"),r.append(u),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(qs),yi=EV;function G0(t){try{if(t.get(1))return new w_(t);if(!t.get(2))return new x_(t);var e=Ws.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new __(t);case 5:return new E_(t)}var r=Ws.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new T_(t);case 13:return new I_(t)}var n=Ws.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new yi(t,"310","11");case 57:return new yi(t,"320","11");case 58:return new yi(t,"310","13");case 59:return new yi(t,"320","13");case 60:return new yi(t,"310","15");case 61:return new yi(t,"320","15");case 62:return new yi(t,"310","17");case 63:return new yi(t,"320","17")}}catch(i){throw console.log(i),new mr("unknown decoder: "+t)}}var TV=function(){function t(e,r,n,i){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=i}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),W0=TV;var IV=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(i,a){r.forEach(function(u){i.getLeftChar().getValue()===u.getLeftChar().getValue()&&i.getRightChar().getValue()===u.getRightChar().getValue()&&i.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),A_=IV;var AV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vi=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},SV=function(t){AV(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,i){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var i=!1;!i;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof L){if(!this.pairs.length)throw new L;i=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new L},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(i){console.log(i)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var i,a,u=n;u<this.rows.length;u++){var s=this.rows[u];this.pairs.length=0;try{for(var l=(i=void 0,Vi(r)),o=l.next();!o.done;o=l.next()){var c=o.value;this.pairs.push(c.getPairs())}}catch(d){i={error:d}}finally{try{o&&!o.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,u+1)}catch(d){console.log(d)}}}throw new L},e.isValidSequence=function(r){var n,i;try{for(var a=Vi(e.FINDER_PATTERN_SEQUENCES),u=a.next();!u.done;u=a.next()){var s=u.value;if(!(r.length>s.length)){for(var l=!0,o=0;o<r.length;o++)if(r[o].getFinderPattern().getValue()!==s[o]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var i=0,a=!1,u=!1;i<this.rows.length;){var s=this.rows[i];if(s.getRowNumber()>r){u=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),i++}u||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(i,new A_(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var i,a,u,s,l,o;try{for(var c=Vi(n),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getPairs().length!==r.length){var h=!0;try{for(var p=(u=void 0,Vi(d.getPairs())),m=p.next();!m.done;m=p.next()){var v=m.value,x=!1;try{for(var y=(l=void 0,Vi(r)),_=y.next();!_.done;_=y.next()){var I=_.value;if(W0.equals(v,I)){x=!0;break}}}catch(C){l={error:C}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(l)throw l.error}}x||(h=!1)}}catch(C){u={error:C}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(u)throw u.error}}}}}catch(C){i={error:C}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}},e.isPartialRow=function(r,n){var i,a,u,s,l,o;try{for(var c=Vi(n),f=c.next();!f.done;f=c.next()){var d=f.value,h=!0;try{for(var p=(u=void 0,Vi(r)),m=p.next();!m.done;m=p.next()){var v=m.value,x=!1;try{for(var y=(l=void 0,Vi(d.getPairs())),_=y.next();!_.done;_=y.next()){var I=_.value;if(v.equals(I)){x=!0;break}}}catch(C){l={error:C}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(l)throw l.error}}if(!x){h=!1;break}}}catch(C){u={error:C}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(u)throw u.error}}if(h)return!0}}catch(C){i={error:C}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=v_.buildBitArray(r),i=G0(n),a=i.parseInformation(),u=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[u[0],u[1],s[0],s[1]];return new nt(a,null,null,l,ae.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),i=r.getRightChar();if(i===null)return!1;for(var a=i.getChecksumPortion(),u=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),u++;var o=l.getRightChar();o!=null&&(a+=o.getChecksumPortion(),u++)}a%=211;var c=211*(u-4)+a;return c===n.getValue()},e.getNextSecondBar=function(r,n){var i;return r.get(n)?(i=r.getNextUnset(n),i=r.getNextSet(i)):(i=r.getNextSet(n),i=r.getNextUnset(i)),i},e.prototype.retrieveNextPair=function(r,n,i){var a=n.length%2===0;this.startFromEven&&(a=!a);var u,s=!0,l=-1;do this.findNextPair(r,n,l),u=this.parseFoundFinderPattern(r,i,a),u===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var o=this.decodeDataCharacter(r,u,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new L;var c;try{c=this.decodeDataCharacter(r,u,a,!1)}catch(f){c=null,console.log(f)}return new W0(o,c,u,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,i){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var u=r.getSize(),s;if(i>=0)s=i;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var o=n.length%2!==0;this.startFromEven&&(o=!o);for(var c=!1;s<u&&(c=!r.get(s),!!c);)s++;for(var f=0,d=s,h=s;h<u;h++)if(r.get(h)!==c)a[f]++;else{if(f===3){if(o&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=d,this.startEnd[1]=h;return}o&&e.reverseCounters(a),d+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,c=!c}throw new L},e.reverseCounters=function(r){for(var n=r.length,i=0;i<n/2;++i){var a=r[i];r[i]=r[n-i-1],r[n-i-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,i){var a,u,s;if(i){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,u=l,s=this.startEnd[1]}else u=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var o=this.getDecodeFinderCounters();Pe.arraycopy(o,0,o,1,o.length-1),o[0]=a;var c;try{c=this.parseFinderValue(o,e.FINDER_PATTERNS)}catch{return null}return new Hd(c,[u,s],u,s,n)},e.prototype.decodeDataCharacter=function(r,n,i,a){for(var u=this.getDataCharacterCounters(),s=0;s<u.length;s++)u[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],u);else{e.recordPattern(r,n.getStartEnd()[1],u);for(var l=0,o=u.length-1;l<o;l++,o--){var c=u[l];u[l]=u[o],u[o]=c}}var f=17,d=Ne.sum(new Int32Array(u))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new L;for(var p=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<u.length;l++){var y=1*u[l]/d,_=y+.5;if(_<1){if(y<.3)throw new L;_=1}else if(_>8){if(y>8.7)throw new L;_=8}var I=l/2;l&1?(m[I]=_,x[I]=y-_):(p[I]=_,v[I]=y-_)}this.adjustOddEvenCounts(f);for(var C=4*n.getValue()+(i?0:2)+(a?0:1)-1,j=0,z=0,l=p.length-1;l>=0;l--){if(e.isNotA1left(n,i,a)){var W=e.WEIGHTS[C][2*l];z+=p[l]*W}j+=p[l]}for(var k=0,l=m.length-1;l>=0;l--)if(e.isNotA1left(n,i,a)){var W=e.WEIGHTS[C][2*l+1];k+=m[l]*W}var X=z+k;if(j&1||j>13||j<4)throw new L;var ke=(13-j)/2,me=e.SYMBOL_WIDEST[ke],ye=9-me,Z=Li.getRSSvalue(p,me,!0),he=Li.getRSSvalue(m,ye,!1),yt=e.EVEN_TOTAL_SUBSET[ke],qe=e.GSUM[ke],Ue=Z*yt+he+qe;return new ja(Ue,X)},e.isNotA1left=function(r,n,i){return!(r.getValue()===0&&n&&i)},e.prototype.adjustOddEvenCounts=function(r){var n=Ne.sum(new Int32Array(this.getOddCounts())),i=Ne.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;n>13?u=!0:n<4&&(a=!0);var s=!1,l=!1;i>13?l=!0:i<4&&(s=!0);var o=n+i-r,c=(n&1)===1,f=(i&1)===0;if(o===1)if(c){if(f)throw new L;u=!0}else{if(!f)throw new L;l=!0}else if(o===-1)if(c){if(f)throw new L;a=!0}else{if(!f)throw new L;s=!0}else if(o===0){if(c){if(!f)throw new L;n<i?(a=!0,l=!0):(u=!0,s=!0)}else if(f)throw new L}else throw new L;if(a){if(u)throw new L;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new L;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(mi),q0=SV;var DV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CV=function(t){DV(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=i,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(ja),S_=CV;var OV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},PV=function(t){OV(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,i){var a,u,s,l,o=this.decodePair(n,!1,r,i);e.addOrTally(this.possibleLeftPairs,o),n.reverse();var c=this.decodePair(n,!0,r,i);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var f=X0(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var p=(s=void 0,X0(this.possibleRightPairs)),m=p.next();!m.done;m=p.next()){var v=m.value;if(v.getCount()>1&&e.checkChecksum(h,v))return e.constructResult(h,v)}}catch(x){s={error:x}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(x){a={error:x}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}throw new L},e.addOrTally=function(r,n){var i,a;if(n!=null){var u=!1;try{for(var s=X0(r),l=s.next();!l.done;l=s.next()){var o=l.value;if(o.getValue()===n.getValue()){o.incrementCount(),u=!0;break}}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}u||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var i=4537077*r.getValue()+n.getValue(),a=new String(i).toString(),u=new de,s=13-a.length;s>0;s--)u.append("0");u.append(a);for(var l=0,s=0;s<13;s++){var o=u.charAt(s).charCodeAt(0)-48;l+=s&1?o:3*o}l=10-l%10,l===10&&(l=0),u.append(l.toString());var c=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new nt(u.toString(),null,0,[c[0],c[1],f[0],f[1]],ae.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var i=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,i===a},e.prototype.decodePair=function(r,n,i,a){try{var u=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,i,n,u),l=a==null?null:a.get(Me.NEED_RESULT_POINT_CALLBACK);if(l!=null){var o=(u[0]+u[1])/2;n&&(o=r.getSize()-1-o),l.foundPossibleResultPoint(new se(o,i))}var c=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new S_(1597*c.getValue()+f.getValue(),c.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,i){for(var a=this.getDataCharacterCounters(),u=0;u<a.length;u++)a[u]=0;if(i)xt.recordPatternInReverse(r,n.getStartEnd()[0],a);else{xt.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var o=a[s];a[s]=a[l],a[l]=o}}for(var c=i?16:15,f=Ne.sum(new Int32Array(a))/c,d=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var v=a[s]/f,x=Math.floor(v+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(s/2);s&1?(h[y]=x,m[y]=v-x):(d[y]=x,p[y]=v-x)}this.adjustOddEvenCounts(i,c);for(var _=0,I=0,s=d.length-1;s>=0;s--)I*=9,I+=d[s],_+=d[s];for(var C=0,j=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],j+=h[s];var z=I+3*C;if(i){if(_&1||_>12||_<4)throw new L;var W=(12-_)/2,k=e.OUTSIDE_ODD_WIDEST[W],X=9-k,ke=Li.getRSSvalue(d,k,!1),me=Li.getRSSvalue(h,X,!0),ye=e.OUTSIDE_EVEN_TOTAL_SUBSET[W],Z=e.OUTSIDE_GSUM[W];return new ja(ke*ye+me+Z,z)}else{if(j&1||j>10||j<4)throw new L;var W=(10-j)/2,k=e.INSIDE_ODD_WIDEST[W],X=9-k,ke=Li.getRSSvalue(d,k,!0),me=Li.getRSSvalue(h,X,!1),he=e.INSIDE_ODD_TOTAL_SUBSET[W],Z=e.INSIDE_GSUM[W];return new ja(me*he+ke+Z,z)}},e.prototype.findFinderPattern=function(r,n){var i=this.getDecodeFinderCounters();i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var a=r.getSize(),u=!1,s=0;s<a&&(u=!r.get(s),n!==u);)s++;for(var l=0,o=s,c=s;c<a;c++)if(r.get(c)!==u)i[l]++;else{if(l===3){if(mi.isFinderPattern(i))return[o,c];o+=i[0]+i[1],i[0]=i[2],i[1]=i[3],i[2]=0,i[3]=0,l--}else l++;i[l]=1,u=!u}throw new L},e.prototype.parseFoundFinderPattern=function(r,n,i,a){for(var u=r.get(a[0]),s=a[0]-1;s>=0&&u!==r.get(s);)s--;s++;var l=a[0]-s,o=this.getDecodeFinderCounters(),c=new Int32Array(o.length);Pe.arraycopy(o,0,c,1,o.length-1),c[0]=l;var f=this.parseFinderValue(c,e.FINDER_PATTERNS),d=s,h=a[1];return i&&(d=r.getSize()-1-d,h=r.getSize()-1-h),new Hd(f,[s,a[1]],d,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var i=Ne.sum(new Int32Array(this.getOddCounts())),a=Ne.sum(new Int32Array(this.getEvenCounts())),u=!1,s=!1,l=!1,o=!1;r?(i>12?s=!0:i<4&&(u=!0),a>12?o=!0:a<4&&(l=!0)):(i>11?s=!0:i<5&&(u=!0),a>10?o=!0:a<4&&(l=!0));var c=i+a-n,f=(i&1)===(r?1:0),d=(a&1)===1;if(c===1)if(f){if(d)throw new L;s=!0}else{if(!d)throw new L;o=!0}else if(c===-1)if(f){if(d)throw new L;u=!0}else{if(!d)throw new L;l=!0}else if(c===0){if(f){if(!d)throw new L;i<a?(u=!0,o=!0):(s=!0,l=!0)}else if(d)throw new L}else throw new L;if(u){if(s)throw new L;mi.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&mi.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(o)throw new L;mi.increment(this.getEvenCounts(),this.getOddRoundingErrors())}o&&mi.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(mi),Wd=PV;var MV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NV=function(t){MV(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var i=r?r.get(Me.POSSIBLE_FORMATS):null,a=r&&r.get(Me.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,u=r&&r.get(Me.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return i&&((i.includes(ae.EAN_13)||i.includes(ae.UPC_A)||i.includes(ae.EAN_8)||i.includes(ae.UPC_E))&&n.readers.push(new Ud(r)),i.includes(ae.CODE_39)&&n.readers.push(new $d(a,u)),i.includes(ae.CODE_93)&&n.readers.push(new Vd),i.includes(ae.CODE_128)&&n.readers.push(new Bd),i.includes(ae.ITF)&&n.readers.push(new jd),i.includes(ae.CODABAR)&&n.readers.push(new z0),i.includes(ae.RSS_14)&&n.readers.push(new Wd),i.includes(ae.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new q0))),n.readers.length===0&&(n.readers.push(new Ud(r)),n.readers.push(new $d),n.readers.push(new Vd),n.readers.push(new Ud(r)),n.readers.push(new Bd),n.readers.push(new jd),n.readers.push(new Wd)),n}return e.prototype.decodeRow=function(r,n,i){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,i)}catch{}throw new L},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(xt),jo=NV;var RV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Yae=function(t){RV(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new jo(n),r,n)||this}return e}(Un);var D_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_t=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}();var ht=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}();var FV=function(){function t(e,r,n,i,a,u){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=i,this.dataRegionSizeColumns=a,this.ecBlocks=u;var o=0,c=u.getECCodewords(),f=u.getECBlocks();try{for(var d=D_(f),h=d.next();!h.done;h=d.next()){var p=h.value;o+=p.getCount()*(p.getDataCodewords()+c)}}catch(m){s={error:m}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}this.totalCodewords=o}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,i;if(e&1||r&1)throw new K;try{for(var a=D_(t.VERSIONS),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}throw new K},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new _t(5,new ht(1,3))),new t(2,12,12,10,10,new _t(7,new ht(1,5))),new t(3,14,14,12,12,new _t(10,new ht(1,8))),new t(4,16,16,14,14,new _t(12,new ht(1,12))),new t(5,18,18,16,16,new _t(14,new ht(1,18))),new t(6,20,20,18,18,new _t(18,new ht(1,22))),new t(7,22,22,20,20,new _t(20,new ht(1,30))),new t(8,24,24,22,22,new _t(24,new ht(1,36))),new t(9,26,26,24,24,new _t(28,new ht(1,44))),new t(10,32,32,14,14,new _t(36,new ht(1,62))),new t(11,36,36,16,16,new _t(42,new ht(1,86))),new t(12,40,40,18,18,new _t(48,new ht(1,114))),new t(13,44,44,20,20,new _t(56,new ht(1,144))),new t(14,48,48,22,22,new _t(68,new ht(1,174))),new t(15,52,52,24,24,new _t(42,new ht(2,102))),new t(16,64,64,14,14,new _t(56,new ht(2,140))),new t(17,72,72,16,16,new _t(36,new ht(4,92))),new t(18,80,80,18,18,new _t(48,new ht(4,114))),new t(19,88,88,20,20,new _t(56,new ht(4,144))),new t(20,96,96,22,22,new _t(68,new ht(4,174))),new t(21,104,104,24,24,new _t(56,new ht(6,136))),new t(22,120,120,18,18,new _t(68,new ht(6,175))),new t(23,132,132,20,20,new _t(62,new ht(8,163))),new t(24,144,144,22,22,new _t(62,new ht(8,156),new ht(2,155))),new t(25,8,18,6,16,new _t(7,new ht(1,5))),new t(26,8,32,6,14,new _t(11,new ht(1,10))),new t(27,12,26,10,24,new _t(14,new ht(1,16))),new t(28,12,36,10,16,new _t(18,new ht(1,22))),new t(29,16,36,14,16,new _t(24,new ht(1,32))),new t(30,16,48,14,22,new _t(28,new ht(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),C_=FV;var kV=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new K;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Bt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return C_.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,i=0,a=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth(),s=!1,l=!1,o=!1,c=!1;do if(n===a&&i===0&&!s)e[r++]=this.readCorner1(a,u)&255,n-=2,i+=2,s=!0;else if(n===a-2&&i===0&&u&3&&!l)e[r++]=this.readCorner2(a,u)&255,n-=2,i+=2,l=!0;else if(n===a+4&&i===2&&!(u&7)&&!o)e[r++]=this.readCorner3(a,u)&255,n-=2,i+=2,o=!0;else if(n===a-2&&i===0&&(u&7)===4&&!c)e[r++]=this.readCorner4(a,u)&255,n-=2,i+=2,c=!0;else{do n<a&&i>=0&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,u)&255),n-=2,i+=2;while(n>=0&&i<u);n+=1,i+=3;do n>=0&&i<u&&!this.readMappingMatrix.get(i,n)&&(e[r++]=this.readUtah(n,i,a,u)&255),n+=2,i-=2;while(n<a&&i>=0);n+=3,i+=1}while(n<a||i<u);if(r!==this.version.getTotalCodewords())throw new K;return e},t.prototype.readModule=function(e,r,n,i){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=i,e+=4-(i+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,i){var a=0;return this.readModule(e-2,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e-1,r,n,i)&&(a|=1),a<<=1,this.readModule(e,r-2,n,i)&&(a|=1),a<<=1,this.readModule(e,r-1,n,i)&&(a|=1),a<<=1,this.readModule(e,r,n,i)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new re("Dimension of bitMatrix must match the version size");for(var i=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),u=r/i|0,s=n/a|0,l=u*i,o=s*a,c=new Bt(o,l),f=0;f<u;++f)for(var d=f*i,h=0;h<s;++h)for(var p=h*a,m=0;m<i;++m)for(var v=f*(i+2)+1+m,x=d+m,y=0;y<a;++y){var _=h*(a+2)+1+y;if(e.get(_,v)){var I=p+y;c.set(I,x)}}return c},t}(),O_=kV;var P_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},LV=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,i,a,u,s=r.getECBlocks(),l=0,o=s.getECBlocks();try{for(var c=P_(o),f=c.next();!f.done;f=c.next()){var d=f.value;l+=d.getCount()}}catch(Z){n={error:Z}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}var h=new Array(l),p=0;try{for(var m=P_(o),v=m.next();!v.done;v=m.next())for(var d=v.value,x=0;x<d.getCount();x++){var y=d.getDataCodewords(),_=s.getECCodewords()+y;h[p++]=new t(y,new Uint8Array(_))}}catch(Z){a={error:Z}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}for(var I=h[0].codewords.length,C=I-s.getECCodewords(),j=C-1,z=0,x=0;x<j;x++)for(var W=0;W<p;W++)h[W].codewords[x]=e[z++];for(var k=r.getVersionNumber()===24,X=k?8:p,W=0;W<X;W++)h[W].codewords[C-1]=e[z++];for(var ke=h[0].codewords.length,x=C;x<ke;x++)for(var W=0;W<p;W++){var me=k?(W+8)%p:W,ye=k&&me>7?x-1:x;h[me].codewords[ye]=e[z++]}if(z!==e.length)throw new re;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),M_=LV;var BV=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new re(""+e);var r=0,n=this.bitOffset,i=this.byteOffset,a=this.bytes;if(n>0){var u=8-n,s=e<u?e:u,l=u-s,o=255>>8-s<<l;r=(a[i]&o)>>l,e-=s,n+=s,n===8&&(n=0,i++)}if(e>0){for(;e>=8;)r=r<<8|a[i]&255,i++,e-=8;if(e>0){var l=8-e,o=255>>l<<l;r=r<<e|(a[i]&o)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=i,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),zl=BV;var kr=function(t){return t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE",t}(kr||{}),$V=function(){function t(){}return t.decode=function(e){var r=new zl(e),n=new de,i=new de,a=new Array,u=kr.ASCII_ENCODE;do if(u===kr.ASCII_ENCODE)u=this.decodeAsciiSegment(r,n,i);else{switch(u){case kr.C40_ENCODE:this.decodeC40Segment(r,n);break;case kr.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case kr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case kr.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case kr.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new K}u=kr.ASCII_ENCODE}while(u!==kr.PAD_ENCODE&&r.available()>0);return i.length()>0&&n.append(i.toString()),new pi(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var i=!1;do{var a=e.readBits(8);if(a===0)throw new K;if(a<=128)return i&&(a+=128),r.append(String.fromCharCode(a-1)),kr.ASCII_ENCODE;if(a===129)return kr.PAD_ENCODE;if(a<=229){var u=a-130;u<10&&r.append("0"),r.append(""+u)}else switch(a){case 230:return kr.C40_ENCODE;case 231:return kr.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:i=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return kr.ANSIX12_ENCODE;case 239:return kr.TEXT_ENCODE;case 240:return kr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new K;break}}while(e.available()>0);return kr.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var o=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(o.charCodeAt(0)+128)),n=!1):r.append(o)}else throw new K;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var o=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(o.charCodeAt(0)+128)),n=!1):r.append(o)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new K}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new K}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,i=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),i);for(var s=0;s<3;s++){var l=i[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var o=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(o.charCodeAt(0)+128)),n=!1):r.append(o)}else throw new K;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var o=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(o.charCodeAt(0)+128)),n=!1):r.append(o)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new K}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var o=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(o.charCodeAt(0)+128)),n=!1):r.append(o),a=0}else throw new K;break;default:throw new K}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var i=e.readBits(8);if(i===254)return;this.parseTwoBytes(i,e.readBits(8),n);for(var a=0;a<3;a++){var u=n[a];switch(u){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(u<14)r.append(String.fromCharCode(u+44));else if(u<40)r.append(String.fromCharCode(u+51));else throw new K;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var i=(e<<8)+r-1,a=Math.floor(i/1600);n[0]=a,i-=a*1600,a=Math.floor(i/40),n[1]=a,n[2]=i-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var i=e.readBits(6);if(i===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}i&32||(i|=64),r.append(String.fromCharCode(i))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var i=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),i++),u;if(a===0?u=e.available()/8|0:a<250?u=a:u=250*(a-249)+this.unrandomize255State(e.readBits(8),i++),u<0)throw new K;for(var s=new Uint8Array(u),l=0;l<u;l++){if(e.available()<8)throw new K;s[l]=this.unrandomize255State(e.readBits(8),i++)}n.push(s);try{r.append(Cr.decode(s,_e.ISO88591))}catch(o){throw new mr("Platform does not support required encoding: "+o.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,i=e-n;return i>=0?i:i+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],t}(),Y0=$V;var VV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jV=function(){function t(){this.rsDecoder=new gi(sr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,i=new O_(e),a=i.getVersion(),u=i.readCodewords(),s=M_.getDataBlocks(u,a),l=0;try{for(var o=VV(s),c=o.next();!c.done;c=o.next()){var f=c.value;l+=f.getNumDataCodewords()}}catch(_){r={error:_}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}for(var d=new Uint8Array(l),h=s.length,p=0;p<h;p++){var m=s[p],v=m.getCodewords(),x=m.getNumDataCodewords();this.correctErrors(v,x);for(var y=0;y<x;y++)d[y*h+p]=v[y]}return Y0.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new it}for(var i=0;i<r;i++)e[i]=n[i]},t}(),N_=jV;var UV=function(){function t(e){this.image=e,this.rectangleDetector=new Hs(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new L;r=this.shiftToModuleCenter(r);var n=r[0],i=r[1],a=r[2],u=r[3],s=this.transitionsBetween(n,u)+1,l=this.transitionsBetween(a,u)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var o=t.sampleGrid(this.image,n,i,a,u,s,l);return new $a(o,[n,i,a,u])},t.shiftPoint=function(e,r,n){var i=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new se(e.getX()+i,e.getY()+a)},t.moveAway=function(e,r,n){var i=e.getX(),a=e.getY();return i<r?i-=1:i+=1,a<n?a-=1:a+=1,new se(i,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],i=e[3],a=e[2],u=this.transitionsBetween(r,n),s=this.transitionsBetween(n,i),l=this.transitionsBetween(i,a),o=this.transitionsBetween(a,r),c=u,f=[a,r,n,i];return c>s&&(c=s,f[0]=r,f[1]=n,f[2]=i,f[3]=a),c>l&&(c=l,f[0]=n,f[1]=i,f[2]=a,f[3]=r),c>o&&(f[0]=i,f[1]=a,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],u=this.transitionsBetween(r,a),s=t.shiftPoint(n,i,(u+1)*4),l=t.shiftPoint(i,n,(u+1)*4),o=this.transitionsBetween(s,r),c=this.transitionsBetween(l,a);return o<c?(e[0]=r,e[1]=n,e[2]=i,e[3]=a):(e[0]=n,e[1]=i,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],u=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),o=t.shiftPoint(i,n,(u+1)*4);u=this.transitionsBetween(l,a),s=this.transitionsBetween(o,a);var c=new se(a.getX()+(i.getX()-n.getX())/(u+1),a.getY()+(i.getY()-n.getY())/(u+1)),f=new se(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(f)?f:null;if(!this.isValid(f))return c;var d=this.transitionsBetween(l,c)+this.transitionsBetween(o,c),h=this.transitionsBetween(l,f)+this.transitionsBetween(o,f);return d>h?c:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],i=e[2],a=e[3],u=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(i,a)+1,l=t.shiftPoint(r,n,s*4),o=t.shiftPoint(i,n,u*4);u=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(o,a)+1,(u&1)===1&&(u+=1),(s&1)===1&&(s+=1);var c=(r.getX()+n.getX()+i.getX()+a.getX())/4,f=(r.getY()+n.getY()+i.getY()+a.getY())/4;r=t.moveAway(r,c,f),n=t.moveAway(n,c,f),i=t.moveAway(i,c,f),a=t.moveAway(a,c,f);var d,h;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,u*4),d=t.shiftPoint(n,r,s*4),d=t.shiftPoint(d,i,u*4),o=t.shiftPoint(i,a,s*4),o=t.shiftPoint(o,n,u*4),h=t.shiftPoint(a,i,s*4),h=t.shiftPoint(h,r,u*4),[l,d,o,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,i,a,u,s){var l=Va.getInstance();return l.sampleGrid(e,u,s,.5,.5,u-.5,.5,u-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),i.getX(),i.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),i=Math.trunc(e.getY()),a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),s=Math.abs(u-i)>Math.abs(a-n);if(s){var l=n;n=i,i=l,l=a,a=u,u=l}for(var o=Math.abs(a-n),c=Math.abs(u-i),f=-o/2,d=i<u?1:-1,h=n<a?1:-1,p=0,m=this.image.get(s?i:n,s?n:i),v=n,x=i;v!==a;v+=h){var y=this.image.get(s?x:v,s?v:x);if(y!==m&&(p++,m=y),f+=c,f>0){if(x===u)break;x+=d,f-=o}}return p},t}(),R_=UV;var HV=function(){function t(){this.decoder=new N_}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,i;if(r!=null&&r.has(Me.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),i=t.NO_POINTS}else{var u=new R_(e.getBlackMatrix()).detect();n=this.decoder.decode(u.getBits()),i=u.getPoints()}var s=n.getRawBytes(),l=new nt(n.getText(),s,8*s.length,i,ae.DATA_MATRIX,Pe.currentTimeMillis()),o=n.getByteSegments();o!=null&&l.putMetadata(jt.BYTE_SEGMENTS,o);var c=n.getECLevel();return c!=null&&l.putMetadata(jt.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new L;var i=this.moduleSize(r,e),a=r[1],u=n[1],s=r[0],l=n[0],o=(l-s+1)/i,c=(u-a+1)/i;if(o<=0||c<=0)throw new L;var f=i/2;a+=f,s+=f;for(var d=new Bt(o,c),h=0;h<c;h++)for(var p=a+h*i,m=0;m<o;m++)e.get(s+m*i,p)&&d.set(m,h);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),i=e[0],a=e[1];i<n&&r.get(i,a);)i++;if(i===n)throw new L;var u=i-e[0];if(u===0)throw new L;return u},t.NO_POINTS=[],t}(),ji=HV;var zV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jse=function(t){zV(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new ji,r)||this}return e}(Un);var Gl=function(t){return t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H",t}(Gl||{}),GV=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Qt(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new re;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(Gl.L,"L",1),t.M=new t(Gl.M,"M",0),t.Q=new t(Gl.Q,"Q",3),t.H=new t(Gl.H,"H",2),t}(),ln=GV;var WV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qV=function(){function t(e){this.errorCorrectionLevel=ln.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return ge.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,i,a=Number.MAX_SAFE_INTEGER,u=0;try{for(var s=WV(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var o=l.value,c=o[0];if(c===e||c===r)return new t(o[1]);var f=t.numBitsDiffering(e,c);f<a&&(u=o[1],a=f),e!==r&&(f=t.numBitsDiffering(r,c),f<a&&(u=o[1],a=f))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(n)throw n.error}}return a<=3?new t(u):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),Wl=qV;var XV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},YV=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,i=this.ecBlocks;try{for(var a=XV(i),u=a.next();!u.done;u=a.next()){var s=u.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),H=YV;var ZV=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),D=ZV;var KV=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},QV=function(){function t(e,r){for(var n,i,a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),o=a[0].getECBlocks();try{for(var c=KV(o),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d.getCount()*(d.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new K;try{return this.getVersionForNumber((e-17)/4)}catch{throw new K}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new re;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,i=0;i<t.VERSION_DECODE_INFO.length;i++){var a=t.VERSION_DECODE_INFO[i];if(a===e)return t.getVersionForNumber(i+7);var u=Wl.numBitsDiffering(e,a);u<r&&(n=i+7,r=u)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Bt(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,i=0;i<n;i++)for(var a=this.alignmentPatternCenters[i]-2,u=0;u<n;u++)i===0&&(u===0||u===n-1)||i===n-1&&u===0||r.setRegion(this.alignmentPatternCenters[u]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new H(7,new D(1,19)),new H(10,new D(1,16)),new H(13,new D(1,13)),new H(17,new D(1,9))),new t(2,Int32Array.from([6,18]),new H(10,new D(1,34)),new H(16,new D(1,28)),new H(22,new D(1,22)),new H(28,new D(1,16))),new t(3,Int32Array.from([6,22]),new H(15,new D(1,55)),new H(26,new D(1,44)),new H(18,new D(2,17)),new H(22,new D(2,13))),new t(4,Int32Array.from([6,26]),new H(20,new D(1,80)),new H(18,new D(2,32)),new H(26,new D(2,24)),new H(16,new D(4,9))),new t(5,Int32Array.from([6,30]),new H(26,new D(1,108)),new H(24,new D(2,43)),new H(18,new D(2,15),new D(2,16)),new H(22,new D(2,11),new D(2,12))),new t(6,Int32Array.from([6,34]),new H(18,new D(2,68)),new H(16,new D(4,27)),new H(24,new D(4,19)),new H(28,new D(4,15))),new t(7,Int32Array.from([6,22,38]),new H(20,new D(2,78)),new H(18,new D(4,31)),new H(18,new D(2,14),new D(4,15)),new H(26,new D(4,13),new D(1,14))),new t(8,Int32Array.from([6,24,42]),new H(24,new D(2,97)),new H(22,new D(2,38),new D(2,39)),new H(22,new D(4,18),new D(2,19)),new H(26,new D(4,14),new D(2,15))),new t(9,Int32Array.from([6,26,46]),new H(30,new D(2,116)),new H(22,new D(3,36),new D(2,37)),new H(20,new D(4,16),new D(4,17)),new H(24,new D(4,12),new D(4,13))),new t(10,Int32Array.from([6,28,50]),new H(18,new D(2,68),new D(2,69)),new H(26,new D(4,43),new D(1,44)),new H(24,new D(6,19),new D(2,20)),new H(28,new D(6,15),new D(2,16))),new t(11,Int32Array.from([6,30,54]),new H(20,new D(4,81)),new H(30,new D(1,50),new D(4,51)),new H(28,new D(4,22),new D(4,23)),new H(24,new D(3,12),new D(8,13))),new t(12,Int32Array.from([6,32,58]),new H(24,new D(2,92),new D(2,93)),new H(22,new D(6,36),new D(2,37)),new H(26,new D(4,20),new D(6,21)),new H(28,new D(7,14),new D(4,15))),new t(13,Int32Array.from([6,34,62]),new H(26,new D(4,107)),new H(22,new D(8,37),new D(1,38)),new H(24,new D(8,20),new D(4,21)),new H(22,new D(12,11),new D(4,12))),new t(14,Int32Array.from([6,26,46,66]),new H(30,new D(3,115),new D(1,116)),new H(24,new D(4,40),new D(5,41)),new H(20,new D(11,16),new D(5,17)),new H(24,new D(11,12),new D(5,13))),new t(15,Int32Array.from([6,26,48,70]),new H(22,new D(5,87),new D(1,88)),new H(24,new D(5,41),new D(5,42)),new H(30,new D(5,24),new D(7,25)),new H(24,new D(11,12),new D(7,13))),new t(16,Int32Array.from([6,26,50,74]),new H(24,new D(5,98),new D(1,99)),new H(28,new D(7,45),new D(3,46)),new H(24,new D(15,19),new D(2,20)),new H(30,new D(3,15),new D(13,16))),new t(17,Int32Array.from([6,30,54,78]),new H(28,new D(1,107),new D(5,108)),new H(28,new D(10,46),new D(1,47)),new H(28,new D(1,22),new D(15,23)),new H(28,new D(2,14),new D(17,15))),new t(18,Int32Array.from([6,30,56,82]),new H(30,new D(5,120),new D(1,121)),new H(26,new D(9,43),new D(4,44)),new H(28,new D(17,22),new D(1,23)),new H(28,new D(2,14),new D(19,15))),new t(19,Int32Array.from([6,30,58,86]),new H(28,new D(3,113),new D(4,114)),new H(26,new D(3,44),new D(11,45)),new H(26,new D(17,21),new D(4,22)),new H(26,new D(9,13),new D(16,14))),new t(20,Int32Array.from([6,34,62,90]),new H(28,new D(3,107),new D(5,108)),new H(26,new D(3,41),new D(13,42)),new H(30,new D(15,24),new D(5,25)),new H(28,new D(15,15),new D(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new H(28,new D(4,116),new D(4,117)),new H(26,new D(17,42)),new H(28,new D(17,22),new D(6,23)),new H(30,new D(19,16),new D(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new H(28,new D(2,111),new D(7,112)),new H(28,new D(17,46)),new H(30,new D(7,24),new D(16,25)),new H(24,new D(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new H(30,new D(4,121),new D(5,122)),new H(28,new D(4,47),new D(14,48)),new H(30,new D(11,24),new D(14,25)),new H(30,new D(16,15),new D(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new H(30,new D(6,117),new D(4,118)),new H(28,new D(6,45),new D(14,46)),new H(30,new D(11,24),new D(16,25)),new H(30,new D(30,16),new D(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new H(26,new D(8,106),new D(4,107)),new H(28,new D(8,47),new D(13,48)),new H(30,new D(7,24),new D(22,25)),new H(30,new D(22,15),new D(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new H(28,new D(10,114),new D(2,115)),new H(28,new D(19,46),new D(4,47)),new H(28,new D(28,22),new D(6,23)),new H(30,new D(33,16),new D(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new H(30,new D(8,122),new D(4,123)),new H(28,new D(22,45),new D(3,46)),new H(30,new D(8,23),new D(26,24)),new H(30,new D(12,15),new D(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new H(30,new D(3,117),new D(10,118)),new H(28,new D(3,45),new D(23,46)),new H(30,new D(4,24),new D(31,25)),new H(30,new D(11,15),new D(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new H(30,new D(7,116),new D(7,117)),new H(28,new D(21,45),new D(7,46)),new H(30,new D(1,23),new D(37,24)),new H(30,new D(19,15),new D(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new H(30,new D(5,115),new D(10,116)),new H(28,new D(19,47),new D(10,48)),new H(30,new D(15,24),new D(25,25)),new H(30,new D(23,15),new D(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new H(30,new D(13,115),new D(3,116)),new H(28,new D(2,46),new D(29,47)),new H(30,new D(42,24),new D(1,25)),new H(30,new D(23,15),new D(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new H(30,new D(17,115)),new H(28,new D(10,46),new D(23,47)),new H(30,new D(10,24),new D(35,25)),new H(30,new D(19,15),new D(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new H(30,new D(17,115),new D(1,116)),new H(28,new D(14,46),new D(21,47)),new H(30,new D(29,24),new D(19,25)),new H(30,new D(11,15),new D(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new H(30,new D(13,115),new D(6,116)),new H(28,new D(14,46),new D(23,47)),new H(30,new D(44,24),new D(7,25)),new H(30,new D(59,16),new D(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new H(30,new D(12,121),new D(7,122)),new H(28,new D(12,47),new D(26,48)),new H(30,new D(39,24),new D(14,25)),new H(30,new D(22,15),new D(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new H(30,new D(6,121),new D(14,122)),new H(28,new D(6,47),new D(34,48)),new H(30,new D(46,24),new D(10,25)),new H(30,new D(2,15),new D(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new H(30,new D(17,122),new D(4,123)),new H(28,new D(29,46),new D(14,47)),new H(30,new D(49,24),new D(10,25)),new H(30,new D(24,15),new D(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new H(30,new D(4,122),new D(18,123)),new H(28,new D(13,46),new D(32,47)),new H(30,new D(48,24),new D(14,25)),new H(30,new D(42,15),new D(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new H(30,new D(20,117),new D(4,118)),new H(28,new D(40,47),new D(7,48)),new H(30,new D(43,24),new D(22,25)),new H(30,new D(10,15),new D(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new H(30,new D(19,118),new D(6,119)),new H(28,new D(18,47),new D(31,48)),new H(30,new D(34,24),new D(34,25)),new H(30,new D(20,15),new D(61,16)))],t}(),wo=QV;var Gr=function(t){return t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111",t}(Gr||{}),JV=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var i=0;i<r;i++)this.isMasked(n,i)&&e.flip(i,n)},t.values=new Map([[Gr.DATA_MASK_000,new t(Gr.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[Gr.DATA_MASK_001,new t(Gr.DATA_MASK_001,function(e,r){return(e&1)===0})],[Gr.DATA_MASK_010,new t(Gr.DATA_MASK_010,function(e,r){return r%3===0})],[Gr.DATA_MASK_011,new t(Gr.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[Gr.DATA_MASK_100,new t(Gr.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[Gr.DATA_MASK_101,new t(Gr.DATA_MASK_101,function(e,r){return e*r%6===0})],[Gr.DATA_MASK_110,new t(Gr.DATA_MASK_110,function(e,r){return e*r%6<3})],[Gr.DATA_MASK_111,new t(Gr.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),qd=JV;var e9=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new K;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var i=this.bitMatrix.getHeight(),a=0,u=i-7,n=i-1;n>=u;n--)a=this.copyBit(8,n,a);for(var r=i-8;r<i;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=Wl.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return wo.getVersionForNumber(r);for(var n=0,i=e-11,a=5;a>=0;a--)for(var u=e-9;u>=i;u--)n=this.copyBit(u,a,n);var s=wo.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var u=5;u>=0;u--)for(var a=e-9;a>=i;a--)n=this.copyBit(u,a,n);if(s=wo.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new K},t.prototype.copyBit=function(e,r,n){var i=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return i?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=qd.values.get(e.getDataMask()),i=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,i);for(var a=r.buildFunctionPattern(),u=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,o=0,c=0,f=i-1;f>0;f-=2){f===6&&f--;for(var d=0;d<i;d++)for(var h=u?i-1-d:d,p=0;p<2;p++)a.get(f-p,h)||(c++,o<<=1,this.bitMatrix.get(f-p,h)&&(o|=1),c===8&&(s[l++]=o,c=0,o=0));u=!u}if(l!==r.getTotalCodewords())throw new K;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=qd.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var i=r+1,a=e.getHeight();i<a;i++)e.get(r,i)!==e.get(i,r)&&(e.flip(i,r),e.flip(r,i))},t}(),F_=e9;var k_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t9=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var i,a,u,s;if(e.length!==r.getTotalCodewords())throw new re;var l=r.getECBlocksForLevel(n),o=0,c=l.getECBlocks();try{for(var f=k_(c),d=f.next();!d.done;d=f.next()){var h=d.value;o+=h.getCount()}}catch(ye){i={error:ye}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}var p=new Array(o),m=0;try{for(var v=k_(c),x=v.next();!x.done;x=v.next())for(var h=x.value,y=0;y<h.getCount();y++){var _=h.getDataCodewords(),I=l.getECCodewordsPerBlock()+_;p[m++]=new t(_,new Uint8Array(I))}}catch(ye){u={error:ye}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(u)throw u.error}}for(var C=p[0].codewords.length,j=p.length-1;j>=0;){var z=p[j].codewords.length;if(z===C)break;j--}j++;for(var W=C-l.getECCodewordsPerBlock(),k=0,y=0;y<W;y++)for(var X=0;X<m;X++)p[X].codewords[y]=e[k++];for(var X=j;X<m;X++)p[X].codewords[W]=e[k++];for(var ke=p[0].codewords.length,y=W;y<ke;y++)for(var X=0;X<m;X++){var me=X<j?y:y+1;p[X].codewords[me]=e[k++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),L_=t9;var xo=function(t){return t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI",t}(xo||{}),r9=function(){function t(e,r,n,i){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=i,t.FOR_BITS.set(i,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new re;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(xo.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(xo.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(xo.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(xo.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(xo.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(xo.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(xo.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(xo.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(xo.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(xo.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),Nt=r9;var n9=function(){function t(){}return t.decode=function(e,r,n,i){var a=new zl(e),u=new de,s=new Array,l=-1,o=-1;try{var c=null,f=!1,d=void 0;do{if(a.available()<4)d=Nt.TERMINATOR;else{var h=a.readBits(4);d=Nt.forBits(h)}switch(d){case Nt.TERMINATOR:break;case Nt.FNC1_FIRST_POSITION:case Nt.FNC1_SECOND_POSITION:f=!0;break;case Nt.STRUCTURED_APPEND:if(a.available()<16)throw new K;l=a.readBits(8),o=a.readBits(8);break;case Nt.ECI:var p=t.parseECIValue(a);if(c=Lt.getCharacterSetECIByValue(p),c===null)throw new K;break;case Nt.HANZI:var m=a.readBits(4),v=a.readBits(d.getCharacterCountBits(r));m===t.GB2312_SUBSET&&t.decodeHanziSegment(a,u,v);break;default:var x=a.readBits(d.getCharacterCountBits(r));switch(d){case Nt.NUMERIC:t.decodeNumericSegment(a,u,x);break;case Nt.ALPHANUMERIC:t.decodeAlphanumericSegment(a,u,x,f);break;case Nt.BYTE:t.decodeByteSegment(a,u,x,c,s,i);break;case Nt.KANJI:t.decodeKanjiSegment(a,u,x);break;default:throw new K}break}}while(d!==Nt.TERMINATOR)}catch{throw new K}return new pi(e,u.toString(),s.length===0?null:s,n===null?null:n.toString(),l,o)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new K;for(var i=new Uint8Array(2*n),a=0;n>0;){var u=e.readBits(13),s=u/96<<8&4294967295|u%96;s<959?s+=41377:s+=42657,i[a]=s>>8&255,i[a+1]=s&255,a+=2,n--}try{r.append(Cr.decode(i,_e.GB2312))}catch(l){throw new K(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new K;for(var i=new Uint8Array(2*n),a=0;n>0;){var u=e.readBits(13),s=u/192<<8&4294967295|u%192;s<7936?s+=33088:s+=49472,i[a]=s>>8,i[a+1]=s,a+=2,n--}try{r.append(Cr.decode(i,_e.SHIFT_JIS))}catch(l){throw new K(l)}},t.decodeByteSegment=function(e,r,n,i,a,u){if(8*n>e.available())throw new K;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var o;i===null?o=_e.guessEncoding(s,u):o=i.getName();try{r.append(Cr.decode(s,o))}catch(c){throw new K(c)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new K;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,i){for(var a=r.length();n>1;){if(e.available()<11)throw new K;var u=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(u/45))),r.append(t.toAlphaNumericChar(u%45)),n-=2}if(n===1){if(e.available()<6)throw new K;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(i)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new K;var i=e.readBits(10);if(i>=1e3)throw new K;r.append(t.toAlphaNumericChar(Math.floor(i/100))),r.append(t.toAlphaNumericChar(Math.floor(i/10)%10)),r.append(t.toAlphaNumericChar(i%10)),n-=3}if(n===2){if(e.available()<7)throw new K;var a=e.readBits(7);if(a>=100)throw new K;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new K;var u=e.readBits(4);if(u>=10)throw new K;r.append(t.toAlphaNumericChar(u))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var i=e.readBits(16);return(r&31)<<16&4294967295|i}throw new K},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Z0=n9;var o9=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),Xd=o9;var B_=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},i9=function(){function t(){this.rsDecoder=new gi(sr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Bt.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new F_(e),i=null;try{return this.decodeBitMatrixParser(n,r)}catch(u){i=u}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new Xd(!0)),a}catch(u){throw i!==null?i:u}},t.prototype.decodeBitMatrixParser=function(e,r){var n,i,a,u,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),o=e.readCodewords(),c=L_.getDataBlocks(o,s,l),f=0;try{for(var d=B_(c),h=d.next();!h.done;h=d.next()){var p=h.value;f+=p.getNumDataCodewords()}}catch(j){n={error:j}}finally{try{h&&!h.done&&(i=d.return)&&i.call(d)}finally{if(n)throw n.error}}var m=new Uint8Array(f),v=0;try{for(var x=B_(c),y=x.next();!y.done;y=x.next()){var p=y.value,_=p.getCodewords(),I=p.getNumDataCodewords();this.correctErrors(_,I);for(var C=0;C<I;C++)m[v++]=_[C]}}catch(j){a={error:j}}finally{try{y&&!y.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}return Z0.decode(m,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new it}for(var i=0;i<r;i++)e[i]=n[i]},t}(),$_=i9;var a9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s9=function(t){a9(e,t);function e(r,n,i){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=i,a}return e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=(this.getX()+n)/2,u=(this.getY()+r)/2,s=(this.estimatedModuleSize+i)/2;return new e(a,u,s)},e}(se),V_=s9;var u9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l9=function(){function t(e,r,n,i,a,u,s){this.image=e,this.startX=r,this.startY=n,this.width=i,this.height=a,this.moduleSize=u,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,i=e+n,a=this.startY+r/2,u=new Int32Array(3),s=this.image,l=0;l<r;l++){var o=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));u[0]=0,u[1]=0,u[2]=0;for(var c=e;c<i&&!s.get(c,o);)c++;for(var f=0;c<i;){if(s.get(c,o))if(f===1)u[1]++;else if(f===2){if(this.foundPatternCross(u)){var d=this.handlePossibleCenter(u,o,c);if(d!==null)return d}u[0]=u[2],u[1]=1,u[2]=0,f=1}else u[++f]++;else f===1&&f++,u[f]++;c++}if(this.foundPatternCross(u)){var d=this.handlePossibleCenter(u,o,i);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new L},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,i=0;i<3;i++)if(Math.abs(r-e[i])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,i){var a=this.image,u=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===u||s[1]>n)return NaN;for(;l<u&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var o=s[0]+s[1]+s[2];return 5*Math.abs(o-i)>=2*i?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var i,a,u=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],u);if(!isNaN(l)){var o=(e[0]+e[1]+e[2])/3;try{for(var c=u9(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.aboutEquals(o,l,s))return d.combineEstimate(l,s,o)}}catch(p){i={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}var h=new V_(s,l,o);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),j_=l9;var c9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),f9=function(t){c9(e,t);function e(r,n,i,a){var u=t.call(this,r,n)||this;return u.estimatedModuleSize=i,u.count=a,a===void 0&&(u.count=1),u}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,i){if(Math.abs(n-this.getY())<=r&&Math.abs(i-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,i){var a=this.count+1,u=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+i)/a;return new e(u,s,l,a)},e}(se),U_=f9;var d9=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),H_=d9;var ql=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},h9=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Me.TRY_HARDER)!==void 0,n=e!=null&&e.get(Me.PURE_BARCODE)!==void 0,i=this.image,a=i.getHeight(),u=i.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,o=new Int32Array(5),c=s-1;c<a&&!l;c+=s){o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0;for(var f=0,d=0;d<u;d++)if(i.get(d,c))(f&1)===1&&f++,o[f]++;else if(f&1)o[f]++;else if(f===4)if(t.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,d,n);if(h===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>o[2]&&(c+=p-o[2]-s,d=u-1)}else{o[0]=o[2],o[1]=o[3],o[2]=o[4],o[3]=1,o[4]=0,f=3;continue}f=0,o[0]=0,o[1]=0,o[2]=0,o[3]=0,o[4]=0}else o[0]=o[2],o[1]=o[3],o[2]=o[4],o[3]=1,o[4]=0,f=3;else o[++f]++;if(t.foundPatternCross(o)){var h=this.handlePossibleCenter(o,c,u,n);h===!0&&(s=o[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return se.orderBestPatterns(m),new H_(m)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var i=e[n];if(i===0)return!1;r+=i}if(r<7)return!1;var a=r/7,u=a/2;return Math.abs(a-e[0])<u&&Math.abs(a-e[1])<u&&Math.abs(3*a-e[2])<3*u&&Math.abs(a-e[3])<u&&Math.abs(a-e[4])<u},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,i){for(var a=this.getCrossCheckStateCount(),u=0,s=this.image;e>=u&&r>=u&&s.get(r-u,e-u);)a[2]++,u++;if(e<u||r<u)return!1;for(;e>=u&&r>=u&&!s.get(r-u,e-u)&&a[1]<=n;)a[1]++,u++;if(e<u||r<u||a[1]>n)return!1;for(;e>=u&&r>=u&&s.get(r-u,e-u)&&a[0]<=n;)a[0]++,u++;if(a[0]>n)return!1;var l=s.getHeight(),o=s.getWidth();for(u=1;e+u<l&&r+u<o&&s.get(r+u,e+u);)a[2]++,u++;if(e+u>=l||r+u>=o)return!1;for(;e+u<l&&r+u<o&&!s.get(r+u,e+u)&&a[3]<n;)a[3]++,u++;if(e+u>=l||r+u>=o||a[3]>=n)return!1;for(;e+u<l&&r+u<o&&s.get(r+u,e+u)&&a[4]<n;)a[4]++,u++;if(a[4]>=n)return!1;var c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-i)<2*i&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,i){for(var a=this.image,u=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(r,l);)s[2]++,l++;if(l===u)return NaN;for(;l<u&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===u||s[3]>=n)return NaN;for(;l<u&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var o=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(o-i)>=2*i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,i){for(var a=this.image,u=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(l,r);)s[2]++,l++;if(l===u)return NaN;for(;l<u&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===u||s[3]>=n)return NaN;for(;l<u&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var o=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(o-i)>=i?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,i){var a=e[0]+e[1]+e[2]+e[3]+e[4],u=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(u),e[2],a);if(!isNaN(s)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(s),e[2],a),!isNaN(u)&&(!i||this.crossCheckDiagonal(Math.floor(s),Math.floor(u),e[2],a)))){for(var l=a/7,o=!1,c=this.possibleCenters,f=0,d=c.length;f<d;f++){var h=c[f];if(h.aboutEquals(l,s,u)){c[f]=h.combineEstimate(s,u,l),o=!0;break}}if(!o){var p=new U_(u,s,l);c.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var i=null;try{for(var a=ql(this.possibleCenters),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.getCount()>=t.CENTER_QUORUM)if(i==null)i=s;else return this.hasSkipped=!0,Math.floor((Math.abs(i.getX()-s.getX())-Math.abs(i.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,i,a=0,u=0,s=this.possibleCenters.length;try{for(var l=ql(this.possibleCenters),o=l.next();!o.done;o=l.next()){var c=o.value;c.getCount()>=t.CENTER_QUORUM&&(a++,u+=c.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{o&&!o.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var f=u/s,d=0;try{for(var h=ql(this.possibleCenters),p=h.next();!p.done;p=h.next()){var c=p.value;d+=Math.abs(c.getEstimatedModuleSize()-f)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(i=h.return)&&i.call(h)}finally{if(n)throw n.error}}return d<=.05*u},t.prototype.selectBestPatterns=function(){var e,r,n,i,a=this.possibleCenters.length;if(a<3)throw new L;var u=this.possibleCenters,s;if(a>3){var l=0,o=0;try{for(var c=ql(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.getEstimatedModuleSize();l+=h,o+=h*h}}catch(C){e={error:C}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}s=l/a;var p=Math.sqrt(o/a-s*s);u.sort(function(C,j){var z=Math.abs(j.getEstimatedModuleSize()-s),W=Math.abs(C.getEstimatedModuleSize()-s);return z<W?-1:z>W?1:0});for(var m=Math.max(.2*s,p),v=0;v<u.length&&u.length>3;v++){var x=u[v];Math.abs(x.getEstimatedModuleSize()-s)>m&&(u.splice(v,1),v--)}}if(u.length>3){var l=0;try{for(var y=ql(u),_=y.next();!_.done;_=y.next()){var I=_.value;l+=I.getEstimatedModuleSize()}}catch(j){n={error:j}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(n)throw n.error}}s=l/u.length,u.sort(function(j,z){if(z.getCount()===j.getCount()){var W=Math.abs(z.getEstimatedModuleSize()-s),k=Math.abs(j.getEstimatedModuleSize()-s);return W<k?1:W>k?-1:0}else return z.getCount()-j.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),z_=h9;var p9=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Me.NEED_RESULT_POINT_CALLBACK);var r=new z_(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),i=e.getBottomLeft(),a=this.calculateModuleSize(r,n,i);if(a<1)throw new L("No pattern found in proccess finder.");var u=t.computeDimension(r,n,i,a),s=wo.getProvisionalVersionForDimension(u),l=s.getDimensionForVersion()-7,o=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+i.getX(),f=n.getY()-r.getY()+i.getY(),d=1-3/l,h=Math.floor(r.getX()+d*(c-r.getX())),p=Math.floor(r.getY()+d*(f-r.getY())),m=4;m<=16;m<<=1)try{o=this.findAlignmentInRegion(a,h,p,m);break}catch(_){if(!(_ instanceof L))throw _}var v=t.createTransform(r,n,i,o,u),x=t.sampleGrid(this.image,v,u),y;return o===null?y=[i,r,n]:y=[i,r,n,o],new $a(x,y)},t.createTransform=function(e,r,n,i,a){var u=a-3.5,s,l,o,c;return i!==null?(s=i.getX(),l=i.getY(),o=u-3,c=o):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),o=u,c=u),Ul.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,o,c,3.5,u,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var i=Va.getInstance();return i.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,i){var a=Ne.round(se.distance(e,r)/i),u=Ne.round(se.distance(e,n)/i),s=Math.floor((a+u)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new L("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),i=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?i/7:isNaN(i)?n/7:(n+i)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,i){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,i),u=1,s=e-(n-e);s<0?(u=e/(e-s),s=0):s>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(i-r)*u);return u=1,l<0?(u=r/(r-l),l=0):l>=this.image.getHeight()&&(u=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*u),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,i){var a=Math.abs(i-r)>Math.abs(n-e);if(a){var u=e;e=r,r=u,u=n,n=i,i=u}for(var s=Math.abs(n-e),l=Math.abs(i-r),o=-s/2,c=e<n?1:-1,f=r<i?1:-1,d=0,h=n+c,p=e,m=r;p!==h;p+=c){var v=a?m:p,x=a?p:m;if(d===1===this.image.get(v,x)){if(d===2)return Ne.distance(p,m,e,r);d++}if(o+=l,o>0){if(m===i)break;m+=f,o-=s}}return d===2?Ne.distance(n+c,i,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,i){var a=Math.floor(i*e),u=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-u<e*3)throw new L("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),o=Math.min(this.image.getHeight()-1,n+a);if(o-l<e*3)throw new L("Alignment bottom exceeds estimated module size.");var c=new j_(this.image,u,l,s-u,o-l,e,this.resultPointCallback);return c.find()},t}(),G_=p9;var g9=function(){function t(){this.decoder=new $_}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,i;if(r!=null&&r.get(Me.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),i=t.NO_POINTS}else{var u=new G_(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(u.getBits(),r),i=u.getPoints()}n.getOther()instanceof Xd&&n.getOther().applyMirroredCorrection(i);var s=new nt(n.getText(),n.getRawBytes(),void 0,i,ae.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(jt.BYTE_SEGMENTS,l);var o=n.getECLevel();return o!==null&&s.putMetadata(jt.ERROR_CORRECTION_LEVEL,o),n.hasStructuredAppend()&&(s.putMetadata(jt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(jt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new L;var i=this.moduleSize(r,e),a=r[1],u=n[1],s=r[0],l=n[0];if(s>=l||a>=u)throw new L;if(u-a!==l-s&&(l=s+(u-a),l>=e.getWidth()))throw new L;var o=Math.round((l-s+1)/i),c=Math.round((u-a+1)/i);if(o<=0||c<=0)throw new L;if(c!==o)throw new L;var f=Math.floor(i/2);a+=f,s+=f;var d=s+Math.floor((o-1)*i)-l;if(d>0){if(d>f)throw new L;s-=d}var h=a+Math.floor((c-1)*i)-u;if(h>0){if(h>f)throw new L;a-=h}for(var p=new Bt(o,c),m=0;m<c;m++)for(var v=a+Math.floor(m*i),x=0;x<o;x++)e.get(s+Math.floor(x*i),v)&&p.set(x,m);return p},t.moduleSize=function(e,r){for(var n=r.getHeight(),i=r.getWidth(),a=e[0],u=e[1],s=!0,l=0;a<i&&u<n;){if(s!==r.get(a,u)){if(++l===5)break;s=!s}a++,u++}if(a===i||u===n)throw new L;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),Ui=g9;var m9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},y9=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Ne.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var i=new Int32Array(e.length),a=0;try{for(var u=m9(e),s=u.next();!s.done;s=u.next()){var l=s.value;i[a++]=l}}catch(o){r={error:o}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return i},t.getCodeword=function(e){var r=at.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),Le=y9;var v9=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),W_=v9;var b9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},w9=function(){function t(){}return t.detectMultiple=function(e,r,n){var i=e.getBlackMatrix(),a=t.detect(n,i);return a.length||(i=i.clone(),i.rotate180(),a=t.detect(n,i)),new W_(i,a)},t.detect=function(e,r){for(var n,i,a=new Array,u=0,s=0,l=!1;u<r.getHeight();){var o=t.findVertices(r,u,s);if(o[0]==null&&o[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,b9(a)),f=c.next();!f.done;f=c.next()){var d=f.value;d[1]!=null&&(u=Math.trunc(Math.max(u,d[1].getY()))),d[3]!=null&&(u=Math.max(u,Math.trunc(d[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(i=c.return)&&i.call(c)}finally{if(n)throw n.error}}u+=t.ROW_STEP;continue}if(l=!0,a.push(o),!e)break;o[2]!=null?(s=Math.trunc(o[2].getX()),u=Math.trunc(o[2].getY())):(s=Math.trunc(o[4].getX()),u=Math.trunc(o[4].getY()))}return a},t.findVertices=function(e,r,n){var i=e.getHeight(),a=e.getWidth(),u=new Array(8);return t.copyToResult(u,t.findRowsWithPattern(e,i,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),u[4]!=null&&(n=Math.trunc(u[4].getX()),r=Math.trunc(u[4].getY())),t.copyToResult(u,t.findRowsWithPattern(e,i,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),u},t.copyToResult=function(e,r,n){for(var i=0;i<n.length;i++)e[n[i]]=r[i]},t.findRowsWithPattern=function(e,r,n,i,a,u){for(var s=new Array(4),l=!1,o=new Int32Array(u.length);i<r;i+=t.ROW_STEP){var c=t.findGuardPattern(e,a,i,n,!1,u,o);if(c!=null){for(;i>0;){var f=t.findGuardPattern(e,a,--i,n,!1,u,o);if(f!=null)c=f;else{i++;break}}s[0]=new se(c[0],i),s[1]=new se(c[1],i),l=!0;break}}var d=i+1;if(l){for(var h=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var c=t.findGuardPattern(e,f[0],d,n,!1,u,o);if(c!=null&&Math.abs(f[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-c[1])<t.MAX_PATTERN_DRIFT)f=c,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,s[2]=new se(f[0],d),s[3]=new se(f[1],d)}return d-i<t.BARCODE_MIN_HEIGHT&&at.fill(s,null),s},t.findGuardPattern=function(e,r,n,i,a,u,s){at.fillWithin(s,0,s.length,0);for(var l=r,o=0;e.get(l,n)&&l>0&&o++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,f=0,d=u.length,h=a;c<i;c++){var p=e.get(c,n);if(p!==h)s[f]++;else{if(f===d-1){if(t.patternMatchVariance(s,u,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],Pe.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,h=!h}}return f===d-1&&t.patternMatchVariance(s,u,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var i=e.length,a=0,u=0,s=0;s<i;s++)a+=e[s],u+=r[s];if(a<u)return 1/0;var l=a/u;n*=l;for(var o=0,c=0;c<i;c++){var f=e[c],d=r[c]*l,h=f>d?f-d:d-f;if(h>n)return 1/0;o+=h}return o/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),q_=w9;var x9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},_9=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var i=1;i<n&&r[i]===0;)i++;i===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-i),Pe.arraycopy(r,i,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var i=0;try{for(var a=x9(this.coefficients),u=a.next();!u.done;u=a.next()){var s=u.value;i=this.field.add(i,s)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i}for(var l=this.coefficients[0],o=this.coefficients.length,c=1;c<o;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var i=r;r=n,n=i}var a=new Int32Array(n.length),u=n.length-r.length;Pe.arraycopy(n,0,a,0,u);for(var s=u;s<n.length;s++)a[s]=this.field.add(r[s-u],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,i=e.coefficients,a=i.length,u=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],o=0;o<a;o++)u[s+o]=this.field.add(u[s+o],this.field.multiply(l,i[o]));return new t(this.field,u)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),i=0;i<r;i++)n[i]=this.field.multiply(this.coefficients[i],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,i=new Int32Array(n+e),a=0;a<n;a++)i[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,i)},t.prototype.toString=function(){for(var e=new de,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),vi=_9;var E9=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new Vl;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),X_=E9;var T9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I9=function(t){T9(e,t);function e(r,n){var i=t.call(this)||this;i.modulus=r,i.expTable=new Int32Array(r),i.logTable=new Int32Array(r);for(var a=1,u=0;u<r;u++)i.expTable[u]=a,a=a*n%r;for(var u=0;u<r-1;u++)i.logTable[i.expTable[u]]=u;return i.zero=new vi(i,new Int32Array([0])),i.one=new vi(i,new Int32Array([1])),i}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var i=new Int32Array(r+1);return i[0]=n,new vi(this,i)},e.PDF417_GF=new e(Le.NUMBER_OF_CODEWORDS,3),e}(X_),Y_=I9;var A9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},S9=function(){function t(){this.field=Y_.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var i,a,u=new vi(this.field,e),s=new Int32Array(r),l=!1,o=r;o>0;o--){var c=u.evaluateAt(this.field.exp(o));s[r-o]=c,c!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var d=A9(n),h=d.next();!h.done;h=d.next()){var p=h.value,m=this.field.exp(e.length-1-p),v=new vi(this.field,new Int32Array([this.field.subtract(0,m),1]));f=f.multiply(v)}}catch(W){i={error:W}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}for(var x=new vi(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),_=y[0],I=y[1],C=this.findErrorLocations(_),j=this.findErrorMagnitudes(I,_,C),o=0;o<C.length;o++){var z=e.length-1-this.field.log(C[o]);if(z<0)throw it.getChecksumInstance();e[z]=this.field.subtract(e[z],j[o])}return C.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var i=e;e=r,r=i}for(var a=e,u=r,s=this.field.getZero(),l=this.field.getOne();u.getDegree()>=Math.round(n/2);){var o=a,c=s;if(a=u,s=l,a.isZero())throw it.getChecksumInstance();u=o;for(var f=this.field.getZero(),d=a.getCoefficient(a.getDegree()),h=this.field.inverse(d);u.getDegree()>=a.getDegree()&&!u.isZero();){var p=u.getDegree()-a.getDegree(),m=this.field.multiply(u.getCoefficient(u.getDegree()),h);f=f.add(this.field.buildMonomial(p,m)),u=u.subtract(a.multiplyByMonomial(p,m))}l=f.multiply(s).subtract(c).negative()}var v=l.getCoefficient(0);if(v===0)throw it.getChecksumInstance();var x=this.field.inverse(v),y=l.multiply(x),_=u.multiply(x);return[y,_]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),i=0,a=1;a<this.field.getSize()&&i<r;a++)e.evaluateAt(a)===0&&(n[i]=this.field.inverse(a),i++);if(i!==r)throw it.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var i=r.getDegree(),a=new Int32Array(i),u=1;u<=i;u++)a[i-u]=this.field.multiply(u,r.getCoefficient(u));for(var s=new vi(this.field,a),l=n.length,o=new Int32Array(l),u=0;u<l;u++){var c=this.field.inverse(n[u]),f=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(s.evaluateAt(c));o[u]=this.field.multiply(f,d)}return o},t}(),K0=S9;var D9=function(){function t(e,r,n,i,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,i,a)}return t.prototype.constructor_1=function(e,r,n,i,a){var u=r==null||n==null,s=i==null||a==null;if(u&&s)throw new L;u?(r=new se(0,i.getY()),n=new se(0,a.getY())):s&&(i=new se(e.getWidth()-1,r.getY()),a=new se(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=i,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(i.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),i.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var i=this.topLeft,a=this.bottomLeft,u=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,o=Math.trunc(l.getY()-e);o<0&&(o=0);var c=new se(l.getX(),o);n?i=c:u=c}if(r>0){var f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new se(f.getX(),d);n?a=h:s=h}return new t(this.image,i,a,u,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),Xl=D9;var C9=function(){function t(e,r,n,i){this.columnCount=e,this.errorCorrectionLevel=i,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),Z_=C9;var O9=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function i(u,s,l,o,c,f){if(u==="%%")return"%";if(r[++n]!==void 0){u=o?parseInt(o.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(u);break;case"p":h=parseFloat(r[n]).toPrecision(u);break;case"e":h=parseFloat(r[n]).toExponential(u);break;case"x":h=parseInt(r[n]).toString(d||16);break;case"d":h=parseFloat(parseInt(r[n],d||10).toPrecision(u)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(l),m=l&&l[0]+""=="0"?"0":" ";h.length<p;)h=s!==void 0?h+m:m+h;return h}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,i)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Xs=O9;var P9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},M9=function(){function t(e){this.boundingBox=new Xl(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var i=this.imageRowToCodewordIndex(e)-n;if(i>=0&&(r=this.codewords[i],r!=null)||(i=this.imageRowToCodewordIndex(e)+n,i<this.codewords.length&&(r=this.codewords[i],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Xs,i=0;try{for(var a=P9(this.codewords),u=a.next();!u.done;u=a.next()){var s=u.value;if(s==null){n.format("%3d:    |   %n",i++);continue}n.format("%3d: %3d|%3d%n",i++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Yd=M9;var N9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},R9=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},F9=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,i=new Array,a=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>n?(n=h.getValue(),i=[],i.push(h.getKey())):h.getValue()===n&&i.push(h.getKey())};try{for(var u=N9(this.values.entries()),s=u.next();!s.done;s=u.next()){var l=R9(s.value,2),o=l[0],c=l[1];a(o,c)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return Le.toIntArray(i)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Ha=F9;var k9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Q0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L9=function(t){k9(e,t);function e(r,n){var i=t.call(this,r)||this;return i._isLeft=n,i}return e.prototype.setRowNumbers=function(){var r,n;try{for(var i=Q0(this.getCodewords()),a=i.next();!a.done;a=i.next()){var u=a.value;u?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var i=this.getBoundingBox(),a=this._isLeft?i.getTopLeft():i.getTopRight(),u=this._isLeft?i.getBottomLeft():i.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(u.getY())),o=-1,c=1,f=0,d=s;d<l;d++)if(n[d]!=null){var h=n[d],p=h.getRowNumber()-o;if(p===0)f++;else if(p===1)c=Math.max(c,f),f=1,o=h.getRowNumber();else if(p<0||h.getRowNumber()>=r.getRowCount()||p>d)n[d]=null;else{var m=void 0;c>2?m=(c-2)*p:m=p;for(var v=m>=d,x=1;x<=m&&!v;x++)v=n[d-x]!=null;v?n[d]=null:(o=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,i=this.getBarcodeMetadata();if(i==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(i);var a=new Int32Array(i.getRowCount());try{for(var u=Q0(this.getCodewords()),s=u.next();!s.done;s=u.next()){var l=s.value;if(l!=null){var o=l.getRowNumber();if(o>=a.length)continue;a[o]++}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),i=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(i.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),o=-1,c=1,f=0,d=u;d<s;d++)if(l[d]!=null){var h=l[d];h.setRowNumberAsRowIndicatorColumn();var p=h.getRowNumber()-o;p===0?f++:p===1?(c=Math.max(c,f),f=1,o=h.getRowNumber()):h.getRowNumber()>=r.getRowCount()?l[d]=null:(o=h.getRowNumber(),f=1)}},e.prototype.getBarcodeMetadata=function(){var r,n,i=this.getCodewords(),a=new Ha,u=new Ha,s=new Ha,l=new Ha;try{for(var o=Q0(i),c=o.next();!c.done;c=o.next()){var f=c.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:u.setValue(d*3+1);break;case 1:l.setValue(d/3),s.setValue(d%3);break;case 2:a.setValue(d+1);break}}}}catch(m){r={error:m}}finally{try{c&&!c.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}if(a.getValue().length===0||u.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||u.getValue()[0]+s.getValue()[0]<Le.MIN_ROWS_IN_BARCODE||u.getValue()[0]+s.getValue()[0]>Le.MAX_ROWS_IN_BARCODE)return null;var p=new Z_(a.getValue()[0],u.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(i,p),p},e.prototype.removeIncorrectCodewords=function(r,n){for(var i=0;i<r.length;i++){var a=r[i];if(r[i]!=null){var u=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[i]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:u*3+1!==n.getRowCountUpperPart()&&(r[i]=null);break;case 1:(Math.trunc(u/3)!==n.getErrorCorrectionLevel()||u%3!==n.getRowCountLowerPart())&&(r[i]=null);break;case 2:u+1!==n.getColumnCount()&&(r[i]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Yd),J0=L9;var B9=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$9=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Le.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),i=0;i<n.length;i++)n[i]!=null&&(n[i].hasValidRowNumber()||this.adjustRowNumbers(r,i,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var i=1;i<=this.barcodeColumnCount;i++){var a=this.detectionResultColumns[i].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[i].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){var s=this.detectionResultColumns[u].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var i=r[n].getRowNumber(),a=0,u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){var s=this.detectionResultColumns[u].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(i,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var i,a;if(this.detectionResultColumns[e-1]!=null){var u=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var o=new Array(14);o[2]=s[r],o[3]=l[r],r>0&&(o[0]=n[r-1],o[4]=s[r-1],o[5]=l[r-1]),r>1&&(o[8]=n[r-2],o[10]=s[r-2],o[11]=l[r-2]),r<n.length-1&&(o[1]=n[r+1],o[6]=s[r+1],o[7]=l[r+1]),r<n.length-2&&(o[9]=n[r+2],o[12]=s[r+2],o[13]=l[r+2]);try{for(var c=B9(o),f=c.next();!f.done;f=c.next()){var d=f.value;if(t.adjustRowNumber(u,d))return}}catch(h){i={error:h}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(i)throw i.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Xs,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var i=0;i<this.barcodeColumnCount+2;i++){if(this.detectionResultColumns[i]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[i].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),K_=$9;var V9=function(){function t(e,r,n,i){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(i)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Q_=V9;var j9=function(){function t(){}return t.initialize=function(){for(var e=0;e<Le.SYMBOL_TABLE.length;e++)for(var r=Le.SYMBOL_TABLE[e],n=r&1,i=0;i<Le.BARS_IN_MODULE;i++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Le.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Le.BARS_IN_MODULE-i-1]=Math.fround(a/Le.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Ne.sum(e),n=new Int32Array(Le.BARS_IN_MODULE),i=0,a=0,u=0;u<Le.MODULES_IN_CODEWORD;u++){var s=r/(2*Le.MODULES_IN_CODEWORD)+u*r/Le.MODULES_IN_CODEWORD;a+e[i]<=s&&(a+=e[i],i++),n[i]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Le.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var i=0;i<e[n];i++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Ne.sum(e),n=new Array(Le.BARS_IN_MODULE);if(r>1)for(var i=0;i<n.length;i++)n[i]=Math.fround(e[i]/r);var a=jl.MAX_VALUE,u=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,o=t.RATIOS_TABLE[s],c=0;c<Le.BARS_IN_MODULE;c++){var f=Math.fround(o[c]-n[c]);if(l+=Math.fround(f*f),l>=a)break}l<a&&(a=l,u=Le.SYMBOL_TABLE[s])}return u},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Le.SYMBOL_TABLE.length).map(function(e){return e=new Array(Le.BARS_IN_MODULE)}),t}(),J_=j9;var U9=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),em=U9;var H9=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),tm=H9;var z9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),G9=function(t){z9(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Ot),eE=G9;var W9=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new eE;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new js;if(n===0)return;for(var i=0;i<n;i++)this.write(e[r+i])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),tE=W9;var q9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),X9=function(t){q9(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Ot),rE=X9;var Y9=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Z9=function(t){Y9(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new re("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,i=n<<1;if(i-r<0&&(i=r),i<0){if(r<0)throw new rE;i=ge.MAX_VALUE}this.buf=at.copyOfUint8Array(this.buf,i)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,i){if(n<0||n>r.length||i<0||n+i-r.length>0)throw new js;this.ensureCapacity(this.count+i),Pe.arraycopy(r,n,this.buf,this.count,i),this.count+=i},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return at.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(tE),nE=Z9;var $t=function(t){return t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT",t}($t||{});function oE(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Zd;function Hi(t){if(typeof Zd>"u"&&(Zd=oE()),Zd===null)throw new Error("BigInt is not supported!");return Zd(t)}function K9(){var t=[];t[0]=Hi(1);var e=Hi(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var Q9=function(){function t(){}return t.decode=function(e,r){var n=new de(""),i=Lt.ISO8859_1;n.enableDecoding(i);for(var a=1,u=e[a++],s=new em;a<e[0];){switch(u){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(u,e,i,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:var l=Lt.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new K;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)u=e[a++];else throw K.getFormatInstance()}if(n.length()===0)throw K.getFormatInstance();var o=new pi(null,n.toString(),null,r);return o.setOther(s),o},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw K.getFormatInstance();for(var i=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)i[a]=e[r];n.setSegmentIndex(ge.parseInt(t.decodeBase900toBase10(i,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var u=new de;r=t.textCompaction(e,r,u),n.setFileId(u.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new de;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var o=new de;r=t.textCompaction(e,r+1,o),n.setSender(o.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new de;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new de;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(ge.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new de;r=t.numericCompaction(e,r+1,d),n.setTimestamp(tm.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new de;r=t.numericCompaction(e,r+1,h),n.setChecksum(ge.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new de;r=t.numericCompaction(e,r+1,p),n.setFileSize(tm.parseLong(p.toString()));break;default:throw K.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(s!==-1){var m=r-s;n.isLastSegment()&&m--,n.setOptionalData(at.copyOfRange(e,s,s+m))}return r},t.textCompaction=function(e,r,n){for(var i=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),u=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)i[u]=l/30,i[u+1]=l%30,u+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:i[u++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i[u]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[u]=l,u++;break}}return t.decodeTextCompaction(i,a,u,n),r},t.decodeTextCompaction=function(e,r,n,i){for(var a=$t.ALPHA,u=$t.ALPHA,s=0;s<n;){var l=e[s],o="";switch(a){case $t.ALPHA:if(l<26)o=String.fromCharCode(65+l);else switch(l){case 26:o=" ";break;case t.LL:a=$t.LOWER;break;case t.ML:a=$t.MIXED;break;case t.PS:u=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.LOWER:if(l<26)o=String.fromCharCode(97+l);else switch(l){case 26:o=" ";break;case t.AS:u=a,a=$t.ALPHA_SHIFT;break;case t.ML:a=$t.MIXED;break;case t.PS:u=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.MIXED:if(l<t.PL)o=t.MIXED_CHARS[l];else switch(l){case t.PL:a=$t.PUNCT;break;case 26:o=" ";break;case t.LL:a=$t.LOWER;break;case t.AL:a=$t.ALPHA;break;case t.PS:u=a,a=$t.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT:if(l<t.PAL)o=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=$t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.ALPHA_SHIFT:if(a=u,l<26)o=String.fromCharCode(65+l);else switch(l){case 26:o=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break;case $t.PUNCT_SHIFT:if(a=u,l<t.PAL)o=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=$t.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:i.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=$t.ALPHA;break}break}o!==""&&i.append(o),s++}},t.byteCompaction=function(e,r,n,i,a){var u=new nE,s=0,l=0,o=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),f=r[i++];i<r[0]&&!o;)switch(c[s++]=f,l=900*l+f,f=r[i++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,o=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)u.write(Number(Hi(l)>>Hi(8*(5-d))));l=0,s=0}break}i===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=f);for(var h=0;h<s;h++)u.write(c[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;i<r[0]&&!o;){var p=r[i++];if(p<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:i--,o=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)u.write(Number(Hi(l)>>Hi(8*(5-d))));l=0,s=0}}break}return a.append(Cr.decode(u.toByteArray(),n)),i},t.numericCompaction=function(e,r,n){for(var i=0,a=!1,u=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)u[i]=s,i++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(i%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&i>0&&(n.append(t.decodeBase900toBase10(u,i)),i=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Hi(0),i=0;i<r;i++)n+=t.EXP900[r-i-1]*Hi(e[i]);var a=n.toString();if(a.charAt(0)!=="1")throw new K;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=oE()?K9():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),rm=Q9;var Yl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},J9=function(){function t(){}return t.decode=function(e,r,n,i,a,u,s){for(var l=new Xl(e,r,n,i,a),o=null,c=null,f,d=!0;;d=!1){if(r!=null&&(o=t.getRowIndicatorColumn(e,l,r,!0,u,s)),i!=null&&(c=t.getRowIndicatorColumn(e,l,i,!1,u,s)),f=t.merge(o,c),f==null)throw L.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}f.setBoundingBox(l);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,o),f.setDetectionResultColumn(p,c);for(var m=o!=null,v=1;v<=p;v++){var x=m?v:p-v;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===p?y=new J0(l,x===0):y=new Yd(l),f.setDetectionResultColumn(x,y);for(var _=-1,I=_,C=l.getMinY();C<=l.getMaxY();C++){if(_=t.getStartColumn(f,x,C,m),_<0||_>l.getMaxX()){if(I===-1)continue;_=I}var j=t.detectCodeword(e,l.getMinX(),l.getMaxX(),m,_,C,u,s);j!=null&&(y.setCodeword(C,j),I=_,u=Math.min(u,j.getWidth()),s=Math.max(s,j.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var i=Xl.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new K_(n,i)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var i=e.getRowHeights();if(i==null)return null;var a=t.getMax(i),u=0;try{for(var s=Yl(i),l=s.next();!l.done;l=s.next()){var o=l.value;if(u+=a-o,o>0)break}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),f=0;u>0&&c[f]==null;f++)u--;for(var d=0,f=i.length-1;f>=0&&(d+=a-i[f],!(i[f]>0));f--);for(var f=c.length-1;d>0&&c[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(u,d,e.isLeft())},t.getMax=function(e){var r,n,i=-1;try{for(var a=Yl(e),u=a.next();!u.done;u=a.next()){var s=u.value;i=Math.max(i,s)}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return i},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var i;return r==null||(i=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==i.getColumnCount()&&n.getErrorCorrectionLevel()!==i.getErrorCorrectionLevel()&&n.getRowCount()!==i.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,i,a,u){for(var s=new J0(r,i),l=0;l<2;l++)for(var o=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=o){var d=t.detectCodeword(e,0,e.getWidth(),i,c,f,a,u);d!=null&&(s.setCodeword(f,d),i?c=d.getStartX():c=d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],i=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(i.length===0){if(a<1||a>Le.MAX_CODEWORDS_IN_BARCODE)throw L.getNotFoundInstance();n.setValue(a)}else i[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,i=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],u=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var o=r[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;o.length===0?n.push(c):o.length===1?i[c]=o[0]:(u.push(c),a.push(o))}for(var f=new Array(a.length),d=0;d<f.length;d++)f[d]=a[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),i,Le.toIntArray(n),Le.toIntArray(u),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,i,a){for(var u=new Int32Array(i.length),s=100;s-- >0;){for(var l=0;l<u.length;l++)r[i[l]]=a[l][u[l]];try{return t.decodeCodewords(r,e,n)}catch(c){var o=c instanceof it;if(!o)throw c}if(u.length===0)throw it.getChecksumInstance();for(var l=0;l<u.length;l++)if(u[l]<a[l].length-1){u[l]++;break}else if(u[l]=0,l===u.length-1)throw it.getChecksumInstance()}throw it.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,i,a,u=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<u.length;s++)for(var l=0;l<u[s].length;l++)u[s][l]=new Ha;var o=0;try{for(var c=Yl(e.getDetectionResultColumns()),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)try{for(var h=(i=void 0,Yl(d.getCodewords())),p=h.next();!p.done;p=h.next()){var m=p.value;if(m!=null){var v=m.getRowNumber();if(v>=0){if(v>=u.length)continue;u[v][o].setValue(m.getValue())}}}}catch(x){i={error:x}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(i)throw i.error}}o++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,i){var a,u,s=i?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return i?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return i?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return i?l.getEndX():l.getStartX();for(var o=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var c=(a=void 0,Yl(e.getDetectionResultColumn(r).getCodewords())),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)return(i?d.getEndX():d.getStartX())+s*o*(d.getEndX()-d.getStartX())}}catch(h){a={error:h}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}o++}return i?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,i,a,u,s,l){a=t.adjustCodewordStartColumn(e,r,n,i,a,u);var o=t.getModuleBitCount(e,r,n,i,a,u);if(o==null)return null;var c,f=Ne.sum(o);if(i)c=a+f;else{for(var d=0;d<o.length/2;d++){var h=o[d];o[d]=o[o.length-1-d],o[o.length-1-d]=h}c=a,a=c-f}if(!t.checkCodewordSkew(f,s,l))return null;var p=J_.getDecodedValue(o),m=Le.getCodeword(p);return m===-1?null:new Q_(a,c,t.getCodewordBucketNumber(p),m)},t.getModuleBitCount=function(e,r,n,i,a,u){for(var s=a,l=new Int32Array(8),o=0,c=i?1:-1,f=i;(i?s<n:s>=r)&&o<l.length;)e.get(s,u)===f?(l[o]++,s+=c):(o++,f=!f);return o===l.length||s===(i?n:r)&&o===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,i,a,u){for(var s=a,l=i?-1:1,o=0;o<2;o++){for(;(i?s>=r:s<n)&&i===e.get(s,u);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,i=!i}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw K.getFormatInstance();var i=1<<r+1,a=t.correctErrors(e,n,i);t.verifyCodewordCount(e,i);var u=rm.decode(e,""+r);return u.setErrorsCorrected(a),u.setErasures(n.length),u},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw it.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw K.getFormatInstance();var n=e[0];if(n>e.length)throw K.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw K.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,i=r.length-1;!((e&1)!==n&&(n=e&1,i--,i<0));)r[i]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Xs,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var i=0;i<e[n].length;i++){var a=e[n][i];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new K0,t}(),iE=J9;var ej=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},tj=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw L.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof K||n instanceof it?L.getNotFoundInstance():n}},t.decode=function(e,r,n){var i,a,u=new Array,s=q_.detectMultiple(e,r,n);try{for(var l=ej(s.getPoints()),o=l.next();!o.done;o=l.next()){var c=o.value,f=iE.decode(s.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new nt(f.getText(),f.getRawBytes(),void 0,c,ae.PDF_417);d.putMetadata(jt.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(jt.PDF417_EXTRA_METADATA,h),u.push(d)}}catch(p){i={error:p}}finally{try{o&&!o.done&&(a=l.return)&&a.call(l)}finally{if(i)throw i.error}}return u.map(function(p){return p})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?ge.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),zi=tj;var rj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nj=function(t){rj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Ot),Kd=nj;var aE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},oj=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Me.TRY_HARDER)!==void 0,n=e==null?null:e.get(Me.POSSIBLE_FORMATS),i=new Array;if(n!=null){var a=n.some(function(u){return u===ae.UPC_A||u===ae.UPC_E||u===ae.EAN_13||u===ae.EAN_8||u===ae.CODABAR||u===ae.CODE_39||u===ae.CODE_93||u===ae.CODE_128||u===ae.ITF||u===ae.RSS_14||u===ae.RSS_EXPANDED});a&&!r&&i.push(new jo(e)),n.includes(ae.QR_CODE)&&i.push(new Ui),n.includes(ae.DATA_MATRIX)&&i.push(new ji),n.includes(ae.AZTEC)&&i.push(new ki),n.includes(ae.PDF_417)&&i.push(new zi),a&&r&&i.push(new jo(e))}i.length===0&&(r||i.push(new jo(e)),i.push(new Ui),i.push(new ji),i.push(new ki),i.push(new zi),r&&i.push(new jo(e))),this.readers=i},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=aE(this.readers),i=n.next();!i.done;i=n.next()){var a=i.value;a.reset()}}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new Kd("No readers where selected, nothing can be read.");try{for(var i=aE(this.readers),a=i.next();!a.done;a=i.next()){var u=a.value;try{return u.decode(e,this.hints)}catch(s){if(s instanceof Kd)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}throw new L("No MultiFormat Readers were able to detect the code.")},t}(),Zl=oj;var ij=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Efe=function(t){ij(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var i=this,a=new Zl;return a.setHints(r),i=t.call(this,a,n)||this,i}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(Un);var aj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Sfe=function(t){aj(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new zi,r)||this}return e}(Un);var sj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Pfe=function(t){sj(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Ui,r)||this}return e}(Un);var sE=function(t){return t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40",t}(sE||{}),Oe=sE;var uj=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Hn(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],i=this.field,a=r.length;a<=e;a++){var u=n.multiply(new Hn(i,Int32Array.from([1,i.exp(a-1+i.getGeneratorBase())])));r.push(u),n=u}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new re("No error correction bytes");var n=e.length-r;if(n<=0)throw new re("No data bytes provided");var i=this.buildGenerator(r),a=new Int32Array(n);Pe.arraycopy(e,0,a,0,n);var u=new Hn(this.field,a);u=u.multiplyByMonomial(r,1);for(var s=u.divide(i)[1],l=s.getCoefficients(),o=r-l.length,c=0;c<o;c++)e[n+c]=0;Pe.arraycopy(l,0,e,n+o,l.length)},t}(),Kl=uj;var lj=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a-1;u++)for(var s=n[u],l=0;l<i-1;l++){var o=s[l];o===s[l+1]&&o===n[u+1][l]&&o===n[u+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var s=0;s<i;s++){var l=n[u];s+6<i&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,u+6<a&&n[u][s]===1&&n[u+1][s]===0&&n[u+2][s]===1&&n[u+3][s]===1&&n[u+4][s]===1&&n[u+5][s]===0&&n[u+6][s]===1&&(t.isWhiteVertical(n,s,u-4,u)||t.isWhiteVertical(n,s,u+7,u+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var i=r;i<n;i++)if(e[i]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,i){n=Math.max(n,0),i=Math.min(i,e.length);for(var a=n;a<i;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),i=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var s=n[u],l=0;l<i;l++)s[l]===1&&r++;var o=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-o)*10/o);return c*t.N4},t.getDataMaskBit=function(e,r,n){var i,a;switch(e){case 0:i=n+r&1;break;case 1:i=n&1;break;case 2:i=r%3;break;case 3:i=(n+r)%3;break;case 4:i=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,i=(a&1)+a%3;break;case 6:a=n*r,i=(a&1)+a%3&1;break;case 7:a=n*r,i=a%3+(n+r&1)&1;break;default:throw new re("Invalid mask pattern: "+e)}return i===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,i=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),u=e.getArray(),s=0;s<i;s++){for(var l=0,o=-1,c=0;c<a;c++){var f=r?u[s][c]:u[c][s];f===o?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,o=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),Gi=lj;var cj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},fj=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),i=0;i!==r;i++)n[i]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var i=cj(this.bytes),a=i.next();!a.done;a=i.next()){var u=a.value;at.fill(u,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,i=this.height;n<i;++n)for(var a=this.bytes[n],u=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==u[s])return!1;return!0},t.prototype.toString=function(){for(var e=new de,r=0,n=this.height;r<n;++r){for(var i=this.bytes[r],a=0,u=this.width;a<u;++a)switch(i[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Ql=fj;var dj=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new de;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),Ys=dj;var hj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pj=function(t){hj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Ot),Rt=pj;var gj=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,i,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,i,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,i,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var i=new kt;t.makeTypeInfoBits(e,r,i);for(var a=0,u=i.getSize();a<u;++a){var s=i.get(i.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],o=l[0],c=l[1];if(n.setBoolean(o,c,s),a<8){var f=n.getWidth()-a-1,d=8;n.setBoolean(f,d,s)}else{var f=8,d=n.getHeight()-7+(a-8);n.setBoolean(f,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new kt;t.makeVersionInfoBits(e,n);for(var i=6*3-1,a=0;a<6;++a)for(var u=0;u<3;++u){var s=n.get(i);i--,r.setBoolean(a,r.getHeight()-11+u,s),r.setBoolean(r.getHeight()-11+u,a,s)}}},t.embedDataBits=function(e,r,n){for(var i=0,a=-1,u=n.getWidth()-1,s=n.getHeight()-1;u>0;){for(u===6&&(u-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var o=u-l;if(t.isEmpty(n.get(o,s))){var c=void 0;i<e.getSize()?(c=e.get(i),++i):c=!1,r!==255&&Gi.getDataMaskBit(r,o,s)&&(c=!c),n.setBoolean(o,s,c)}}s+=a}a=-a,s+=a,u-=2}if(i!==e.getSize())throw new Rt("Not all bits consumed: "+i+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ge.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new re("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!Ys.isValidMaskPattern(r))throw new Rt("Invalid mask pattern");var i=e.getBits()<<3|r;n.appendBits(i,5);var a=t.calculateBCHCode(i,t.TYPE_INFO_POLY);n.appendBits(a,10);var u=new kt;if(u.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(u),n.getSize()!==15)throw new Rt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Rt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Rt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var i=0;i<8;++i){if(!t.isEmpty(n.get(e+i,r)))throw new Rt;n.setNumber(e+i,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var i=0;i<7;++i){if(!t.isEmpty(n.get(e,r+i)))throw new Rt;n.setNumber(e,r+i,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var i=0;i<5;++i)for(var a=t.POSITION_ADJUSTMENT_PATTERN[i],u=0;u<5;++u)n.setNumber(e+u,r+i,a[u])},t.embedPositionDetectionPattern=function(e,r,n){for(var i=0;i<7;++i)for(var a=t.POSITION_DETECTION_PATTERN[i],u=0;u<7;++u)n.setNumber(e+u,r+i,a[u])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var i=7;t.embedVerticalSeparationPattern(i,0,e),t.embedVerticalSeparationPattern(e.getHeight()-i-1,0,e),t.embedVerticalSeparationPattern(i,e.getHeight()-i,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,i=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,u=i.length;a!==u;a++){var s=i[a];if(s>=0)for(var l=0;l!==u;l++){var o=i[l];o>=0&&t.isEmpty(r.get(o,s))&&t.embedPositionAdjustmentPattern(o-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Qd=gj;var mj=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),uE=mj;var lE=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yj=function(){function t(){}return t.calculateMaskPenalty=function(e){return Gi.applyMaskPenaltyRule1(e)+Gi.applyMaskPenaltyRule2(e)+Gi.applyMaskPenaltyRule3(e)+Gi.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var i=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Oe.CHARACTER_SET)!==void 0;a&&(i=n.get(Oe.CHARACTER_SET).toString());var u=this.chooseMode(e,i),s=new kt;if(u===Nt.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==i)){var l=Lt.getCharacterSetECIByName(i);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(u,s);var o=new kt;this.appendBytes(e,u,o,i);var c;if(n!==null&&n.get(Oe.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(Oe.QR_VERSION).toString(),10);c=wo.getVersionForNumber(f);var d=this.calculateBitsNeeded(u,s,o,c);if(!this.willFit(d,c,r))throw new Rt("Data too big for requested version")}else c=this.recommendVersion(r,u,s,o);var h=new kt;h.appendBitArray(s);var p=u===Nt.BYTE?o.getSizeInBytes():e.length;this.appendLengthInfo(p,c,u,h),h.appendBitArray(o);var m=c.getECBlocksForLevel(r),v=c.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(v,h);var x=this.interleaveWithECBytes(h,c.getTotalCodewords(),v,m.getNumBlocks()),y=new Ys;y.setECLevel(r),y.setMode(u),y.setVersion(c);var _=c.getDimensionForVersion(),I=new Ql(_,_),C=this.chooseMaskPattern(x,r,c,I);return y.setMaskPattern(C),Qd.buildMatrix(x,r,c,C,I),y.setMatrix(I),y},t.recommendVersion=function(e,r,n,i){var a=this.calculateBitsNeeded(r,n,i,wo.getVersionForNumber(1)),u=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,i,u);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,i){return r.getSize()+e.getCharacterCountBits(i)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Lt.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return Nt.KANJI;for(var n=!1,i=!1,a=0,u=e.length;a<u;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)i=!0;else return Nt.BYTE}return i?Nt.ALPHANUMERIC:n?Nt.NUMERIC:Nt.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Cr.encode(e,Lt.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var i=0;i<n;i+=2){var a=r[i]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,i){for(var a=Number.MAX_SAFE_INTEGER,u=-1,s=0;s<Ys.NUM_MASK_PATTERNS;s++){Qd.buildMatrix(e,r,n,s,i);var l=this.calculateMaskPenalty(i);l<a&&(a=l,u=s)}return u},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var i=wo.getVersionForNumber(n);if(t.willFit(e,i,r))return i}throw new Rt("Data too big")},t.willFit=function(e,r,n){var i=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),u=a.getTotalECCodewords(),s=i-u,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Rt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var i=0;i<4&&r.getSize()<n;++i)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var i=a;i<8;i++)r.appendBit(!1);for(var u=e-r.getSizeInBytes(),i=0;i<u;++i)r.appendBits(i&1?17:236,8);if(r.getSize()!==n)throw new Rt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,i,a,u){if(i>=n)throw new Rt("Block ID too large");var s=e%n,l=n-s,o=Math.floor(e/n),c=o+1,f=Math.floor(r/n),d=f+1,h=o-f,p=c-d;if(h!==p)throw new Rt("EC bytes mismatch");if(n!==l+s)throw new Rt("RS blocks mismatch");if(e!==(f+h)*l+(d+p)*s)throw new Rt("Total bytes mismatch");i<l?(a[0]=f,u[0]=h):(a[0]=d,u[0]=p)},t.interleaveWithECBytes=function(e,r,n,i){var a,u,s,l;if(e.getSizeInBytes()!==n)throw new Rt("Number of bits and data bytes does not match");for(var o=0,c=0,f=0,d=new Array,h=0;h<i;++h){var p=new Int32Array(1),m=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,i,h,p,m);var v=p[0],x=new Uint8Array(v);e.toBytes(8*o,x,0,v);var y=t.generateECBytes(x,m[0]);d.push(new uE(x,y)),c=Math.max(c,v),f=Math.max(f,y.length),o+=p[0]}if(n!==o)throw new Rt("Data bytes does not match offset");for(var _=new kt,h=0;h<c;++h)try{for(var I=(a=void 0,lE(d)),C=I.next();!C.done;C=I.next()){var j=C.value,x=j.getDataBytes();h<x.length&&_.appendBits(x[h],8)}}catch(X){a={error:X}}finally{try{C&&!C.done&&(u=I.return)&&u.call(I)}finally{if(a)throw a.error}}for(var h=0;h<f;++h)try{for(var z=(s=void 0,lE(d)),W=z.next();!W.done;W=z.next()){var j=W.value,y=j.getErrorCorrectionBytes();h<y.length&&_.appendBits(y[h],8)}}catch(X){s={error:X}}finally{try{W&&!W.done&&(l=z.return)&&l.call(z)}finally{if(s)throw s.error}}if(r!==_.getSizeInBytes())throw new Rt("Interleaving error: "+r+" and "+_.getSizeInBytes()+" differ.");return _},t.generateECBytes=function(e,r){for(var n=e.length,i=new Int32Array(n+r),a=0;a<n;a++)i[a]=e[a]&255;new Kl(sr.QR_CODE_FIELD_256).encode(i,r);for(var u=new Uint8Array(r),a=0;a<r;a++)u[a]=i[n+a];return u},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,i){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new Rt(e+" is bigger than "+((1<<a)-1));i.appendBits(e,a)},t.appendBytes=function(e,r,n,i){switch(r){case Nt.NUMERIC:t.appendNumericBytes(e,n);break;case Nt.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case Nt.BYTE:t.append8BitBytes(e,n,i);break;case Nt.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Rt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getDigit(e.charAt(i));if(i+2<n){var u=t.getDigit(e.charAt(i+1)),s=t.getDigit(e.charAt(i+2));r.appendBits(a*100+u*10+s,10),i+=3}else if(i+1<n){var u=t.getDigit(e.charAt(i+1));r.appendBits(a*10+u,7),i+=2}else r.appendBits(a,4),i++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,i=0;i<n;){var a=t.getAlphanumericCode(e.charCodeAt(i));if(a===-1)throw new Rt;if(i+1<n){var u=t.getAlphanumericCode(e.charCodeAt(i+1));if(u===-1)throw new Rt;r.appendBits(a*45+u,11),i+=2}else r.appendBits(a,6),i++}},t.append8BitBytes=function(e,r,n){var i;try{i=Cr.encode(e,n)}catch(l){throw new Rt(l)}for(var a=0,u=i.length;a!==u;a++){var s=i[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Cr.encode(e,Lt.SJIS)}catch(f){throw new Rt(f)}for(var i=n.length,a=0;a<i;a+=2){var u=n[a]&255,s=n[a+1]&255,l=u<<8&4294967295|s,o=-1;if(l>=33088&&l<=40956?o=l-33088:l>=57408&&l<=60351&&(o=l-49472),o===-1)throw new Rt("Invalid byte sequence");var c=(o>>8)*192+(o&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(Nt.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Lt.UTF8.getName(),t}(),bi=yj;var xde=function(){function t(){}return t.prototype.write=function(e,r,n,i){if(i===void 0&&(i=null),e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=ln.L,u=t.QUIET_ZONE_SIZE;i!==null&&(i.get(Oe.ERROR_CORRECTION)!==void 0&&(a=ln.fromString(i.get(Oe.ERROR_CORRECTION).toString())),i.get(Oe.MARGIN)!==void 0&&(u=Number.parseInt(i.get(Oe.MARGIN).toString(),10)));var s=bi.encode(e,a,i);return this.renderResult(s,r,n,u)},t.prototype.writeToDom=function(e,r,n,i,a){a===void 0&&(a=null),typeof e=="string"&&(e=document.querySelector(e));var u=this.write(r,n,i,a);e&&e.appendChild(u)},t.prototype.renderResult=function(e,r,n,i){var a=e.getMatrix();if(a===null)throw new mr;for(var u=a.getWidth(),s=a.getHeight(),l=u+i*2,o=s+i*2,c=Math.max(r,l),f=Math.max(n,o),d=Math.min(Math.floor(c/l),Math.floor(f/o)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)if(a.get(y,v)===1){var I=this.createSvgRectElement(_,x,d,d);m.appendChild(I)}return m},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",r.toString()),n},t.prototype.createSvgRectElement=function(e,r,n,i){var a=document.createElementNS(t.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",i.toString()),a.setAttributeNS(null,"fill","#000000"),a},t.QUIET_ZONE_SIZE=4,t.SVG_NS="http://www.w3.org/2000/svg",t}();var vj=function(){function t(){}return t.prototype.encode=function(e,r,n,i,a){if(e.length===0)throw new re("Found empty contents");if(r!==ae.QR_CODE)throw new re("Can only encode QR_CODE, but got "+r);if(n<0||i<0)throw new re("Requested dimensions are too small: "+n+"x"+i);var u=ln.L,s=t.QUIET_ZONE_SIZE;a!==null&&(a.get(Oe.ERROR_CORRECTION)!==void 0&&(u=ln.fromString(a.get(Oe.ERROR_CORRECTION).toString())),a.get(Oe.MARGIN)!==void 0&&(s=Number.parseInt(a.get(Oe.MARGIN).toString(),10)));var l=bi.encode(e,u,a);return t.renderResult(l,n,i,s)},t.renderResult=function(e,r,n,i){var a=e.getMatrix();if(a===null)throw new mr;for(var u=a.getWidth(),s=a.getHeight(),l=u+i*2,o=s+i*2,c=Math.max(r,l),f=Math.max(n,o),d=Math.min(Math.floor(c/l),Math.floor(f/o)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=new Bt(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)a.get(y,v)===1&&m.setRegion(_,x,d,d);return m},t.QUIET_ZONE_SIZE=4,t}(),nm=vj;var qde=function(){function t(){}return t.prototype.encode=function(e,r,n,i,a){var u;switch(r){case ae.QR_CODE:u=new nm;break;default:throw new re("No encoder available for format "+r)}return u.encode(e,r,n,i,a)},t}();var bj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Jde=function(t){bj(e,t);function e(r,n,i,a,u,s,l,o){var c=t.call(this,s,l)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=i,c.left=a,c.top=u,a+s>n||u+l>i)throw new re("Crop rectangle does not fit within image data.");return o&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.yuvData,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var i=r*n,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.yuvData,u,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;Pe.arraycopy(this.yuvData,u,a,l,r),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,i,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,i=new Int32Array(r*n),a=this.yuvData,u=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,o=0;o<r;o++){var c=a[u+o*e.THUMBNAIL_SCALE_FACTOR]&255;i[l+o]=4278190080|c*65793}u+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return i},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var i=this.yuvData,a=0,u=this.top*this.dataWidth+this.left;a<n;a++,u+=this.dataWidth)for(var s=u+r/2,l=u,o=u+r-1;l<s;l++,o--){var c=i[l];i[l]=i[o],i[o]=c}},e.prototype.invert=function(){return new hi(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(bo);var wj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ahe=function(t){wj(e,t);function e(r,n,i,a,u,s,l){var o=t.call(this,n,i)||this;if(o.dataWidth=a,o.dataHeight=u,o.left=s,o.top=l,r.BYTES_PER_ELEMENT===4){for(var c=n*i,f=new Uint8ClampedArray(c),d=0;d<c;d++){var h=r[d],p=h>>16&255,m=h>>7&510,v=h&255;f[d]=(p+m+v)/4&255}o.luminances=f}else o.luminances=r;if(a===void 0&&(o.dataWidth=n),u===void 0&&(o.dataHeight=i),s===void 0&&(o.left=0),l===void 0&&(o.top=0),o.left+n>o.dataWidth||o.top+i>o.dataHeight)throw new re("Crop rectangle does not fit within image data.");return o}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth();(n==null||n.length<i)&&(n=new Uint8ClampedArray(i));var a=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.luminances,a,n,0,i),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var i=r*n,a=new Uint8ClampedArray(i),u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.luminances,u,a,0,i),a;for(var s=0;s<n;s++){var l=s*r;Pe.arraycopy(this.luminances,u,a,l,r),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return new e(this.luminances,i,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new hi(this)},e}(bo);var xj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),_j=function(t){xj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Lt),za=_j;var Ej=function(){function t(){}return t.ISO_8859_1=Lt.ISO8859_1,t}(),Jl=Ej;var Tj=function(){function t(e,r,n){this.codewords=e,this.numcols=r,this.numrows=n,this.bits=new Uint8Array(r*n),at.fill(this.bits,2)}return t.prototype.getNumrows=function(){return this.numrows},t.prototype.getNumcols=function(){return this.numcols},t.prototype.getBits=function(){return this.bits},t.prototype.getBit=function(e,r){return this.bits[r*this.numcols+e]===1},t.prototype.setBit=function(e,r,n){this.bits[r*this.numcols+e]=n?1:0},t.prototype.noBit=function(e,r){return this.bits[r*this.numcols+e]===2},t.prototype.place=function(){var e=0,r=4,n=0;do{r===this.numrows&&n===0&&this.corner1(e++),r===this.numrows-2&&n===0&&this.numcols%4!==0&&this.corner2(e++),r===this.numrows-2&&n===0&&this.numcols%8===4&&this.corner3(e++),r===this.numrows+4&&n===2&&this.numcols%8===0&&this.corner4(e++);do r<this.numrows&&n>=0&&this.noBit(n,r)&&this.utah(r,n,e++),r-=2,n+=2;while(r>=0&&n<this.numcols);r++,n+=3;do r>=0&&n<this.numcols&&this.noBit(n,r)&&this.utah(r,n,e++),r+=2,n-=2;while(r<this.numrows&&n>=0);r+=3,n++}while(r<this.numrows||n<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},t.prototype.module=function(e,r,n,i){e<0&&(e+=this.numrows,r+=4-(this.numrows+4)%8),r<0&&(r+=this.numcols,e+=4-(this.numcols+4)%8);var a=this.codewords.charCodeAt(n);a&=1<<8-i,this.setBit(r,e,a!==0)},t.prototype.utah=function(e,r,n){this.module(e-2,r-2,n,1),this.module(e-2,r-1,n,2),this.module(e-1,r-2,n,3),this.module(e-1,r-1,n,4),this.module(e-1,r,n,5),this.module(e,r-2,n,6),this.module(e,r-1,n,7),this.module(e,r,n,8)},t.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},t.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},t.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},t.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},t}(),Jd=Tj;var om,im=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],cE=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],Ij=301,Aj=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=Ij);return{LOG:t,ALOG:e}},ec=(om=Aj([],[]),om.LOG),am=om.ALOG;var sm=129,eh=230,fE=231,dE=235,hE=236,pE=237,gE=238,mE=239,yE=240,th=254,vE=254,Zs="[)>05",Ks="[)>06",Qs="",Ke=0,br=1,Lr=2,ur=3,yr=4,Or=5;var Sj=function(){function t(){}return t.encodeECC200=function(e,r){if(e.length!==r.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var n=new de;n.append(e);var i=r.getInterleavedBlockCount();if(i===1){var a=this.createECCBlock(e,r.getErrorCodewords());n.append(a)}else{for(var u=[],s=[],l=0;l<i;l++)u[l]=r.getDataLengthForInterleavedBlock(l+1),s[l]=r.getErrorLengthForInterleavedBlock(l+1);for(var o=0;o<i;o++){for(var c=new de,f=o;f<r.getDataCapacity();f+=i)c.append(e.charAt(f));for(var a=this.createECCBlock(c.toString(),s[o]),d=0,h=o;h<s[o]*i;h+=i)n.setCharAt(r.getDataCapacity()+h,a.charAt(d++))}}return n.toString()},t.createECCBlock=function(e,r){for(var n=-1,i=0;i<im.length;i++)if(im[i]===r){n=i;break}if(n<0)throw new Error("Illegal number of error correction codewords specified: "+r);for(var a=cE[n],u=[],i=0;i<r;i++)u[i]=0;for(var i=0;i<e.length;i++){for(var s=u[r-1]^e.charAt(i).charCodeAt(0),l=r-1;l>0;l--)s!==0&&a[l]!==0?u[l]=u[l-1]^am[(ec[s]+ec[a[l]])%255]:u[l]=u[l-1];s!==0&&a[0]!==0?u[0]=am[(ec[s]+ec[a[0]])%255]:u[0]=0}for(var o=[],i=0;i<r;i++)o[i]=u[r-i-1];return o.map(function(c){return String.fromCharCode(c)}).join("")},t}(),rh=Sj;var um=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ke},t.prototype.encode=function(e){var r=Ie.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),i=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode())switch(i){case Or:e.writeCodeword(fE),e.signalEncoderChange(Or);return;case br:e.writeCodeword(eh),e.signalEncoderChange(br);return;case ur:e.writeCodeword(gE),e.signalEncoderChange(ur);break;case Lr:e.writeCodeword(mE),e.signalEncoderChange(Lr);break;case yr:e.writeCodeword(yE),e.signalEncoderChange(yr);break;default:throw new Error("Illegal mode: "+i)}else Ie.isExtendedASCII(n)?(e.writeCodeword(dE),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ie.isDigit(e)&&Ie.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}();var lm=function(){function t(){}return t.prototype.getEncodingMode=function(){return Or},t.prototype.encode=function(e){var r=new de;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var i=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(i!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}var a=r.length()-1,u=1,s=e.getCodewordCount()+a+u;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,_e.getCharAt(a));else if(a<=1555)r.setCharAt(0,_e.getCharAt(Math.floor(a/250)+249)),r.insert(1,_e.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var o=0,n=r.length();o<n;o++)e.writeCodeword(this.randomize255State(r.charAt(o).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,i=e+n;return i<=255?i:i-256},t}();var Ga=function(){function t(){}return t.prototype.getEncodingMode=function(){return br},t.prototype.encodeMaximal=function(e){for(var r=new de,n=0,i=e.pos,a=0;e.hasMoreCharacters();){var u=e.getCurrentChar();e.pos++,n=this.encodeChar(u,r),r.length()%3===0&&(i=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var o=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(r.length()%3);(c===2&&o!==2||c===1&&(n>3||o!==1))&&(e.pos=i)}r.length()>0&&e.writeCodeword(eh),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new de;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var i=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,u=e.getCodewordCount()+a;e.updateSymbolInfo(u);var s=e.getSymbolInfo().getDataCapacity()-u;if(!e.hasMoreCharacters()){var l=new de;for(r.length()%3===2&&s!==2&&(i=this.backtrackOneCharacter(e,r,l,i));r.length()%3===1&&(i>3||s!==1);)i=this.backtrackOneCharacter(e,r,l,i);break}var o=r.length();if(o%3===0){var c=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,i){var a=r.length(),u=r.toString().substring(0,a-i);r.setLengthToZero(),r.append(u),e.pos--;var s=e.getCurrentChar();return i=this.encodeChar(s,n),e.resetSymbolInfo(),i},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),i=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var u=e.getSymbolInfo().getDataCapacity()-a;if(i===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(th)}else if(u===1&&i===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(th),e.pos--}else if(i===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(u>0||e.hasMoreCharacters())&&e.writeCodeword(th)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ke)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,i=r%256,a=new de;return a.append(n),a.append(i),a.toString()},t}();var cm=function(){function t(){}return t.prototype.getEncodingMode=function(){return yr},t.prototype.encode=function(e){for(var r=new de;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var i=r.length();if(i>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var u=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}}r.append(_e.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>i&&(e.updateSymbolInfo(e.getCodewordCount()+1),i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=i&&i<=2)return}if(n>4)throw new Error("Count must not exceed 4");var u=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),o=l&&u<=2;if(u<=2){e.updateSymbolInfo(e.getCodewordCount()+u);var i=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();i>=3&&(o=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}o?(e.resetSymbolInfo(),e.pos-=u):e.writeCodewords(s)}finally{e.signalEncoderChange(Ke)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(_e.getCharAt(e-64)):Ie.illegalCharacter(_e.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),i=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,u=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(i<<12)+(a<<6)+u,l=s>>16&255,o=s>>8&255,c=s&255,f=new de;return f.append(l),r>=2&&f.append(o),r>=3&&f.append(c),f.toString()},t}();var Dj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Cj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pt=function(){function t(e,r,n,i,a,u,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=i,this.matrixHeight=a,this.dataRegions=u,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,i,a){var u,s;r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!0);try{for(var l=Cj(Pj),o=l.next();!o.done;o=l.next()){var c=o.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(i!=null&&(c.getSymbolWidth()>i.getWidth()||c.getSymbolHeight()>i.getHeight()))&&e<=c.dataCapacity)return c}}catch(f){u={error:f}}finally{try{o&&!o.done&&(s=l.return)&&s.call(l)}finally{if(u)throw u.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),Js=pt,Oj=function(t){Dj(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(pt),Pj=[new pt(!1,3,5,8,8,1),new pt(!1,5,7,10,10,1),new pt(!0,5,7,16,6,1),new pt(!1,8,10,12,12,1),new pt(!0,10,11,14,6,2),new pt(!1,12,12,14,14,1),new pt(!0,16,14,24,10,1),new pt(!1,18,14,16,16,1),new pt(!1,22,18,18,18,1),new pt(!0,22,18,16,10,2),new pt(!1,30,20,20,20,1),new pt(!0,32,24,16,14,2),new pt(!1,36,24,22,22,1),new pt(!1,44,28,24,24,1),new pt(!0,49,28,22,14,2),new pt(!1,62,36,14,14,4),new pt(!1,86,42,16,16,4),new pt(!1,114,48,18,18,4),new pt(!1,144,56,20,20,4),new pt(!1,174,68,22,22,4),new pt(!1,204,84,24,24,4,102,42),new pt(!1,280,112,14,14,16,140,56),new pt(!1,368,144,16,16,16,92,36),new pt(!1,456,192,18,18,16,114,48),new pt(!1,576,224,20,20,16,144,56),new pt(!1,696,272,22,22,16,174,68),new pt(!1,816,336,24,24,16,136,56),new pt(!1,1050,408,18,18,36,175,68),new pt(!1,1304,496,20,20,36,163,62),new Oj];var fm=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new de,i=0,a=r.length;i<a;i++){var u=String.fromCharCode(r[i]&255);if(u==="?"&&e.charAt(i)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(u)}this.msg=n.toString(),this.shape=0,this.codewords=new de,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Js.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}();var Mj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dm=function(t){Mj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ur},e.prototype.encode=function(r){for(var n=new de;r.hasMoreCharacters();){var i=r.getCurrentChar();r.pos++,this.encodeChar(i,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var u=Ie.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){r.signalEncoderChange(Ke);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Ie.illegalCharacter(_e.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var i=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||i>1||r.getRemainingCharacters()!==i)&&r.writeCodeword(vE),r.getNewEncoding()<0&&r.signalEncoderChange(Ke)},e}(Ga);var Nj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hm=function(t){Nj(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Lr},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var i=2;return i+=this.encodeChar(r-128,n),i},e}(Ga);var Rj=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=sm+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,i,a){r===void 0&&(r=0),n===void 0&&(n=null),i===void 0&&(i=null),a===void 0&&(a=!1);var u=new Ga,s=[new um,u,new hm,new dm,new cm,new lm],l=new fm(e);l.setSymbolShape(r),l.setSizeConstraints(n,i),e.startsWith(Zs)&&e.endsWith(Qs)?(l.writeCodeword(hE),l.setSkipAtEnd(2),l.pos+=Zs.length):e.startsWith(Ks)&&e.endsWith(Qs)&&(l.writeCodeword(pE),l.setSkipAtEnd(2),l.pos+=Ks.length);var o=Ke;for(a&&(u.encodeMaximal(l),o=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[o].encode(l),l.getNewEncoding()>=0&&(o=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();c<f&&o!==Ke&&o!==Or&&o!==yr&&l.writeCodeword("\xFE");var d=l.getCodewords();for(d.length()<f&&d.append(sm);d.length()<f;)d.append(this.randomize253State(d.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var i=this.lookAheadTestIntern(e,r,n);if(n===ur&&i===ur){for(var a=Math.min(r+3,e.length),u=r;u<a;u++)if(!this.isNativeX12(e.charCodeAt(u)))return Ke}else if(n===yr&&i===yr){for(var a=Math.min(r+4,e.length),u=r;u<a;u++)if(!this.isNativeEDIFACT(e.charCodeAt(u)))return Ke}return i},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var i;n===Ke?i=[0,1,1,1,1,1.25]:(i=[1,2,2,2,2,2.25],i[n]=0);for(var a=0,u=new Uint8Array(6),s=[];;){if(r+a===e.length){at.fill(u,0),at.fill(s,0);var l=this.findMinimums(i,s,ge.MAX_VALUE,u),o=this.getMinimumCount(u);if(s[Ke]===l)return Ke;if(o===1){if(u[Or]>0)return Or;if(u[yr]>0)return yr;if(u[Lr]>0)return Lr;if(u[ur]>0)return ur}return br}var c=e.charCodeAt(r+a);if(a++,this.isDigit(c)?i[Ke]+=.5:this.isExtendedASCII(c)?(i[Ke]=Math.ceil(i[Ke]),i[Ke]+=2):(i[Ke]=Math.ceil(i[Ke]),i[Ke]++),this.isNativeC40(c)?i[br]+=2/3:this.isExtendedASCII(c)?i[br]+=8/3:i[br]+=4/3,this.isNativeText(c)?i[Lr]+=2/3:this.isExtendedASCII(c)?i[Lr]+=8/3:i[Lr]+=4/3,this.isNativeX12(c)?i[ur]+=2/3:this.isExtendedASCII(c)?i[ur]+=13/3:i[ur]+=10/3,this.isNativeEDIFACT(c)?i[yr]+=3/4:this.isExtendedASCII(c)?i[yr]+=17/4:i[yr]+=13/4,this.isSpecialB256(c)?i[Or]+=4:i[Or]++,a>=4){if(at.fill(u,0),at.fill(s,0),this.findMinimums(i,s,ge.MAX_VALUE,u),s[Ke]<this.min(s[Or],s[br],s[Lr],s[ur],s[yr]))return Ke;if(s[Or]<s[Ke]||s[Or]+1<this.min(s[br],s[Lr],s[ur],s[yr]))return Or;if(s[yr]+1<this.min(s[Or],s[br],s[Lr],s[ur],s[Ke]))return yr;if(s[Lr]+1<this.min(s[Or],s[br],s[yr],s[ur],s[Ke]))return Lr;if(s[ur]+1<this.min(s[Or],s[br],s[yr],s[Lr],s[Ke]))return ur;if(s[br]+1<this.min(s[Ke],s[Or],s[yr],s[Lr])){if(s[br]<s[ur])return br;if(s[br]===s[ur]){for(var f=r+a+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return ur;if(!this.isNativeX12(d))break;f++}return br}}}}},t.min=function(e,r,n,i,a){var u=Math.min(e,Math.min(r,Math.min(n,i)));return a===void 0?u:Math.min(u,a)},t.findMinimums=function(e,r,n,i){for(var a=0;a<6;a++){var u=r[a]=Math.ceil(e[a]);n>u&&(n=u,at.fill(i,0)),n===u&&(i[a]=i[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,i=r;i<n&&this.isDigit(e.charCodeAt(i));)i++;return i-r},t.illegalCharacter=function(e){var r=ge.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),Ie=Rj;var pm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bE=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Cr.encode(e,this.charset)!=null}catch{return!1}},t}(),wE=function(){function t(e,r,n){var i,a,u,s,l,o;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new bE(za.forName(k))}),this.encoders=[];var c=[];c.push(new bE(Jl.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var p=(i=void 0,pm(c)),m=p.next();!m.done;m=p.next()){var v=m.value,x=e.charAt(d),y=x.charCodeAt(0);if(y===n||v.canEncode(x)){h=!0;break}}}catch(k){i={error:k}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(i)throw i.error}}if(!h)try{for(var _=(u=void 0,pm(this.ENCODERS)),I=_.next();!I.done;I=_.next()){var v=I.value;if(v.canEncode(e.charAt(d))){c.push(v),h=!0;break}}}catch(k){u={error:k}}finally{try{I&&!I.done&&(s=_.return)&&s.call(_)}finally{if(u)throw u.error}}h||(f=!0)}if(c.length===1&&!f)this.encoders=[c[0]];else{this.encoders=[];var C=0;try{for(var j=pm(c),z=j.next();!z.done;z=j.next()){var v=z.value;this.encoders[C++]=v}}catch(k){l={error:k}}finally{try{z&&!z.done&&(o=j.return)&&o.call(j)}finally{if(l)throw l.error}}}var W=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){W=d;break}}this.priorityEncoderIndex=W}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Cr.encode(_e.getCharAt(e),this.encoders[r].name)},t}();var Fj=3,_E=function(){function t(e,r,n){this.fnc1=n;var i=new wE(e,r,n);if(i.length()===1)for(var a=0;a<this.bytes.length;a++){var u=e.charAt(a).charCodeAt(0);this.bytes[a]=u===n?1e3:u}else this.bytes=this.encodeMinimally(e,i,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new de,i=e;i<r;i++){if(this.isECI(i))throw new Error("value at "+i+" is not a character but an ECI");n.append(this.charAt(i))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,i,a,u){var s=e.charAt(i).charCodeAt(0),l=0,o=r.length();r.getPriorityEncoderIndex()>=0&&(s===u||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),o=l+1);for(var c=l;c<o;c++)(s===u||r.canEncode(s,c))&&this.addEdge(n,i+1,new xE(s,r,c,a,u))},t.prototype.encodeMinimally=function(e,r,n){var i=e.length,a=new xE[i+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var u=1;u<=i;u++){for(var s=0;s<r.length();s++)a[u][s]!=null&&u<i&&this.addEdges(e,r,a,u,a[u][s],n);for(var s=0;s<r.length();s++)a[u-1][s]=null}for(var l=-1,o=ge.MAX_VALUE,s=0;s<r.length();s++)if(a[i][s]!=null){var c=a[i][s];c.cachedTotalSize<o&&(o=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=a[i][l];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=r.encode(d.c,d.encoderIndex),u=h.length-1;u>=0;u--)f.unshift(h[u]&255);var p=d.previous===null?0:d.previous.encoderIndex;p!==d.encoderIndex&&f.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var m=[],u=0;u<m.length;u++)m[u]=f[u];return m},t}();var xE=function(){function t(e,r,n,i,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=i,this.fnc1=a,this.c=e===a?1e3:e;var u=this.isFNC1()?1:r.encode(e,n).length,s=i===null?0:i.encoderIndex;s!==n&&(u+=Fj),i!=null&&(u+=i.cachedTotalSize),this.cachedTotalSize=u}return t.prototype.isFNC1=function(){return this.c===1e3},t}();var kj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tc=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Lj=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),i,a=[],u;try{for(;(e===void 0||e-- >0)&&!(i=n.next()).done;)a.push(i.value)}catch(s){u={error:s}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},Bj=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(Lj(arguments[e]));return t},ue=function(t){return t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256",t}(ue||{}),$j=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Zr=function(){function t(){}return t.isExtendedASCII=function(e,r){return e!==r&&e>=128&&e<=255},t.isInC40Shift1Set=function(e){return e<=31},t.isInC40Shift2Set=function(e,r){var n,i;try{for(var a=tc($j),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.charCodeAt(0)===e)return!0}}catch(l){n={error:l}}finally{try{u&&!u.done&&(i=a.return)&&i.call(a)}finally{if(n)throw n.error}}return e===r},t.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},t.isInTextShift2Set=function(e,r){return this.isInC40Shift2Set(e,r)},t.encodeHighLevel=function(e,r,n,i){r===void 0&&(r=null),n===void 0&&(n=-1),i===void 0&&(i=0);var a=0;return e.startsWith(Zs)&&e.endsWith(Qs)?(a=5,e=e.substring(Zs.length,e.length-2)):e.startsWith(Ks)&&e.endsWith(Qs)&&(a=6,e=e.substring(Ks.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,Bj(this.encode(e,r,n,i,a)))))},t.encode=function(e,r,n,i,a){return this.encodeMinimally(new jj(e,r,n,i,a)).getBytes()},t.addEdge=function(e,r){var n=r.fromPosition+r.characterLength;(e[n][r.getEndMode()]===null||e[n][r.getEndMode()].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.getEndMode()]=r)},t.getNumberOfC40Words=function(e,r,n,i){for(var a=0,u=r;u<e.length();u++){if(e.isECI(u))return i[0]=0,0;var s=e.charAt(u);if(n&&Ie.isNativeC40(s)||!n&&Ie.isNativeText(s))a++;else if(!t.isExtendedASCII(s,e.getFNC1Character()))a+=2;else{var l=s&255;l>=128&&(n&&Ie.isNativeC40(l-128)||!n&&Ie.isNativeText(l-128))?a+=3:a+=4}if(a%3===0||(a-2)%3===0&&u+1===e.length())return i[0]=u-r+1,Math.ceil(a/3)}return i[0]=0,0},t.addEdges=function(e,r,n,i){var a,u;if(e.isECI(n)){this.addEdge(r,new Gn(e,ue.ASCII,n,1,i));return}var s=e.charAt(n);if(i===null||i.getEndMode()!==ue.EDF){Ie.isDigit(s)&&e.haveNCharacters(n,2)&&Ie.isDigit(e.charAt(n+1))?this.addEdge(r,new Gn(e,ue.ASCII,n,2,i)):this.addEdge(r,new Gn(e,ue.ASCII,n,1,i));var l=[ue.C40,ue.TEXT];try{for(var o=tc(l),c=o.next();!c.done;c=o.next()){var f=c.value,d=[];t.getNumberOfC40Words(e,n,f===ue.C40,d)>0&&this.addEdge(r,new Gn(e,f,n,d[0],i))}}catch(m){a={error:m}}finally{try{c&&!c.done&&(u=o.return)&&u.call(o)}finally{if(a)throw a.error}}e.haveNCharacters(n,3)&&Ie.isNativeX12(e.charAt(n))&&Ie.isNativeX12(e.charAt(n+1))&&Ie.isNativeX12(e.charAt(n+2))&&this.addEdge(r,new Gn(e,ue.X12,n,3,i)),this.addEdge(r,new Gn(e,ue.B256,n,1,i))}var h;for(h=0;h<3;h++){var p=n+h;if(e.haveNCharacters(p,1)&&Ie.isNativeEDIFACT(e.charAt(p)))this.addEdge(r,new Gn(e,ue.EDF,n,h+1,i));else break}h===3&&e.haveNCharacters(n,4)&&Ie.isNativeEDIFACT(e.charAt(n+3))&&this.addEdge(r,new Gn(e,ue.EDF,n,4,i))},t.encodeMinimally=function(e){var r=e.length(),n=Array(r+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,n,0,null);for(var i=1;i<=r;i++){for(var a=0;a<6;a++)n[i][a]!==null&&i<r&&this.addEdges(e,n,i,n[i][a]);for(var a=0;a<6;a++)n[i-1][a]=null}for(var u=-1,s=ge.MAX_VALUE,a=0;a<6;a++)if(n[r][a]!==null){var l=n[r][a],o=a>=1&&a<=3?l.cachedTotalSize+1:l.cachedTotalSize;o<s&&(s=o,u=a)}if(u<0)throw new Error('Failed to encode "'+e+'"');return new Vj(n[r][u])},t}();var Vj=function(){function t(e){var r=e.input,n=0,i=[],a=[],u=[];(e.mode===ue.C40||e.mode===ue.TEXT||e.mode===ue.X12)&&e.getEndMode()!==ue.ASCII&&(n+=this.prepend(Gn.getBytes(254),i));for(var s=e;s!==null;)n+=this.prepend(s.getDataBytes(),i),(s.previous===null||s.getPreviousStartMode()!==s.getMode())&&(s.getMode()===ue.B256&&(n<=249?(i.unshift(n),n++):(i.unshift(n%250),i.unshift(n/250+249),n+=2),a.push(i.length),u.push(n)),this.prepend(s.getLatchBytes(),i),n=0),s=s.previous;r.getMacroId()===5?n+=this.prepend(Gn.getBytes(236),i):r.getMacroId()===6&&(n+=this.prepend(Gn.getBytes(237),i)),r.getFNC1Character()>0&&(n+=this.prepend(Gn.getBytes(232),i));for(var l=0;l<a.length;l++)this.applyRandomPattern(i,i.length-a[l],u[l]);var o=e.getMinSymbolSize(i.length);for(i.length<o&&i.push(129);i.length<o;)i.push(this.randomize253State(i.length+1));this.bytes=new Uint8Array(i.length);for(var l=0;l<this.bytes.length;l++)this.bytes[l]=i[l]}return t.prototype.prepend=function(e,r){for(var n=e.length-1;n>=0;n--)r.unshift(e[n]);return e.length},t.prototype.randomize253State=function(e){var r=149*e%253+1,n=129+r;return n<=254?n:n-254},t.prototype.applyRandomPattern=function(e,r,n){for(var i=0;i<n;i++){var a=r+i,u=e[a]&255,s=149*(a+1)%255+1,l=u+s;e[a]=l<=255?l:l-256}},t.prototype.getBytes=function(){return this.bytes},t}(),Gn=function(){function t(e,r,n,i,a){if(this.input=e,this.mode=r,this.fromPosition=n,this.characterLength=i,this.previous=a,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(n+i<=e.length()))throw new Error("Invalid edge");var u=a!==null?a.cachedTotalSize:0,s=this.getPreviousMode();switch(r){case ue.ASCII:u++,(e.isECI(n)||Zr.isExtendedASCII(e.charAt(n),e.getFNC1Character()))&&u++,(s===ue.C40||s===ue.TEXT||s===ue.X12)&&u++;break;case ue.B256:u++,(s!==ue.B256||this.getB256Size()===250)&&u++,s===ue.ASCII?u++:(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break;case ue.C40:case ue.TEXT:case ue.X12:if(r===ue.X12)u+=2;else{var l=[];u+=Zr.getNumberOfC40Words(e,n,r===ue.C40,l)*2}s===ue.ASCII||s===ue.B256?u++:s!==r&&(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break;case ue.EDF:u+=3,s===ue.ASCII||s===ue.B256?u++:(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break}this.cachedTotalSize=u}return t.prototype.getB256Size=function(){for(var e=0,r=this;r!==null&&r.mode===ue.B256&&e<=250;)e++,r=r.previous;return e},t.prototype.getPreviousStartMode=function(){return this.previous===null?ue.ASCII:this.previous.mode},t.prototype.getPreviousMode=function(){return this.previous===null?ue.ASCII:this.previous.getEndMode()},t.prototype.getEndMode=function(){if(this.mode===ue.EDF){if(this.characterLength<4)return ue.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return ue.ASCII}if(this.mode===ue.C40||this.mode===ue.TEXT||this.mode===ue.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return ue.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return ue.ASCII}return this.mode},t.prototype.getMode=function(){return this.mode},t.prototype.getLastASCII=function(){var e=this.input.length(),r=this.fromPosition+this.characterLength;return e-r>4||r>=e?0:e-r===1?Zr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())?0:1:e-r===2?Zr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())||Zr.isExtendedASCII(this.input.charAt(r+1),this.input.getFNC1Character())?0:Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))?1:2:e-r===3?Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))&&!Zr.isExtendedASCII(this.input.charAt(r+2),this.input.getFNC1Character())||Ie.isDigit(this.input.charAt(r+1))&&Ie.isDigit(this.input.charAt(r+2))&&!Zr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())?2:0:Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))&&Ie.isDigit(this.input.charAt(r+2))&&Ie.isDigit(this.input.charAt(r+3))?2:0},t.prototype.getMinSymbolSize=function(e){var r,n,i,a,u,s;switch(this.input.getShapeHint()){case 1:try{for(var l=tc(this.squareCodewordCapacities),o=l.next();!o.done;o=l.next()){var c=o.value;if(c>=e)return c}}catch(m){r={error:m}}finally{try{o&&!o.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}break;case 2:try{for(var f=tc(this.rectangularCodewordCapacities),d=f.next();!d.done;d=f.next()){var c=d.value;if(c>=e)return c}}catch(m){i={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(i)throw i.error}}break}try{for(var h=tc(this.allCodewordCapacities),p=h.next();!p.done;p=h.next()){var c=p.value;if(c>=e)return c}}catch(m){u={error:m}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(u)throw u.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},t.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},t.getBytes=function(e,r){var n=new Uint8Array(r?2:1);return n[0]=e,r&&(n[1]=r),n},t.prototype.setC40Word=function(e,r,n,i,a){var u=1600*(n&255)+40*(i&255)+(a&255)+1;e[r]=u/256,e[r+1]=u%256},t.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},t.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),r=0;r<e.length;r+=2)this.setC40Word(e,r,this.getX12Value(this.input.charAt(this.fromPosition+r/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+r/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+r/2*3+2)));return e},t.prototype.getShiftValue=function(e,r,n){return r&&Zr.isInC40Shift1Set(e)||!r&&Zr.isInTextShift1Set(e)?0:r&&Zr.isInC40Shift2Set(e,n)||!r&&Zr.isInTextShift2Set(e,n)?1:2},t.prototype.getC40Value=function(e,r,n,i){if(n===i){if(r!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?n<=31?n:n===32?3:n<=47?n-33:n<=57?n-44:n<=64?n-43:n<=90?n-51:n<=95?n-69:n<=127?n-96:n:n===0?0:r===0&&n<=3?n-1:r===1&&n<=31?n:n===32?3:n>=33&&n<=47?n-33:n>=48&&n<=57?n-44:n>=58&&n<=64?n-43:n>=65&&n<=90?n-64:n>=91&&n<=95?n-69:n===96?0:n>=97&&n<=122?n-83:n>=123&&n<=127?n-96:n},t.prototype.getC40Words=function(e,r){for(var n=[],i=0;i<this.characterLength;i++){var a=this.input.charAt(this.fromPosition+i);if(e&&Ie.isNativeC40(a)||!e&&Ie.isNativeText(a))n.push(this.getC40Value(e,0,a,r));else if(Zr.isExtendedASCII(a,r)){var s=(a&255)-128;if(e&&Ie.isNativeC40(s)||!e&&Ie.isNativeText(s))n.push(1),n.push(30),n.push(this.getC40Value(e,0,s,r));else{n.push(1),n.push(30);var u=this.getShiftValue(s,e,r);n.push(u),n.push(this.getC40Value(e,u,s,r))}}else{var u=this.getShiftValue(a,e,r);n.push(u),n.push(this.getC40Value(e,u,a,r))}}if(n.length%3!==0){if(!((n.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");n.push(0)}for(var l=new Uint8Array(n.length/3*2),o=0,i=0;i<n.length;i+=3)this.setC40Word(l,o,n[i]&255,n[i+1]&255,n[i+2]&255),o+=2;return l},t.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),r=new Uint8Array(e*3),n=this.fromPosition,i=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),a=0;a<e;a+=3){for(var u=[],s=0;s<4;s++)n<=i?u[s]=this.input.charAt(n++)&63:u[s]=n===i+1?31:0;var l=u[0]<<18;l|=u[1]<<12,l|=u[2]<<6,l|=u[3],r[a]=l>>16&255,r[a+1]=l>>8&255,r[a+2]=l&255}return r},t.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case ue.ASCII:case ue.B256:switch(this.mode){case ue.B256:return t.getBytes(231);case ue.C40:return t.getBytes(230);case ue.TEXT:return t.getBytes(239);case ue.X12:return t.getBytes(238);case ue.EDF:return t.getBytes(240)}break;case ue.C40:case ue.TEXT:case ue.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case ue.ASCII:return t.getBytes(254);case ue.B256:return t.getBytes(254,231);case ue.C40:return t.getBytes(254,230);case ue.TEXT:return t.getBytes(254,239);case ue.X12:return t.getBytes(254,238);case ue.EDF:return t.getBytes(254,240)}break;case ue.EDF:if(this.mode!==ue.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},t.prototype.getDataBytes=function(){switch(this.mode){case ue.ASCII:return this.input.isECI(this.fromPosition)?t.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Zr.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?t.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?t.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?t.getBytes(232):t.getBytes(this.input.charAt(this.fromPosition)+1);case ue.B256:return t.getBytes(this.input.charAt(this.fromPosition));case ue.C40:return this.getC40Words(!0,this.input.getFNC1Character());case ue.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case ue.X12:return this.getX12Words();case ue.EDF:return this.getEDFBytes()}},t}(),jj=function(t){kj(e,t);function e(r,n,i,a,u){var s=t.call(this,r,n,i)||this;return s.shape=a,s.macroId=u,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(_E);var Bpe=function(){function t(){}return t.prototype.encode=function(e,r,n,i,a){if(a===void 0&&(a=null),e.trim()==="")throw new Error("Found empty contents");if(r!==ae.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+r);if(n<0||i<0)throw new Error("Requested dimensions can't be negative: "+n+"x"+i);var u=0,s=null,l=null;if(a!=null){var o=a.get(Oe.DATA_MATRIX_SHAPE);o!=null&&(u=o);var c=a.get(Oe.MIN_SIZE);c!=null&&(s=c);var f=a.get(Oe.MAX_SIZE);f!=null&&(l=f)}var d,h=a!=null&&a.has(Oe.DATA_MATRIX_COMPACT)&&!!a.get(Oe.DATA_MATRIX_COMPACT).toString();if(h){var p=a.has(Oe.GS1_FORMAT)&&!!a.get(Oe.GS1_FORMAT).toString(),m=null,v=a.has(Oe.CHARACTER_SET);v&&(m=za.forName(a.get(Oe.CHARACTER_SET).toString())),d=Zr.encodeHighLevel(e,m,p?29:-1,u)}else{var x=a!=null&&a.has(Oe.FORCE_C40)&&!!a.get(Oe.FORCE_C40).toString();d=Ie.encodeHighLevel(e,u,s,l,x)}var y=Js.lookup(d.length,u,s,l,!0),_=rh.encodeECC200(d,y),I=new Jd(_,y.getSymbolDataWidth(),y.getSymbolDataHeight());return I.place(),this.encodeLowLevel(I,y,n,i)},t.prototype.encodeLowLevel=function(e,r,n,i){for(var a=r.getSymbolDataWidth(),u=r.getSymbolDataHeight(),s=new Ql(r.getSymbolWidth(),r.getSymbolHeight()),l=0,o=0;o<u;o++){var c=void 0;if(o%r.matrixHeight===0){c=0;for(var f=0;f<r.getSymbolWidth();f++)s.setBoolean(c,l,f%2===0),c++;l++}c=0;for(var f=0;f<a;f++)f%r.matrixWidth===0&&(s.setBoolean(c,l,!0),c++),s.setBoolean(c,l,e.getBit(f,o)),c++,f%r.matrixWidth===r.matrixWidth-1&&(s.setBoolean(c,l,o%2===0),c++);if(l++,o%r.matrixHeight===r.matrixHeight-1){c=0;for(var f=0;f<r.getSymbolWidth();f++)s.setBoolean(c,l,!0),c++;l++}}return this.convertByteMatrixToBitMatrix(s,n,i)},t.prototype.convertByteMatrixToBitMatrix=function(e,r,n){var i=e.getWidth(),a=e.getHeight(),u=Math.max(r,i),s=Math.max(n,a),l=Math.min(u/i,s/a),o=(u-i*l)/2,c=(s-a*l)/2,f;n<a||r<i?(o=0,c=0,f=new Bt(i,a)):f=new Bt(r,n),f.clear();for(var d=0,h=c;d<a;d++,h+=l)for(var p=0,m=o;p<i;p++,m+=l)e.get(p,d)===1&&f.setRegion(m,h,l,l);return f},t}();var Uj=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),gm=Uj;var Hj=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),mm=Hj;var zj=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),EE=zj;var Gj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wj=function(t){Gj(e,t);function e(r,n,i){var a=t.call(this,r)||this;return a.value=n,a.bitCount=i,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ge.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(EE),eu=Wj;var qj=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)i.hasOwnProperty(a)&&(n[a]=i[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Xj=function(t){qj(e,t);function e(r,n,i){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=i,a}return e.prototype.appendTo=function(r,n){for(var i=0;i<this.binaryShiftByteCount;i++)(i===0||i===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):i===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+i],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(eu),TE=Xj;function IE(t,e,r){return new TE(t,e,r)}function tu(t,e,r){return new eu(t,e,r)}var AE=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],_o=0,ru=1,Kr=2,nh=3,gn=4,SE=new eu(null,0,0);var ih=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var Kj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function Qj(t){var e,r;try{for(var n=Kj(t),i=n.next();!i.done;i=n.next()){var a=i.value;at.fill(a,-1)}}catch(u){e={error:u}}finally{try{i&&!i.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[_o][gn]=0,t[ru][gn]=0,t[ru][_o]=28,t[nh][gn]=0,t[Kr][gn]=0,t[Kr][_o]=15,t}var ah=Qj(at.createInt32Array(6,6));var Jj=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eU=function(){function t(e,r,n,i){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=i}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,i=this.token;if(e!==this.mode){var a=ih[this.mode][e];i=tu(i,a&65535,a>>16),n+=a>>16}var u=e===Kr?4:5;return i=tu(i,r,u),new t(i,e,0,n+u)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,i=this.mode===Kr?4:5;return n=tu(n,ah[this.mode][e],i),n=tu(n,r,5),new t(n,this.mode,0,this.bitCount+i+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,i=this.bitCount;if(this.mode===gn||this.mode===Kr){var a=ih[n][_o];r=tu(r,a&65535,a>>16),i+=a>>16,n=_o}var u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,i+u);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=IE(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(ih[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,i=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())i.unshift(a);var u=new kt;try{for(var s=Jj(i),l=s.next();!l.done;l=s.next()){var o=l.value;o.appendTo(u,e)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return u},t.prototype.toString=function(){return _e.format("%s bits=%d bytes=%d",AE[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(SE,_o,0,0),t}(),CE=eU;function tU(t){var e=_e.getCharCode(" "),r=_e.getCharCode("."),n=_e.getCharCode(",");t[_o][e]=1;for(var i=_e.getCharCode("Z"),a=_e.getCharCode("A"),u=a;u<=i;u++)t[_o][u]=u-a+2;t[ru][e]=1;for(var s=_e.getCharCode("z"),l=_e.getCharCode("a"),u=l;u<=s;u++)t[ru][u]=u-l+2;t[Kr][e]=1;for(var o=_e.getCharCode("9"),c=_e.getCharCode("0"),u=c;u<=o;u++)t[Kr][u]=u-c+2;t[Kr][n]=12,t[Kr][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],d=0;d<f.length;d++)t[nh][_e.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)_e.getCharCode(h[d])>0&&(t[gn][_e.getCharCode(h[d])]=d);return t}var sh=tU(at.createInt32Array(5,256));var uh=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},nU=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=_e.getCharCode(" "),r=_e.getCharCode(`
`),n=mm.singletonList(CE.INITIAL_STATE),i=0;i<this.text.length;i++){var a=void 0,u=i+1<this.text.length?this.text[i+1]:0;switch(this.text[i]){case _e.getCharCode("\r"):a=u===r?2:0;break;case _e.getCharCode("."):a=u===e?3:0;break;case _e.getCharCode(","):a=u===e?4:0;break;case _e.getCharCode(":"):a=u===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,i,a),i++):n=this.updateStateListForChar(n,i)}var s=mm.min(n,function(l,o){return l.getBitCount()-o.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,i,a=[];try{for(var u=uh(e),s=u.next();!s.done;s=u.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(o){n={error:o}}finally{try{s&&!s.done&&(i=u.return)&&i.call(u)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var i=this.text[r]&255,a=sh[e.getMode()][i]>0,u=null,s=0;s<=gn;s++){var l=sh[s][i];if(l>0){if(u==null&&(u=e.endBinaryShift(r)),!a||s===e.getMode()||s===Kr){var o=u.latchAndAppend(s,l);n.push(o)}if(!a&&ah[e.getMode()][s]>=0){var c=u.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||sh[e.getMode()][i]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var i,a,u=[];try{for(var s=uh(e),l=s.next();!l.done;l=s.next()){var o=l.value;this.updateStateForPair(o,r,n,u)}}catch(c){i={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(i)throw i.error}}return this.simplifyStates(u)},t.updateStateForPair=function(e,r,n,i){var a=e.endBinaryShift(r);if(i.push(a.latchAndAppend(gn,n)),e.getMode()!==gn&&i.push(a.shiftAndAppend(gn,n)),n===3||n===4){var u=a.latchAndAppend(Kr,16-n).latchAndAppend(Kr,1);i.push(u)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);i.push(s)}},t.simplifyStates=function(e){var r,n,i,a,u=[];try{for(var s=uh(e),l=s.next();!l.done;l=s.next()){var o=l.value,c=!0,f=function(v){if(v.isBetterThanOrEqualTo(o))return c=!1,"break";o.isBetterThanOrEqualTo(v)&&(u=u.filter(function(x){return x!==v}))};try{for(var d=(i=void 0,uh(u)),h=d.next();!h.done;h=d.next()){var p=h.value,m=f(p);if(m==="break")break}}catch(v){i={error:v}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}c&&u.push(o)}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return u},t}(),ym=nU;var oU=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iU=function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var i=new ym(e).encode(),a=ge.truncDivision(i.getSize()*r,100)+11,u=i.getSize()+a,s,l,o,c,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new re(_e.format("Illegal value %s for layers",n));o=t.totalBitsInLayer(l,s),c=t.WORD_SIZE[l];var d=o-o%c;if(f=t.stuffBits(i,c),f.getSize()+a>d)throw new re("Data to large for user specified layer");if(s&&f.getSize()>c*64)throw new re("Data to large for user specified layer")}else{c=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new re("Data too large for an Aztec code");if(s=h<=3,l=s?h+1:h,o=t.totalBitsInLayer(l,s),!(u>o)){(f==null||c!==t.WORD_SIZE[l])&&(c=t.WORD_SIZE[l],f=t.stuffBits(i,c));var d=o-o%c;if(!(s&&f.getSize()>c*64)&&f.getSize()+a<=d)break}}}var p=t.generateCheckWords(f,o,c),m=f.getSize()/c,v=t.generateModeMessage(s,l,m),x=(s?11:14)+l*4,y=new Int32Array(x),_;if(s){_=x;for(var h=0;h<y.length;h++)y[h]=h}else{_=x+1+2*ge.truncDivision(ge.truncDivision(x,2)-1,15);for(var I=ge.truncDivision(x,2),C=ge.truncDivision(_,2),h=0;h<I;h++){var j=h+ge.truncDivision(h,15);y[I-h-1]=C-j-1,y[I+h]=C+j+1}}for(var z=new Bt(_),h=0,W=0;h<l;h++){for(var k=(l-h)*4+(s?9:12),X=0;X<k;X++)for(var ke=X*2,me=0;me<2;me++)p.get(W+ke+me)&&z.set(y[h*2+me],y[h*2+X]),p.get(W+k*2+ke+me)&&z.set(y[h*2+X],y[x-1-h*2-me]),p.get(W+k*4+ke+me)&&z.set(y[x-1-h*2-me],y[x-1-h*2-X]),p.get(W+k*6+ke+me)&&z.set(y[x-1-h*2-X],y[h*2+me]);W+=k*8}if(t.drawModeMessage(z,s,_,v),s)t.drawBullsEye(z,ge.truncDivision(_,2),5);else{t.drawBullsEye(z,ge.truncDivision(_,2),7);for(var h=0,X=0;h<ge.truncDivision(x,2)-1;h+=15,X+=16)for(var me=ge.truncDivision(_,2)&1;me<_;me+=2)z.set(ge.truncDivision(_,2)-X,me),z.set(ge.truncDivision(_,2)+X,me),z.set(me,ge.truncDivision(_,2)-X),z.set(me,ge.truncDivision(_,2)+X)}var ye=new gm;return ye.setCompact(s),ye.setSize(_),ye.setLayers(l),ye.setCodeWords(m),ye.setMatrix(z),ye},t.drawBullsEye=function(e,r,n){for(var i=0;i<n;i+=2)for(var a=r-i;a<=r+i;a++)e.set(a,r-i),e.set(a,r+i),e.set(r-i,a),e.set(r+i,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var i=new kt;return e?(i.appendBits(r-1,2),i.appendBits(n-1,6),i=t.generateCheckWords(i,28,4)):(i.appendBits(r-1,5),i.appendBits(n-1,11),i=t.generateCheckWords(i,40,4)),i},t.drawModeMessage=function(e,r,n,i){var a=ge.truncDivision(n,2);if(r)for(var u=0;u<7;u++){var s=a-3+u;i.get(u)&&e.set(s,a-5),i.get(u+7)&&e.set(a+5,s),i.get(20-u)&&e.set(s,a+5),i.get(27-u)&&e.set(a-5,s)}else for(var u=0;u<10;u++){var s=a-5+u+ge.truncDivision(u,5);i.get(u)&&e.set(s,a-7),i.get(u+10)&&e.set(a+7,s),i.get(29-u)&&e.set(s,a+7),i.get(39-u)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var i,a,u=e.getSize()/n,s=new Kl(t.getGF(n)),l=ge.truncDivision(r,n),o=t.bitsToWords(e,n,l);s.encode(o,l-u);var c=r%n,f=new kt;f.appendBits(0,c);try{for(var d=oU(Array.from(o)),h=d.next();!h.done;h=d.next()){var p=h.value;f.appendBits(p,n)}}catch(m){i={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(i)throw i.error}}return f},t.bitsToWords=function(e,r,n){var i=new Int32Array(n),a,u;for(a=0,u=e.getSize()/r;a<u;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;i[a]=s}return i},t.getGF=function(e){switch(e){case 4:return sr.AZTEC_PARAM;case 6:return sr.AZTEC_DATA_6;case 8:return sr.AZTEC_DATA_8;case 10:return sr.AZTEC_DATA_10;case 12:return sr.AZTEC_DATA_12;default:throw new re("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new kt,i=e.getSize(),a=(1<<r)-2,u=0;u<i;u+=r){for(var s=0,l=0;l<r;l++)(u+l>=i||e.get(u+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),u--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),u--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t}(),rc=iU;var Sge=function(){function t(){}return t.prototype.encode=function(e,r,n,i){return this.encodeWithHints(e,r,n,i,null)},t.prototype.encodeWithHints=function(e,r,n,i,a){var u=Jl.ISO_8859_1,s=rc.DEFAULT_EC_PERCENT,l=rc.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Oe.CHARACTER_SET)&&(u=za.forName(a.get(Oe.CHARACTER_SET).toString())),a.has(Oe.ERROR_CORRECTION)&&(s=ge.parseInt(a.get(Oe.ERROR_CORRECTION).toString())),a.has(Oe.AZTEC_LAYERS)&&(l=ge.parseInt(a.get(Oe.AZTEC_LAYERS).toString()))),t.encodeLayers(e,r,n,i,u,s,l)},t.encodeLayers=function(e,r,n,i,a,u,s){if(r!==ae.AZTEC)throw new re("Can only encode AZTEC, but got "+r);var l=rc.encode(_e.getBytes(e,a),u,s);return t.renderResult(l,n,i)},t.renderResult=function(e,r,n){var i=e.getMatrix();if(i==null)throw new mr;for(var a=i.getWidth(),u=i.getHeight(),s=Math.max(r,a),l=Math.max(n,u),o=Math.min(s/a,l/u),c=(s-a*o)/2,f=(l-u*o)/2,d=new Bt(s,l),h=0,p=f;h<u;h++,p+=o)for(var m=0,v=c;m<a;m++,v+=o)i.get(m,h)&&d.setRegion(v,p,o,o);return d},t}();var aU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),OE=function(t){aU(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var i=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(i.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,i){for(var a=new Uint8ClampedArray(n*i),u=0,s=0,l=r.length;u<l;u+=4,s++){var o=void 0,c=r[u+3];if(c===0)o=255;else{var f=r[u],d=r[u+1],h=r[u+2];o=306*f+601*d+117*h+512>>10}a[s]=o}return a},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var i=this.getWidth(),a=r*i;return n===null?n=this.buffer.slice(a,a+i):(n.length<i&&(n=new Uint8ClampedArray(i)),n.set(this.buffer.slice(a,a+i))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,i,a){return t.prototype.crop.call(this,r,n,i,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new hi(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var i=r*e.DEGREE_TO_RADIANS,a=this.canvas.width,u=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(i))*a+Math.abs(Math.sin(i))*u),l=Math.ceil(Math.abs(Math.sin(i))*a+Math.abs(Math.cos(i))*u);n.width=s,n.height=l;var o=n.getContext("2d");if(!o)throw new Error("Could not create a Canvas Context element.");return o.translate(s/2,l/2),o.rotate(i),o.drawImage(this.canvas,a/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(bo);function vm(){return typeof navigator<"u"}function sU(){return vm()&&!!navigator.mediaDevices}function PE(){return!!(sU()&&navigator.mediaDevices.enumerateDevices)}var nu=function(){return nu=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},nu.apply(this,arguments)},rr=function(t,e,r,n){function i(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function s(c){try{o(n.next(c))}catch(f){u(f)}}function l(c){try{o(n.throw(c))}catch(f){u(f)}}function o(c){c.done?a(c.value):i(c.value).then(s,l)}o((n=n.apply(t,e||[])).next())})},nr=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,i,a,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(o){return function(c){return l([o,c])}}function l(o){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,i&&(a=o[0]&2?i.return:o[0]?i.throw||((a=i.return)&&a.call(i),0):i.next)&&!(a=a.call(i,o[1])).done)return a;switch(i=0,a&&(o=[o[0]&2,a.value]),o[0]){case 0:case 1:a=o;break;case 4:return r.label++,{value:o[1],done:!1};case 5:r.label++,i=o[1],o=[0];continue;case 7:o=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(o[0]===6||o[0]===2)){r=0;continue}if(o[0]===3&&(!a||o[1]>a[0]&&o[1]<a[3])){r.label=o[1];break}if(o[0]===6&&r.label<a[1]){r.label=a[1],a=o;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(o);break}a[2]&&r.ops.pop(),r.trys.pop();continue}o=e.call(t,r)}catch(c){o=[6,c],i=0}finally{n=a=0}if(o[0]&5)throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}},bm=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},uU={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Wn=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=nu(nu({},uU),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Me.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return rr(this,void 0,void 0,function(){return nr(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,i=e.getVideoTracks();try{for(var a=bm(i),u=a.next();!u.done;u=a.next()){var s=u.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Qt("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Qt("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new OE(e),n=new $l(r);return new Bl(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Qt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),i=n.width,a=n.height;return r.style.width=i+"px",r.style.height=a+"px",r.width=i,r.height=a,r},t.tryPlayVideo=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return rr(this,void 0,void 0,function(){var e,r,n,i,a,u,s,l,o,c,f,d;return nr(this,function(h){switch(h.label){case 0:if(!vm())throw new Error("Can't enumerate devices, navigator is not present.");if(!PE())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=bm(e),i=n.next();!i.done;i=n.next())a=i.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device ".concat(r.length+1),o=a.groupId,c={deviceId:s,label:l,kind:u,groupId:o},r.push(c))}catch(p){f={error:p}}finally{try{i&&!i.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(i){return i.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return rr(this,void 0,void 0,function(){var n;return nr(this,function(i){switch(i.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=i.sent(),n?[2,!0]:[2,new Promise(function(a,u){var s=setTimeout(function(){t.isVideoPlaying(e)||(u(!1),e.removeEventListener("canplay",l))},r),l=function(){t.tryPlayVideo(e).then(function(o){clearTimeout(s),e.removeEventListener("canplay",l),a(o)})};e.addEventListener("canplay",l)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),rr(this,void 0,void 0,function(){var i;return nr(this,function(a){switch(a.label){case 0:return i=t.prepareVideoElement(r),t.addVideoSource(i,e),[4,t.playVideoOnLoadAsync(i,n)];case 1:return a.sent(),[2,i]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var i=1e4,a=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",u),n())},i),u=function(){clearTimeout(a),e.removeEventListener("load",u),r()};e.addEventListener("load",u)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Qt("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:if(!e)throw new Qt("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:if(!e)throw new Qt("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return rr(this,void 0,void 0,function(){var i,a;return nr(this,function(u){switch(u.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:i=u.sent(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.decodeFromStream(i,r,n)];case 3:return[2,u.sent()];case 4:throw a=u.sent(),t.disposeMediaStream(i),a;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return rr(this,void 0,void 0,function(){var i,a,u,s,l,o,c,f,d,h=this;return nr(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(n),i=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,i)];case 1:return a=p.sent(),u=function(){t.disposeMediaStream(e),t.cleanVideoSource(a)},s=this.scan(a,n,u),l=e.getVideoTracks(),o=nu(nu({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(m,v){return rr(this,void 0,void 0,function(){var x,y,_,I,C,j,z;return nr(this,function(W){switch(W.label){case 0:x=v?l.filter(v):l,W.label=1;case 1:W.trys.push([1,6,7,8]),y=bm(x),_=y.next(),W.label=2;case 2:return _.done?[3,5]:(I=_.value,[4,I.applyConstraints(m)]);case 3:W.sent(),W.label=4;case 4:return _=y.next(),[3,2];case 5:return[3,8];case 6:return C=W.sent(),j={error:C},[3,8];case 7:try{_&&!_.done&&(z=y.return)&&z.call(y)}finally{if(j)throw j.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return l.find(m).getConstraints()},streamVideoSettingsGet:function(m){return l.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return l.find(m).getCapabilities()}}),c=t.mediaStreamIsTorchCompatible(e),c&&(f=l?.find(function(m){return t.mediaStreamIsTorchCompatibleTrack(m)}),d=function(m){return rr(h,void 0,void 0,function(){return nr(this,function(v){switch(v.label){case 0:return[4,t.mediaStreamSetTorch(f,m)];case 1:return v.sent(),[2]}})})},o.switchTorch=d,o.stop=function(){return rr(h,void 0,void 0,function(){return nr(this,function(m){switch(m.label){case 0:return s.stop(),[4,d(!1)];case 1:return m.sent(),[2]}})})}),[2,o]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return rr(this,void 0,void 0,function(){var i,a;return nr(this,function(u){switch(u.label){case 0:return t.checkCallbackFnOrThrow(n),e?i={deviceId:{exact:e}}:i={facingMode:"environment"},a={video:i},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,u.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return rr(this,void 0,void 0,function(){var n,i;return nr(this,function(a){switch(a.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Qt("A video element must be provided.");return n=t.prepareVideoElement(e),i=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,i)];case 1:return a.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return rr(this,void 0,void 0,function(){var n,i,a,u;return nr(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Qt("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,i=function(){t.cleanVideoSource(n)},a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),u=this.scan(n,r,i),[2,u]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return rr(this,void 0,void 0,function(){var n;return nr(this,function(i){switch(i.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=i.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return rr(this,void 0,void 0,function(){var n,i,a;return nr(this,function(u){switch(u.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:i=u.sent(),u.label=2;case 2:return u.trys.push([2,,4,5]),[4,this.scanOneResult(i)];case 3:return a=u.sent(),[2,a];case 4:return n||t.cleanVideoSource(i),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return rr(this,void 0,void 0,function(){var n,i;return nr(this,function(a){switch(a.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},i={video:n},[4,this.decodeOnceFromConstraints(i,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return rr(this,void 0,void 0,function(){var r,n;return nr(this,function(i){switch(i.label){case 0:if(!e)throw new Qt("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return i.sent(),[4,this.scanOneResult(r)];case 2:return[2,i.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return rr(this,void 0,void 0,function(){var r,n;return nr(this,function(i){switch(i.label){case 0:if(!e)throw new Qt("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),i.label=1;case 1:return i.trys.push([1,,3,4]),[4,n];case 2:return[2,i.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,i){var a=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),i===void 0&&(i=!0),new Promise(function(u,s){a.scan(e,function(l,o,c){if(l){u(l),c.stop();return}if(o){if(o instanceof L&&r||o instanceof it&&n||o instanceof K&&i)return;c.stop(),s(o)}})})},t.prototype.scan=function(e,r,n){var i=this;t.checkCallbackFnOrThrow(r);var a=t.createCaptureCanvas(e),u;try{u=a.getContext("2d",{willReadFrequently:!0})}catch{u=a.getContext("2d")}if(!u)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){u=void 0,a=void 0},l=!1,o,c=function(){l=!0,clearTimeout(o),s(),n&&n()},f={stop:c},d=function(){if(!l)try{t.drawImageOnCanvas(u,e);var h=i.decodeFromCanvas(a);r(h,void 0,f),o=setTimeout(d,i.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var p=x instanceof it,m=x instanceof K,v=x instanceof L;if(p||m||v){o=setTimeout(d,i.options.delayBetweenScanAttempts);return}s(),n&&n(x)}};return d(),f},t.prototype._decodeOnLoadImage=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return rr(this,void 0,void 0,function(){var r;return nr(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}();var lU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kme=function(t){lU(e,t);function e(r,n){return t.call(this,new ki,r,n)||this}return e}(Wn);var cU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Vme=function(t){cU(e,t);function e(r,n){return t.call(this,new jo(r),r,n)||this}return e}(Wn);var fU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),zme=function(t){fU(e,t);function e(r,n){return t.call(this,new ji,r,n)||this}return e}(Wn);var dU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ME=function(t){dU(e,t);function e(r,n){var i=this,a=new Zl;return a.setHints(r),i=t.call(this,a,r,n)||this,i.reader=a,i}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Me.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Wn);var hU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kme=function(t){hU(e,t);function e(r,n){return t.call(this,new zi,r,n)||this}return e}(Wn);var pU=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var a in i)Object.prototype.hasOwnProperty.call(i,a)&&(n[a]=i[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t1e=function(t){pU(e,t);function e(r,n){return t.call(this,new Ui,r,n)||this}return e}(Wn);var wi="http://www.w3.org/2000/svg",o1e=function(){function t(e){if(typeof e=="string"){var r=document.getElementById(e);if(!r)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=r}else this.containerElement=e}return t.prototype.write=function(e,r,n,i){if(e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=i&&i.get(Oe.MARGIN)!==void 0?Number.parseInt(i.get(Oe.MARGIN).toString(),10):t.QUIET_ZONE_SIZE,u=this.encode(i,e);return this.renderResult(u,r,n,a)},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"svg");return n.setAttributeNS(wi,"width",r.toString()),n.setAttributeNS(wi,"height",e.toString()),n},t.prototype.createSvgPathPlaceholderElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"path");return n.setAttributeNS(wi,"d","M0 0h".concat(e,"v").concat(r,"H0z")),n.setAttributeNS(wi,"fill","none"),n},t.prototype.createSvgRectElement=function(e,r,n,i){var a=document.createElementNS(t.SVG_NS,"rect");return a.setAttributeNS(wi,"x",e.toString()),a.setAttributeNS(wi,"y",r.toString()),a.setAttributeNS(wi,"height",n.toString()),a.setAttributeNS(wi,"width",i.toString()),a.setAttributeNS(wi,"fill","#000000"),a},t.prototype.encode=function(e,r){var n=ln.L;if(e&&e.get(Oe.ERROR_CORRECTION)!==void 0){var i=e.get(Oe.ERROR_CORRECTION).toString();n=ln.fromString(i)}var a=bi.encode(r,n,e);return a},t.prototype.renderResult=function(e,r,n,i){var a=e.getMatrix();if(a===null)throw new mr;var u=a.getWidth(),s=a.getHeight(),l=u+i*2,o=s+i*2,c=Math.max(r,l),f=Math.max(n,o),d=Math.min(Math.floor(c/l),Math.floor(f/o)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=this.createSvgPathPlaceholderElement(r,n);m.appendChild(v),this.containerElement.appendChild(m);for(var x=0,y=p;x<s;x++,y+=d)for(var _=0,I=h;_<u;_++,I+=d)if(a.get(_,x)===1){var C=this.createSvgRectElement(I,y,d,d);m.appendChild(C)}return m},t.QUIET_ZONE_SIZE=4,t.SVG_NS="http://www.w3.org/2000/svg",t}();var NE="http://www.w3.org/2000/svg",s1e=function(){function t(){}return t.prototype.write=function(e,r,n,i){if(e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=ln.L,u=t.QUIET_ZONE_SIZE;if(i){if(i.get(Oe.ERROR_CORRECTION)!==void 0){var s=i.get(Oe.ERROR_CORRECTION).toString();a=ln.fromString(s)}i.get(Oe.MARGIN)!==void 0&&(u=Number.parseInt(i.get(Oe.MARGIN).toString(),10))}var l=bi.encode(e,a,i);return this.renderResult(l,r,n,u)},t.prototype.writeToDom=function(e,r,n,i,a){if(typeof e=="string"){var u=document.querySelector(e);if(!u)throw new Error("Could no find the target HTML element.");e=u}var s=this.write(r,n,i,a);e instanceof HTMLElement&&e.appendChild(s)},t.prototype.renderResult=function(e,r,n,i){var a=e.getMatrix();if(a===null)throw new mr;for(var u=a.getWidth(),s=a.getHeight(),l=u+i*2,o=s+i*2,c=Math.max(r,l),f=Math.max(n,o),d=Math.min(Math.floor(c/l),Math.floor(f/o)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)if(a.get(y,v)===1){var I=this.createSvgRectElement(_,x,d,d);m.appendChild(I)}return m},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(NE,"svg"),i=e.toString(),a=r.toString();return n.setAttribute("height",a),n.setAttribute("width",i),n.setAttribute("viewBox","0 0 "+i+" "+a),n},t.prototype.createSvgRectElement=function(e,r,n,i){var a=document.createElementNS(NE,"rect");return a.setAttribute("x",e.toString()),a.setAttribute("y",r.toString()),a.setAttribute("height",n.toString()),a.setAttribute("width",i.toString()),a.setAttribute("fill","#000000"),a},t.QUIET_ZONE_SIZE=4,t}();var gU=Object.create,Ih=Object.defineProperty,mU=Object.getOwnPropertyDescriptor,yU=Object.getOwnPropertyNames,vU=Object.getPrototypeOf,bU=Object.prototype.hasOwnProperty,Y=(t,e)=>()=>(t&&(e=t(t=0)),e),Gt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),hu=(t,e)=>{for(var r in e)Ih(t,r,{get:e[r],enumerable:!0})},dA=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of yU(e))!bU.call(t,i)&&i!==r&&Ih(t,i,{get:()=>e[i],enumerable:!(n=mU(e,i))||n.enumerable});return t},lu=(t,e,r)=>(r=t!=null?gU(vU(t)):{},dA(e||!t||!t.__esModule?Ih(r,"default",{value:t,enumerable:!0}):r,t)),Ja=t=>dA(Ih({},"__esModule",{value:!0}),t),nc,Wi,su,j1,U1=Y(()=>{"use strict";nc=new Map,Wi=[],su=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=nc.get(t);if(n===void 0)nc.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let i=Wi.indexOf(t);i!==-1&&Wi.splice(i,1);for(let a=0;a<Wi.length;a++)if(nc.get(Wi[a]).priority<=r){Wi.splice(a,0,t);return}Wi.push(t)}return}throw new TypeError("not a valid backend")},j1=t=>U(void 0,null,function*(){let e=t.length===0?Wi:t,r=[];for(let n of e){let i=nc.get(n);if(i){if(i.initialized)return i.backend;if(i.aborted)continue;let a=!!i.initPromise;try{return a||(i.initPromise=i.backend.init(n)),yield i.initPromise,i.initialized=!0,i.backend}catch(u){a||r.push({name:n,err:u}),i.aborted=!0}finally{delete i.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),wU=Y(()=>{"use strict";U1()}),hA,xU=Y(()=>{"use strict";hA="1.17.1"}),wm,uu,pA=Y(()=>{"use strict";xU(),wm="warning",uu={wasm:{},webgl:{},webgpu:{},versions:{common:hA},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);wm=t}},get logLevel(){return wm}},Object.defineProperty(uu,"logLevel",{enumerable:!0})}),we,_U=Y(()=>{"use strict";pA(),we=uu}),gA,mA,EU=Y(()=>{"use strict";gA=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let i,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[3]):(i=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,o;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?o=[0,0,0,0]:typeof s.bias=="number"?o=[s.bias,s.bias,s.bias,s.bias]:(o=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(o[3]=s.bias[3]));let c=a*i,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<i;v++){let x=(t.data[f++]-o[0])*l[0],y=(t.data[d++]-o[1])*l[1],_=(t.data[h++]-o[2])*l[2],I=p===-1?255:(t.data[p++]-o[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},mA=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[1],u=t.dims[3]):(i=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,o,c;l===void 0||l.mean===void 0?o=[255,255,255,255]:typeof l.mean=="number"?o=[l.mean,l.mean,l.mean,l.mean]:(o=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(o[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*i;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(i,a);for(let C=0;C<a*i;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*o[0],n.data[p]=(t.data[y++]-c[1])*o[1],n.data[m]=(t.data[_++]-c[2])*o[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*o[3]}else throw new Error("Can not access image data");return n}}),lh,yA,vA,bA,wA,TU=Y(()=>{"use strict";H1(),lh=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,i=e.norm??{mean:255,bias:0},a,u;typeof i.mean=="number"?a=[i.mean,i.mean,i.mean,i.mean]:a=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?u=[i.bias,i.bias,i.bias,i.bias]:u=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",o=r*n,c=l==="RGBA"?new Float32Array(o*4):new Float32Array(o*3),f=4,d=0,h=1,p=2,m=3,v=0,x=o,y=o*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=o*3:l==="RBG"?(v=0,y=o,x=o*2):l==="BGR"&&(y=0,x=o,v=o*2);for(let I=0;I<o;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new To("float32",c,[1,4,r,n]):new To("float32",c,[1,3,r,n])},yA=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,i=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},o=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=o(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(i){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,lh(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=o(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(lh(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return lh(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),vA=(t,e)=>{let{width:r,height:n,download:i,dispose:a}=e,u=[1,n,r,4];return new To({location:"texture",type:"float32",texture:t,dims:u,download:i,dispose:a})},bA=(t,e)=>{let{dataType:r,dims:n,download:i,dispose:a}=e;return new To({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:i,dispose:a})},wA=(t,e,r)=>new To({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),xc,mh,xm,xA,IU=Y(()=>{"use strict";xc=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),mh=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),xm=!1,xA=()=>{if(!xm){xm=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(xc.set("int64",BigInt64Array),mh.set(BigInt64Array,"int64")),e&&(xc.set("uint64",BigUint64Array),mh.set(BigUint64Array,"uint64"))}}}),_A,EA,AU=Y(()=>{"use strict";H1(),_A=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},EA=(t,e)=>{switch(t.location){case"cpu":return new To(t.type,t.data,e);case"cpu-pinned":return new To({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new To({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new To({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),To,H1=Y(()=>{"use strict";EU(),TU(),IU(),AU(),To=class{constructor(t,e,r){xA();let n,i;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,i=t.dims,t.location){case"cpu-pinned":{let u=xc.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=xc.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=mh.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");i=s,this.cpuData=u,this.dataLocation="cpu"}let a=_A(i);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=a}static fromImage(t,e){return U(this,null,function*(){return yA(t,e)})}static fromTexture(t,e){return vA(t,e)}static fromGpuBuffer(t,e){return bA(t,e)}static fromPinnedBuffer(t,e,r){return wA(t,e,r)}toDataURL(t){return gA(this,t)}toImageData(t){return mA(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return EA(this,t)}}}),Wr,z1=Y(()=>{"use strict";H1(),Wr=To}),o1,_m,cu,fu,TA=Y(()=>{"use strict";pA(),o1=(t,e)=>{uu.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},_m=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[i].trim().split(" ")[1]}`;e&&(a+=`::${e}`),o1("CPU",a);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},cu=t=>{uu.wasm.trace&&_m("BEGIN",t)},fu=t=>{uu.wasm.trace&&_m("END",t)}}),IA,SU=Y(()=>{"use strict";U1(),z1(),TA(),IA=class AA{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){cu();let i={},a={};if(typeof e!="object"||e===null||e instanceof Wr||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Wr)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let o of r){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);i[o]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof Wr)&&(o=!0,u=!1,i[f]=d)}if(o){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of this.inputNames)if(typeof e[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(u)for(let o of this.outputNames)i[o]=null;let s=yield this.handler.run(e,i,a),l={};for(let o in s)if(Object.hasOwnProperty.call(s,o)){let c=s[o];c instanceof Wr?l[o]=c:l[o]=new Wr(c.type,c.data,c.dims)}return fu(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,i){return U(this,null,function*(){cu();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let o=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=o.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${o.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>o.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${o.byteLength-c}].`);if(typeof i=="object"&&i!==null)u=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(o,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(o=>typeof o=="string"?o:o.name),l=yield(yield j1(s)).createInferenceSessionHandler(a,u);return fu(),new AA(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),_i,DU=Y(()=>{"use strict";SU(),_i=IA}),CU=Y(()=>{"use strict"}),RE,SA,OU=Y(()=>{"use strict";U1(),z1(),RE="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",SA=class DA{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",i=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield j1(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,i,a);return new DA(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(RE)})}typeNarrowingForRunStep(e,r,n,i,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof Wr||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof i=="object"){if(i===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(i instanceof Wr)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(i)){if(i.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let o of i){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);u[o]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(i);for(let f of r)if(c.indexOf(f)!==-1){let d=i[f];(d===null||d instanceof Wr)&&(o=!0,l=!1,u[f]=d)}if(o){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=i}}else if(typeof i<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of e)if(typeof n[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(l)for(let o of r)u[o]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let i=e[n];i instanceof Wr?r[n]=i:r[n]=new Wr(i.type,i.data,i.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[i,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[i,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),CA,PU=Y(()=>{"use strict";OU(),CA=SA}),OA={};hu(OA,{InferenceSession:()=>_i,TRACE:()=>o1,TRACE_FUNC_BEGIN:()=>cu,TRACE_FUNC_END:()=>fu,Tensor:()=>Wr,TrainingSession:()=>CA,env:()=>we,registerBackend:()=>su});var Go=Y(()=>{"use strict";wU(),_U(),DU(),z1(),TA(),CU(),PU()});function Ka(t,e,r,n){if(e===void 0)return MU(t);if(r===void 0)ch(t,e,1);else if(typeof r=="number"&&n===void 0)ch(t,e,r);else if(typeof r=="string"&&n===void 0)ch(t,r,1,e);else if(typeof r=="string"&&typeof n=="number")ch(t,r,n,e);else throw new TypeError("input is valid")}function MU(t){return{verbose:Ka.verbose.bind(null,t),info:Ka.info.bind(null,t),warning:Ka.warning.bind(null,t),error:Ka.error.bind(null,t),fatal:Ka.fatal.bind(null,t)}}function ch(t,e,r,n){let i=au[n||""]||au[""];i1[t]<i1[i.minimalSeverity]||(i.logDateTime&&(e=`${new Date().toISOString()}|${e}`),i.logSourceLocation,PA[i.provider].log(t,e,n))}var FE,kE,i1,PA,Em,au,cr,Tm,Im,MA,oc,Io=Y(()=>{"use strict";FE=class{log(t,e,r){}},kE=class{log(t,e,r){console.log(`${this.color(t)} ${r?"\x1B[35m"+r+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},i1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},PA={none:new FE,console:new kE},Em={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},au={"":Em},(t=>{function e(o,c){t("verbose",o,c)}t.verbose=e;function r(o,c){t("info",o,c)}t.info=r;function n(o,c){t("warning",o,c)}t.warning=n;function i(o,c){t("error",o,c)}t.error=i;function a(o,c){t("fatal",o,c)}t.fatal=a;function u(o){au={},s("",o||{})}t.reset=u;function s(o,c){if(o==="*")u(c);else{let f=au[o]||Em;au[o]={provider:c.provider||f.provider,minimalSeverity:c.minimalSeverity||f.minimalSeverity,logDateTime:c.logDateTime===void 0?f.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?f.logSourceLocation:c.logSourceLocation}}}t.set=s;function l(o){let c={};o.logLevel&&(c.minimalSeverity=o.logLevel),s("",c)}t.setWithEnv=l})(Ka||={}),cr=Ka,Tm=class{constructor(t,e,r,n,i,a){this.category=t,this.name=e,this.startTime=r,this.endCallback=n,this.timer=i,this.ctx=a}end(){return U(this,null,function*(){return this.endCallback(this)})}checkTimer(){return U(this,null,function*(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)})}},Im=class{constructor(t,e,r,n){this.category=t,this.name=e,this.startTime=r,this.endTime=n}},MA=class{constructor(t,e,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=r===void 0?5e3:r}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=oc(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,r,n){let i=this._started?this.begin(t,e,n):void 0,a=!1,u=r();if(u&&typeof u.then=="function")return a=!0,new Promise((s,l)=>{u.then(o=>U(this,null,function*(){i&&(yield i.end()),s(o)}),o=>U(this,null,function*(){i&&(yield i.end()),l(o)}))});if(!a&&i){let s=i.end();if(s&&typeof s.then=="function")return new Promise((l,o)=>{s.then(()=>{l(u)},c=>{o(c)})})}return u}begin(t,e,r){if(!this._started)throw new Error("profiler is not started yet");if(r===void 0){let n=oc();return this.flush(n),new Tm(t,e,n,i=>this.endSync(i))}else{let n=r.beginTimer();return new Tm(t,e,0,i=>U(this,null,function*(){return this.end(i)}),n,r)}}end(t){return U(this,null,function*(){let e=yield t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Im(t.category,t.name,t.startTime,e)),this.flush(e))})}endSync(t){let e=oc();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new Im(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){cr.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=oc()}}get started(){return this._started}},oc=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function NU(t,e,r){for(let n of r){let i=n[0],a=n[1],u=n[2],s=n[3],l=n[4];if(t.opType===i){for(let o of e)if((o.domain===a||o.domain==="ai.onnx"&&a==="")&&RU(o.version,u))return{opImpl:s,opInit:l}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(n=>`${n.domain||"ai.onnx"} v${n.version}`).join(", ")}`)}function RU(t,e){if(e.endsWith("+")){let r=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(r)&&r<=t}else if(e.split("-").length===2){let r=e.split("-"),n=Number.parseInt(r[0],10),i=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(i)&&n<=t&&t<=i}else return Number.parseInt(e,10)===t}var FU=Y(()=>{"use strict"}),kU=Gt(t=>{"use strict";t.__esModule=!0;var e=function(){function r(n){if(!n)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,n&&r.isGuid(n)&&(this.value=n)}return r.isGuid=function(n){var i=n.toString();return n&&(n instanceof r||r.validator.test(i))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(n){return new r(n)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(n){for(var i="",a=0;a<n;a++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i},r.prototype.equals=function(n){return r.isGuid(n)&&this.value===n.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();t.Guid=e});function Ht(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}function Qr(t){return(t&&t.__isLong__)===!0}function LE(t){var e=Math.clz32(t&-t);return t?31-e:e}function Wa(t,e){var r,n,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(n=s1[t],n)?n:(r=st(t,0,!0),i&&(s1[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(n=a1[t],n)?n:(r=st(t,t<0?-1:0,!1),i&&(a1[t]=r),r))}function Yn(t,e){if(isNaN(t))return e?Uo:Xn;if(e){if(t<0)return Uo;if(t>=u1)return f1}else{if(t<=-l1)return cn;if(t+1>=l1)return c1}return t<0?Yn(-t,e).neg():st(t%Qa|0,t/Qa|0,e)}function st(t,e,r){return new Ht(t,e,r)}function G1(t,e,r){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?Uo:Xn;if(r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return G1(t.substring(1),e,r).neg();for(var i=Yn(_c(r,8)),a=Xn,u=0;u<t.length;u+=8){var s=Math.min(8,t.length-u),l=parseInt(t.substring(u,u+s),r);if(s<8){var o=Yn(_c(r,s));a=a.mul(o).add(Yn(l))}else a=a.mul(i),a=a.add(Yn(l))}return a.unsigned=e,a}function Eo(t,e){return typeof t=="number"?Yn(t,e):typeof t=="string"?G1(t,e):st(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var On,a1,s1,_c,Am,BE,Qa,u1,l1,Sm,Xn,Uo,qa,Dm,fh,c1,f1,cn,ne,Ki,NA=Y(()=>{On=null;try{On=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Ht.prototype.__isLong__,Object.defineProperty(Ht.prototype,"__isLong__",{value:!0}),Ht.isLong=Qr,a1={},s1={},Ht.fromInt=Wa,Ht.fromNumber=Yn,Ht.fromBits=st,_c=Math.pow,Ht.fromString=G1,Ht.fromValue=Eo,Am=65536,BE=1<<24,Qa=Am*Am,u1=Qa*Qa,l1=u1/2,Sm=Wa(BE),Xn=Wa(0),Ht.ZERO=Xn,Uo=Wa(0,!0),Ht.UZERO=Uo,qa=Wa(1),Ht.ONE=qa,Dm=Wa(1,!0),Ht.UONE=Dm,fh=Wa(-1),Ht.NEG_ONE=fh,c1=st(-1,2147483647,!1),Ht.MAX_VALUE=c1,f1=st(-1,-1,!0),Ht.MAX_UNSIGNED_VALUE=f1,cn=st(0,-2147483648,!1),Ht.MIN_VALUE=cn,ne=Ht.prototype,ne.toInt=function(){return this.unsigned?this.low>>>0:this.low},ne.toNumber=function(){return this.unsigned?(this.high>>>0)*Qa+(this.low>>>0):this.high*Qa+(this.low>>>0)},ne.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(cn)){var e=Yn(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Yn(_c(t,6),this.unsigned),a=this,u="";;){var s=a.div(i),l=a.sub(s.mul(i)).toInt()>>>0,o=l.toString(t);if(a=s,a.isZero())return o+u;for(;o.length<6;)o="0"+o;u=""+o+u}},ne.getHighBits=function(){return this.high},ne.getHighBitsUnsigned=function(){return this.high>>>0},ne.getLowBits=function(){return this.low},ne.getLowBitsUnsigned=function(){return this.low>>>0},ne.getNumBitsAbs=function(){if(this.isNegative())return this.eq(cn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},ne.isZero=function(){return this.high===0&&this.low===0},ne.eqz=ne.isZero,ne.isNegative=function(){return!this.unsigned&&this.high<0},ne.isPositive=function(){return this.unsigned||this.high>=0},ne.isOdd=function(){return(this.low&1)===1},ne.isEven=function(){return(this.low&1)===0},ne.equals=function(t){return Qr(t)||(t=Eo(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},ne.eq=ne.equals,ne.notEquals=function(t){return!this.eq(t)},ne.neq=ne.notEquals,ne.ne=ne.notEquals,ne.lessThan=function(t){return this.comp(t)<0},ne.lt=ne.lessThan,ne.lessThanOrEqual=function(t){return this.comp(t)<=0},ne.lte=ne.lessThanOrEqual,ne.le=ne.lessThanOrEqual,ne.greaterThan=function(t){return this.comp(t)>0},ne.gt=ne.greaterThan,ne.greaterThanOrEqual=function(t){return this.comp(t)>=0},ne.gte=ne.greaterThanOrEqual,ne.ge=ne.greaterThanOrEqual,ne.compare=function(t){if(Qr(t)||(t=Eo(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},ne.comp=ne.compare,ne.negate=function(){return!this.unsigned&&this.eq(cn)?cn:this.not().add(qa)},ne.neg=ne.negate,ne.add=function(t){Qr(t)||(t=Eo(t));var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,i=this.low&65535,a=t.high>>>16,u=t.high&65535,s=t.low>>>16,l=t.low&65535,o=0,c=0,f=0,d=0;return d+=i+l,f+=d>>>16,d&=65535,f+=n+s,c+=f>>>16,f&=65535,c+=r+u,o+=c>>>16,c&=65535,o+=e+a,o&=65535,st(f<<16|d,o<<16|c,this.unsigned)},ne.subtract=function(t){return Qr(t)||(t=Eo(t)),this.add(t.neg())},ne.sub=ne.subtract,ne.multiply=function(t){if(this.isZero())return this;if(Qr(t)||(t=Eo(t)),On){var e=On.mul(this.low,this.high,t.low,t.high);return st(e,On.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Uo:Xn;if(this.eq(cn))return t.isOdd()?cn:Xn;if(t.eq(cn))return this.isOdd()?cn:Xn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Sm)&&t.lt(Sm))return Yn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,u=t.high>>>16,s=t.high&65535,l=t.low>>>16,o=t.low&65535,c=0,f=0,d=0,h=0;return h+=a*o,d+=h>>>16,h&=65535,d+=i*o,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=n*o,c+=f>>>16,f&=65535,f+=i*l,c+=f>>>16,f&=65535,f+=a*s,c+=f>>>16,f&=65535,c+=r*o+n*l+i*s+a*u,c&=65535,st(d<<16|h,c<<16|f,this.unsigned)},ne.mul=ne.multiply,ne.divide=function(t){if(Qr(t)||(t=Eo(t)),t.isZero())throw Error("division by zero");if(On){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?On.div_u:On.div_s)(this.low,this.high,t.low,t.high);return st(e,On.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Uo:Xn;var r,n,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Uo;if(t.gt(this.shru(1)))return Dm;i=Uo}else{if(this.eq(cn)){if(t.eq(qa)||t.eq(fh))return cn;if(t.eq(cn))return qa;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(Xn)?t.isNegative()?qa:fh:(n=this.sub(t.mul(r)),i=r.add(n.div(t)),i)}else if(t.eq(cn))return this.unsigned?Uo:Xn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Xn}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),s=u<=48?1:_c(2,u-48),l=Yn(r),o=l.mul(t);o.isNegative()||o.gt(n);)r-=s,l=Yn(r,this.unsigned),o=l.mul(t);l.isZero()&&(l=qa),i=i.add(l),n=n.sub(o)}return i},ne.div=ne.divide,ne.modulo=function(t){if(Qr(t)||(t=Eo(t)),On){var e=(this.unsigned?On.rem_u:On.rem_s)(this.low,this.high,t.low,t.high);return st(e,On.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},ne.mod=ne.modulo,ne.rem=ne.modulo,ne.not=function(){return st(~this.low,~this.high,this.unsigned)},ne.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},ne.clz=ne.countLeadingZeros,ne.countTrailingZeros=function(){return this.low?LE(this.low):LE(this.high)+32},ne.ctz=ne.countTrailingZeros,ne.and=function(t){return Qr(t)||(t=Eo(t)),st(this.low&t.low,this.high&t.high,this.unsigned)},ne.or=function(t){return Qr(t)||(t=Eo(t)),st(this.low|t.low,this.high|t.high,this.unsigned)},ne.xor=function(t){return Qr(t)||(t=Eo(t)),st(this.low^t.low,this.high^t.high,this.unsigned)},ne.shiftLeft=function(t){return Qr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?st(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):st(0,this.low<<t-32,this.unsigned)},ne.shl=ne.shiftLeft,ne.shiftRight=function(t){return Qr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?st(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):st(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},ne.shr=ne.shiftRight,ne.shiftRightUnsigned=function(t){return Qr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?st(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?st(this.high,0,this.unsigned):st(this.high>>>t-32,0,this.unsigned)},ne.shru=ne.shiftRightUnsigned,ne.shr_u=ne.shiftRightUnsigned,ne.rotateLeft=function(t){var e;return Qr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?st(this.high,this.low,this.unsigned):t<32?(e=32-t,st(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,st(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},ne.rotl=ne.rotateLeft,ne.rotateRight=function(t){var e;return Qr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?st(this.high,this.low,this.unsigned):t<32?(e=32-t,st(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,st(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},ne.rotr=ne.rotateRight,ne.toSigned=function(){return this.unsigned?st(this.low,this.high,!1):this},ne.toUnsigned=function(){return this.unsigned?this:st(this.low,this.high,!0)},ne.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},ne.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},ne.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},Ht.fromBytes=function(t,e,r){return r?Ht.fromBytesLE(t,e):Ht.fromBytesBE(t,e)},Ht.fromBytesLE=function(t,e){return new Ht(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Ht.fromBytesBE=function(t,e){return new Ht(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},Ki=Ht}),$,W1=Y(()=>{$={},$.Offset,$.Table,$.SIZEOF_SHORT=2,$.SIZEOF_INT=4,$.FILE_IDENTIFIER_LENGTH=4,$.SIZE_PREFIX_LENGTH=4,$.Encoding={UTF8_BYTES:1,UTF16_STRING:2},$.int32=new Int32Array(2),$.float32=new Float32Array($.int32.buffer),$.float64=new Float64Array($.int32.buffer),$.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,$.Long=function(t,e){this.low=t|0,this.high=e|0},$.Long.create=function(t,e){return t==0&&e==0?$.Long.ZERO:new $.Long(t,e)},$.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},$.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},$.Long.ZERO=new $.Long(0,0),$.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=$.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},$.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},$.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},$.Builder.prototype.dataBuffer=function(){return this.bb},$.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},$.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<r+t+e;){var n=this.bb.capacity();this.bb=$.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(r)},$.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},$.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},$.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},$.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},$.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},$.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},$.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},$.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},$.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},$.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},$.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},$.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},$.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},$.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},$.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},$.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},$.Builder.prototype.addFieldInt64=function(t,e,r){(this.force_defaults||!e.equals(r))&&(this.addInt64(e),this.slot(t))},$.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},$.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},$.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},$.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},$.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},$.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},$.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},$.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},$.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,n=$.ByteBuffer.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n},$.Builder.prototype.addOffset=function(t){this.prep($.SIZEOF_INT,0),this.writeInt32(this.offset()-t+$.SIZEOF_INT)},$.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},$.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var r=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var n=2;this.addInt16(t-this.object_start);var i=(r+n)*$.SIZEOF_SHORT;this.addInt16(i);var a=0,u=this.space;e:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var l=$.SIZEOF_SHORT;l<i;l+=$.SIZEOF_SHORT)if(this.bb.readInt16(u+l)!=this.bb.readInt16(s+l))continue e;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},$.Builder.prototype.finish=function(t,e,r){var n=r?$.SIZE_PREFIX_LENGTH:0;if(e){var i=e;if(this.prep(this.minalign,$.SIZEOF_INT+$.FILE_IDENTIFIER_LENGTH+n),i.length!=$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+$.FILE_IDENTIFIER_LENGTH);for(var a=$.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,$.SIZEOF_INT+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},$.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},$.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,n=r-this.bb.readInt32(r),i=this.bb.readInt16(n+e)!=0;if(!i)throw new Error("FlatBuffers: field "+e+" must be set")},$.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep($.SIZEOF_INT,t*e),this.prep(r,t*e)},$.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},$.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],r=0;r<t.length;){var n,i=t.charCodeAt(r++);if(i<55296||i>=56320)n=i;else{var a=t.charCodeAt(r++);n=(i<<10)+a+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(n&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var r=0,u=this.space,s=this.bb.bytes();r<e.length;r++)s[u++]=e[r];return this.endVector()},$.Builder.prototype.createLong=function(t,e){return $.Long.create(t,e)},$.ByteBuffer=function(t){this.bytes_=t,this.position_=0},$.ByteBuffer.allocate=function(t){return new $.ByteBuffer(new Uint8Array(t))},$.ByteBuffer.prototype.clear=function(){this.position_=0},$.ByteBuffer.prototype.bytes=function(){return this.bytes_},$.ByteBuffer.prototype.position=function(){return this.position_},$.ByteBuffer.prototype.setPosition=function(t){this.position_=t},$.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},$.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},$.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},$.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},$.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},$.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},$.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},$.ByteBuffer.prototype.readInt64=function(t){return new $.Long(this.readInt32(t),this.readInt32(t+4))},$.ByteBuffer.prototype.readUint64=function(t){return new $.Long(this.readUint32(t),this.readUint32(t+4))},$.ByteBuffer.prototype.readFloat32=function(t){return $.int32[0]=this.readInt32(t),$.float32[0]},$.ByteBuffer.prototype.readFloat64=function(t){return $.int32[$.isLittleEndian?0:1]=this.readInt32(t),$.int32[$.isLittleEndian?1:0]=this.readInt32(t+4),$.float64[0]},$.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},$.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},$.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},$.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},$.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},$.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},$.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},$.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},$.ByteBuffer.prototype.writeFloat32=function(t,e){$.float32[0]=e,this.writeInt32(t,$.int32[0])},$.ByteBuffer.prototype.writeFloat64=function(t,e){$.float64[0]=e,this.writeInt32(t,$.int32[$.isLittleEndian?0:1]),this.writeInt32(t+4,$.int32[$.isLittleEndian?1:0])},$.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+$.SIZEOF_INT+$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<$.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+$.SIZEOF_INT+e));return t},$.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},$.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},$.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",i=0;if(t+=$.SIZEOF_INT,e===$.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;i<r;){var a,u=this.readUint8(t+i++);if(u<192)a=u;else{var s=this.readUint8(t+i++);if(u<224)a=(u&31)<<6|s&63;else{var l=this.readUint8(t+i++);if(u<240)a=(u&15)<<12|(s&63)<<6|l&63;else{var o=this.readUint8(t+i++);a=(u&7)<<18|(s&63)<<12|(l&63)<<6|o&63}}}a<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode((a>>10)+55296,(a&1023)+56320))}return n},$.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},$.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+$.SIZEOF_INT},$.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},$.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+$.FILE_IDENTIFIER_LENGTH);for(var e=0;e<$.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+$.SIZEOF_INT+e))return!1;return!0},$.ByteBuffer.prototype.createLong=function(t,e){return $.Long.create(t,e)}}),Et,Ah=Y(()=>{"use strict";W1(),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.INT=2]="INT",u[u.STRING=3]="STRING",u[u.TENSOR=4]="TENSOR",u[u.GRAPH=5]="GRAPH",u[u.FLOATS=6]="FLOATS",u[u.INTS=7]="INTS",u[u.STRINGS=8]="STRINGS",u[u.TENSORS=9]="TENSORS",u[u.GRAPHS=10]="GRAPHS",u[u.SPARSE_TENSOR=11]="SPARSE_TENSOR",u[u.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a=i.AttributeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNKNOWN=0]="UNKNOWN",u[u.VALUE=1]="VALUE",u[u.PARAM=2]="PARAM"))(a=i.DimensionValueType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.UINT8=2]="UINT8",u[u.INT8=3]="INT8",u[u.UINT16=4]="UINT16",u[u.INT16=5]="INT16",u[u.INT32=6]="INT32",u[u.INT64=7]="INT64",u[u.STRING=8]="STRING",u[u.BOOL=9]="BOOL",u[u.FLOAT16=10]="FLOAT16",u[u.DOUBLE=11]="DOUBLE",u[u.UINT32=12]="UINT32",u[u.UINT64=13]="UINT64",u[u.COMPLEX64=14]="COMPLEX64",u[u.COMPLEX128=15]="COMPLEX128",u[u.BFLOAT16=16]="BFLOAT16",u[u.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",u[u.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",u[u.FLOAT8E5M2=19]="FLOAT8E5M2",u[u.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a=i.TensorDataType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(a=i.NodeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.NONE=0]="NONE",u[u.tensor_type=1]="tensor_type",u[u.sequence_type=2]="sequence_type",u[u.map_type=3]="map_type"))(a=i.TypeInfoValue||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsShape(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dim(s,l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}dimLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}static startShape(s){s.startObject(1)}static addDim(s,l){s.addFieldOffset(0,l,0)}static createDimVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startDimVector(s,l){s.startVector(4,l,4)}static endShape(s){return s.endObject()}static createShape(s,l){return a.startShape(s),a.addDim(s,l),a.endShape(s)}}i.Shape=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimension(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimension(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}value(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimension(s){s.startObject(2)}static addValue(s,l){s.addFieldOffset(0,l,0)}static addDenotation(s,l){s.addFieldOffset(1,l,0)}static endDimension(s){return s.endObject()}static createDimension(s,l,o){return a.startDimension(s),a.addValue(s,l),a.addDenotation(s,o),a.endDimension(s)}}i.Dimension=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimensionValue(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimensionValue(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dimType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):0}dimValue(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}dimParam(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimensionValue(s){s.startObject(3)}static addDimType(s,l){s.addFieldInt8(0,l,0)}static addDimValue(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static addDimParam(s,l){s.addFieldOffset(2,l,0)}static endDimensionValue(s){return s.endObject()}static createDimensionValue(s,l,o,c){return a.startDimensionValue(s),a.addDimType(s,l),a.addDimValue(s,o),a.addDimParam(s,c),a.endDimensionValue(s)}}i.DimensionValue=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensorTypeAndShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorTypeAndShape(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}shape(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(s){s.startObject(2)}static addElemType(s,l){s.addFieldInt32(0,l,0)}static addShape(s,l){s.addFieldOffset(1,l,0)}static endTensorTypeAndShape(s){return s.endObject()}static createTensorTypeAndShape(s,l,o){return a.startTensorTypeAndShape(s),a.addElemType(s,l),a.addShape(s,o),a.endTensorTypeAndShape(s)}}i.TensorTypeAndShape=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsMapType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMapType(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}keyType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}valueType(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(s){s.startObject(2)}static addKeyType(s,l){s.addFieldInt32(0,l,0)}static addValueType(s,l){s.addFieldOffset(1,l,0)}static endMapType(s){return s.endObject()}static createMapType(s,l,o){return a.startMapType(s),a.addKeyType(s,l),a.addValueType(s,o),a.endMapType(s)}}i.MapType=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSequenceType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSequenceType(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(s){s.startObject(1)}static addElemType(s,l){s.addFieldOffset(0,l,0)}static endSequenceType(s){return s.endObject()}static createSequenceType(s,l){return a.startSequenceType(s),a.addElemType(s,l),a.endSequenceType(s)}}i.SequenceType=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(s,l,o,c){return s.prep(4,12),s.writeInt32(c),s.writeInt32(o),s.writeInt32(l),s.offset()}}i.EdgeEnd=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNodeEdge(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNodeEdge(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndex(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readUint32(this.bb_pos+s):0}inputEdges(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+s*12,this.bb):null}inputEdgesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}outputEdges(s,l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+s*12,this.bb):null}outputEdgesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNodeEdge(s){s.startObject(3)}static addNodeIndex(s,l){s.addFieldInt32(0,l,0)}static addInputEdges(s,l){s.addFieldOffset(1,l,0)}static startInputEdgesVector(s,l){s.startVector(12,l,4)}static addOutputEdges(s,l){s.addFieldOffset(2,l,0)}static startOutputEdgesVector(s,l){s.startVector(12,l,4)}static endNodeEdge(s){return s.endObject()}static createNodeEdge(s,l,o,c){return a.startNodeEdge(s),a.addNodeIndex(s,l),a.addInputEdges(s,o),a.addOutputEdges(s,c),a.endNodeEdge(s)}}i.NodeEdge=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNode(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNode(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}sinceVersion(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}index(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readUint32(this.bb_pos+s):0}opType(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.readInt32(this.bb_pos+s):0}executionProviderType(s){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,s):null}inputs(s,l){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}attributes(s,l){let o=this.bb.__offset(this.bb_pos,24);return o?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}attributesLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCounts(s){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+s*4):0}inputArgCountsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCountsArray(){let s=this.bb.__offset(this.bb_pos,26);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}implicitInputs(s,l){let o=this.bb.__offset(this.bb_pos,28);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}implicitInputsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNode(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDomain(s,l){s.addFieldOffset(2,l,0)}static addSinceVersion(s,l){s.addFieldInt32(3,l,0)}static addIndex(s,l){s.addFieldInt32(4,l,0)}static addOpType(s,l){s.addFieldOffset(5,l,0)}static addType(s,l){s.addFieldInt32(6,l,0)}static addExecutionProviderType(s,l){s.addFieldOffset(7,l,0)}static addInputs(s,l){s.addFieldOffset(8,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(9,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addAttributes(s,l){s.addFieldOffset(10,l,0)}static createAttributesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startAttributesVector(s,l){s.startVector(4,l,4)}static addInputArgCounts(s,l){s.addFieldOffset(11,l,0)}static createInputArgCountsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addInt32(l[o]);return s.endVector()}static startInputArgCountsVector(s,l){s.startVector(4,l,4)}static addImplicitInputs(s,l){s.addFieldOffset(12,l,0)}static createImplicitInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startImplicitInputsVector(s,l){s.startVector(4,l,4)}static endNode(s){return s.endObject()}static createNode(s,l,o,c,f,d,h,p,m,v,x,y,_,I){return a.startNode(s),a.addName(s,l),a.addDocString(s,o),a.addDomain(s,c),a.addSinceVersion(s,f),a.addIndex(s,d),a.addOpType(s,h),a.addType(s,p),a.addExecutionProviderType(s,m),a.addInputs(s,v),a.addOutputs(s,x),a.addAttributes(s,y),a.addInputArgCounts(s,_),a.addImplicitInputs(s,I),a.endNode(s)}}i.Node=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsValueInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsValueInfo(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(s){s.startObject(3)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldOffset(2,l,0)}static endValueInfo(s){return s.endObject()}static createValueInfo(s,l,o,c){return a.startValueInfo(s),a.addName(s,l),a.addDocString(s,o),a.addType(s,c),a.endValueInfo(s)}}i.ValueInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTypeInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTypeInfo(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}denotation(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}valueType(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readUint8(this.bb_pos+s):0}value(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(s,this.bb_pos+l):null}static startTypeInfo(s){s.startObject(3)}static addDenotation(s,l){s.addFieldOffset(0,l,0)}static addValueType(s,l){s.addFieldInt8(1,l,0)}static addValue(s,l){s.addFieldOffset(2,l,0)}static endTypeInfo(s){return s.endObject()}static createTypeInfo(s,l,o,c){return a.startTypeInfo(s),a.addDenotation(s,l),a.addValueType(s,o),a.addValue(s,c),a.endTypeInfo(s)}}i.TypeInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsOperatorSetId(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsOperatorSetId(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}domain(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}version(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}static startOperatorSetId(s){s.startObject(2)}static addDomain(s,l){s.addFieldOffset(0,l,0)}static addVersion(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static endOperatorSetId(s){return s.endObject()}static createOperatorSetId(s,l,o){return a.startOperatorSetId(s),a.addDomain(s,l),a.addVersion(s,o),a.endOperatorSetId(s)}}i.OperatorSetId=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensor(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}dataType(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}rawData(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+s):0}rawDataLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}rawDataArray(){let s=this.bb.__offset(this.bb_pos,12);return s?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}stringData(s,l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}stringDataLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}static startTensor(s){s.startObject(6)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static addDataType(s,l){s.addFieldInt32(3,l,0)}static addRawData(s,l){s.addFieldOffset(4,l,0)}static createRawDataVector(s,l){s.startVector(1,l.length,1);for(let o=l.length-1;o>=0;o--)s.addInt8(l[o]);return s.endVector()}static startRawDataVector(s,l){s.startVector(1,l,1)}static addStringData(s,l){s.addFieldOffset(5,l,0)}static createStringDataVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startStringDataVector(s,l){s.startVector(4,l,4)}static endTensor(s){return s.endObject()}static createTensor(s,l,o,c,f,d,h){return a.startTensor(s),a.addName(s,l),a.addDocString(s,o),a.addDims(s,c),a.addDataType(s,f),a.addRawData(s,d),a.addStringData(s,h),a.endTensor(s)}}i.Tensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSparseTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensor(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}values(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSparseTensor(s){s.startObject(3)}static addValues(s,l){s.addFieldOffset(0,l,0)}static addIndices(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static endSparseTensor(s){return s.endObject()}static createSparseTensor(s,l,o,c){return a.startSparseTensor(s),a.addValues(s,l),a.addIndices(s,o),a.addDims(s,c),a.endSparseTensor(s)}}i.SparseTensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsAttribute(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsAttribute(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):0}f(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readFloat32(this.bb_pos+s):0}i(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}s(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}t(s){let l=this.bb.__offset(this.bb_pos,16);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+s*4):0}floatsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}floatsArray(){let s=this.bb.__offset(this.bb_pos,20);return s?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}ints(s){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}intsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}strings(s,l){let o=this.bb.__offset(this.bb_pos,24);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}stringsLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}tensors(s,l){let o=this.bb.__offset(this.bb_pos,26);return o?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}tensorsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}graphs(s,l){let o=this.bb.__offset(this.bb_pos,28);return o?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}graphsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startAttribute(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldInt32(2,l,0)}static addF(s,l){s.addFieldFloat32(3,l,0)}static addI(s,l){s.addFieldInt64(4,l,s.createLong(0,0))}static addS(s,l){s.addFieldOffset(5,l,0)}static addT(s,l){s.addFieldOffset(6,l,0)}static addG(s,l){s.addFieldOffset(7,l,0)}static addFloats(s,l){s.addFieldOffset(8,l,0)}static createFloatsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addFloat32(l[o]);return s.endVector()}static startFloatsVector(s,l){s.startVector(4,l,4)}static addInts(s,l){s.addFieldOffset(9,l,0)}static createIntsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startIntsVector(s,l){s.startVector(8,l,8)}static addStrings(s,l){s.addFieldOffset(10,l,0)}static createStringsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startStringsVector(s,l){s.startVector(4,l,4)}static addTensors(s,l){s.addFieldOffset(11,l,0)}static createTensorsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startTensorsVector(s,l){s.startVector(4,l,4)}static addGraphs(s,l){s.addFieldOffset(12,l,0)}static createGraphsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startGraphsVector(s,l){s.startVector(4,l,4)}static endAttribute(s){return s.endObject()}static createAttribute(s,l,o,c,f,d,h,p,m,v,x,y,_,I){return a.startAttribute(s),a.addName(s,l),a.addDocString(s,o),a.addType(s,c),a.addF(s,f),a.addI(s,d),a.addS(s,h),a.addT(s,p),a.addG(s,m),a.addFloats(s,v),a.addInts(s,x),a.addStrings(s,y),a.addTensors(s,_),a.addGraphs(s,I),a.endAttribute(s)}}i.Attribute=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsGraph(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsGraph(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}initializers(s,l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}initializersLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeArgs(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodeArgsLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}nodes(s,l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}maxNodeIndex(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readUint32(this.bb_pos+s):0}nodeEdges(s,l){let o=this.bb.__offset(this.bb_pos,12);return o?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodeEdgesLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}inputs(s,l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__vector_len(this.bb_pos+s):0}sparseInitializers(s,l){let o=this.bb.__offset(this.bb_pos,18);return o?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}sparseInitializersLength(){let s=this.bb.__offset(this.bb_pos,18);return s?this.bb.__vector_len(this.bb_pos+s):0}static startGraph(s){s.startObject(8)}static addInitializers(s,l){s.addFieldOffset(0,l,0)}static createInitializersVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInitializersVector(s,l){s.startVector(4,l,4)}static addNodeArgs(s,l){s.addFieldOffset(1,l,0)}static createNodeArgsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodeArgsVector(s,l){s.startVector(4,l,4)}static addNodes(s,l){s.addFieldOffset(2,l,0)}static createNodesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodesVector(s,l){s.startVector(4,l,4)}static addMaxNodeIndex(s,l){s.addFieldInt32(3,l,0)}static addNodeEdges(s,l){s.addFieldOffset(4,l,0)}static createNodeEdgesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodeEdgesVector(s,l){s.startVector(4,l,4)}static addInputs(s,l){s.addFieldOffset(5,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(6,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addSparseInitializers(s,l){s.addFieldOffset(7,l,0)}static createSparseInitializersVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startSparseInitializersVector(s,l){s.startVector(4,l,4)}static endGraph(s){return s.endObject()}static createGraph(s,l,o,c,f,d,h,p,m){return a.startGraph(s),a.addInitializers(s,l),a.addNodeArgs(s,o),a.addNodes(s,c),a.addMaxNodeIndex(s,f),a.addNodeEdges(s,d),a.addInputs(s,h),a.addOutputs(s,p),a.addSparseInitializers(s,m),a.endGraph(s)}}i.Graph=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsModel(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsModel(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}irVersion(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}opsetImport(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}opsetImportLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}producerName(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}producerVersion(s){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,s):null}modelVersion(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}docString(s){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,s):null}graph(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,s):null}static startModel(s){s.startObject(9)}static addIrVersion(s,l){s.addFieldInt64(0,l,s.createLong(0,0))}static addOpsetImport(s,l){s.addFieldOffset(1,l,0)}static createOpsetImportVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOpsetImportVector(s,l){s.startVector(4,l,4)}static addProducerName(s,l){s.addFieldOffset(2,l,0)}static addProducerVersion(s,l){s.addFieldOffset(3,l,0)}static addDomain(s,l){s.addFieldOffset(4,l,0)}static addModelVersion(s,l){s.addFieldInt64(5,l,s.createLong(0,0))}static addDocString(s,l){s.addFieldOffset(6,l,0)}static addGraph(s,l){s.addFieldOffset(7,l,0)}static addGraphDocString(s,l){s.addFieldOffset(8,l,0)}static endModel(s){return s.endObject()}static createModel(s,l,o,c,f,d,h,p,m,v){return a.startModel(s),a.addIrVersion(s,l),a.addOpsetImport(s,o),a.addProducerName(s,c),a.addProducerVersion(s,f),a.addDomain(s,d),a.addModelVersion(s,h),a.addDocString(s,p),a.addGraph(s,m),a.addGraphDocString(s,v),a.endModel(s)}}i.Model=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsKernelCreateInfos(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKernelCreateInfos(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndices(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+s*4):0}nodeIndicesLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeIndicesArray(){let s=this.bb.__offset(this.bb_pos,4);return s?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}kernelDefHashes(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startKernelCreateInfos(s){s.startObject(2)}static addNodeIndices(s,l){s.addFieldOffset(0,l,0)}static createNodeIndicesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addInt32(l[o]);return s.endVector()}static startNodeIndicesVector(s,l){s.startVector(4,l,4)}static addKernelDefHashes(s,l){s.addFieldOffset(1,l,0)}static createKernelDefHashesVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startKernelDefHashesVector(s,l){s.startVector(8,l,8)}static endKernelCreateInfos(s){return s.endObject()}static createKernelCreateInfos(s,l,o){return a.startKernelCreateInfos(s),a.addNodeIndices(s,l),a.addKernelDefHashes(s,o),a.endKernelCreateInfos(s)}}i.KernelCreateInfos=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSubGraphSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSubGraphSessionState(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}graphId(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(s){s.startObject(2)}static addGraphId(s,l){s.addFieldOffset(0,l,0)}static addSessionState(s,l){s.addFieldOffset(1,l,0)}static endSubGraphSessionState(s){let l=s.endObject();return s.requiredField(l,4),l}static createSubGraphSessionState(s,l,o){return a.startSubGraphSessionState(s),a.addGraphId(s,l),a.addSessionState(s,o),a.endSubGraphSessionState(s)}}i.SubGraphSessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSessionState(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}kernels(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}subGraphSessionStatesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSessionState(s){s.startObject(2)}static addKernels(s,l){s.addFieldOffset(0,l,0)}static addSubGraphSessionStates(s,l){s.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startSubGraphSessionStatesVector(s,l){s.startVector(4,l,4)}static endSessionState(s){return s.endObject()}static createSessionState(s,l,o){return a.startSessionState(s),a.addKernels(s,l),a.addSubGraphSessionStates(s,o),a.endSessionState(s)}}i.SessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsInferenceSession(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInferenceSession(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static bufferHasIdentifier(s){return s.__has_identifier("ORTM")}ortVersion(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}model(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(s){s.startObject(3)}static addOrtVersion(s,l){s.addFieldOffset(0,l,0)}static addModel(s,l){s.addFieldOffset(1,l,0)}static addSessionState(s,l){s.addFieldOffset(2,l,0)}static endInferenceSession(s){return s.endObject()}static finishInferenceSessionBuffer(s,l){s.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(s,l){s.finish(l,"ORTM",!0)}static createInferenceSession(s,l,o,c){return a.startInferenceSession(s),a.addOrtVersion(s,l),a.addModel(s,o),a.addSessionState(s,c),a.endInferenceSession(s)}}i.InferenceSession=a})(n=r.fbs||={})})(e=t.experimental||={})})(Et||={})}),LU=Gt((t,e)=>{"use strict";e.exports=r;function r(n,i){for(var a=new Array(arguments.length-1),u=0,s=2,l=!0;s<arguments.length;)a[u++]=arguments[s++];return new Promise(function(o,c){a[u]=function(f){if(l)if(l=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];o.apply(null,d)}};try{n.apply(i||null,a)}catch(f){l&&(l=!1,c(f))}})}}),BU=Gt(t=>{"use strict";var e=t;e.length=function(u){var s=u.length;if(!s)return 0;for(var l=0;--s%4>1&&u.charAt(s)==="=";)++l;return Math.ceil(u.length*3)/4-l};var r=new Array(64),n=new Array(123);for(i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;var i;e.encode=function(u,s,l){for(var o=null,c=[],f=0,d=0,h;s<l;){var p=u[s++];switch(d){case 0:c[f++]=r[p>>2],h=(p&3)<<4,d=1;break;case 1:c[f++]=r[h|p>>4],h=(p&15)<<2,d=2;break;case 2:c[f++]=r[h|p>>6],c[f++]=r[p&63],d=0;break}f>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,c)),f=0)}return d&&(c[f++]=r[h],c[f++]=61,d===1&&(c[f++]=61)),o?(f&&o.push(String.fromCharCode.apply(String,c.slice(0,f))),o.join("")):String.fromCharCode.apply(String,c.slice(0,f))};var a="invalid encoding";e.decode=function(u,s,l){for(var o=l,c=0,f,d=0;d<u.length;){var h=u.charCodeAt(d++);if(h===61&&c>1)break;if((h=n[h])===void 0)throw Error(a);switch(c){case 0:f=h,c=1;break;case 1:s[l++]=f<<2|(h&48)>>4,f=h,c=2;break;case 2:s[l++]=(f&15)<<4|(h&60)>>2,f=h,c=3;break;case 3:s[l++]=(f&3)<<6|h,c=0;break}}if(c===1)throw Error(a);return l-o},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}),$U=Gt((t,e)=>{"use strict";e.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,i,a){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:a||this}),this},r.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var a=this._listeners[n],u=0;u<a.length;)a[u].fn===i?a.splice(u,1):++u;return this},r.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var a=[],u=1;u<arguments.length;)a.push(arguments[u++]);for(u=0;u<i.length;)i[u].fn.apply(i[u++].ctx,a)}return this}}),VU=Gt((t,e)=>{"use strict";e.exports=r(r);function r(s){return typeof Float32Array<"u"?function(){var l=new Float32Array([-0]),o=new Uint8Array(l.buffer),c=o[3]===128;function f(m,v,x){l[0]=m,v[x]=o[0],v[x+1]=o[1],v[x+2]=o[2],v[x+3]=o[3]}function d(m,v,x){l[0]=m,v[x]=o[3],v[x+1]=o[2],v[x+2]=o[1],v[x+3]=o[0]}s.writeFloatLE=c?f:d,s.writeFloatBE=c?d:f;function h(m,v){return o[0]=m[v],o[1]=m[v+1],o[2]=m[v+2],o[3]=m[v+3],l[0]}function p(m,v){return o[3]=m[v],o[2]=m[v+1],o[1]=m[v+2],o[0]=m[v+3],l[0]}s.readFloatLE=c?h:p,s.readFloatBE=c?p:h}():function(){function l(c,f,d,h){var p=f<0?1:0;if(p&&(f=-f),f===0)c(1/f>0?0:2147483648,d,h);else if(isNaN(f))c(2143289344,d,h);else if(f>34028234663852886e22)c((p<<31|2139095040)>>>0,d,h);else if(f<11754943508222875e-54)c((p<<31|Math.round(f/1401298464324817e-60))>>>0,d,h);else{var m=Math.floor(Math.log(f)/Math.LN2),v=Math.round(f*Math.pow(2,-m)*8388608)&8388607;c((p<<31|m+127<<23|v)>>>0,d,h)}}s.writeFloatLE=l.bind(null,n),s.writeFloatBE=l.bind(null,i);function o(c,f,d){var h=c(f,d),p=(h>>31)*2+1,m=h>>>23&255,v=h&8388607;return m===255?v?NaN:p*(1/0):m===0?p*1401298464324817e-60*v:p*Math.pow(2,m-150)*(v+8388608)}s.readFloatLE=o.bind(null,a),s.readFloatBE=o.bind(null,u)}(),typeof Float64Array<"u"?function(){var l=new Float64Array([-0]),o=new Uint8Array(l.buffer),c=o[7]===128;function f(m,v,x){l[0]=m,v[x]=o[0],v[x+1]=o[1],v[x+2]=o[2],v[x+3]=o[3],v[x+4]=o[4],v[x+5]=o[5],v[x+6]=o[6],v[x+7]=o[7]}function d(m,v,x){l[0]=m,v[x]=o[7],v[x+1]=o[6],v[x+2]=o[5],v[x+3]=o[4],v[x+4]=o[3],v[x+5]=o[2],v[x+6]=o[1],v[x+7]=o[0]}s.writeDoubleLE=c?f:d,s.writeDoubleBE=c?d:f;function h(m,v){return o[0]=m[v],o[1]=m[v+1],o[2]=m[v+2],o[3]=m[v+3],o[4]=m[v+4],o[5]=m[v+5],o[6]=m[v+6],o[7]=m[v+7],l[0]}function p(m,v){return o[7]=m[v],o[6]=m[v+1],o[5]=m[v+2],o[4]=m[v+3],o[3]=m[v+4],o[2]=m[v+5],o[1]=m[v+6],o[0]=m[v+7],l[0]}s.readDoubleLE=c?h:p,s.readDoubleBE=c?p:h}():function(){function l(c,f,d,h,p,m){var v=h<0?1:0;if(v&&(h=-h),h===0)c(0,p,m+f),c(1/h>0?0:2147483648,p,m+d);else if(isNaN(h))c(0,p,m+f),c(2146959360,p,m+d);else if(h>17976931348623157e292)c(0,p,m+f),c((v<<31|2146435072)>>>0,p,m+d);else{var x;if(h<22250738585072014e-324)x=h/5e-324,c(x>>>0,p,m+f),c((v<<31|x/4294967296)>>>0,p,m+d);else{var y=Math.floor(Math.log(h)/Math.LN2);y===1024&&(y=1023),x=h*Math.pow(2,-y),c(x*4503599627370496>>>0,p,m+f),c((v<<31|y+1023<<20|x*1048576&1048575)>>>0,p,m+d)}}}s.writeDoubleLE=l.bind(null,n,0,4),s.writeDoubleBE=l.bind(null,i,4,0);function o(c,f,d,h,p){var m=c(h,p+f),v=c(h,p+d),x=(v>>31)*2+1,y=v>>>20&2047,_=4294967296*(v&1048575)+m;return y===2047?_?NaN:x*(1/0):y===0?x*5e-324*_:x*Math.pow(2,y-1075)*(_+4503599627370496)}s.readDoubleLE=o.bind(null,a,0,4),s.readDoubleBE=o.bind(null,u,4,0)}(),s}function n(s,l,o){l[o]=s&255,l[o+1]=s>>>8&255,l[o+2]=s>>>16&255,l[o+3]=s>>>24}function i(s,l,o){l[o]=s>>>24,l[o+1]=s>>>16&255,l[o+2]=s>>>8&255,l[o+3]=s&255}function a(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16|s[l+3]<<24)>>>0}function u(s,l){return(s[l]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3])>>>0}}),jU=Gt((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),UU=Gt(t=>{"use strict";var e=t;e.length=function(r){for(var n=0,i=0,a=0;a<r.length;++a)i=r.charCodeAt(a),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(r.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},e.read=function(r,n,i){var a=i-n;if(a<1)return"";for(var u=null,s=[],l=0,o;n<i;)o=r[n++],o<128?s[l++]=o:o>191&&o<224?s[l++]=(o&31)<<6|r[n++]&63:o>239&&o<365?(o=((o&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,s[l++]=55296+(o>>10),s[l++]=56320+(o&1023)):s[l++]=(o&15)<<12|(r[n++]&63)<<6|r[n++]&63,l>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),l=0);return u?(l&&u.push(String.fromCharCode.apply(String,s.slice(0,l))),u.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(r,n,i){for(var a=i,u,s,l=0;l<r.length;++l)u=r.charCodeAt(l),u<128?n[i++]=u:u<2048?(n[i++]=u>>6|192,n[i++]=u&63|128):(u&64512)===55296&&((s=r.charCodeAt(l+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++l,n[i++]=u>>18|240,n[i++]=u>>12&63|128,n[i++]=u>>6&63|128,n[i++]=u&63|128):(n[i++]=u>>12|224,n[i++]=u>>6&63|128,n[i++]=u&63|128);return i-a}}),HU=Gt((t,e)=>{"use strict";e.exports=r;function r(n,i,a){var u=a||8192,s=u>>>1,l=null,o=u;return function(c){if(c<1||c>s)return n(c);o+c>u&&(l=n(u),o=0);var f=i.call(l,o,o+=c);return o&7&&(o=(o|7)+1),f}}}),zU=Gt((t,e)=>{"use strict";e.exports=n;var r=es();function n(s,l){this.lo=s>>>0,this.hi=l>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return i;var l=s<0;l&&(s=-s);var o=s>>>0,c=(s-o)/4294967296>>>0;return l&&(c=~c>>>0,o=~o>>>0,++o>4294967295&&(o=0,++c>4294967295&&(c=0))),new n(o,c)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):i},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var l=~this.lo+1>>>0,o=~this.hi>>>0;return l||(o=o+1>>>0),-(l+o*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var u=String.prototype.charCodeAt;n.fromHash=function(s){return s===a?i:new n((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?l===0?s<16384?s<128?1:2:s<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:o<128?9:10}}),es=Gt(t=>{"use strict";var e=t;e.asPromise=LU(),e.base64=BU(),e.EventEmitter=$U(),e.float=VU(),e.inquire=jU(),e.utf8=UU(),e.pool=HU(),e.LongBits=zU(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},e.isString=function(i){return typeof i=="string"||i instanceof String},e.isObject=function(i){return i&&typeof i=="object"},e.isset=e.isSet=function(i,a){var u=i[a];return u!=null&&i.hasOwnProperty(a)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var i=e.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(i){return typeof i=="number"?e.Buffer?e._Buffer_allocUnsafe(i):new e.Array(i):e.Buffer?e._Buffer_from(i):typeof Uint8Array>"u"?i:new Uint8Array(i)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(i){return i?e.LongBits.from(i).toHash():e.LongBits.zeroHash},e.longFromHash=function(i,a){var u=e.LongBits.fromHash(i);return e.Long?e.Long.fromBits(u.lo,u.hi,a):u.toNumber(!!a)};function r(i,a,u){for(var s=Object.keys(a),l=0;l<s.length;++l)(i[s[l]]===void 0||!u)&&(i[s[l]]=a[s[l]]);return i}e.merge=r,e.lcFirst=function(i){return i.charAt(0).toLowerCase()+i.substring(1)};function n(i){function a(u,s){if(!(this instanceof a))return new a(u,s);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&r(this,s)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(i){for(var a={},u=0;u<i.length;++u)a[i[u]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(a[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(i){return function(a){for(var u=0;u<i.length;++u)i[u]!==a&&delete this[i[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var i=e.Buffer;if(!i){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=i.from!==Uint8Array.from&&i.from||function(a,u){return new i(a,u)},e._Buffer_allocUnsafe=i.allocUnsafe||function(a){return new i(a)}}}),RA=Gt((t,e)=>{"use strict";e.exports=c;var r=es(),n,i=r.LongBits,a=r.base64,u=r.utf8;function s(y,_,I){this.fn=y,this.len=_,this.next=void 0,this.val=I}function l(){}function o(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var f=function(){return r.Buffer?function(){return(c.create=function(){return new n})()}:function(){return new c}};c.create=f(),c.alloc=function(y){return new r.Array(y)},r.Array!==Array&&(c.alloc=r.pool(c.alloc,r.Array.prototype.subarray)),c.prototype._push=function(y,_,I){return this.tail=this.tail.next=new s(y,_,I),this.len+=_,this};function d(y,_,I){_[I]=y&255}function h(y,_,I){for(;y>127;)_[I++]=y&127|128,y>>>=7;_[I]=y}function p(y,_){this.len=y,this.next=void 0,this.val=_}p.prototype=Object.create(s.prototype),p.prototype.fn=h,c.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new p((y=y>>>0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},c.prototype.int32=function(y){return y<0?this._push(m,10,i.fromNumber(y)):this.uint32(y)},c.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)};function m(y,_,I){for(;y.hi;)_[I++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[I++]=y.lo&127|128,y.lo=y.lo>>>7;_[I++]=y.lo}c.prototype.uint64=function(y){var _=i.from(y);return this._push(m,_.length(),_)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(y){var _=i.from(y).zzEncode();return this._push(m,_.length(),_)},c.prototype.bool=function(y){return this._push(d,1,y?1:0)};function v(y,_,I){_[I]=y&255,_[I+1]=y>>>8&255,_[I+2]=y>>>16&255,_[I+3]=y>>>24}c.prototype.fixed32=function(y){return this._push(v,4,y>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(y){var _=i.from(y);return this._push(v,4,_.lo)._push(v,4,_.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(y){return this._push(r.float.writeFloatLE,4,y)},c.prototype.double=function(y){return this._push(r.float.writeDoubleLE,8,y)};var x=r.Array.prototype.set?function(y,_,I){_.set(y,I)}:function(y,_,I){for(var C=0;C<y.length;++C)_[I+C]=y[C]};c.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(d,1,0);if(r.isString(y)){var I=c.alloc(_=a.length(y));a.decode(y,I,0),y=I}return this.uint32(_)._push(x,_,y)},c.prototype.string=function(y){var _=u.length(y);return _?this.uint32(_)._push(u.write,_,y):this._push(d,1,0)},c.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var y=this.head,_=this.tail,I=this.len;return this.reset().uint32(I),I&&(this.tail.next=y.next,this.tail=_,this.len+=I),this},c.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),I=0;y;)y.fn(y.val,_,I),I+=y.len,y=y.next;return _},c._configure=function(y){n=y,c.create=f(),n._configure()}}),GU=Gt((t,e)=>{"use strict";e.exports=i;var r=RA();(i.prototype=Object.create(r.prototype)).constructor=i;var n=es();function i(){r.call(this)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(u,s,l){s.set(u,l)}:function(u,s,l){if(u.copy)u.copy(s,l,0,u.length);else for(var o=0;o<u.length;)s[l++]=u[o++]}},i.prototype.bytes=function(u){n.isString(u)&&(u=n._Buffer_from(u,"base64"));var s=u.length>>>0;return this.uint32(s),s&&this._push(i.writeBytesBuffer,s,u),this};function a(u,s,l){u.length<40?n.utf8.write(u,s,l):s.utf8Write?s.utf8Write(u,l):s.write(u,l)}i.prototype.string=function(u){var s=n.Buffer.byteLength(u);return this.uint32(s),s&&this._push(a,s,u),this},i._configure()}),FA=Gt((t,e)=>{"use strict";e.exports=s;var r=es(),n,i=r.LongBits,a=r.utf8;function u(h,p){return RangeError("index out of range: "+h.pos+" + "+(p||1)+" > "+h.len)}function s(h){this.buf=h,this.pos=0,this.len=h.length}var l=typeof Uint8Array<"u"?function(h){if(h instanceof Uint8Array||Array.isArray(h))return new s(h);throw Error("illegal buffer")}:function(h){if(Array.isArray(h))return new s(h);throw Error("illegal buffer")},o=function(){return r.Buffer?function(h){return(s.create=function(p){return r.Buffer.isBuffer(p)?new n(p):l(p)})(h)}:l};s.create=o(),s.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,s.prototype.uint32=function(){var h=4294967295;return function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return h}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var h=this.uint32();return h>>>1^-(h&1)|0};function c(){var h=new i(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw u(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,h}if(this.len-this.pos>4){for(;p<5;++p)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;p<5;++p){if(this.pos>=this.len)throw u(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function f(h,p){return(h[p-4]|h[p-3]<<8|h[p-2]<<16|h[p-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw u(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var h=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var h=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},s.prototype.bytes=function(){var h=this.uint32(),p=this.pos,m=this.pos+h;if(m>this.len)throw u(this,h);return this.pos+=h,Array.isArray(this.buf)?this.buf.slice(p,m):p===m?new this.buf.constructor(0):this._slice.call(this.buf,p,m)},s.prototype.string=function(){var h=this.bytes();return a.read(h,0,h.length)},s.prototype.skip=function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw u(this,h);this.pos+=h}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},s._configure=function(h){n=h,s.create=o(),n._configure();var p=r.Long?"toLong":"toNumber";r.merge(s.prototype,{int64:function(){return c.call(this)[p](!1)},uint64:function(){return c.call(this)[p](!0)},sint64:function(){return c.call(this).zzDecode()[p](!1)},fixed64:function(){return d.call(this)[p](!0)},sfixed64:function(){return d.call(this)[p](!1)}})}}),WU=Gt((t,e)=>{"use strict";e.exports=i;var r=FA();(i.prototype=Object.create(r.prototype)).constructor=i;var n=es();function i(a){r.call(this,a)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},i._configure()}),qU=Gt((t,e)=>{"use strict";e.exports=n;var r=es();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(i,a,u){if(typeof i!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!a,this.responseDelimited=!!u}n.prototype.rpcCall=function i(a,u,s,l,o){if(!l)throw TypeError("request must be specified");var c=this;if(!o)return r.asPromise(i,c,a,u,s,l);if(!c.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return c.rpcImpl(a,u[c.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(f,d){if(f)return c.emit("error",f,a),o(f);if(d===null){c.end(!0);return}if(!(d instanceof s))try{d=s[c.responseDelimited?"decodeDelimited":"decode"](d)}catch(h){return c.emit("error",h,a),o(h)}return c.emit("data",d,a),o(null,d)})}catch(f){c.emit("error",f,a),setTimeout(function(){o(f)},0);return}},n.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),XU=Gt(t=>{"use strict";var e=t;e.Service=qU()}),YU=Gt((t,e)=>{"use strict";e.exports={}}),ZU=Gt(t=>{"use strict";var e=t;e.build="minimal",e.Writer=RA(),e.BufferWriter=GU(),e.Reader=FA(),e.BufferReader=WU(),e.util=es(),e.rpc=XU(),e.roots=YU(),e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()}),KU=Gt((t,e)=>{"use strict";e.exports=ZU()}),Cc=Gt((t,e)=>{"use strict";var r=KU(),n=r.Reader,i=r.Writer,a=r.util,u=r.roots.default||(r.roots.default={});u.onnx=function(){var s={};return s.Version=function(){var l={},o=Object.create(l);return o[l[0]="_START_VERSION"]=0,o[l[1]="IR_VERSION_2017_10_10"]=1,o[l[2]="IR_VERSION_2017_10_30"]=2,o[l[3]="IR_VERSION_2017_11_3"]=3,o[l[4]="IR_VERSION_2019_1_22"]=4,o[l[5]="IR_VERSION_2019_3_18"]=5,o[l[6]="IR_VERSION_2019_9_19"]=6,o[l[7]="IR_VERSION_2020_5_8"]=7,o[l[8]="IR_VERSION_2021_7_30"]=8,o[l[9]="IR_VERSION"]=9,o}(),s.AttributeProto=function(){function l(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.refAttrName="",l.prototype.docString="",l.prototype.type=0,l.prototype.f=0,l.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.s=a.newBuffer([]),l.prototype.t=null,l.prototype.g=null,l.prototype.sparseTensor=null,l.prototype.tp=null,l.prototype.floats=a.emptyArray,l.prototype.ints=a.emptyArray,l.prototype.strings=a.emptyArray,l.prototype.tensors=a.emptyArray,l.prototype.graphs=a.emptyArray,l.prototype.sparseTensors=a.emptyArray,l.prototype.typeProtos=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.f!=null&&Object.hasOwnProperty.call(o,"f")&&c.uint32(21).float(o.f),o.i!=null&&Object.hasOwnProperty.call(o,"i")&&c.uint32(24).int64(o.i),o.s!=null&&Object.hasOwnProperty.call(o,"s")&&c.uint32(34).bytes(o.s),o.t!=null&&Object.hasOwnProperty.call(o,"t")&&u.onnx.TensorProto.encode(o.t,c.uint32(42).fork()).ldelim(),o.g!=null&&Object.hasOwnProperty.call(o,"g")&&u.onnx.GraphProto.encode(o.g,c.uint32(50).fork()).ldelim(),o.floats!=null&&o.floats.length){c.uint32(58).fork();for(var f=0;f<o.floats.length;++f)c.float(o.floats[f]);c.ldelim()}if(o.ints!=null&&o.ints.length){c.uint32(66).fork();for(var f=0;f<o.ints.length;++f)c.int64(o.ints[f]);c.ldelim()}if(o.strings!=null&&o.strings.length)for(var f=0;f<o.strings.length;++f)c.uint32(74).bytes(o.strings[f]);if(o.tensors!=null&&o.tensors.length)for(var f=0;f<o.tensors.length;++f)u.onnx.TensorProto.encode(o.tensors[f],c.uint32(82).fork()).ldelim();if(o.graphs!=null&&o.graphs.length)for(var f=0;f<o.graphs.length;++f)u.onnx.GraphProto.encode(o.graphs[f],c.uint32(90).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(106).string(o.docString),o.tp!=null&&Object.hasOwnProperty.call(o,"tp")&&u.onnx.TypeProto.encode(o.tp,c.uint32(114).fork()).ldelim(),o.typeProtos!=null&&o.typeProtos.length)for(var f=0;f<o.typeProtos.length;++f)u.onnx.TypeProto.encode(o.typeProtos[f],c.uint32(122).fork()).ldelim();if(o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(160).int32(o.type),o.refAttrName!=null&&Object.hasOwnProperty.call(o,"refAttrName")&&c.uint32(170).string(o.refAttrName),o.sparseTensor!=null&&Object.hasOwnProperty.call(o,"sparseTensor")&&u.onnx.SparseTensorProto.encode(o.sparseTensor,c.uint32(178).fork()).ldelim(),o.sparseTensors!=null&&o.sparseTensors.length)for(var f=0;f<o.sparseTensors.length;++f)u.onnx.SparseTensorProto.encode(o.sparseTensors[f],c.uint32(186).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.AttributeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 21:{d.refAttrName=o.string();break}case 13:{d.docString=o.string();break}case 20:{d.type=o.int32();break}case 2:{d.f=o.float();break}case 3:{d.i=o.int64();break}case 4:{d.s=o.bytes();break}case 5:{d.t=u.onnx.TensorProto.decode(o,o.uint32());break}case 6:{d.g=u.onnx.GraphProto.decode(o,o.uint32());break}case 22:{d.sparseTensor=u.onnx.SparseTensorProto.decode(o,o.uint32());break}case 14:{d.tp=u.onnx.TypeProto.decode(o,o.uint32());break}case 7:{if(d.floats&&d.floats.length||(d.floats=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.floats.push(o.float());else d.floats.push(o.float());break}case 8:{if(d.ints&&d.ints.length||(d.ints=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.ints.push(o.int64());else d.ints.push(o.int64());break}case 9:{d.strings&&d.strings.length||(d.strings=[]),d.strings.push(o.bytes());break}case 10:{d.tensors&&d.tensors.length||(d.tensors=[]),d.tensors.push(u.onnx.TensorProto.decode(o,o.uint32()));break}case 11:{d.graphs&&d.graphs.length||(d.graphs=[]),d.graphs.push(u.onnx.GraphProto.decode(o,o.uint32()));break}case 23:{d.sparseTensors&&d.sparseTensors.length||(d.sparseTensors=[]),d.sparseTensors.push(u.onnx.SparseTensorProto.decode(o,o.uint32()));break}case 15:{d.typeProtos&&d.typeProtos.length||(d.typeProtos=[]),d.typeProtos.push(u.onnx.TypeProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&!a.isString(o.refAttrName))return"refAttrName: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(o.f!=null&&o.hasOwnProperty("f")&&typeof o.f!="number")return"f: number expected";if(o.i!=null&&o.hasOwnProperty("i")&&!a.isInteger(o.i)&&!(o.i&&a.isInteger(o.i.low)&&a.isInteger(o.i.high)))return"i: integer|Long expected";if(o.s!=null&&o.hasOwnProperty("s")&&!(o.s&&typeof o.s.length=="number"||a.isString(o.s)))return"s: buffer expected";if(o.t!=null&&o.hasOwnProperty("t")){var c=u.onnx.TensorProto.verify(o.t);if(c)return"t."+c}if(o.g!=null&&o.hasOwnProperty("g")){var c=u.onnx.GraphProto.verify(o.g);if(c)return"g."+c}if(o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")){var c=u.onnx.SparseTensorProto.verify(o.sparseTensor);if(c)return"sparseTensor."+c}if(o.tp!=null&&o.hasOwnProperty("tp")){var c=u.onnx.TypeProto.verify(o.tp);if(c)return"tp."+c}if(o.floats!=null&&o.hasOwnProperty("floats")){if(!Array.isArray(o.floats))return"floats: array expected";for(var f=0;f<o.floats.length;++f)if(typeof o.floats[f]!="number")return"floats: number[] expected"}if(o.ints!=null&&o.hasOwnProperty("ints")){if(!Array.isArray(o.ints))return"ints: array expected";for(var f=0;f<o.ints.length;++f)if(!a.isInteger(o.ints[f])&&!(o.ints[f]&&a.isInteger(o.ints[f].low)&&a.isInteger(o.ints[f].high)))return"ints: integer|Long[] expected"}if(o.strings!=null&&o.hasOwnProperty("strings")){if(!Array.isArray(o.strings))return"strings: array expected";for(var f=0;f<o.strings.length;++f)if(!(o.strings[f]&&typeof o.strings[f].length=="number"||a.isString(o.strings[f])))return"strings: buffer[] expected"}if(o.tensors!=null&&o.hasOwnProperty("tensors")){if(!Array.isArray(o.tensors))return"tensors: array expected";for(var f=0;f<o.tensors.length;++f){var c=u.onnx.TensorProto.verify(o.tensors[f]);if(c)return"tensors."+c}}if(o.graphs!=null&&o.hasOwnProperty("graphs")){if(!Array.isArray(o.graphs))return"graphs: array expected";for(var f=0;f<o.graphs.length;++f){var c=u.onnx.GraphProto.verify(o.graphs[f]);if(c)return"graphs."+c}}if(o.sparseTensors!=null&&o.hasOwnProperty("sparseTensors")){if(!Array.isArray(o.sparseTensors))return"sparseTensors: array expected";for(var f=0;f<o.sparseTensors.length;++f){var c=u.onnx.SparseTensorProto.verify(o.sparseTensors[f]);if(c)return"sparseTensors."+c}}if(o.typeProtos!=null&&o.hasOwnProperty("typeProtos")){if(!Array.isArray(o.typeProtos))return"typeProtos: array expected";for(var f=0;f<o.typeProtos.length;++f){var c=u.onnx.TypeProto.verify(o.typeProtos[f]);if(c)return"typeProtos."+c}}return null},l.fromObject=function(o){if(o instanceof u.onnx.AttributeProto)return o;var c=new u.onnx.AttributeProto;switch(o.name!=null&&(c.name=String(o.name)),o.refAttrName!=null&&(c.refAttrName=String(o.refAttrName)),o.docString!=null&&(c.docString=String(o.docString)),o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNDEFINED":case 0:c.type=0;break;case"FLOAT":case 1:c.type=1;break;case"INT":case 2:c.type=2;break;case"STRING":case 3:c.type=3;break;case"TENSOR":case 4:c.type=4;break;case"GRAPH":case 5:c.type=5;break;case"SPARSE_TENSOR":case 11:c.type=11;break;case"TYPE_PROTO":case 13:c.type=13;break;case"FLOATS":case 6:c.type=6;break;case"INTS":case 7:c.type=7;break;case"STRINGS":case 8:c.type=8;break;case"TENSORS":case 9:c.type=9;break;case"GRAPHS":case 10:c.type=10;break;case"SPARSE_TENSORS":case 12:c.type=12;break;case"TYPE_PROTOS":case 14:c.type=14;break}if(o.f!=null&&(c.f=Number(o.f)),o.i!=null&&(a.Long?(c.i=a.Long.fromValue(o.i)).unsigned=!1:typeof o.i=="string"?c.i=parseInt(o.i,10):typeof o.i=="number"?c.i=o.i:typeof o.i=="object"&&(c.i=new a.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber())),o.s!=null&&(typeof o.s=="string"?a.base64.decode(o.s,c.s=a.newBuffer(a.base64.length(o.s)),0):o.s.length>=0&&(c.s=o.s)),o.t!=null){if(typeof o.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");c.t=u.onnx.TensorProto.fromObject(o.t)}if(o.g!=null){if(typeof o.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");c.g=u.onnx.GraphProto.fromObject(o.g)}if(o.sparseTensor!=null){if(typeof o.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");c.sparseTensor=u.onnx.SparseTensorProto.fromObject(o.sparseTensor)}if(o.tp!=null){if(typeof o.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");c.tp=u.onnx.TypeProto.fromObject(o.tp)}if(o.floats){if(!Array.isArray(o.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");c.floats=[];for(var f=0;f<o.floats.length;++f)c.floats[f]=Number(o.floats[f])}if(o.ints){if(!Array.isArray(o.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");c.ints=[];for(var f=0;f<o.ints.length;++f)a.Long?(c.ints[f]=a.Long.fromValue(o.ints[f])).unsigned=!1:typeof o.ints[f]=="string"?c.ints[f]=parseInt(o.ints[f],10):typeof o.ints[f]=="number"?c.ints[f]=o.ints[f]:typeof o.ints[f]=="object"&&(c.ints[f]=new a.LongBits(o.ints[f].low>>>0,o.ints[f].high>>>0).toNumber())}if(o.strings){if(!Array.isArray(o.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");c.strings=[];for(var f=0;f<o.strings.length;++f)typeof o.strings[f]=="string"?a.base64.decode(o.strings[f],c.strings[f]=a.newBuffer(a.base64.length(o.strings[f])),0):o.strings[f].length>=0&&(c.strings[f]=o.strings[f])}if(o.tensors){if(!Array.isArray(o.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");c.tensors=[];for(var f=0;f<o.tensors.length;++f){if(typeof o.tensors[f]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");c.tensors[f]=u.onnx.TensorProto.fromObject(o.tensors[f])}}if(o.graphs){if(!Array.isArray(o.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");c.graphs=[];for(var f=0;f<o.graphs.length;++f){if(typeof o.graphs[f]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");c.graphs[f]=u.onnx.GraphProto.fromObject(o.graphs[f])}}if(o.sparseTensors){if(!Array.isArray(o.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");c.sparseTensors=[];for(var f=0;f<o.sparseTensors.length;++f){if(typeof o.sparseTensors[f]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");c.sparseTensors[f]=u.onnx.SparseTensorProto.fromObject(o.sparseTensors[f])}}if(o.typeProtos){if(!Array.isArray(o.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");c.typeProtos=[];for(var f=0;f<o.typeProtos.length;++f){if(typeof o.typeProtos[f]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");c.typeProtos[f]=u.onnx.TypeProto.fromObject(o.typeProtos[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[],f.typeProtos=[],f.sparseTensors=[]),c.defaults){if(f.name="",f.f=0,a.Long){var d=new a.Long(0,0,!1);f.i=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.i=c.longs===String?"0":0;c.bytes===String?f.s="":(f.s=[],c.bytes!==Array&&(f.s=a.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.tp=null,f.type=c.enums===String?"UNDEFINED":0,f.refAttrName="",f.sparseTensor=null}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.f!=null&&o.hasOwnProperty("f")&&(f.f=c.json&&!isFinite(o.f)?String(o.f):o.f),o.i!=null&&o.hasOwnProperty("i")&&(typeof o.i=="number"?f.i=c.longs===String?String(o.i):o.i:f.i=c.longs===String?a.Long.prototype.toString.call(o.i):c.longs===Number?new a.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber():o.i),o.s!=null&&o.hasOwnProperty("s")&&(f.s=c.bytes===String?a.base64.encode(o.s,0,o.s.length):c.bytes===Array?Array.prototype.slice.call(o.s):o.s),o.t!=null&&o.hasOwnProperty("t")&&(f.t=u.onnx.TensorProto.toObject(o.t,c)),o.g!=null&&o.hasOwnProperty("g")&&(f.g=u.onnx.GraphProto.toObject(o.g,c)),o.floats&&o.floats.length){f.floats=[];for(var h=0;h<o.floats.length;++h)f.floats[h]=c.json&&!isFinite(o.floats[h])?String(o.floats[h]):o.floats[h]}if(o.ints&&o.ints.length){f.ints=[];for(var h=0;h<o.ints.length;++h)typeof o.ints[h]=="number"?f.ints[h]=c.longs===String?String(o.ints[h]):o.ints[h]:f.ints[h]=c.longs===String?a.Long.prototype.toString.call(o.ints[h]):c.longs===Number?new a.LongBits(o.ints[h].low>>>0,o.ints[h].high>>>0).toNumber():o.ints[h]}if(o.strings&&o.strings.length){f.strings=[];for(var h=0;h<o.strings.length;++h)f.strings[h]=c.bytes===String?a.base64.encode(o.strings[h],0,o.strings[h].length):c.bytes===Array?Array.prototype.slice.call(o.strings[h]):o.strings[h]}if(o.tensors&&o.tensors.length){f.tensors=[];for(var h=0;h<o.tensors.length;++h)f.tensors[h]=u.onnx.TensorProto.toObject(o.tensors[h],c)}if(o.graphs&&o.graphs.length){f.graphs=[];for(var h=0;h<o.graphs.length;++h)f.graphs[h]=u.onnx.GraphProto.toObject(o.graphs[h],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.tp!=null&&o.hasOwnProperty("tp")&&(f.tp=u.onnx.TypeProto.toObject(o.tp,c)),o.typeProtos&&o.typeProtos.length){f.typeProtos=[];for(var h=0;h<o.typeProtos.length;++h)f.typeProtos[h]=u.onnx.TypeProto.toObject(o.typeProtos[h],c)}if(o.type!=null&&o.hasOwnProperty("type")&&(f.type=c.enums===String?u.onnx.AttributeProto.AttributeType[o.type]===void 0?o.type:u.onnx.AttributeProto.AttributeType[o.type]:o.type),o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&(f.refAttrName=o.refAttrName),o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")&&(f.sparseTensor=u.onnx.SparseTensorProto.toObject(o.sparseTensor,c)),o.sparseTensors&&o.sparseTensors.length){f.sparseTensors=[];for(var h=0;h<o.sparseTensors.length;++h)f.sparseTensors[h]=u.onnx.SparseTensorProto.toObject(o.sparseTensors[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.AttributeProto"},l.AttributeType=function(){var o={},c=Object.create(o);return c[o[0]="UNDEFINED"]=0,c[o[1]="FLOAT"]=1,c[o[2]="INT"]=2,c[o[3]="STRING"]=3,c[o[4]="TENSOR"]=4,c[o[5]="GRAPH"]=5,c[o[11]="SPARSE_TENSOR"]=11,c[o[13]="TYPE_PROTO"]=13,c[o[6]="FLOATS"]=6,c[o[7]="INTS"]=7,c[o[8]="STRINGS"]=8,c[o[9]="TENSORS"]=9,c[o[10]="GRAPHS"]=10,c[o[12]="SPARSE_TENSORS"]=12,c[o[14]="TYPE_PROTOS"]=14,c}(),l}(),s.ValueInfoProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.type=null,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.onnx.TypeProto.encode(o.type,c.uint32(18).fork()).ldelim(),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(26).string(o.docString),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.ValueInfoProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 2:{d.type=u.onnx.TypeProto.decode(o,o.uint32());break}case 3:{d.docString=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.type!=null&&o.hasOwnProperty("type")){var c=u.onnx.TypeProto.verify(o.type);if(c)return"type."+c}return o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.ValueInfoProto)return o;var c=new u.onnx.ValueInfoProto;if(o.name!=null&&(c.name=String(o.name)),o.type!=null){if(typeof o.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");c.type=u.onnx.TypeProto.fromObject(o.type)}return o.docString!=null&&(c.docString=String(o.docString)),c},l.toObject=function(o,c){c||(c={});var f={};return c.defaults&&(f.name="",f.type=null,f.docString=""),o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.type!=null&&o.hasOwnProperty("type")&&(f.type=u.onnx.TypeProto.toObject(o.type,c)),o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ValueInfoProto"},l}(),s.NodeProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.name="",l.prototype.opType="",l.prototype.domain="",l.prototype.attribute=a.emptyArray,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)c.uint32(10).string(o.input[f]);if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)c.uint32(18).string(o.output[f]);if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(26).string(o.name),o.opType!=null&&Object.hasOwnProperty.call(o,"opType")&&c.uint32(34).string(o.opType),o.attribute!=null&&o.attribute.length)for(var f=0;f<o.attribute.length;++f)u.onnx.AttributeProto.encode(o.attribute[f],c.uint32(42).fork()).ldelim();return o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(50).string(o.docString),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(58).string(o.domain),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.NodeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.input&&d.input.length||(d.input=[]),d.input.push(o.string());break}case 2:{d.output&&d.output.length||(d.output=[]),d.output.push(o.string());break}case 3:{d.name=o.string();break}case 4:{d.opType=o.string();break}case 7:{d.domain=o.string();break}case 5:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(u.onnx.AttributeProto.decode(o,o.uint32()));break}case 6:{d.docString=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c)if(!a.isString(o.input[c]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c)if(!a.isString(o.output[c]))return"output: string[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.opType!=null&&o.hasOwnProperty("opType")&&!a.isString(o.opType))return"opType: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain))return"domain: string expected";if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(var c=0;c<o.attribute.length;++c){var f=u.onnx.AttributeProto.verify(o.attribute[c]);if(f)return"attribute."+f}}return o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.NodeProto)return o;var c=new u.onnx.NodeProto;if(o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.NodeProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f)c.input[f]=String(o.input[f])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.NodeProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f)c.output[f]=String(o.output[f])}if(o.name!=null&&(c.name=String(o.name)),o.opType!=null&&(c.opType=String(o.opType)),o.domain!=null&&(c.domain=String(o.domain)),o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");c.attribute=[];for(var f=0;f<o.attribute.length;++f){if(typeof o.attribute[f]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");c.attribute[f]=u.onnx.AttributeProto.fromObject(o.attribute[f])}}return o.docString!=null&&(c.docString=String(o.docString)),c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[]),c.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=o.input[d]}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=o.output[d]}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.opType!=null&&o.hasOwnProperty("opType")&&(f.opType=o.opType),o.attribute&&o.attribute.length){f.attribute=[];for(var d=0;d<o.attribute.length;++d)f.attribute[d]=u.onnx.AttributeProto.toObject(o.attribute[d],c)}return o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.NodeProto"},l}(),s.TrainingInfoProto=function(){function l(o){if(this.initializationBinding=[],this.updateBinding=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.initialization=null,l.prototype.algorithm=null,l.prototype.initializationBinding=a.emptyArray,l.prototype.updateBinding=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.initialization!=null&&Object.hasOwnProperty.call(o,"initialization")&&u.onnx.GraphProto.encode(o.initialization,c.uint32(10).fork()).ldelim(),o.algorithm!=null&&Object.hasOwnProperty.call(o,"algorithm")&&u.onnx.GraphProto.encode(o.algorithm,c.uint32(18).fork()).ldelim(),o.initializationBinding!=null&&o.initializationBinding.length)for(var f=0;f<o.initializationBinding.length;++f)u.onnx.StringStringEntryProto.encode(o.initializationBinding[f],c.uint32(26).fork()).ldelim();if(o.updateBinding!=null&&o.updateBinding.length)for(var f=0;f<o.updateBinding.length;++f)u.onnx.StringStringEntryProto.encode(o.updateBinding[f],c.uint32(34).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TrainingInfoProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.initialization=u.onnx.GraphProto.decode(o,o.uint32());break}case 2:{d.algorithm=u.onnx.GraphProto.decode(o,o.uint32());break}case 3:{d.initializationBinding&&d.initializationBinding.length||(d.initializationBinding=[]),d.initializationBinding.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 4:{d.updateBinding&&d.updateBinding.length||(d.updateBinding=[]),d.updateBinding.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.initialization!=null&&o.hasOwnProperty("initialization")){var c=u.onnx.GraphProto.verify(o.initialization);if(c)return"initialization."+c}if(o.algorithm!=null&&o.hasOwnProperty("algorithm")){var c=u.onnx.GraphProto.verify(o.algorithm);if(c)return"algorithm."+c}if(o.initializationBinding!=null&&o.hasOwnProperty("initializationBinding")){if(!Array.isArray(o.initializationBinding))return"initializationBinding: array expected";for(var f=0;f<o.initializationBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(o.initializationBinding[f]);if(c)return"initializationBinding."+c}}if(o.updateBinding!=null&&o.hasOwnProperty("updateBinding")){if(!Array.isArray(o.updateBinding))return"updateBinding: array expected";for(var f=0;f<o.updateBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(o.updateBinding[f]);if(c)return"updateBinding."+c}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TrainingInfoProto)return o;var c=new u.onnx.TrainingInfoProto;if(o.initialization!=null){if(typeof o.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");c.initialization=u.onnx.GraphProto.fromObject(o.initialization)}if(o.algorithm!=null){if(typeof o.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");c.algorithm=u.onnx.GraphProto.fromObject(o.algorithm)}if(o.initializationBinding){if(!Array.isArray(o.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");c.initializationBinding=[];for(var f=0;f<o.initializationBinding.length;++f){if(typeof o.initializationBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");c.initializationBinding[f]=u.onnx.StringStringEntryProto.fromObject(o.initializationBinding[f])}}if(o.updateBinding){if(!Array.isArray(o.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");c.updateBinding=[];for(var f=0;f<o.updateBinding.length;++f){if(typeof o.updateBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");c.updateBinding[f]=u.onnx.StringStringEntryProto.fromObject(o.updateBinding[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.initializationBinding=[],f.updateBinding=[]),c.defaults&&(f.initialization=null,f.algorithm=null),o.initialization!=null&&o.hasOwnProperty("initialization")&&(f.initialization=u.onnx.GraphProto.toObject(o.initialization,c)),o.algorithm!=null&&o.hasOwnProperty("algorithm")&&(f.algorithm=u.onnx.GraphProto.toObject(o.algorithm,c)),o.initializationBinding&&o.initializationBinding.length){f.initializationBinding=[];for(var d=0;d<o.initializationBinding.length;++d)f.initializationBinding[d]=u.onnx.StringStringEntryProto.toObject(o.initializationBinding[d],c)}if(o.updateBinding&&o.updateBinding.length){f.updateBinding=[];for(var d=0;d<o.updateBinding.length;++d)f.updateBinding[d]=u.onnx.StringStringEntryProto.toObject(o.updateBinding[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TrainingInfoProto"},l}(),s.ModelProto=function(){function l(o){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.opsetImport=a.emptyArray,l.prototype.producerName="",l.prototype.producerVersion="",l.prototype.domain="",l.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.docString="",l.prototype.graph=null,l.prototype.metadataProps=a.emptyArray,l.prototype.trainingInfo=a.emptyArray,l.prototype.functions=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.irVersion!=null&&Object.hasOwnProperty.call(o,"irVersion")&&c.uint32(8).int64(o.irVersion),o.producerName!=null&&Object.hasOwnProperty.call(o,"producerName")&&c.uint32(18).string(o.producerName),o.producerVersion!=null&&Object.hasOwnProperty.call(o,"producerVersion")&&c.uint32(26).string(o.producerVersion),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(34).string(o.domain),o.modelVersion!=null&&Object.hasOwnProperty.call(o,"modelVersion")&&c.uint32(40).int64(o.modelVersion),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(50).string(o.docString),o.graph!=null&&Object.hasOwnProperty.call(o,"graph")&&u.onnx.GraphProto.encode(o.graph,c.uint32(58).fork()).ldelim(),o.opsetImport!=null&&o.opsetImport.length)for(var f=0;f<o.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(o.opsetImport[f],c.uint32(66).fork()).ldelim();if(o.metadataProps!=null&&o.metadataProps.length)for(var f=0;f<o.metadataProps.length;++f)u.onnx.StringStringEntryProto.encode(o.metadataProps[f],c.uint32(114).fork()).ldelim();if(o.trainingInfo!=null&&o.trainingInfo.length)for(var f=0;f<o.trainingInfo.length;++f)u.onnx.TrainingInfoProto.encode(o.trainingInfo[f],c.uint32(162).fork()).ldelim();if(o.functions!=null&&o.functions.length)for(var f=0;f<o.functions.length;++f)u.onnx.FunctionProto.encode(o.functions[f],c.uint32(202).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.ModelProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.irVersion=o.int64();break}case 8:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(o,o.uint32()));break}case 2:{d.producerName=o.string();break}case 3:{d.producerVersion=o.string();break}case 4:{d.domain=o.string();break}case 5:{d.modelVersion=o.int64();break}case 6:{d.docString=o.string();break}case 7:{d.graph=u.onnx.GraphProto.decode(o,o.uint32());break}case 14:{d.metadataProps&&d.metadataProps.length||(d.metadataProps=[]),d.metadataProps.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 20:{d.trainingInfo&&d.trainingInfo.length||(d.trainingInfo=[]),d.trainingInfo.push(u.onnx.TrainingInfoProto.decode(o,o.uint32()));break}case 25:{d.functions&&d.functions.length||(d.functions=[]),d.functions.push(u.onnx.FunctionProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&!a.isInteger(o.irVersion)&&!(o.irVersion&&a.isInteger(o.irVersion.low)&&a.isInteger(o.irVersion.high)))return"irVersion: integer|Long expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var c=0;c<o.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(o.opsetImport[c]);if(f)return"opsetImport."+f}}if(o.producerName!=null&&o.hasOwnProperty("producerName")&&!a.isString(o.producerName))return"producerName: string expected";if(o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&!a.isString(o.producerVersion))return"producerVersion: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain))return"domain: string expected";if(o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&!a.isInteger(o.modelVersion)&&!(o.modelVersion&&a.isInteger(o.modelVersion.low)&&a.isInteger(o.modelVersion.high)))return"modelVersion: integer|Long expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.graph!=null&&o.hasOwnProperty("graph")){var f=u.onnx.GraphProto.verify(o.graph);if(f)return"graph."+f}if(o.metadataProps!=null&&o.hasOwnProperty("metadataProps")){if(!Array.isArray(o.metadataProps))return"metadataProps: array expected";for(var c=0;c<o.metadataProps.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.metadataProps[c]);if(f)return"metadataProps."+f}}if(o.trainingInfo!=null&&o.hasOwnProperty("trainingInfo")){if(!Array.isArray(o.trainingInfo))return"trainingInfo: array expected";for(var c=0;c<o.trainingInfo.length;++c){var f=u.onnx.TrainingInfoProto.verify(o.trainingInfo[c]);if(f)return"trainingInfo."+f}}if(o.functions!=null&&o.hasOwnProperty("functions")){if(!Array.isArray(o.functions))return"functions: array expected";for(var c=0;c<o.functions.length;++c){var f=u.onnx.FunctionProto.verify(o.functions[c]);if(f)return"functions."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.ModelProto)return o;var c=new u.onnx.ModelProto;if(o.irVersion!=null&&(a.Long?(c.irVersion=a.Long.fromValue(o.irVersion)).unsigned=!1:typeof o.irVersion=="string"?c.irVersion=parseInt(o.irVersion,10):typeof o.irVersion=="number"?c.irVersion=o.irVersion:typeof o.irVersion=="object"&&(c.irVersion=new a.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber())),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<o.opsetImport.length;++f){if(typeof o.opsetImport[f]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(o.opsetImport[f])}}if(o.producerName!=null&&(c.producerName=String(o.producerName)),o.producerVersion!=null&&(c.producerVersion=String(o.producerVersion)),o.domain!=null&&(c.domain=String(o.domain)),o.modelVersion!=null&&(a.Long?(c.modelVersion=a.Long.fromValue(o.modelVersion)).unsigned=!1:typeof o.modelVersion=="string"?c.modelVersion=parseInt(o.modelVersion,10):typeof o.modelVersion=="number"?c.modelVersion=o.modelVersion:typeof o.modelVersion=="object"&&(c.modelVersion=new a.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber())),o.docString!=null&&(c.docString=String(o.docString)),o.graph!=null){if(typeof o.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");c.graph=u.onnx.GraphProto.fromObject(o.graph)}if(o.metadataProps){if(!Array.isArray(o.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");c.metadataProps=[];for(var f=0;f<o.metadataProps.length;++f){if(typeof o.metadataProps[f]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");c.metadataProps[f]=u.onnx.StringStringEntryProto.fromObject(o.metadataProps[f])}}if(o.trainingInfo){if(!Array.isArray(o.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");c.trainingInfo=[];for(var f=0;f<o.trainingInfo.length;++f){if(typeof o.trainingInfo[f]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");c.trainingInfo[f]=u.onnx.TrainingInfoProto.fromObject(o.trainingInfo[f])}}if(o.functions){if(!Array.isArray(o.functions))throw TypeError(".onnx.ModelProto.functions: array expected");c.functions=[];for(var f=0;f<o.functions.length;++f){if(typeof o.functions[f]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");c.functions[f]=u.onnx.FunctionProto.fromObject(o.functions[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.opsetImport=[],f.metadataProps=[],f.trainingInfo=[],f.functions=[]),c.defaults){if(a.Long){var d=new a.Long(0,0,!1);f.irVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.irVersion=c.longs===String?"0":0;if(f.producerName="",f.producerVersion="",f.domain="",a.Long){var d=new a.Long(0,0,!1);f.modelVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.modelVersion=c.longs===String?"0":0;f.docString="",f.graph=null}if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&(typeof o.irVersion=="number"?f.irVersion=c.longs===String?String(o.irVersion):o.irVersion:f.irVersion=c.longs===String?a.Long.prototype.toString.call(o.irVersion):c.longs===Number?new a.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber():o.irVersion),o.producerName!=null&&o.hasOwnProperty("producerName")&&(f.producerName=o.producerName),o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&(f.producerVersion=o.producerVersion),o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&(typeof o.modelVersion=="number"?f.modelVersion=c.longs===String?String(o.modelVersion):o.modelVersion:f.modelVersion=c.longs===String?a.Long.prototype.toString.call(o.modelVersion):c.longs===Number?new a.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber():o.modelVersion),o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.graph!=null&&o.hasOwnProperty("graph")&&(f.graph=u.onnx.GraphProto.toObject(o.graph,c)),o.opsetImport&&o.opsetImport.length){f.opsetImport=[];for(var h=0;h<o.opsetImport.length;++h)f.opsetImport[h]=u.onnx.OperatorSetIdProto.toObject(o.opsetImport[h],c)}if(o.metadataProps&&o.metadataProps.length){f.metadataProps=[];for(var h=0;h<o.metadataProps.length;++h)f.metadataProps[h]=u.onnx.StringStringEntryProto.toObject(o.metadataProps[h],c)}if(o.trainingInfo&&o.trainingInfo.length){f.trainingInfo=[];for(var h=0;h<o.trainingInfo.length;++h)f.trainingInfo[h]=u.onnx.TrainingInfoProto.toObject(o.trainingInfo[h],c)}if(o.functions&&o.functions.length){f.functions=[];for(var h=0;h<o.functions.length;++h)f.functions[h]=u.onnx.FunctionProto.toObject(o.functions[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ModelProto"},l}(),s.StringStringEntryProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.key="",l.prototype.value="",l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&c.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&c.uint32(18).string(o.value),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.StringStringEntryProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.key=o.string();break}case 2:{d.value=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.key!=null&&o.hasOwnProperty("key")&&!a.isString(o.key)?"key: string expected":o.value!=null&&o.hasOwnProperty("value")&&!a.isString(o.value)?"value: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.StringStringEntryProto)return o;var c=new u.onnx.StringStringEntryProto;return o.key!=null&&(c.key=String(o.key)),o.value!=null&&(c.value=String(o.value)),c},l.toObject=function(o,c){c||(c={});var f={};return c.defaults&&(f.key="",f.value=""),o.key!=null&&o.hasOwnProperty("key")&&(f.key=o.key),o.value!=null&&o.hasOwnProperty("value")&&(f.value=o.value),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.StringStringEntryProto"},l}(),s.TensorAnnotation=function(){function l(o){if(this.quantParameterTensorNames=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.tensorName="",l.prototype.quantParameterTensorNames=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.tensorName!=null&&Object.hasOwnProperty.call(o,"tensorName")&&c.uint32(10).string(o.tensorName),o.quantParameterTensorNames!=null&&o.quantParameterTensorNames.length)for(var f=0;f<o.quantParameterTensorNames.length;++f)u.onnx.StringStringEntryProto.encode(o.quantParameterTensorNames[f],c.uint32(18).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorAnnotation;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.tensorName=o.string();break}case 2:{d.quantParameterTensorNames&&d.quantParameterTensorNames.length||(d.quantParameterTensorNames=[]),d.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.tensorName!=null&&o.hasOwnProperty("tensorName")&&!a.isString(o.tensorName))return"tensorName: string expected";if(o.quantParameterTensorNames!=null&&o.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(o.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var c=0;c<o.quantParameterTensorNames.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.quantParameterTensorNames[c]);if(f)return"quantParameterTensorNames."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorAnnotation)return o;var c=new u.onnx.TensorAnnotation;if(o.tensorName!=null&&(c.tensorName=String(o.tensorName)),o.quantParameterTensorNames){if(!Array.isArray(o.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");c.quantParameterTensorNames=[];for(var f=0;f<o.quantParameterTensorNames.length;++f){if(typeof o.quantParameterTensorNames[f]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");c.quantParameterTensorNames[f]=u.onnx.StringStringEntryProto.fromObject(o.quantParameterTensorNames[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.quantParameterTensorNames=[]),c.defaults&&(f.tensorName=""),o.tensorName!=null&&o.hasOwnProperty("tensorName")&&(f.tensorName=o.tensorName),o.quantParameterTensorNames&&o.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var d=0;d<o.quantParameterTensorNames.length;++d)f.quantParameterTensorNames[d]=u.onnx.StringStringEntryProto.toObject(o.quantParameterTensorNames[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorAnnotation"},l}(),s.GraphProto=function(){function l(o){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.node=a.emptyArray,l.prototype.name="",l.prototype.initializer=a.emptyArray,l.prototype.sparseInitializer=a.emptyArray,l.prototype.docString="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.valueInfo=a.emptyArray,l.prototype.quantizationAnnotation=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.node!=null&&o.node.length)for(var f=0;f<o.node.length;++f)u.onnx.NodeProto.encode(o.node[f],c.uint32(10).fork()).ldelim();if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(18).string(o.name),o.initializer!=null&&o.initializer.length)for(var f=0;f<o.initializer.length;++f)u.onnx.TensorProto.encode(o.initializer[f],c.uint32(42).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(82).string(o.docString),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)u.onnx.ValueInfoProto.encode(o.input[f],c.uint32(90).fork()).ldelim();if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)u.onnx.ValueInfoProto.encode(o.output[f],c.uint32(98).fork()).ldelim();if(o.valueInfo!=null&&o.valueInfo.length)for(var f=0;f<o.valueInfo.length;++f)u.onnx.ValueInfoProto.encode(o.valueInfo[f],c.uint32(106).fork()).ldelim();if(o.quantizationAnnotation!=null&&o.quantizationAnnotation.length)for(var f=0;f<o.quantizationAnnotation.length;++f)u.onnx.TensorAnnotation.encode(o.quantizationAnnotation[f],c.uint32(114).fork()).ldelim();if(o.sparseInitializer!=null&&o.sparseInitializer.length)for(var f=0;f<o.sparseInitializer.length;++f)u.onnx.SparseTensorProto.encode(o.sparseInitializer[f],c.uint32(122).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.GraphProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(o,o.uint32()));break}case 2:{d.name=o.string();break}case 5:{d.initializer&&d.initializer.length||(d.initializer=[]),d.initializer.push(u.onnx.TensorProto.decode(o,o.uint32()));break}case 15:{d.sparseInitializer&&d.sparseInitializer.length||(d.sparseInitializer=[]),d.sparseInitializer.push(u.onnx.SparseTensorProto.decode(o,o.uint32()));break}case 10:{d.docString=o.string();break}case 11:{d.input&&d.input.length||(d.input=[]),d.input.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 12:{d.output&&d.output.length||(d.output=[]),d.output.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 13:{d.valueInfo&&d.valueInfo.length||(d.valueInfo=[]),d.valueInfo.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 14:{d.quantizationAnnotation&&d.quantizationAnnotation.length||(d.quantizationAnnotation=[]),d.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var c=0;c<o.node.length;++c){var f=u.onnx.NodeProto.verify(o.node[c]);if(f)return"node."+f}}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.initializer!=null&&o.hasOwnProperty("initializer")){if(!Array.isArray(o.initializer))return"initializer: array expected";for(var c=0;c<o.initializer.length;++c){var f=u.onnx.TensorProto.verify(o.initializer[c]);if(f)return"initializer."+f}}if(o.sparseInitializer!=null&&o.hasOwnProperty("sparseInitializer")){if(!Array.isArray(o.sparseInitializer))return"sparseInitializer: array expected";for(var c=0;c<o.sparseInitializer.length;++c){var f=u.onnx.SparseTensorProto.verify(o.sparseInitializer[c]);if(f)return"sparseInitializer."+f}}if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c){var f=u.onnx.ValueInfoProto.verify(o.input[c]);if(f)return"input."+f}}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c){var f=u.onnx.ValueInfoProto.verify(o.output[c]);if(f)return"output."+f}}if(o.valueInfo!=null&&o.hasOwnProperty("valueInfo")){if(!Array.isArray(o.valueInfo))return"valueInfo: array expected";for(var c=0;c<o.valueInfo.length;++c){var f=u.onnx.ValueInfoProto.verify(o.valueInfo[c]);if(f)return"valueInfo."+f}}if(o.quantizationAnnotation!=null&&o.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(o.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var c=0;c<o.quantizationAnnotation.length;++c){var f=u.onnx.TensorAnnotation.verify(o.quantizationAnnotation[c]);if(f)return"quantizationAnnotation."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.GraphProto)return o;var c=new u.onnx.GraphProto;if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.GraphProto.node: array expected");c.node=[];for(var f=0;f<o.node.length;++f){if(typeof o.node[f]!="object")throw TypeError(".onnx.GraphProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(o.node[f])}}if(o.name!=null&&(c.name=String(o.name)),o.initializer){if(!Array.isArray(o.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");c.initializer=[];for(var f=0;f<o.initializer.length;++f){if(typeof o.initializer[f]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");c.initializer[f]=u.onnx.TensorProto.fromObject(o.initializer[f])}}if(o.sparseInitializer){if(!Array.isArray(o.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");c.sparseInitializer=[];for(var f=0;f<o.sparseInitializer.length;++f){if(typeof o.sparseInitializer[f]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");c.sparseInitializer[f]=u.onnx.SparseTensorProto.fromObject(o.sparseInitializer[f])}}if(o.docString!=null&&(c.docString=String(o.docString)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.GraphProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f){if(typeof o.input[f]!="object")throw TypeError(".onnx.GraphProto.input: object expected");c.input[f]=u.onnx.ValueInfoProto.fromObject(o.input[f])}}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.GraphProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f){if(typeof o.output[f]!="object")throw TypeError(".onnx.GraphProto.output: object expected");c.output[f]=u.onnx.ValueInfoProto.fromObject(o.output[f])}}if(o.valueInfo){if(!Array.isArray(o.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");c.valueInfo=[];for(var f=0;f<o.valueInfo.length;++f){if(typeof o.valueInfo[f]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");c.valueInfo[f]=u.onnx.ValueInfoProto.fromObject(o.valueInfo[f])}}if(o.quantizationAnnotation){if(!Array.isArray(o.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");c.quantizationAnnotation=[];for(var f=0;f<o.quantizationAnnotation.length;++f){if(typeof o.quantizationAnnotation[f]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");c.quantizationAnnotation[f]=u.onnx.TensorAnnotation.fromObject(o.quantizationAnnotation[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[],f.sparseInitializer=[]),c.defaults&&(f.name="",f.docString=""),o.node&&o.node.length){f.node=[];for(var d=0;d<o.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(o.node[d],c)}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.initializer&&o.initializer.length){f.initializer=[];for(var d=0;d<o.initializer.length;++d)f.initializer[d]=u.onnx.TensorProto.toObject(o.initializer[d],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=u.onnx.ValueInfoProto.toObject(o.input[d],c)}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=u.onnx.ValueInfoProto.toObject(o.output[d],c)}if(o.valueInfo&&o.valueInfo.length){f.valueInfo=[];for(var d=0;d<o.valueInfo.length;++d)f.valueInfo[d]=u.onnx.ValueInfoProto.toObject(o.valueInfo[d],c)}if(o.quantizationAnnotation&&o.quantizationAnnotation.length){f.quantizationAnnotation=[];for(var d=0;d<o.quantizationAnnotation.length;++d)f.quantizationAnnotation[d]=u.onnx.TensorAnnotation.toObject(o.quantizationAnnotation[d],c)}if(o.sparseInitializer&&o.sparseInitializer.length){f.sparseInitializer=[];for(var d=0;d<o.sparseInitializer.length;++d)f.sparseInitializer[d]=u.onnx.SparseTensorProto.toObject(o.sparseInitializer[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.GraphProto"},l}(),s.TensorProto=function(){function l(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.dims=a.emptyArray,l.prototype.dataType=0,l.prototype.segment=null,l.prototype.floatData=a.emptyArray,l.prototype.int32Data=a.emptyArray,l.prototype.stringData=a.emptyArray,l.prototype.int64Data=a.emptyArray,l.prototype.name="",l.prototype.docString="",l.prototype.rawData=a.newBuffer([]),l.prototype.externalData=a.emptyArray,l.prototype.dataLocation=0,l.prototype.doubleData=a.emptyArray,l.prototype.uint64Data=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.dims!=null&&o.dims.length){c.uint32(10).fork();for(var f=0;f<o.dims.length;++f)c.int64(o.dims[f]);c.ldelim()}if(o.dataType!=null&&Object.hasOwnProperty.call(o,"dataType")&&c.uint32(16).int32(o.dataType),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&u.onnx.TensorProto.Segment.encode(o.segment,c.uint32(26).fork()).ldelim(),o.floatData!=null&&o.floatData.length){c.uint32(34).fork();for(var f=0;f<o.floatData.length;++f)c.float(o.floatData[f]);c.ldelim()}if(o.int32Data!=null&&o.int32Data.length){c.uint32(42).fork();for(var f=0;f<o.int32Data.length;++f)c.int32(o.int32Data[f]);c.ldelim()}if(o.stringData!=null&&o.stringData.length)for(var f=0;f<o.stringData.length;++f)c.uint32(50).bytes(o.stringData[f]);if(o.int64Data!=null&&o.int64Data.length){c.uint32(58).fork();for(var f=0;f<o.int64Data.length;++f)c.int64(o.int64Data[f]);c.ldelim()}if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(66).string(o.name),o.rawData!=null&&Object.hasOwnProperty.call(o,"rawData")&&c.uint32(74).bytes(o.rawData),o.doubleData!=null&&o.doubleData.length){c.uint32(82).fork();for(var f=0;f<o.doubleData.length;++f)c.double(o.doubleData[f]);c.ldelim()}if(o.uint64Data!=null&&o.uint64Data.length){c.uint32(90).fork();for(var f=0;f<o.uint64Data.length;++f)c.uint64(o.uint64Data[f]);c.ldelim()}if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(98).string(o.docString),o.externalData!=null&&o.externalData.length)for(var f=0;f<o.externalData.length;++f)u.onnx.StringStringEntryProto.encode(o.externalData[f],c.uint32(106).fork()).ldelim();return o.dataLocation!=null&&Object.hasOwnProperty.call(o,"dataLocation")&&c.uint32(112).int32(o.dataLocation),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.dims.push(o.int64());else d.dims.push(o.int64());break}case 2:{d.dataType=o.int32();break}case 3:{d.segment=u.onnx.TensorProto.Segment.decode(o,o.uint32());break}case 4:{if(d.floatData&&d.floatData.length||(d.floatData=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.floatData.push(o.float());else d.floatData.push(o.float());break}case 5:{if(d.int32Data&&d.int32Data.length||(d.int32Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.int32Data.push(o.int32());else d.int32Data.push(o.int32());break}case 6:{d.stringData&&d.stringData.length||(d.stringData=[]),d.stringData.push(o.bytes());break}case 7:{if(d.int64Data&&d.int64Data.length||(d.int64Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.int64Data.push(o.int64());else d.int64Data.push(o.int64());break}case 8:{d.name=o.string();break}case 12:{d.docString=o.string();break}case 9:{d.rawData=o.bytes();break}case 13:{d.externalData&&d.externalData.length||(d.externalData=[]),d.externalData.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 14:{d.dataLocation=o.int32();break}case 10:{if(d.doubleData&&d.doubleData.length||(d.doubleData=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.doubleData.push(o.double());else d.doubleData.push(o.double());break}case 11:{if(d.uint64Data&&d.uint64Data.length||(d.uint64Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.uint64Data.push(o.uint64());else d.uint64Data.push(o.uint64());break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var c=0;c<o.dims.length;++c)if(!a.isInteger(o.dims[c])&&!(o.dims[c]&&a.isInteger(o.dims[c].low)&&a.isInteger(o.dims[c].high)))return"dims: integer|Long[] expected"}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&!a.isInteger(o.dataType))return"dataType: integer expected";if(o.segment!=null&&o.hasOwnProperty("segment")){var f=u.onnx.TensorProto.Segment.verify(o.segment);if(f)return"segment."+f}if(o.floatData!=null&&o.hasOwnProperty("floatData")){if(!Array.isArray(o.floatData))return"floatData: array expected";for(var c=0;c<o.floatData.length;++c)if(typeof o.floatData[c]!="number")return"floatData: number[] expected"}if(o.int32Data!=null&&o.hasOwnProperty("int32Data")){if(!Array.isArray(o.int32Data))return"int32Data: array expected";for(var c=0;c<o.int32Data.length;++c)if(!a.isInteger(o.int32Data[c]))return"int32Data: integer[] expected"}if(o.stringData!=null&&o.hasOwnProperty("stringData")){if(!Array.isArray(o.stringData))return"stringData: array expected";for(var c=0;c<o.stringData.length;++c)if(!(o.stringData[c]&&typeof o.stringData[c].length=="number"||a.isString(o.stringData[c])))return"stringData: buffer[] expected"}if(o.int64Data!=null&&o.hasOwnProperty("int64Data")){if(!Array.isArray(o.int64Data))return"int64Data: array expected";for(var c=0;c<o.int64Data.length;++c)if(!a.isInteger(o.int64Data[c])&&!(o.int64Data[c]&&a.isInteger(o.int64Data[c].low)&&a.isInteger(o.int64Data[c].high)))return"int64Data: integer|Long[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.rawData!=null&&o.hasOwnProperty("rawData")&&!(o.rawData&&typeof o.rawData.length=="number"||a.isString(o.rawData)))return"rawData: buffer expected";if(o.externalData!=null&&o.hasOwnProperty("externalData")){if(!Array.isArray(o.externalData))return"externalData: array expected";for(var c=0;c<o.externalData.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.externalData[c]);if(f)return"externalData."+f}}if(o.dataLocation!=null&&o.hasOwnProperty("dataLocation"))switch(o.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(o.doubleData!=null&&o.hasOwnProperty("doubleData")){if(!Array.isArray(o.doubleData))return"doubleData: array expected";for(var c=0;c<o.doubleData.length;++c)if(typeof o.doubleData[c]!="number")return"doubleData: number[] expected"}if(o.uint64Data!=null&&o.hasOwnProperty("uint64Data")){if(!Array.isArray(o.uint64Data))return"uint64Data: array expected";for(var c=0;c<o.uint64Data.length;++c)if(!a.isInteger(o.uint64Data[c])&&!(o.uint64Data[c]&&a.isInteger(o.uint64Data[c].low)&&a.isInteger(o.uint64Data[c].high)))return"uint64Data: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorProto)return o;var c=new u.onnx.TensorProto;if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.TensorProto.dims: array expected");c.dims=[];for(var f=0;f<o.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(o.dims[f])).unsigned=!1:typeof o.dims[f]=="string"?c.dims[f]=parseInt(o.dims[f],10):typeof o.dims[f]=="number"?c.dims[f]=o.dims[f]:typeof o.dims[f]=="object"&&(c.dims[f]=new a.LongBits(o.dims[f].low>>>0,o.dims[f].high>>>0).toNumber())}if(o.dataType!=null&&(c.dataType=o.dataType|0),o.segment!=null){if(typeof o.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");c.segment=u.onnx.TensorProto.Segment.fromObject(o.segment)}if(o.floatData){if(!Array.isArray(o.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");c.floatData=[];for(var f=0;f<o.floatData.length;++f)c.floatData[f]=Number(o.floatData[f])}if(o.int32Data){if(!Array.isArray(o.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");c.int32Data=[];for(var f=0;f<o.int32Data.length;++f)c.int32Data[f]=o.int32Data[f]|0}if(o.stringData){if(!Array.isArray(o.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");c.stringData=[];for(var f=0;f<o.stringData.length;++f)typeof o.stringData[f]=="string"?a.base64.decode(o.stringData[f],c.stringData[f]=a.newBuffer(a.base64.length(o.stringData[f])),0):o.stringData[f].length>=0&&(c.stringData[f]=o.stringData[f])}if(o.int64Data){if(!Array.isArray(o.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");c.int64Data=[];for(var f=0;f<o.int64Data.length;++f)a.Long?(c.int64Data[f]=a.Long.fromValue(o.int64Data[f])).unsigned=!1:typeof o.int64Data[f]=="string"?c.int64Data[f]=parseInt(o.int64Data[f],10):typeof o.int64Data[f]=="number"?c.int64Data[f]=o.int64Data[f]:typeof o.int64Data[f]=="object"&&(c.int64Data[f]=new a.LongBits(o.int64Data[f].low>>>0,o.int64Data[f].high>>>0).toNumber())}if(o.name!=null&&(c.name=String(o.name)),o.docString!=null&&(c.docString=String(o.docString)),o.rawData!=null&&(typeof o.rawData=="string"?a.base64.decode(o.rawData,c.rawData=a.newBuffer(a.base64.length(o.rawData)),0):o.rawData.length>=0&&(c.rawData=o.rawData)),o.externalData){if(!Array.isArray(o.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");c.externalData=[];for(var f=0;f<o.externalData.length;++f){if(typeof o.externalData[f]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");c.externalData[f]=u.onnx.StringStringEntryProto.fromObject(o.externalData[f])}}switch(o.dataLocation){default:if(typeof o.dataLocation=="number"){c.dataLocation=o.dataLocation;break}break;case"DEFAULT":case 0:c.dataLocation=0;break;case"EXTERNAL":case 1:c.dataLocation=1;break}if(o.doubleData){if(!Array.isArray(o.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");c.doubleData=[];for(var f=0;f<o.doubleData.length;++f)c.doubleData[f]=Number(o.doubleData[f])}if(o.uint64Data){if(!Array.isArray(o.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");c.uint64Data=[];for(var f=0;f<o.uint64Data.length;++f)a.Long?(c.uint64Data[f]=a.Long.fromValue(o.uint64Data[f])).unsigned=!0:typeof o.uint64Data[f]=="string"?c.uint64Data[f]=parseInt(o.uint64Data[f],10):typeof o.uint64Data[f]=="number"?c.uint64Data[f]=o.uint64Data[f]:typeof o.uint64Data[f]=="object"&&(c.uint64Data[f]=new a.LongBits(o.uint64Data[f].low>>>0,o.uint64Data[f].high>>>0).toNumber(!0))}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),c.defaults&&(f.dataType=0,f.segment=null,f.name="",c.bytes===String?f.rawData="":(f.rawData=[],c.bytes!==Array&&(f.rawData=a.newBuffer(f.rawData))),f.docString="",f.dataLocation=c.enums===String?"DEFAULT":0),o.dims&&o.dims.length){f.dims=[];for(var d=0;d<o.dims.length;++d)typeof o.dims[d]=="number"?f.dims[d]=c.longs===String?String(o.dims[d]):o.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(o.dims[d]):c.longs===Number?new a.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber():o.dims[d]}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&(f.dataType=o.dataType),o.segment!=null&&o.hasOwnProperty("segment")&&(f.segment=u.onnx.TensorProto.Segment.toObject(o.segment,c)),o.floatData&&o.floatData.length){f.floatData=[];for(var d=0;d<o.floatData.length;++d)f.floatData[d]=c.json&&!isFinite(o.floatData[d])?String(o.floatData[d]):o.floatData[d]}if(o.int32Data&&o.int32Data.length){f.int32Data=[];for(var d=0;d<o.int32Data.length;++d)f.int32Data[d]=o.int32Data[d]}if(o.stringData&&o.stringData.length){f.stringData=[];for(var d=0;d<o.stringData.length;++d)f.stringData[d]=c.bytes===String?a.base64.encode(o.stringData[d],0,o.stringData[d].length):c.bytes===Array?Array.prototype.slice.call(o.stringData[d]):o.stringData[d]}if(o.int64Data&&o.int64Data.length){f.int64Data=[];for(var d=0;d<o.int64Data.length;++d)typeof o.int64Data[d]=="number"?f.int64Data[d]=c.longs===String?String(o.int64Data[d]):o.int64Data[d]:f.int64Data[d]=c.longs===String?a.Long.prototype.toString.call(o.int64Data[d]):c.longs===Number?new a.LongBits(o.int64Data[d].low>>>0,o.int64Data[d].high>>>0).toNumber():o.int64Data[d]}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.rawData!=null&&o.hasOwnProperty("rawData")&&(f.rawData=c.bytes===String?a.base64.encode(o.rawData,0,o.rawData.length):c.bytes===Array?Array.prototype.slice.call(o.rawData):o.rawData),o.doubleData&&o.doubleData.length){f.doubleData=[];for(var d=0;d<o.doubleData.length;++d)f.doubleData[d]=c.json&&!isFinite(o.doubleData[d])?String(o.doubleData[d]):o.doubleData[d]}if(o.uint64Data&&o.uint64Data.length){f.uint64Data=[];for(var d=0;d<o.uint64Data.length;++d)typeof o.uint64Data[d]=="number"?f.uint64Data[d]=c.longs===String?String(o.uint64Data[d]):o.uint64Data[d]:f.uint64Data[d]=c.longs===String?a.Long.prototype.toString.call(o.uint64Data[d]):c.longs===Number?new a.LongBits(o.uint64Data[d].low>>>0,o.uint64Data[d].high>>>0).toNumber(!0):o.uint64Data[d]}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.externalData&&o.externalData.length){f.externalData=[];for(var d=0;d<o.externalData.length;++d)f.externalData[d]=u.onnx.StringStringEntryProto.toObject(o.externalData[d],c)}return o.dataLocation!=null&&o.hasOwnProperty("dataLocation")&&(f.dataLocation=c.enums===String?u.onnx.TensorProto.DataLocation[o.dataLocation]===void 0?o.dataLocation:u.onnx.TensorProto.DataLocation[o.dataLocation]:o.dataLocation),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorProto"},l.DataType=function(){var o={},c=Object.create(o);return c[o[0]="UNDEFINED"]=0,c[o[1]="FLOAT"]=1,c[o[2]="UINT8"]=2,c[o[3]="INT8"]=3,c[o[4]="UINT16"]=4,c[o[5]="INT16"]=5,c[o[6]="INT32"]=6,c[o[7]="INT64"]=7,c[o[8]="STRING"]=8,c[o[9]="BOOL"]=9,c[o[10]="FLOAT16"]=10,c[o[11]="DOUBLE"]=11,c[o[12]="UINT32"]=12,c[o[13]="UINT64"]=13,c[o[14]="COMPLEX64"]=14,c[o[15]="COMPLEX128"]=15,c[o[16]="BFLOAT16"]=16,c[o[17]="FLOAT8E4M3FN"]=17,c[o[18]="FLOAT8E4M3FNUZ"]=18,c[o[19]="FLOAT8E5M2"]=19,c[o[20]="FLOAT8E5M2FNUZ"]=20,c}(),l.Segment=function(){function o(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}return o.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,o.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,o.create=function(c){return new o(c)},o.encode=function(c,f){return f||(f=i.create()),c.begin!=null&&Object.hasOwnProperty.call(c,"begin")&&f.uint32(8).int64(c.begin),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&f.uint32(16).int64(c.end),f},o.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},o.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TensorProto.Segment;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.begin=c.int64();break}case 2:{h.end=c.int64();break}default:c.skipType(p&7);break}}return h},o.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.begin!=null&&c.hasOwnProperty("begin")&&!a.isInteger(c.begin)&&!(c.begin&&a.isInteger(c.begin.low)&&a.isInteger(c.begin.high))?"begin: integer|Long expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)&&!(c.end&&a.isInteger(c.end.low)&&a.isInteger(c.end.high))?"end: integer|Long expected":null},o.fromObject=function(c){if(c instanceof u.onnx.TensorProto.Segment)return c;var f=new u.onnx.TensorProto.Segment;return c.begin!=null&&(a.Long?(f.begin=a.Long.fromValue(c.begin)).unsigned=!1:typeof c.begin=="string"?f.begin=parseInt(c.begin,10):typeof c.begin=="number"?f.begin=c.begin:typeof c.begin=="object"&&(f.begin=new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber())),c.end!=null&&(a.Long?(f.end=a.Long.fromValue(c.end)).unsigned=!1:typeof c.end=="string"?f.end=parseInt(c.end,10):typeof c.end=="number"?f.end=c.end:typeof c.end=="object"&&(f.end=new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber())),f},o.toObject=function(c,f){f||(f={});var d={};if(f.defaults){if(a.Long){var h=new a.Long(0,0,!1);d.begin=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.begin=f.longs===String?"0":0;if(a.Long){var h=new a.Long(0,0,!1);d.end=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.end=f.longs===String?"0":0}return c.begin!=null&&c.hasOwnProperty("begin")&&(typeof c.begin=="number"?d.begin=f.longs===String?String(c.begin):c.begin:d.begin=f.longs===String?a.Long.prototype.toString.call(c.begin):f.longs===Number?new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber():c.begin),c.end!=null&&c.hasOwnProperty("end")&&(typeof c.end=="number"?d.end=f.longs===String?String(c.end):c.end:d.end=f.longs===String?a.Long.prototype.toString.call(c.end):f.longs===Number?new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber():c.end),d},o.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},o.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TensorProto.Segment"},o}(),l.DataLocation=function(){var o={},c=Object.create(o);return c[o[0]="DEFAULT"]=0,c[o[1]="EXTERNAL"]=1,c}(),l}(),s.SparseTensorProto=function(){function l(o){if(this.dims=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.values=null,l.prototype.indices=null,l.prototype.dims=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.values!=null&&Object.hasOwnProperty.call(o,"values")&&u.onnx.TensorProto.encode(o.values,c.uint32(10).fork()).ldelim(),o.indices!=null&&Object.hasOwnProperty.call(o,"indices")&&u.onnx.TensorProto.encode(o.indices,c.uint32(18).fork()).ldelim(),o.dims!=null&&o.dims.length){c.uint32(26).fork();for(var f=0;f<o.dims.length;++f)c.int64(o.dims[f]);c.ldelim()}return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.SparseTensorProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.values=u.onnx.TensorProto.decode(o,o.uint32());break}case 2:{d.indices=u.onnx.TensorProto.decode(o,o.uint32());break}case 3:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.dims.push(o.int64());else d.dims.push(o.int64());break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.values!=null&&o.hasOwnProperty("values")){var c=u.onnx.TensorProto.verify(o.values);if(c)return"values."+c}if(o.indices!=null&&o.hasOwnProperty("indices")){var c=u.onnx.TensorProto.verify(o.indices);if(c)return"indices."+c}if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var f=0;f<o.dims.length;++f)if(!a.isInteger(o.dims[f])&&!(o.dims[f]&&a.isInteger(o.dims[f].low)&&a.isInteger(o.dims[f].high)))return"dims: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof u.onnx.SparseTensorProto)return o;var c=new u.onnx.SparseTensorProto;if(o.values!=null){if(typeof o.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");c.values=u.onnx.TensorProto.fromObject(o.values)}if(o.indices!=null){if(typeof o.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");c.indices=u.onnx.TensorProto.fromObject(o.indices)}if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");c.dims=[];for(var f=0;f<o.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(o.dims[f])).unsigned=!1:typeof o.dims[f]=="string"?c.dims[f]=parseInt(o.dims[f],10):typeof o.dims[f]=="number"?c.dims[f]=o.dims[f]:typeof o.dims[f]=="object"&&(c.dims[f]=new a.LongBits(o.dims[f].low>>>0,o.dims[f].high>>>0).toNumber())}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[]),c.defaults&&(f.values=null,f.indices=null),o.values!=null&&o.hasOwnProperty("values")&&(f.values=u.onnx.TensorProto.toObject(o.values,c)),o.indices!=null&&o.hasOwnProperty("indices")&&(f.indices=u.onnx.TensorProto.toObject(o.indices,c)),o.dims&&o.dims.length){f.dims=[];for(var d=0;d<o.dims.length;++d)typeof o.dims[d]=="number"?f.dims[d]=c.longs===String?String(o.dims[d]):o.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(o.dims[d]):c.longs===Number?new a.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber():o.dims[d]}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.SparseTensorProto"},l}(),s.TensorShapeProto=function(){function l(o){if(this.dim=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.dim=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.dim!=null&&o.dim.length)for(var f=0;f<o.dim.length;++f)u.onnx.TensorShapeProto.Dimension.encode(o.dim[f],c.uint32(10).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorShapeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.dim&&d.dim.length||(d.dim=[]),d.dim.push(u.onnx.TensorShapeProto.Dimension.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dim!=null&&o.hasOwnProperty("dim")){if(!Array.isArray(o.dim))return"dim: array expected";for(var c=0;c<o.dim.length;++c){var f=u.onnx.TensorShapeProto.Dimension.verify(o.dim[c]);if(f)return"dim."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorShapeProto)return o;var c=new u.onnx.TensorShapeProto;if(o.dim){if(!Array.isArray(o.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");c.dim=[];for(var f=0;f<o.dim.length;++f){if(typeof o.dim[f]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");c.dim[f]=u.onnx.TensorShapeProto.Dimension.fromObject(o.dim[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dim=[]),o.dim&&o.dim.length){f.dim=[];for(var d=0;d<o.dim.length;++d)f.dim[d]=u.onnx.TensorShapeProto.Dimension.toObject(o.dim[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorShapeProto"},l.Dimension=function(){function o(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}o.prototype.dimValue=null,o.prototype.dimParam=null,o.prototype.denotation="";var c;return Object.defineProperty(o.prototype,"value",{get:a.oneOfGetter(c=["dimValue","dimParam"]),set:a.oneOfSetter(c)}),o.create=function(f){return new o(f)},o.encode=function(f,d){return d||(d=i.create()),f.dimValue!=null&&Object.hasOwnProperty.call(f,"dimValue")&&d.uint32(8).int64(f.dimValue),f.dimParam!=null&&Object.hasOwnProperty.call(f,"dimParam")&&d.uint32(18).string(f.dimParam),f.denotation!=null&&Object.hasOwnProperty.call(f,"denotation")&&d.uint32(26).string(f.denotation),d},o.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},o.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TensorShapeProto.Dimension;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.dimValue=f.int64();break}case 2:{p.dimParam=f.string();break}case 3:{p.denotation=f.string();break}default:f.skipType(m&7);break}}return p},o.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},o.verify=function(f){if(typeof f!="object"||f===null)return"object expected";var d={};if(f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(d.value=1,!a.isInteger(f.dimValue)&&!(f.dimValue&&a.isInteger(f.dimValue.low)&&a.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(f.dimParam!=null&&f.hasOwnProperty("dimParam")){if(d.value===1)return"value: multiple values";if(d.value=1,!a.isString(f.dimParam))return"dimParam: string expected"}return f.denotation!=null&&f.hasOwnProperty("denotation")&&!a.isString(f.denotation)?"denotation: string expected":null},o.fromObject=function(f){if(f instanceof u.onnx.TensorShapeProto.Dimension)return f;var d=new u.onnx.TensorShapeProto.Dimension;return f.dimValue!=null&&(a.Long?(d.dimValue=a.Long.fromValue(f.dimValue)).unsigned=!1:typeof f.dimValue=="string"?d.dimValue=parseInt(f.dimValue,10):typeof f.dimValue=="number"?d.dimValue=f.dimValue:typeof f.dimValue=="object"&&(d.dimValue=new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),f.dimParam!=null&&(d.dimParam=String(f.dimParam)),f.denotation!=null&&(d.denotation=String(f.denotation)),d},o.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.denotation=""),f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(typeof f.dimValue=="number"?h.dimValue=d.longs===String?String(f.dimValue):f.dimValue:h.dimValue=d.longs===String?a.Long.prototype.toString.call(f.dimValue):d.longs===Number?new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,d.oneofs&&(h.value="dimValue")),f.dimParam!=null&&f.hasOwnProperty("dimParam")&&(h.dimParam=f.dimParam,d.oneofs&&(h.value="dimParam")),f.denotation!=null&&f.hasOwnProperty("denotation")&&(h.denotation=f.denotation),h},o.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},o.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TensorShapeProto.Dimension"},o}(),l}(),s.TypeProto=function(){function l(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}l.prototype.tensorType=null,l.prototype.sequenceType=null,l.prototype.mapType=null,l.prototype.optionalType=null,l.prototype.sparseTensorType=null,l.prototype.denotation="";var o;return Object.defineProperty(l.prototype,"value",{get:a.oneOfGetter(o=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:a.oneOfSetter(o)}),l.create=function(c){return new l(c)},l.encode=function(c,f){return f||(f=i.create()),c.tensorType!=null&&Object.hasOwnProperty.call(c,"tensorType")&&u.onnx.TypeProto.Tensor.encode(c.tensorType,f.uint32(10).fork()).ldelim(),c.sequenceType!=null&&Object.hasOwnProperty.call(c,"sequenceType")&&u.onnx.TypeProto.Sequence.encode(c.sequenceType,f.uint32(34).fork()).ldelim(),c.mapType!=null&&Object.hasOwnProperty.call(c,"mapType")&&u.onnx.TypeProto.Map.encode(c.mapType,f.uint32(42).fork()).ldelim(),c.denotation!=null&&Object.hasOwnProperty.call(c,"denotation")&&f.uint32(50).string(c.denotation),c.sparseTensorType!=null&&Object.hasOwnProperty.call(c,"sparseTensorType")&&u.onnx.TypeProto.SparseTensor.encode(c.sparseTensorType,f.uint32(66).fork()).ldelim(),c.optionalType!=null&&Object.hasOwnProperty.call(c,"optionalType")&&u.onnx.TypeProto.Optional.encode(c.optionalType,f.uint32(74).fork()).ldelim(),f},l.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},l.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TypeProto;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.tensorType=u.onnx.TypeProto.Tensor.decode(c,c.uint32());break}case 4:{h.sequenceType=u.onnx.TypeProto.Sequence.decode(c,c.uint32());break}case 5:{h.mapType=u.onnx.TypeProto.Map.decode(c,c.uint32());break}case 9:{h.optionalType=u.onnx.TypeProto.Optional.decode(c,c.uint32());break}case 8:{h.sparseTensorType=u.onnx.TypeProto.SparseTensor.decode(c,c.uint32());break}case 6:{h.denotation=c.string();break}default:c.skipType(p&7);break}}return h},l.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},l.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var f={};if(c.tensorType!=null&&c.hasOwnProperty("tensorType")){f.value=1;{var d=u.onnx.TypeProto.Tensor.verify(c.tensorType);if(d)return"tensorType."+d}}if(c.sequenceType!=null&&c.hasOwnProperty("sequenceType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Sequence.verify(c.sequenceType);if(d)return"sequenceType."+d}}if(c.mapType!=null&&c.hasOwnProperty("mapType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Map.verify(c.mapType);if(d)return"mapType."+d}}if(c.optionalType!=null&&c.hasOwnProperty("optionalType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Optional.verify(c.optionalType);if(d)return"optionalType."+d}}if(c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.SparseTensor.verify(c.sparseTensorType);if(d)return"sparseTensorType."+d}}return c.denotation!=null&&c.hasOwnProperty("denotation")&&!a.isString(c.denotation)?"denotation: string expected":null},l.fromObject=function(c){if(c instanceof u.onnx.TypeProto)return c;var f=new u.onnx.TypeProto;if(c.tensorType!=null){if(typeof c.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=u.onnx.TypeProto.Tensor.fromObject(c.tensorType)}if(c.sequenceType!=null){if(typeof c.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");f.sequenceType=u.onnx.TypeProto.Sequence.fromObject(c.sequenceType)}if(c.mapType!=null){if(typeof c.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");f.mapType=u.onnx.TypeProto.Map.fromObject(c.mapType)}if(c.optionalType!=null){if(typeof c.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");f.optionalType=u.onnx.TypeProto.Optional.fromObject(c.optionalType)}if(c.sparseTensorType!=null){if(typeof c.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");f.sparseTensorType=u.onnx.TypeProto.SparseTensor.fromObject(c.sparseTensorType)}return c.denotation!=null&&(f.denotation=String(c.denotation)),f},l.toObject=function(c,f){f||(f={});var d={};return f.defaults&&(d.denotation=""),c.tensorType!=null&&c.hasOwnProperty("tensorType")&&(d.tensorType=u.onnx.TypeProto.Tensor.toObject(c.tensorType,f),f.oneofs&&(d.value="tensorType")),c.sequenceType!=null&&c.hasOwnProperty("sequenceType")&&(d.sequenceType=u.onnx.TypeProto.Sequence.toObject(c.sequenceType,f),f.oneofs&&(d.value="sequenceType")),c.mapType!=null&&c.hasOwnProperty("mapType")&&(d.mapType=u.onnx.TypeProto.Map.toObject(c.mapType,f),f.oneofs&&(d.value="mapType")),c.denotation!=null&&c.hasOwnProperty("denotation")&&(d.denotation=c.denotation),c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")&&(d.sparseTensorType=u.onnx.TypeProto.SparseTensor.toObject(c.sparseTensorType,f),f.oneofs&&(d.value="sparseTensorType")),c.optionalType!=null&&c.hasOwnProperty("optionalType")&&(d.optionalType=u.onnx.TypeProto.Optional.toObject(c.optionalType,f),f.oneofs&&(d.value="optionalType")),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TypeProto"},l.Tensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Tensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Tensor)return f;var d=new u.onnx.TypeProto.Tensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Tensor"},c}(),l.Sequence=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Sequence;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Sequence)return f;var d=new u.onnx.TypeProto.Sequence;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Sequence"},c}(),l.Map=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.keyType=0,c.prototype.valueType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.keyType!=null&&Object.hasOwnProperty.call(f,"keyType")&&d.uint32(8).int32(f.keyType),f.valueType!=null&&Object.hasOwnProperty.call(f,"valueType")&&u.onnx.TypeProto.encode(f.valueType,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Map;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.keyType=f.int32();break}case 2:{p.valueType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.keyType!=null&&f.hasOwnProperty("keyType")&&!a.isInteger(f.keyType))return"keyType: integer expected";if(f.valueType!=null&&f.hasOwnProperty("valueType")){var d=u.onnx.TypeProto.verify(f.valueType);if(d)return"valueType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Map)return f;var d=new u.onnx.TypeProto.Map;if(f.keyType!=null&&(d.keyType=f.keyType|0),f.valueType!=null){if(typeof f.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");d.valueType=u.onnx.TypeProto.fromObject(f.valueType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.keyType=0,h.valueType=null),f.keyType!=null&&f.hasOwnProperty("keyType")&&(h.keyType=f.keyType),f.valueType!=null&&f.hasOwnProperty("valueType")&&(h.valueType=u.onnx.TypeProto.toObject(f.valueType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Map"},c}(),l.Optional=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Optional;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Optional)return f;var d=new u.onnx.TypeProto.Optional;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Optional"},c}(),l.SparseTensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.SparseTensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.SparseTensor)return f;var d=new u.onnx.TypeProto.SparseTensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.SparseTensor"},c}(),l}(),s.OperatorSetIdProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.domain="",l.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(10).string(o.domain),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&c.uint32(16).int64(o.version),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.OperatorSetIdProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.domain=o.string();break}case 2:{d.version=o.int64();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain)?"domain: string expected":o.version!=null&&o.hasOwnProperty("version")&&!a.isInteger(o.version)&&!(o.version&&a.isInteger(o.version.low)&&a.isInteger(o.version.high))?"version: integer|Long expected":null},l.fromObject=function(o){if(o instanceof u.onnx.OperatorSetIdProto)return o;var c=new u.onnx.OperatorSetIdProto;return o.domain!=null&&(c.domain=String(o.domain)),o.version!=null&&(a.Long?(c.version=a.Long.fromValue(o.version)).unsigned=!1:typeof o.version=="string"?c.version=parseInt(o.version,10):typeof o.version=="number"?c.version=o.version:typeof o.version=="object"&&(c.version=new a.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber())),c},l.toObject=function(o,c){c||(c={});var f={};if(c.defaults)if(f.domain="",a.Long){var d=new a.Long(0,0,!1);f.version=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.version=c.longs===String?"0":0;return o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.version!=null&&o.hasOwnProperty("version")&&(typeof o.version=="number"?f.version=c.longs===String?String(o.version):o.version:f.version=c.longs===String?a.Long.prototype.toString.call(o.version):c.longs===Number?new a.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber():o.version),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.OperatorSetIdProto"},l}(),s.OperatorStatus=function(){var l={},o=Object.create(l);return o[l[0]="EXPERIMENTAL"]=0,o[l[1]="STABLE"]=1,o}(),s.FunctionProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.attribute=a.emptyArray,l.prototype.attributeProto=a.emptyArray,l.prototype.node=a.emptyArray,l.prototype.docString="",l.prototype.opsetImport=a.emptyArray,l.prototype.domain="",l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)c.uint32(34).string(o.input[f]);if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)c.uint32(42).string(o.output[f]);if(o.attribute!=null&&o.attribute.length)for(var f=0;f<o.attribute.length;++f)c.uint32(50).string(o.attribute[f]);if(o.node!=null&&o.node.length)for(var f=0;f<o.node.length;++f)u.onnx.NodeProto.encode(o.node[f],c.uint32(58).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(66).string(o.docString),o.opsetImport!=null&&o.opsetImport.length)for(var f=0;f<o.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(o.opsetImport[f],c.uint32(74).fork()).ldelim();if(o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(82).string(o.domain),o.attributeProto!=null&&o.attributeProto.length)for(var f=0;f<o.attributeProto.length;++f)u.onnx.AttributeProto.encode(o.attributeProto[f],c.uint32(90).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.FunctionProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 4:{d.input&&d.input.length||(d.input=[]),d.input.push(o.string());break}case 5:{d.output&&d.output.length||(d.output=[]),d.output.push(o.string());break}case 6:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(o.string());break}case 11:{d.attributeProto&&d.attributeProto.length||(d.attributeProto=[]),d.attributeProto.push(u.onnx.AttributeProto.decode(o,o.uint32()));break}case 7:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(o,o.uint32()));break}case 8:{d.docString=o.string();break}case 9:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(o,o.uint32()));break}case 10:{d.domain=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c)if(!a.isString(o.input[c]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c)if(!a.isString(o.output[c]))return"output: string[] expected"}if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(var c=0;c<o.attribute.length;++c)if(!a.isString(o.attribute[c]))return"attribute: string[] expected"}if(o.attributeProto!=null&&o.hasOwnProperty("attributeProto")){if(!Array.isArray(o.attributeProto))return"attributeProto: array expected";for(var c=0;c<o.attributeProto.length;++c){var f=u.onnx.AttributeProto.verify(o.attributeProto[c]);if(f)return"attributeProto."+f}}if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var c=0;c<o.node.length;++c){var f=u.onnx.NodeProto.verify(o.node[c]);if(f)return"node."+f}}if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var c=0;c<o.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(o.opsetImport[c]);if(f)return"opsetImport."+f}}return o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain)?"domain: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.FunctionProto)return o;var c=new u.onnx.FunctionProto;if(o.name!=null&&(c.name=String(o.name)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.FunctionProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f)c.input[f]=String(o.input[f])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.FunctionProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f)c.output[f]=String(o.output[f])}if(o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");c.attribute=[];for(var f=0;f<o.attribute.length;++f)c.attribute[f]=String(o.attribute[f])}if(o.attributeProto){if(!Array.isArray(o.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");c.attributeProto=[];for(var f=0;f<o.attributeProto.length;++f){if(typeof o.attributeProto[f]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");c.attributeProto[f]=u.onnx.AttributeProto.fromObject(o.attributeProto[f])}}if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.FunctionProto.node: array expected");c.node=[];for(var f=0;f<o.node.length;++f){if(typeof o.node[f]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(o.node[f])}}if(o.docString!=null&&(c.docString=String(o.docString)),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<o.opsetImport.length;++f){if(typeof o.opsetImport[f]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(o.opsetImport[f])}}return o.domain!=null&&(c.domain=String(o.domain)),c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[],f.node=[],f.opsetImport=[],f.attributeProto=[]),c.defaults&&(f.name="",f.docString="",f.domain=""),o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=o.input[d]}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=o.output[d]}if(o.attribute&&o.attribute.length){f.attribute=[];for(var d=0;d<o.attribute.length;++d)f.attribute[d]=o.attribute[d]}if(o.node&&o.node.length){f.node=[];for(var d=0;d<o.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(o.node[d],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.opsetImport&&o.opsetImport.length){f.opsetImport=[];for(var d=0;d<o.opsetImport.length;++d)f.opsetImport[d]=u.onnx.OperatorSetIdProto.toObject(o.opsetImport[d],c)}if(o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.attributeProto&&o.attributeProto.length){f.attributeProto=[];for(var d=0;d<o.attributeProto.length;++d)f.attributeProto[d]=u.onnx.AttributeProto.toObject(o.attributeProto[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.FunctionProto"},l}(),s}(),e.exports=u});function bh(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function d1(t){return new TextDecoder().decode(t)}var Ut,gc,$E,zo,kA,Nn,Ho,Re,h1,wh,Ac,Sc,gt=Y(()=>{"use strict";W1(),NA(),Ut=lu(Cc()),pu(),gc=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},$E=class{static preprocessInputShapes(t,e){let r=t.length===1?[1,t[0]]:t,n=e.length===1?[e[0],1]:e;return[r,n]}static postprocessOutputShape(t,e,r){e===1&&t.splice(t.length-2,1),r===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},zo=class mc{static calcShape(e,r,n=!1){let i=e.length,a=r.length;if(i===0)return r;if(a===0)return e;let u=Math.max(e.length,r.length),s=new Array(u);if(n){if(i<2||a<2)return;let l=$E.calcMatMulShape([e[i-2],e[i-1]],[r[a-2],r[a-1]]);if(l===void 0)return;[s[u-2],s[u-1]]=l}for(let l=n?3:1;l<=u;l++){let o=i-l<0?1:e[i-l],c=a-l<0?1:r[a-l];if(o!==c&&o>1&&c>1)return;s[u-l]=Math.max(o,c)}return s}static index(e,r){let n=new Array(r.length);return mc.fillIndex(e,r,n),n}static fillIndex(e,r,n){let i=e.length-r.length;for(let a=0;a<r.length;a++)n[a]=e[i+a]%r[a]}static calc(e,r,n,i,a){let u=mc.calcShape(e.dims,r.dims);if(u){if(i&&!Re.areEqual(u,e.dims))return;let s=Re.size(u),l=i?e:new Rn(u,a||e.type);if(u.length===0)l.set([],n(e.get([]),r.get([])));else{let o=new Array(u.length),c=new Array(e.dims.length),f=new Array(r.dims.length),d=0,h=0,p=!1,m=!1;e.dims.length===0&&(d=e.get([]),p=!0),r.dims.length===0&&(h=r.get([]),m=!0);let v;for(let x=0;x<s;x++){v=x;for(let y=u.length-1;y>=0;y--)o[y]=v%u[y],v=Math.floor(v/u[y]);p||(mc.fillIndex(o,e.dims,c),d=e.get(c)),m||(mc.fillIndex(o,r.dims,f),h=r.get(f)),l.set(o,n(d,h))}}return l}}static isValidBroadcast(e,r){let n=e.length,i=r.length;if(n>i)return!1;for(let a=1;a<=n;a++)if(e[n-a]!==1&&e[n-a]!==r[i-a])return!1;return!0}static getBroadcastDims(e,r){let n=e.length,i=[];for(let a=0;a<n;a++){let u=n-1-a,s=e[u]||1;(r[r.length-1-a]||1)>1&&s===1&&i.unshift(u)}return i}},kA=class{static getShapeOfGemmResult(t,e,r,n,i){if(t.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let a,u,s;e?(a=t[1],u=t[0]):(a=t[0],u=t[1]);let l=-1;if(n?(s=r[0],l=1):(s=r[1],l=0),r[l]!==u)throw new Error("dimension mismatch");if(a<=0||s<=0||u<=0)throw new Error("invalid shape specified");if(i&&!zo.isValidBroadcast(i,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,u]}},Nn=class p1{static tensorDataTypeFromProto(e){switch(e){case Ut.onnx.TensorProto.DataType.INT8:return"int8";case Ut.onnx.TensorProto.DataType.UINT8:return"uint8";case Ut.onnx.TensorProto.DataType.BOOL:return"bool";case Ut.onnx.TensorProto.DataType.INT16:return"int16";case Ut.onnx.TensorProto.DataType.UINT16:return"uint16";case Ut.onnx.TensorProto.DataType.INT32:return"int32";case Ut.onnx.TensorProto.DataType.UINT32:return"uint32";case Ut.onnx.TensorProto.DataType.FLOAT:return"float32";case Ut.onnx.TensorProto.DataType.DOUBLE:return"float64";case Ut.onnx.TensorProto.DataType.STRING:return"string";case Ut.onnx.TensorProto.DataType.INT64:return"int32";case Ut.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Ut.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return Ut.onnx.TensorProto.DataType.INT8;case"uint8":return Ut.onnx.TensorProto.DataType.UINT8;case"bool":return Ut.onnx.TensorProto.DataType.BOOL;case"int16":return Ut.onnx.TensorProto.DataType.INT16;case"uint16":return Ut.onnx.TensorProto.DataType.UINT16;case"int32":return Ut.onnx.TensorProto.DataType.INT32;case"uint32":return Ut.onnx.TensorProto.DataType.UINT32;case"float32":return Ut.onnx.TensorProto.DataType.FLOAT;case"float64":return Ut.onnx.TensorProto.DataType.DOUBLE;case"string":return Ut.onnx.TensorProto.DataType.STRING;case"int64":return Ut.onnx.TensorProto.DataType.INT64;case"uint64":return Ut.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(r=>Ki.isLong(r)?r.toNumber():r)}static tensorValueTypeFromProto(e){return{tensorType:p1.tensorDataTypeFromProto(e.elemType),shape:{dims:p1.tensorDimsFromProto(e.shape.dim.map(r=>r.dimValue))}}}static tensorDimsFromORTFormat(e){let r=[];for(let n=0;n<e.dimsLength();n++)r.push(Ho.longToNumber(e.dims(n)));return r}static tensorAttributesFromORTFormat(e){let r=[];for(let n=0;n<e.attributesLength();n++)r.push(e.attributes(n));return r}},Ho=class{static longToNumber(t,e){return Ki.isLong(t)?t.toNumber():t instanceof $.Long?Ki.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return Ki.isLong(t)||t instanceof $.Long}},Re=class Yi{static size(e){return Yi.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return Yi.getSizeFromDimensionRange(e,r,e.length)}static sizeToDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${e.length} dimensions.`);return Yi.getSizeFromDimensionRange(e,0,r)}static getSizeFromDimensionRange(e,r,n){let i=1;for(let a=r;a<n;a++){if(e[a]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");i*=e[a]}return i}static computeStrides(e){let r=e.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=e[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*e[i+1];return n}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,r,n){n===void 0&&(n=e.length);let i=0;for(let a=0;a<n;++a)i+=r[a]*e[a];return i}static offsetToIndices(e,r){let n=r.length;if(n===0)return[];if(n===1)return[e*r[0]];let i=new Array(r.length);for(let a=0;a<i.length-1;++a)i[a]=Math.floor(e/r[a]),e-=i[a]*r[a];return i[i.length-1]=e,i}static normalizeAxis(e,r){if(e<-r&&e>=r)throw new Error("unsupported axis for this operation.");return e<0?e+r:e}static normalizeAxes(e,r){return e.map(n=>this.normalizeAxis(n,r))}static incrementIndex(e,r,n){if(r.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(n===void 0)n=r.length;else if(n<=0||n>r.length)throw new Error("Incorrect axis to increment on");for(let i=n-1;i>=0&&(e[i]++,!(e[i]<r[i]));--i)e[i]=0}static calculateReshapedDims(e,r){if(r.length===0){if(e.length===0||Yi.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let n=r.length,i=new Array(n),a=-1,u=1;for(let l=0;l<n;l++){if(r[l]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(r[l]===-1){if(a!==-1)throw new Error("at most one dimension in shape hints can be -1");a=l}else{if(r[l]===0){if(l>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[l]=e[l]}else i[l]=r[l];u*=i[l]}}let s=Yi.size(e);if(a!==-1){if(s%u!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${r}]`);i[a]=s/u}else if(u!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return i}static sortBasedOnPerm(e,r){return r?r.map(n=>e[n]):e.slice().reverse()}static padShape(e,r){let n=e.length;return e.map((i,a)=>i+r[a]+r[a+n])}static areEqual(e,r){return e.length!==r.length?!1:e.every((n,i)=>n===r[i])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let r=1;for(let n of e){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);r*=n}return r}static flattenShape(e,r){r<0&&(r+=e.length);let n=e.reduce((a,u)=>a*u,1),i=e.slice(r).reduce((a,u)=>a*u,1);return[n/i,i]}static squeezeShape(e,r){let n=new Array;r=Yi.normalizeAxes(r,e.length);for(let i=0;i<e.length;i++){let a=r.indexOf(i)>=0;if(a&&e[i]!==1)throw new Error("squeeze an axis of size different than 1");(r.length===0&&e[i]>1||r.length>0&&!a)&&n.push(e[i])}return n}static unsqueezeShape(e,r){let n=new Array(e.length+r.length);n.fill(0);for(let a=0;a<r.length;a++){let u=Yi.normalizeAxis(r[a],n.length);if(u>=n.length)throw new Error("'axes' has an out of range axis");if(n[u]!==0)throw new Error("'axes' has a duplicate axis");n[u]=1}let i=0;for(let a=0;a<n.length;a++)n[a]===0&&(n[a]=e[i++]);if(i!==e.length)throw new Error("the unsqueezed dimension could not be established");return n}},h1=class LA{static splitShape(e,r,n,i){if(n.length===0){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");LA.determineSplit(e[r],i,n)}let a=[],u=[0];for(let s=0;s<n.length;++s){s!==0&&u.push(u[s-1]+n[s-1]);let l=e.slice();l[r]=n[s],a.push(l)}return[a,u]}static determineSplit(e,r,n){if(e%r!==0)throw new Error("cannot split tensor to equal sized parts");for(let i=0;i<r;++i)n.push(e/r)}},wh=class yc{static adjustPoolAttributes(e,r,n,i,a,u){if(!e&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let s=0;s<r.length-2;s++)s>=n.length?n.push(r[s+2]):n[s]=r[s+2];for(let s=0;s<n.length;s++)if(s<i.length){if(i[s]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let s=0;s<n.length;s++)if(s<a.length){if(a[s]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let s=0;s<n.length*2;s++)if(s<u.length){if(u[s]<0)throw new Error("pad should be greater than or equal to 1")}else u.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(u[s]>=n[s]||u[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,r,n,i,a,u){if(u){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<e.length-2;s++)yc.adjustPadAndReturnShape(e[s+2],r[s],n[s],i[s],a,s,s+e.length-2,u)}}static computePoolOutputShape(e,r,n,i,a,u,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return yc.computeShapeHelper(e,r,l,n,i,a,u,s),l}static computeConvOutputShape(e,r,n,i,a,u,s){if(e.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[e[0],r[0]];return yc.computeShapeHelper(!1,e,l,n,i,a,u,s),l}static computeShapeHelper(e,r,n,i,a,u,s,l){if(e)for(let o=0;o<r.length-2;o++)n.push(1);else for(let o=0;o<r.length-2;o++)n.push(yc.adjustPadAndReturnShape(r[o+2],i[o],a[o],u[o],s,o,o+r.length-2,l))}static adjustPadAndReturnShape(e,r,n,i,a,u,s,l){let o=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return a[u]=0,a[s]=0,Math.floor((e-o)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let c=((e+r-1)/r-1)*r+i-e;return a[u]=Math.floor(l==="SAME_LOWER"?(c+1)/2:c/2),a[s]=c-a[u],Math.floor((e+c-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[u]+a[s]-o)/r+1)}},Ac=-34028234663852886e22,Sc=34028234663852886e22});function QU(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function VE(t){switch(t){case Be.onnx.TensorProto.DataType.UINT8:case Be.onnx.TensorProto.DataType.INT8:case Be.onnx.TensorProto.DataType.BOOL:return 1;case Be.onnx.TensorProto.DataType.UINT16:case Be.onnx.TensorProto.DataType.INT16:return 2;case Be.onnx.TensorProto.DataType.FLOAT:case Be.onnx.TensorProto.DataType.INT32:case Be.onnx.TensorProto.DataType.UINT32:return 4;case Be.onnx.TensorProto.DataType.INT64:case Be.onnx.TensorProto.DataType.DOUBLE:case Be.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Be.onnx.TensorProto.DataType[t]}`)}}function JU(t,e){return new(BA(e))(t)}function BA(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function g1(t,e){if(e===Be.onnx.TensorProto.DataType.INT64||e===yh.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===Be.onnx.TensorProto.DataType.UINT32||e===yh.TensorDataType.UINT32||e===Be.onnx.TensorProto.DataType.UINT64||e===yh.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${Be.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function jE(t,e,r){switch(e){case Be.onnx.TensorProto.DataType.BOOL:case Be.onnx.TensorProto.DataType.UINT8:return t.getUint8(r);case Be.onnx.TensorProto.DataType.INT8:return t.getInt8(r);case Be.onnx.TensorProto.DataType.UINT16:return t.getUint16(r,!0);case Be.onnx.TensorProto.DataType.INT16:return t.getInt16(r,!0);case Be.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(r,!0);case Be.onnx.TensorProto.DataType.INT32:return t.getInt32(r,!0);case Be.onnx.TensorProto.DataType.UINT32:return t.getUint32(r,!0);case Be.onnx.TensorProto.DataType.INT64:return g1(Ki.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!1),e);case Be.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(r,!0);case Be.onnx.TensorProto.DataType.UINT64:return g1(Ki.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${Be.onnx.TensorProto.DataType[e]}`)}}var UE,Be,yh,Rn,pu=Y(()=>{"use strict";UE=lu(kU()),NA(),Ah(),Be=lu(Cc()),gt(),yh=Et.experimental.fbs,Rn=class vh{constructor(e,r,n,i,a,u=UE.Guid.create()){this.dims=e,this.type=r,this.dataProvider=n,this.asyncDataProvider=i,this.cache=a,this.dataId=u,this.size=Re.validateDimsAndCalcSize(e);let s=this.size,l=n===void 0&&i===void 0&&a===void 0;if(a!==void 0&&a.length!==s)throw new RangeError("Input dims doesn't match data length.");if(r==="string"){if(a!==void 0&&(!Array.isArray(a)||!a.every(o=>typeof o=="string")))throw new TypeError("cache should be a string array");l&&(this.cache=new Array(s))}else{if(a!==void 0){let o=BA(r);if(!(a instanceof o))throw new TypeError(`cache should be type ${o.name}`)}if(l){let o=new ArrayBuffer(s*QU(r));this.cache=JU(o,r)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[Re.indicesToOffset(e,this.strides)]}set(e,r){this.data[Re.indicesToOffset(e,this.strides)]=r}getData(){return U(this,null,function*(){return this.cache===void 0&&(this.cache=yield this.asyncDataProvider(this.dataId)),this.cache})}get strides(){return this._strides||(this._strides=Re.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Nn.tensorDataTypeFromProto(e.dataType),n=Nn.tensorDimsFromProto(e.dims),i=new vh(n,r);if(r==="string")e.stringData.forEach((a,u)=>{i.data[u]=d1(a)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let a=i.data,u=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),s=VE(e.dataType),l=e.rawData.byteLength/s;if(e.rawData.byteLength%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let o=0;o<l;o++){let c=jE(u,e.dataType,o*s);a[o]=c}}else{let a;switch(e.dataType){case Be.onnx.TensorProto.DataType.FLOAT:a=e.floatData;break;case Be.onnx.TensorProto.DataType.INT32:case Be.onnx.TensorProto.DataType.INT16:case Be.onnx.TensorProto.DataType.UINT16:case Be.onnx.TensorProto.DataType.INT8:case Be.onnx.TensorProto.DataType.UINT8:case Be.onnx.TensorProto.DataType.BOOL:a=e.int32Data;break;case Be.onnx.TensorProto.DataType.INT64:a=e.int64Data;break;case Be.onnx.TensorProto.DataType.DOUBLE:a=e.doubleData;break;case Be.onnx.TensorProto.DataType.UINT32:case Be.onnx.TensorProto.DataType.UINT64:a=e.uint64Data;break;default:throw new Error("unspecific error")}if(a==null)throw new Error("failed to populate data from a tensorproto value");let u=i.data;if(u.length!==a.length)throw new Error("array length mismatch");for(let s=0;s<a.length;s++){let l=a[s];Ki.isLong(l)?u[s]=g1(l,e.dataType):u[s]=l}}return i}static fromData(e,r,n){return new vh(r,n,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Nn.tensorDimsFromORTFormat(e),n=Nn.tensorDataTypeFromProto(e.dataType()),i=new vh(r,n);if(n==="string")for(let a=0;a<e.stringDataLength();a++)i.data[a]=e.stringData(a);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let a=i.data,u=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),s=VE(e.dataType()),l=e.rawDataLength()/s;if(e.rawDataLength()%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let o=0;o<l;o++){let c=jE(u,e.dataType(),o*s);a[o]=c}}return i}}});function Qe(t){return t===1?$A:VA}function eH(t){let e=Qe(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function tH(t){let e=Qe(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function rH(t,e){let r=Qe(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${r.output} = result;
  }
  `}var $A,VA,or=Y(()=>{"use strict";$A={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},VA={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),et=Y(()=>{"use strict"});function HE(t,e=n=>0,r){return U(this,null,function*(){return new Promise((n,i)=>{let a=0,u=()=>{if(t()){n();return}a++;let s=e(a);if(r!=null&&a>=r){i();return}setTimeout(u,s)};u()})})}function Cm(t){return bh(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function nH(t){return bh(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function ic(t,e){let r=JSON.parse(JSON.stringify(t));return r=e,r}function ac(t,e){return e.map(r=>t[r]).join(", ")}function Qi(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function du(t=6){return["x","y","z","w","u","v"].slice(0,t)}var Ei=Y(()=>{"use strict";gt()});function oH(t,e){return du(e).map(r=>`${t}.${r}`)}function q1(t,e){return e===1?[t]:oH(t,e)}function Oc(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var gu=Y(()=>{"use strict";Ei()});function iH(t,e,r){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let n="";for(let i=t-2;i<t;i++)n+=`${r[i]} >= ${e[i-t+2]}`,i<t-1&&(n+="||");return n}function aH(t,e){let r=t.length;if(r===0)return"getA(), 0, 0, 0";if(r===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="r, c",i="r, cp1",a="rp1, c",u="rp1, cp1",s="";if(r>2)for(let l=0;l<r-2;++l)s=s+`${e[l]},`;return`getA(${s}${n}),
          rEdge ? 0. : getA(${s}${a}),
          cEdge ? 0. : getA(${s}${i}),
          rEdge || cEdge ? 0. : getA(${s}${u})`}function sH(t,e,r,n){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${n};
    bool cEdge = cp1 >= ${r};
    `}var Om,zE,jA,uH=Y(()=>{"use strict";or(),et(),Ei(),gu(),Om={name:"pack",inputNames:["A"],inputTypes:[1]},zE=(t,e)=>{let r=Qe(t.session.backend.glContext.version),n=e.dims,i=n.length,a=e.dims.length,u=Qi(a),s=q1("rc",a),l=sH(a,s,n[n.length-2],n[n.length-1]),o;i===0?o=[1,1]:i===1?o=[n[0],1]:o=[n[a-1],n[a-2]];let c=iH(a,o,s),f=aH(n,s),d=`
        void main() {
          ${u} rc = getOutputCoords();

          if(${c}) {
            ${r.output} = vec4(0);
          } else {
            ${l}

            ${r.output} = vec4(${f});
          }
        }
      `;return B(N({},Om),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:d})},jA=(t,e)=>B(N({},Om),{get:()=>zE(t,e)})});function GE(t){if(t.length===0)return[1,1,1];let e=1;for(let r=0;r<t.length-2;++r)e*=t[r];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function lH(t,e){let r=!1;return t.length===0||e.length===0?r=!0:t.length<2||e.length<2?r=t[t.length-1]===e[e.length-1]:r=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],r}function cH(t){let e=Re.computeStrides(t),r=["b","r","c"],n="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((i,a)=>{let u=`int ${r[a]} = ${n} / ${i}`,s=a===e.length-1?`int ${r[a+1]} = ${n} - ${r[a]} * ${i}`:`index -= ${r[a]} * ${i}`;return`${u}; ${s};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function fH(t){let e=Re.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var WE,qE,UA,dH=Y(()=>{"use strict";gt(),or(),et(),gu(),WE=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),qE=(t,e,r,n)=>{let i=e.dims,a=n,u="";for(let o=0;o<4;o++){let c="";switch(o){case 0:c="outputCoords = rc;";break;case 1:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:c="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}u+=`
        ${c}
        ${o>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${o>0?"}":""}
      `}let s=Qe(t.session.backend.glContext.version),l=`
      ${cH(i)}
      ${fH(a)}
      ${Oc()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${a[2]};
        int cols = ${a[1]};

        ${u}
        ${s.output} = result;
      }
    `;return B(N({},r),{output:{dims:a,type:e.type,textureType:2},shaderSource:l,hasMain:!0})},UA=(t,e,r)=>{let n=WE(r);return B(N({},n),{get:()=>qE(t,e,n,r)})}}),m1,hH=Y(()=>{"use strict";or(),et(),m1=(t,e)=>{let r=e.shape,n=Qe(t.session.backend.glContext.version),i=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${n.texture2D}(X,TexCoords).r;
      ${n.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:e.tensor.type,textureType:3},shaderSource:i,hasMain:!0};return t.executeProgram(a,[e.tensor])}});function pH(t,e){if(t===1)return"rc";let r="";for(let n=0;n<t;n++)r+=e[n],n<t-1&&(r+=",");return r}var Pm,XE,HA,gH=Y(()=>{"use strict";or(),et(),Ei(),gu(),Pm={name:"unpack",inputNames:["A"],inputTypes:[2]},XE=(t,e)=>{let r=e.dims.length,n=q1("rc",r),i=n.slice(-2),a=Qi(r),u=Oc(),s=e.dims.length===0?"":pH(r,n),l=r<=1?"rc":`vec2(${i.join(",")})`,o=Qe(t.session.backend.glContext.version),c=`
    ${u}
    void main() {
      ${a} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${s});

       ${o.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return B(N({},Pm),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:c})},HA=(t,e)=>B(N({},Pm),{get:()=>XE(t,e)})}),zA,y1,GA,xh=Y(()=>{"use strict";Io(),zA=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let r,n;return t.constructor!==Float32Array&&(cr.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(t)),e*this.channelSize>t.length?(cr.warning("Encoder","Source data too small. Allocating larger array"),n=t,r=this.allocate(e*this.channelSize),n.forEach((i,a)=>r[a]=i)):(n=t,r=n),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},y1=class{constructor(t,e=1,r){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=r||t.FLOAT}encode(t,e){let r=t;return this.channelSize===1&&(cr.verbose("Encoder","Exploding into a larger array"),r=this.allocate(e),t.forEach((n,i)=>r[i*4]=n)),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},GA=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),Ec,WA,v1,mH=Y(()=>{"use strict";gt(),et(),Ec=(t,e,r)=>{let n=r===0||r===1?1:4,i=r===2,a=r===1||r===2,u=r===4?e.length-1:void 0,s=r===4?e.map((l,o)=>o===e.length-1?l*4:l):void 0;return v1(t,e,n,s,{isPacked:i,reverseWH:a,breakAxis:u})},WA=(t,e,r)=>{let n=Ec(t,e,r);return[n.width,n.height]},v1=(t,e,r=1,n,i)=>{let a=!!(i&&i.isPacked),[u,s]=t.computeTextureWH(a&&n||e,i),l=e.length,o=e.slice(0);if(l===0&&(o=[1]),r===1)n=e;else if(a){if(r!==4)throw new Error("a packed texture must be 4-channel");n=e,l>0&&(o[l-1]=Math.ceil(o[l-1]/2)),l>1&&(o[l-2]=Math.ceil(o[l-2]/2))}else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:s,channels:r,isPacked:a,shape:o,strides:Re.computeStrides(o),unpackedShape:n,reversedWH:i&&i.reverseWH}}}),YE,qA,yH=Y(()=>{"use strict";Io(),pu(),gt(),uH(),dH(),hH(),gH(),xh(),mH(),et(),YE=(t,e)=>{let r=e.map(i=>`${i.unpackedShape.join(",")};${i.width}x${i.height}`).join("_"),n=t.name;return t.cacheHint&&(n+="["+t.cacheHint+"]"),n+=":"+r,n},qA=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return WA(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let l=0;l<t.inputNames.length;++l)r[l]=this.getOrCreateTextureData(e[l],t.inputTypes[l]);let n=YE(t,r),i=this.session.programManager.getArtifact(n),a=i?i.programInfo:typeof t.get=="function"?t.get():t,u=Ec(this.session.layoutStrategy,a.output.dims,a.output.textureType),s=this.createTextureData(u,a.output.type);return i||(i=this.session.programManager.build(a,r,s),this.session.programManager.setArtifact(n,i)),this.runProgram(i,r,s),s}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,r){for(let n=0;n<e.length;++n)if(!!e[n].isPacked!=(t.programInfo.inputTypes[n]===2))throw new Error(`input[${n}] property packed inconsistent`);if(!!r.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,r)}getOrCreateTextureData(t,e){let r=this.getTextureData(t.dataId,e===2);if(!r&&(r=this.getTextureData(t.dataId,e!==2),r))return e===2?this.pack(r):this.unpack(r);if(!r){let n=Ec(this.session.layoutStrategy,t.dims,e);if(e===4){let i=t.dims;if(i.length===4){let a=[i[0],Math.ceil(i[1]*i[2]*i[3]/4)],u=Ec(this.session.layoutStrategy,a,e),s=t.numberData;if(i[1]*i[2]*i[3]%4!==0){let l=i[0],o=i[1]*i[2]*i[3],c=Math.ceil(o*1/4)*4,f=l*c;s=new Float32Array(f);for(let d=0;d<l;++d){let h=d*o,p=d*c+d%1*o;s.set(t.numberData.subarray(h,h+o),p)}}return this.createTextureData(u,t.type,s,t,1)}}if(e===2){let i=v1(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),a=this.createTextureData(i,t.type,t.numberData,t,1);r=this.pack(a)}else r=this.createTextureData(n,t.type,t.numberData,t,1)}return r}createTextureDataFromLayoutBindTensor(t,e,r,n){return this.createTextureData(t,e,r,n,1)}createTextureData(t,e,r,n,i){cr.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let a=this.session.textureManager.createTextureFromLayout(e,t,r,i);return this.createTextureDataFromTexture(t,e,a,n)}reshapeUnpacked(t,e){let r=this.getOrCreateTextureData(t,0),n={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Re.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}reshapePacked(t,e){let r=this.getOrCreateTextureData(t,2);if(lH(t.dims,e)){let s={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Re.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(s,t.type,r.texture).tensor}let n=GE(t.dims),i=GE(e),a=this.reshapePacked(t,n),u=this.run(UA(this,a,i),[a]);return this.reshapePacked(u,e)}cast(t,e){let r=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(r,e,r.texture).tensor}createTextureDataFromTexture(t,e,r,n,i){let a=B(N({},t),{tensor:n||new Rn(t.unpackedShape,e,u=>this.readTexture(a),u=>U(this,null,function*(){return this.readTextureAsync(a)}),void 0,i),texture:r});return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(m1(this,t))}readTextureAsync(t){return U(this,null,function*(){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(m1(this,t))})}pack(t){return this.executeProgram(jA(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(HA(this,t.tensor),[t.tensor])}}}),ZE,zt,qr=Y(()=>{"use strict";ZE=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},zt=t=>new ZE(t)}),Mm,XA,YA,KE,QE,vH=Y(()=>{"use strict";qr(),or(),et(),Mm={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},XA=(t,e,r)=>(QE(e),[t.run(B(N({},Mm),{cacheHint:r.cacheKey,get:()=>KE(t,e,r)}),e)]),YA=t=>{let e=t.attributes.getFloat("epsilon",1e-5),r=t.attributes.getFloat("momentum",.9),n=t.attributes.getInt("spatial",1);return zt({epsilon:e,momentum:r,spatial:n})},KE=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),i=e[0].dims.length,[a,u]=t.calculateTextureWidthAndHeight(e[1].dims,0),s=`
  float process(int[${i}] indices) {
    vec2 position = offsetToCoords(indices[1], ${a}, ${u});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return B(N({},Mm),{output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:s})},QE=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1||i.dims.length!==1||a.dims.length!==1)throw new Error("invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||a.type!=="float32"&&a.type!=="float64")throw new Error("invalid input tensor types.")}}),ZA,mu,ce,b1,KA,Ji=Y(()=>{"use strict";ZA=class{constructor(t,e,r,n){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=r,this.outputTextureLayout=n}},mu=class{constructor(t){this.context=t}},ce=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},b1=class{constructor(t,e,r){this.name=t,r?this.dependencies=r:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},KA=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,r=new Set,n=new Array;return this.createOrderedNodes(t,e,r,n),n}static createOrderedNodes(t,e,r,n){for(let i=0;i<t.length;++i)this.dfsTraverse(t[i],e,r,n)}static dfsTraverse(t,e,r,n){if(!t||r.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let i=t.dependencies;if(i&&i.length>0)for(let a=0;a<i.length;++a)this.dfsTraverse(i[a],e,r,n);n.push(t),r.add(t.name),e.delete(t.name)}}});function bH(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function wH(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function xH(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function _H(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function EH(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function TH(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function IH(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function AH(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function SH(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function DH(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function CH(){return PH("pow")}function OH(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function PH(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var Pn,JE,QA,JA,eS,tS,rS,nS,oS,iS,aS,sS,uS,lS,MH=Y(()=>{"use strict";gt(),Ji(),or(),et(),Pn=(t,e,r,n=e[0].type,i)=>{let a=t.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:i,get:()=>JE(t,e,r,n)}},JE=(t,e,r,n=e[0].type)=>{let i=t.session.pack?2:0,a=!Re.areEqual(e[0].dims,e[1].dims),u=e[0].dims,s=t.session.pack;if(a){let c=zo.calcShape(e[0].dims,e[1].dims,!1);if(!c)throw new Error("Can't perform binary op on the given tensors");u=c;let f=u.length,d=e[0].dims.length!==0?e[0].dims.length:1,h=e[1].dims.length!==0?e[1].dims.length:1,p=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",m=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v=Qe(t.session.backend.glContext.version),x=s?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${v.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${f}]) {
        int aindices[${d}];
        int bindices[${h}];
        ${p}
        ${m}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:u,type:n,textureType:i},shaderSource:x,hasMain:s}}let l=Qe(t.session.backend.glContext.version),o=`
    ${r.body}
    void main() {
      vec4 v1 = ${l.texture2D}(A, TexCoords);
      vec4 v2 = ${l.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${l.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:e[0].dims,type:n,textureType:i},shaderSource:o,hasMain:!0}},QA=(t,e)=>[t.run(Pn(t,e,bH()),e)],JA=(t,e)=>[t.run(Pn(t,e,AH(),"bool"),e)],eS=(t,e)=>[t.run(Pn(t,e,wH()),e)],tS=(t,e)=>[t.run(Pn(t,e,EH(),"bool"),e)],rS=(t,e)=>[t.run(Pn(t,e,TH(),"bool"),e)],nS=(t,e)=>[t.run(Pn(t,e,IH(),"bool"),e)],oS=(t,e)=>[t.run(Pn(t,e,xH()),e)],iS=(t,e)=>[t.run(Pn(t,e,SH(),"bool"),e)],aS=(t,e)=>[t.run(Pn(t,e,CH()),e)],sS=(t,e)=>[t.run(Pn(t,e,OH()),e)],uS=(t,e)=>[t.run(Pn(t,e,_H()),e)],lS=(t,e)=>[t.run(Pn(t,e,DH(),"bool"),e)]}),cS,fS,eT,NH=Y(()=>{"use strict";gt(),cS=(t,e,r)=>(eT(e),[t.cast(e[0],r)]),fS=t=>Nn.tensorDataTypeFromProto(t.attributes.getInt("to")),eT=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),tT,rT,dS,sc,RH=Y(()=>{"use strict";or(),et(),Ei(),gu(),tT=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(2),cacheHint:e}),rT=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let a=i.slice(0);for(let C=1;C<r.length;C++){let j=r[C].dims.slice();for(let z=0;z<i.length;z++)if(z===n)a[n]+=j[z];else if(i[z]!==j[z])throw new Error("non concat dimensions must match")}let u=a.length,s=q1("coords",u),l=Qi(u),o=Oc(),c=r.map(C=>C.dims),f=du(u),d=new Array(c.length-1);d[0]=c[0][n];for(let C=1;C<d.length;C++)d[C]=d[C-1]+c[C][n];let h=f[n],p=f.slice(-2),m=f.join(),v=`if (${h} < ${d[0]}) {
        return getChannel(
            getX0(${m}), vec2(${p.join()}));
        }`;for(let C=1;C<d.length;C++){let j=d[C-1];v+=`
            if (${h} < ${d[C]}  && ${h} >= ${d[C-1]}) {
              return getChannel(
                getX${C}(${sc(f,h,j)}),
                vec2(${sc(p,h,j)}));
            }`}let x=d.length,y=d[d.length-1];v+=`
            return getChannel(
              getX${x}(${sc(f,h,y)}),
              vec2(${sc(p,h,y)}));`;let _=Qe(t.session.backend.glContext.version),I=`
          ${o}
          float getValue(${f.map(C=>"int "+C)}) {
            ${v}
          }

          void main() {
            ${l} coords = getOutputCoords();
            int lastDim = coords.${f[u-1]};
            coords.${f[u-1]} = coords.${f[u-2]};
            coords.${f[u-2]} = lastDim;

            vec4 result = vec4(getValue(${s}), 0., 0., 0.);

            ${s[u-1]} = ${s[u-1]} + 1;
            if (${s[u-1]} < ${a[u-1]}) {
              result.g = getValue(${s});
            }

            ${s[u-2]} = ${s[u-2]} + 1;
            if (${s[u-2]} < ${a[u-2]}) {
              result.a = getValue(${s});
            }

            ${s[u-1]} = ${s[u-1]} - 1;
            if (${s[u-2]} < ${a[u-2]} &&
                ${s[u-1]} < ${a[u-1]}) {
              result.b = getValue(${s});
            }
            ${_.output} = result;
          }
        `;return B(N({},e),{output:{dims:a,type:r[0].type,textureType:2},shaderSource:I,hasMain:!0})},dS=(t,e,r)=>{let n=tT(e.length,r.cacheKey);return B(N({},n),{get:()=>rT(t,n,e,r.axis)})},sc=(t,e,r)=>{let n=t.indexOf(e);return t.map((i,a)=>a===n?`${i} - ${r}`:i).join()}}),hS,nT,oT,iT,Nm,aT,sT,uT,pS,lT,FH=Y(()=>{"use strict";qr(),et(),RH(),hS=(t,e,r)=>(lT(e),t.session.pack&&e[0].dims.length>1?[t.run(dS(t,e,r),e)]:[t.run(iT(t,e,r),e)]),nT=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(0),cacheHint:e}),oT=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let a=i.slice(0);for(let h=1;h<r.length;h++){let p=r[h].dims.slice();for(let m=0;m<i.length;m++)if(m===n)a[n]+=p[m];else if(i[m]!==p[m])throw new Error("non concat dimensions must match")}let u=a.length,s=new Array(r.length),l=0;for(let h=0;h<s.length;++h)l+=r[h].dims[n],s[h]=l;let o="";r.length<5?o=Nm(s):o=aT(s);let c=sT(r.length,u),f=uT(s),d=`
        ${c}
        ${f}
        ${o}
        float process(int indices[${u}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return B(N({},e),{output:{dims:a,type:r[0].type,textureType:0},shaderSource:d})},iT=(t,e,r)=>{let n=nT(e.length,r.cacheKey);return B(N({},n),{get:()=>oT(t,n,e,r.axis)})},Nm=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,r)=>`if(index<${e}) {return ${r};}
`).join("")}
    }`,aT=t=>Nm(t),sT=(t,e)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let n=0;n<t;++n)n===0?r.push(`	if (textureIndex == ${n}) { return _X${n}(indices); }`):n===t-1?r.push(`	else { return _X${n}(indices); }`):r.push(`	else if (textureIndex == ${n}) { return _X${n}(indices); }`);return r.push("	}"),r.join(`
`)},uT=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<t.length;++r)r===0?e.push(`	if (index == ${r}) { return ${t[r]}; }`):r===t.length-1?e.push(`	else { return ${t[r]}; }`):e.push(`	else if (index == ${r}) { return ${t[r]}; }`);return e.push("	}"),e.join(`
`)},pS=t=>zt({axis:t.attributes.getInt("axis")}),lT=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,r=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let n of t){if(n.type!==e)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape")}}});function kH(){return Zn("abs")}function LH(){return Zn("acos")}function BH(){return Zn("asin")}function $H(){return Zn("atan")}function VH(){return Zn("ceil")}function jH(){return Zn("cos")}function UH(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function HH(){return Zn("exp")}function zH(){return Zn("floor")}function gS(t,e){let r="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:0}}function GH(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function WH(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function qH(){return Zn("log")}function XH(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function YH(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function ZH(){return Zn("sin")}function mS(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function yS(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function KH(){return Zn("sqrt")}function QH(){return Zn("tan")}function JH(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function Zn(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var cT,lr,vS,bS,wS,xS,w1,_S,ES,fT,TS,IS,AS,SS,DS,CS,x1,OS,PS,MS,NS,RS,FS,kS,LS,BS,$S,VS,jS=Y(()=>{"use strict";qr(),gt(),Ji(),or(),et(),cT=(t,e,r,n)=>{let i=t.session.pack?2:0,a=Qe(t.session.backend.glContext.version);return B(N({},e),{output:{dims:r.dims,type:r.type,textureType:i},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${a.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${a.output} = v;
     }
     `,hasMain:!0})},lr=(t,e,r,n)=>{let i=t.session.pack?2:0,a={name:r.name,inputTypes:[i],inputNames:["A"],cacheHint:n};return B(N({},a),{get:()=>cT(t,a,e,r)})},vS=(t,e)=>[t.run(lr(t,e[0],kH()),e)],bS=(t,e)=>[t.run(lr(t,e[0],LH()),e)],wS=(t,e)=>[t.run(lr(t,e[0],BH()),e)],xS=(t,e)=>[t.run(lr(t,e[0],$H()),e)],w1=(t,e,r)=>[t.run(lr(t,e[0],gS(r.min,r.max),r.cacheKey),e)],_S=t=>zt({min:t.attributes.getFloat("min",Ac),max:t.attributes.getFloat("max",Sc)}),ES=(t,e)=>{let r=fT(t,e);return w1(t,[e[0]],r)},fT=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let r=e.length>=3?e[1].numberData[0]:Ac,n=e.length>=3?e[2].numberData[0]:Sc;return zt({min:r,max:n})},TS=(t,e)=>[t.run(lr(t,e[0],VH()),e)],IS=(t,e)=>[t.run(lr(t,e[0],jH()),e)],AS=(t,e,r)=>[t.run(lr(t,e[0],UH(r.alpha),r.cacheKey),e)],SS=t=>zt({alpha:t.attributes.getFloat("alpha",1)}),DS=(t,e)=>[t.run(lr(t,e[0],HH()),e)],CS=(t,e)=>[t.run(lr(t,e[0],zH()),e)],x1=(t,e)=>[t.run(lr(t,e[0],GH()),e)],OS=(t,e,r)=>[t.run(lr(t,e[0],WH(r.alpha),r.cacheKey),e)],PS=t=>zt({alpha:t.attributes.getFloat("alpha",.01)}),MS=(t,e)=>[t.run(lr(t,e[0],qH()),e)],NS=(t,e)=>[t.run(lr(t,e[0],XH()),e)],RS=(t,e)=>[t.run(lr(t,e[0],YH()),e)],FS=(t,e)=>[t.run(lr(t,e[0],mS()),e)],kS=(t,e)=>[t.run(lr(t,e[0],yS()),e)],LS=(t,e)=>[t.run(lr(t,e[0],ZH()),e)],BS=(t,e)=>[t.run(lr(t,e[0],KH()),e)],$S=(t,e)=>[t.run(lr(t,e[0],QH()),e)],VS=(t,e)=>[t.run(lr(t,e[0],JH()),e)]});function Pc(t){let e;switch(t.activation){case"Relu":e=mS();break;case"Sigmoid":e=yS();break;case"Clip":e=gS(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=e.name,n=e.body,i=`value = ${r}_(value);`;return{activationFunction:n,applyActivation:i}}var Sh,yu=Y(()=>{"use strict";gt(),jS(),Sh=t=>{let e=t.getString("activation","");if(e==="Clip"){let[r,n]=t.getFloats("activation_params",[Ac,Sc]);return{activation:e,clipMax:n,clipMin:r,activationCacheKey:`${e}:${r},${n}`}}return{activation:e,activationCacheKey:e}}}),dT,hT,US,ez=Y(()=>{"use strict";Io(),or(),et(),Z1(),yu(),dT=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),hT=(t,e,r,n)=>{let i=e.length>2?"value += getBias(output_channel);":"",a=e[0].dims.slice(),u=e[1].dims.slice(),s=u[0]/n.group;cr.verbose("GroupedConv",`autpPad:${n.autoPad}, dilations:${n.dilations}, group:${n.group}, kernelShape:${n.kernelShape}, pads:${n.pads}, strides:${n.strides}`);let l=Tc(a,u,n.dilations,n.pads,n.strides),o=Qe(t.session.backend.glContext.version),{activationFunction:c,applyActivation:f}=Pc(n),d=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${c}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${s};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${u[1]}; wInChannel++) {
      int input_channel = group_id * ${u[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${u[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${n.dilations[0]};

        if (xHeight < 0 || xHeight >= ${a[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${u[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${n.dilations[1]};
          if (xWidth < 0 || xWidth >= ${a[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${i}
    ${f}
    ${o.output} = vec4(value, .0, .0, .0);
  }
`;return B(N({},r),{output:{dims:l,type:e[0].type,textureType:0},shaderSource:d,hasMain:!0})},US=(t,e,r)=>{let n=dT(e.length>2,r.cacheKey);return B(N({},n),{get:()=>hT(t,e,n,r)})}}),pT,gT,HS,tz=Y(()=>{"use strict";or(),et(),gu(),pT=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),gT=(t,e,r,n,i,a)=>{let u=r.dims,s=n.dims,l=2,o=3,c=i.length,f=[s[1]*s[2]*s[3],i[2]*i[3]],d=s[2]*s[3],h=Oc(),p=Qe(t.session.backend.glContext.version),m="";for(let x=0;x<=1;x++)for(let y=0;y<=1;y++)m+=`
            blockIndex = rc.x + ${y};
            pos = rc.y + ${x};

            if(blockIndex < ${f[1]} && pos < ${f[0]}) {
              offsetY = int(blockIndex / (${i[c-1]})) * ${a.strides[0]} -
                ${a.pads[0]};
              d0 = offsetY + ${a.dilations[0]} * (imod(pos, ${d}) / ${s[2]});

              if(d0 < ${u[l]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${i[c-1]}) * ${a.strides[1]} -
                  ${a.pads[1]};
                d1 = offsetX + ${a.dilations[1]} * imod(imod(pos, ${d}), ${s[2]});

                if(d1 < ${u[o]} && d1 >= 0) {

                  ch = int(float(pos)/ ${d}.);
                    innerDims = vec2(d0, d1);
                    result[${x*2+y}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v=`
      ${h}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${m}
          ${p.output} = result;
      }
            `;return B(N({},e),{output:{dims:f,type:r.type,textureType:2},shaderSource:v,hasMain:!0})},HS=(t,e,r,n,i)=>{let a=pT(i.cacheKey);return B(N({},a),{get:()=>gT(t,a,e,r,n,i)})}});function rz(t,e,r){let n=e[0].dims,i=e[1].dims,a=zo.calcShape(n,i,!0);if(!a)throw new Error("Can't use matmul on the given tensors");let u=Qi(a.length),s=du(),{activationFunction:l,applyActivation:o}=Pc(r),c=e.length>2,f=c?"value += getBiasForMatmul();":"",d=c?`${GS(u,s,e[2].dims,a,!1)}`:"",h=a.length,p=n.length,m=i.length,v=n[n.length-1],x=`
    ${l}
    ${d}
    float process(int indices[${h}]) {
        int a[${p}];
        int b[${m}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v}; ++k) {
            a[${p-1}] = k;
            b[${m-2}] = k;
            value += _A(a) * _B(b);
        }
        ${f}
        ${o}
        return value;
    }`;return B(N({},t),{output:{dims:a,type:e[0].type,textureType:0},shaderSource:x})}function zS(t,e){let r=XS(t.length>2,e.activationCacheKey);return B(N({},r),{get:()=>rz(r,t,e)})}function GS(t,e,r,n,i){let a="",u=r.length,s=n.length,l=s-u;s<2&&u>0?a="coords":a=r.map((d,h)=>`coords.${e[h+l]}`).join(", ");let o=zo.getBroadcastDims(r,n).map(d=>`coords.${e[d+l]} = 0;`).join(`
`),c=Re.size(r)===1,f="vec4(outputValue.xx, outputValue.yy)";return c&&(f="vec4(outputValue.x)"),i?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${o}
  vec4 outputValue = getBias(${a});
  return ${f};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${o}
  return getBias(coords.x);
}`}var WS,qS,XS,mT,X1=Y(()=>{"use strict";gt(),et(),Ei(),yu(),YS(),WS=(t,e,r)=>(mT(e),t.session.pack?[t.run(Y1(t,e,r),e)]:[t.run(zS(e,r),e)]),qS=t=>Sh(t.attributes),XS=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),mT=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function nz(t,e,r,n){let i=[],a=[],u=r[0].dims,s=r[1].dims,l=u.length,o=s.length,c=n.length,f=c-l,d=c-o;i=u.map((y,_)=>`coords.${e[_+f]}`),i[l-1]="i*2",i.join(", "),a=s.map((y,_)=>`coords.${e[_+d]}`),a[o-2]="i*2",a.join(", ");let h=zo.getBroadcastDims(u,n),p=zo.getBroadcastDims(s,n),m=h.map(y=>`coords.${e[y+f]} = 0;`).join(`
`),v=p.map(y=>`coords.${e[y+d]} = 0;`).join(`
`),x=`int lastDim = coords.${e[c-1]};
  coords.${e[c-1]} = coords.${e[c-2]};
  coords.${e[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${m}
  vec4 outputValue = getA(${i});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${v}
  vec4 outputValue = getB(${a});
  return outputValue;
}`}function oz(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`rc.${t[e-2]}, i*2`,r}function iz(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`i*2, rc.${t[e-1]}`,r}var yT,vT,Y1,YS=Y(()=>{"use strict";gt(),or(),et(),Ei(),yu(),X1(),yT=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),vT=(t,e,r,n)=>{let i=r.length>2,a=i?"value += getBiasForMatmul();":"",u=r[0].dims,s=r[1].dims,l=zo.calcShape(u,s,!0),o=!Re.areEqual(r[0].dims,r[1].dims);if(!l)throw new Error("Can't use matmul on the given tensors");let c=u[u.length-1],f=Math.ceil(c/2),d=u.length,h=s.length,p=Qe(t.session.backend.glContext.version),m=Qi(l.length),v=l.length,x=du(),{activationFunction:y,applyActivation:_}=Pc(n),I=i?`${GS(m,x,r[2].dims,l,!0)}`:"",C=o?`${nz(m,x,r,l)}`:"",j=o?"getAAtOutCoordsMatmul(i)":`getA(${oz(x,d)})`,z=o?"getBAtOutCoordsMatmul(i)":`getB(${iz(x,h)})`,W=o?"":`${m} rc =
          getOutputCoords(); int lastDim = rc.${x[v-1]}; rc.${x[v-1]} =
          rc.${x[v-2]}; rc.${x[v-2]} = lastDim;
      `,k=`
            ${C}
            ${I}
            ${y}
            void main() {
              ${W}

              vec4 value = vec4(0);
              for (int i = 0; i < ${f}; i++) {
                vec4 a = ${j};
                vec4 b = ${z};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${a}
              ${_}
              ${p.output} = value;
            }`;return B(N({},e),{output:{dims:l,type:r[0].type,textureType:2},shaderSource:k,hasMain:!0})},Y1=(t,e,r)=>{let n=yT(e.length>2,r.activationCacheKey);return B(N({},n),{get:()=>vT(t,n,e,r)})}}),ZS,az=Y(()=>{"use strict";Z1(),tz(),YS(),ZS=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Tc(n,i,r.dilations,r.pads,r.strides),u=t.run(HS(t,e[0],e[1],a,r),[e[0]]),s=t.reshapePacked(e[1],[i[0],i[1]*i[2]*i[3]]),l=e.length===3?[s,u,e[2]]:[s,u],o=t.run(Y1(t,l,r),l);return t.reshapePacked(o,a)}}),bT,wT,KS,_1,QS=Y(()=>{"use strict";et(),bT=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),wT=(t,e,r,n,i,a)=>{let u=r.dims,s=n.dims,l=i.length,o=_1(u,s,i,4),c=`
        const int XC = ${u[1]};
        const int XH = ${u[2]};
        const int XW = ${u[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${l}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${u.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return B(N({},e),{output:{dims:o,type:r.type,textureType:4},shaderSource:c})},KS=(t,e,r,n,i)=>{let a=bT(i.cacheKey);return B(N({},a),{get:()=>wT(t,a,e,r,n,i)})},_1=(t,e,r,n=4)=>[r[0],r[2],r[3],Math.ceil(t[1]*e[2]*e[3]/n)]}),xT,_T,JS,sz=Y(()=>{"use strict";gt(),or(),et(),yu(),QS(),xT=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),_T=(t,e,r,n,i)=>{let a=r[0].dims,u=r[1].dims,s=[u[0],Math.ceil(a[1]*u[2]*u[3]/4)],l=_1(a,u,n),[o,c]=t.calculateTextureWidthAndHeight(s,4),f=Re.computeStrides(l),[d,h]=t.calculateTextureWidthAndHeight(l,4),p=n.length,m=r.length<3?"0.0":"_B(b)",v=Math.ceil(a[1]*u[2]*u[3]/4),{activationFunction:x,applyActivation:y}=Pc(i),_=Qe(t.session.backend.glContext.version),I=`
${x}
float process(int indices[${p}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${f[0]} + im2col[1] * ${f[1]} + im2col[2] * ${f[2]};
  int kernelOffset = indices[1] * ${s[1]};
  float value = ${m};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${d}, ${h});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${o}, ${c});
    value += dot(${_.texture2D}(Im2Col, im2colCoords), ${_.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y}
  return value;
}`;return B(N({},e),{output:{dims:n,type:r[0].type,textureType:0},shaderSource:I})},JS=(t,e,r,n)=>{let i=xT(e.length>2,n);return B(N({},i),{get:()=>_T(t,i,e,r,n)})}}),Tc,E1,ET,TT,IT,AT,T1,ST,Z1=Y(()=>{"use strict";qr(),gt(),ez(),az(),sz(),yu(),QS(),X1(),Tc=(t,e,r,n,i)=>{let a=t[0],u=t.slice(2),s=u.length,l=e[0],o=e.slice(2).map((f,d)=>f+(f-1)*(r[d]-1)),c=u.map((f,d)=>f+n[d]+n[d+s]).map((f,d)=>Math.floor((f-o[d]+i[d])/i[d]));return[a,l].concat(...c)},E1=(t,e,r)=>(ST(e,r),ET(t,e,r)),ET=(t,e,r)=>{let n=AT(r,e),i=t.session.pack,a=n.kernelShape[0]===1&&n.kernelShape[1]===1;return n.group>1?[t.run(US(t,e,n),e)]:a&&i?[TT(t,e,n)]:i&&e[0].dims.length===4&&e[0].dims[0]===1&&!a?[ZS(t,e,n)]:[IT(t,e,n)]},TT=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Tc(n,i,r.dilations,r.pads,r.strides),u=t.reshapeUnpacked(e[0],[n[1],n[2]*n[3]]),s=t.reshapeUnpacked(e[1],[i[0],i[1]]),l=e.length>2?[s,u,e[2]]:[s,u],o=t.run(zS(l,r),l);return t.reshapeUnpacked(o,a)},IT=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Tc(n,i,r.dilations,r.pads,r.strides),u=t.run(KS(t,e[0],e[1],a,r),[e[0]]),s=e.length===3?[u,e[1],e[2]]:[u,e[1]];return t.run(JS(t,e,a,r),s)},AT=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let a=2;a<e[1].dims.length;++a)r.push(e[1].dims[a]);let n=t.pads.slice();wh.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,r,n,t.autoPad);let i=Object.assign({},t);return Object.assign(i,{kernelShape:r,pads:n,cacheKey:t.cacheKey}),i},T1=t=>{let e=t.attributes,r=Sh(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return zt(N({autoPad:n,dilations:i,group:a,kernelShape:u,pads:s,strides:l},r))},ST=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[1]*e.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let i=t[0].dims.length-2;if(e.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(e.strides.length!==i)throw new Error(`strides should be ${i}D`);if(e.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),DT,CT,OT,eD,PT,MT,NT,RT,FT,kT,tD,LT,uz=Y(()=>{"use strict";qr(),or(),et(),yu(),DT=(t,e,r,n,i,a)=>(t-1)*e+r+(n-1)*i+1-a,CT=(t,e,r,n,i)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(r[n]=a,r[i]=t-a):e==="SAME_LOWER"&&(r[n]=t-a,r[i]=a)},OT=(t,e,r,n,i,a,u,s)=>{let l=t.length-2,o=s.length===0;for(let c=0;c<l;++c){let f=o?t[c+2]*a[c]:s[c],d=DT(t[c+2],a[c],i[c],e[c],r[c],f);CT(d,n,i,c,c+l),o&&s.push(a[c]*(t[c+2]-1)+u[c]+(e[c]-1)*r[c]+1-i[c]-i[c+l])}},eD=(t,e,r)=>(LT(e,r),PT(t,e,r)),PT=(t,e,r)=>{let n=kT(r,e);return[FT(t,e,n)]},MT=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),NT=(t,e,r,n)=>{let i=e.length>2?"getB(output_channel)":"0.0",a=e[0].dims,u=e[1].dims,s=u[1],l=u[0]/n.group,o=[e[0].dims[0],e[1].dims[1]*n.group,...n.outputShape],c=Qe(t.session.backend.glContext.version),{activationFunction:f,applyActivation:d}=Pc(n),h=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${s};
    int wOutChannel = output_channel - group_id * ${s};

    float value = ${i};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${u[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${u[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${a[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${a[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${d}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return B(N({},r),{output:{dims:o,type:e[0].type,textureType:0},shaderSource:h,hasMain:!0})},RT=(t,e,r)=>{let n=MT(e.length>2,r.cacheKey);return B(N({},n),{get:()=>NT(t,e,n,r)})},FT=(t,e,r)=>t.run(RT(t,e,r),e),kT=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let s=2;s<e[1].dims.length;++s)r.push(e[1].dims[s]);let n=t.pads.slice(),i=t.outputShape.slice(),a=e[0].dims;OT(a,r,t.dilations,t.autoPad,n,t.strides,t.outputPadding,i);let u=Object.assign({},t);return Object.assign(u,{kernelShape:r,pads:n,outputShape:i,cacheKey:t.cacheKey}),u},tD=t=>{let e=t.attributes,r=Sh(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),o=e.getInts("pads",[0,0,0,0]),c=e.getInts("strides",[1,1]);return zt(N({autoPad:n,dilations:i,group:a,kernelShape:u,outputPadding:s,outputShape:l,pads:o,strides:c},r))},LT=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==i))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),Rm,Dc,rD,BT,Fm,$T,VT,jT,K1=Y(()=>{"use strict";qr(),gt(),et(),Rm={name:"Transpose",inputNames:["A"],inputTypes:[0]},Dc=(t,e,r)=>(jT(e),[t.run(B(N({},Rm),{cacheHint:r.cacheKey,get:()=>BT(t,e[0],r.perm)}),e)]),rD=t=>zt({perm:t.attributes.getInts("perm",[])}),BT=(t,e,r)=>{let n=e.dims;r=Fm(n,r);let i=$T(n,r),a=n.length,u=`
      ${VT("perm",r,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return B(N({},Rm),{output:{dims:i,type:e.type,textureType:0},shaderSource:u})},Fm=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),$T=(t,e)=>(e=Fm(t,e),Re.sortBasedOnPerm(t,e)),VT=(t,e,r)=>{let n=[];n.push(`void ${t}(out int a[${r}], int src[${r}]) {`);for(let i=0;i<r;++i)n.push(`	a[${e[i]}]=src[${i}];`);return n.push("	}"),n.join(`
`)},jT=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),nD,oD,UT,lz=Y(()=>{"use strict";K1(),nD=(t,e,r)=>{UT(e);let n=r.blocksize,i=n*n,a=r.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],u=r.mode==="DCR"?[e[0].dims[0],n,n,e[0].dims[1]/i,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/i,n,n,e[0].dims[2],e[0].dims[3]],s=t.reshapeUnpacked(e[0],u),l={perm:a,cacheKey:`${a}`},[o]=Dc(t,[s],l),c=[e[0].dims[0],e[0].dims[1]/i,e[0].dims[2]*n,e[0].dims[3]*n];return[t.reshapeUnpacked(o,c)]},oD=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let r=t.attributes.getString("mode","DCR");if(r!=="DCR"&&r!=="CRD")throw new Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:e}},UT=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),iD,aD,HT,cz=Y(()=>{"use strict";gt(),iD=(t,e,r)=>{HT(e,r);let n=Re.flattenShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},aD=t=>t.attributes.getInt("axis",1),HT=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let r=t[0].dims.length;if(r===0)throw new Error("scalar tensor is not supported.");if(e<-r||e>r)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),Mc,Dh=Y(()=>{"use strict";Mc=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),sD,uD,zT,GT,WT,qT,fz=Y(()=>{"use strict";qr(),Dh(),gt(),et(),sD=(t,e,r)=>(qT(e,r.axis),[t.run(WT(t,e,r),e)]),uD=t=>zt({axis:t.attributes.getInt("axis",0)}),zT={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},GT=(t,e,r,n)=>{let i=r[0].dims.slice(),a=r[1].dims.slice(),u=new Array(i.length+a.length-1);n=Re.normalizeAxis(n,i.length);let s=[];for(let d=0;d<u.length;d++)d<n?(u[d]=i[d],s.push(`inputIdx[${d}] = outputIdx[${d}];`)):d<n+a.length?(u[d]=a[d-n],s.push(`indexDataIdx[${d-n}] = outputIdx[${d}];`)):(u[d]=i[d-a.length+1],s.push(`inputIdx[${d-a.length+1}] = outputIdx[${d}];`));let l=u.length||1,o=i.length,c=a.length||1,f=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${o}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${s.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${i[n]} : idx;
        return _A(inputIdx);
      }`;return B(N({},e),{output:{dims:u,type:r[0].type,textureType:0},shaderSource:f})},WT=(t,e,r)=>{let n=B(N({},zT),{cacheHint:r.cacheKey});return B(N({},n),{get:()=>GT(t,n,e,r.axis)})},qT=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let r=t[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(e<-r||e>r-1)throw new Error("Invalid axis.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),I1,km,lD,cD,XT,YT,ZT,dz=Y(()=>{"use strict";qr(),gt(),et(),I1=(t,e,r)=>(ZT(e,r),[t.run(XT(e,r),e)]),km=(t,e)=>{let r=t.attributes.getInt("transA",0)!==0,n=t.attributes.getInt("transB",0)!==0,i=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return zt({transA:r,transB:n,alpha:i,beta:a,isOptionalC:e})},lD=t=>km(t,!1),cD=t=>km(t,!0),XT=(t,e)=>{let r={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return B(N({},r),{get:()=>YT(r,t,e)})},YT=(t,e,r)=>{let n=e[0].dims.slice(),i=e[1].dims.slice(),[a,u]=kA.getShapeOfGemmResult(n,r.transA,i,r.transB,e.length===3?e[2].dims:void 0),s=[a,u];if(!s)throw new Error("Can't use gemm on the given tensors");let l=n[n.length-1],o="";r.transA&&(l=n[0]),r.transA&&r.transB?o="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?o="value += _A_T(a) * _B(b);":!r.transA&&r.transB?o="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(o="value += _A(a) * _B(b);");let c=s.length,f=e.length===3?`int c[${e[2].dims.length}];`:"",d=e.length===3?"bcastIndices_C(indices, c);":"",h=e.length===3?"value += beta * _C(c);":"",p=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${f}

          copyVec(indices, a);
          copyVec(indices, b);
          ${d}

          float value = 0.0;
          for (int k=0; k<${l}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${o}
          }

          value = value * alpha;
          ${h}
          return value;
      }`;return B(N({},t),{output:{dims:s,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p})},ZT=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),fD,dD,KT,QT,JT,eI,tI,hz=Y(()=>{"use strict";qr(),et(),fD=(t,e,r)=>(tI(e),[t.run(JT(t,e,r),e)]),dD=t=>{let e=t.attributes.getFloat("scale"),r=t.attributes.getFloats("bias");return zt({scale:e,bias:r})},KT={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},QT=(t,e,r,n)=>{let i=r[0].dims.slice(),a=i.length,u=`
      ${eI(n.bias.length)}
      float process(int indices[${a}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return B(N({},e),{output:{dims:i,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:u})},JT=(t,e,r)=>{let n=B(N({},KT),{cacheHint:r.cacheKey});return B(N({},n),{get:()=>QT(t,n,e,r)})},eI=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let r=0;r<t;++r)r===0?e.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===t-1?e.push(`	else { return bias[${r}]; }`):e.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return e.push("	}"),e.join(`
`)},tI=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),hD,pD,Lm,rI,nI,oI,iI,aI,sI,pz=Y(()=>{"use strict";or(),et(),hD=(t,e,r)=>{sI(e);let n=t.run(nI(e[0]),e);return[t.run(aI(t,e[0],r,n.dims),[e[0],n,e[1],e[2]])]},pD=t=>t.attributes.getFloat("epsilon",1e-5),Lm={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},rI=(t,e)=>{let r=e.dims.slice(),n=r[1],i=r[2]*r[3],a=[r[0],n],u=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${i});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${i});

        return v;
      }`;return B(N({},t),{output:{dims:a,type:e.type,textureType:4},shaderSource:u})},nI=t=>B(N({},Lm),{get:()=>rI(Lm,t)}),oI={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},iI=(t,e,r,n,i)=>{let a=Qe(t.session.backend.glContext.version),[u,s]=t.calculateTextureWidthAndHeight(i,4),[l,o]=[u/4,s],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${l}, ${o});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return B(N({},e),{output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:c})},aI=(t,e,r,n)=>{let i=B(N({},oI),{cacheHint:`${r}`});return B(N({},i),{get:()=>iI(t,i,e,r,n)})},sI=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],r=t[1],n=t[2];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1)throw new Error("Invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function gz(t,e){let r=t[0].dims[1],n=t[0].dims.length,i=-Math.floor((e.size-1)/2),a=Math.ceil((e.size-1)/2),u=`float(${e.alpha}) / float(${e.size})`,s=`float(${e.bias})`,l=`float(${e.beta})`,o=`
    float process(int indices[${n}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${i}; i <= ${a}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${r}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${s} + ${u} * square_sum, ${l});
    }`;return B(N({},Q1),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:o})}function mz(t,e){return B(N({},Q1),{cacheHint:e.cacheKey,get:()=>gz(t,e)})}var gD,mD,Q1,uI,yz=Y(()=>{"use strict";qr(),et(),gD=(t,e,r)=>(uI(e),[t.run(mz(e,r),e)]),mD=t=>{let e=t.attributes.getFloat("alpha",1e-4),r=t.attributes.getFloat("beta",.75),n=t.attributes.getFloat("bias",1),i=t.attributes.getInt("size");return zt({alpha:e,beta:r,bias:n,size:i})},Q1={name:"LRN",inputNames:["X"],inputTypes:[0]},uI=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),lI,A1,yD,vD,bD,cI,fI,dI,hI,pI,gI,mI,yI,vz=Y(()=>{"use strict";qr(),gt(),or(),et(),lI={name:"Pad",inputNames:["A"],inputTypes:[0]},A1=(t,e,r)=>(dI(e),[t.run(B(N({},lI),{cacheHint:r.cacheKey,get:()=>fI(t,e[0],r)}),e)]),yD=t=>{let e=t.attributes.getString("mode","constant"),r=t.attributes.getFloat("value",0),n=t.attributes.getInts("pads");return zt({mode:e,value:r,pads:n})},vD=(t,e,r)=>{hI(e);let n=cI(t,e,r);return A1(t,[e[0]],n)},bD=t=>t.attributes.getString("mode","constant"),cI=(t,e,r)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let n=Array.from(e[1].integerData),i=e.length>=3?e[2].floatData[0]:0;return zt({mode:r,pads:n,value:i})},fI=(t,e,r)=>{let n=Re.padShape(e.dims.slice(),r.pads),i=n.length,a=`
      ${pI(t,e,r)}
      float process(int[${i}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:e.type,textureType:0},shaderSource:a}},dI=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},hI=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},pI=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[i,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=Re.computeStrides(e.dims);switch(r.mode){case"constant":return gI(n,e.dims,u,i,a,r.pads,r.value);case"reflect":return mI(n,e.dims,u,i,a,r.pads);case"edge":return yI(n,e.dims,u,i,a,r.pads);default:throw new Error("Invalid mode")}},gI=(t,e,r,n,i,a,u)=>{let s=e.length,l="";for(let o=s-1;o>=0;--o)l+=`
        k = m[${o}] - ${a[o]};
        if (k < 0)  return constant;
        if (k >= ${e[o]}) return constant;
        offset += k * ${r[o]};
        `;return`
      float padA(int m[${s}]) {
        const float constant = float(${u});
        int offset = 0;
        int k = 0;
        ${l}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},mI=(t,e,r,n,i,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[l]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[l]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[l]};
        `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},yI=(t,e,r,n,i,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0)  k = 0;
        if (k >= ${e[l]}) k = ${e[l]-1};
        offset += k * ${r[l]};
      `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),wD,xD,Bm,_D,ED,TD,ID,$m,Vm,vI,jm,AD,uc,Um,lc,bI,bz=Y(()=>{"use strict";qr(),gt(),et(),wD=(t,e,r)=>{uc(e);let n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(B(N({},n),{get:()=>Bm(e,n,!1,r)}),e)]},xD=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInt("count_include_pad",0)!==0,i=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),u=t.attributes.getInts("pads",[]);if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return zt({autoPad:e,ceilMode:r,countIncludePad:n,kernelShape:i,strides:a,pads:u})},Bm=(t,e,r,n)=>{let[i,a]=Vm(t,n,r),u=Re.size(i.kernelShape),s="value += _X(x);",l="";i.countIncludePad?l+=`value /= float(${u});`:l+=`value /= float(${u} - pad);`;let o=`
        ${Um(t[0].dims,i,s,l,"0.0")}
      `;return B(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:o})},_D=(t,e,r)=>{uc(e);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[t.run(B(N({},n),{get:()=>Bm(e,n,!0,r)}),e)]},ED=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return zt({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},TD=(t,e,r)=>{uc(e);let n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(B(N({},n),{get:()=>$m(e,n,!1,r)}),e)]},ID=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),u=t.attributes.getInt("storage_order",0),s=t.attributes.getInts("dilations",[]);if(u!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return zt({autoPad:e,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:i,pads:a,storageOrder:u,dilations:s})},$m=(t,e,r,n)=>{let[i,a]=Vm(t,n,r),u=`
      value = max(_X(x), value);
    `,s="",l=`
      ${Um(t[0].dims,i,u,s,"-1e5")}
    `;return B(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:l})},Vm=(t,e,r)=>{let n=t[0].dims.slice(),i=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),u=e.strides.slice(),s=i?e.dilations.slice():[],l=e.pads.slice();wh.adjustPoolAttributes(r,n,a,u,s,l);let o=wh.computePoolOutputShape(r,n,u,s,a,l,e.autoPad),c=Object.assign({},e);return i?Object.assign(c,{kernelShape:a,strides:u,pads:l,dilations:s,cacheKey:e.cacheKey}):Object.assign(c,{kernelShape:a,strides:u,pads:l,cacheKey:e.cacheKey}),[c,o]},vI={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},jm={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},AD=(t,e)=>(uc(e),[t.run(B(N({},jm),{get:()=>$m(e,jm,!0,vI)}),e)]),uc=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},Um=(t,e,r,n,i)=>{let a=t.length;if(e.kernelShape.length<=2){let u=e.kernelShape[e.kernelShape.length-1],s=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],o=e.pads[e.pads.length-1],c=t[a-1],f="",d="",h="";if(l+o!==0?f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            if (x[${a} - 1] < 0 || x[${a} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            ${r}
          }`,e.kernelShape.length===2){let p=e.kernelShape[e.kernelShape.length-2],m=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],x=e.pads[e.pads.length-2],y=t[a-2];v+x!==0?d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
              if (x[${a} - 2] < 0 || x[${a} - 2] >= ${y}) {
                pad+= ${u};
                continue;
              }
          `:d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
            `,h=`
          }
        `}return`
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);

          float value = ${i};
          int pad = 0;
          ${d}
          ${f}
          ${h}
          ${n}
          return value;
        }
      `}else{let u=Re.size(e.kernelShape),s=Re.computeStrides(e.kernelShape),l=s.length,o=e.pads.length,c=bI(l),f=lc(t,"inputDims"),d=lc(e.pads,"pads"),h=lc(s,"kernelStrides"),p=lc(e.strides,"strides"),m=e.pads.reduce((x,y)=>x+y),v="";return m?v=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:v=`
          }
          ${r}
        `,`
        ${c}
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);
          int offset[${l}];
          int pads[${o}];
          int inputDims[${a}];
          int kernelStrides[${l}];
          int strides[${l}];
          ${d}
          ${f}
          ${p}
          ${h}

          float value = ${i};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${u}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${a} - ${l}; j < ${a}; j++) {
              x[j] = indices[j] * strides[j - ${a} + ${l}]
                + offset[j - ${a} + ${l}] - pads[j - 2];
              ${v}
          }
          ${n}

          return value;
        }
      `}},lc=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=`
      ${e}[${n}] = ${t[n]};
    `;return r},bI=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),qi,Zi,wI,xI,SD,DD,CD,OD,PD,MD,ND,wz=Y(()=>{"use strict";qr(),Dh(),gt(),et(),qi=(t,e,r,n,i)=>{xI(e);let a={name:n,inputNames:["A"],inputTypes:[0]};return[t.run(B(N({},a),{cacheHint:r.cacheKey,get:()=>wI(t,e,r,n,i,a)}),e)]},Zi=t=>{let e=t.attributes.getInts("axes",[]),r=t.attributes.getInt("keepdims",1)===1;return zt({axes:e,keepDims:r})},wI=(t,e,r,n,i,a)=>{let u=[],s=e[0].dims.length||1,l=[],o=Re.normalizeAxes(r.axes,e[0].dims.length),c=i(e,o),f=c[1];for(let h=0;h<e[0].dims.length;h++)o.indexOf(h)>=0||o.length===0?(r.keepDims&&u.push(1),f=`
          for(int j${h} = 0; j${h} < ${e[0].dims[h]}; j${h}++) {
            inputIdx[${h}] = j${h};
            ${f}
          }`):(l.push(`inputIdx[${h}] = outputIdx[${u.length}];`),u.push(e[0].dims[h]));let d=`
      float process(int outputIdx[${u.length||1}]) {
        float value;                 // final result
        int inputIdx[${s}];      // addressing input data
        ${l.join(`
`)}
        ${c[0]}       // init ops for reduce max/min
        ${f}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return B(N({},a),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:d})},xI=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},SD=(t,e,r)=>qi(t,e,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),DD=(t,e,r)=>qi(t,e,r,"ReduceMean",(n,i)=>{let a=1;for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&(a*=n[0].dims[u]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${a}.;`]}),CD=(t,e,r)=>qi(t,e,r,"ReduceMax",(n,i)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),OD=(t,e,r)=>qi(t,e,r,"ReduceMin",(n,i)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),PD=(t,e,r)=>qi(t,e,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),MD=(t,e,r)=>qi(t,e,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),ND=(t,e,r)=>qi(t,e,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),RD,xz=Y(()=>{"use strict";gt(),RD=(t,e)=>{let r=Re.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],r)]:[t.reshapeUnpacked(e[0],r)]}}),Hm,S1,FD,kD,Ic,_I,D1,_h,LD=Y(()=>{"use strict";qr(),or(),et(),Hm={name:"Upsample",inputNames:["X"],inputTypes:[0]},S1=(t,e,r)=>(D1(e,r),[t.run(B(N({},Hm),{cacheHint:r.cacheKey,get:()=>_I(t,e,r)}),e)]),FD=t=>Ic(t,7),kD=t=>Ic(t,9),Ic=(t,e)=>{let r=e>=10,n=t.attributes.getString("mode","nearest");if(n!=="nearest"&&n!=="linear"&&(e<11||n!=="cubic"))throw new Error(`unrecognized mode: ${n}`);let i=[];e<9&&(i=t.attributes.getFloats("scales"),_h(i,n,r));let a=t.attributes.getFloat("extrapolation_value",0),u=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u)===-1)throw new Error(`coordinate_transform_mode '${u}' is not supported`);let s=u==="tf_crop_and_resize",l=s,o=n==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(o)===-1)throw new Error(`nearest_mode '${o}' is not supported`);let c=t.attributes.getFloat("cubic_coeff_a",-.75),f=t.attributes.getInt("exclude_outside",0)!==0;if(f&&n!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let d=e<11?!0:n==="nearest"&&u==="asymmetric"&&o==="floor",h=0,p=0,m=0;return e>10?t.inputs.length>2?(h=1,p=2,m=3):(p=1,m=2):e===9&&(p=1),zt({opset:e,isResize:r,mode:n,scales:i,extrapolationValue:a,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:s,nearestMode:o,cubicCoefficientA:c,excludeOutside:f,useNearest2xOptimization:d,roiInputIdx:h,scalesInputIdx:p,sizesInputIdx:m})},_I=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[i,a]=t.calculateTextureWidthAndHeight(e[0].dims,0),u=e[0].dims.map((m,v)=>Math.floor(m*r.scales[v])),[s,l]=t.calculateTextureWidthAndHeight(u,0),o=u.length,c=new Array(o),f=new Array(o),d=`
      int output_pitches[${o}];
      int input_pitches[${o}];
      `;for(let m=o-1;m>=0;m--)c[m]=m===o-1?1:c[m+1]*u[m+1],f[m]=m===o-1?1:f[m+1]*e[0].dims[m+1],d+=`
        output_pitches[${m}] = ${c[m]};
        input_pitches[${m}] = ${f[m]};
        `;let h=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${i}, ${a});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,p=r.mode==="nearest"?`
    ${h}
    float process(int indices[${o}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int d, m;
      for (int dim = 0; dim < ${o}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:o===4?`
    ${h}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return B(N({},Hm),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:p,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(m=>Math.ceil(m))}]})},D1=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},_h=(t,e,r)=>{if(r){for(let n of t)if(n<=0)throw new Error("Scale value should be greater than 0.")}else for(let n of t)if(n<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}),dh,C1,BD,$D,EI,TI,II,AI,_z=Y(()=>{"use strict";or(),et(),Ei(),gu(),LD(),dh={name:"Resize",inputNames:["A"],inputTypes:[2]},C1=(t,e,r)=>(D1(e,r),[t.run(B(N({},dh),{cacheHint:r.cacheKey,get:()=>EI(t,e,r)}),e)]),BD=t=>Ic(t,10),$D=t=>Ic(t,11),EI=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[i,a]=TI(e,r);if(i.every(y=>y===1)&&r.coordinateTransformMode!=="tf_crop_and_resize")return B(N({},dh),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${n.texture2D}(X, TexCoords);
                    ${n.output} = v;
                }`});let u=a.length;if(u<2)throw new Error(`output dimension should be at least 2, but got ${u}`);let s=a[u-2],l=a[u-1],o=e[0].dims;if(u!==o.length)throw new Error(`output dimension should match input ${o.length}, but got ${u}`);let c=o[u-2],f=o[u-1],d=i[u-2],h=i[u-1],p="";if(r.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${s}.0 - 1.0, ${l}.0 - 1.0,
                            ${s}.0 - 1.0);
                        vec4 original = vec4(${f}.0 - 1.0, ${c}.0 - 1.0, ${f}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let m=Qi(u),v=Oc(),x=`
            const vec2 inputWH = vec2(${c}.0, ${f}.0);
            const vec4 scaleWHWH = vec4(float(${d}), float(${h}), float(${d}), float(${h}));
            ${v}
            ${p}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${m} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${s-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${n.output} = vec4(newValue);
            }
        `;return B(N({},dh),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:x})},TI=(t,e)=>{let r=t[0].dims,n=e.scales,i;if(n.length===0){let u=t[e.scalesInputIdx];if(u&&u.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");n=II(u,e.mode,e.isResize)}else{let s=t[e.sizesInputIdx];if(!s||s.size===0)throw new Error("Either scales or sizes MUST be provided as input.");i=Array.from(s.integerData),n=AI(i,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let a=i||r.map((u,s)=>Math.floor(u*n[s]));return[n,a]},II=(t,e,r)=>{let n=Array.from(t.floatData);return _h(n,e,r),n},AI=(t,e,r,n)=>{let i=e.length,a=new Array(i);for(let u=0,s=i;u<s;u++)if(e[u]===0){if(t[u]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");a[u]=1}else a[u]=t[u]/e[u];return _h(a,r,n),a}}),VD,SI,Ez=Y(()=>{"use strict";pu(),VD=(t,e)=>(SI(e),[new Rn([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),SI=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),hh,jD,UD,zm,DI,HD,CI,OI,Tz=Y(()=>{"use strict";qr(),Dh(),gt(),et(),hh={name:"Slice",inputNames:["A"],inputTypes:[0]},jD=(t,e,r)=>(DI(e),[t.run(B(N({},hh),{cacheHint:r.cacheKey,get:()=>zm(t,e[0],r)}),e)]),UD=t=>{let e=t.attributes.getInts("starts"),r=t.attributes.getInts("ends"),n=t.attributes.getInts("axes",[]);return zt({starts:e,ends:r,axes:n})},zm=(t,e,r)=>{let n=r.axes.length===0?e.dims.slice(0).map((c,f)=>f):r.axes,i=Re.normalizeAxes(n,e.dims.length),a=r.starts.map((c,f)=>c>e.dims[i[f]]-1?e.dims[i[f]]:Re.normalizeAxis(c,e.dims[i[f]])),u=r.ends.map((c,f)=>c>e.dims[i[f]]-1?e.dims[i[f]]:Re.normalizeAxis(c,e.dims[i[f]])),s=e.dims.slice(),l=[];for(let c=0;c<i.length;c++)s[i[c]]=u[c]-a[c],a[c]>0&&l.push(`outputIdx[${i[c]}] += ${a[c]};`);let o=`
      float process(int outputIdx[${s.length}]) {
        ${l.join(`
      `)}
        return _A(outputIdx);
      }`;return B(N({},hh),{output:{dims:s,type:e.type,textureType:0},shaderSource:o})},DI=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},HD=(t,e)=>{OI(e);let r=CI(t,e);return[t.run(B(N({},hh),{cacheHint:r.cacheKey,get:()=>zm(t,e[0],r)}),[e[0]])]},CI=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(u=>u!==1))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(e[1].integerData),n=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[],a=`${i};${r};${n}`;return{starts:r,ends:n,axes:i,cacheKey:a}},OI=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),Gm,Wm,qm,zD,GD,WD,qD,Xm,PI,MI,NI,Ym,Iz=Y(()=>{"use strict";qr(),gt(),or(),et(),K1(),Gm={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Wm={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},qm={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},zD=(t,e,r)=>{Ym(e);let n=e[0].dims.slice(),i=Re.normalizeAxis(r.axis,n.length),a=Re.sizeToDimension(n,i),u=Re.sizeFromDimension(n,i);return Xm(t,e,r,a,u)},GD=t=>zt({axis:t.attributes.getInt("axis",1)}),WD=t=>zt({axis:t.attributes.getInt("axis",-1)}),qD=(t,e,r)=>{Ym(e);let n=e[0].dims.slice(),i=Re.normalizeAxis(r.axis,n.length),a=n.length,u=i!==a-1,s=[],l=[],o=[],c;u&&(l=Array.from({length:a}).map((p,m)=>m),l[i]=a-1,l[a-1]=i,l.map(p=>s.push(n[p])),c=zt({perm:l}),o=Dc(t,e,c));let f=u?Re.sizeToDimension(s,a-1):Re.sizeToDimension(n,a-1),d=u?Re.sizeFromDimension(s,a-1):Re.sizeFromDimension(n,a-1),h=Xm(t,u?o:e,r,f,d);return u?Dc(t,h,c):h},Xm=(t,e,r,n,i)=>{let a=PI(t,e[0],n,i,[n]),u=t.run(B(N({},Gm),{cacheHint:r.cacheKey,get:()=>a}),e),s=MI(t,e[0],n,i,a.output.dims,[n]),l=t.run(B(N({},Wm),{cacheHint:r.cacheKey,get:()=>s}),[e[0],u]),o=NI(t,e[0],n,i,a.output.dims,s.output.dims);return[t.run(B(N({},qm),{cacheHint:r.cacheKey,get:()=>o}),[e[0],u,l])]},PI=(t,e,r,n,i)=>{let[a,u]=t.calculateTextureWidthAndHeight(e.dims,0),s=i.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i.length!==1)throw new Error("Dimensionality of the output should be 1");if(i[0]!==r)throw new Error("Shape of the output should be equal to logical row count");let l=Qe(t.session.backend.glContext.version),o=`
      float process(int[${s}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${u} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${u})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return B(N({},Gm),{output:{dims:i,type:e.type,textureType:0},shaderSource:o})},MI=(t,e,r,n,i,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=a.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(i.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let o=Qe(t.session.backend.glContext.version),c=`
      float process(int[${l}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${o.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${u}, ${s}))) - max);
        }

        return norm_factor;
      }`;return B(N({},Wm),{output:{dims:a,type:e.type,textureType:0},shaderSource:c})},NI=(t,e,r,n,i,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=e.dims.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i.length!==1||a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r||a[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let o=`
      float process(int[${l}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${u}, ${s});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return B(N({},qm),{output:{dims:e.dims,type:e.type,textureType:0},shaderSource:o})},Ym=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),Zm,XD,YD,RI,FI,kI,Az=Y(()=>{"use strict";qr(),gt(),et(),Zm={name:"Split",inputNames:["A"],inputTypes:[0]},XD=(t,e,r)=>{kI(e);let n=Re.normalizeAxis(r.axis,e[0].dims.length),i=RI(t,e,n,r),a=[];for(let u=0;u<i;++u)a.push(t.run(B(N({},Zm),{cacheHint:`${r.cacheKey};${u}`,get:()=>FI(t,e[0],r,n,u)}),e));return a},YD=t=>{let e=t.attributes.getInt("axis",0),r=t.attributes.getInts("split",[]),n=t.outputs.length;return zt({axis:e,split:r,numOutputs:n})},RI=(t,e,r,n)=>{let[,i]=h1.splitShape(e[0].dims,r,n.split,n.numOutputs);return i.length},FI=(t,e,r,n,i)=>{let[a,u]=h1.splitShape(e.dims,n,r.split,r.numOutputs),s=u[i],l=a[i],o=`
      float process(int indices[${l.length}]) {
        indices[${n}] += ${s};
        return _A(indices);
      }
    `;return B(N({},Zm),{cacheHint:`${r.cacheKey}:${i}`,output:{dims:l,type:e.type,textureType:0},shaderSource:o})},kI=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),O1,ZD,KD,LI,BI,Sz=Y(()=>{"use strict";gt(),O1=(t,e,r)=>{LI(e);let n=Re.squeezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},ZD=(t,e)=>(BI(e),O1(t,[e[0]],Array.from(e[1].integerData))),KD=t=>t.attributes.getInts("axes"),LI=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},BI=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),QD,$I,VI,Dz=Y(()=>{"use strict";or(),et(),QD=(t,e)=>{VI(e);let r={name:"Sum",inputNames:e.map((n,i)=>`X${i}`),inputTypes:new Array(e.length).fill(0)};return[t.run(B(N({},r),{get:()=>$I(t,e,r)}),e)]},$I=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),i=e[0].dims.slice(),a=`
      void main() {
        vec4 result = ${e.map((u,s)=>`${n.texture2D}(X${s},TexCoords)`).join(" + ")};
        ${n.output} = result;
      }
    `;return B(N({},r),{output:{dims:i,type:e[0].type,textureType:0},hasMain:!0,shaderSource:a})},VI=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let r=1;r<t.length;r++){if(e!==t[r].dims.length)throw new Error("Input shapes are mismatched.");for(let n=0;n<e;n++)if(t[0].dims[n]!==t[r].dims[n])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let r=1;r<t.length;r++)if(t[0].type!==t[r].type)throw new Error("Input types are not matched.")}}),JD,jI,UI,Cz=Y(()=>{"use strict";Dh(),et(),JD=(t,e)=>{UI(e);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run(B(N({},r),{get:()=>jI(t,e,r)}),e)]},jI=(t,e,r)=>{let n=e[0].dims.slice(),i=new Array(n.length),a=[];for(let l=0;l<n.length;l++)i[l]=n[l]*e[1].numberData[l],a.push(`inputIdx[${l}] = int(mod(float(outputIdx[${l}]), ${n[l]}.));`);let u=i.length,s=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${u}];
        ${a.join(`
`)}
        return _A(inputIdx);
      }
    `;return B(N({},r),{output:{dims:i,type:e[0].type,textureType:0},shaderSource:s})},UI=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),P1,eC,tC,HI,zI,Oz=Y(()=>{"use strict";gt(),P1=(t,e,r)=>{HI(e);let n=Re.unsqueezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},eC=(t,e)=>(zI(e),P1(t,[e[0]],Array.from(e[1].integerData))),tC=t=>t.attributes.getInts("axes"),HI=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},zI=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),rC,Pz=Y(()=>{"use strict";vH(),MH(),NH(),FH(),Z1(),uz(),lz(),cz(),fz(),dz(),hz(),pz(),yz(),X1(),vz(),bz(),wz(),xz(),_z(),Ez(),Tz(),Iz(),Az(),Sz(),Dz(),Cz(),K1(),jS(),Oz(),LD(),rC=[["Abs","","6+",vS],["Acos","","7+",bS],["Add","","7+",QA],["And","","7+",JA],["Asin","","7+",wS],["Atan","","7+",xS],["AveragePool","","7+",wD,xD],["BatchNormalization","","7+",XA,YA],["Cast","","6+",cS,fS],["Ceil","","6+",TS],["Clip","","6-10",w1,_S],["Clip","","11+",ES],["Concat","","4+",hS,pS],["Conv","","1+",E1,T1],["ConvTranspose","","1+",eD,tD],["Cos","","7+",IS],["Div","","7+",eS],["Dropout","","7+",x1],["DepthToSpace","","1+",nD,oD],["Equal","","7+",tS],["Elu","","6+",AS,SS],["Exp","","6+",DS],["Flatten","","1+",iD,aD],["Floor","","6+",CS],["FusedConv","com.microsoft","1+",E1,T1],["Gather","","1+",sD,uD],["Gemm","","7-10",I1,lD],["Gemm","","11+",I1,cD],["GlobalAveragePool","","1+",_D,ED],["GlobalMaxPool","","1+",AD],["Greater","","7+",rS],["Identity","","1+",x1],["ImageScaler","","1+",fD,dD],["InstanceNormalization","","6+",hD,pD],["LeakyRelu","","6+",OS,PS],["Less","","7+",nS],["LRN","","1+",gD,mD],["Log","","6+",MS],["MatMul","","1+",WS,qS],["MaxPool","","1+",TD,ID],["Mul","","7+",oS],["Neg","","6+",NS],["Not","","1+",RS],["Or","","7+",iS],["Pad","","2-10",A1,yD],["Pad","","11+",vD,bD],["Pow","","7+",aS],["PRelu","","7+",sS],["ReduceLogSum","","1+",MD,Zi],["ReduceMax","","1+",CD,Zi],["ReduceMean","","1+",DD,Zi],["ReduceMin","","1+",OD,Zi],["ReduceProd","","1+",PD,Zi],["ReduceSum","","1-12",SD,Zi],["ReduceSumSquare","","1+",ND,Zi],["Relu","","6+",FS],["Reshape","","5+",RD],["Resize","","10",C1,BD],["Resize","","11+",C1,$D],["Shape","","1+",VD],["Sigmoid","","6+",kS],["Sin","","7+",LS],["Slice","","10+",HD],["Slice","","1-9",jD,UD],["Softmax","","1-12",zD,GD],["Softmax","","13+",qD,WD],["Split","","2-12",XD,YD],["Sqrt","","6+",BS],["Squeeze","","1-12",O1,KD],["Squeeze","","13+",ZD],["Sub","","7+",uS],["Sum","","6+",QD],["Tan","","7+",$S],["Tanh","","6+",VS],["Tile","","6+",JD],["Transpose","","1+",Dc,rD],["Upsample","","7-8",S1,FD],["Upsample","","9",S1,kD],["Unsqueeze","","1-12",P1,tC],["Unsqueeze","","13+",eC],["Xor","","7+",lS]]});function Mz(t){let e={},r;for(;(r=M1.exec(t))!==null;){let n=r[3].split(",").map(i=>{let a=i.trim().split(" ");return a&&a.length===2?{type:a[0],name:a[1]}:null}).filter(i=>i!==null);e[r[2]]={params:n,body:r[4]}}for(let n in e){let i=nC.replace("__FUNC__",n),a=new RegExp(i,"gm");for(;(r=a.exec(t))!==null;){let u=r[1],s=r[2],l=r[3].split(","),o=u?`${u} ${s};`:"",c=e[n].body,f="";e[n].params.forEach((h,p)=>{h&&(f+=`${h.type} ${h.name} = ${l[p]};
`)}),c=`${f}
 ${c}`,c=c.replace("return",`${s} = `);let d=`
      ${o}
      {
        ${c}
      }
      `;t=t.replace(r[0],d)}}return t=t.replace(M1,""),t}var M1,nC,Nz=Y(()=>{"use strict";M1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,nC="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function vc(t,e){let r=[],n=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:Rz(e,t).sort(),u=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[u]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[u]==null||a[u]>s)&&t[s]===1&&(r.push(t[s]),n.push(s)),a[u]<=s&&u++}t[s]!==1&&(r.push(t[s]),n.push(s))}return{newShape:r,keptDims:n}}function Rz(t,e){let r=e.length;return t=t==null?e.map((n,i)=>i):[].concat(t),bh(t.every(n=>n>=-r&&n<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),bh(t.every(Fz),()=>`All values in axis param must be integers but got axis ${t}`),t.map(n=>n<0?r+n:n)}function Fz(t){return t%1===0}function kz(t){if(t.length===0)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function GI(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var oC,iC=Y(()=>{"use strict";Io(),gt(),oC=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let r=this.computeTexture(t,e);return e&&e.isPacked&&(r[0]/=2,r[1]/=2),e&&e.reverseWH?[r[1],r[0]]:r}computeTexture(t,e){let r=e&&e.isPacked;if(t.length===0)return r?[2,2]:[1,1];let n=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let u=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((l,o)=>l*o),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((l,o)=>l*o);if(u>n||s>n)cr.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[u,s]}let i=t.slice(0);r&&(n=n*2,i=i.map((u,s)=>s>=i.length-2?i[s]%2===0?i[s]:i[s]+1:i[s]),i.length===1&&(i=[2,i[0]])),i.length!==2&&(i=vc(i).newShape);let a=kz(i);return i.length<=1&&a<=n?[1,a]:i.length===2&&i[0]<=n&&i[1]<=n?i:i.length===3&&i[0]*i[1]<=n&&i[2]<=n?[i[0]*i[1],i[2]]:i.length===3&&i[0]<=n&&i[1]*i[2]<=n?[i[0],i[1]*i[2]]:i.length===4&&i[0]*i[1]*i[2]<=n&&i[3]<=n?[i[0]*i[1]*i[2],i[3]]:i.length===4&&i[0]<=n&&i[1]*i[2]*i[3]<=n?[i[0],i[1]*i[2]*i[3]]:r?GI(a/4).map(u=>u*2):GI(a)}}}),aC,Lz=Y(()=>{"use strict";gt(),Ji(),or(),iC(),Ei(),aC=class extends mu{constructor(t){super(t)}getFunctions(){return N(N(N(N(N(N(N({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new ce(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new ce(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputPacked1DCoords(e,r);break;case 2:n[i]=this.getOutputPacked2DCoords(e,r);break;case 3:n[i]=this.getOutputPacked3DCoords(e,r);break;default:n[i]=this.getOutputPackedNDCoords(e,r)}let a=`
      void setOutput(vec4 val) {
        ${Qe(this.context.glContext.version).output} = val;
      }
    `,u="floatTextureSetRGBA";return n[u]=new ce(a),n}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[i]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[i]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[i]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[i]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[i]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let a=`
        void setOutput(float val) {
          ${Qe(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,u="floatTextureSetR";return n[u]=new ce(a),n}getOutputScalarCoords(){return new ce(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new ce(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new ce(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new ce(n))}getOutputPacked2DCoords(t,e){let r="";if(gc.arraysEqual(t,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new ce(r);let n=e,i=Math.ceil(t[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${i}) * 2;
          int c = 2 * (index / ${i});

          return ivec2(r, c);
        }
      `,new ce(r)}getOutputPacked3DCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[2]/2),i=n*Math.ceil(t[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${i};
          index -= b * ${i};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new ce(a)}getOutputPackedNDCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[t.length-1]/2),i=n*Math.ceil(t[t.length-2]/2),a=i,u="",s="b, r, c";for(let o=2;o<t.length-1;o++)a*=t[t.length-o-1],u=`
      int b${o} = index / ${a};
      index -= b${o} * ${a};
    `+u,s=`b${o}, `+s;let l=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${i};
        index -= b * ${i};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${t.length}(${s});
      }
    `;return new ce(l)}getOutputUnpacked1DCoords(t,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new ce(r)}getOutputUnpacked2DCoords(t,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new ce(r)}getOutputUnpacked3DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new ce(r)}getOutputUnpacked4DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new ce(r)}getOutputUnpacked5DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2","d3"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new ce(r)}getOutputUnpacked6DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2","d3","d4"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new ce(r)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new ce(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new ce(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new ce(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new ce(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=Qe(this.context.glContext.version);return t[e]=new ce(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n],a=Cm(r);i.isPacked?t[a]=this.getPackedSamplerFromInput(a,r,i):t[a]=this.getUnpackedSamplerFromInput(a,r,i);let u=nH(r);i.unpackedShape.length<=e.unpackedShape.length&&(i.isPacked?t[u]=this.getPackedSamplerAtOutputCoords(u,i,e,r):t[u]=this.getUnpackedSamplerAtOutputCoords(u,i,e,r))}),t}getPackedSamplerAtOutputCoords(t,e,r,n){let i=e.unpackedShape,a=r.unpackedShape,u=Cm(n),s=i.length,l=a.length,o=zo.getBroadcastDims(i,a),c=Qi(l),f=l-s,d,h=du();s===0?d="":l<2&&o.length>=1?d="coords = 0;":d=o.map(I=>`coords.${h[I+f]} = 0;`).join(`
`);let p="";l<2&&s>0?p="coords":p=i.map((I,C)=>`coords.${h[C+f]}`).join(", ");let m="return outputValue;",v=Re.size(i)===1,x=Re.size(a)===1;if(s===1&&!v&&!x)m=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v&&!x)l===1?m=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:m=`
          return vec4(outputValue.x);
        `;else if(o.length){let I=s-2,C=s-1;o.indexOf(I)>-1&&o.indexOf(C)>-1?m="return vec4(outputValue.x);":o.indexOf(I)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(C)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}let y=`
        int lastDim = coords.${h[l-1]};
        coords.${h[l-1]} = coords.${h[l-2]};
        coords.${h[l-2]} = lastDim;
      `,_=`
      vec4 ${t}() {
        ${c} coords = getOutputCoords();
        ${y}
        ${d}
        vec4 outputValue = ${u}(${p});
        ${m}
      }
    `;return new ce(_,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,r,n){let i=[r.width,r.height],a=[e.width,e.height],u=e.unpackedShape.length,s=r.unpackedShape.length,l=e.unpackedShape,o=r.unpackedShape,c=Cm(n);if(u===s&&gc.arraysEqual(a,i)){let y=`
          float ${t}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new ce(y,["coordinates.sampleTexture"])}let f=Qi(s),d=zo.getBroadcastDims(l,o),h=s-u,p,m=du();u===0?p="":s<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${m[y+h]} = 0;`).join(`
`);let v="";s<2&&u>0?v="coords":v=e.unpackedShape.map((y,_)=>`coords.${m[_+h]}`).join(", ");let x=`
        float ${t}() {
          ${f} coords = getOutputCoords();
          ${p}
          return ${c}(${v});
        }
      `;return new ce(x,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,r);case 2:return this.getPackedSampler2D(t,e,r);case 3:return this.getPackedSampler3D(t,e,r);default:return this.getPackedSamplerND(t,e,r)}}getUnpackedSamplerFromInput(t,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(t,e,r);case 1:return this.getUnpackedSampler1D(t,e,r);case 2:return this.getUnpackedSampler2D(t,e,r);case 3:return this.getUnpackedSampler3D(t,e,r);case 4:return this.getUnpackedSampler4D(t,e,r);case 5:return this.getUnpackedSampler5D(t,e,r);case 6:return this.getUnpackedSampler6D(t,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(t,e){let r=Qe(this.context.glContext.version),n=`
          vec4 ${t}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new ce(n)}getPackedSampler1D(t,e,r){let n=[r.width,r.height],i=[n[1],n[0]],a=Qe(this.context.glContext.version),u=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new ce(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],a=Qe(this.context.glContext.version),u=i[0],s=i[1];if(i!=null&&gc.arraysEqual(n,i)){let f=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${u}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new ce(f)}let l=i,o=Math.ceil(n[1]/2),c=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l[1]}, ${l[0]}, ${o}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new ce(c,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],a=[i[0],i[1]],u=Qe(this.context.glContext.version);if(n[0]===1){let d=n.slice(1),h=[1,2],p=ic(n,d),m=["b","row","col"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=this.getPackedSamplerFromInput(t,e,v),y=`${x.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${ac(m,h)});
      } `;return new ce(y,x.dependencies)}let s=a[0],l=a[1],o=Math.ceil(n[2]/2),c=o*Math.ceil(n[1]/2),f=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${s}, ${c}, ${o}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new ce(f,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,r){let n=r.unpackedShape,i=n.length,a=[r.width,r.height],u=Qe(this.context.glContext.version),s=[a[0],a[1]],l=s[1],o=s[0],c=Math.ceil(n[i-1]/2),f=c*Math.ceil(n[i-2]/2),d="int b, int row, int col",h=`b * ${f} + (row / 2) * ${c} + (col / 2)`;for(let m=2;m<i-1;m++)d=`int b${m}, `+d,f*=n[i-m-1],h=`b${m} * ${f} + `+h;let p=`vec4 ${t}(${d}) {
      int index = ${h};
      int texR = index / ${o};
      int texC = index - texR * ${o};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}, ${l});
      return ${u.texture2D}(${e}, uv);
    }`;return new ce(p)}getUnpackedSamplerScalar(t,e,r){let[n,i]=[r.width,r.height];if(n===1&&i===1){let u=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}let a=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${i});
          vec2 uv = uvFromFlat(${n}, ${i}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new ce(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,r){let n=r.width,i=r.height;if(i===1&&n===1){let u=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new ce(u,["coordinates.sampleTexture"])}if(i===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${i}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}let a=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${n}, ${i}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.height,r.width];if(i!=null&&gc.arraysEqual(n,i)){let f=i[1],d=i[0],h=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f}.0, ${d}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(h,["coordinates.sampleTexture"])}let{newShape:a,keptDims:u}=vc(n),s=a;if(s.length<n.length){let f=ic(n,s),d=JSON.parse(JSON.stringify(r));d.unpackedShape=f;let h=["col","row"],p=`
          ${this.getUnpackedSamplerFromInput(t,e,d).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${ac(h,u)});
          }
        `;return new ce(p,["coordinates.sampleTexture"])}let l=i[1],o=i[0];if(o===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${o});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(l===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${o});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let c=`
        float ${t}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${l}, ${o}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,r){let n=r.unpackedShape,i=n[1]*n[2],a=n[2],{newShape:u,keptDims:s}=vc(n),l=u;if(l.length<n.length){let d=ic(n,l),h=["batch","col","row"],p=JSON.parse(JSON.stringify(r));p.unpackedShape=d;let m=this.getUnpackedSamplerFromInput(t,e,p),v=s.reverse(),x=`
          ${m.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${ac(h,v)});
          }
        `;return new ce(x,m.dependencies)}let o=r.width,c=r.height,f=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${i} + col * ${a} + row;
            vec2 uv = uvFromFlat(${o}, ${c}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new ce(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,r){let n=r.unpackedShape,i=n[3],a=n[2]*i,u=n[1]*a,s=r.width,l=r.height,o=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${a} +
              depth2 * ${i} + depth;
          vec2 uv = uvFromFlat(${s}, ${l}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(o,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,r){let n=r.unpackedShape,i=n[4],a=n[3]*i,u=n[2]*a,s=n[1]*u,{newShape:l,keptDims:o}=vc(n);if(l.length<n.length){let h=ic(n,l),p=["row","col","depth","depth2","depth3"],m=JSON.parse(JSON.stringify(r));m.unpackedShape=h;let v=`
          ${this.getUnpackedSamplerFromInput(t,e,m).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${ac(p,o)});
          }
        `;return new ce(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c=r.width,f=r.height,d=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${s} + col * ${u} + depth * ${a} +
          depth3 * ${i} + depth2;
          vec2 uv = uvFromFlat(${c}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(d,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,r){let n=r.unpackedShape,i=n[5],a=n[4]*i,u=n[3]*a,s=n[2]*u,l=n[1]*s,{newShape:o,keptDims:c}=vc(n);if(o.length<n.length){let p=ic(n,o),m=["row","col","depth","depth2","depth3","depth4"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=`
            ${this.getUnpackedSamplerFromInput(t,e,v).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${ac(m,c)});
            }
          `;return new ce(x,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=r.width,d=r.height,h=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${l} + col * ${s} + depth * ${u} +
            depth2 * ${a} + depth3 * ${i} + depth4;
            vec2 uv = uvFromFlat(${f}, ${d}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,r=t.strides,n=t.width,i=t.height,a=[];for(let s=0;s<e-1;++s)a.push(`
        c[${s}] = offset / ${r[s]};`),a.push(`
        offset -= c[${s}] * ${r[s]};`);a.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${i});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new ce(u,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],i=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,a=`_${e}`;t[a]=new ce(this.getValueFromSingle(e,i,n.width,n.height,!1),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a=a+"_T",t[a]=new ce(this.getValueFromSingle(e,i,n.width,n.height,!0),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,r,n,i){let a=`_${t}`;i&&(a=a+"_T");let u=Qe(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,r,n,i){let a=`_${t}_Pack`;i&&(a=a+"_T");let u=Qe(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${t}, coords);
        }
        `}}}),sC,Bz=Y(()=>{"use strict";Ji(),sC=class N1 extends mu{constructor(e){super(e)}getFunctions(){return N(N({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new ce(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new ce(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=N1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new ce(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=N1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new ce(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),r=new Uint32Array(e),n=new Uint8Array(e);if(r[0]=3735928559,n[0]===239)return!0;if(n[0]===222)return!1;throw new Error("unknown endianness")}}}),uC,$z=Y(()=>{"use strict";Ji(),or(),uC=class extends mu{constructor(t){super(t)}getFunctions(){return N(N({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let t=Qe(this.context.glContext.version);return{setFragColor:new ce(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new ce(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),lC,Vz=Y(()=>{"use strict";Ji(),lC=class bc extends mu{constructor(e){super(e)}getFunctions(){return N(N(N(N(N({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,i)=>{let a=this.context.inputTextureLayouts[i].unpackedShape;if(a.length<=e){let u=a.length,s=e-u,l=`bcastIndices_${n}`,o="";for(let f=0;f<u;++f)o+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l} (int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${o}
        }
        `;r[l]=new ce(c)}}),r}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,i)=>{let a=this.context.inputTextureLayouts[i].shape;if(!(a.length<2||a.length>e)){let u=a.length,s=e-u,l=`bcastMatmulIndices_${n}`,o="";for(let f=0;f<u-2;++f)o+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l}(int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${o}
          realIndices[${u-1}] = bcastedIndices[${e-1}];
          realIndices[${u-2}] = bcastedIndices[${e-2}];
        }
        `;r[l]=new ce(c)}}),r}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=i.length,s=`indicesToOffset_${r}`;e[s]=new ce(bc.indexToOffsetSingle(s,u,a)),s=`indicesToOffset_${r}_T`,e[s]=new ce(bc.indexToOffsetSingle(s,u,a.slice().reverse()))}),e}static indexToOffsetSingle(e,r,n){let i="";for(let a=r-1;a>=0;--a)i+=`
        offset += indices[${a}] * ${n[a]};
        `;return`
      int ${e}(int indices[${r}]) {
        int offset = 0;
        ${i}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=i.length,s=`offsetToIndices_${r}`;e[s]=new ce(bc.offsetToIndicesSingle(s,u,a)),s=`offsetToIndices_${r}_T`,e[s]=new ce(bc.offsetToIndicesSingle(s,u,a.slice().reverse()))}),e}static offsetToIndicesSingle(e,r,n){let i=[];for(let a=0;a<r-1;++a)i.push(`
      indices[${a}] = offset / ${n[a]};`),i.push(`
        offset -= indices[${a}] * ${n[a]};`);return i.push(`
      indices[${r-1}] = offset;`),`
      void ${e}(int offset, out int indices[${r}]) {
        ${i.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=i.length,u=`incrementIndices_${r}`,s="";for(let o=0;o<a;++o)s+=`
        shape[${o}] = ${i[o]};`;let l=`
        void ${u}(int axis, out int indices[${a}]) {
          int shape[${a}];
          ${s};
          for(int i = ${a} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[u]=new ce(l)}),e}}}),cC,jz=Y(()=>{"use strict";Ji(),cC=class extends mu{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return N(N(N(N({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let i=`${n}Vec`,a="";for(let s=0;s<t;++s)a+=`
          dest[${s}] ${e[n]} src[${s}];
          `;let u=`
        void ${i}(int src[${t}], out int dest[${t}]) {
          ${a}
        }
        `;r[i]=new ce(u)}return r}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<t;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new ce(r)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let r=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new ce(r)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${t-1}];
        `;let r=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new ce(r)}}}}),R1,Uz=Y(()=>{"use strict";Lz(),Bz(),$z(),Vz(),jz(),R1={encoding:sC,fragcolor:uC,vec:cC,shapeUtils:lC,coordinates:aC}}),fC,Hz=Y(()=>{"use strict";Ji(),Nz(),Uz(),or(),fC=class{constructor(t,e,r,n){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new ZA(t,e,r,n),Object.keys(R1).forEach(a=>{let u=new R1[a](this.context);this.libs[a]=u});let i=this.glslLibRoutineDependencyGraph;for(let a in this.libs){let u=this.libs[a].getFunctions();for(let s in u){let l=a+"."+s,o;i[l]?(o=i[l],o.routineBody=u[s].routineBody):(o=new b1(l,u[s].routineBody),i[l]=o);let c=u[s].dependencies;if(c)for(let f=0;f<c.length;++f)if(i[c[f]])o.addDependency(i[c[f]]);else{let d=new b1(c[f]);i[c[f]]=d,o.addDependency(d)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${rH(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Mz(e),`${tH(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let r="";for(let n=0;n<e.length;++n)if(e[n].routineBody)r+=e[n].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[n].name}`);return r}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];t.indexOf(n)!==-1&&e.push(this.glslLibRoutineDependencyGraph[r])}),KA.returnOrderedNodes(e)}getUniforms(t,e){let r=[];if(t)for(let n of t)r.push(`uniform sampler2D ${n};`);if(e)for(let n of e)r.push(`uniform ${n.type} ${n.name}${n.arrayLength?`[${n.arrayLength}]`:""};`);return r.join(`
`)}}}),dC,zz=Y(()=>{"use strict";Go(),Io(),Hz(),or(),dC=class{constructor(t,e,r){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,r){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let n=this.glContext.gl,i=t.program;n.useProgram(i);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(a){throw cr.error("ProgramManager",t.programInfo.shaderSource),a}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new fC(this.glContext,t,e,r),i=n.preprocess(),a=this.compile(i);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}})}compile(t){if(!this.vertexShader){cr.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let n=eH(this.glContext.version);this.vertexShader=this.glContext.compileShader(n,this.glContext.gl.VERTEX_SHADER)}we.debug&&cr.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),r}bindOutput(t){let e=t.width,r=t.height;cr.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${r}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,r)}bindAttributes(t){let e=t.position,r=t.textureCoord;this.glContext.setVertexAttributes(e,r),this.attributesBound=!0}bindUniforms(t,e,r){let n=this.glContext.gl,i=0;for(let{name:a,type:u,location:s,arrayLength:l}of t){let o=e.find(c=>c.name===a)?.data;if(u!=="sampler2D"&&!o)throw new Error(`variable '${a}' does not have data defined in program info`);switch(u){case"sampler2D":this.bindTexture(r[i],s,i),i++;break;case"float":l?n.uniform1fv(s,o):n.uniform1f(s,o);break;case"int":l?n.uniform1iv(s,o):n.uniform1i(s,o);break;default:throw new Error(`Uniform not implemented: ${u}`)}}}bindTexture(t,e,r){this.glContext.bindTextureToUniform(t.texture,r,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,r){let n=[];if(e)for(let i of e)n.push({name:i,type:"sampler2D",location:this.getUniformLocation(t,i)});if(r)for(let i of r)n.push(B(N({},i),{location:this.getUniformLocation(t,i.name)}));return n}getUniformLocation(t,e){let r=this.glContext.gl.getUniformLocation(t,e);if(r===null)throw new Error(`Uniform ${e} not found.`);return r}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),hC,Gz=Y(()=>{"use strict";Io(),xh(),hC=class{constructor(t,e,r,n){this.glContext=t,this.layoutStrategy=e,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,r,n){let i=this.toEncoderType(t),a=this.glContext.getEncoder(i,e.channels||1,n);if(e.isPacked&&n===1)throw new Error("not implemented");let u=e.width,s=e.height,l,o;if(this.config.reuseTextures){l=`${u}x${s}_${a.format}_${a.internalFormat}_${a.textureType}`,o=this.inUseTextures.get(l),o||(o=[],this.inUseTextures.set(l,o));let f=this.idleTextures.get(l);if(f&&f.length>0){let d=f.pop();return o.push(d),n===1&&this.glContext.updateTexture(d,u,s,a,this.toTextureData(t,r)),d}}cr.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let c=this.glContext.allocateTexture(u,s,a,this.toTextureData(t,r));return this.config.reuseTextures&&(o.push(c),this.textureLookup.set(c,l)),c}readTexture(t,e,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=t.shape.reduce((a,u)=>a*u)*r,i=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(e),r);return this.toTensorData(e,i)})}readTextureAsync(t,e,r){return U(this,null,function*(){let n=t.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let i=this.pendingRead.get(n);return new Promise(a=>i?.push(a))}return this.profiler.event("backend","TextureManager.readTextureAsync",()=>U(this,null,function*(){this.pendingRead.set(n,[]);let i=t.shape.reduce((l,o)=>l*o)*r;yield this.glContext.createAndWaitForFence();let a=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),r),u=this.toTensorData(e,a),s=this.pendingRead.get(n);return this.pendingRead.delete(n),s?.forEach(l=>l(u)),u}))})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((n,i)=>n*i),r=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(r.buffer,r.byteOffset,e)})}releaseTexture(t,e){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(t.texture),r)){e&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let i=n.indexOf(t.texture);if(i!==-1){n.splice(i,1);let a=this.idleTextures.get(r);a||(a=[],this.idleTextures.set(r,a)),a.push(t.texture)}}}(!r||e)&&(cr.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),pC,Wz=Y(()=>{"use strict";Io(),FU(),yH(),Pz(),zz(),iC(),Gz(),pC=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new oC(t.glContext.maxTextureSize),this.programManager=new dC(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new hC(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new qA(this)}onGraphInitialized(t){let e=t.getValues().filter(r=>r.from===-1&&r.tensor).map(r=>r.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){cr.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,r){let n=NU(t,e,rC);return{impl:n.opImpl,context:n.opInit?n.opInit(t,r):t}}}});function qz(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var F1,Xz=Y(()=>{"use strict";Go(),xh(),xh(),Ei(),F1=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,r,n){let i=this.gl,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);let u=n?r.encode(n,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,r.internalFormat,t,e,0,r.format,r.textureType,u),this.checkError(),a}updateTexture(t,e,r,n,i){let a=this.gl;a.bindTexture(a.TEXTURE_2D,t);let u=n.encode(i,e*r);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,r,n.format,n.textureType,u),this.checkError()}attachFramebuffer(t,e,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.checkError(),n.viewport(0,0,e,r),n.scissor(0,0,e,r)}readTexture(t,e,r,n,i,a){let u=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,r);let s=this.getEncoder(i,a),l=s.allocate(e*r);return u.bindTexture(u.TEXTURE_2D,t),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),u.readPixels(0,0,e,r,u.RGBA,s.textureType,l),this.checkError(),s.decode(l,n)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let r=this.gl;r.vertexAttribPointer(t,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(t),e!==-1&&(r.vertexAttribPointer(e,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let r=this.gl,n=r.createProgram();return r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),n}compileShader(t,e){let r=this.gl,n=r.createShader(e);if(!n)throw new Error(`createShader() returned null with type ${e}`);if(r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${t}`);return n}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,r){let n=this.gl;n.activeTexture(n.TEXTURE0+e),this.checkError(),n.bindTexture(n.TEXTURE_2D,t),this.checkError(),n.uniform1i(r,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(we.debug){let t=this.gl,e=t.getError(),r="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:r="INVALID_ENUM";break;case t.INVALID_VALUE:r="INVALID_VALUE";break;case t.INVALID_OPERATION:r="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(r)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,r=0){if(this.version===2)return new zA(this.gl,e);switch(t){case"float":return r===1||this.isRenderFloat32Supported?new y1(this.gl,e):new y1(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new GA(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let r=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let r=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,t.RGBA,t.FLOAT,null);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(n),i}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,r,n,i,a;try{e=t.createTexture(),r=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let u=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,u,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),n=t.createShader(t.VERTEX_SHADER),!n||(t.shaderSource(n,"void main(){}"),t.compileShader(n),i=t.createShader(t.FRAGMENT_SHADER),!i)||(t.shaderSource(i,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(i),a=t.createProgram(),!a)?!1:(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),n&&t.deleteShader(n),i&&t.deleteShader(i),r&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(r)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,r=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let n=this.gl,i=this.disjointTimerQueryWebgl2Extension;e=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(i.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!r}getTimerResult(t){let e=0;if(this.version===2){let r=this.gl;e=r.getQueryParameter(t,r.QUERY_RESULT),r.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}waitForQueryAndGetTime(t){return U(this,null,function*(){return yield HE(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)})}createAndWaitForFence(){return U(this,null,function*(){let t=this.createFence(this.gl);return this.pollFence(t)})}createFence(t){let e,r=t,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),n===null?e=()=>!0:e=()=>{let i=r.clientWaitSync(n,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},{query:n,isFencePassed:e}}pollFence(t){return U(this,null,function*(){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})})}pollItems(){let t=qz(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){return U(this,null,function*(){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&(yield HE(()=>(this.pollItems(),this.itemsToPoll.length===0)))})}}});function gC(t){let e;if((!t||t==="webgl2")&&"webgl2"in Za?e=Za.webgl2:(!t||t==="webgl")&&"webgl"in Za&&(e=Za.webgl),!e)try{let n=Zz();e=WI(n,t)}catch{let n=Yz();e=WI(n,t)}t=t||e.version===1?"webgl":"webgl2";let r=e.gl;return Za[t]=e,r.isContextLost()?(delete Za[t],gC(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),e)}function WI(t,e){let r={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},n,i=r;if((!e||e==="webgl2")&&(n=t.getContext("webgl2",i),n))try{return new F1(n,2)}catch(a){cr.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${a}`)}if((!e||e==="webgl")&&(n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),n))try{return new F1(n,1)}catch(a){cr.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${a}`)}throw new Error("WebGL is not supported")}function Yz(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function Zz(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Za,Kz=Y(()=>{"use strict";Io(),Xz(),Za={}}),mC,Qz=Y(()=>{"use strict";Go(),Io(),Wz(),Kz(),mC=class{get contextId(){return we.webgl.contextId}set contextId(t){we.webgl.contextId=t}get matmulMaxBatchSize(){return we.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){we.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return we.webgl.textureCacheMode}set textureCacheMode(t){we.webgl.textureCacheMode=t}get pack(){return we.webgl.pack}set pack(t){we.webgl.pack=t}get async(){return we.webgl.async}set async(t){we.webgl.async=t}initialize(){try{return this.glContext=gC(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),cr.setWithEnv(we),we.webgl.context||Object.defineProperty(we.webgl,"context",{value:this.glContext.gl}),cr.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return cr.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new pC(this,t)}dispose(){this.glContext.dispose()}}});function yC(t){return U(this,null,function*(){if(t){let e=typeof t=="string"?[t]:t;for(let r of e){let n=J1.get(r);if(n)return n;let i=yield Jz(r);if(i)return i}}else return yC(["webgl"]);throw new Error("no available backend to use")})}function Jz(t){return U(this,null,function*(){let e=vC;if(typeof e[t]<"u"&&eG(e[t])){let r=e[t],n=r.initialize();if(typeof n=="object"&&"then"in n&&(n=yield n),n)return J1.set(t,r),r}})}function eG(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var J1,vC,tG=Y(()=>{"use strict";Qz(),J1=new Map,vC={webgl:new mC}}),qI,bC,rG=Y(()=>{"use strict";Io(),qI=class{constructor(t,e){this.op=t,this.node=e}},bC=class{constructor(t,e,r){this.graph=t,this.profiler=r,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((r,n)=>new qI(r,e[n])),this.reset(),this._starter=[],this._ops.forEach((r,n)=>{let i=!0;for(let a of r.node.inputs)if(!this._values[a]&&this.graph.getInputIndices().indexOf(a)===-1){i=!1;break}i&&this._starter.push(n)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}execute(t,e){return U(this,null,function*(){return this.profiler.event("session","ExecutionPlan.execute",()=>U(this,null,function*(){this.reset();let r=t.createInferenceHandler(),n=this.graph.getInputIndices();if(e.length!==n.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${n.length}`);e.forEach((o,c)=>{let f=n[c];this._values[f]=o});let i=this._starter.slice(0),a=this.graph.getValues(),u=this.graph.getNodes(),s=0;for(;s<i.length;){let o=i[s++],c=this._ops[o],f=c.node.inputs.map(m=>this._values[m]);if(f.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${c.node}`);let d=f;cr.verbose("ExecPlan",`Runing op:${c.node.name} (${d.map((m,v)=>`'${c.node.inputs[v]}': ${m.type}[${m.dims.join(",")}]`).join(", ")})`);let h=yield this.profiler.event("node",c.node.name,()=>U(this,null,function*(){return c.op.impl(r,d,c.op.context)}));if(h.length!==c.node.outputs.length)throw new Error("the size of output does not match model definition.");h.forEach((m,v)=>{let x=c.node.outputs[v];if(this._values[x])throw new Error(`output [${x}] already has value: op:${c.node.name}`);this._values[x]=m});let p=new Set;h.forEach((m,v)=>{let x=c.node.outputs[v];for(let y of a[x].to){let _=u[y],I=!0;for(let C of _.inputs)if(!this._values[C]){I=!1;break}I&&p.add(y)}}),i.push(...p)}let l=[];for(let o=0;o<this.graph.getOutputIndices().length;o++){let c=this.graph.getOutputIndices()[o],f=this._values[c];if(f===void 0)throw new Error(`required output [${c}] does not have value`);c===0?yield f.getData():f.data,l.push(f)}return cr.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),l}))})}}}),Ge,Mn,k1,nG=Y(()=>{"use strict";Ah(),Ge=lu(Cc()),pu(),gt(),Mn=Et.experimental.fbs,k1=class wc{constructor(e){if(this._attributes=new Map,e!=null){for(let r of e)r instanceof Ge.onnx.AttributeProto?this._attributes.set(r.name,[wc.getValue(r),wc.getType(r)]):r instanceof Mn.Attribute&&this._attributes.set(r.name(),[wc.getValue(r),wc.getType(r)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,r,n){this._attributes.set(e,[n,r])}delete(e){this._attributes.delete(e)}getFloat(e,r){return this.get(e,"float",r)}getInt(e,r){return this.get(e,"int",r)}getString(e,r){return this.get(e,"string",r)}getTensor(e,r){return this.get(e,"tensor",r)}getFloats(e,r){return this.get(e,"floats",r)}getInts(e,r){return this.get(e,"ints",r)}getStrings(e,r){return this.get(e,"strings",r)}getTensors(e,r){return this.get(e,"tensors",r)}get(e,r,n){let i=this._attributes.get(e);if(i===void 0){if(n!==void 0)return n;throw new Error(`required attribute not found: ${e}`)}if(i[1]!==r)throw new Error(`type mismatch: expected ${r} but got ${i[1]}`);return i[0]}static getType(e){let r=e instanceof Ge.onnx.AttributeProto?e.type:e.type();switch(r){case Ge.onnx.AttributeProto.AttributeType.FLOAT:return"float";case Ge.onnx.AttributeProto.AttributeType.INT:return"int";case Ge.onnx.AttributeProto.AttributeType.STRING:return"string";case Ge.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case Ge.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case Ge.onnx.AttributeProto.AttributeType.INTS:return"ints";case Ge.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case Ge.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${Ge.onnx.AttributeProto.AttributeType[r]}`)}}static getValue(e){let r=e instanceof Ge.onnx.AttributeProto?e.type:e.type();if(r===Ge.onnx.AttributeProto.AttributeType.GRAPH||r===Ge.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let n=this.getValueNoCheck(e);if(r===Ge.onnx.AttributeProto.AttributeType.INT&&Ho.isLong(n))return Ho.longToNumber(n);if(r===Ge.onnx.AttributeProto.AttributeType.INTS){let i=n,a=new Array(i.length);for(let u=0;u<i.length;u++){let s=i[u];a[u]=Ho.longToNumber(s)}return a}if(r===Ge.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof Ge.onnx.AttributeProto?Rn.fromProto(n):Rn.fromOrtTensor(n);if(r===Ge.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof Ge.onnx.AttributeProto)return n.map(i=>Rn.fromProto(i));if(e instanceof Mn.Attribute)return n.map(i=>Rn.fromOrtTensor(i))}return r===Ge.onnx.AttributeProto.AttributeType.STRING&&e instanceof Ge.onnx.AttributeProto?d1(n):r===Ge.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof Ge.onnx.AttributeProto?n.map(d1):n}static getValueNoCheck(e){return e instanceof Ge.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case Ge.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case Ge.onnx.AttributeProto.AttributeType.INT:return e.i;case Ge.onnx.AttributeProto.AttributeType.STRING:return e.s;case Ge.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case Ge.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case Ge.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case Ge.onnx.AttributeProto.AttributeType.INTS:return e.ints;case Ge.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case Ge.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case Ge.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${Ge.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case Mn.AttributeType.FLOAT:return e.f();case Mn.AttributeType.INT:return e.i();case Mn.AttributeType.STRING:return e.s();case Mn.AttributeType.TENSOR:return e.t();case Mn.AttributeType.GRAPH:return e.g();case Mn.AttributeType.FLOATS:return e.floatsArray();case Mn.AttributeType.INTS:{let r=[];for(let n=0;n<e.intsLength();n++)r.push(e.ints(n));return r}case Mn.AttributeType.STRINGS:{let r=[];for(let n=0;n<e.stringsLength();n++)r.push(e.strings(n));return r}case Mn.AttributeType.TENSORS:{let r=[];for(let n=0;n<e.tensorsLength();n++)r.push(e.tensors(n));return r}default:throw new Error(`unsupported attribute type: ${Mn.AttributeType[e.type()]}`)}}}}),Km,cc,L1,xi,Qm,XI,oG=Y(()=>{"use strict";nG(),Ah(),Km=lu(Cc()),pu(),gt(),cc=Et.experimental.fbs,L1={from:(t,e)=>new XI(t,e)},xi=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=Nn.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},Qm=class{constructor(t,e){t instanceof Km.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new k1(t.attribute)):t instanceof cc.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new k1(Nn.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},XI=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Km.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof cc.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!t.input)throw new Error("missing information in graph: input");let n=[];for(let i of t.input){if(e.has(i.name))throw new Error(`duplicated input name: ${i.name}`);let a=this._allData.push(new xi(i))-1;e.set(i.name,a),n.push(i.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let i of t.initializer){let a=e.get(i.name);if(a===void 0){let u=new xi;u.type={shape:{dims:Nn.tensorDimsFromProto(i.dims)},tensorType:Nn.tensorDataTypeFromProto(i.dataType)},a=this._allData.push(u)-1,e.set(i.name,a)}this._allData[a]._from=-1,this._allData[a].tensor=Rn.fromProto(i)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(n[i]));if(!t.output)throw new Error("missing information in graph: output");for(let i of t.output){if(e.has(i.name))throw new Error(`duplicated output name: ${i.name}`);let a=this._allData.push(new xi(i))-1;e.set(i.name,a),this._allOutputIndices.push(a),this._allOutputNames.push(i.name)}if(!t.node)throw new Error("missing information in graph: node");for(let i of t.node){if(!i.name)for(let u=0;;u++){let s=`unnamed_${i.opType}_${u}`;if(!r.has(s)){i.name=s;break}}if(r.has(i.name))throw new Error(`duplicated node name: ${i.name}`);let a=this._nodes.push(new Qm(i))-1;r.set(i.name,a)}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.node[i];if(!u.output)throw new Error(`missing output for node: ${u.name}`);for(let s of u.output){let l=e.get(s);if(typeof l>"u"&&(l=this._allData.push(new xi)-1,e.set(s,l)),a.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=i,u.opType==="Constant"){if(!u.attribute||u.attribute.length!==1||!u.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!u.output||u.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=Rn.fromProto(u.attribute[0].t)}}}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.node[i];if(!u.input)throw new Error(`missing input for node: ${u.name}`);for(let s of u.input){let l=e.get(s);if(typeof l>"u"){if(s===""&&(u.input.length===3||u.input.length===4)&&u.opType==="Resize")continue;throw new Error(`unrecognized input '${s}' for node: ${u.name}`)}a.inputs.push(l),this._allData[l]._to.push(i)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,n=[];for(let i=0;i<t.inputsLength();i++){let a=t.inputs(i);if(e.has(a))throw new Error(`duplicated input name: ${a}`);for(let u=0;u<t.nodeArgsLength();u++)if(t.nodeArgs(u)?.name()===a){let s=new xi;if(t.nodeArgs(u)?.type()?.valueType()!==cc.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let l=t.nodeArgs(u).type().value(new cc.TensorTypeAndShape),o=Nn.tensorDataTypeFromProto(l.elemType()),c=l.shape(),f=[];for(let h=0;h<c.dimLength();h++)f.push(Ho.longToNumber(c.dim(h).value().dimValue()));s.type={shape:{dims:f},tensorType:o};let d=this._allData.push(s)-1;e.set(a,d),n.push(a)}}for(let i=0;i<t.initializersLength();i++){let a=t.initializers(i),u=e.get(a.name());if(u===void 0){let s=new xi,l=Nn.tensorDimsFromORTFormat(a),o=Nn.tensorDataTypeFromProto(a.dataType());s.type={shape:{dims:l},tensorType:o},u=this._allData.push(s)-1,e.set(a.name(),u)}this._allData[u]._from=-1,this._allData[u].tensor=Rn.fromOrtTensor(a)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(n[i]));for(let i=0;i<t.outputsLength();i++){let a=t.outputs(i);if(e.has(a))throw new Error(`duplicated output name: ${a}`);let u=this._allData.push(new xi)-1;e.set(a,u),this._allOutputIndices.push(u),this._allOutputNames.push(a)}if(!t.nodes)throw new Error("missing information in graph: node");for(let i=0;i<t.nodesLength();i++){let a=t.nodes(i),u=a.name();if(!u)for(let l=0;u=`unnamed_${a.opType()}_${l}`,!!r.has(u);l++);if(r.has(u))throw new Error(`duplicated node name: ${u}`);let s=this._nodes.push(new Qm(a,u))-1;r.set(u,s)}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.nodes(i);if(u==null)throw new Error(`No node exists at index ${i}`);if(u?.outputsLength()===0)throw new Error(`missing output for node: ${u.name}`);for(let s=0;s<u?.outputsLength();s++){let l=u?.outputs(s),o=e.get(l);if(typeof o>"u"&&(o=this._allData.push(new xi)-1,e.set(l,o)),a.outputs.push(o),this._allData[o]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${o}`);if(this._allData[o]._from=i,u.opType()==="Constant"){if(u.attributesLength()!==1||!u.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(u.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=Rn.fromOrtTensor(u.attributes(0).t())}}}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.nodes(i);if(u.inputsLength()===0)throw new Error(`missing input for node: ${u.name}`);for(let s=0;s<u.inputsLength();s++){let l=u.inputs(s),o=e.get(l);if(typeof o>"u")throw new Error(`unrecognized input '${l}' for node: ${u.name()}`);a.inputs.push(o),this._allData[o]._to.push(i)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(n=>{this._allData[n]._to.forEach(i=>{t.add(i)})});let e=Array.from(t),r=new Array(this._nodes.length).fill("white");for(;e.length>0;){let n=e.pop();r[n]==="gray"?r[n]="black":(e.push(n),r[n]="gray",this._nodes[n].outputs.forEach(i=>{let a=this._allData[i];if(typeof a.tensor<"u")throw new Error("node outputs should not be initialized");if(a._from!==n)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach(u=>{if(r[u]==="gray")throw new Error("model graph is cyclic");r[u]==="white"&&e.push(u)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),r=0;for(let n=0;n<this._nodes.length;n++)e[n]=r,this._nodes[n].executeNode?(r!==n&&(this._nodes[r]=this._nodes[n]),r++):this._nodes[n].outputs.forEach(i=>{this._allData[i]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let n=0;n<this._allData.length;n++){let i=this._allData[n];i._from!==void 0&&i._from!==-1&&i._from!==-2&&(i._from=e[i._from]);for(let a=0;a<i._to.length;a++)if(i._to[a]>=0)i._to[a]=e[i._to[a]];else throw new Error("Trying to update a removed node")}t=0;for(let n=0;n<this._allData.length;n++){if(this._allData[n].from===-2&&this._allOutputIndices.indexOf(n+t)===-1){t++,this._allData.splice(n,1),n--;continue}if(t>0){let i=-1;this._allData[n].from!==void 0&&this._allData[n].from!==-1?(i=this._nodes[this._allData[n].from].outputs.indexOf(n+t),i!==-1&&(this._nodes[this._allData[n].from].outputs[i]=n)):(i=this._allInputIndices.indexOf(n+t),i!==-1&&(this._allInputIndices[i]=n)),this._allData[n].to.forEach(a=>{i=this._nodes[a].inputs.indexOf(n+t),i!==-1&&(this._nodes[a].inputs[i]=n)}),this._allData[n].to.length===0&&(i=this._allOutputIndices.indexOf(n+t),i!==-1&&(this._allOutputIndices[i]=n))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let u=1;u<e.outputs.length;u++)if(this._allData[e.outputs[u]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let r=e.inputs[0],n=e.outputs[0],i=this._allData[n].to;for(let u=0;u<e.inputs.length;u++){let s=this._allData[e.inputs[u]].to.indexOf(t);if(s===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[u]].to.splice(s,1)}this._allData[n]._to=[];let a=this._allOutputIndices.indexOf(n);if(a!==-1&&(this._allOutputIndices[a]=r),i&&i.length>0)for(let u of i){let s=this._nodes[u].inputs.indexOf(n);if(s===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[u].inputs[s]=r,this._allData[r].to.push(u)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let r=this._nodes[e[0]];if(r.opType==="Clip")if(r.inputs.length===1)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[Ac,Sc])}else if(r.inputs.length>=3&&this._allData[r.inputs[1]].tensor!==void 0&&this._allData[r.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",r.opType),this.deleteNode(e[0])}}}}}),YI,ZI,wC,iG=Y(()=>{"use strict";W1(),oG(),Ah(),YI=lu(Cc()),gt(),ZI=Et.experimental.fbs,wC=class{constructor(){}load(t,e,r){if(!r)try{this.loadFromOnnxFormat(t,e);return}catch(n){if(r!==void 0)throw n}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){let r=YI.onnx.ModelProto.decode(t);if(Ho.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(n=>({domain:n.domain,version:Ho.longToNumber(n.version)})),this._graph=L1.from(r.graph,e)}loadFromOrtFormat(t,e){let r=new $.ByteBuffer(t),n=ZI.InferenceSession.getRootAsInferenceSession(r).model();if(Ho.longToNumber(n.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let i=0;i<n.opsetImportLength();i++){let a=n.opsetImport(i);this._opsets.push({domain:a?.domain(),version:Ho.longToNumber(a.version())})}this._graph=L1.from(n.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),xC,aG=Y(()=>{"use strict";tG(),rG(),Io(),iG(),xC=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=MA.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(t,e,r){return U(this,null,function*(){yield this.profiler.event("session","Session.loadModel",()=>U(this,null,function*(){let n=yield yC(this.backendHint);if(this.sessionHandler=n.createSessionHandler(this.context),this._model=new wC,typeof t=="string"){let i=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let a=yield(void 0)(t);this.initialize(a,i)}else{let a=yield(yield fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),i)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let i=new Uint8Array(t,e||0,r||t.byteLength);this.initialize(i)}}))})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,r,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new bC(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(t){return U(this,null,function*(){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",()=>U(this,null,function*(){let e=this.normalizeAndValidateInputs(t),r=yield this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(r)}))})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let r=new Array(t.size),n=0;for(let i=0;i<e.length;++i){let a=t.get(e[i]);if(!a)throw new Error(`missing input tensor for: '${name}'`);r[n++]=a}t=r}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let r=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),i=new Array(r.length);for(let a=0;a<r.length;++a){let u=n[r[a]];i[a]=u.type.shape.dims,this.context.graphInputTypes.push(u.type.tensorType),this.context.graphInputDims.push(t[a].dims)}this.validateInputTensorDims(i,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let r=0;r<e.length;r++){let n=t[r],i=e[r].type;if(n!==i)throw new Error(`input tensor[${r}] check failed: expected type '${n}' but got ${i}`)}}validateInputTensorDims(t,e,r){for(let n=0;n<e.length;n++){let i=t[n],a=e[n].dims;if(!this.compareTensorDims(i,a,r))throw new Error(`input tensor[${n}] check failed: expected shape '[${i.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]&&(!r||t[n]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<e.length;++n)r.set(e[n],t[n]);return r}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let r=0;r<e.length;r++)this._ops[r]=this.sessionHandler.resolve(e[r],this._model.opsets,t)}}}),_C,sG=Y(()=>{"use strict";Go(),pu(),_C=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return U(this,null,function*(){})}run(t,e,r){return U(this,null,function*(){let n=new Map;for(let u in t)if(Object.hasOwnProperty.call(t,u)){let s=t[u];n.set(u,new Rn(s.dims,s.type,void 0,void 0,s.data))}let i=yield this.session.run(n),a={};return i.forEach((u,s)=>{a[s]=new Wr(u.type,u.data,u.dims)}),a})}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),EC={};hu(EC,{onnxjsBackend:()=>TC});var KI,TC,uG=Y(()=>{"use strict";aG(),sG(),KI=class{init(){return U(this,null,function*(){})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new xC(e);return typeof t=="string"?yield r.loadModel(t):yield r.loadModel(t),new _C(r)})}},TC=new KI}),ey={};hu(ey,{createReadStream:()=>SC,readFile:()=>IC,readFileSync:()=>AC});var IC,AC,SC,DC=Y(()=>{IC=void 0,AC=void 0,SC=void 0}),ty={};hu(ty,{join:()=>CC});var CC,OC=Y(()=>{CC=void 0}),lG=Gt((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){var a=i,u,s;a.ready=new Promise((w,T)=>{u=w,s=T});var l=Object.assign({},a),o="./this.program",c=typeof window=="object",f=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",p,m,v;if(d){var x=(DC(),Ja(ey)),y=(OC(),Ja(ty));h=f?y.dirname(h)+"/":__dirname+"/",p=(w,T)=>(w=At(w)?new URL(w):y.normalize(w),x.readFileSync(w,T?void 0:"utf8")),v=w=>(w=p(w,!0),w.buffer||(w=new Uint8Array(w)),w),m=(w,T,A,M=!0)=>{w=At(w)?new URL(w):y.normalize(w),x.readFile(w,M?void 0:"utf8",(G,Q)=>{G?A(G):T(M?Q.buffer:Q)})},!a.thisProgram&&1<process.argv.length&&(o=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(c||f)&&(f?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",p=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.send(null),T.responseText},f&&(v=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),m=(w,T,A)=>{var M=new XMLHttpRequest;M.open("GET",w,!0),M.responseType="arraybuffer",M.onload=()=>{M.status==200||M.status==0&&M.response?T(M.response):A()},M.onerror=A,M.send(null)});var _=console.log.bind(console),I=console.error.bind(console);Object.assign(a,l),l=null,typeof WebAssembly!="object"&&Ee("no native wasm support detected");var C,j=!1,z,W,k,X,ke;function me(){var w=C.buffer;a.HEAP8=z=new Int8Array(w),a.HEAP16=new Int16Array(w),a.HEAPU8=W=new Uint8Array(w),a.HEAPU16=new Uint16Array(w),a.HEAP32=k=new Int32Array(w),a.HEAPU32=X=new Uint32Array(w),a.HEAPF32=new Float32Array(w),a.HEAPF64=ke=new Float64Array(w)}var ye=[],Z=[],he=[],yt=0,qe=null,Ue=null;function Ee(w){throw w="Aborted("+w+")",I(w),j=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),s(w),w}var It=w=>w.startsWith("data:application/octet-stream;base64,"),At=w=>w.startsWith("file://"),Ft;if(Ft="ort-wasm.wasm",!It(Ft)){var vr=Ft;Ft=a.locateFile?a.locateFile(vr,h):h+vr}function Pt(w){if(v)return v(w);throw"both async and sync fetching of the wasm failed"}function hr(w){if(c||f){if(typeof fetch=="function"&&!At(w))return fetch(w,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+w+"'";return T.arrayBuffer()}).catch(()=>Pt(w));if(m)return new Promise((T,A)=>{m(w,M=>T(new Uint8Array(M)),A)})}return Promise.resolve().then(()=>Pt(w))}function Yt(w,T,A){return hr(w).then(M=>WebAssembly.instantiate(M,T)).then(M=>M).then(A,M=>{I(`failed to asynchronously prepare wasm: ${M}`),Ee(M)})}function jr(w,T){var A=Ft;return typeof WebAssembly.instantiateStreaming!="function"||It(A)||At(A)||d||typeof fetch!="function"?Yt(A,w,T):fetch(A,{credentials:"same-origin"}).then(M=>WebAssembly.instantiateStreaming(M,w).then(T,function(G){return I(`wasm streaming compile failed: ${G}`),I("falling back to ArrayBuffer instantiation"),Yt(A,w,T)}))}var Ae,Se={919888:(w,T,A,M)=>{if(typeof a>"u"||!a.za)return 1;if(w=Tr(w>>>0),w.startsWith("./")&&(w=w.substring(2)),w=a.za.get(w),!w)return 2;if(T>>>=0,A>>>=0,T+A>w.byteLength)return 3;try{return W.set(w.subarray(T,T+A),M>>>0>>>0),0}catch{return 4}}};function Er(w){this.xa=w-24,this.Ha=function(T){X[this.xa+4>>>2>>>0]=T},this.Ga=function(T){X[this.xa+8>>>2>>>0]=T},this.Aa=function(T,A){this.Fa(),this.Ha(T),this.Ga(A)},this.Fa=function(){X[this.xa+16>>>2>>>0]=0}}var er=0,yn=0,vn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,to=(w,T,A)=>{T>>>=0;var M=T+A;for(A=T;w[A]&&!(A>=M);)++A;if(16<A-T&&w.buffer&&vn)return vn.decode(w.subarray(T,A));for(M="";T<A;){var G=w[T++];if(G&128){var Q=w[T++]&63;if((G&224)==192)M+=String.fromCharCode((G&31)<<6|Q);else{var le=w[T++]&63;G=(G&240)==224?(G&15)<<12|Q<<6|le:(G&7)<<18|Q<<12|le<<6|w[T++]&63,65536>G?M+=String.fromCharCode(G):(G-=65536,M+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else M+=String.fromCharCode(G)}return M},Tr=(w,T)=>(w>>>=0)?to(W,w,T):"",Ir=w=>{for(var T=0,A=0;A<w.length;++A){var M=w.charCodeAt(A);127>=M?T++:2047>=M?T+=2:55296<=M&&57343>=M?(T+=4,++A):T+=3}return T},bn=(w,T,A,M)=>{if(A>>>=0,!(0<M))return 0;var G=A;M=A+M-1;for(var Q=0;Q<w.length;++Q){var le=w.charCodeAt(Q);if(55296<=le&&57343>=le){var Ve=w.charCodeAt(++Q);le=65536+((le&1023)<<10)|Ve&1023}if(127>=le){if(A>=M)break;T[A++>>>0]=le}else{if(2047>=le){if(A+1>=M)break;T[A++>>>0]=192|le>>6}else{if(65535>=le){if(A+2>=M)break;T[A++>>>0]=224|le>>12}else{if(A+3>=M)break;T[A++>>>0]=240|le>>18,T[A++>>>0]=128|le>>12&63}T[A++>>>0]=128|le>>6&63}T[A++>>>0]=128|le&63}}return T[A>>>0]=0,A-G},Ur=w=>w%4===0&&(w%100!==0||w%400===0),ro=[0,31,60,91,121,152,182,213,244,274,305,335],Yo=[0,31,59,90,120,151,181,212,243,273,304,334],Ar=w=>{var T=Ir(w)+1,A=Ko(T);return A&&bn(w,W,A,T),A},wn=[],Hr={},xn=()=>{if(!_n){var w={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o||"./this.program"},T;for(T in Hr)Hr[T]===void 0?delete w[T]:w[T]=Hr[T];var A=[];for(T in w)A.push(`${T}=${w[T]}`);_n=A}return _n},_n,en=[null,[],[]],no=[31,29,31,30,31,30,31,31,30,31,30,31],oo=[31,28,31,30,31,30,31,31,30,31,30,31];function En(w){var T=Array(Ir(w)+1);return bn(w,T,0,T.length),T}function Zo(w,T,A,M){function G(O,pe,xe){for(O=typeof O=="number"?O.toString():O||"";O.length<pe;)O=xe[0]+O;return O}function Q(O,pe){return G(O,pe,"0")}function le(O,pe){function xe(lo){return 0>lo?-1:0<lo?1:0}var pr;return(pr=xe(O.getFullYear()-pe.getFullYear()))===0&&(pr=xe(O.getMonth()-pe.getMonth()))===0&&(pr=xe(O.getDate()-pe.getDate())),pr}function Ve(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function ct(O){var pe=O.ta;for(O=new Date(new Date(O.ua+1900,0,1).getTime());0<pe;){var xe=O.getMonth(),pr=(Ur(O.getFullYear())?no:oo)[xe];if(pe>pr-O.getDate())pe-=pr-O.getDate()+1,O.setDate(1),11>xe?O.setMonth(xe+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else{O.setDate(O.getDate()+pe);break}}return xe=new Date(O.getFullYear()+1,0,4),pe=Ve(new Date(O.getFullYear(),0,4)),xe=Ve(xe),0>=le(pe,O)?0>=le(xe,O)?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}w>>>=0,T>>>=0,A>>>=0,M>>>=0;var Xe=X[M+40>>>2>>>0];M={Da:k[M>>>2>>>0],Ca:k[M+4>>>2>>>0],va:k[M+8>>>2>>>0],ya:k[M+12>>>2>>>0],wa:k[M+16>>>2>>>0],ua:k[M+20>>>2>>>0],oa:k[M+24>>>2>>>0],ta:k[M+28>>>2>>>0],Ia:k[M+32>>>2>>>0],Ba:k[M+36>>>2>>>0],Ea:Xe?Tr(Xe):""},A=Tr(A),Xe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ye in Xe)A=A.replace(new RegExp(Ye,"g"),Xe[Ye]);var so="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),uo="January February March April May June July August September October November December".split(" ");Xe={"%a":O=>so[O.oa].substring(0,3),"%A":O=>so[O.oa],"%b":O=>uo[O.wa].substring(0,3),"%B":O=>uo[O.wa],"%C":O=>Q((O.ua+1900)/100|0,2),"%d":O=>Q(O.ya,2),"%e":O=>G(O.ya,2," "),"%g":O=>ct(O).toString().substring(2),"%G":O=>ct(O),"%H":O=>Q(O.va,2),"%I":O=>(O=O.va,O==0?O=12:12<O&&(O-=12),Q(O,2)),"%j":O=>{for(var pe=0,xe=0;xe<=O.wa-1;pe+=(Ur(O.ua+1900)?no:oo)[xe++]);return Q(O.ya+pe,3)},"%m":O=>Q(O.wa+1,2),"%M":O=>Q(O.Ca,2),"%n":()=>`
`,"%p":O=>0<=O.va&&12>O.va?"AM":"PM","%S":O=>Q(O.Da,2),"%t":()=>"	","%u":O=>O.oa||7,"%U":O=>Q(Math.floor((O.ta+7-O.oa)/7),2),"%V":O=>{var pe=Math.floor((O.ta+7-(O.oa+6)%7)/7);if(2>=(O.oa+371-O.ta-2)%7&&pe++,pe)pe==53&&(xe=(O.oa+371-O.ta)%7,xe==4||xe==3&&Ur(O.ua)||(pe=1));else{pe=52;var xe=(O.oa+7-O.ta-1)%7;(xe==4||xe==5&&Ur(O.ua%400-1))&&pe++}return Q(pe,2)},"%w":O=>O.oa,"%W":O=>Q(Math.floor((O.ta+7-(O.oa+6)%7)/7),2),"%y":O=>(O.ua+1900).toString().substring(2),"%Y":O=>O.ua+1900,"%z":O=>{O=O.Ba;var pe=0<=O;return O=Math.abs(O)/60,(pe?"+":"-")+("0000"+(O/60*100+O%60)).slice(-4)},"%Z":O=>O.Ea,"%%":()=>"%"},A=A.replace(/%%/g,"\0\0");for(Ye in Xe)A.includes(Ye)&&(A=A.replace(new RegExp(Ye,"g"),Xe[Ye](M)));return A=A.replace(/\0\0/g,"%"),Ye=En(A),Ye.length>T?0:(z.set(Ye,w>>>0),Ye.length-1)}var be={a:function(w,T,A){throw w>>>=0,new Er(w).Aa(T>>>0,A>>>0),er=w,yn++,er},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getUTCSeconds(),k[A+4>>>2>>>0]=w.getUTCMinutes(),k[A+8>>>2>>>0]=w.getUTCHours(),k[A+12>>>2>>>0]=w.getUTCDate(),k[A+16>>>2>>>0]=w.getUTCMonth(),k[A+20>>>2>>>0]=w.getUTCFullYear()-1900,k[A+24>>>2>>>0]=w.getUTCDay(),k[A+28>>>2>>>0]=(w.getTime()-Date.UTC(w.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getSeconds(),k[A+4>>>2>>>0]=w.getMinutes(),k[A+8>>>2>>>0]=w.getHours(),k[A+12>>>2>>>0]=w.getDate(),k[A+16>>>2>>>0]=w.getMonth(),k[A+20>>>2>>>0]=w.getFullYear()-1900,k[A+24>>>2>>>0]=w.getDay(),k[A+28>>>2>>>0]=(Ur(w.getFullYear())?ro:Yo)[w.getMonth()]+w.getDate()-1|0,k[A+36>>>2>>>0]=-(60*w.getTimezoneOffset()),T=new Date(w.getFullYear(),6,1).getTimezoneOffset();var M=new Date(w.getFullYear(),0,1).getTimezoneOffset();k[A+32>>>2>>>0]=(T!=M&&w.getTimezoneOffset()==Math.min(M,T))|0},p:function(w){w>>>=0;var T=new Date(k[w+20>>>2>>>0]+1900,k[w+16>>>2>>>0],k[w+12>>>2>>>0],k[w+8>>>2>>>0],k[w+4>>>2>>>0],k[w>>>2>>>0],0),A=k[w+32>>>2>>>0],M=T.getTimezoneOffset(),G=new Date(T.getFullYear(),6,1).getTimezoneOffset(),Q=new Date(T.getFullYear(),0,1).getTimezoneOffset(),le=Math.min(Q,G);return 0>A?k[w+32>>>2>>>0]=+(G!=Q&&le==M):0<A!=(le==M)&&(G=Math.max(Q,G),T.setTime(T.getTime()+6e4*((0<A?le:G)-M))),k[w+24>>>2>>>0]=T.getDay(),k[w+28>>>2>>>0]=(Ur(T.getFullYear())?ro:Yo)[T.getMonth()]+T.getDate()-1|0,k[w>>>2>>>0]=T.getSeconds(),k[w+4>>>2>>>0]=T.getMinutes(),k[w+8>>>2>>>0]=T.getHours(),k[w+12>>>2>>>0]=T.getDate(),k[w+16>>>2>>>0]=T.getMonth(),k[w+20>>>2>>>0]=T.getYear(),w=T.getTime(),isNaN(w)?(k[Tn()>>>2>>>0]=61,w=-1):w/=1e3,io((Ae=w,1<=+Math.abs(Ae)?0<Ae?+Math.floor(Ae/4294967296)>>>0:~~+Math.ceil((Ae-+(~~Ae>>>0))/4294967296)>>>0:0)),w>>>0},l:function(){return-52},m:function(){},t:function(w,T,A){function M(ct){return(ct=ct.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ct[1]:"GMT"}A>>>=0;var G=new Date().getFullYear(),Q=new Date(G,0,1),le=new Date(G,6,1);G=Q.getTimezoneOffset();var Ve=le.getTimezoneOffset();X[w>>>0>>>2>>>0]=60*Math.max(G,Ve),k[T>>>0>>>2>>>0]=+(G!=Ve),w=M(Q),T=M(le),w=Ar(w),T=Ar(T),Ve<G?(X[A>>>2>>>0]=w,X[A+4>>>2>>>0]=T):(X[A>>>2>>>0]=T,X[A+4>>>2>>>0]=w)},d:()=>{Ee("")},B:function(w,T,A){w>>>=0,T>>>=0,A>>>=0,wn.length=0;for(var M;M=W[T++>>>0];){var G=M!=105;G&=M!=112,A+=G&&A%8?4:0,wn.push(M==112?X[A>>>2>>>0]:M==105?k[A>>>2>>>0]:ke[A>>>3>>>0]),A+=G?8:4}return Se[w].apply(null,wn)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(w,T,A){return T>>>=0,W.copyWithin(w>>>0>>>0,T>>>0,T+(A>>>0)>>>0)},s:function(w){w>>>=0;var T=W.length;if(4294901760<w)return!1;for(var A=1;4>=A;A*=2){var M=T*(1+.2/A);M=Math.min(M,w+100663296);var G=Math;M=Math.max(w,M);e:{G=(G.min.call(G,4294901760,M+(65536-M%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(G),me();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},C:function(w,T){w>>>=0,T>>>=0;var A=0;return xn().forEach((M,G)=>{var Q=T+A;for(G=X[w+4*G>>>2>>>0]=Q,Q=0;Q<M.length;++Q)z[G++>>>0>>>0]=M.charCodeAt(Q);z[G>>>0>>>0]=0,A+=M.length+1}),0},D:function(w,T){w>>>=0,T>>>=0;var A=xn();X[w>>>2>>>0]=A.length;var M=0;return A.forEach(G=>M+=G.length+1),X[T>>>2>>>0]=M,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(w,T,A,M){T>>>=0,A>>>=0,M>>>=0;for(var G=0,Q=0;Q<A;Q++){var le=X[T>>>2>>>0],Ve=X[T+4>>>2>>>0];T+=8;for(var ct=0;ct<Ve;ct++){var Xe=W[le+ct>>>0],Ye=en[w];Xe===0||Xe===10?((w===1?_:I)(to(Ye,0)),Ye.length=0):Ye.push(Xe)}G+=Ve}return X[M>>>2>>>0]=G,0},r:Zo,c:function(w,T,A,M){return Zo(w>>>0,T>>>0,A>>>0,M>>>0)}},ie=function(){function w(A){return ie=A.exports,ie=Jo(),C=ie.K,me(),Z.unshift(ie.L),yt--,yt==0&&(qe!==null&&(clearInterval(qe),qe=null),Ue&&(A=Ue,Ue=null,A())),ie}var T={a:be};if(yt++,a.instantiateWasm)try{return a.instantiateWasm(T,w)}catch(A){I(`Module.instantiateWasm callback failed with error: ${A}`),s(A)}return jr(T,function(A){w(A.instance)}).catch(s),{}}();a._OrtInit=(w,T)=>(a._OrtInit=ie.M)(w,T),a._OrtGetLastError=(w,T)=>(a._OrtGetLastError=ie.N)(w,T),a._OrtCreateSessionOptions=(w,T,A,M,G,Q,le,Ve,ct,Xe)=>(a._OrtCreateSessionOptions=ie.O)(w,T,A,M,G,Q,le,Ve,ct,Xe),a._OrtAppendExecutionProvider=(w,T)=>(a._OrtAppendExecutionProvider=ie.P)(w,T),a._OrtAddFreeDimensionOverride=(w,T,A)=>(a._OrtAddFreeDimensionOverride=ie.Q)(w,T,A),a._OrtAddSessionConfigEntry=(w,T,A)=>(a._OrtAddSessionConfigEntry=ie.R)(w,T,A),a._OrtReleaseSessionOptions=w=>(a._OrtReleaseSessionOptions=ie.S)(w),a._OrtCreateSession=(w,T,A)=>(a._OrtCreateSession=ie.T)(w,T,A),a._OrtReleaseSession=w=>(a._OrtReleaseSession=ie.U)(w),a._OrtGetInputOutputCount=(w,T,A)=>(a._OrtGetInputOutputCount=ie.V)(w,T,A),a._OrtGetInputName=(w,T)=>(a._OrtGetInputName=ie.W)(w,T),a._OrtGetOutputName=(w,T)=>(a._OrtGetOutputName=ie.X)(w,T),a._OrtFree=w=>(a._OrtFree=ie.Y)(w),a._OrtCreateTensor=(w,T,A,M,G,Q)=>(a._OrtCreateTensor=ie.Z)(w,T,A,M,G,Q),a._OrtGetTensorData=(w,T,A,M,G)=>(a._OrtGetTensorData=ie._)(w,T,A,M,G),a._OrtReleaseTensor=w=>(a._OrtReleaseTensor=ie.$)(w),a._OrtCreateRunOptions=(w,T,A,M)=>(a._OrtCreateRunOptions=ie.aa)(w,T,A,M),a._OrtAddRunConfigEntry=(w,T,A)=>(a._OrtAddRunConfigEntry=ie.ba)(w,T,A),a._OrtReleaseRunOptions=w=>(a._OrtReleaseRunOptions=ie.ca)(w),a._OrtCreateBinding=w=>(a._OrtCreateBinding=ie.da)(w),a._OrtBindInput=(w,T,A)=>(a._OrtBindInput=ie.ea)(w,T,A),a._OrtBindOutput=(w,T,A,M)=>(a._OrtBindOutput=ie.fa)(w,T,A,M),a._OrtClearBoundOutputs=w=>(a._OrtClearBoundOutputs=ie.ga)(w),a._OrtReleaseBinding=w=>(a._OrtReleaseBinding=ie.ha)(w),a._OrtRunWithBinding=(w,T,A,M,G)=>(a._OrtRunWithBinding=ie.ia)(w,T,A,M,G),a._OrtRun=(w,T,A,M,G,Q,le,Ve)=>(a._OrtRun=ie.ja)(w,T,A,M,G,Q,le,Ve),a._OrtEndProfiling=w=>(a._OrtEndProfiling=ie.ka)(w);var Tn=()=>(Tn=ie.la)(),Ko=a._malloc=w=>(Ko=a._malloc=ie.ma)(w);a._free=w=>(a._free=ie.na)(w);var io=w=>(io=ie.pa)(w),Qo=()=>(Qo=ie.qa)(),te=w=>(te=ie.ra)(w),tn=w=>(tn=ie.sa)(w);function Jo(){var w=ie;w=Object.assign({},w);var T=M=>()=>M()>>>0,A=M=>G=>M(G)>>>0;return w.la=T(w.la),w.ma=A(w.ma),w.qa=T(w.qa),w.sa=A(w.sa),w}a.stackAlloc=tn,a.stackSave=Qo,a.stackRestore=te,a.UTF8ToString=Tr,a.stringToUTF8=(w,T,A)=>bn(w,W,T,A),a.lengthBytesUTF8=Ir;var Sr;Ue=function w(){Sr||ao(),Sr||(Ue=w)};function ao(){if(!(0<yt)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var w=a.preRun.shift();ye.unshift(w)}for(;0<ye.length;)ye.shift()(a);if(!(0<yt||Sr||(Sr=!0,a.calledRun=!0,j))){for(;0<Z.length;)Z.shift()(a);for(u(a);0<he.length;)he.shift()(a)}}}return ao(),i.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),cG=Gt(()=>{}),fG=Gt(()=>{}),PC={};hu(PC,{cpus:()=>MC});var MC,dG=Y(()=>{MC=void 0}),hG=Gt((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){function a(){return he.buffer!=Ee.buffer&&Pt(),Ee}function u(){return he.buffer!=Ee.buffer&&Pt(),It}function s(){return he.buffer!=Ee.buffer&&Pt(),At}function l(){return he.buffer!=Ee.buffer&&Pt(),Ft}function o(){return he.buffer!=Ee.buffer&&Pt(),vr}var c=i,f,d;c.ready=new Promise((g,b)=>{f=g,d=b});var h=Object.assign({},c),p="./this.program",m=(g,b)=>{throw b},v=typeof window=="object",x=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=c.ENVIRONMENT_IS_PTHREAD||!1,I="";function C(g){return c.locateFile?c.locateFile(g,I):I+g}var j,z,W;if(y){var k=(DC(),Ja(ey)),X=(OC(),Ja(ty));I=x?X.dirname(I)+"/":__dirname+"/",j=(b,E)=>(b=Tr(b)?new URL(b):X.normalize(b),k.readFileSync(b,E?void 0:"utf8")),W=b=>(b=j(b,!0),b.buffer||(b=new Uint8Array(b)),b),z=(b,E,S,R=!0)=>{b=Tr(b)?new URL(b):X.normalize(b),k.readFile(b,R?void 0:"utf8",(F,q)=>{F?S(F):E(R?q.buffer:q)})},!c.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(b,E)=>{throw process.exitCode=b,E},c.inspect=()=>"[Emscripten Module object]";let g;try{g=cG()}catch(b){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),b}global.Worker=g.Worker}else(v||x)&&(x?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),typeof n<"u"&&n&&(I=n),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",y||(j=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.send(null),b.responseText},x&&(W=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),z=(g,b,E)=>{var S=new XMLHttpRequest;S.open("GET",g,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?b(S.response):E()},S.onerror=E,S.send(null)}));y&&typeof performance>"u"&&(global.performance=fG().performance);var ke=console.log.bind(console),me=console.error.bind(console);y&&(ke=(...g)=>k.writeSync(1,g.join(" ")+`
`),me=(...g)=>k.writeSync(2,g.join(" ")+`
`));var ye=ke,Z=me;Object.assign(c,h),h=null,typeof WebAssembly!="object"&&vn("no native wasm support detected");var he,yt,qe=!1,Ue,Ee,It,At,Ft,vr;function Pt(){var g=he.buffer;c.HEAP8=Ee=new Int8Array(g),c.HEAP16=new Int16Array(g),c.HEAPU8=It=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAP32=At=new Int32Array(g),c.HEAPU32=Ft=new Uint32Array(g),c.HEAPF32=new Float32Array(g),c.HEAPF64=vr=new Float64Array(g)}var hr=16777216;if(_)he=c.wasmMemory;else if(c.wasmMemory)he=c.wasmMemory;else if(he=new WebAssembly.Memory({initial:hr/65536,maximum:65536,shared:!0}),!(he.buffer instanceof SharedArrayBuffer))throw Z("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&Z("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Pt(),hr=he.buffer.byteLength;var Yt=[],jr=[],Ae=[],Se=0,Er=null,er=null;function yn(){if(Se--,Se==0&&(Er!==null&&(clearInterval(Er),Er=null),er)){var g=er;er=null,g()}}function vn(g){throw g="Aborted("+g+")",Z(g),qe=!0,Ue=1,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),d(g),g}var to=g=>g.startsWith("data:application/octet-stream;base64,"),Tr=g=>g.startsWith("file://"),Ir;Ir="ort-wasm-threaded.wasm",to(Ir)||(Ir=C(Ir));function bn(g){if(W)return W(g);throw"both async and sync fetching of the wasm failed"}function Ur(g){if(v||x){if(typeof fetch=="function"&&!Tr(g))return fetch(g,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+g+"'";return b.arrayBuffer()}).catch(()=>bn(g));if(z)return new Promise((b,E)=>{z(g,S=>b(new Uint8Array(S)),E)})}return Promise.resolve().then(()=>bn(g))}function ro(g,b,E){return Ur(g).then(S=>WebAssembly.instantiate(S,b)).then(S=>S).then(E,S=>{Z(`failed to asynchronously prepare wasm: ${S}`),vn(S)})}function Yo(g,b){var E=Ir;return typeof WebAssembly.instantiateStreaming!="function"||to(E)||Tr(E)||y||typeof fetch!="function"?ro(E,g,b):fetch(E,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,g).then(b,function(R){return Z(`wasm streaming compile failed: ${R}`),Z("falling back to ArrayBuffer instantiation"),ro(E,g,b)}))}var Ar,wn={921276:(g,b,E,S)=>{if(typeof c>"u"||!c.cb)return 1;if(g=En(g>>>0),g.startsWith("./")&&(g=g.substring(2)),g=c.cb.get(g),!g)return 2;if(b>>>=0,E>>>=0,S>>>=0,b+E>g.byteLength)return 3;try{return u().set(g.subarray(b,b+E),S>>>0),0}catch{return 4}}};function Hr(g){this.name="ExitStatus",this.message=`Program terminated with exit(${g})`,this.status=g}var xn=g=>{g.terminate(),g.onmessage=()=>{}},_n=g=>{te.Pa.length==0&&(io(),te.Ya(te.Pa[0]));var b=te.Pa.pop();if(!b)return 6;te.Qa.push(b),te.Ma[g.Oa]=b,b.Oa=g.Oa;var E={cmd:"run",start_routine:g.kb,arg:g.hb,pthread_ptr:g.Oa};return y&&b.unref(),b.postMessage(E,g.qb),0},en=0,no=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,oo=(g,b,E)=>{b>>>=0;var S=b+E;for(E=b;g[E]&&!(E>=S);)++E;if(16<E-b&&g.buffer&&no)return no.decode(g.buffer instanceof SharedArrayBuffer?g.slice(b,E):g.subarray(b,E));for(S="";b<E;){var R=g[b++];if(R&128){var F=g[b++]&63;if((R&224)==192)S+=String.fromCharCode((R&31)<<6|F);else{var q=g[b++]&63;R=(R&240)==224?(R&15)<<12|F<<6|q:(R&7)<<18|F<<12|q<<6|g[b++]&63,65536>R?S+=String.fromCharCode(R):(R-=65536,S+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else S+=String.fromCharCode(R)}return S},En=(g,b)=>(g>>>=0)?oo(u(),g,b):"",Zo=g=>{var b=ma();return g=g(),ri(b),g};function be(g,b){var E=arguments.length-2,S=arguments;return Zo(()=>{for(var R=ya(8*E),F=R>>>3,q=0;q<E;q++){var De=S[2+q];o()[F+q>>>0]=De}return tl(g,E,R,b)})}function ie(g){if(_)return be(0,1,g);Ue=g,0<en||(te.lb(),c.onExit?.(g),qe=!0),m(g,new Hr(g))}var Tn=g=>{if(Ue=g,_)throw Jo(g),"unwind";ie(g)};function Ko(){for(var g=c.numThreads;g--;)io();Yt.unshift(()=>{Se++,Qo(()=>yn())})}function io(){var g=C("ort-wasm-threaded.worker.js");g=new Worker(g),te.Pa.push(g)}function Qo(g){_?g():Promise.all(te.Pa.map(te.Ya)).then(g)}var te={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(te.receiveObjectTransfer=te.jb,te.threadInitTLS=te.ab,te.setExitStatus=te.$a):Ko()},$a:g=>Ue=g,tb:["$terminateWorker"],lb:()=>{for(var g of te.Qa)xn(g);for(g of te.Pa)xn(g);te.Pa=[],te.Qa=[],te.Ma=[]},Za:g=>{var b=g.Oa;delete te.Ma[b],te.Pa.push(g),te.Qa.splice(te.Qa.indexOf(g),1),g.Oa=0,pa(b)},jb(){},ab(){te.bb.forEach(g=>g())},Ya:g=>new Promise(b=>{g.onmessage=F=>{F=F.data;var q=F.cmd;if(F.targetThread&&F.targetThread!=ti()){var De=te.Ma[F.targetThread];De?De.postMessage(F,F.transferList):Z(`Internal error! Worker sent a message "${q}" to target pthread ${F.targetThread}, but that thread no longer exists!`)}else q==="checkMailbox"?ei():q==="spawnThread"?_n(F):q==="cleanupThread"?te.Za(te.Ma[F.thread]):q==="killThread"?(F=F.thread,q=te.Ma[F],delete te.Ma[F],xn(q),pa(F),te.Qa.splice(te.Qa.indexOf(q),1),q.Oa=0):q==="cancelThread"?te.Ma[F.thread].postMessage({cmd:"cancel"}):q==="loaded"?(g.loaded=!0,y&&!g.Oa&&g.unref(),b(g)):q==="alert"?alert(`Thread ${F.threadId}: ${F.text}`):F.target==="setimmediate"?g.postMessage(F):q==="callHandler"?c[F.handler](...F.args):q&&Z(`worker sent an unknown command ${q}`)},g.onerror=F=>{throw Z(`worker sent an error! ${F.filename}:${F.lineno}: ${F.message}`),F},y&&(g.on("message",F=>g.onmessage({data:F})),g.on("error",F=>g.onerror(F)));var E=[],S=["onExit"],R;for(R of S)c.hasOwnProperty(R)&&E.push(R);g.postMessage({cmd:"load",handlers:E,urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:he,wasmModule:yt})})};c.PThread=te;var tn=g=>{for(;0<g.length;)g.shift()(c)};c.establishStackSpace=()=>{var g=ti(),b=l()[g+52>>>2>>>0];g=l()[g+56>>>2>>>0],ol(b,b-g),ri(b)};function Jo(g){if(_)return be(1,0,g);Tn(g)}var Sr=[],ao;c.invokeEntryPoint=(g,b)=>{var E=Sr[g];E||(g>=Sr.length&&(Sr.length=g+1),Sr[g]=E=ao.get(g)),g=E(b),0<en?te.$a(g):ga(g)};function w(g){this.Va=g-24,this.gb=function(b){l()[this.Va+4>>>2>>>0]=b},this.fb=function(b){l()[this.Va+8>>>2>>>0]=b},this.Wa=function(b,E){this.eb(),this.gb(b),this.fb(E)},this.eb=function(){l()[this.Va+16>>>2>>>0]=0}}var T=0,A=0;function M(g,b,E,S){return _?be(2,1,g,b,E,S):G(g,b,E,S)}function G(g,b,E,S){if(g>>>=0,b>>>=0,E>>>=0,S>>>=0,typeof SharedArrayBuffer>"u")return Z("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var R=[];return _&&R.length===0?M(g,b,E,S):(g={kb:E,Oa:g,hb:S,qb:R},_?(g.sb="spawnThread",postMessage(g,R),0):_n(g))}function Q(g,b,E){return _?be(3,1,g,b,E):0}function le(g,b){if(_)return be(4,1,g,b)}var Ve=g=>{for(var b=0,E=0;E<g.length;++E){var S=g.charCodeAt(E);127>=S?b++:2047>=S?b+=2:55296<=S&&57343>=S?(b+=4,++E):b+=3}return b},ct=(g,b,E,S)=>{if(E>>>=0,!(0<S))return 0;var R=E;S=E+S-1;for(var F=0;F<g.length;++F){var q=g.charCodeAt(F);if(55296<=q&&57343>=q){var De=g.charCodeAt(++F);q=65536+((q&1023)<<10)|De&1023}if(127>=q){if(E>=S)break;b[E++>>>0]=q}else{if(2047>=q){if(E+1>=S)break;b[E++>>>0]=192|q>>6}else{if(65535>=q){if(E+2>=S)break;b[E++>>>0]=224|q>>12}else{if(E+3>=S)break;b[E++>>>0]=240|q>>18,b[E++>>>0]=128|q>>12&63}b[E++>>>0]=128|q>>6&63}b[E++>>>0]=128|q&63}}return b[E>>>0]=0,E-R},Xe=(g,b,E)=>ct(g,u(),b,E);function Ye(g,b){if(_)return be(5,1,g,b)}function so(g,b,E){if(_)return be(6,1,g,b,E)}function uo(g,b,E){return _?be(7,1,g,b,E):0}function O(g,b){if(_)return be(8,1,g,b)}function pe(g,b,E){if(_)return be(9,1,g,b,E)}function xe(g,b,E,S){if(_)return be(10,1,g,b,E,S)}function pr(g,b,E,S){if(_)return be(11,1,g,b,E,S)}function lo(g,b,E,S){if(_)return be(12,1,g,b,E,S)}function Ru(g){if(_)return be(13,1,g)}function Fu(g,b){if(_)return be(14,1,g,b)}function ku(g,b,E){if(_)return be(15,1,g,b,E)}function la(g){g>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(s(),g>>>2,g).value.then(ei),g+=128,Atomics.store(s(),g>>>2,1))}c.__emscripten_thread_mailbox_await=la;var ei=()=>{var g=ti();if(g&&(la(g),g=rl,!qe))try{if(g(),!(0<en))try{_?ga(Ue):Tn(Ue)}catch(b){b instanceof Hr||b=="unwind"||m(1,b)}}catch(b){b instanceof Hr||b=="unwind"||m(1,b)}};c.checkMailbox=ei;var ca=[],In=g=>g%4===0&&(g%100!==0||g%400===0),Lu=[0,31,60,91,121,152,182,213,244,274,305,335],Bu=[0,31,59,90,120,151,181,212,243,273,304,334];function $u(g,b,E,S,R,F,q,De){return _?be(16,1,g,b,E,S,R,F,q,De):-52}function Vu(g,b,E,S,R,F,q){if(_)return be(17,1,g,b,E,S,R,F,q)}var ju=g=>{var b=Ve(g)+1,E=Ju(b);return E&&Xe(g,E,b),E},fa=[],da={},Uu=()=>{if(!ha){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},b;for(b in da)da[b]===void 0?delete g[b]:g[b]=da[b];var E=[];for(b in g)E.push(`${b}=${g[b]}`);ha=E}return ha},ha;function Hu(g,b){if(_)return be(18,1,g,b);g>>>=0,b>>>=0;var E=0;return Uu().forEach((S,R)=>{var F=b+E;for(R=l()[g+4*R>>>2>>>0]=F,F=0;F<S.length;++F)a()[R++>>>0>>>0]=S.charCodeAt(F);a()[R>>>0>>>0]=0,E+=S.length+1}),0}function zu(g,b){if(_)return be(19,1,g,b);g>>>=0,b>>>=0;var E=Uu();l()[g>>>2>>>0]=E.length;var S=0;return E.forEach(R=>S+=R.length+1),l()[b>>>2>>>0]=S,0}function Gu(g){return _?be(20,1,g):52}function Wu(g,b,E,S){return _?be(21,1,g,b,E,S):52}function qu(g,b,E,S,R){return _?be(22,1,g,b,E,S,R):70}var Jh=[null,[],[]];function Xu(g,b,E,S){if(_)return be(23,1,g,b,E,S);b>>>=0,E>>>=0,S>>>=0;for(var R=0,F=0;F<E;F++){var q=l()[b>>>2>>>0],De=l()[b+4>>>2>>>0];b+=8;for(var gr=0;gr<De;gr++){var He=u()[q+gr>>>0],St=Jh[g];He===0||He===10?((g===1?ye:Z)(oo(St,0)),St.length=0):St.push(He)}R+=De}return l()[S>>>2>>>0]=R,0}var Yu=[31,29,31,30,31,30,31,31,30,31,30,31],Zu=[31,28,31,30,31,30,31,31,30,31,30,31];function ep(g){var b=Array(Ve(g)+1);return ct(g,b,0,b.length),b}var tp=(g,b)=>{a().set(g,b>>>0)};function Ku(g,b,E,S){function R(P,ve,Ce){for(P=typeof P=="number"?P.toString():P||"";P.length<ve;)P=Ce[0]+P;return P}function F(P,ve){return R(P,ve,"0")}function q(P,ve){function Ce(ul){return 0>ul?-1:0<ul?1:0}var rn;return(rn=Ce(P.getFullYear()-ve.getFullYear()))===0&&(rn=Ce(P.getMonth()-ve.getMonth()))===0&&(rn=Ce(P.getDate()-ve.getDate())),rn}function De(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function gr(P){var ve=P.Ra;for(P=new Date(new Date(P.Sa+1900,0,1).getTime());0<ve;){var Ce=P.getMonth(),rn=(In(P.getFullYear())?Yu:Zu)[Ce];if(ve>rn-P.getDate())ve-=rn-P.getDate()+1,P.setDate(1),11>Ce?P.setMonth(Ce+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ve);break}}return Ce=new Date(P.getFullYear()+1,0,4),ve=De(new Date(P.getFullYear(),0,4)),Ce=De(Ce),0>=q(ve,P)?0>=q(Ce,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}g>>>=0,b>>>=0,E>>>=0,S>>>=0;var He=l()[S+40>>>2>>>0];S={ob:s()[S>>>2>>>0],nb:s()[S+4>>>2>>>0],Ta:s()[S+8>>>2>>>0],Xa:s()[S+12>>>2>>>0],Ua:s()[S+16>>>2>>>0],Sa:s()[S+20>>>2>>>0],Na:s()[S+24>>>2>>>0],Ra:s()[S+28>>>2>>>0],ub:s()[S+32>>>2>>>0],mb:s()[S+36>>>2>>>0],pb:He?En(He):""},E=En(E),He={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var St in He)E=E.replace(new RegExp(St,"g"),He[St]);var al="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),sl="January February March April May June July August September October November December".split(" ");He={"%a":P=>al[P.Na].substring(0,3),"%A":P=>al[P.Na],"%b":P=>sl[P.Ua].substring(0,3),"%B":P=>sl[P.Ua],"%C":P=>F((P.Sa+1900)/100|0,2),"%d":P=>F(P.Xa,2),"%e":P=>R(P.Xa,2," "),"%g":P=>gr(P).toString().substring(2),"%G":P=>gr(P),"%H":P=>F(P.Ta,2),"%I":P=>(P=P.Ta,P==0?P=12:12<P&&(P-=12),F(P,2)),"%j":P=>{for(var ve=0,Ce=0;Ce<=P.Ua-1;ve+=(In(P.Sa+1900)?Yu:Zu)[Ce++]);return F(P.Xa+ve,3)},"%m":P=>F(P.Ua+1,2),"%M":P=>F(P.nb,2),"%n":()=>`
`,"%p":P=>0<=P.Ta&&12>P.Ta?"AM":"PM","%S":P=>F(P.ob,2),"%t":()=>"	","%u":P=>P.Na||7,"%U":P=>F(Math.floor((P.Ra+7-P.Na)/7),2),"%V":P=>{var ve=Math.floor((P.Ra+7-(P.Na+6)%7)/7);if(2>=(P.Na+371-P.Ra-2)%7&&ve++,ve)ve==53&&(Ce=(P.Na+371-P.Ra)%7,Ce==4||Ce==3&&In(P.Sa)||(ve=1));else{ve=52;var Ce=(P.Na+7-P.Ra-1)%7;(Ce==4||Ce==5&&In(P.Sa%400-1))&&ve++}return F(ve,2)},"%w":P=>P.Na,"%W":P=>F(Math.floor((P.Ra+7-(P.Na+6)%7)/7),2),"%y":P=>(P.Sa+1900).toString().substring(2),"%Y":P=>P.Sa+1900,"%z":P=>{P=P.mb;var ve=0<=P;return P=Math.abs(P)/60,(ve?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.pb,"%%":()=>"%"},E=E.replace(/%%/g,"\0\0");for(St in He)E.includes(St)&&(E=E.replace(new RegExp(St,"g"),He[St](S)));return E=E.replace(/\0\0/g,"%"),St=ep(E),St.length>b?0:(tp(St,g),St.length-1)}te.Wa();var rp=[ie,Jo,M,Q,le,Ye,so,uo,O,pe,xe,pr,lo,Ru,Fu,ku,$u,Vu,Hu,zu,Gu,Wu,qu,Xu],np={b:function(g,b,E){throw g>>>=0,new w(g).Wa(b>>>0,E>>>0),T=g,A++,T},L:function(g){el(g>>>0,!x,1,!v,131072,!1),te.ab()},j:function(g){g>>>=0,_?postMessage({cmd:"cleanupThread",thread:g}):te.Za(te.Ma[g])},H:G,h:Q,S:le,D:Ye,F:so,T:uo,Q:O,J:pe,P:xe,n:pr,E:lo,B:Ru,R:Fu,C:ku,p:()=>1,z:function(g,b){g>>>=0,g==b>>>0?setTimeout(()=>ei()):_?postMessage({targetThread:g,cmd:"checkMailbox"}):(g=te.Ma[g])&&g.postMessage({cmd:"checkMailbox"})},I:function(g,b,E,S){b>>>=0,ca.length=E,S=S>>>0>>>3;for(var R=0;R<E;R++)ca[R]=o()[S+R>>>0];return g=0>g?wn[-g-1]:rp[g],te.ib=b,b=g.apply(null,ca),te.ib=0,b},K:la,o:function(g){y&&te.Ma[g>>>0].ref()},s:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getUTCSeconds(),s()[E+4>>>2>>>0]=g.getUTCMinutes(),s()[E+8>>>2>>>0]=g.getUTCHours(),s()[E+12>>>2>>>0]=g.getUTCDate(),s()[E+16>>>2>>>0]=g.getUTCMonth(),s()[E+20>>>2>>>0]=g.getUTCFullYear()-1900,s()[E+24>>>2>>>0]=g.getUTCDay(),g=(g.getTime()-Date.UTC(g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[E+28>>>2>>>0]=g},t:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getSeconds(),s()[E+4>>>2>>>0]=g.getMinutes(),s()[E+8>>>2>>>0]=g.getHours(),s()[E+12>>>2>>>0]=g.getDate(),s()[E+16>>>2>>>0]=g.getMonth(),s()[E+20>>>2>>>0]=g.getFullYear()-1900,s()[E+24>>>2>>>0]=g.getDay(),b=(In(g.getFullYear())?Lu:Bu)[g.getMonth()]+g.getDate()-1|0,s()[E+28>>>2>>>0]=b,s()[E+36>>>2>>>0]=-(60*g.getTimezoneOffset()),b=new Date(g.getFullYear(),6,1).getTimezoneOffset();var S=new Date(g.getFullYear(),0,1).getTimezoneOffset();g=(b!=S&&g.getTimezoneOffset()==Math.min(S,b))|0,s()[E+32>>>2>>>0]=g},u:function(g){g>>>=0;var b=new Date(s()[g+20>>>2>>>0]+1900,s()[g+16>>>2>>>0],s()[g+12>>>2>>>0],s()[g+8>>>2>>>0],s()[g+4>>>2>>>0],s()[g>>>2>>>0],0),E=s()[g+32>>>2>>>0],S=b.getTimezoneOffset(),R=new Date(b.getFullYear(),6,1).getTimezoneOffset(),F=new Date(b.getFullYear(),0,1).getTimezoneOffset(),q=Math.min(F,R);return 0>E?s()[g+32>>>2>>>0]=+(R!=F&&q==S):0<E!=(q==S)&&(R=Math.max(F,R),b.setTime(b.getTime()+6e4*((0<E?q:R)-S))),s()[g+24>>>2>>>0]=b.getDay(),E=(In(b.getFullYear())?Lu:Bu)[b.getMonth()]+b.getDate()-1|0,s()[g+28>>>2>>>0]=E,s()[g>>>2>>>0]=b.getSeconds(),s()[g+4>>>2>>>0]=b.getMinutes(),s()[g+8>>>2>>>0]=b.getHours(),s()[g+12>>>2>>>0]=b.getDate(),s()[g+16>>>2>>>0]=b.getMonth(),s()[g+20>>>2>>>0]=b.getYear(),g=b.getTime(),isNaN(g)?(s()[Qu()>>>2>>>0]=61,g=-1):g/=1e3,nl((Ar=g,1<=+Math.abs(Ar)?0<Ar?+Math.floor(Ar/4294967296)>>>0:~~+Math.ceil((Ar-+(~~Ar>>>0))/4294967296)>>>0:0)),g>>>0},q:$u,r:Vu,y:function(g,b,E){function S(He){return(He=He.toTimeString().match(/\(([A-Za-z ]+)\)$/))?He[1]:"GMT"}g>>>=0,b>>>=0,E>>>=0;var R=new Date().getFullYear(),F=new Date(R,0,1),q=new Date(R,6,1);R=F.getTimezoneOffset();var De=q.getTimezoneOffset(),gr=Math.max(R,De);l()[g>>>2>>>0]=60*gr,s()[b>>>2>>>0]=+(R!=De),g=S(F),b=S(q),g=ju(g),b=ju(b),De<R?(l()[E>>>2>>>0]=g,l()[E+4>>>2>>>0]=b):(l()[E>>>2>>>0]=b,l()[E+4>>>2>>>0]=g)},c:()=>{vn("")},O:function(g,b,E){g>>>=0,b>>>=0,E>>>=0,fa.length=0;for(var S;S=u()[b++>>>0];){var R=S!=105;R&=S!=112,E+=R&&E%8?4:0,fa.push(S==112?l()[E>>>2>>>0]:S==105?s()[E>>>2>>>0]:o()[E>>>3>>>0]),E+=R?8:4}return wn[g].apply(null,fa)},k:()=>{},i:()=>Date.now(),U:()=>{throw en+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>y?(dG(),Ja(PC)).cpus().length:navigator.hardwareConcurrency,x:function(g){g>>>=0;var b=u().length;if(g<=b||4294901760<g)return!1;for(var E=1;4>=E;E*=2){var S=b*(1+.2/E);S=Math.min(S,g+100663296);var R=Math;S=Math.max(g,S);e:{R=(R.min.call(R,4294901760,S+(65536-S%65536)%65536)-he.buffer.byteLength+65535)/65536;try{he.grow(R),Pt();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},M:Hu,N:zu,G:Tn,g:Gu,m:Wu,v:qu,l:Xu,a:he||c.wasmMemory,w:Ku,d:function(g,b,E,S){return Ku(g>>>0,b>>>0,E>>>0,S>>>0)}},J=function(){function g(E,S){return J=E.exports,J=op(),te.bb.push(J.za),ao=J.Aa,jr.unshift(J.V),yt=S,yn(),J}var b={a:np};if(Se++,c.instantiateWasm)try{return c.instantiateWasm(b,g)}catch(E){Z(`Module.instantiateWasm callback failed with error: ${E}`),d(E)}return Yo(b,function(E){g(E.instance,E.module)}).catch(d),{}}();c._OrtInit=(g,b)=>(c._OrtInit=J.W)(g,b),c._OrtGetLastError=(g,b)=>(c._OrtGetLastError=J.X)(g,b),c._OrtCreateSessionOptions=(g,b,E,S,R,F,q,De,gr,He)=>(c._OrtCreateSessionOptions=J.Y)(g,b,E,S,R,F,q,De,gr,He),c._OrtAppendExecutionProvider=(g,b)=>(c._OrtAppendExecutionProvider=J.Z)(g,b),c._OrtAddFreeDimensionOverride=(g,b,E)=>(c._OrtAddFreeDimensionOverride=J._)(g,b,E),c._OrtAddSessionConfigEntry=(g,b,E)=>(c._OrtAddSessionConfigEntry=J.$)(g,b,E),c._OrtReleaseSessionOptions=g=>(c._OrtReleaseSessionOptions=J.aa)(g),c._OrtCreateSession=(g,b,E)=>(c._OrtCreateSession=J.ba)(g,b,E),c._OrtReleaseSession=g=>(c._OrtReleaseSession=J.ca)(g),c._OrtGetInputOutputCount=(g,b,E)=>(c._OrtGetInputOutputCount=J.da)(g,b,E),c._OrtGetInputName=(g,b)=>(c._OrtGetInputName=J.ea)(g,b),c._OrtGetOutputName=(g,b)=>(c._OrtGetOutputName=J.fa)(g,b),c._OrtFree=g=>(c._OrtFree=J.ga)(g),c._OrtCreateTensor=(g,b,E,S,R,F)=>(c._OrtCreateTensor=J.ha)(g,b,E,S,R,F),c._OrtGetTensorData=(g,b,E,S,R)=>(c._OrtGetTensorData=J.ia)(g,b,E,S,R),c._OrtReleaseTensor=g=>(c._OrtReleaseTensor=J.ja)(g),c._OrtCreateRunOptions=(g,b,E,S)=>(c._OrtCreateRunOptions=J.ka)(g,b,E,S),c._OrtAddRunConfigEntry=(g,b,E)=>(c._OrtAddRunConfigEntry=J.la)(g,b,E),c._OrtReleaseRunOptions=g=>(c._OrtReleaseRunOptions=J.ma)(g),c._OrtCreateBinding=g=>(c._OrtCreateBinding=J.na)(g),c._OrtBindInput=(g,b,E)=>(c._OrtBindInput=J.oa)(g,b,E),c._OrtBindOutput=(g,b,E,S)=>(c._OrtBindOutput=J.pa)(g,b,E,S),c._OrtClearBoundOutputs=g=>(c._OrtClearBoundOutputs=J.qa)(g),c._OrtReleaseBinding=g=>(c._OrtReleaseBinding=J.ra)(g),c._OrtRunWithBinding=(g,b,E,S,R)=>(c._OrtRunWithBinding=J.sa)(g,b,E,S,R),c._OrtRun=(g,b,E,S,R,F,q,De)=>(c._OrtRun=J.ta)(g,b,E,S,R,F,q,De),c._OrtEndProfiling=g=>(c._OrtEndProfiling=J.ua)(g);var Qu=()=>(Qu=J.va)(),ti=c._pthread_self=()=>(ti=c._pthread_self=J.wa)(),Ju=c._malloc=g=>(Ju=c._malloc=J.xa)(g);c._free=g=>(c._free=J.ya)(g),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=J.za)();var el=c.__emscripten_thread_init=(g,b,E,S,R,F)=>(el=c.__emscripten_thread_init=J.Ba)(g,b,E,S,R,F);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=J.Ca)();var tl=(g,b,E,S)=>(tl=J.Da)(g,b,E,S),pa=g=>(pa=J.Ea)(g),ga=c.__emscripten_thread_exit=g=>(ga=c.__emscripten_thread_exit=J.Fa)(g),rl=()=>(rl=J.Ga)(),nl=g=>(nl=J.Ha)(g),ol=(g,b)=>(ol=J.Ia)(g,b),ma=()=>(ma=J.Ja)(),ri=g=>(ri=J.Ka)(g),ya=g=>(ya=J.La)(g);function op(){var g=J;g=Object.assign({},g);var b=S=>()=>S()>>>0,E=S=>R=>S(R)>>>0;return g.va=b(g.va),g.wa=b(g.wa),g.xa=E(g.xa),g.emscripten_main_runtime_thread_id=b(g.emscripten_main_runtime_thread_id),g.Ja=b(g.Ja),g.La=E(g.La),g}c.wasmMemory=he,c.stackAlloc=ya,c.stackSave=ma,c.stackRestore=ri,c.keepRuntimeAlive=()=>0<en,c.UTF8ToString=En,c.stringToUTF8=Xe,c.lengthBytesUTF8=Ve,c.ExitStatus=Hr,c.PThread=te;var ni;er=function g(){ni||il(),ni||(er=g)};function il(){if(!(0<Se))if(_)f(c),_||tn(jr),startWorker(c);else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Yt.unshift(c.preRun.shift());tn(Yt),0<Se||ni||(ni=!0,c.calledRun=!0,qe||(_||tn(jr),f(c),_||tn(Ae)))}}return il(),i.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),pG=Gt((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),QI,JI,Jm,ph,fc,e1,eA,tA,rA,NC,Br,Nc=Y(()=>{"use strict";QI=lG(),JI=hG(),ph=!1,fc=!1,e1=!1,eA=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},tA=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},rA=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",NC=t=>U(void 0,null,function*(){if(ph)return Promise.resolve();if(fc)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(e1)throw new Error("previous call to 'initializeWebAssembly()' failed.");fc=!0;let e=t.initTimeout,r=t.numThreads,n=t.simd,i=eA(r),a=n&&tA(),u=t.wasmPaths,s=typeof u=="string"?u:void 0,l=rA(a,i),o=typeof u=="object"?u[l]:void 0,c=!1,f=[];if(e>0&&f.push(new Promise(d=>{setTimeout(()=>{c=!0,d()},e)})),f.push(new Promise((d,h)=>{let p=i?JI:QI,m={locateFile:(v,x)=>i&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([pG()],{type:"text/javascript"})):v.endsWith(".wasm")?o||(s??x)+l:x+v};if(i)if(m.numThreads=r,typeof Blob>"u")m.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${p.toString()};`;m.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}p(m).then(v=>{fc=!1,ph=!0,Jm=v,d()},v=>{fc=!1,e1=!0,h(v)})})),yield Promise.race(f),c)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)}),Br=()=>{if(ph&&Jm)return Jm;throw new Error("WebAssembly is not initialized yet.")}}),Pr,Eh,wr,ry=Y(()=>{"use strict";Nc(),Pr=(t,e)=>{let r=Br(),n=r.lengthBytesUTF8(t)+1,i=r._malloc(n);return r.stringToUTF8(t,i,n),e.push(i),i},Eh=(t,e,r,n)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([i,a])=>{let u=e?e+i:i;if(typeof a=="object")Eh(a,u+".",r,n);else if(typeof a=="string"||typeof a=="number")n(u,a.toString());else if(typeof a=="boolean")n(u,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},wr=t=>{let e=Br(),r=e.stackSave();try{let n=e.stackAlloc(8);e._OrtGetLastError(n,n+4);let i=e.HEAP32[n/4],a=e.HEAPU32[n/4+1],u=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${i}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}}),RC,gG=Y(()=>{"use strict";Nc(),ry(),RC=t=>{let e=Br(),r=0,n=[],i=t||{};try{if(t?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(i.terminate=!1);let a=0;return t?.tag!==void 0&&(a=Pr(t.tag,n)),r=e._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,a),r===0&&wr("Can't create run options."),t?.extra!==void 0&&Eh(t.extra,"",new WeakSet,(u,s)=>{let l=Pr(u,n),o=Pr(s,n);e._OrtAddRunConfigEntry(r,l,o)!==0&&wr(`Can't set a run config entry: ${u} - ${s}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseRunOptions(r),n.forEach(u=>e._free(u)),a}}}),nA,oA,iA,aA,FC,mG=Y(()=>{"use strict";Nc(),ry(),nA=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},oA=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},iA=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},aA=(t,e,r)=>{for(let n of e){let i=typeof n=="string"?n:n.name;switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let u=n;if(u?.deviceType){let s=Pr("deviceType",r),l=Pr(u.deviceType,r);Br()._OrtAddSessionConfigEntry(t,s,l)!==0&&wr(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let s=u.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let l=Pr("numThreads",r),o=Pr(s.toString(),r);Br()._OrtAddSessionConfigEntry(t,l,o)!==0&&wr(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let s=Pr("powerPreference",r),l=Pr(u.powerPreference,r);Br()._OrtAddSessionConfigEntry(t,s,l)!==0&&wr(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof n!="string"){let u=n;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let s=Pr("preferredLayout",r),l=Pr(u.preferredLayout,r);Br()._OrtAddSessionConfigEntry(t,s,l)!==0&&wr(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let a=Pr(i,r);Br()._OrtAppendExecutionProvider(t,a)!==0&&wr(`Can't append execution provider: ${i}.`)}},FC=t=>{let e=Br(),r=0,n=[],i=t||{};iA(i);try{let a=nA(i.graphOptimizationLevel??"all"),u=oA(i.executionMode??"sequential"),s=typeof i.logId=="string"?Pr(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let o=i.logVerbosityLevel??0;if(!Number.isInteger(o)||o<0||o>4)throw new Error(`log verbosity level is not valid: ${o}`);let c=typeof i.optimizedModelFilePath=="string"?Pr(i.optimizedModelFilePath,n):0;if(r=e._OrtCreateSessionOptions(a,!!i.enableCpuMemArena,!!i.enableMemPattern,u,!!i.enableProfiling,0,s,l,o,c),r===0&&wr("Can't create session options."),i.executionProviders&&aA(r,i.executionProviders,n),i.freeDimensionOverrides)for(let[f,d]of Object.entries(i.freeDimensionOverrides)){if(typeof f!="string")throw new Error(`free dimension override name must be a string: ${f}`);if(typeof d!="number"||!Number.isInteger(d)||d<0)throw new Error(`free dimension override value must be a non-negative integer: ${d}`);let h=Pr(f,n);e._OrtAddFreeDimensionOverride(r,h,d)!==0&&wr(`Can't set a free dimension override: ${f} - ${d}.`)}return i.extra!==void 0&&Eh(i.extra,"",new WeakSet,(f,d)=>{let h=Pr(f,n),p=Pr(d,n);e._OrtAddSessionConfigEntry(r,h,p)!==0&&wr(`Can't set a session config entry: ${f} - ${d}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseSessionOptions(r),n.forEach(u=>e._free(u)),a}}}),B1,kC,$1,LC,BC,ny,$C,VC=Y(()=>{"use strict";B1=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},kC=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},$1=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],LC=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},BC=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},ny=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",$C=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),Th,jC=Y(()=>{"use strict";Th=t=>U(void 0,null,function*(){if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(yield(void 0)(t))}catch(a){if(a.code==="ERR_FS_FILE_TOO_LARGE"){let u=(void 0)(t),s=[];try{for(var e=mf(u),r,n,i;r=!(n=yield e.next()).done;r=!1){let l=n.value;s.push(l)}}catch{i=[n]}finally{try{r&&(n=e.return)&&(yield n.call(e))}finally{if(i)throw i[0]}}return new Uint8Array(Buffer.concat(s))}throw a}else{let a=yield fetch(t);if(!a.ok)throw new Error(`failed to load external data file: ${t}`);let u=a.headers.get("Content-Length"),s=u?parseInt(u,10):0;if(s<1073741824)return new Uint8Array(yield a.arrayBuffer());{if(!a.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let l=a.body.getReader(),o;try{o=new ArrayBuffer(s)}catch(f){if(f instanceof RangeError){let d=Math.ceil(s/65536);o=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw f}let c=0;for(;;){let{done:f,value:d}=yield l.read();if(f)break;let h=d.byteLength;new Uint8Array(o,c,h).set(d),c+=h}return new Uint8Array(o,0,s)}}else return t instanceof Blob?new Uint8Array(yield t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)})}),sA,UC,HC,ou,uA,V1,zC,GC,t1,WC,qC,XC,yG=Y(()=>{"use strict";gG(),mG(),VC(),Nc(),ry(),jC(),sA=(t,e)=>{Br()._OrtInit(t,e)!==0&&wr("Can't initialize onnxruntime.")},UC=t=>U(void 0,null,function*(){sA(t.wasm.numThreads,BC(t.logLevel))}),HC=(t,e)=>U(void 0,null,function*(){}),ou=new Map,uA=t=>{let e=Br(),r=e.stackSave();try{let n=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,n,n+4)!==0&&wr("Can't get session input/output count."),[e.HEAP32[n/4],e.HEAP32[n/4+1]]}finally{e.stackRestore(r)}},V1=t=>{let e=Br(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},zC=(t,e)=>U(void 0,null,function*(){let r,n,i=Br();Array.isArray(t)?[r,n]=t:t.buffer===i.HEAPU8.buffer?[r,n]=[t.byteOffset,t.byteLength]:[r,n]=V1(t);let a=0,u=0,s=0,l=[],o=[],c=[];try{if([u,l]=FC(e),e?.externalData&&i.mountExternalData){let x=[];for(let y of e.externalData){let _=typeof y=="string"?y:y.path;x.push(Th(typeof y=="string"?y:y.data).then(I=>{i.mountExternalData(_,I)}))}yield Promise.all(x)}a=i._OrtCreateSession(r,n,u),a===0&&wr("Can't create a session.");let[f,d]=uA(a),h=[],p=[],m=[];for(let x=0;x<f;x++){let y=i._OrtGetInputName(a,x);y===0&&wr("Can't get an input name."),o.push(y),h.push(i.UTF8ToString(y))}for(let x=0;x<d;x++){let y=i._OrtGetOutputName(a,x);y===0&&wr("Can't get an output name."),c.push(y);let _=i.UTF8ToString(y);p.push(_)}return ou.set(a,[a,o,c,null]),[a,h,p]}catch(f){throw o.forEach(d=>i._OrtFree(d)),c.forEach(d=>i._OrtFree(d)),s!==0&&i._OrtReleaseBinding(s),a!==0&&i._OrtReleaseSession(a),f}finally{i._free(r),u!==0&&i._OrtReleaseSessionOptions(u),l.forEach(f=>i._free(f)),i.unmountExternalData?.()}}),GC=t=>{let e=Br(),r=ou.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[n,i,a,u]=r;u&&e._OrtReleaseBinding(u.handle),e.jsepUnregisterBuffers?.(t),i.forEach(s=>e._OrtFree(s)),a.forEach(s=>e._OrtFree(s)),e._OrtReleaseSession(n),ou.delete(t)},t1=(t,e,r,n,i)=>{if(!t){e.push(0);return}let a=Br(),u=t[0],s=t[1],l=t[3],o,c;if(u==="string"&&l==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(l==="gpu-buffer"){let h=t[2].gpuBuffer,p=$1(B1(u));c=s.reduce((m,v)=>m*v,1)*p,o=a.jsepRegisterBuffer(n,i,h,c)}else{let h=t[2];if(Array.isArray(h)){c=4*h.length,o=a._malloc(c),r.push(o);let p=o/4;for(let m=0;m<h.length;m++){if(typeof h[m]!="string")throw new TypeError(`tensor data at index ${m} is not a string`);a.HEAPU32[p++]=Pr(h[m],r)}}else c=h.byteLength,o=a._malloc(c),r.push(o),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,c),o)}let f=a.stackSave(),d=a.stackAlloc(4*s.length);try{let h=d/4;s.forEach(m=>a.HEAP32[h++]=m);let p=a._OrtCreateTensor(B1(u),o,c,d,s.length,$C(l));p===0&&wr(`Can't create tensor for input/output. session=${n}, index=${i}.`),e.push(p)}finally{a.stackRestore(f)}},WC=(t,e,r,n,i,a)=>U(void 0,null,function*(){let u=Br(),s=ou.get(t);if(!s)throw new Error(`cannot run inference. invalid session id: ${t}`);let[l,o,c,f]=s,d=e.length,h=n.length,p=0,m=[],v=[],x=[],y=[],_=u.stackSave(),I=u.stackAlloc(d*4),C=u.stackAlloc(d*4),j=u.stackAlloc(h*4),z=u.stackAlloc(h*4);try{[p,m]=RC(a);for(let Z=0;Z<d;Z++)t1(r[Z],v,y,t,e[Z]);for(let Z=0;Z<h;Z++)t1(i[Z],x,y,t,d+n[Z]);let W=I/4,k=C/4,X=j/4,ke=z/4;for(let Z=0;Z<d;Z++)u.HEAPU32[W++]=v[Z],u.HEAPU32[k++]=o[e[Z]];for(let Z=0;Z<h;Z++)u.HEAPU32[X++]=x[Z],u.HEAPU32[ke++]=c[n[Z]];let me;me=yield u._OrtRun(l,C,I,d,z,h,j,p),me!==0&&wr("failed to call OrtRun().");let ye=[];for(let Z=0;Z<h;Z++){let he=u.HEAPU32[j/4+Z];if(he===x[Z]){ye.push(i[Z]);continue}let yt=u.stackSave(),qe=u.stackAlloc(4*4),Ue=!1,Ee,It=0;try{u._OrtGetTensorData(he,qe,qe+4,qe+8,qe+12)!==0&&wr(`Can't access output tensor data on index ${Z}.`);let At=qe/4,Ft=u.HEAPU32[At++];It=u.HEAPU32[At++];let vr=u.HEAPU32[At++],Pt=u.HEAPU32[At++],hr=[];for(let Ae=0;Ae<Pt;Ae++)hr.push(u.HEAPU32[vr/4+Ae]);u._OrtFree(vr);let Yt=hr.reduce((Ae,Se)=>Ae*Se,1);Ee=kC(Ft);let jr=f?.outputPreferredLocations[n[Z]];if(Ee==="string"){if(jr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ae=[],Se=It/4;for(let Er=0;Er<Yt;Er++){let er=u.HEAPU32[Se++],yn=Er===Yt-1?void 0:u.HEAPU32[Se]-er;Ae.push(u.UTF8ToString(er,yn))}ye.push([Ee,hr,Ae,"cpu"])}else if(jr==="gpu-buffer"&&Yt>0){let Ae=u.jsepGetBuffer(It),Se=$1(Ft);if(Se===void 0||!ny(Ee))throw new Error(`Unsupported data type: ${Ee}`);Ue=!0,ye.push([Ee,hr,{gpuBuffer:Ae,download:u.jsepCreateDownloader(Ae,Yt*Se,Ee),dispose:()=>{u._OrtReleaseTensor(he)}},"gpu-buffer"])}else{let Ae=LC(Ee),Se=new Ae(Yt);new Uint8Array(Se.buffer,Se.byteOffset,Se.byteLength).set(u.HEAPU8.subarray(It,It+Se.byteLength)),ye.push([Ee,hr,Se,"cpu"])}}finally{u.stackRestore(yt),Ee==="string"&&It&&u._free(It),Ue||u._OrtReleaseTensor(he)}}return f&&u._OrtClearBoundOutputs(f.handle),ye}finally{u.stackRestore(_),v.forEach(W=>u._OrtReleaseTensor(W)),x.forEach(W=>u._OrtReleaseTensor(W)),y.forEach(W=>u._free(W)),p!==0&&u._OrtReleaseRunOptions(p),m.forEach(W=>u._free(W))}}),qC=t=>{let e=Br(),r=ou.get(t);if(!r)throw new Error("invalid session id");let n=r[0],i=e._OrtEndProfiling(n);i===0&&wr("Can't get an profile file name."),e._OrtFree(i)},XC=t=>{let e=[];for(let r of t){let n=r[2];!Array.isArray(n)&&"buffer"in n&&e.push(n.buffer)}return e}}),vG=Gt((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.17.1\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var et=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of Xr(d))!Qr.call(u,l)&&l!==a&&Et(u,l,{get:()=>d[l],enumerable:!(h=Jr(d,l))||h.enumerable});return u};var tt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=et((mr,xt)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,l;a.ready=new Promise((r,o)=>{h=r,l=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",A=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="",B,F,U;if(D){var k=(Mt(),tt(At)),L=(Dt(),tt(Ct));I=A?L.dirname(I)+"/":__dirname+"/",B=(r,o)=>(r=ye(r)?new URL(r):L.normalize(r),k.readFileSync(r,o?void 0:"utf8")),U=r=>(r=B(r,!0),r.buffer||(r=new Uint8Array(r)),r),F=(r,o,s,m=!0)=>{r=ye(r)?new URL(r):L.normalize(r),k.readFile(r,m?void 0:"utf8",(O,S)=>{O?s(O):o(m?S.buffer:S)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||A)&&(A?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),u&&(I=u),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",B=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},A&&(U=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),F=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var _=console.log.bind(console),x=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var N,he=!1,ie,ae,E,Y,ue;function Re(){var r=N.buffer;a.HEAP8=ie=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ae=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=E=new Int32Array(r),a.HEAPU32=Y=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=ue=new Float64Array(r)}var Ie=[],ee=[],j=[],ce=0,P=null,te=null;function de(r){throw r="Aborted("+r+")",x(r),he=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var ge=r=>r.startsWith("data:application/octet-stream;base64,"),ye=r=>r.startsWith("file://"),J;if(J="ort-wasm.wasm",!ge(J)){var fe=J;J=a.locateFile?a.locateFile(fe,I):I+fe}function we(r){if(U)return U(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(i||A){if(typeof fetch=="function"&&!ye(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>we(r));if(F)return new Promise((o,s)=>{F(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>we(r))}function Me(r,o,s){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{x(`failed to asynchronously prepare wasm: ${m}`),de(m)})}function Fe(r,o){var s=J;return typeof WebAssembly.instantiateStreaming!="function"||ge(s)||ye(s)||D||typeof fetch!="function"?Me(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return x(`wasm streaming compile failed: ${O}`),x("falling back to ArrayBuffer instantiation"),Me(s,r,o)}))}var Ee,pe={919888:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=be(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ae.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Oe(r){this.xa=r-24,this.Ha=function(o){Y[this.xa+4>>>2>>>0]=o},this.Ga=function(o){Y[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){Y[this.xa+16>>>2>>>0]=0}}var ve=0,re=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&Z)return Z.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var S=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|S);else{var R=r[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|R:(O&7)<<18|S<<12|R<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},be=(r,o)=>(r>>>=0)?Ce(ae,r,o):"",_e=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},ke=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var S=0;S<r.length;++S){var R=r.charCodeAt(S);if(55296<=R&&57343>=R){var K=r.charCodeAt(++S);R=65536+((R&1023)<<10)|K&1023}if(127>=R){if(s>=m)break;o[s++>>>0]=R}else{if(2047>=R){if(s+1>=m)break;o[s++>>>0]=192|R>>6}else{if(65535>=R){if(s+2>=m)break;o[s++>>>0]=224|R>>12}else{if(s+3>=m)break;o[s++>>>0]=240|R>>18,o[s++>>>0]=128|R>>12&63}o[s++>>>0]=128|R>>6&63}o[s++>>>0]=128|R&63}}return o[s>>>0]=0,s-O},Ue=r=>r%4===0&&(r%100!==0||r%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],De=r=>{var o=_e(r)+1,s=st(o);return s&&ke(r,ae,s,o),s},Ne=[],Pe={},He=()=>{if(!$e){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete r[o]:r[o]=Pe[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);$e=s}return $e},$e,Le=[null,[],[]],qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(r){var o=Array(_e(r)+1);return ke(r,o,0,o.length),o}function ot(r,o,s,m){function O(c,W,G){for(c=typeof c=="number"?c.toString():c||"";c.length<W;)c=G[0]+c;return c}function S(c,W){return O(c,W,"0")}function R(c,W){function G(Ke){return 0>Ke?-1:0<Ke?1:0}var Se;return(Se=G(c.getFullYear()-W.getFullYear()))===0&&(Se=G(c.getMonth()-W.getMonth()))===0&&(Se=G(c.getDate()-W.getDate())),Se}function K(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function le(c){var W=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<W;){var G=c.getMonth(),Se=(Ue(c.getFullYear())?qe:Ve)[G];if(W>Se-c.getDate())W-=Se-c.getDate()+1,c.setDate(1),11>G?c.setMonth(G+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+W);break}}return G=new Date(c.getFullYear()+1,0,4),W=K(new Date(c.getFullYear(),0,4)),G=K(G),0>=R(W,c)?0>=R(G,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var oe=Y[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:oe?be(oe):""},s=be(s),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)s=s.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ze="January February March April May June July August September October November December".split(" ");oe={"%a":c=>Qe[c.oa].substring(0,3),"%A":c=>Qe[c.oa],"%b":c=>Ze[c.wa].substring(0,3),"%B":c=>Ze[c.wa],"%C":c=>S((c.ua+1900)/100|0,2),"%d":c=>S(c.ya,2),"%e":c=>O(c.ya,2," "),"%g":c=>le(c).toString().substring(2),"%G":c=>le(c),"%H":c=>S(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var W=0,G=0;G<=c.wa-1;W+=(Ue(c.ua+1900)?qe:Ve)[G++]);return S(c.ya+W,3)},"%m":c=>S(c.wa+1,2),"%M":c=>S(c.Ca,2),"%n":()=>`\n`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>S(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>S(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var W=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&W++,W)W==53&&(G=(c.oa+371-c.ta)%7,G==4||G==3&&Ue(c.ua)||(W=1));else{W=52;var G=(c.oa+7-c.ta-1)%7;(G==4||G==5&&Ue(c.ua%400-1))&&W++}return S(W,2)},"%w":c=>c.oa,"%W":c=>S(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var W=0<=c;return c=Math.abs(c)/60,(W?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in oe)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),oe[se](m)));return s=s.replace(/\\0\\0/g,"%"),se=Ge(s),se.length>o?0:(ie.set(se,r>>>0),se.length-1)}var $={a:function(r,o,s){throw r>>>=0,new Oe(r).Aa(o>>>0,s>>>0),ve=r,re++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getUTCSeconds(),E[s+4>>>2>>>0]=r.getUTCMinutes(),E[s+8>>>2>>>0]=r.getUTCHours(),E[s+12>>>2>>>0]=r.getUTCDate(),E[s+16>>>2>>>0]=r.getUTCMonth(),E[s+20>>>2>>>0]=r.getUTCFullYear()-1900,E[s+24>>>2>>>0]=r.getUTCDay(),E[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getSeconds(),E[s+4>>>2>>>0]=r.getMinutes(),E[s+8>>>2>>>0]=r.getHours(),E[s+12>>>2>>>0]=r.getDate(),E[s+16>>>2>>>0]=r.getMonth(),E[s+20>>>2>>>0]=r.getFullYear()-1900,E[s+24>>>2>>>0]=r.getDay(),E[s+28>>>2>>>0]=(Ue(r.getFullYear())?ze:at)[r.getMonth()]+r.getDate()-1|0,E[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(E[r+20>>>2>>>0]+1900,E[r+16>>>2>>>0],E[r+12>>>2>>>0],E[r+8>>>2>>>0],E[r+4>>>2>>>0],E[r>>>2>>>0],0),s=E[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(S,O);return 0>s?E[r+32>>>2>>>0]=+(O!=S&&R==m):0<s!=(R==m)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?R:O)-m))),E[r+24>>>2>>>0]=o.getDay(),E[r+28>>>2>>>0]=(Ue(o.getFullYear())?ze:at)[o.getMonth()]+o.getDate()-1|0,E[r>>>2>>>0]=o.getSeconds(),E[r+4>>>2>>>0]=o.getMinutes(),E[r+8>>>2>>>0]=o.getHours(),E[r+12>>>2>>>0]=o.getDate(),E[r+16>>>2>>>0]=o.getMonth(),E[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(E[Ye()>>>2>>>0]=61,r=-1):r/=1e3,Je((Ee=r,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),R=new Date(O,6,1);O=S.getTimezoneOffset();var K=R.getTimezoneOffset();Y[r>>>0>>>2>>>0]=60*Math.max(O,K),E[o>>>0>>>2>>>0]=+(O!=K),r=m(S),o=m(R),r=De(r),o=De(o),K<O?(Y[s>>>2>>>0]=r,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=r)},d:()=>{de("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ae[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?Y[s>>>2>>>0]:m==105?E[s>>>2>>>0]:ue[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ae.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ae.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(O),Re();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var S=o+s;for(O=Y[r+4*O>>>2>>>0]=S,S=0;S<m.length;++S)ie[O++>>>0>>>0]=m.charCodeAt(S);ie[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();Y[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),Y[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,S=0;S<s;S++){var R=Y[o>>>2>>>0],K=Y[o+4>>>2>>>0];o+=8;for(var le=0;le<K;le++){var oe=ae[R+le>>>0],se=Le[r];oe===0||oe===10?((r===1?_:x)(Ce(se,0)),se.length=0):se.push(oe)}O+=K}return Y[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),N=C.K,Re(),ee.unshift(C.L),ce--,ce==0&&(P!==null&&(clearInterval(P),P=null),te&&(s=te,te=null,s())),C}var o={a:$};if(ce++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){x(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Fe(o,function(s){r(s.instance)}).catch(l),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,S,R,K,le,oe)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,S,R,K,le,oe),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,S)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,S),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,S,R,K)=>(a._OrtRun=C.ja)(r,o,s,m,O,S,R,K),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var Ye=()=>(Ye=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Je=r=>(Je=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),Be=r=>(Be=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=Be,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=be,a.stringToUTF8=(r,o,s)=>ke(r,ae,o,s),a.lengthBytesUTF8=_e;var xe;te=function r(){xe||Xe(),xe||(te=r)};function Xe(){if(!(0<ce)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();Ie.unshift(r)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<ce||xe||(xe=!0,a.calledRun=!0,he))){for(;0<ee.length;)ee.shift()(a);for(h(a);0<j.length;)j.shift()(a)}}}return Xe(),d.ready}})();typeof mr=="object"&&typeof xt=="object"?xt.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=et(()=>{});var yr=et(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=et((vr,Ft)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return j.buffer!=de.buffer&&we(),de}function h(){return j.buffer!=de.buffer&&we(),ge}function l(){return j.buffer!=de.buffer&&we(),ye}function w(){return j.buffer!=de.buffer&&we(),J}function g(){return j.buffer!=de.buffer&&we(),fe}var i=d,A,D;i.ready=new Promise((e,t)=>{A=e,D=t});var I=Object.assign({},i),B="./this.program",F=(e,t)=>{throw t},U=typeof window=="object",k=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,x="";function N(e){return i.locateFile?i.locateFile(e,x):x+e}var he,ie,ae;if(L){var E=(Mt(),tt(At)),Y=(Dt(),tt(Ct));x=k?Y.dirname(x)+"/":__dirname+"/",he=(t,n)=>(t=be(t)?new URL(t):Y.normalize(t),E.readFileSync(t,n?void 0:"utf8")),ae=t=>(t=he(t,!0),t.buffer||(t=new Uint8Array(t)),t),ie=(t,n,f,y=!0)=>{t=be(t)?new URL(t):Y.normalize(t),E.readFile(t,y?void 0:"utf8",(b,v)=>{b?f(b):n(y?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),F=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(U||k)&&(k?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof u<"u"&&u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",L||(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(ae=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=(e,t,n)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?t(f.response):n()},f.onerror=n,f.send(null)}));L&&typeof performance>"u"&&(global.performance=yr().performance);var ue=console.log.bind(console),Re=console.error.bind(console);L&&(ue=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=ue,ee=Re;Object.assign(i,I),I=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var j,ce,P=!1,te,de,ge,ye,J,fe;function we(){var e=j.buffer;i.HEAP8=de=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ge=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ye=new Int32Array(e),i.HEAPU32=J=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=fe=new Float64Array(e)}var Ae=16777216;if(_)j=i.wasmMemory;else if(i.wasmMemory)j=i.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");we(),Ae=j.buffer.byteLength;var Me=[],Fe=[],Ee=[],pe=0,Oe=null,ve=null;function re(){if(pe--,pe==0&&(Oe!==null&&(clearInterval(Oe),Oe=null),ve)){var e=ve;ve=null,e()}}function Z(e){throw e="Aborted("+e+")",ee(e),P=!0,te=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Ce=e=>e.startsWith("data:application/octet-stream;base64,"),be=e=>e.startsWith("file://"),_e;_e="ort-wasm-threaded.wasm",Ce(_e)||(_e=N(_e));function ke(e){if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function Ue(e){if(U||k){if(typeof fetch=="function"&&!be(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ke(e));if(ie)return new Promise((t,n)=>{ie(e,f=>t(new Uint8Array(f)),n)})}return Promise.resolve().then(()=>ke(e))}function ze(e,t,n){return Ue(e).then(f=>WebAssembly.instantiate(f,t)).then(f=>f).then(n,f=>{ee(`failed to asynchronously prepare wasm: ${f}`),Z(f)})}function at(e,t){var n=_e;return typeof WebAssembly.instantiateStreaming!="function"||Ce(n)||be(n)||L||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,e).then(t,function(y){return ee(`wasm streaming compile failed: ${y}`),ee("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var De,Ne={921276:(e,t,n,f)=>{if(typeof i>"u"||!i.cb)return 1;if(e=Ge(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,f>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),f>>>0),0}catch{return 4}}};function Pe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},$e=e=>{M.Pa.length==0&&(Je(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return L&&t.unref(),t.postMessage(n,e.qb),0},Le=0,qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ve=(e,t,n)=>{t>>>=0;var f=t+n;for(n=t;e[n]&&!(n>=f);)++n;if(16<n-t&&e.buffer&&qe)return qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(f="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var v=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[t++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},Ge=(e,t)=>(e>>>=0)?Ve(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function $(e,t){var n=arguments.length-2,f=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,v=0;v<n;v++){var z=f[2+v];g()[b+v>>>0]=z}return ar(e,n,y,t)})}function C(e){if(_)return $(0,1,e);te=e,0<Le||(M.lb(),i.onExit?.(e),P=!0),F(e,new Pe(e))}var Ye=e=>{if(te=e,_)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Je();Me.unshift(()=>{pe++,it(()=>re())})}function Je(){var e=N("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){_?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>te=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var z=M.Ma[b.targetThread];z?z.postMessage(b,b.transferList):ee(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ft():v==="spawnThread"?$e(b):v==="cleanupThread"?M.Za(M.Ma[b.thread]):v==="killThread"?(b=b.thread,v=M.Ma[b],delete M.Ma[b],He(v),wt(b),M.Qa.splice(M.Qa.indexOf(v),1),v.Oa=0):v==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,L&&!e.Oa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?i[b.handler](...b.args):v&&ee(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ee(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},L&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],f=["onExit"],y;for(y of f)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:j,wasmModule:ce})})};i.PThread=M;var Be=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(_)return $(1,0,e);Ye(e)}var xe=[],Xe;i.invokeEntryPoint=(e,t)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Xe.get(e)),e=n(t),0<Le?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,f){return _?$(2,1,e,t,n,f):O(e,t,n,f)}function O(e,t,n,f){if(e>>>=0,t>>>=0,n>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return _&&y.length===0?m(e,t,n,f):(e={kb:n,Oa:e,hb:f,qb:y},_?(e.sb="spawnThread",postMessage(e,y),0):$e(e))}function S(e,t,n){return _?$(3,1,e,t,n):0}function R(e,t){if(_)return $(4,1,e,t)}var K=e=>{for(var t=0,n=0;n<e.length;++n){var f=e.charCodeAt(n);127>=f?t++:2047>=f?t+=2:55296<=f&&57343>=f?(t+=4,++n):t+=3}return t},le=(e,t,n,f)=>{if(n>>>=0,!(0<f))return 0;var y=n;f=n+f-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=f)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=f)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=f)break;t[n++>>>0]=224|v>>12}else{if(n+3>=f)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-y},oe=(e,t,n)=>le(e,h(),t,n);function se(e,t){if(_)return $(5,1,e,t)}function Qe(e,t,n){if(_)return $(6,1,e,t,n)}function Ze(e,t,n){return _?$(7,1,e,t,n):0}function c(e,t){if(_)return $(8,1,e,t)}function W(e,t,n){if(_)return $(9,1,e,t,n)}function G(e,t,n,f){if(_)return $(10,1,e,t,n,f)}function Se(e,t,n,f){if(_)return $(11,1,e,t,n,f)}function Ke(e,t,n,f){if(_)return $(12,1,e,t,n,f)}function Bt(e){if(_)return $(13,1,e)}function Wt(e,t){if(_)return $(14,1,e,t)}function kt(e,t,n){if(_)return $(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(l(),e>>>2,e).value.then(ft),e+=128,Atomics.store(l(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!P))try{if(e(),!(0<Le))try{_?Ot(te):Ye(te)}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}};i.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,t,n,f,y,b,v,z){return _?$(16,1,e,t,n,f,y,b,v,z):-52}function Gt(e,t,n,f,y,b,v){if(_)return $(17,1,e,t,n,f,y,b,v)}var Yt=e=>{var t=K(e)+1,n=rr(t);return n&&oe(e,n,t),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(_)return $(18,1,e,t);e>>>=0,t>>>=0;var n=0;return jt().forEach((f,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<f.length;++b)a()[y++>>>0>>>0]=f.charCodeAt(b);a()[y>>>0>>>0]=0,n+=f.length+1}),0}function qt(e,t){if(_)return $(19,1,e,t);e>>>=0,t>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var f=0;return n.forEach(y=>f+=y.length+1),w()[t>>>2>>>0]=f,0}function Vt(e){return _?$(20,1,e):52}function Jt(e,t,n,f){return _?$(21,1,e,t,n,f):52}function Xt(e,t,n,f,y){return _?$(22,1,e,t,n,f,y):70}var Gr=[null,[],[]];function Qt(e,t,n,f){if(_)return $(23,1,e,t,n,f);t>>>=0,n>>>=0,f>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[t>>>2>>>0],z=w()[t+4>>>2>>>0];t+=8;for(var Te=0;Te<z;Te++){var ne=h()[v+Te>>>0],me=Gr[e];ne===0||ne===10?((e===1?Ie:ee)(Ve(me,0)),me.length=0):me.push(ne)}y+=z}return w()[f>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(e){var t=Array(K(e)+1);return le(e,t,0,t.length),t}var jr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,f){function y(p,H,q){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=q[0]+p;return p}function b(p,H){return y(p,H,"0")}function v(p,H){function q(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=q(p.getFullYear()-H.getFullYear()))===0&&(We=q(p.getMonth()-H.getMonth()))===0&&(We=q(p.getDate()-H.getDate())),We}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Te(p){var H=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<H;){var q=p.getMonth(),We=(je(p.getFullYear())?Zt:Kt)[q];if(H>We-p.getDate())H-=We-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return q=new Date(p.getFullYear()+1,0,4),H=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(H,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,f>>>=0;var ne=w()[f+40>>>2>>>0];f={ob:l()[f>>>2>>>0],nb:l()[f+4>>>2>>>0],Ta:l()[f+8>>>2>>>0],Xa:l()[f+12>>>2>>>0],Ua:l()[f+16>>>2>>>0],Sa:l()[f+20>>>2>>>0],Na:l()[f+24>>>2>>>0],Ra:l()[f+28>>>2>>>0],ub:l()[f+32>>>2>>>0],mb:l()[f+36>>>2>>>0],pb:ne?Ge(ne):""},n=Ge(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)n=n.replace(new RegExp(me,"g"),ne[me]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");ne={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Te(p).toString().substring(2),"%G":p=>Te(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var H=0,q=0;q<=p.Ua-1;H+=(je(p.Sa+1900)?Zt:Kt)[q++]);return b(p.Xa+H,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var H=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&H++,H)H==53&&(q=(p.Na+371-p.Ra)%7,q==4||q==3&&je(p.Sa)||(H=1));else{H=52;var q=(p.Na+7-p.Ra-1)%7;(q==4||q==5&&je(p.Sa%400-1))&&H++}return b(H,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(me in ne)n.includes(me)&&(n=n.replace(new RegExp(me,"g"),ne[me](f)));return n=n.replace(/\\0\\0/g,"%"),me=Yr(n),me.length>t?0:(jr(me,e),me.length-1)}M.Wa();var zr=[C,ut,m,S,R,se,Qe,Ze,c,W,G,Se,Ke,Bt,Wt,kt,$t,Gt,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!k,1,!U,131072,!1),M.ab()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:S,S:R,D:se,F:Qe,T:Ze,Q:c,J:W,P:G,n:Se,E:Ke,B:Bt,R:Wt,C:kt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,f){t>>>=0,gt.length=n,f=f>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[f+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){L&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var f=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=f&&e.getTimezoneOffset()==Math.min(f,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],f=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?l()[e+32>>>2>>>0]=+(y!=b&&v==f):0<n!=(v==f)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?v:y)-f))),l()[e+24>>>2>>>0]=t.getDay(),n=(je(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((De=e,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Gt,y:function(e,t,n){function f(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Te=Math.max(y,z);w()[e>>>2>>>0]=60*Te,l()[t>>>2>>>0]=+(y!=z),e=f(b),t=f(v),e=Yt(e),t=Yt(t),z<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{Z("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var f;f=h()[t++>>>0];){var y=f!=105;y&=f!=112,n+=y&&n%8?4:0,ht.push(f==112?w()[n>>>2>>>0]:f==105?l()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>L?(wr(),tt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var f=t*(1+.2/n);f=Math.min(f,e+100663296);var y=Math;f=Math.max(e,f);e:{y=(y.min.call(y,4294901760,f+(65536-f%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(y),we();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ye,g:Vt,m:Jt,v:Xt,l:Qt,a:j||i.wasmMemory,w:er,d:function(e,t,n,f){return er(e>>>0,t>>>0,n>>>0,f>>>0)}},T=function(){function e(n,f){return T=n.exports,T=Vr(),M.bb.push(T.za),Xe=T.Aa,Fe.unshift(T.V),ce=f,re(),T}var t={a:qr};if(pe++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ee(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return at(t,function(n){e(n.instance,n.module)}).catch(D),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,f,y,b,v,z,Te,ne)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,f,y,b,v,z,Te,ne),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,f,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,f,y,b),i._OrtGetTensorData=(e,t,n,f,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,f,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,f)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,f),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,f)=>(i._OrtBindOutput=T.pa)(e,t,n,f),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,f,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,f,y),i._OrtRun=(e,t,n,f,y,b,v,z)=>(i._OrtRun=T.ta)(e,t,n,f,y,b,v,z),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,f,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,f,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,f)=>(ar=T.Da)(e,t,n,f),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=f=>()=>f()>>>0,n=f=>y=>f(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=j,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Le,i.UTF8ToString=Ge,i.stringToUTF8=oe,i.lengthBytesUTF8=K,i.ExitStatus=Pe,i.PThread=M;var dt;ve=function e(){dt||ur(),dt||(ve=e)};function ur(){if(!(0<pe))if(_)A(i),_||Be(Fe),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Me.unshift(i.preRun.shift());Be(Me),0<pe||dt||(dt=!0,i.calledRun=!0,P||(_||Be(Fe),A(i),_||Be(Ee)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Ft=="object"?Ft.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=et((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),Ut,Pt=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Pt)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,l=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,A=un(w,l),D=typeof g=="object"?g[A]:void 0,I=!1,B=[];if(d>0&&B.push(new Promise(F=>{setTimeout(()=>{I=!0,F()},d)})),B.push(new Promise((F,U)=>{let k=l?an:Tr,L={locateFile:(_,x)=>l&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):_.endsWith(".wasm")?D||(i??x)+A:x+_};if(l)if(L.numThreads=a,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;L.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(L).then(_=>{pt=!1,Pt=!0,Ut=_,F()},_=>{pt=!1,Sr=!0,U(_)})})),await Promise.race(B),I)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},X=()=>{if(Pt&&Ut)return Ut;throw new Error("WebAssembly is not initialized yet.")};var Q=(u,d)=>{let a=X(),h=a.lengthBytesUTF8(u)+1,l=a._malloc(h);return a.stringToUTF8(u,l,h),d.push(l),l},rt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([l,w])=>{let g=d?d+l:l;if(typeof w=="object")rt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let l=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${l}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=X(),a=0,h=[],l=u||{};try{if(u?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(l.terminate=!1);let w=0;return u?.tag!==void 0&&(w=Q(u.tag,h)),a=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&rt(u.extra,"",new WeakSet,(g,i)=>{let A=Q(g,h),D=Q(i,h);d._OrtAddRunConfigEntry(a,A,D)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let l=typeof h=="string"?h:h.name;switch(l){case"webnn":if(l="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=Q("deviceType",a),A=Q(g.deviceType,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let A=Q("numThreads",a),D=Q(i.toString(),a);X()._OrtAddSessionConfigEntry(u,A,D)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=Q("powerPreference",a),A=Q(g.powerPreference,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=Q("preferredLayout",a),A=Q(g.preferredLayout,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let w=Q(l,a);X()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${l}.`)}},Cr=u=>{let d=X(),a=0,h=[],l=u||{};cn(l);try{let w=fn(l.graphOptimizationLevel??"all"),g=ln(l.executionMode??"sequential"),i=typeof l.logId=="string"?Q(l.logId,h):0,A=l.logSeverityLevel??2;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log serverity level is not valid: ${A}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let I=typeof l.optimizedModelFilePath=="string"?Q(l.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!l.enableCpuMemArena,!!l.enableMemPattern,g,!!l.enableProfiling,0,i,A,D,I),a===0&&V("Can\'t create session options."),l.executionProviders&&dn(a,l.executionProviders,h),l.freeDimensionOverrides)for(let[B,F]of Object.entries(l.freeDimensionOverrides)){if(typeof B!="string")throw new Error(`free dimension override name must be a string: ${B}`);if(typeof F!="number"||!Number.isInteger(F)||F<0)throw new Error(`free dimension override value must be a non-negative integer: ${F}`);let U=Q(B,h);d._OrtAddFreeDimensionOverride(a,U,F)!==0&&V(`Can\'t set a free dimension override: ${B} - ${F}.`)}return l.extra!==void 0&&rt(l.extra,"",new WeakSet,(B,F)=>{let U=Q(B,h),k=Q(F,h);d._OrtAddSessionConfigEntry(a,U,k)!==0&&V(`Can\'t set a session config entry: ${B} - ${F}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],xr=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Ur=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let l of a)h.push(l);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let l=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let A=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:A,maximum:A}).buffer}else throw i}let g=0;for(;;){let{done:i,value:A}=await l.read();if(i)break;let D=A.byteLength;new Uint8Array(w,g,D).set(A),g+=D}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{X()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,Fr(u.logLevel))},Br=async(u,d)=>{},nt=new Map,mn=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=X(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Wr=async(u,d)=>{let a,h,l=X();Array.isArray(u)?[a,h]=u:u.buffer===l.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,A=[],D=[],I=[];try{if([g,A]=Cr(d),d?.externalData&&l.mountExternalData){let x=[];for(let N of d.externalData){let he=typeof N=="string"?N:N.path;x.push(Rr(typeof N=="string"?N:N.data).then(ie=>{l.mountExternalData(he,ie)}))}await Promise.all(x)}w=l._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[B,F]=mn(w),U=[],k=[],L=[];for(let x=0;x<B;x++){let N=l._OrtGetInputName(w,x);N===0&&V("Can\'t get an input name."),D.push(N),U.push(l.UTF8ToString(N))}for(let x=0;x<F;x++){let N=l._OrtGetOutputName(w,x);N===0&&V("Can\'t get an output name."),I.push(N);let he=l.UTF8ToString(N);k.push(he)}let _=null;return nt.set(w,[w,D,I,_]),[w,U,k]}catch(B){throw D.forEach(F=>l._OrtFree(F)),I.forEach(F=>l._OrtFree(F)),i!==0&&l._OrtReleaseBinding(i),w!==0&&l._OrtReleaseSession(w),B}finally{l._free(a),g!==0&&l._OrtReleaseSessionOptions(g),A.forEach(B=>l._free(B)),l.unmountExternalData?.()}},kr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,l,w,g]=a;g&&d._OrtReleaseBinding(g.handle),d.jsepUnregisterBuffers?.(u),l.forEach(i=>d._OrtFree(i)),w.forEach(i=>d._OrtFree(i)),d._OrtReleaseSession(h),nt.delete(u)},Ir=(u,d,a,h,l)=>{if(!u){d.push(0);return}let w=X(),g=u[0],i=u[1],A=u[3],D,I;if(g==="string"&&A==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(A==="gpu-buffer"){let U=u[2].gpuBuffer,k=It(Rt(g));I=i.reduce((L,_)=>L*_,1)*k,D=w.jsepRegisterBuffer(h,l,U,I)}else{let U=u[2];if(Array.isArray(U)){I=4*U.length,D=w._malloc(I),a.push(D);let k=D/4;for(let L=0;L<U.length;L++){if(typeof U[L]!="string")throw new TypeError(`tensor data at index ${L} is not a string`);w.HEAPU32[k++]=Q(U[L],a)}}else I=U.byteLength,D=w._malloc(I),a.push(D),w.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,I),D)}let B=w.stackSave(),F=w.stackAlloc(4*i.length);try{let U=F/4;i.forEach(L=>w.HEAP32[U++]=L);let k=w._OrtCreateTensor(Rt(g),D,I,F,i.length,Pr(A));k===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${l}.`),d.push(k)}finally{w.stackRestore(B)}},Nr=async(u,d,a,h,l,w)=>{let g=X(),i=nt.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[A,D,I,B]=i,F=d.length,U=h.length,k=0,L=[],_=[],x=[],N=[],he=g.stackSave(),ie=g.stackAlloc(F*4),ae=g.stackAlloc(F*4),E=g.stackAlloc(U*4),Y=g.stackAlloc(U*4);try{[k,L]=Mr(w);for(let P=0;P<F;P++)Ir(a[P],_,N,u,d[P]);for(let P=0;P<U;P++)Ir(l[P],x,N,u,F+h[P]);let ue=ie/4,Re=ae/4,Ie=E/4,ee=Y/4;for(let P=0;P<F;P++)g.HEAPU32[ue++]=_[P],g.HEAPU32[Re++]=D[d[P]];for(let P=0;P<U;P++)g.HEAPU32[Ie++]=x[P],g.HEAPU32[ee++]=I[h[P]];let j;j=await g._OrtRun(A,ae,ie,F,Y,U,E,k),j!==0&&V("failed to call OrtRun().");let ce=[];for(let P=0;P<U;P++){let te=g.HEAPU32[E/4+P];if(te===x[P]){ce.push(l[P]);continue}let de=g.stackSave(),ge=g.stackAlloc(4*4),ye=!1,J,fe=0;try{g._OrtGetTensorData(te,ge,ge+4,ge+8,ge+12)!==0&&V(`Can\'t access output tensor data on index ${P}.`);let Ae=ge/4,Me=g.HEAPU32[Ae++];fe=g.HEAPU32[Ae++];let Fe=g.HEAPU32[Ae++],Ee=g.HEAPU32[Ae++],pe=[];for(let re=0;re<Ee;re++)pe.push(g.HEAPU32[Fe/4+re]);g._OrtFree(Fe);let Oe=pe.reduce((re,Z)=>re*Z,1);J=Dr(Me);let ve=B?.outputPreferredLocations[h[P]];if(J==="string"){if(ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Z=fe/4;for(let Ce=0;Ce<Oe;Ce++){let be=g.HEAPU32[Z++],_e=Ce===Oe-1?void 0:g.HEAPU32[Z]-be;re.push(g.UTF8ToString(be,_e))}ce.push([J,pe,re,"cpu"])}else if(ve==="gpu-buffer"&&Oe>0){let re=g.jsepGetBuffer(fe),Z=It(Me);if(Z===void 0||!Ur(J))throw new Error(`Unsupported data type: ${J}`);ye=!0,ce.push([J,pe,{gpuBuffer:re,download:g.jsepCreateDownloader(re,Oe*Z,J),dispose:()=>{g._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let re=xr(J),Z=new re(Oe);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(fe,fe+Z.byteLength)),ce.push([J,pe,Z,"cpu"])}}finally{g.stackRestore(de),J==="string"&&fe&&g._free(fe),ye||g._OrtReleaseTensor(te)}}return B&&g._OrtClearBoundOutputs(B.handle),ce}finally{g.stackRestore(he),_.forEach(ue=>g._OrtReleaseTensor(ue)),x.forEach(ue=>g._OrtReleaseTensor(ue)),N.forEach(ue=>g._free(ue)),k!==0&&g._OrtReleaseRunOptions(k),L.forEach(ue=>g._free(ue))}},Hr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error("invalid session id");let h=a[0],l=d._OrtEndProfiling(h);l===0&&V("Can\'t get an profile file name."),d._OrtFree(l)},$r=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:l}=a;Br(l,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,l=Lt(h);postMessage({type:d,out:l});break}case"create":{let{model:h,options:l}=a;Wr(h,l).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":kr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:l,inputs:w,outputIndices:g,options:i}=a;Nr(h,l,w,g,new Array(g.length).fill(null),i).then(A=>{A.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:A},$r(A))},A=>{postMessage({type:d,err:A})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'}),Xi,qn,iu,dc,hc,r1,gh,Xa,Ya,lA,pc,YC,ZC,KC,QC,JC,eO,tO,rO=Y(()=>{"use strict";Go(),yG(),Nc(),Xi=()=>!!we.wasm.proxy&&typeof document<"u",iu=!1,dc=!1,hc=!1,gh=new Map,Xa=(t,e)=>{let r=gh.get(t);r?r.push(e):gh.set(t,[e])},Ya=()=>{if(iu||!dc||hc||!qn)throw new Error("worker not ready")},lA=t=>{switch(t.data.type){case"init-wasm":iu=!1,t.data.err?(hc=!0,r1[1](t.data.err)):(dc=!0,r1[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=gh.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}default:}},pc=typeof document<"u"?document?.currentScript?.src:void 0,YC=()=>U(void 0,null,function*(){if(!dc){if(iu)throw new Error("multiple calls to 'initWasm()' detected.");if(hc)throw new Error("previous call to 'initWasm()' failed.");if(iu=!0,Xi())return we.wasm.wasmPaths===void 0&&pc&&pc.indexOf("blob:")!==0&&(we.wasm.wasmPaths=pc.substr(0,+pc.lastIndexOf("/")+1)),new Promise((t,e)=>{qn?.terminate();let r=URL.createObjectURL(new Blob([vG()],{type:"text/javascript"}));qn=new Worker(r,{name:"ort-wasm-proxy-worker"}),qn.onerror=i=>e(i),qn.onmessage=lA,URL.revokeObjectURL(r),r1=[t,e];let n={type:"init-wasm",in:we};qn.postMessage(n)});try{yield NC(we.wasm),yield UC(we),dc=!0}catch(t){throw hc=!0,t}finally{iu=!1}}}),ZC=t=>U(void 0,null,function*(){if(Xi())return Ya(),new Promise((e,r)=>{Xa("init-ep",[e,r]);let n={type:"init-ep",in:{epName:t,env:we}};qn.postMessage(n)});yield HC(we,t)}),KC=t=>U(void 0,null,function*(){return Xi()?(Ya(),new Promise((e,r)=>{Xa("copy-from",[e,r]);let n={type:"copy-from",in:{buffer:t}};qn.postMessage(n,[t.buffer])})):V1(t)}),QC=(t,e)=>U(void 0,null,function*(){if(Xi()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Ya(),new Promise((r,n)=>{Xa("create",[r,n]);let i={type:"create",in:{model:t,options:e}},a=[];t instanceof Uint8Array&&a.push(t.buffer),qn.postMessage(i,a)})}else return zC(t,e)}),JC=t=>U(void 0,null,function*(){if(Xi())return Ya(),new Promise((e,r)=>{Xa("release",[e,r]);let n={type:"release",in:t};qn.postMessage(n)});GC(t)}),eO=(t,e,r,n,i,a)=>U(void 0,null,function*(){if(Xi()){if(r.some(u=>u[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(u=>u))throw new Error("pre-allocated output tensor is not supported for proxy.");return Ya(),new Promise((u,s)=>{Xa("run",[u,s]);let l=r,o={type:"run",in:{sessionId:t,inputIndices:e,inputs:l,outputIndices:n,options:a}};qn.postMessage(o,XC(l))})}else return WC(t,e,r,n,i,a)}),tO=t=>U(void 0,null,function*(){if(Xi())return Ya(),new Promise((e,r)=>{Xa("end-profiling",[e,r]);let n={type:"end-profiling",in:t};qn.postMessage(n)});qC(t)})}),n1,cA,nO,bG=Y(()=>{"use strict";Go(),rO(),VC(),jC(),n1=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},cA=t=>{switch(t[3]){case"cpu":return new Wr(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!ny(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=t[2];return Wr.fromGpuBuffer(r,{dataType:e,dims:t[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${t[3]}`)}},nO=class{fetchModelAndCopyToWasmMemory(t){return U(this,null,function*(){return KC(yield Th(t))})}loadModel(t,e){return U(this,null,function*(){cu();let r;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?r=yield Th(t):r=yield this.fetchModelAndCopyToWasmMemory(t):r=t,[this.sessionId,this.inputNames,this.outputNames]=yield QC(r,e),fu()})}dispose(){return U(this,null,function*(){return JC(this.sessionId)})}run(t,e,r){return U(this,null,function*(){cu();let n=[],i=[];Object.entries(t).forEach(f=>{let d=f[0],h=f[1],p=this.inputNames.indexOf(d);if(p===-1)throw new Error(`invalid input '${d}'`);n.push(h),i.push(p)});let a=[],u=[];Object.entries(e).forEach(f=>{let d=f[0],h=f[1],p=this.outputNames.indexOf(d);if(p===-1)throw new Error(`invalid output '${d}'`);a.push(h),u.push(p)});let s=n.map((f,d)=>n1(f,()=>`input "${this.inputNames[i[d]]}"`)),l=a.map((f,d)=>f?n1(f,()=>`output "${this.outputNames[u[d]]}"`):null),o=yield eO(this.sessionId,i,s,u,l,r),c={};for(let f=0;f<o.length;f++)c[this.outputNames[u[f]]]=a[f]??cA(o[f]);return fu(),c})}startProfiling(){}endProfiling(){tO(this.sessionId)}}}),fA,oO,wG=Y(()=>{"use strict";Go(),rO(),bG(),fA=()=>{if((typeof we.wasm.initTimeout!="number"||we.wasm.initTimeout<0)&&(we.wasm.initTimeout=0),typeof we.wasm.simd!="boolean"&&(we.wasm.simd=!0),typeof we.wasm.proxy!="boolean"&&(we.wasm.proxy=!1),typeof we.wasm.trace!="boolean"&&(we.wasm.trace=!1),typeof we.wasm.numThreads!="number"||!Number.isInteger(we.wasm.numThreads)||we.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(we.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;we.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},oO=class{init(t){return U(this,null,function*(){fA(),yield YC(),yield ZC(t)})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new nO;return yield r.loadModel(t,e),Promise.resolve(r)})}}}),iO={};hu(iO,{wasmBackend:()=>aO});var aO,xG=Y(()=>{"use strict";wG(),aO=new oO});Go();Go();Go();var _G="1.17.1",T1e=OA;{let t=(uG(),Ja(EC)).onnxjsBackend;su("webgl",t,-10)}{let t=(xG(),Ja(iO)).wasmBackend;su("cpu",t,10),su("wasm",t,10),su("webnn",t,9)}Object.defineProperty(we.versions,"web",{value:_G,enumerable:!0});var TG=Object.create,Hh=Object.defineProperty,IG=Object.getOwnPropertyDescriptor,AG=Object.getOwnPropertyNames,SG=Object.getPrototypeOf,DG=Object.prototype.hasOwnProperty,ee=(t,e)=>()=>(t&&(e=t(t=0)),e),xr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),IP=(t,e)=>{for(var r in e)Hh(t,r,{get:e[r],enumerable:!0})},AP=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of AG(e))!DG.call(t,i)&&i!==r&&Hh(t,i,{get:()=>e[i],enumerable:!(n=IG(e,i))||n.enumerable});return t},wu=(t,e,r)=>(r=t!=null?TG(SG(t)):{},AP(e||!t||!t.__esModule?Hh(r,"default",{value:t,enumerable:!0}):r,t)),CG=t=>AP(Hh({},"__esModule",{value:!0}),t),Rc,ea,yv,vv,bv=ee(()=>{"use strict";Rc=new Map,ea=[],yv=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=Rc.get(t);if(n===void 0)Rc.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let i=ea.indexOf(t);i!==-1&&ea.splice(i,1);for(let a=0;a<ea.length;a++)if(Rc.get(ea[a]).priority<=r){ea.splice(a,0,t);return}ea.push(t)}return}throw new TypeError("not a valid backend")},vv=t=>U(void 0,null,function*(){let e=t.length===0?ea:t,r=[];for(let n of e){let i=Rc.get(n);if(i){if(i.initialized)return i.backend;if(i.aborted)continue;let a=!!i.initPromise;try{return a||(i.initPromise=i.backend.init(n)),yield i.initPromise,i.initialized=!0,i.backend}catch(u){a||r.push({name:n,err:u}),i.aborted=!0}finally{delete i.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),OG=ee(()=>{"use strict";bv()}),SP,PG=ee(()=>{"use strict";SP="1.17.1"}),oy,bu,DP=ee(()=>{"use strict";PG(),oy="warning",bu={wasm:{},webgl:{},webgpu:{},versions:{common:SP},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);oy=t}},get logLevel(){return oy}},Object.defineProperty(bu,"logLevel",{enumerable:!0})}),$r,MG=ee(()=>{"use strict";DP(),$r=bu}),CP,OP,NG=ee(()=>{"use strict";CP=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let i,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[3]):(i=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,o;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?o=[0,0,0,0]:typeof s.bias=="number"?o=[s.bias,s.bias,s.bias,s.bias]:(o=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(o[3]=s.bias[3]));let c=a*i,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<i;v++){let x=(t.data[f++]-o[0])*l[0],y=(t.data[d++]-o[1])*l[1],_=(t.data[h++]-o[2])*l[2],I=p===-1?255:(t.data[p++]-o[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},OP=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[1],u=t.dims[3]):(i=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,o,c;l===void 0||l.mean===void 0?o=[255,255,255,255]:typeof l.mean=="number"?o=[l.mean,l.mean,l.mean,l.mean]:(o=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(o[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*i;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(i,a);for(let C=0;C<a*i;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*o[0],n.data[p]=(t.data[y++]-c[1])*o[1],n.data[m]=(t.data[_++]-c[2])*o[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*o[3]}else throw new Error("Can not access image data");return n}}),Ch,PP,MP,NP,RP,RG=ee(()=>{"use strict";wv(),Ch=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,i=e.norm??{mean:255,bias:0},a,u;typeof i.mean=="number"?a=[i.mean,i.mean,i.mean,i.mean]:a=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?u=[i.bias,i.bias,i.bias,i.bias]:u=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",o=r*n,c=l==="RGBA"?new Float32Array(o*4):new Float32Array(o*3),f=4,d=0,h=1,p=2,m=3,v=0,x=o,y=o*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=o*3:l==="RBG"?(v=0,y=o,x=o*2):l==="BGR"&&(y=0,x=o,v=o*2);for(let I=0;I<o;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new So("float32",c,[1,4,r,n]):new So("float32",c,[1,3,r,n])},PP=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,i=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},o=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=o(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(i){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,Ch(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=o(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(Ch(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Ch(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),MP=(t,e)=>{let{width:r,height:n,download:i,dispose:a}=e,u=[1,n,r,4];return new So({location:"texture",type:"float32",texture:t,dims:u,download:i,dispose:a})},NP=(t,e)=>{let{dataType:r,dims:n,download:i,dispose:a}=e;return new So({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:i,dispose:a})},RP=(t,e,r)=>new So({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),Xc,Rh,iy,FP,FG=ee(()=>{"use strict";Xc=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Rh=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),iy=!1,FP=()=>{if(!iy){iy=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(Xc.set("int64",BigInt64Array),Rh.set(BigInt64Array,"int64")),e&&(Xc.set("uint64",BigUint64Array),Rh.set(BigUint64Array,"uint64"))}}}),kP,LP,kG=ee(()=>{"use strict";wv(),kP=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},LP=(t,e)=>{switch(t.location){case"cpu":return new So(t.type,t.data,e);case"cpu-pinned":return new So({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new So({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new So({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),So,wv=ee(()=>{"use strict";NG(),RG(),FG(),kG(),So=class{constructor(t,e,r){FP();let n,i;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,i=t.dims,t.location){case"cpu-pinned":{let u=Xc.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=Xc.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Rh.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");i=s,this.cpuData=u,this.dataLocation="cpu"}let a=kP(i);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=a}static fromImage(t,e){return U(this,null,function*(){return PP(t,e)})}static fromTexture(t,e){return MP(t,e)}static fromGpuBuffer(t,e){return NP(t,e)}static fromPinnedBuffer(t,e,r){return RP(t,e,r)}toDataURL(t){return CP(this,t)}toImageData(t){return OP(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return LP(this,t)}}}),$n,xv=ee(()=>{"use strict";wv(),$n=So}),Ly,ay,Lh,Bh,BP=ee(()=>{"use strict";DP(),Ly=(t,e)=>{bu.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},ay=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[i].trim().split(" ")[1]}`;e&&(a+=`::${e}`),Ly("CPU",a);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},Lh=t=>{bu.wasm.trace&&ay("BEGIN",t)},Bh=t=>{bu.wasm.trace&&ay("END",t)}}),$P,LG=ee(()=>{"use strict";bv(),xv(),BP(),$P=class VP{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){Lh();let i={},a={};if(typeof e!="object"||e===null||e instanceof $n||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof $n)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let o of r){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);i[o]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof $n)&&(o=!0,u=!1,i[f]=d)}if(o){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of this.inputNames)if(typeof e[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(u)for(let o of this.outputNames)i[o]=null;let s=yield this.handler.run(e,i,a),l={};for(let o in s)if(Object.hasOwnProperty.call(s,o)){let c=s[o];c instanceof $n?l[o]=c:l[o]=new $n(c.type,c.data,c.dims)}return Bh(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,i){return U(this,null,function*(){Lh();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let o=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=o.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${o.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>o.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${o.byteLength-c}].`);if(typeof i=="object"&&i!==null)u=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(o,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(o=>typeof o=="string"?o:o.name),l=yield(yield vv(s)).createInferenceSessionHandler(a,u);return Bh(),new VP(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),jP,BG=ee(()=>{"use strict";LG(),jP=$P}),$G=ee(()=>{"use strict"}),sO,UP,VG=ee(()=>{"use strict";bv(),xv(),sO="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",UP=class HP{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",i=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield vv(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,i,a);return new HP(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(sO)})}typeNarrowingForRunStep(e,r,n,i,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof $n||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof i=="object"){if(i===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(i instanceof $n)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(i)){if(i.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let o of i){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);u[o]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(i);for(let f of r)if(c.indexOf(f)!==-1){let d=i[f];(d===null||d instanceof $n)&&(o=!0,l=!1,u[f]=d)}if(o){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=i}}else if(typeof i<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of e)if(typeof n[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(l)for(let o of r)u[o]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let i=e[n];i instanceof $n?r[n]=i:r[n]=new $n(i.type,i.data,i.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[i,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[i,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),zP,jG=ee(()=>{"use strict";VG(),zP=UP}),GP={};IP(GP,{InferenceSession:()=>jP,TRACE:()=>Ly,TRACE_FUNC_BEGIN:()=>Lh,TRACE_FUNC_END:()=>Bh,Tensor:()=>$n,TrainingSession:()=>zP,env:()=>$r,registerBackend:()=>yv});var as=ee(()=>{"use strict";OG(),MG(),BG(),xv(),BP(),$G(),jG()});function os(t,e,r,n){if(e===void 0)return UG(t);if(r===void 0)Oh(t,e,1);else if(typeof r=="number"&&n===void 0)Oh(t,e,r);else if(typeof r=="string"&&n===void 0)Oh(t,r,1,e);else if(typeof r=="string"&&typeof n=="number")Oh(t,r,n,e);else throw new TypeError("input is valid")}function UG(t){return{verbose:os.verbose.bind(null,t),info:os.info.bind(null,t),warning:os.warning.bind(null,t),error:os.error.bind(null,t),fatal:os.fatal.bind(null,t)}}function Oh(t,e,r,n){let i=vu[n||""]||vu[""];By[t]<By[i.minimalSeverity]||(i.logDateTime&&(e=`${new Date().toISOString()}|${e}`),i.logSourceLocation,WP[i.provider].log(t,e,n))}var uO,lO,By,WP,sy,vu,dr,uy,ly,qP,Fc,Do=ee(()=>{"use strict";uO=class{log(t,e,r){}},lO=class{log(t,e,r){console.log(`${this.color(t)} ${r?"\x1B[35m"+r+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},By={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},WP={none:new uO,console:new lO},sy={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},vu={"":sy},(t=>{function e(o,c){t("verbose",o,c)}t.verbose=e;function r(o,c){t("info",o,c)}t.info=r;function n(o,c){t("warning",o,c)}t.warning=n;function i(o,c){t("error",o,c)}t.error=i;function a(o,c){t("fatal",o,c)}t.fatal=a;function u(o){vu={},s("",o||{})}t.reset=u;function s(o,c){if(o==="*")u(c);else{let f=vu[o]||sy;vu[o]={provider:c.provider||f.provider,minimalSeverity:c.minimalSeverity||f.minimalSeverity,logDateTime:c.logDateTime===void 0?f.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?f.logSourceLocation:c.logSourceLocation}}}t.set=s;function l(o){let c={};o.logLevel&&(c.minimalSeverity=o.logLevel),s("",c)}t.setWithEnv=l})(os||={}),dr=os,uy=class{constructor(t,e,r,n,i,a){this.category=t,this.name=e,this.startTime=r,this.endCallback=n,this.timer=i,this.ctx=a}end(){return U(this,null,function*(){return this.endCallback(this)})}checkTimer(){return U(this,null,function*(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)})}},ly=class{constructor(t,e,r,n){this.category=t,this.name=e,this.startTime=r,this.endTime=n}},qP=class{constructor(t,e,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=r===void 0?5e3:r}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Fc(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,r,n){let i=this._started?this.begin(t,e,n):void 0,a=!1,u=r();if(u&&typeof u.then=="function")return a=!0,new Promise((s,l)=>{u.then(o=>U(this,null,function*(){i&&(yield i.end()),s(o)}),o=>U(this,null,function*(){i&&(yield i.end()),l(o)}))});if(!a&&i){let s=i.end();if(s&&typeof s.then=="function")return new Promise((l,o)=>{s.then(()=>{l(u)},c=>{o(c)})})}return u}begin(t,e,r){if(!this._started)throw new Error("profiler is not started yet");if(r===void 0){let n=Fc();return this.flush(n),new uy(t,e,n,i=>this.endSync(i))}else{let n=r.beginTimer();return new uy(t,e,0,i=>U(this,null,function*(){return this.end(i)}),n,r)}}end(t){return U(this,null,function*(){let e=yield t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ly(t.category,t.name,t.startTime,e)),this.flush(e))})}endSync(t){let e=Fc();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new ly(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){dr.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Fc()}}get started(){return this._started}},Fc=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function HG(t,e,r){for(let n of r){let i=n[0],a=n[1],u=n[2],s=n[3],l=n[4];if(t.opType===i){for(let o of e)if((o.domain===a||o.domain==="ai.onnx"&&a==="")&&zG(o.version,u))return{opImpl:s,opInit:l}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(n=>`${n.domain||"ai.onnx"} v${n.version}`).join(", ")}`)}function zG(t,e){if(e.endsWith("+")){let r=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(r)&&r<=t}else if(e.split("-").length===2){let r=e.split("-"),n=Number.parseInt(r[0],10),i=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(i)&&n<=t&&t<=i}else return Number.parseInt(e,10)===t}var GG=ee(()=>{"use strict"}),WG=xr(t=>{"use strict";t.__esModule=!0;var e=function(){function r(n){if(!n)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,n&&r.isGuid(n)&&(this.value=n)}return r.isGuid=function(n){var i=n.toString();return n&&(n instanceof r||r.validator.test(i))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(n){return new r(n)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(n){for(var i="",a=0;a<n;a++)i+=((1+Math.random())*65536|0).toString(16).substring(1);return i},r.prototype.equals=function(n){return r.isGuid(n)&&this.value===n.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();t.Guid=e});function qt(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}function Jr(t){return(t&&t.__isLong__)===!0}function cO(t){var e=Math.clz32(t&-t);return t?31-e:e}function ts(t,e){var r,n,i;return e?(t>>>=0,(i=0<=t&&t<256)&&(n=Vy[t],n)?n:(r=ut(t,0,!0),i&&(Vy[t]=r),r)):(t|=0,(i=-128<=t&&t<128)&&(n=$y[t],n)?n:(r=ut(t,t<0?-1:0,!1),i&&($y[t]=r),r))}function Qn(t,e){if(isNaN(t))return e?Wo:Kn;if(e){if(t<0)return Wo;if(t>=jy)return zy}else{if(t<=-Uy)return fn;if(t+1>=Uy)return Hy}return t<0?Qn(-t,e).neg():ut(t%is|0,t/is|0,e)}function ut(t,e,r){return new qt(t,e,r)}function _v(t,e,r){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?Wo:Kn;if(r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return _v(t.substring(1),e,r).neg();for(var i=Qn(Yc(r,8)),a=Kn,u=0;u<t.length;u+=8){var s=Math.min(8,t.length-u),l=parseInt(t.substring(u,u+s),r);if(s<8){var o=Qn(Yc(r,s));a=a.mul(o).add(Qn(l))}else a=a.mul(i),a=a.add(Qn(l))}return a.unsigned=e,a}function Ao(t,e){return typeof t=="number"?Qn(t,e):typeof t=="string"?_v(t,e):ut(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var Fn,$y,Vy,Yc,cy,fO,is,jy,Uy,fy,Kn,Wo,rs,dy,Ph,Hy,zy,fn,oe,oa,XP=ee(()=>{Fn=null;try{Fn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}qt.prototype.__isLong__,Object.defineProperty(qt.prototype,"__isLong__",{value:!0}),qt.isLong=Jr,$y={},Vy={},qt.fromInt=ts,qt.fromNumber=Qn,qt.fromBits=ut,Yc=Math.pow,qt.fromString=_v,qt.fromValue=Ao,cy=65536,fO=1<<24,is=cy*cy,jy=is*is,Uy=jy/2,fy=ts(fO),Kn=ts(0),qt.ZERO=Kn,Wo=ts(0,!0),qt.UZERO=Wo,rs=ts(1),qt.ONE=rs,dy=ts(1,!0),qt.UONE=dy,Ph=ts(-1),qt.NEG_ONE=Ph,Hy=ut(-1,2147483647,!1),qt.MAX_VALUE=Hy,zy=ut(-1,-1,!0),qt.MAX_UNSIGNED_VALUE=zy,fn=ut(0,-2147483648,!1),qt.MIN_VALUE=fn,oe=qt.prototype,oe.toInt=function(){return this.unsigned?this.low>>>0:this.low},oe.toNumber=function(){return this.unsigned?(this.high>>>0)*is+(this.low>>>0):this.high*is+(this.low>>>0)},oe.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(fn)){var e=Qn(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var i=Qn(Yc(t,6),this.unsigned),a=this,u="";;){var s=a.div(i),l=a.sub(s.mul(i)).toInt()>>>0,o=l.toString(t);if(a=s,a.isZero())return o+u;for(;o.length<6;)o="0"+o;u=""+o+u}},oe.getHighBits=function(){return this.high},oe.getHighBitsUnsigned=function(){return this.high>>>0},oe.getLowBits=function(){return this.low},oe.getLowBitsUnsigned=function(){return this.low>>>0},oe.getNumBitsAbs=function(){if(this.isNegative())return this.eq(fn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},oe.isZero=function(){return this.high===0&&this.low===0},oe.eqz=oe.isZero,oe.isNegative=function(){return!this.unsigned&&this.high<0},oe.isPositive=function(){return this.unsigned||this.high>=0},oe.isOdd=function(){return(this.low&1)===1},oe.isEven=function(){return(this.low&1)===0},oe.equals=function(t){return Jr(t)||(t=Ao(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},oe.eq=oe.equals,oe.notEquals=function(t){return!this.eq(t)},oe.neq=oe.notEquals,oe.ne=oe.notEquals,oe.lessThan=function(t){return this.comp(t)<0},oe.lt=oe.lessThan,oe.lessThanOrEqual=function(t){return this.comp(t)<=0},oe.lte=oe.lessThanOrEqual,oe.le=oe.lessThanOrEqual,oe.greaterThan=function(t){return this.comp(t)>0},oe.gt=oe.greaterThan,oe.greaterThanOrEqual=function(t){return this.comp(t)>=0},oe.gte=oe.greaterThanOrEqual,oe.ge=oe.greaterThanOrEqual,oe.compare=function(t){if(Jr(t)||(t=Ao(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},oe.comp=oe.compare,oe.negate=function(){return!this.unsigned&&this.eq(fn)?fn:this.not().add(rs)},oe.neg=oe.negate,oe.add=function(t){Jr(t)||(t=Ao(t));var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,i=this.low&65535,a=t.high>>>16,u=t.high&65535,s=t.low>>>16,l=t.low&65535,o=0,c=0,f=0,d=0;return d+=i+l,f+=d>>>16,d&=65535,f+=n+s,c+=f>>>16,f&=65535,c+=r+u,o+=c>>>16,c&=65535,o+=e+a,o&=65535,ut(f<<16|d,o<<16|c,this.unsigned)},oe.subtract=function(t){return Jr(t)||(t=Ao(t)),this.add(t.neg())},oe.sub=oe.subtract,oe.multiply=function(t){if(this.isZero())return this;if(Jr(t)||(t=Ao(t)),Fn){var e=Fn.mul(this.low,this.high,t.low,t.high);return ut(e,Fn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Wo:Kn;if(this.eq(fn))return t.isOdd()?fn:Kn;if(t.eq(fn))return this.isOdd()?fn:Kn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(fy)&&t.lt(fy))return Qn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=this.high&65535,i=this.low>>>16,a=this.low&65535,u=t.high>>>16,s=t.high&65535,l=t.low>>>16,o=t.low&65535,c=0,f=0,d=0,h=0;return h+=a*o,d+=h>>>16,h&=65535,d+=i*o,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=n*o,c+=f>>>16,f&=65535,f+=i*l,c+=f>>>16,f&=65535,f+=a*s,c+=f>>>16,f&=65535,c+=r*o+n*l+i*s+a*u,c&=65535,ut(d<<16|h,c<<16|f,this.unsigned)},oe.mul=oe.multiply,oe.divide=function(t){if(Jr(t)||(t=Ao(t)),t.isZero())throw Error("division by zero");if(Fn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Fn.div_u:Fn.div_s)(this.low,this.high,t.low,t.high);return ut(e,Fn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Wo:Kn;var r,n,i;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Wo;if(t.gt(this.shru(1)))return dy;i=Wo}else{if(this.eq(fn)){if(t.eq(rs)||t.eq(Ph))return fn;if(t.eq(fn))return rs;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(Kn)?t.isNegative()?rs:Ph:(n=this.sub(t.mul(r)),i=r.add(n.div(t)),i)}else if(t.eq(fn))return this.unsigned?Wo:Kn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();i=Kn}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),s=u<=48?1:Yc(2,u-48),l=Qn(r),o=l.mul(t);o.isNegative()||o.gt(n);)r-=s,l=Qn(r,this.unsigned),o=l.mul(t);l.isZero()&&(l=rs),i=i.add(l),n=n.sub(o)}return i},oe.div=oe.divide,oe.modulo=function(t){if(Jr(t)||(t=Ao(t)),Fn){var e=(this.unsigned?Fn.rem_u:Fn.rem_s)(this.low,this.high,t.low,t.high);return ut(e,Fn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},oe.mod=oe.modulo,oe.rem=oe.modulo,oe.not=function(){return ut(~this.low,~this.high,this.unsigned)},oe.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},oe.clz=oe.countLeadingZeros,oe.countTrailingZeros=function(){return this.low?cO(this.low):cO(this.high)+32},oe.ctz=oe.countTrailingZeros,oe.and=function(t){return Jr(t)||(t=Ao(t)),ut(this.low&t.low,this.high&t.high,this.unsigned)},oe.or=function(t){return Jr(t)||(t=Ao(t)),ut(this.low|t.low,this.high|t.high,this.unsigned)},oe.xor=function(t){return Jr(t)||(t=Ao(t)),ut(this.low^t.low,this.high^t.high,this.unsigned)},oe.shiftLeft=function(t){return Jr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ut(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ut(0,this.low<<t-32,this.unsigned)},oe.shl=oe.shiftLeft,oe.shiftRight=function(t){return Jr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ut(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ut(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},oe.shr=oe.shiftRight,oe.shiftRightUnsigned=function(t){return Jr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ut(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?ut(this.high,0,this.unsigned):ut(this.high>>>t-32,0,this.unsigned)},oe.shru=oe.shiftRightUnsigned,oe.shr_u=oe.shiftRightUnsigned,oe.rotateLeft=function(t){var e;return Jr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?ut(this.high,this.low,this.unsigned):t<32?(e=32-t,ut(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,ut(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},oe.rotl=oe.rotateLeft,oe.rotateRight=function(t){var e;return Jr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?ut(this.high,this.low,this.unsigned):t<32?(e=32-t,ut(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,ut(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},oe.rotr=oe.rotateRight,oe.toSigned=function(){return this.unsigned?ut(this.low,this.high,!1):this},oe.toUnsigned=function(){return this.unsigned?this:ut(this.low,this.high,!0)},oe.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},oe.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},oe.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},qt.fromBytes=function(t,e,r){return r?qt.fromBytesLE(t,e):qt.fromBytesBE(t,e)},qt.fromBytesLE=function(t,e){return new qt(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},qt.fromBytesBE=function(t,e){return new qt(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},oa=qt}),V,Ev=ee(()=>{V={},V.Offset,V.Table,V.SIZEOF_SHORT=2,V.SIZEOF_INT=4,V.FILE_IDENTIFIER_LENGTH=4,V.SIZE_PREFIX_LENGTH=4,V.Encoding={UTF8_BYTES:1,UTF16_STRING:2},V.int32=new Int32Array(2),V.float32=new Float32Array(V.int32.buffer),V.float64=new Float64Array(V.int32.buffer),V.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,V.Long=function(t,e){this.low=t|0,this.high=e|0},V.Long.create=function(t,e){return t==0&&e==0?V.Long.ZERO:new V.Long(t,e)},V.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},V.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},V.Long.ZERO=new V.Long(0,0),V.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=V.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},V.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},V.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},V.Builder.prototype.dataBuffer=function(){return this.bb},V.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},V.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<r+t+e;){var n=this.bb.capacity();this.bb=V.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(r)},V.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},V.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},V.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},V.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},V.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},V.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},V.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},V.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},V.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},V.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},V.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},V.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},V.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},V.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},V.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},V.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},V.Builder.prototype.addFieldInt64=function(t,e,r){(this.force_defaults||!e.equals(r))&&(this.addInt64(e),this.slot(t))},V.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},V.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},V.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},V.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},V.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},V.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},V.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},V.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},V.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,n=V.ByteBuffer.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n},V.Builder.prototype.addOffset=function(t){this.prep(V.SIZEOF_INT,0),this.writeInt32(this.offset()-t+V.SIZEOF_INT)},V.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},V.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var r=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var n=2;this.addInt16(t-this.object_start);var i=(r+n)*V.SIZEOF_SHORT;this.addInt16(i);var a=0,u=this.space;e:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(i==this.bb.readInt16(s)){for(var l=V.SIZEOF_SHORT;l<i;l+=V.SIZEOF_SHORT)if(this.bb.readInt16(u+l)!=this.bb.readInt16(s+l))continue e;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},V.Builder.prototype.finish=function(t,e,r){var n=r?V.SIZE_PREFIX_LENGTH:0;if(e){var i=e;if(this.prep(this.minalign,V.SIZEOF_INT+V.FILE_IDENTIFIER_LENGTH+n),i.length!=V.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+V.FILE_IDENTIFIER_LENGTH);for(var a=V.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(i.charCodeAt(a))}this.prep(this.minalign,V.SIZEOF_INT+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},V.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},V.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,n=r-this.bb.readInt32(r),i=this.bb.readInt16(n+e)!=0;if(!i)throw new Error("FlatBuffers: field "+e+" must be set")},V.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(V.SIZEOF_INT,t*e),this.prep(r,t*e)},V.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},V.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],r=0;r<t.length;){var n,i=t.charCodeAt(r++);if(i<55296||i>=56320)n=i;else{var a=t.charCodeAt(r++);n=(i<<10)+a+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(n&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var r=0,u=this.space,s=this.bb.bytes();r<e.length;r++)s[u++]=e[r];return this.endVector()},V.Builder.prototype.createLong=function(t,e){return V.Long.create(t,e)},V.ByteBuffer=function(t){this.bytes_=t,this.position_=0},V.ByteBuffer.allocate=function(t){return new V.ByteBuffer(new Uint8Array(t))},V.ByteBuffer.prototype.clear=function(){this.position_=0},V.ByteBuffer.prototype.bytes=function(){return this.bytes_},V.ByteBuffer.prototype.position=function(){return this.position_},V.ByteBuffer.prototype.setPosition=function(t){this.position_=t},V.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},V.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},V.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},V.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},V.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},V.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},V.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},V.ByteBuffer.prototype.readInt64=function(t){return new V.Long(this.readInt32(t),this.readInt32(t+4))},V.ByteBuffer.prototype.readUint64=function(t){return new V.Long(this.readUint32(t),this.readUint32(t+4))},V.ByteBuffer.prototype.readFloat32=function(t){return V.int32[0]=this.readInt32(t),V.float32[0]},V.ByteBuffer.prototype.readFloat64=function(t){return V.int32[V.isLittleEndian?0:1]=this.readInt32(t),V.int32[V.isLittleEndian?1:0]=this.readInt32(t+4),V.float64[0]},V.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},V.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},V.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},V.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},V.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},V.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},V.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},V.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},V.ByteBuffer.prototype.writeFloat32=function(t,e){V.float32[0]=e,this.writeInt32(t,V.int32[0])},V.ByteBuffer.prototype.writeFloat64=function(t,e){V.float64[0]=e,this.writeInt32(t,V.int32[V.isLittleEndian?0:1]),this.writeInt32(t+4,V.int32[V.isLittleEndian?1:0])},V.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+V.SIZEOF_INT+V.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<V.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+V.SIZEOF_INT+e));return t},V.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},V.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},V.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",i=0;if(t+=V.SIZEOF_INT,e===V.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;i<r;){var a,u=this.readUint8(t+i++);if(u<192)a=u;else{var s=this.readUint8(t+i++);if(u<224)a=(u&31)<<6|s&63;else{var l=this.readUint8(t+i++);if(u<240)a=(u&15)<<12|(s&63)<<6|l&63;else{var o=this.readUint8(t+i++);a=(u&7)<<18|(s&63)<<12|(l&63)<<6|o&63}}}a<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode((a>>10)+55296,(a&1023)+56320))}return n},V.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},V.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+V.SIZEOF_INT},V.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},V.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=V.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+V.FILE_IDENTIFIER_LENGTH);for(var e=0;e<V.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+V.SIZEOF_INT+e))return!1;return!0},V.ByteBuffer.prototype.createLong=function(t,e){return V.Long.create(t,e)}}),Tt,zh=ee(()=>{"use strict";Ev(),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.INT=2]="INT",u[u.STRING=3]="STRING",u[u.TENSOR=4]="TENSOR",u[u.GRAPH=5]="GRAPH",u[u.FLOATS=6]="FLOATS",u[u.INTS=7]="INTS",u[u.STRINGS=8]="STRINGS",u[u.TENSORS=9]="TENSORS",u[u.GRAPHS=10]="GRAPHS",u[u.SPARSE_TENSOR=11]="SPARSE_TENSOR",u[u.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a=i.AttributeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNKNOWN=0]="UNKNOWN",u[u.VALUE=1]="VALUE",u[u.PARAM=2]="PARAM"))(a=i.DimensionValueType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.UINT8=2]="UINT8",u[u.INT8=3]="INT8",u[u.UINT16=4]="UINT16",u[u.INT16=5]="INT16",u[u.INT32=6]="INT32",u[u.INT64=7]="INT64",u[u.STRING=8]="STRING",u[u.BOOL=9]="BOOL",u[u.FLOAT16=10]="FLOAT16",u[u.DOUBLE=11]="DOUBLE",u[u.UINT32=12]="UINT32",u[u.UINT64=13]="UINT64",u[u.COMPLEX64=14]="COMPLEX64",u[u.COMPLEX128=15]="COMPLEX128",u[u.BFLOAT16=16]="BFLOAT16",u[u.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",u[u.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",u[u.FLOAT8E5M2=19]="FLOAT8E5M2",u[u.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a=i.TensorDataType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(a=i.NodeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{let a;(u=>(u[u.NONE=0]="NONE",u[u.tensor_type=1]="tensor_type",u[u.sequence_type=2]="sequence_type",u[u.map_type=3]="map_type"))(a=i.TypeInfoValue||={})})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsShape(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dim(s,l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}dimLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}static startShape(s){s.startObject(1)}static addDim(s,l){s.addFieldOffset(0,l,0)}static createDimVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startDimVector(s,l){s.startVector(4,l,4)}static endShape(s){return s.endObject()}static createShape(s,l){return a.startShape(s),a.addDim(s,l),a.endShape(s)}}i.Shape=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimension(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimension(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}value(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimension(s){s.startObject(2)}static addValue(s,l){s.addFieldOffset(0,l,0)}static addDenotation(s,l){s.addFieldOffset(1,l,0)}static endDimension(s){return s.endObject()}static createDimension(s,l,o){return a.startDimension(s),a.addValue(s,l),a.addDenotation(s,o),a.endDimension(s)}}i.Dimension=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimensionValue(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimensionValue(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dimType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):0}dimValue(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}dimParam(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimensionValue(s){s.startObject(3)}static addDimType(s,l){s.addFieldInt8(0,l,0)}static addDimValue(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static addDimParam(s,l){s.addFieldOffset(2,l,0)}static endDimensionValue(s){return s.endObject()}static createDimensionValue(s,l,o,c){return a.startDimensionValue(s),a.addDimType(s,l),a.addDimValue(s,o),a.addDimParam(s,c),a.endDimensionValue(s)}}i.DimensionValue=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensorTypeAndShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorTypeAndShape(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}shape(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(s){s.startObject(2)}static addElemType(s,l){s.addFieldInt32(0,l,0)}static addShape(s,l){s.addFieldOffset(1,l,0)}static endTensorTypeAndShape(s){return s.endObject()}static createTensorTypeAndShape(s,l,o){return a.startTensorTypeAndShape(s),a.addElemType(s,l),a.addShape(s,o),a.endTensorTypeAndShape(s)}}i.TensorTypeAndShape=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsMapType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMapType(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}keyType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}valueType(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(s){s.startObject(2)}static addKeyType(s,l){s.addFieldInt32(0,l,0)}static addValueType(s,l){s.addFieldOffset(1,l,0)}static endMapType(s){return s.endObject()}static createMapType(s,l,o){return a.startMapType(s),a.addKeyType(s,l),a.addValueType(s,o),a.endMapType(s)}}i.MapType=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSequenceType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSequenceType(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(s){s.startObject(1)}static addElemType(s,l){s.addFieldOffset(0,l,0)}static endSequenceType(s){return s.endObject()}static createSequenceType(s,l){return a.startSequenceType(s),a.addElemType(s,l),a.endSequenceType(s)}}i.SequenceType=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(s,l,o,c){return s.prep(4,12),s.writeInt32(c),s.writeInt32(o),s.writeInt32(l),s.offset()}}i.EdgeEnd=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNodeEdge(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNodeEdge(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndex(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readUint32(this.bb_pos+s):0}inputEdges(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+s*12,this.bb):null}inputEdgesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}outputEdges(s,l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+o)+s*12,this.bb):null}outputEdgesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNodeEdge(s){s.startObject(3)}static addNodeIndex(s,l){s.addFieldInt32(0,l,0)}static addInputEdges(s,l){s.addFieldOffset(1,l,0)}static startInputEdgesVector(s,l){s.startVector(12,l,4)}static addOutputEdges(s,l){s.addFieldOffset(2,l,0)}static startOutputEdgesVector(s,l){s.startVector(12,l,4)}static endNodeEdge(s){return s.endObject()}static createNodeEdge(s,l,o,c){return a.startNodeEdge(s),a.addNodeIndex(s,l),a.addInputEdges(s,o),a.addOutputEdges(s,c),a.endNodeEdge(s)}}i.NodeEdge=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNode(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNode(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}sinceVersion(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}index(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readUint32(this.bb_pos+s):0}opType(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.readInt32(this.bb_pos+s):0}executionProviderType(s){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,s):null}inputs(s,l){let o=this.bb.__offset(this.bb_pos,20);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let o=this.bb.__offset(this.bb_pos,22);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}attributes(s,l){let o=this.bb.__offset(this.bb_pos,24);return o?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}attributesLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCounts(s){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+s*4):0}inputArgCountsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCountsArray(){let s=this.bb.__offset(this.bb_pos,26);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}implicitInputs(s,l){let o=this.bb.__offset(this.bb_pos,28);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}implicitInputsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNode(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDomain(s,l){s.addFieldOffset(2,l,0)}static addSinceVersion(s,l){s.addFieldInt32(3,l,0)}static addIndex(s,l){s.addFieldInt32(4,l,0)}static addOpType(s,l){s.addFieldOffset(5,l,0)}static addType(s,l){s.addFieldInt32(6,l,0)}static addExecutionProviderType(s,l){s.addFieldOffset(7,l,0)}static addInputs(s,l){s.addFieldOffset(8,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(9,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addAttributes(s,l){s.addFieldOffset(10,l,0)}static createAttributesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startAttributesVector(s,l){s.startVector(4,l,4)}static addInputArgCounts(s,l){s.addFieldOffset(11,l,0)}static createInputArgCountsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addInt32(l[o]);return s.endVector()}static startInputArgCountsVector(s,l){s.startVector(4,l,4)}static addImplicitInputs(s,l){s.addFieldOffset(12,l,0)}static createImplicitInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startImplicitInputsVector(s,l){s.startVector(4,l,4)}static endNode(s){return s.endObject()}static createNode(s,l,o,c,f,d,h,p,m,v,x,y,_,I){return a.startNode(s),a.addName(s,l),a.addDocString(s,o),a.addDomain(s,c),a.addSinceVersion(s,f),a.addIndex(s,d),a.addOpType(s,h),a.addType(s,p),a.addExecutionProviderType(s,m),a.addInputs(s,v),a.addOutputs(s,x),a.addAttributes(s,y),a.addInputArgCounts(s,_),a.addImplicitInputs(s,I),a.endNode(s)}}i.Node=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsValueInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsValueInfo(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(s){s.startObject(3)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldOffset(2,l,0)}static endValueInfo(s){return s.endObject()}static createValueInfo(s,l,o,c){return a.startValueInfo(s),a.addName(s,l),a.addDocString(s,o),a.addType(s,c),a.endValueInfo(s)}}i.ValueInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTypeInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTypeInfo(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}denotation(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}valueType(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readUint8(this.bb_pos+s):0}value(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(s,this.bb_pos+l):null}static startTypeInfo(s){s.startObject(3)}static addDenotation(s,l){s.addFieldOffset(0,l,0)}static addValueType(s,l){s.addFieldInt8(1,l,0)}static addValue(s,l){s.addFieldOffset(2,l,0)}static endTypeInfo(s){return s.endObject()}static createTypeInfo(s,l,o,c){return a.startTypeInfo(s),a.addDenotation(s,l),a.addValueType(s,o),a.addValue(s,c),a.endTypeInfo(s)}}i.TypeInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsOperatorSetId(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsOperatorSetId(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}domain(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}version(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}static startOperatorSetId(s){s.startObject(2)}static addDomain(s,l){s.addFieldOffset(0,l,0)}static addVersion(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static endOperatorSetId(s){return s.endObject()}static createOperatorSetId(s,l,o){return a.startOperatorSetId(s),a.addDomain(s,l),a.addVersion(s,o),a.endOperatorSetId(s)}}i.OperatorSetId=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensor(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}dataType(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}rawData(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+s):0}rawDataLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}rawDataArray(){let s=this.bb.__offset(this.bb_pos,12);return s?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}stringData(s,l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}stringDataLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}static startTensor(s){s.startObject(6)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static addDataType(s,l){s.addFieldInt32(3,l,0)}static addRawData(s,l){s.addFieldOffset(4,l,0)}static createRawDataVector(s,l){s.startVector(1,l.length,1);for(let o=l.length-1;o>=0;o--)s.addInt8(l[o]);return s.endVector()}static startRawDataVector(s,l){s.startVector(1,l,1)}static addStringData(s,l){s.addFieldOffset(5,l,0)}static createStringDataVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startStringDataVector(s,l){s.startVector(4,l,4)}static endTensor(s){return s.endObject()}static createTensor(s,l,o,c,f,d,h){return a.startTensor(s),a.addName(s,l),a.addDocString(s,o),a.addDims(s,c),a.addDataType(s,f),a.addRawData(s,d),a.addStringData(s,h),a.endTensor(s)}}i.Tensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSparseTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensor(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}values(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSparseTensor(s){s.startObject(3)}static addValues(s,l){s.addFieldOffset(0,l,0)}static addIndices(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static endSparseTensor(s){return s.endObject()}static createSparseTensor(s,l,o,c){return a.startSparseTensor(s),a.addValues(s,l),a.addIndices(s,o),a.addDims(s,c),a.endSparseTensor(s)}}i.SparseTensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsAttribute(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsAttribute(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):0}f(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readFloat32(this.bb_pos+s):0}i(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}s(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}t(s){let l=this.bb.__offset(this.bb_pos,16);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+s*4):0}floatsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}floatsArray(){let s=this.bb.__offset(this.bb_pos,20);return s?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}ints(s){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}intsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}strings(s,l){let o=this.bb.__offset(this.bb_pos,24);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}stringsLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}tensors(s,l){let o=this.bb.__offset(this.bb_pos,26);return o?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}tensorsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}graphs(s,l){let o=this.bb.__offset(this.bb_pos,28);return o?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}graphsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startAttribute(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldInt32(2,l,0)}static addF(s,l){s.addFieldFloat32(3,l,0)}static addI(s,l){s.addFieldInt64(4,l,s.createLong(0,0))}static addS(s,l){s.addFieldOffset(5,l,0)}static addT(s,l){s.addFieldOffset(6,l,0)}static addG(s,l){s.addFieldOffset(7,l,0)}static addFloats(s,l){s.addFieldOffset(8,l,0)}static createFloatsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addFloat32(l[o]);return s.endVector()}static startFloatsVector(s,l){s.startVector(4,l,4)}static addInts(s,l){s.addFieldOffset(9,l,0)}static createIntsVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startIntsVector(s,l){s.startVector(8,l,8)}static addStrings(s,l){s.addFieldOffset(10,l,0)}static createStringsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startStringsVector(s,l){s.startVector(4,l,4)}static addTensors(s,l){s.addFieldOffset(11,l,0)}static createTensorsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startTensorsVector(s,l){s.startVector(4,l,4)}static addGraphs(s,l){s.addFieldOffset(12,l,0)}static createGraphsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startGraphsVector(s,l){s.startVector(4,l,4)}static endAttribute(s){return s.endObject()}static createAttribute(s,l,o,c,f,d,h,p,m,v,x,y,_,I){return a.startAttribute(s),a.addName(s,l),a.addDocString(s,o),a.addType(s,c),a.addF(s,f),a.addI(s,d),a.addS(s,h),a.addT(s,p),a.addG(s,m),a.addFloats(s,v),a.addInts(s,x),a.addStrings(s,y),a.addTensors(s,_),a.addGraphs(s,I),a.endAttribute(s)}}i.Attribute=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsGraph(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsGraph(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}initializers(s,l){let o=this.bb.__offset(this.bb_pos,4);return o?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}initializersLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeArgs(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodeArgsLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}nodes(s,l){let o=this.bb.__offset(this.bb_pos,8);return o?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}maxNodeIndex(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readUint32(this.bb_pos+s):0}nodeEdges(s,l){let o=this.bb.__offset(this.bb_pos,12);return o?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}nodeEdgesLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}inputs(s,l){let o=this.bb.__offset(this.bb_pos,14);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let o=this.bb.__offset(this.bb_pos,16);return o?this.bb.__string(this.bb.__vector(this.bb_pos+o)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__vector_len(this.bb_pos+s):0}sparseInitializers(s,l){let o=this.bb.__offset(this.bb_pos,18);return o?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}sparseInitializersLength(){let s=this.bb.__offset(this.bb_pos,18);return s?this.bb.__vector_len(this.bb_pos+s):0}static startGraph(s){s.startObject(8)}static addInitializers(s,l){s.addFieldOffset(0,l,0)}static createInitializersVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInitializersVector(s,l){s.startVector(4,l,4)}static addNodeArgs(s,l){s.addFieldOffset(1,l,0)}static createNodeArgsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodeArgsVector(s,l){s.startVector(4,l,4)}static addNodes(s,l){s.addFieldOffset(2,l,0)}static createNodesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodesVector(s,l){s.startVector(4,l,4)}static addMaxNodeIndex(s,l){s.addFieldInt32(3,l,0)}static addNodeEdges(s,l){s.addFieldOffset(4,l,0)}static createNodeEdgesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startNodeEdgesVector(s,l){s.startVector(4,l,4)}static addInputs(s,l){s.addFieldOffset(5,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(6,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addSparseInitializers(s,l){s.addFieldOffset(7,l,0)}static createSparseInitializersVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startSparseInitializersVector(s,l){s.startVector(4,l,4)}static endGraph(s){return s.endObject()}static createGraph(s,l,o,c,f,d,h,p,m){return a.startGraph(s),a.addInitializers(s,l),a.addNodeArgs(s,o),a.addNodes(s,c),a.addMaxNodeIndex(s,f),a.addNodeEdges(s,d),a.addInputs(s,h),a.addOutputs(s,p),a.addSparseInitializers(s,m),a.endGraph(s)}}i.Graph=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsModel(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsModel(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}irVersion(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}opsetImport(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}opsetImportLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}producerName(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}producerVersion(s){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,s):null}modelVersion(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}docString(s){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,s):null}graph(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,s):null}static startModel(s){s.startObject(9)}static addIrVersion(s,l){s.addFieldInt64(0,l,s.createLong(0,0))}static addOpsetImport(s,l){s.addFieldOffset(1,l,0)}static createOpsetImportVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startOpsetImportVector(s,l){s.startVector(4,l,4)}static addProducerName(s,l){s.addFieldOffset(2,l,0)}static addProducerVersion(s,l){s.addFieldOffset(3,l,0)}static addDomain(s,l){s.addFieldOffset(4,l,0)}static addModelVersion(s,l){s.addFieldInt64(5,l,s.createLong(0,0))}static addDocString(s,l){s.addFieldOffset(6,l,0)}static addGraph(s,l){s.addFieldOffset(7,l,0)}static addGraphDocString(s,l){s.addFieldOffset(8,l,0)}static endModel(s){return s.endObject()}static createModel(s,l,o,c,f,d,h,p,m,v){return a.startModel(s),a.addIrVersion(s,l),a.addOpsetImport(s,o),a.addProducerName(s,c),a.addProducerVersion(s,f),a.addDomain(s,d),a.addModelVersion(s,h),a.addDocString(s,p),a.addGraph(s,m),a.addGraphDocString(s,v),a.endModel(s)}}i.Model=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsKernelCreateInfos(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKernelCreateInfos(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndices(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+s*4):0}nodeIndicesLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeIndicesArray(){let s=this.bb.__offset(this.bb_pos,4);return s?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}kernelDefHashes(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startKernelCreateInfos(s){s.startObject(2)}static addNodeIndices(s,l){s.addFieldOffset(0,l,0)}static createNodeIndicesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addInt32(l[o]);return s.endVector()}static startNodeIndicesVector(s,l){s.startVector(4,l,4)}static addKernelDefHashes(s,l){s.addFieldOffset(1,l,0)}static createKernelDefHashesVector(s,l){s.startVector(8,l.length,8);for(let o=l.length-1;o>=0;o--)s.addInt64(l[o]);return s.endVector()}static startKernelDefHashesVector(s,l){s.startVector(8,l,8)}static endKernelCreateInfos(s){return s.endObject()}static createKernelCreateInfos(s,l,o){return a.startKernelCreateInfos(s),a.addNodeIndices(s,l),a.addKernelDefHashes(s,o),a.endKernelCreateInfos(s)}}i.KernelCreateInfos=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSubGraphSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSubGraphSessionState(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}graphId(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(s){s.startObject(2)}static addGraphId(s,l){s.addFieldOffset(0,l,0)}static addSessionState(s,l){s.addFieldOffset(1,l,0)}static endSubGraphSessionState(s){let l=s.endObject();return s.requiredField(l,4),l}static createSubGraphSessionState(s,l,o){return a.startSubGraphSessionState(s),a.addGraphId(s,l),a.addSessionState(s,o),a.endSubGraphSessionState(s)}}i.SubGraphSessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSessionState(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}kernels(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(s,l){let o=this.bb.__offset(this.bb_pos,6);return o?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+o)+s*4),this.bb):null}subGraphSessionStatesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSessionState(s){s.startObject(2)}static addKernels(s,l){s.addFieldOffset(0,l,0)}static addSubGraphSessionStates(s,l){s.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(s,l){s.startVector(4,l.length,4);for(let o=l.length-1;o>=0;o--)s.addOffset(l[o]);return s.endVector()}static startSubGraphSessionStatesVector(s,l){s.startVector(4,l,4)}static endSessionState(s){return s.endObject()}static createSessionState(s,l,o){return a.startSessionState(s),a.addKernels(s,l),a.addSubGraphSessionStates(s,o),a.endSessionState(s)}}i.SessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={}),(t=>{let e;(r=>{let n;(i=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsInferenceSession(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInferenceSession(s,l){return s.setPosition(s.position()+V.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static bufferHasIdentifier(s){return s.__has_identifier("ORTM")}ortVersion(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}model(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(s){s.startObject(3)}static addOrtVersion(s,l){s.addFieldOffset(0,l,0)}static addModel(s,l){s.addFieldOffset(1,l,0)}static addSessionState(s,l){s.addFieldOffset(2,l,0)}static endInferenceSession(s){return s.endObject()}static finishInferenceSessionBuffer(s,l){s.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(s,l){s.finish(l,"ORTM",!0)}static createInferenceSession(s,l,o,c){return a.startInferenceSession(s),a.addOrtVersion(s,l),a.addModel(s,o),a.addSessionState(s,c),a.endInferenceSession(s)}}i.InferenceSession=a})(n=r.fbs||={})})(e=t.experimental||={})})(Tt||={})}),qG=xr((t,e)=>{"use strict";e.exports=r;function r(n,i){for(var a=new Array(arguments.length-1),u=0,s=2,l=!0;s<arguments.length;)a[u++]=arguments[s++];return new Promise(function(o,c){a[u]=function(f){if(l)if(l=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];o.apply(null,d)}};try{n.apply(i||null,a)}catch(f){l&&(l=!1,c(f))}})}}),XG=xr(t=>{"use strict";var e=t;e.length=function(u){var s=u.length;if(!s)return 0;for(var l=0;--s%4>1&&u.charAt(s)==="=";)++l;return Math.ceil(u.length*3)/4-l};var r=new Array(64),n=new Array(123);for(i=0;i<64;)n[r[i]=i<26?i+65:i<52?i+71:i<62?i-4:i-59|43]=i++;var i;e.encode=function(u,s,l){for(var o=null,c=[],f=0,d=0,h;s<l;){var p=u[s++];switch(d){case 0:c[f++]=r[p>>2],h=(p&3)<<4,d=1;break;case 1:c[f++]=r[h|p>>4],h=(p&15)<<2,d=2;break;case 2:c[f++]=r[h|p>>6],c[f++]=r[p&63],d=0;break}f>8191&&((o||(o=[])).push(String.fromCharCode.apply(String,c)),f=0)}return d&&(c[f++]=r[h],c[f++]=61,d===1&&(c[f++]=61)),o?(f&&o.push(String.fromCharCode.apply(String,c.slice(0,f))),o.join("")):String.fromCharCode.apply(String,c.slice(0,f))};var a="invalid encoding";e.decode=function(u,s,l){for(var o=l,c=0,f,d=0;d<u.length;){var h=u.charCodeAt(d++);if(h===61&&c>1)break;if((h=n[h])===void 0)throw Error(a);switch(c){case 0:f=h,c=1;break;case 1:s[l++]=f<<2|(h&48)>>4,f=h,c=2;break;case 2:s[l++]=(f&15)<<4|(h&60)>>2,f=h,c=3;break;case 3:s[l++]=(f&3)<<6|h,c=0;break}}if(c===1)throw Error(a);return l-o},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}),YG=xr((t,e)=>{"use strict";e.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,i,a){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:i,ctx:a||this}),this},r.prototype.off=function(n,i){if(n===void 0)this._listeners={};else if(i===void 0)this._listeners[n]=[];else for(var a=this._listeners[n],u=0;u<a.length;)a[u].fn===i?a.splice(u,1):++u;return this},r.prototype.emit=function(n){var i=this._listeners[n];if(i){for(var a=[],u=1;u<arguments.length;)a.push(arguments[u++]);for(u=0;u<i.length;)i[u].fn.apply(i[u++].ctx,a)}return this}}),ZG=xr((t,e)=>{"use strict";e.exports=r(r);function r(s){return typeof Float32Array<"u"?function(){var l=new Float32Array([-0]),o=new Uint8Array(l.buffer),c=o[3]===128;function f(m,v,x){l[0]=m,v[x]=o[0],v[x+1]=o[1],v[x+2]=o[2],v[x+3]=o[3]}function d(m,v,x){l[0]=m,v[x]=o[3],v[x+1]=o[2],v[x+2]=o[1],v[x+3]=o[0]}s.writeFloatLE=c?f:d,s.writeFloatBE=c?d:f;function h(m,v){return o[0]=m[v],o[1]=m[v+1],o[2]=m[v+2],o[3]=m[v+3],l[0]}function p(m,v){return o[3]=m[v],o[2]=m[v+1],o[1]=m[v+2],o[0]=m[v+3],l[0]}s.readFloatLE=c?h:p,s.readFloatBE=c?p:h}():function(){function l(c,f,d,h){var p=f<0?1:0;if(p&&(f=-f),f===0)c(1/f>0?0:2147483648,d,h);else if(isNaN(f))c(2143289344,d,h);else if(f>34028234663852886e22)c((p<<31|2139095040)>>>0,d,h);else if(f<11754943508222875e-54)c((p<<31|Math.round(f/1401298464324817e-60))>>>0,d,h);else{var m=Math.floor(Math.log(f)/Math.LN2),v=Math.round(f*Math.pow(2,-m)*8388608)&8388607;c((p<<31|m+127<<23|v)>>>0,d,h)}}s.writeFloatLE=l.bind(null,n),s.writeFloatBE=l.bind(null,i);function o(c,f,d){var h=c(f,d),p=(h>>31)*2+1,m=h>>>23&255,v=h&8388607;return m===255?v?NaN:p*(1/0):m===0?p*1401298464324817e-60*v:p*Math.pow(2,m-150)*(v+8388608)}s.readFloatLE=o.bind(null,a),s.readFloatBE=o.bind(null,u)}(),typeof Float64Array<"u"?function(){var l=new Float64Array([-0]),o=new Uint8Array(l.buffer),c=o[7]===128;function f(m,v,x){l[0]=m,v[x]=o[0],v[x+1]=o[1],v[x+2]=o[2],v[x+3]=o[3],v[x+4]=o[4],v[x+5]=o[5],v[x+6]=o[6],v[x+7]=o[7]}function d(m,v,x){l[0]=m,v[x]=o[7],v[x+1]=o[6],v[x+2]=o[5],v[x+3]=o[4],v[x+4]=o[3],v[x+5]=o[2],v[x+6]=o[1],v[x+7]=o[0]}s.writeDoubleLE=c?f:d,s.writeDoubleBE=c?d:f;function h(m,v){return o[0]=m[v],o[1]=m[v+1],o[2]=m[v+2],o[3]=m[v+3],o[4]=m[v+4],o[5]=m[v+5],o[6]=m[v+6],o[7]=m[v+7],l[0]}function p(m,v){return o[7]=m[v],o[6]=m[v+1],o[5]=m[v+2],o[4]=m[v+3],o[3]=m[v+4],o[2]=m[v+5],o[1]=m[v+6],o[0]=m[v+7],l[0]}s.readDoubleLE=c?h:p,s.readDoubleBE=c?p:h}():function(){function l(c,f,d,h,p,m){var v=h<0?1:0;if(v&&(h=-h),h===0)c(0,p,m+f),c(1/h>0?0:2147483648,p,m+d);else if(isNaN(h))c(0,p,m+f),c(2146959360,p,m+d);else if(h>17976931348623157e292)c(0,p,m+f),c((v<<31|2146435072)>>>0,p,m+d);else{var x;if(h<22250738585072014e-324)x=h/5e-324,c(x>>>0,p,m+f),c((v<<31|x/4294967296)>>>0,p,m+d);else{var y=Math.floor(Math.log(h)/Math.LN2);y===1024&&(y=1023),x=h*Math.pow(2,-y),c(x*4503599627370496>>>0,p,m+f),c((v<<31|y+1023<<20|x*1048576&1048575)>>>0,p,m+d)}}}s.writeDoubleLE=l.bind(null,n,0,4),s.writeDoubleBE=l.bind(null,i,4,0);function o(c,f,d,h,p){var m=c(h,p+f),v=c(h,p+d),x=(v>>31)*2+1,y=v>>>20&2047,_=4294967296*(v&1048575)+m;return y===2047?_?NaN:x*(1/0):y===0?x*5e-324*_:x*Math.pow(2,y-1075)*(_+4503599627370496)}s.readDoubleLE=o.bind(null,a,0,4),s.readDoubleBE=o.bind(null,u,4,0)}(),s}function n(s,l,o){l[o]=s&255,l[o+1]=s>>>8&255,l[o+2]=s>>>16&255,l[o+3]=s>>>24}function i(s,l,o){l[o]=s>>>24,l[o+1]=s>>>16&255,l[o+2]=s>>>8&255,l[o+3]=s&255}function a(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16|s[l+3]<<24)>>>0}function u(s,l){return(s[l]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3])>>>0}}),KG=xr((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),QG=xr(t=>{"use strict";var e=t;e.length=function(r){for(var n=0,i=0,a=0;a<r.length;++a)i=r.charCodeAt(a),i<128?n+=1:i<2048?n+=2:(i&64512)===55296&&(r.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},e.read=function(r,n,i){var a=i-n;if(a<1)return"";for(var u=null,s=[],l=0,o;n<i;)o=r[n++],o<128?s[l++]=o:o>191&&o<224?s[l++]=(o&31)<<6|r[n++]&63:o>239&&o<365?(o=((o&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,s[l++]=55296+(o>>10),s[l++]=56320+(o&1023)):s[l++]=(o&15)<<12|(r[n++]&63)<<6|r[n++]&63,l>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),l=0);return u?(l&&u.push(String.fromCharCode.apply(String,s.slice(0,l))),u.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(r,n,i){for(var a=i,u,s,l=0;l<r.length;++l)u=r.charCodeAt(l),u<128?n[i++]=u:u<2048?(n[i++]=u>>6|192,n[i++]=u&63|128):(u&64512)===55296&&((s=r.charCodeAt(l+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++l,n[i++]=u>>18|240,n[i++]=u>>12&63|128,n[i++]=u>>6&63|128,n[i++]=u&63|128):(n[i++]=u>>12|224,n[i++]=u>>6&63|128,n[i++]=u&63|128);return i-a}}),JG=xr((t,e)=>{"use strict";e.exports=r;function r(n,i,a){var u=a||8192,s=u>>>1,l=null,o=u;return function(c){if(c<1||c>s)return n(c);o+c>u&&(l=n(u),o=0);var f=i.call(l,o,o+=c);return o&7&&(o=(o|7)+1),f}}}),eW=xr((t,e)=>{"use strict";e.exports=n;var r=ss();function n(s,l){this.lo=s>>>0,this.hi=l>>>0}var i=n.zero=new n(0,0);i.toNumber=function(){return 0},i.zzEncode=i.zzDecode=function(){return this},i.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return i;var l=s<0;l&&(s=-s);var o=s>>>0,c=(s-o)/4294967296>>>0;return l&&(c=~c>>>0,o=~o>>>0,++o>4294967295&&(o=0,++c>4294967295&&(c=0))),new n(o,c)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):i},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var l=~this.lo+1>>>0,o=~this.hi>>>0;return l||(o=o+1>>>0),-(l+o*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var u=String.prototype.charCodeAt;n.fromHash=function(s){return s===a?i:new n((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,o=this.hi>>>24;return o===0?l===0?s<16384?s<128?1:2:s<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:o<128?9:10}}),ss=xr(t=>{"use strict";var e=t;e.asPromise=qG(),e.base64=XG(),e.EventEmitter=YG(),e.float=ZG(),e.inquire=KG(),e.utf8=QG(),e.pool=JG(),e.LongBits=eW(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(i){return typeof i=="number"&&isFinite(i)&&Math.floor(i)===i},e.isString=function(i){return typeof i=="string"||i instanceof String},e.isObject=function(i){return i&&typeof i=="object"},e.isset=e.isSet=function(i,a){var u=i[a];return u!=null&&i.hasOwnProperty(a)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var i=e.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(i){return typeof i=="number"?e.Buffer?e._Buffer_allocUnsafe(i):new e.Array(i):e.Buffer?e._Buffer_from(i):typeof Uint8Array>"u"?i:new Uint8Array(i)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(i){return i?e.LongBits.from(i).toHash():e.LongBits.zeroHash},e.longFromHash=function(i,a){var u=e.LongBits.fromHash(i);return e.Long?e.Long.fromBits(u.lo,u.hi,a):u.toNumber(!!a)};function r(i,a,u){for(var s=Object.keys(a),l=0;l<s.length;++l)(i[s[l]]===void 0||!u)&&(i[s[l]]=a[s[l]]);return i}e.merge=r,e.lcFirst=function(i){return i.charAt(0).toLowerCase()+i.substring(1)};function n(i){function a(u,s){if(!(this instanceof a))return new a(u,s);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&r(this,s)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(i){for(var a={},u=0;u<i.length;++u)a[i[u]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(a[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(i){return function(a){for(var u=0;u<i.length;++u)i[u]!==a&&delete this[i[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var i=e.Buffer;if(!i){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=i.from!==Uint8Array.from&&i.from||function(a,u){return new i(a,u)},e._Buffer_allocUnsafe=i.allocUnsafe||function(a){return new i(a)}}}),YP=xr((t,e)=>{"use strict";e.exports=c;var r=ss(),n,i=r.LongBits,a=r.base64,u=r.utf8;function s(y,_,I){this.fn=y,this.len=_,this.next=void 0,this.val=I}function l(){}function o(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var f=function(){return r.Buffer?function(){return(c.create=function(){return new n})()}:function(){return new c}};c.create=f(),c.alloc=function(y){return new r.Array(y)},r.Array!==Array&&(c.alloc=r.pool(c.alloc,r.Array.prototype.subarray)),c.prototype._push=function(y,_,I){return this.tail=this.tail.next=new s(y,_,I),this.len+=_,this};function d(y,_,I){_[I]=y&255}function h(y,_,I){for(;y>127;)_[I++]=y&127|128,y>>>=7;_[I]=y}function p(y,_){this.len=y,this.next=void 0,this.val=_}p.prototype=Object.create(s.prototype),p.prototype.fn=h,c.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new p((y=y>>>0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},c.prototype.int32=function(y){return y<0?this._push(m,10,i.fromNumber(y)):this.uint32(y)},c.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)};function m(y,_,I){for(;y.hi;)_[I++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[I++]=y.lo&127|128,y.lo=y.lo>>>7;_[I++]=y.lo}c.prototype.uint64=function(y){var _=i.from(y);return this._push(m,_.length(),_)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(y){var _=i.from(y).zzEncode();return this._push(m,_.length(),_)},c.prototype.bool=function(y){return this._push(d,1,y?1:0)};function v(y,_,I){_[I]=y&255,_[I+1]=y>>>8&255,_[I+2]=y>>>16&255,_[I+3]=y>>>24}c.prototype.fixed32=function(y){return this._push(v,4,y>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(y){var _=i.from(y);return this._push(v,4,_.lo)._push(v,4,_.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(y){return this._push(r.float.writeFloatLE,4,y)},c.prototype.double=function(y){return this._push(r.float.writeDoubleLE,8,y)};var x=r.Array.prototype.set?function(y,_,I){_.set(y,I)}:function(y,_,I){for(var C=0;C<y.length;++C)_[I+C]=y[C]};c.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(d,1,0);if(r.isString(y)){var I=c.alloc(_=a.length(y));a.decode(y,I,0),y=I}return this.uint32(_)._push(x,_,y)},c.prototype.string=function(y){var _=u.length(y);return _?this.uint32(_)._push(u.write,_,y):this._push(d,1,0)},c.prototype.fork=function(){return this.states=new o(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var y=this.head,_=this.tail,I=this.len;return this.reset().uint32(I),I&&(this.tail.next=y.next,this.tail=_,this.len+=I),this},c.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),I=0;y;)y.fn(y.val,_,I),I+=y.len,y=y.next;return _},c._configure=function(y){n=y,c.create=f(),n._configure()}}),tW=xr((t,e)=>{"use strict";e.exports=i;var r=YP();(i.prototype=Object.create(r.prototype)).constructor=i;var n=ss();function i(){r.call(this)}i._configure=function(){i.alloc=n._Buffer_allocUnsafe,i.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(u,s,l){s.set(u,l)}:function(u,s,l){if(u.copy)u.copy(s,l,0,u.length);else for(var o=0;o<u.length;)s[l++]=u[o++]}},i.prototype.bytes=function(u){n.isString(u)&&(u=n._Buffer_from(u,"base64"));var s=u.length>>>0;return this.uint32(s),s&&this._push(i.writeBytesBuffer,s,u),this};function a(u,s,l){u.length<40?n.utf8.write(u,s,l):s.utf8Write?s.utf8Write(u,l):s.write(u,l)}i.prototype.string=function(u){var s=n.Buffer.byteLength(u);return this.uint32(s),s&&this._push(a,s,u),this},i._configure()}),ZP=xr((t,e)=>{"use strict";e.exports=s;var r=ss(),n,i=r.LongBits,a=r.utf8;function u(h,p){return RangeError("index out of range: "+h.pos+" + "+(p||1)+" > "+h.len)}function s(h){this.buf=h,this.pos=0,this.len=h.length}var l=typeof Uint8Array<"u"?function(h){if(h instanceof Uint8Array||Array.isArray(h))return new s(h);throw Error("illegal buffer")}:function(h){if(Array.isArray(h))return new s(h);throw Error("illegal buffer")},o=function(){return r.Buffer?function(h){return(s.create=function(p){return r.Buffer.isBuffer(p)?new n(p):l(p)})(h)}:l};s.create=o(),s.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,s.prototype.uint32=function(){var h=4294967295;return function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return h}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var h=this.uint32();return h>>>1^-(h&1)|0};function c(){var h=new i(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw u(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,h}if(this.len-this.pos>4){for(;p<5;++p)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;p<5;++p){if(this.pos>=this.len)throw u(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function f(h,p){return(h[p-4]|h[p-3]<<8|h[p-2]<<16|h[p-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw u(this,8);return new i(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var h=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var h=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},s.prototype.bytes=function(){var h=this.uint32(),p=this.pos,m=this.pos+h;if(m>this.len)throw u(this,h);return this.pos+=h,Array.isArray(this.buf)?this.buf.slice(p,m):p===m?new this.buf.constructor(0):this._slice.call(this.buf,p,m)},s.prototype.string=function(){var h=this.bytes();return a.read(h,0,h.length)},s.prototype.skip=function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw u(this,h);this.pos+=h}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},s._configure=function(h){n=h,s.create=o(),n._configure();var p=r.Long?"toLong":"toNumber";r.merge(s.prototype,{int64:function(){return c.call(this)[p](!1)},uint64:function(){return c.call(this)[p](!0)},sint64:function(){return c.call(this).zzDecode()[p](!1)},fixed64:function(){return d.call(this)[p](!0)},sfixed64:function(){return d.call(this)[p](!1)}})}}),rW=xr((t,e)=>{"use strict";e.exports=i;var r=ZP();(i.prototype=Object.create(r.prototype)).constructor=i;var n=ss();function i(a){r.call(this,a)}i._configure=function(){n.Buffer&&(i.prototype._slice=n.Buffer.prototype.slice)},i.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},i._configure()}),nW=xr((t,e)=>{"use strict";e.exports=n;var r=ss();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(i,a,u){if(typeof i!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!a,this.responseDelimited=!!u}n.prototype.rpcCall=function i(a,u,s,l,o){if(!l)throw TypeError("request must be specified");var c=this;if(!o)return r.asPromise(i,c,a,u,s,l);if(!c.rpcImpl){setTimeout(function(){o(Error("already ended"))},0);return}try{return c.rpcImpl(a,u[c.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(f,d){if(f)return c.emit("error",f,a),o(f);if(d===null){c.end(!0);return}if(!(d instanceof s))try{d=s[c.responseDelimited?"decodeDelimited":"decode"](d)}catch(h){return c.emit("error",h,a),o(h)}return c.emit("data",d,a),o(null,d)})}catch(f){c.emit("error",f,a),setTimeout(function(){o(f)},0);return}},n.prototype.end=function(i){return this.rpcImpl&&(i||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),oW=xr(t=>{"use strict";var e=t;e.Service=nW()}),iW=xr((t,e)=>{"use strict";e.exports={}}),aW=xr(t=>{"use strict";var e=t;e.build="minimal",e.Writer=YP(),e.BufferWriter=tW(),e.Reader=ZP(),e.BufferReader=rW(),e.util=ss(),e.rpc=oW(),e.roots=iW(),e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()}),sW=xr((t,e)=>{"use strict";e.exports=aW()}),rf=xr((t,e)=>{"use strict";var r=sW(),n=r.Reader,i=r.Writer,a=r.util,u=r.roots.default||(r.roots.default={});u.onnx=function(){var s={};return s.Version=function(){var l={},o=Object.create(l);return o[l[0]="_START_VERSION"]=0,o[l[1]="IR_VERSION_2017_10_10"]=1,o[l[2]="IR_VERSION_2017_10_30"]=2,o[l[3]="IR_VERSION_2017_11_3"]=3,o[l[4]="IR_VERSION_2019_1_22"]=4,o[l[5]="IR_VERSION_2019_3_18"]=5,o[l[6]="IR_VERSION_2019_9_19"]=6,o[l[7]="IR_VERSION_2020_5_8"]=7,o[l[8]="IR_VERSION_2021_7_30"]=8,o[l[9]="IR_VERSION"]=9,o}(),s.AttributeProto=function(){function l(o){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.refAttrName="",l.prototype.docString="",l.prototype.type=0,l.prototype.f=0,l.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.s=a.newBuffer([]),l.prototype.t=null,l.prototype.g=null,l.prototype.sparseTensor=null,l.prototype.tp=null,l.prototype.floats=a.emptyArray,l.prototype.ints=a.emptyArray,l.prototype.strings=a.emptyArray,l.prototype.tensors=a.emptyArray,l.prototype.graphs=a.emptyArray,l.prototype.sparseTensors=a.emptyArray,l.prototype.typeProtos=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.f!=null&&Object.hasOwnProperty.call(o,"f")&&c.uint32(21).float(o.f),o.i!=null&&Object.hasOwnProperty.call(o,"i")&&c.uint32(24).int64(o.i),o.s!=null&&Object.hasOwnProperty.call(o,"s")&&c.uint32(34).bytes(o.s),o.t!=null&&Object.hasOwnProperty.call(o,"t")&&u.onnx.TensorProto.encode(o.t,c.uint32(42).fork()).ldelim(),o.g!=null&&Object.hasOwnProperty.call(o,"g")&&u.onnx.GraphProto.encode(o.g,c.uint32(50).fork()).ldelim(),o.floats!=null&&o.floats.length){c.uint32(58).fork();for(var f=0;f<o.floats.length;++f)c.float(o.floats[f]);c.ldelim()}if(o.ints!=null&&o.ints.length){c.uint32(66).fork();for(var f=0;f<o.ints.length;++f)c.int64(o.ints[f]);c.ldelim()}if(o.strings!=null&&o.strings.length)for(var f=0;f<o.strings.length;++f)c.uint32(74).bytes(o.strings[f]);if(o.tensors!=null&&o.tensors.length)for(var f=0;f<o.tensors.length;++f)u.onnx.TensorProto.encode(o.tensors[f],c.uint32(82).fork()).ldelim();if(o.graphs!=null&&o.graphs.length)for(var f=0;f<o.graphs.length;++f)u.onnx.GraphProto.encode(o.graphs[f],c.uint32(90).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(106).string(o.docString),o.tp!=null&&Object.hasOwnProperty.call(o,"tp")&&u.onnx.TypeProto.encode(o.tp,c.uint32(114).fork()).ldelim(),o.typeProtos!=null&&o.typeProtos.length)for(var f=0;f<o.typeProtos.length;++f)u.onnx.TypeProto.encode(o.typeProtos[f],c.uint32(122).fork()).ldelim();if(o.type!=null&&Object.hasOwnProperty.call(o,"type")&&c.uint32(160).int32(o.type),o.refAttrName!=null&&Object.hasOwnProperty.call(o,"refAttrName")&&c.uint32(170).string(o.refAttrName),o.sparseTensor!=null&&Object.hasOwnProperty.call(o,"sparseTensor")&&u.onnx.SparseTensorProto.encode(o.sparseTensor,c.uint32(178).fork()).ldelim(),o.sparseTensors!=null&&o.sparseTensors.length)for(var f=0;f<o.sparseTensors.length;++f)u.onnx.SparseTensorProto.encode(o.sparseTensors[f],c.uint32(186).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.AttributeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 21:{d.refAttrName=o.string();break}case 13:{d.docString=o.string();break}case 20:{d.type=o.int32();break}case 2:{d.f=o.float();break}case 3:{d.i=o.int64();break}case 4:{d.s=o.bytes();break}case 5:{d.t=u.onnx.TensorProto.decode(o,o.uint32());break}case 6:{d.g=u.onnx.GraphProto.decode(o,o.uint32());break}case 22:{d.sparseTensor=u.onnx.SparseTensorProto.decode(o,o.uint32());break}case 14:{d.tp=u.onnx.TypeProto.decode(o,o.uint32());break}case 7:{if(d.floats&&d.floats.length||(d.floats=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.floats.push(o.float());else d.floats.push(o.float());break}case 8:{if(d.ints&&d.ints.length||(d.ints=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.ints.push(o.int64());else d.ints.push(o.int64());break}case 9:{d.strings&&d.strings.length||(d.strings=[]),d.strings.push(o.bytes());break}case 10:{d.tensors&&d.tensors.length||(d.tensors=[]),d.tensors.push(u.onnx.TensorProto.decode(o,o.uint32()));break}case 11:{d.graphs&&d.graphs.length||(d.graphs=[]),d.graphs.push(u.onnx.GraphProto.decode(o,o.uint32()));break}case 23:{d.sparseTensors&&d.sparseTensors.length||(d.sparseTensors=[]),d.sparseTensors.push(u.onnx.SparseTensorProto.decode(o,o.uint32()));break}case 15:{d.typeProtos&&d.typeProtos.length||(d.typeProtos=[]),d.typeProtos.push(u.onnx.TypeProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&!a.isString(o.refAttrName))return"refAttrName: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.type!=null&&o.hasOwnProperty("type"))switch(o.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(o.f!=null&&o.hasOwnProperty("f")&&typeof o.f!="number")return"f: number expected";if(o.i!=null&&o.hasOwnProperty("i")&&!a.isInteger(o.i)&&!(o.i&&a.isInteger(o.i.low)&&a.isInteger(o.i.high)))return"i: integer|Long expected";if(o.s!=null&&o.hasOwnProperty("s")&&!(o.s&&typeof o.s.length=="number"||a.isString(o.s)))return"s: buffer expected";if(o.t!=null&&o.hasOwnProperty("t")){var c=u.onnx.TensorProto.verify(o.t);if(c)return"t."+c}if(o.g!=null&&o.hasOwnProperty("g")){var c=u.onnx.GraphProto.verify(o.g);if(c)return"g."+c}if(o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")){var c=u.onnx.SparseTensorProto.verify(o.sparseTensor);if(c)return"sparseTensor."+c}if(o.tp!=null&&o.hasOwnProperty("tp")){var c=u.onnx.TypeProto.verify(o.tp);if(c)return"tp."+c}if(o.floats!=null&&o.hasOwnProperty("floats")){if(!Array.isArray(o.floats))return"floats: array expected";for(var f=0;f<o.floats.length;++f)if(typeof o.floats[f]!="number")return"floats: number[] expected"}if(o.ints!=null&&o.hasOwnProperty("ints")){if(!Array.isArray(o.ints))return"ints: array expected";for(var f=0;f<o.ints.length;++f)if(!a.isInteger(o.ints[f])&&!(o.ints[f]&&a.isInteger(o.ints[f].low)&&a.isInteger(o.ints[f].high)))return"ints: integer|Long[] expected"}if(o.strings!=null&&o.hasOwnProperty("strings")){if(!Array.isArray(o.strings))return"strings: array expected";for(var f=0;f<o.strings.length;++f)if(!(o.strings[f]&&typeof o.strings[f].length=="number"||a.isString(o.strings[f])))return"strings: buffer[] expected"}if(o.tensors!=null&&o.hasOwnProperty("tensors")){if(!Array.isArray(o.tensors))return"tensors: array expected";for(var f=0;f<o.tensors.length;++f){var c=u.onnx.TensorProto.verify(o.tensors[f]);if(c)return"tensors."+c}}if(o.graphs!=null&&o.hasOwnProperty("graphs")){if(!Array.isArray(o.graphs))return"graphs: array expected";for(var f=0;f<o.graphs.length;++f){var c=u.onnx.GraphProto.verify(o.graphs[f]);if(c)return"graphs."+c}}if(o.sparseTensors!=null&&o.hasOwnProperty("sparseTensors")){if(!Array.isArray(o.sparseTensors))return"sparseTensors: array expected";for(var f=0;f<o.sparseTensors.length;++f){var c=u.onnx.SparseTensorProto.verify(o.sparseTensors[f]);if(c)return"sparseTensors."+c}}if(o.typeProtos!=null&&o.hasOwnProperty("typeProtos")){if(!Array.isArray(o.typeProtos))return"typeProtos: array expected";for(var f=0;f<o.typeProtos.length;++f){var c=u.onnx.TypeProto.verify(o.typeProtos[f]);if(c)return"typeProtos."+c}}return null},l.fromObject=function(o){if(o instanceof u.onnx.AttributeProto)return o;var c=new u.onnx.AttributeProto;switch(o.name!=null&&(c.name=String(o.name)),o.refAttrName!=null&&(c.refAttrName=String(o.refAttrName)),o.docString!=null&&(c.docString=String(o.docString)),o.type){default:if(typeof o.type=="number"){c.type=o.type;break}break;case"UNDEFINED":case 0:c.type=0;break;case"FLOAT":case 1:c.type=1;break;case"INT":case 2:c.type=2;break;case"STRING":case 3:c.type=3;break;case"TENSOR":case 4:c.type=4;break;case"GRAPH":case 5:c.type=5;break;case"SPARSE_TENSOR":case 11:c.type=11;break;case"TYPE_PROTO":case 13:c.type=13;break;case"FLOATS":case 6:c.type=6;break;case"INTS":case 7:c.type=7;break;case"STRINGS":case 8:c.type=8;break;case"TENSORS":case 9:c.type=9;break;case"GRAPHS":case 10:c.type=10;break;case"SPARSE_TENSORS":case 12:c.type=12;break;case"TYPE_PROTOS":case 14:c.type=14;break}if(o.f!=null&&(c.f=Number(o.f)),o.i!=null&&(a.Long?(c.i=a.Long.fromValue(o.i)).unsigned=!1:typeof o.i=="string"?c.i=parseInt(o.i,10):typeof o.i=="number"?c.i=o.i:typeof o.i=="object"&&(c.i=new a.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber())),o.s!=null&&(typeof o.s=="string"?a.base64.decode(o.s,c.s=a.newBuffer(a.base64.length(o.s)),0):o.s.length>=0&&(c.s=o.s)),o.t!=null){if(typeof o.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");c.t=u.onnx.TensorProto.fromObject(o.t)}if(o.g!=null){if(typeof o.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");c.g=u.onnx.GraphProto.fromObject(o.g)}if(o.sparseTensor!=null){if(typeof o.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");c.sparseTensor=u.onnx.SparseTensorProto.fromObject(o.sparseTensor)}if(o.tp!=null){if(typeof o.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");c.tp=u.onnx.TypeProto.fromObject(o.tp)}if(o.floats){if(!Array.isArray(o.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");c.floats=[];for(var f=0;f<o.floats.length;++f)c.floats[f]=Number(o.floats[f])}if(o.ints){if(!Array.isArray(o.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");c.ints=[];for(var f=0;f<o.ints.length;++f)a.Long?(c.ints[f]=a.Long.fromValue(o.ints[f])).unsigned=!1:typeof o.ints[f]=="string"?c.ints[f]=parseInt(o.ints[f],10):typeof o.ints[f]=="number"?c.ints[f]=o.ints[f]:typeof o.ints[f]=="object"&&(c.ints[f]=new a.LongBits(o.ints[f].low>>>0,o.ints[f].high>>>0).toNumber())}if(o.strings){if(!Array.isArray(o.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");c.strings=[];for(var f=0;f<o.strings.length;++f)typeof o.strings[f]=="string"?a.base64.decode(o.strings[f],c.strings[f]=a.newBuffer(a.base64.length(o.strings[f])),0):o.strings[f].length>=0&&(c.strings[f]=o.strings[f])}if(o.tensors){if(!Array.isArray(o.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");c.tensors=[];for(var f=0;f<o.tensors.length;++f){if(typeof o.tensors[f]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");c.tensors[f]=u.onnx.TensorProto.fromObject(o.tensors[f])}}if(o.graphs){if(!Array.isArray(o.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");c.graphs=[];for(var f=0;f<o.graphs.length;++f){if(typeof o.graphs[f]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");c.graphs[f]=u.onnx.GraphProto.fromObject(o.graphs[f])}}if(o.sparseTensors){if(!Array.isArray(o.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");c.sparseTensors=[];for(var f=0;f<o.sparseTensors.length;++f){if(typeof o.sparseTensors[f]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");c.sparseTensors[f]=u.onnx.SparseTensorProto.fromObject(o.sparseTensors[f])}}if(o.typeProtos){if(!Array.isArray(o.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");c.typeProtos=[];for(var f=0;f<o.typeProtos.length;++f){if(typeof o.typeProtos[f]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");c.typeProtos[f]=u.onnx.TypeProto.fromObject(o.typeProtos[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[],f.typeProtos=[],f.sparseTensors=[]),c.defaults){if(f.name="",f.f=0,a.Long){var d=new a.Long(0,0,!1);f.i=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.i=c.longs===String?"0":0;c.bytes===String?f.s="":(f.s=[],c.bytes!==Array&&(f.s=a.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.tp=null,f.type=c.enums===String?"UNDEFINED":0,f.refAttrName="",f.sparseTensor=null}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.f!=null&&o.hasOwnProperty("f")&&(f.f=c.json&&!isFinite(o.f)?String(o.f):o.f),o.i!=null&&o.hasOwnProperty("i")&&(typeof o.i=="number"?f.i=c.longs===String?String(o.i):o.i:f.i=c.longs===String?a.Long.prototype.toString.call(o.i):c.longs===Number?new a.LongBits(o.i.low>>>0,o.i.high>>>0).toNumber():o.i),o.s!=null&&o.hasOwnProperty("s")&&(f.s=c.bytes===String?a.base64.encode(o.s,0,o.s.length):c.bytes===Array?Array.prototype.slice.call(o.s):o.s),o.t!=null&&o.hasOwnProperty("t")&&(f.t=u.onnx.TensorProto.toObject(o.t,c)),o.g!=null&&o.hasOwnProperty("g")&&(f.g=u.onnx.GraphProto.toObject(o.g,c)),o.floats&&o.floats.length){f.floats=[];for(var h=0;h<o.floats.length;++h)f.floats[h]=c.json&&!isFinite(o.floats[h])?String(o.floats[h]):o.floats[h]}if(o.ints&&o.ints.length){f.ints=[];for(var h=0;h<o.ints.length;++h)typeof o.ints[h]=="number"?f.ints[h]=c.longs===String?String(o.ints[h]):o.ints[h]:f.ints[h]=c.longs===String?a.Long.prototype.toString.call(o.ints[h]):c.longs===Number?new a.LongBits(o.ints[h].low>>>0,o.ints[h].high>>>0).toNumber():o.ints[h]}if(o.strings&&o.strings.length){f.strings=[];for(var h=0;h<o.strings.length;++h)f.strings[h]=c.bytes===String?a.base64.encode(o.strings[h],0,o.strings[h].length):c.bytes===Array?Array.prototype.slice.call(o.strings[h]):o.strings[h]}if(o.tensors&&o.tensors.length){f.tensors=[];for(var h=0;h<o.tensors.length;++h)f.tensors[h]=u.onnx.TensorProto.toObject(o.tensors[h],c)}if(o.graphs&&o.graphs.length){f.graphs=[];for(var h=0;h<o.graphs.length;++h)f.graphs[h]=u.onnx.GraphProto.toObject(o.graphs[h],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.tp!=null&&o.hasOwnProperty("tp")&&(f.tp=u.onnx.TypeProto.toObject(o.tp,c)),o.typeProtos&&o.typeProtos.length){f.typeProtos=[];for(var h=0;h<o.typeProtos.length;++h)f.typeProtos[h]=u.onnx.TypeProto.toObject(o.typeProtos[h],c)}if(o.type!=null&&o.hasOwnProperty("type")&&(f.type=c.enums===String?u.onnx.AttributeProto.AttributeType[o.type]===void 0?o.type:u.onnx.AttributeProto.AttributeType[o.type]:o.type),o.refAttrName!=null&&o.hasOwnProperty("refAttrName")&&(f.refAttrName=o.refAttrName),o.sparseTensor!=null&&o.hasOwnProperty("sparseTensor")&&(f.sparseTensor=u.onnx.SparseTensorProto.toObject(o.sparseTensor,c)),o.sparseTensors&&o.sparseTensors.length){f.sparseTensors=[];for(var h=0;h<o.sparseTensors.length;++h)f.sparseTensors[h]=u.onnx.SparseTensorProto.toObject(o.sparseTensors[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.AttributeProto"},l.AttributeType=function(){var o={},c=Object.create(o);return c[o[0]="UNDEFINED"]=0,c[o[1]="FLOAT"]=1,c[o[2]="INT"]=2,c[o[3]="STRING"]=3,c[o[4]="TENSOR"]=4,c[o[5]="GRAPH"]=5,c[o[11]="SPARSE_TENSOR"]=11,c[o[13]="TYPE_PROTO"]=13,c[o[6]="FLOATS"]=6,c[o[7]="INTS"]=7,c[o[8]="STRINGS"]=8,c[o[9]="TENSORS"]=9,c[o[10]="GRAPHS"]=10,c[o[12]="SPARSE_TENSORS"]=12,c[o[14]="TYPE_PROTOS"]=14,c}(),l}(),s.ValueInfoProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.type=null,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.type!=null&&Object.hasOwnProperty.call(o,"type")&&u.onnx.TypeProto.encode(o.type,c.uint32(18).fork()).ldelim(),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(26).string(o.docString),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.ValueInfoProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 2:{d.type=u.onnx.TypeProto.decode(o,o.uint32());break}case 3:{d.docString=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.type!=null&&o.hasOwnProperty("type")){var c=u.onnx.TypeProto.verify(o.type);if(c)return"type."+c}return o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.ValueInfoProto)return o;var c=new u.onnx.ValueInfoProto;if(o.name!=null&&(c.name=String(o.name)),o.type!=null){if(typeof o.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");c.type=u.onnx.TypeProto.fromObject(o.type)}return o.docString!=null&&(c.docString=String(o.docString)),c},l.toObject=function(o,c){c||(c={});var f={};return c.defaults&&(f.name="",f.type=null,f.docString=""),o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.type!=null&&o.hasOwnProperty("type")&&(f.type=u.onnx.TypeProto.toObject(o.type,c)),o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ValueInfoProto"},l}(),s.NodeProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.name="",l.prototype.opType="",l.prototype.domain="",l.prototype.attribute=a.emptyArray,l.prototype.docString="",l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)c.uint32(10).string(o.input[f]);if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)c.uint32(18).string(o.output[f]);if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(26).string(o.name),o.opType!=null&&Object.hasOwnProperty.call(o,"opType")&&c.uint32(34).string(o.opType),o.attribute!=null&&o.attribute.length)for(var f=0;f<o.attribute.length;++f)u.onnx.AttributeProto.encode(o.attribute[f],c.uint32(42).fork()).ldelim();return o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(50).string(o.docString),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(58).string(o.domain),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.NodeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.input&&d.input.length||(d.input=[]),d.input.push(o.string());break}case 2:{d.output&&d.output.length||(d.output=[]),d.output.push(o.string());break}case 3:{d.name=o.string();break}case 4:{d.opType=o.string();break}case 7:{d.domain=o.string();break}case 5:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(u.onnx.AttributeProto.decode(o,o.uint32()));break}case 6:{d.docString=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c)if(!a.isString(o.input[c]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c)if(!a.isString(o.output[c]))return"output: string[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.opType!=null&&o.hasOwnProperty("opType")&&!a.isString(o.opType))return"opType: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain))return"domain: string expected";if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(var c=0;c<o.attribute.length;++c){var f=u.onnx.AttributeProto.verify(o.attribute[c]);if(f)return"attribute."+f}}return o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString)?"docString: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.NodeProto)return o;var c=new u.onnx.NodeProto;if(o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.NodeProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f)c.input[f]=String(o.input[f])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.NodeProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f)c.output[f]=String(o.output[f])}if(o.name!=null&&(c.name=String(o.name)),o.opType!=null&&(c.opType=String(o.opType)),o.domain!=null&&(c.domain=String(o.domain)),o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");c.attribute=[];for(var f=0;f<o.attribute.length;++f){if(typeof o.attribute[f]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");c.attribute[f]=u.onnx.AttributeProto.fromObject(o.attribute[f])}}return o.docString!=null&&(c.docString=String(o.docString)),c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[]),c.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=o.input[d]}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=o.output[d]}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.opType!=null&&o.hasOwnProperty("opType")&&(f.opType=o.opType),o.attribute&&o.attribute.length){f.attribute=[];for(var d=0;d<o.attribute.length;++d)f.attribute[d]=u.onnx.AttributeProto.toObject(o.attribute[d],c)}return o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.NodeProto"},l}(),s.TrainingInfoProto=function(){function l(o){if(this.initializationBinding=[],this.updateBinding=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.initialization=null,l.prototype.algorithm=null,l.prototype.initializationBinding=a.emptyArray,l.prototype.updateBinding=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.initialization!=null&&Object.hasOwnProperty.call(o,"initialization")&&u.onnx.GraphProto.encode(o.initialization,c.uint32(10).fork()).ldelim(),o.algorithm!=null&&Object.hasOwnProperty.call(o,"algorithm")&&u.onnx.GraphProto.encode(o.algorithm,c.uint32(18).fork()).ldelim(),o.initializationBinding!=null&&o.initializationBinding.length)for(var f=0;f<o.initializationBinding.length;++f)u.onnx.StringStringEntryProto.encode(o.initializationBinding[f],c.uint32(26).fork()).ldelim();if(o.updateBinding!=null&&o.updateBinding.length)for(var f=0;f<o.updateBinding.length;++f)u.onnx.StringStringEntryProto.encode(o.updateBinding[f],c.uint32(34).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TrainingInfoProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.initialization=u.onnx.GraphProto.decode(o,o.uint32());break}case 2:{d.algorithm=u.onnx.GraphProto.decode(o,o.uint32());break}case 3:{d.initializationBinding&&d.initializationBinding.length||(d.initializationBinding=[]),d.initializationBinding.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 4:{d.updateBinding&&d.updateBinding.length||(d.updateBinding=[]),d.updateBinding.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.initialization!=null&&o.hasOwnProperty("initialization")){var c=u.onnx.GraphProto.verify(o.initialization);if(c)return"initialization."+c}if(o.algorithm!=null&&o.hasOwnProperty("algorithm")){var c=u.onnx.GraphProto.verify(o.algorithm);if(c)return"algorithm."+c}if(o.initializationBinding!=null&&o.hasOwnProperty("initializationBinding")){if(!Array.isArray(o.initializationBinding))return"initializationBinding: array expected";for(var f=0;f<o.initializationBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(o.initializationBinding[f]);if(c)return"initializationBinding."+c}}if(o.updateBinding!=null&&o.hasOwnProperty("updateBinding")){if(!Array.isArray(o.updateBinding))return"updateBinding: array expected";for(var f=0;f<o.updateBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(o.updateBinding[f]);if(c)return"updateBinding."+c}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TrainingInfoProto)return o;var c=new u.onnx.TrainingInfoProto;if(o.initialization!=null){if(typeof o.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");c.initialization=u.onnx.GraphProto.fromObject(o.initialization)}if(o.algorithm!=null){if(typeof o.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");c.algorithm=u.onnx.GraphProto.fromObject(o.algorithm)}if(o.initializationBinding){if(!Array.isArray(o.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");c.initializationBinding=[];for(var f=0;f<o.initializationBinding.length;++f){if(typeof o.initializationBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");c.initializationBinding[f]=u.onnx.StringStringEntryProto.fromObject(o.initializationBinding[f])}}if(o.updateBinding){if(!Array.isArray(o.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");c.updateBinding=[];for(var f=0;f<o.updateBinding.length;++f){if(typeof o.updateBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");c.updateBinding[f]=u.onnx.StringStringEntryProto.fromObject(o.updateBinding[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.initializationBinding=[],f.updateBinding=[]),c.defaults&&(f.initialization=null,f.algorithm=null),o.initialization!=null&&o.hasOwnProperty("initialization")&&(f.initialization=u.onnx.GraphProto.toObject(o.initialization,c)),o.algorithm!=null&&o.hasOwnProperty("algorithm")&&(f.algorithm=u.onnx.GraphProto.toObject(o.algorithm,c)),o.initializationBinding&&o.initializationBinding.length){f.initializationBinding=[];for(var d=0;d<o.initializationBinding.length;++d)f.initializationBinding[d]=u.onnx.StringStringEntryProto.toObject(o.initializationBinding[d],c)}if(o.updateBinding&&o.updateBinding.length){f.updateBinding=[];for(var d=0;d<o.updateBinding.length;++d)f.updateBinding[d]=u.onnx.StringStringEntryProto.toObject(o.updateBinding[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TrainingInfoProto"},l}(),s.ModelProto=function(){function l(o){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.opsetImport=a.emptyArray,l.prototype.producerName="",l.prototype.producerVersion="",l.prototype.domain="",l.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.docString="",l.prototype.graph=null,l.prototype.metadataProps=a.emptyArray,l.prototype.trainingInfo=a.emptyArray,l.prototype.functions=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.irVersion!=null&&Object.hasOwnProperty.call(o,"irVersion")&&c.uint32(8).int64(o.irVersion),o.producerName!=null&&Object.hasOwnProperty.call(o,"producerName")&&c.uint32(18).string(o.producerName),o.producerVersion!=null&&Object.hasOwnProperty.call(o,"producerVersion")&&c.uint32(26).string(o.producerVersion),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(34).string(o.domain),o.modelVersion!=null&&Object.hasOwnProperty.call(o,"modelVersion")&&c.uint32(40).int64(o.modelVersion),o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(50).string(o.docString),o.graph!=null&&Object.hasOwnProperty.call(o,"graph")&&u.onnx.GraphProto.encode(o.graph,c.uint32(58).fork()).ldelim(),o.opsetImport!=null&&o.opsetImport.length)for(var f=0;f<o.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(o.opsetImport[f],c.uint32(66).fork()).ldelim();if(o.metadataProps!=null&&o.metadataProps.length)for(var f=0;f<o.metadataProps.length;++f)u.onnx.StringStringEntryProto.encode(o.metadataProps[f],c.uint32(114).fork()).ldelim();if(o.trainingInfo!=null&&o.trainingInfo.length)for(var f=0;f<o.trainingInfo.length;++f)u.onnx.TrainingInfoProto.encode(o.trainingInfo[f],c.uint32(162).fork()).ldelim();if(o.functions!=null&&o.functions.length)for(var f=0;f<o.functions.length;++f)u.onnx.FunctionProto.encode(o.functions[f],c.uint32(202).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.ModelProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.irVersion=o.int64();break}case 8:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(o,o.uint32()));break}case 2:{d.producerName=o.string();break}case 3:{d.producerVersion=o.string();break}case 4:{d.domain=o.string();break}case 5:{d.modelVersion=o.int64();break}case 6:{d.docString=o.string();break}case 7:{d.graph=u.onnx.GraphProto.decode(o,o.uint32());break}case 14:{d.metadataProps&&d.metadataProps.length||(d.metadataProps=[]),d.metadataProps.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 20:{d.trainingInfo&&d.trainingInfo.length||(d.trainingInfo=[]),d.trainingInfo.push(u.onnx.TrainingInfoProto.decode(o,o.uint32()));break}case 25:{d.functions&&d.functions.length||(d.functions=[]),d.functions.push(u.onnx.FunctionProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&!a.isInteger(o.irVersion)&&!(o.irVersion&&a.isInteger(o.irVersion.low)&&a.isInteger(o.irVersion.high)))return"irVersion: integer|Long expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var c=0;c<o.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(o.opsetImport[c]);if(f)return"opsetImport."+f}}if(o.producerName!=null&&o.hasOwnProperty("producerName")&&!a.isString(o.producerName))return"producerName: string expected";if(o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&!a.isString(o.producerVersion))return"producerVersion: string expected";if(o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain))return"domain: string expected";if(o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&!a.isInteger(o.modelVersion)&&!(o.modelVersion&&a.isInteger(o.modelVersion.low)&&a.isInteger(o.modelVersion.high)))return"modelVersion: integer|Long expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.graph!=null&&o.hasOwnProperty("graph")){var f=u.onnx.GraphProto.verify(o.graph);if(f)return"graph."+f}if(o.metadataProps!=null&&o.hasOwnProperty("metadataProps")){if(!Array.isArray(o.metadataProps))return"metadataProps: array expected";for(var c=0;c<o.metadataProps.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.metadataProps[c]);if(f)return"metadataProps."+f}}if(o.trainingInfo!=null&&o.hasOwnProperty("trainingInfo")){if(!Array.isArray(o.trainingInfo))return"trainingInfo: array expected";for(var c=0;c<o.trainingInfo.length;++c){var f=u.onnx.TrainingInfoProto.verify(o.trainingInfo[c]);if(f)return"trainingInfo."+f}}if(o.functions!=null&&o.hasOwnProperty("functions")){if(!Array.isArray(o.functions))return"functions: array expected";for(var c=0;c<o.functions.length;++c){var f=u.onnx.FunctionProto.verify(o.functions[c]);if(f)return"functions."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.ModelProto)return o;var c=new u.onnx.ModelProto;if(o.irVersion!=null&&(a.Long?(c.irVersion=a.Long.fromValue(o.irVersion)).unsigned=!1:typeof o.irVersion=="string"?c.irVersion=parseInt(o.irVersion,10):typeof o.irVersion=="number"?c.irVersion=o.irVersion:typeof o.irVersion=="object"&&(c.irVersion=new a.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber())),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<o.opsetImport.length;++f){if(typeof o.opsetImport[f]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(o.opsetImport[f])}}if(o.producerName!=null&&(c.producerName=String(o.producerName)),o.producerVersion!=null&&(c.producerVersion=String(o.producerVersion)),o.domain!=null&&(c.domain=String(o.domain)),o.modelVersion!=null&&(a.Long?(c.modelVersion=a.Long.fromValue(o.modelVersion)).unsigned=!1:typeof o.modelVersion=="string"?c.modelVersion=parseInt(o.modelVersion,10):typeof o.modelVersion=="number"?c.modelVersion=o.modelVersion:typeof o.modelVersion=="object"&&(c.modelVersion=new a.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber())),o.docString!=null&&(c.docString=String(o.docString)),o.graph!=null){if(typeof o.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");c.graph=u.onnx.GraphProto.fromObject(o.graph)}if(o.metadataProps){if(!Array.isArray(o.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");c.metadataProps=[];for(var f=0;f<o.metadataProps.length;++f){if(typeof o.metadataProps[f]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");c.metadataProps[f]=u.onnx.StringStringEntryProto.fromObject(o.metadataProps[f])}}if(o.trainingInfo){if(!Array.isArray(o.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");c.trainingInfo=[];for(var f=0;f<o.trainingInfo.length;++f){if(typeof o.trainingInfo[f]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");c.trainingInfo[f]=u.onnx.TrainingInfoProto.fromObject(o.trainingInfo[f])}}if(o.functions){if(!Array.isArray(o.functions))throw TypeError(".onnx.ModelProto.functions: array expected");c.functions=[];for(var f=0;f<o.functions.length;++f){if(typeof o.functions[f]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");c.functions[f]=u.onnx.FunctionProto.fromObject(o.functions[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.opsetImport=[],f.metadataProps=[],f.trainingInfo=[],f.functions=[]),c.defaults){if(a.Long){var d=new a.Long(0,0,!1);f.irVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.irVersion=c.longs===String?"0":0;if(f.producerName="",f.producerVersion="",f.domain="",a.Long){var d=new a.Long(0,0,!1);f.modelVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.modelVersion=c.longs===String?"0":0;f.docString="",f.graph=null}if(o.irVersion!=null&&o.hasOwnProperty("irVersion")&&(typeof o.irVersion=="number"?f.irVersion=c.longs===String?String(o.irVersion):o.irVersion:f.irVersion=c.longs===String?a.Long.prototype.toString.call(o.irVersion):c.longs===Number?new a.LongBits(o.irVersion.low>>>0,o.irVersion.high>>>0).toNumber():o.irVersion),o.producerName!=null&&o.hasOwnProperty("producerName")&&(f.producerName=o.producerName),o.producerVersion!=null&&o.hasOwnProperty("producerVersion")&&(f.producerVersion=o.producerVersion),o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.modelVersion!=null&&o.hasOwnProperty("modelVersion")&&(typeof o.modelVersion=="number"?f.modelVersion=c.longs===String?String(o.modelVersion):o.modelVersion:f.modelVersion=c.longs===String?a.Long.prototype.toString.call(o.modelVersion):c.longs===Number?new a.LongBits(o.modelVersion.low>>>0,o.modelVersion.high>>>0).toNumber():o.modelVersion),o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.graph!=null&&o.hasOwnProperty("graph")&&(f.graph=u.onnx.GraphProto.toObject(o.graph,c)),o.opsetImport&&o.opsetImport.length){f.opsetImport=[];for(var h=0;h<o.opsetImport.length;++h)f.opsetImport[h]=u.onnx.OperatorSetIdProto.toObject(o.opsetImport[h],c)}if(o.metadataProps&&o.metadataProps.length){f.metadataProps=[];for(var h=0;h<o.metadataProps.length;++h)f.metadataProps[h]=u.onnx.StringStringEntryProto.toObject(o.metadataProps[h],c)}if(o.trainingInfo&&o.trainingInfo.length){f.trainingInfo=[];for(var h=0;h<o.trainingInfo.length;++h)f.trainingInfo[h]=u.onnx.TrainingInfoProto.toObject(o.trainingInfo[h],c)}if(o.functions&&o.functions.length){f.functions=[];for(var h=0;h<o.functions.length;++h)f.functions[h]=u.onnx.FunctionProto.toObject(o.functions[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.ModelProto"},l}(),s.StringStringEntryProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.key="",l.prototype.value="",l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.key!=null&&Object.hasOwnProperty.call(o,"key")&&c.uint32(10).string(o.key),o.value!=null&&Object.hasOwnProperty.call(o,"value")&&c.uint32(18).string(o.value),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.StringStringEntryProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.key=o.string();break}case 2:{d.value=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.key!=null&&o.hasOwnProperty("key")&&!a.isString(o.key)?"key: string expected":o.value!=null&&o.hasOwnProperty("value")&&!a.isString(o.value)?"value: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.StringStringEntryProto)return o;var c=new u.onnx.StringStringEntryProto;return o.key!=null&&(c.key=String(o.key)),o.value!=null&&(c.value=String(o.value)),c},l.toObject=function(o,c){c||(c={});var f={};return c.defaults&&(f.key="",f.value=""),o.key!=null&&o.hasOwnProperty("key")&&(f.key=o.key),o.value!=null&&o.hasOwnProperty("value")&&(f.value=o.value),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.StringStringEntryProto"},l}(),s.TensorAnnotation=function(){function l(o){if(this.quantParameterTensorNames=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.tensorName="",l.prototype.quantParameterTensorNames=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.tensorName!=null&&Object.hasOwnProperty.call(o,"tensorName")&&c.uint32(10).string(o.tensorName),o.quantParameterTensorNames!=null&&o.quantParameterTensorNames.length)for(var f=0;f<o.quantParameterTensorNames.length;++f)u.onnx.StringStringEntryProto.encode(o.quantParameterTensorNames[f],c.uint32(18).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorAnnotation;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.tensorName=o.string();break}case 2:{d.quantParameterTensorNames&&d.quantParameterTensorNames.length||(d.quantParameterTensorNames=[]),d.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.tensorName!=null&&o.hasOwnProperty("tensorName")&&!a.isString(o.tensorName))return"tensorName: string expected";if(o.quantParameterTensorNames!=null&&o.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(o.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var c=0;c<o.quantParameterTensorNames.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.quantParameterTensorNames[c]);if(f)return"quantParameterTensorNames."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorAnnotation)return o;var c=new u.onnx.TensorAnnotation;if(o.tensorName!=null&&(c.tensorName=String(o.tensorName)),o.quantParameterTensorNames){if(!Array.isArray(o.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");c.quantParameterTensorNames=[];for(var f=0;f<o.quantParameterTensorNames.length;++f){if(typeof o.quantParameterTensorNames[f]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");c.quantParameterTensorNames[f]=u.onnx.StringStringEntryProto.fromObject(o.quantParameterTensorNames[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.quantParameterTensorNames=[]),c.defaults&&(f.tensorName=""),o.tensorName!=null&&o.hasOwnProperty("tensorName")&&(f.tensorName=o.tensorName),o.quantParameterTensorNames&&o.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var d=0;d<o.quantParameterTensorNames.length;++d)f.quantParameterTensorNames[d]=u.onnx.StringStringEntryProto.toObject(o.quantParameterTensorNames[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorAnnotation"},l}(),s.GraphProto=function(){function l(o){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.node=a.emptyArray,l.prototype.name="",l.prototype.initializer=a.emptyArray,l.prototype.sparseInitializer=a.emptyArray,l.prototype.docString="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.valueInfo=a.emptyArray,l.prototype.quantizationAnnotation=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.node!=null&&o.node.length)for(var f=0;f<o.node.length;++f)u.onnx.NodeProto.encode(o.node[f],c.uint32(10).fork()).ldelim();if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(18).string(o.name),o.initializer!=null&&o.initializer.length)for(var f=0;f<o.initializer.length;++f)u.onnx.TensorProto.encode(o.initializer[f],c.uint32(42).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(82).string(o.docString),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)u.onnx.ValueInfoProto.encode(o.input[f],c.uint32(90).fork()).ldelim();if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)u.onnx.ValueInfoProto.encode(o.output[f],c.uint32(98).fork()).ldelim();if(o.valueInfo!=null&&o.valueInfo.length)for(var f=0;f<o.valueInfo.length;++f)u.onnx.ValueInfoProto.encode(o.valueInfo[f],c.uint32(106).fork()).ldelim();if(o.quantizationAnnotation!=null&&o.quantizationAnnotation.length)for(var f=0;f<o.quantizationAnnotation.length;++f)u.onnx.TensorAnnotation.encode(o.quantizationAnnotation[f],c.uint32(114).fork()).ldelim();if(o.sparseInitializer!=null&&o.sparseInitializer.length)for(var f=0;f<o.sparseInitializer.length;++f)u.onnx.SparseTensorProto.encode(o.sparseInitializer[f],c.uint32(122).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.GraphProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(o,o.uint32()));break}case 2:{d.name=o.string();break}case 5:{d.initializer&&d.initializer.length||(d.initializer=[]),d.initializer.push(u.onnx.TensorProto.decode(o,o.uint32()));break}case 15:{d.sparseInitializer&&d.sparseInitializer.length||(d.sparseInitializer=[]),d.sparseInitializer.push(u.onnx.SparseTensorProto.decode(o,o.uint32()));break}case 10:{d.docString=o.string();break}case 11:{d.input&&d.input.length||(d.input=[]),d.input.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 12:{d.output&&d.output.length||(d.output=[]),d.output.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 13:{d.valueInfo&&d.valueInfo.length||(d.valueInfo=[]),d.valueInfo.push(u.onnx.ValueInfoProto.decode(o,o.uint32()));break}case 14:{d.quantizationAnnotation&&d.quantizationAnnotation.length||(d.quantizationAnnotation=[]),d.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var c=0;c<o.node.length;++c){var f=u.onnx.NodeProto.verify(o.node[c]);if(f)return"node."+f}}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.initializer!=null&&o.hasOwnProperty("initializer")){if(!Array.isArray(o.initializer))return"initializer: array expected";for(var c=0;c<o.initializer.length;++c){var f=u.onnx.TensorProto.verify(o.initializer[c]);if(f)return"initializer."+f}}if(o.sparseInitializer!=null&&o.hasOwnProperty("sparseInitializer")){if(!Array.isArray(o.sparseInitializer))return"sparseInitializer: array expected";for(var c=0;c<o.sparseInitializer.length;++c){var f=u.onnx.SparseTensorProto.verify(o.sparseInitializer[c]);if(f)return"sparseInitializer."+f}}if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c){var f=u.onnx.ValueInfoProto.verify(o.input[c]);if(f)return"input."+f}}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c){var f=u.onnx.ValueInfoProto.verify(o.output[c]);if(f)return"output."+f}}if(o.valueInfo!=null&&o.hasOwnProperty("valueInfo")){if(!Array.isArray(o.valueInfo))return"valueInfo: array expected";for(var c=0;c<o.valueInfo.length;++c){var f=u.onnx.ValueInfoProto.verify(o.valueInfo[c]);if(f)return"valueInfo."+f}}if(o.quantizationAnnotation!=null&&o.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(o.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var c=0;c<o.quantizationAnnotation.length;++c){var f=u.onnx.TensorAnnotation.verify(o.quantizationAnnotation[c]);if(f)return"quantizationAnnotation."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.GraphProto)return o;var c=new u.onnx.GraphProto;if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.GraphProto.node: array expected");c.node=[];for(var f=0;f<o.node.length;++f){if(typeof o.node[f]!="object")throw TypeError(".onnx.GraphProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(o.node[f])}}if(o.name!=null&&(c.name=String(o.name)),o.initializer){if(!Array.isArray(o.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");c.initializer=[];for(var f=0;f<o.initializer.length;++f){if(typeof o.initializer[f]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");c.initializer[f]=u.onnx.TensorProto.fromObject(o.initializer[f])}}if(o.sparseInitializer){if(!Array.isArray(o.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");c.sparseInitializer=[];for(var f=0;f<o.sparseInitializer.length;++f){if(typeof o.sparseInitializer[f]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");c.sparseInitializer[f]=u.onnx.SparseTensorProto.fromObject(o.sparseInitializer[f])}}if(o.docString!=null&&(c.docString=String(o.docString)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.GraphProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f){if(typeof o.input[f]!="object")throw TypeError(".onnx.GraphProto.input: object expected");c.input[f]=u.onnx.ValueInfoProto.fromObject(o.input[f])}}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.GraphProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f){if(typeof o.output[f]!="object")throw TypeError(".onnx.GraphProto.output: object expected");c.output[f]=u.onnx.ValueInfoProto.fromObject(o.output[f])}}if(o.valueInfo){if(!Array.isArray(o.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");c.valueInfo=[];for(var f=0;f<o.valueInfo.length;++f){if(typeof o.valueInfo[f]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");c.valueInfo[f]=u.onnx.ValueInfoProto.fromObject(o.valueInfo[f])}}if(o.quantizationAnnotation){if(!Array.isArray(o.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");c.quantizationAnnotation=[];for(var f=0;f<o.quantizationAnnotation.length;++f){if(typeof o.quantizationAnnotation[f]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");c.quantizationAnnotation[f]=u.onnx.TensorAnnotation.fromObject(o.quantizationAnnotation[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[],f.sparseInitializer=[]),c.defaults&&(f.name="",f.docString=""),o.node&&o.node.length){f.node=[];for(var d=0;d<o.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(o.node[d],c)}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.initializer&&o.initializer.length){f.initializer=[];for(var d=0;d<o.initializer.length;++d)f.initializer[d]=u.onnx.TensorProto.toObject(o.initializer[d],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=u.onnx.ValueInfoProto.toObject(o.input[d],c)}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=u.onnx.ValueInfoProto.toObject(o.output[d],c)}if(o.valueInfo&&o.valueInfo.length){f.valueInfo=[];for(var d=0;d<o.valueInfo.length;++d)f.valueInfo[d]=u.onnx.ValueInfoProto.toObject(o.valueInfo[d],c)}if(o.quantizationAnnotation&&o.quantizationAnnotation.length){f.quantizationAnnotation=[];for(var d=0;d<o.quantizationAnnotation.length;++d)f.quantizationAnnotation[d]=u.onnx.TensorAnnotation.toObject(o.quantizationAnnotation[d],c)}if(o.sparseInitializer&&o.sparseInitializer.length){f.sparseInitializer=[];for(var d=0;d<o.sparseInitializer.length;++d)f.sparseInitializer[d]=u.onnx.SparseTensorProto.toObject(o.sparseInitializer[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.GraphProto"},l}(),s.TensorProto=function(){function l(o){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.dims=a.emptyArray,l.prototype.dataType=0,l.prototype.segment=null,l.prototype.floatData=a.emptyArray,l.prototype.int32Data=a.emptyArray,l.prototype.stringData=a.emptyArray,l.prototype.int64Data=a.emptyArray,l.prototype.name="",l.prototype.docString="",l.prototype.rawData=a.newBuffer([]),l.prototype.externalData=a.emptyArray,l.prototype.dataLocation=0,l.prototype.doubleData=a.emptyArray,l.prototype.uint64Data=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.dims!=null&&o.dims.length){c.uint32(10).fork();for(var f=0;f<o.dims.length;++f)c.int64(o.dims[f]);c.ldelim()}if(o.dataType!=null&&Object.hasOwnProperty.call(o,"dataType")&&c.uint32(16).int32(o.dataType),o.segment!=null&&Object.hasOwnProperty.call(o,"segment")&&u.onnx.TensorProto.Segment.encode(o.segment,c.uint32(26).fork()).ldelim(),o.floatData!=null&&o.floatData.length){c.uint32(34).fork();for(var f=0;f<o.floatData.length;++f)c.float(o.floatData[f]);c.ldelim()}if(o.int32Data!=null&&o.int32Data.length){c.uint32(42).fork();for(var f=0;f<o.int32Data.length;++f)c.int32(o.int32Data[f]);c.ldelim()}if(o.stringData!=null&&o.stringData.length)for(var f=0;f<o.stringData.length;++f)c.uint32(50).bytes(o.stringData[f]);if(o.int64Data!=null&&o.int64Data.length){c.uint32(58).fork();for(var f=0;f<o.int64Data.length;++f)c.int64(o.int64Data[f]);c.ldelim()}if(o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(66).string(o.name),o.rawData!=null&&Object.hasOwnProperty.call(o,"rawData")&&c.uint32(74).bytes(o.rawData),o.doubleData!=null&&o.doubleData.length){c.uint32(82).fork();for(var f=0;f<o.doubleData.length;++f)c.double(o.doubleData[f]);c.ldelim()}if(o.uint64Data!=null&&o.uint64Data.length){c.uint32(90).fork();for(var f=0;f<o.uint64Data.length;++f)c.uint64(o.uint64Data[f]);c.ldelim()}if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(98).string(o.docString),o.externalData!=null&&o.externalData.length)for(var f=0;f<o.externalData.length;++f)u.onnx.StringStringEntryProto.encode(o.externalData[f],c.uint32(106).fork()).ldelim();return o.dataLocation!=null&&Object.hasOwnProperty.call(o,"dataLocation")&&c.uint32(112).int32(o.dataLocation),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.dims.push(o.int64());else d.dims.push(o.int64());break}case 2:{d.dataType=o.int32();break}case 3:{d.segment=u.onnx.TensorProto.Segment.decode(o,o.uint32());break}case 4:{if(d.floatData&&d.floatData.length||(d.floatData=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.floatData.push(o.float());else d.floatData.push(o.float());break}case 5:{if(d.int32Data&&d.int32Data.length||(d.int32Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.int32Data.push(o.int32());else d.int32Data.push(o.int32());break}case 6:{d.stringData&&d.stringData.length||(d.stringData=[]),d.stringData.push(o.bytes());break}case 7:{if(d.int64Data&&d.int64Data.length||(d.int64Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.int64Data.push(o.int64());else d.int64Data.push(o.int64());break}case 8:{d.name=o.string();break}case 12:{d.docString=o.string();break}case 9:{d.rawData=o.bytes();break}case 13:{d.externalData&&d.externalData.length||(d.externalData=[]),d.externalData.push(u.onnx.StringStringEntryProto.decode(o,o.uint32()));break}case 14:{d.dataLocation=o.int32();break}case 10:{if(d.doubleData&&d.doubleData.length||(d.doubleData=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.doubleData.push(o.double());else d.doubleData.push(o.double());break}case 11:{if(d.uint64Data&&d.uint64Data.length||(d.uint64Data=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.uint64Data.push(o.uint64());else d.uint64Data.push(o.uint64());break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var c=0;c<o.dims.length;++c)if(!a.isInteger(o.dims[c])&&!(o.dims[c]&&a.isInteger(o.dims[c].low)&&a.isInteger(o.dims[c].high)))return"dims: integer|Long[] expected"}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&!a.isInteger(o.dataType))return"dataType: integer expected";if(o.segment!=null&&o.hasOwnProperty("segment")){var f=u.onnx.TensorProto.Segment.verify(o.segment);if(f)return"segment."+f}if(o.floatData!=null&&o.hasOwnProperty("floatData")){if(!Array.isArray(o.floatData))return"floatData: array expected";for(var c=0;c<o.floatData.length;++c)if(typeof o.floatData[c]!="number")return"floatData: number[] expected"}if(o.int32Data!=null&&o.hasOwnProperty("int32Data")){if(!Array.isArray(o.int32Data))return"int32Data: array expected";for(var c=0;c<o.int32Data.length;++c)if(!a.isInteger(o.int32Data[c]))return"int32Data: integer[] expected"}if(o.stringData!=null&&o.hasOwnProperty("stringData")){if(!Array.isArray(o.stringData))return"stringData: array expected";for(var c=0;c<o.stringData.length;++c)if(!(o.stringData[c]&&typeof o.stringData[c].length=="number"||a.isString(o.stringData[c])))return"stringData: buffer[] expected"}if(o.int64Data!=null&&o.hasOwnProperty("int64Data")){if(!Array.isArray(o.int64Data))return"int64Data: array expected";for(var c=0;c<o.int64Data.length;++c)if(!a.isInteger(o.int64Data[c])&&!(o.int64Data[c]&&a.isInteger(o.int64Data[c].low)&&a.isInteger(o.int64Data[c].high)))return"int64Data: integer|Long[] expected"}if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.rawData!=null&&o.hasOwnProperty("rawData")&&!(o.rawData&&typeof o.rawData.length=="number"||a.isString(o.rawData)))return"rawData: buffer expected";if(o.externalData!=null&&o.hasOwnProperty("externalData")){if(!Array.isArray(o.externalData))return"externalData: array expected";for(var c=0;c<o.externalData.length;++c){var f=u.onnx.StringStringEntryProto.verify(o.externalData[c]);if(f)return"externalData."+f}}if(o.dataLocation!=null&&o.hasOwnProperty("dataLocation"))switch(o.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(o.doubleData!=null&&o.hasOwnProperty("doubleData")){if(!Array.isArray(o.doubleData))return"doubleData: array expected";for(var c=0;c<o.doubleData.length;++c)if(typeof o.doubleData[c]!="number")return"doubleData: number[] expected"}if(o.uint64Data!=null&&o.hasOwnProperty("uint64Data")){if(!Array.isArray(o.uint64Data))return"uint64Data: array expected";for(var c=0;c<o.uint64Data.length;++c)if(!a.isInteger(o.uint64Data[c])&&!(o.uint64Data[c]&&a.isInteger(o.uint64Data[c].low)&&a.isInteger(o.uint64Data[c].high)))return"uint64Data: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorProto)return o;var c=new u.onnx.TensorProto;if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.TensorProto.dims: array expected");c.dims=[];for(var f=0;f<o.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(o.dims[f])).unsigned=!1:typeof o.dims[f]=="string"?c.dims[f]=parseInt(o.dims[f],10):typeof o.dims[f]=="number"?c.dims[f]=o.dims[f]:typeof o.dims[f]=="object"&&(c.dims[f]=new a.LongBits(o.dims[f].low>>>0,o.dims[f].high>>>0).toNumber())}if(o.dataType!=null&&(c.dataType=o.dataType|0),o.segment!=null){if(typeof o.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");c.segment=u.onnx.TensorProto.Segment.fromObject(o.segment)}if(o.floatData){if(!Array.isArray(o.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");c.floatData=[];for(var f=0;f<o.floatData.length;++f)c.floatData[f]=Number(o.floatData[f])}if(o.int32Data){if(!Array.isArray(o.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");c.int32Data=[];for(var f=0;f<o.int32Data.length;++f)c.int32Data[f]=o.int32Data[f]|0}if(o.stringData){if(!Array.isArray(o.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");c.stringData=[];for(var f=0;f<o.stringData.length;++f)typeof o.stringData[f]=="string"?a.base64.decode(o.stringData[f],c.stringData[f]=a.newBuffer(a.base64.length(o.stringData[f])),0):o.stringData[f].length>=0&&(c.stringData[f]=o.stringData[f])}if(o.int64Data){if(!Array.isArray(o.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");c.int64Data=[];for(var f=0;f<o.int64Data.length;++f)a.Long?(c.int64Data[f]=a.Long.fromValue(o.int64Data[f])).unsigned=!1:typeof o.int64Data[f]=="string"?c.int64Data[f]=parseInt(o.int64Data[f],10):typeof o.int64Data[f]=="number"?c.int64Data[f]=o.int64Data[f]:typeof o.int64Data[f]=="object"&&(c.int64Data[f]=new a.LongBits(o.int64Data[f].low>>>0,o.int64Data[f].high>>>0).toNumber())}if(o.name!=null&&(c.name=String(o.name)),o.docString!=null&&(c.docString=String(o.docString)),o.rawData!=null&&(typeof o.rawData=="string"?a.base64.decode(o.rawData,c.rawData=a.newBuffer(a.base64.length(o.rawData)),0):o.rawData.length>=0&&(c.rawData=o.rawData)),o.externalData){if(!Array.isArray(o.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");c.externalData=[];for(var f=0;f<o.externalData.length;++f){if(typeof o.externalData[f]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");c.externalData[f]=u.onnx.StringStringEntryProto.fromObject(o.externalData[f])}}switch(o.dataLocation){default:if(typeof o.dataLocation=="number"){c.dataLocation=o.dataLocation;break}break;case"DEFAULT":case 0:c.dataLocation=0;break;case"EXTERNAL":case 1:c.dataLocation=1;break}if(o.doubleData){if(!Array.isArray(o.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");c.doubleData=[];for(var f=0;f<o.doubleData.length;++f)c.doubleData[f]=Number(o.doubleData[f])}if(o.uint64Data){if(!Array.isArray(o.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");c.uint64Data=[];for(var f=0;f<o.uint64Data.length;++f)a.Long?(c.uint64Data[f]=a.Long.fromValue(o.uint64Data[f])).unsigned=!0:typeof o.uint64Data[f]=="string"?c.uint64Data[f]=parseInt(o.uint64Data[f],10):typeof o.uint64Data[f]=="number"?c.uint64Data[f]=o.uint64Data[f]:typeof o.uint64Data[f]=="object"&&(c.uint64Data[f]=new a.LongBits(o.uint64Data[f].low>>>0,o.uint64Data[f].high>>>0).toNumber(!0))}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),c.defaults&&(f.dataType=0,f.segment=null,f.name="",c.bytes===String?f.rawData="":(f.rawData=[],c.bytes!==Array&&(f.rawData=a.newBuffer(f.rawData))),f.docString="",f.dataLocation=c.enums===String?"DEFAULT":0),o.dims&&o.dims.length){f.dims=[];for(var d=0;d<o.dims.length;++d)typeof o.dims[d]=="number"?f.dims[d]=c.longs===String?String(o.dims[d]):o.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(o.dims[d]):c.longs===Number?new a.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber():o.dims[d]}if(o.dataType!=null&&o.hasOwnProperty("dataType")&&(f.dataType=o.dataType),o.segment!=null&&o.hasOwnProperty("segment")&&(f.segment=u.onnx.TensorProto.Segment.toObject(o.segment,c)),o.floatData&&o.floatData.length){f.floatData=[];for(var d=0;d<o.floatData.length;++d)f.floatData[d]=c.json&&!isFinite(o.floatData[d])?String(o.floatData[d]):o.floatData[d]}if(o.int32Data&&o.int32Data.length){f.int32Data=[];for(var d=0;d<o.int32Data.length;++d)f.int32Data[d]=o.int32Data[d]}if(o.stringData&&o.stringData.length){f.stringData=[];for(var d=0;d<o.stringData.length;++d)f.stringData[d]=c.bytes===String?a.base64.encode(o.stringData[d],0,o.stringData[d].length):c.bytes===Array?Array.prototype.slice.call(o.stringData[d]):o.stringData[d]}if(o.int64Data&&o.int64Data.length){f.int64Data=[];for(var d=0;d<o.int64Data.length;++d)typeof o.int64Data[d]=="number"?f.int64Data[d]=c.longs===String?String(o.int64Data[d]):o.int64Data[d]:f.int64Data[d]=c.longs===String?a.Long.prototype.toString.call(o.int64Data[d]):c.longs===Number?new a.LongBits(o.int64Data[d].low>>>0,o.int64Data[d].high>>>0).toNumber():o.int64Data[d]}if(o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.rawData!=null&&o.hasOwnProperty("rawData")&&(f.rawData=c.bytes===String?a.base64.encode(o.rawData,0,o.rawData.length):c.bytes===Array?Array.prototype.slice.call(o.rawData):o.rawData),o.doubleData&&o.doubleData.length){f.doubleData=[];for(var d=0;d<o.doubleData.length;++d)f.doubleData[d]=c.json&&!isFinite(o.doubleData[d])?String(o.doubleData[d]):o.doubleData[d]}if(o.uint64Data&&o.uint64Data.length){f.uint64Data=[];for(var d=0;d<o.uint64Data.length;++d)typeof o.uint64Data[d]=="number"?f.uint64Data[d]=c.longs===String?String(o.uint64Data[d]):o.uint64Data[d]:f.uint64Data[d]=c.longs===String?a.Long.prototype.toString.call(o.uint64Data[d]):c.longs===Number?new a.LongBits(o.uint64Data[d].low>>>0,o.uint64Data[d].high>>>0).toNumber(!0):o.uint64Data[d]}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.externalData&&o.externalData.length){f.externalData=[];for(var d=0;d<o.externalData.length;++d)f.externalData[d]=u.onnx.StringStringEntryProto.toObject(o.externalData[d],c)}return o.dataLocation!=null&&o.hasOwnProperty("dataLocation")&&(f.dataLocation=c.enums===String?u.onnx.TensorProto.DataLocation[o.dataLocation]===void 0?o.dataLocation:u.onnx.TensorProto.DataLocation[o.dataLocation]:o.dataLocation),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorProto"},l.DataType=function(){var o={},c=Object.create(o);return c[o[0]="UNDEFINED"]=0,c[o[1]="FLOAT"]=1,c[o[2]="UINT8"]=2,c[o[3]="INT8"]=3,c[o[4]="UINT16"]=4,c[o[5]="INT16"]=5,c[o[6]="INT32"]=6,c[o[7]="INT64"]=7,c[o[8]="STRING"]=8,c[o[9]="BOOL"]=9,c[o[10]="FLOAT16"]=10,c[o[11]="DOUBLE"]=11,c[o[12]="UINT32"]=12,c[o[13]="UINT64"]=13,c[o[14]="COMPLEX64"]=14,c[o[15]="COMPLEX128"]=15,c[o[16]="BFLOAT16"]=16,c[o[17]="FLOAT8E4M3FN"]=17,c[o[18]="FLOAT8E4M3FNUZ"]=18,c[o[19]="FLOAT8E5M2"]=19,c[o[20]="FLOAT8E5M2FNUZ"]=20,c}(),l.Segment=function(){function o(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}return o.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,o.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,o.create=function(c){return new o(c)},o.encode=function(c,f){return f||(f=i.create()),c.begin!=null&&Object.hasOwnProperty.call(c,"begin")&&f.uint32(8).int64(c.begin),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&f.uint32(16).int64(c.end),f},o.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},o.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TensorProto.Segment;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.begin=c.int64();break}case 2:{h.end=c.int64();break}default:c.skipType(p&7);break}}return h},o.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},o.verify=function(c){return typeof c!="object"||c===null?"object expected":c.begin!=null&&c.hasOwnProperty("begin")&&!a.isInteger(c.begin)&&!(c.begin&&a.isInteger(c.begin.low)&&a.isInteger(c.begin.high))?"begin: integer|Long expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)&&!(c.end&&a.isInteger(c.end.low)&&a.isInteger(c.end.high))?"end: integer|Long expected":null},o.fromObject=function(c){if(c instanceof u.onnx.TensorProto.Segment)return c;var f=new u.onnx.TensorProto.Segment;return c.begin!=null&&(a.Long?(f.begin=a.Long.fromValue(c.begin)).unsigned=!1:typeof c.begin=="string"?f.begin=parseInt(c.begin,10):typeof c.begin=="number"?f.begin=c.begin:typeof c.begin=="object"&&(f.begin=new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber())),c.end!=null&&(a.Long?(f.end=a.Long.fromValue(c.end)).unsigned=!1:typeof c.end=="string"?f.end=parseInt(c.end,10):typeof c.end=="number"?f.end=c.end:typeof c.end=="object"&&(f.end=new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber())),f},o.toObject=function(c,f){f||(f={});var d={};if(f.defaults){if(a.Long){var h=new a.Long(0,0,!1);d.begin=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.begin=f.longs===String?"0":0;if(a.Long){var h=new a.Long(0,0,!1);d.end=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.end=f.longs===String?"0":0}return c.begin!=null&&c.hasOwnProperty("begin")&&(typeof c.begin=="number"?d.begin=f.longs===String?String(c.begin):c.begin:d.begin=f.longs===String?a.Long.prototype.toString.call(c.begin):f.longs===Number?new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber():c.begin),c.end!=null&&c.hasOwnProperty("end")&&(typeof c.end=="number"?d.end=f.longs===String?String(c.end):c.end:d.end=f.longs===String?a.Long.prototype.toString.call(c.end):f.longs===Number?new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber():c.end),d},o.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},o.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TensorProto.Segment"},o}(),l.DataLocation=function(){var o={},c=Object.create(o);return c[o[0]="DEFAULT"]=0,c[o[1]="EXTERNAL"]=1,c}(),l}(),s.SparseTensorProto=function(){function l(o){if(this.dims=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.values=null,l.prototype.indices=null,l.prototype.dims=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.values!=null&&Object.hasOwnProperty.call(o,"values")&&u.onnx.TensorProto.encode(o.values,c.uint32(10).fork()).ldelim(),o.indices!=null&&Object.hasOwnProperty.call(o,"indices")&&u.onnx.TensorProto.encode(o.indices,c.uint32(18).fork()).ldelim(),o.dims!=null&&o.dims.length){c.uint32(26).fork();for(var f=0;f<o.dims.length;++f)c.int64(o.dims[f]);c.ldelim()}return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.SparseTensorProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.values=u.onnx.TensorProto.decode(o,o.uint32());break}case 2:{d.indices=u.onnx.TensorProto.decode(o,o.uint32());break}case 3:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=o.uint32()+o.pos;o.pos<p;)d.dims.push(o.int64());else d.dims.push(o.int64());break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.values!=null&&o.hasOwnProperty("values")){var c=u.onnx.TensorProto.verify(o.values);if(c)return"values."+c}if(o.indices!=null&&o.hasOwnProperty("indices")){var c=u.onnx.TensorProto.verify(o.indices);if(c)return"indices."+c}if(o.dims!=null&&o.hasOwnProperty("dims")){if(!Array.isArray(o.dims))return"dims: array expected";for(var f=0;f<o.dims.length;++f)if(!a.isInteger(o.dims[f])&&!(o.dims[f]&&a.isInteger(o.dims[f].low)&&a.isInteger(o.dims[f].high)))return"dims: integer|Long[] expected"}return null},l.fromObject=function(o){if(o instanceof u.onnx.SparseTensorProto)return o;var c=new u.onnx.SparseTensorProto;if(o.values!=null){if(typeof o.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");c.values=u.onnx.TensorProto.fromObject(o.values)}if(o.indices!=null){if(typeof o.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");c.indices=u.onnx.TensorProto.fromObject(o.indices)}if(o.dims){if(!Array.isArray(o.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");c.dims=[];for(var f=0;f<o.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(o.dims[f])).unsigned=!1:typeof o.dims[f]=="string"?c.dims[f]=parseInt(o.dims[f],10):typeof o.dims[f]=="number"?c.dims[f]=o.dims[f]:typeof o.dims[f]=="object"&&(c.dims[f]=new a.LongBits(o.dims[f].low>>>0,o.dims[f].high>>>0).toNumber())}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[]),c.defaults&&(f.values=null,f.indices=null),o.values!=null&&o.hasOwnProperty("values")&&(f.values=u.onnx.TensorProto.toObject(o.values,c)),o.indices!=null&&o.hasOwnProperty("indices")&&(f.indices=u.onnx.TensorProto.toObject(o.indices,c)),o.dims&&o.dims.length){f.dims=[];for(var d=0;d<o.dims.length;++d)typeof o.dims[d]=="number"?f.dims[d]=c.longs===String?String(o.dims[d]):o.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(o.dims[d]):c.longs===Number?new a.LongBits(o.dims[d].low>>>0,o.dims[d].high>>>0).toNumber():o.dims[d]}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.SparseTensorProto"},l}(),s.TensorShapeProto=function(){function l(o){if(this.dim=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.dim=a.emptyArray,l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.dim!=null&&o.dim.length)for(var f=0;f<o.dim.length;++f)u.onnx.TensorShapeProto.Dimension.encode(o.dim[f],c.uint32(10).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.TensorShapeProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.dim&&d.dim.length||(d.dim=[]),d.dim.push(u.onnx.TensorShapeProto.Dimension.decode(o,o.uint32()));break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.dim!=null&&o.hasOwnProperty("dim")){if(!Array.isArray(o.dim))return"dim: array expected";for(var c=0;c<o.dim.length;++c){var f=u.onnx.TensorShapeProto.Dimension.verify(o.dim[c]);if(f)return"dim."+f}}return null},l.fromObject=function(o){if(o instanceof u.onnx.TensorShapeProto)return o;var c=new u.onnx.TensorShapeProto;if(o.dim){if(!Array.isArray(o.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");c.dim=[];for(var f=0;f<o.dim.length;++f){if(typeof o.dim[f]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");c.dim[f]=u.onnx.TensorShapeProto.Dimension.fromObject(o.dim[f])}}return c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dim=[]),o.dim&&o.dim.length){f.dim=[];for(var d=0;d<o.dim.length;++d)f.dim[d]=u.onnx.TensorShapeProto.Dimension.toObject(o.dim[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.TensorShapeProto"},l.Dimension=function(){function o(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}o.prototype.dimValue=null,o.prototype.dimParam=null,o.prototype.denotation="";var c;return Object.defineProperty(o.prototype,"value",{get:a.oneOfGetter(c=["dimValue","dimParam"]),set:a.oneOfSetter(c)}),o.create=function(f){return new o(f)},o.encode=function(f,d){return d||(d=i.create()),f.dimValue!=null&&Object.hasOwnProperty.call(f,"dimValue")&&d.uint32(8).int64(f.dimValue),f.dimParam!=null&&Object.hasOwnProperty.call(f,"dimParam")&&d.uint32(18).string(f.dimParam),f.denotation!=null&&Object.hasOwnProperty.call(f,"denotation")&&d.uint32(26).string(f.denotation),d},o.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},o.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TensorShapeProto.Dimension;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.dimValue=f.int64();break}case 2:{p.dimParam=f.string();break}case 3:{p.denotation=f.string();break}default:f.skipType(m&7);break}}return p},o.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},o.verify=function(f){if(typeof f!="object"||f===null)return"object expected";var d={};if(f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(d.value=1,!a.isInteger(f.dimValue)&&!(f.dimValue&&a.isInteger(f.dimValue.low)&&a.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(f.dimParam!=null&&f.hasOwnProperty("dimParam")){if(d.value===1)return"value: multiple values";if(d.value=1,!a.isString(f.dimParam))return"dimParam: string expected"}return f.denotation!=null&&f.hasOwnProperty("denotation")&&!a.isString(f.denotation)?"denotation: string expected":null},o.fromObject=function(f){if(f instanceof u.onnx.TensorShapeProto.Dimension)return f;var d=new u.onnx.TensorShapeProto.Dimension;return f.dimValue!=null&&(a.Long?(d.dimValue=a.Long.fromValue(f.dimValue)).unsigned=!1:typeof f.dimValue=="string"?d.dimValue=parseInt(f.dimValue,10):typeof f.dimValue=="number"?d.dimValue=f.dimValue:typeof f.dimValue=="object"&&(d.dimValue=new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),f.dimParam!=null&&(d.dimParam=String(f.dimParam)),f.denotation!=null&&(d.denotation=String(f.denotation)),d},o.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.denotation=""),f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(typeof f.dimValue=="number"?h.dimValue=d.longs===String?String(f.dimValue):f.dimValue:h.dimValue=d.longs===String?a.Long.prototype.toString.call(f.dimValue):d.longs===Number?new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,d.oneofs&&(h.value="dimValue")),f.dimParam!=null&&f.hasOwnProperty("dimParam")&&(h.dimParam=f.dimParam,d.oneofs&&(h.value="dimParam")),f.denotation!=null&&f.hasOwnProperty("denotation")&&(h.denotation=f.denotation),h},o.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},o.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TensorShapeProto.Dimension"},o}(),l}(),s.TypeProto=function(){function l(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}l.prototype.tensorType=null,l.prototype.sequenceType=null,l.prototype.mapType=null,l.prototype.optionalType=null,l.prototype.sparseTensorType=null,l.prototype.denotation="";var o;return Object.defineProperty(l.prototype,"value",{get:a.oneOfGetter(o=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:a.oneOfSetter(o)}),l.create=function(c){return new l(c)},l.encode=function(c,f){return f||(f=i.create()),c.tensorType!=null&&Object.hasOwnProperty.call(c,"tensorType")&&u.onnx.TypeProto.Tensor.encode(c.tensorType,f.uint32(10).fork()).ldelim(),c.sequenceType!=null&&Object.hasOwnProperty.call(c,"sequenceType")&&u.onnx.TypeProto.Sequence.encode(c.sequenceType,f.uint32(34).fork()).ldelim(),c.mapType!=null&&Object.hasOwnProperty.call(c,"mapType")&&u.onnx.TypeProto.Map.encode(c.mapType,f.uint32(42).fork()).ldelim(),c.denotation!=null&&Object.hasOwnProperty.call(c,"denotation")&&f.uint32(50).string(c.denotation),c.sparseTensorType!=null&&Object.hasOwnProperty.call(c,"sparseTensorType")&&u.onnx.TypeProto.SparseTensor.encode(c.sparseTensorType,f.uint32(66).fork()).ldelim(),c.optionalType!=null&&Object.hasOwnProperty.call(c,"optionalType")&&u.onnx.TypeProto.Optional.encode(c.optionalType,f.uint32(74).fork()).ldelim(),f},l.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},l.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TypeProto;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.tensorType=u.onnx.TypeProto.Tensor.decode(c,c.uint32());break}case 4:{h.sequenceType=u.onnx.TypeProto.Sequence.decode(c,c.uint32());break}case 5:{h.mapType=u.onnx.TypeProto.Map.decode(c,c.uint32());break}case 9:{h.optionalType=u.onnx.TypeProto.Optional.decode(c,c.uint32());break}case 8:{h.sparseTensorType=u.onnx.TypeProto.SparseTensor.decode(c,c.uint32());break}case 6:{h.denotation=c.string();break}default:c.skipType(p&7);break}}return h},l.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},l.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var f={};if(c.tensorType!=null&&c.hasOwnProperty("tensorType")){f.value=1;{var d=u.onnx.TypeProto.Tensor.verify(c.tensorType);if(d)return"tensorType."+d}}if(c.sequenceType!=null&&c.hasOwnProperty("sequenceType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Sequence.verify(c.sequenceType);if(d)return"sequenceType."+d}}if(c.mapType!=null&&c.hasOwnProperty("mapType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Map.verify(c.mapType);if(d)return"mapType."+d}}if(c.optionalType!=null&&c.hasOwnProperty("optionalType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Optional.verify(c.optionalType);if(d)return"optionalType."+d}}if(c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.SparseTensor.verify(c.sparseTensorType);if(d)return"sparseTensorType."+d}}return c.denotation!=null&&c.hasOwnProperty("denotation")&&!a.isString(c.denotation)?"denotation: string expected":null},l.fromObject=function(c){if(c instanceof u.onnx.TypeProto)return c;var f=new u.onnx.TypeProto;if(c.tensorType!=null){if(typeof c.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=u.onnx.TypeProto.Tensor.fromObject(c.tensorType)}if(c.sequenceType!=null){if(typeof c.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");f.sequenceType=u.onnx.TypeProto.Sequence.fromObject(c.sequenceType)}if(c.mapType!=null){if(typeof c.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");f.mapType=u.onnx.TypeProto.Map.fromObject(c.mapType)}if(c.optionalType!=null){if(typeof c.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");f.optionalType=u.onnx.TypeProto.Optional.fromObject(c.optionalType)}if(c.sparseTensorType!=null){if(typeof c.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");f.sparseTensorType=u.onnx.TypeProto.SparseTensor.fromObject(c.sparseTensorType)}return c.denotation!=null&&(f.denotation=String(c.denotation)),f},l.toObject=function(c,f){f||(f={});var d={};return f.defaults&&(d.denotation=""),c.tensorType!=null&&c.hasOwnProperty("tensorType")&&(d.tensorType=u.onnx.TypeProto.Tensor.toObject(c.tensorType,f),f.oneofs&&(d.value="tensorType")),c.sequenceType!=null&&c.hasOwnProperty("sequenceType")&&(d.sequenceType=u.onnx.TypeProto.Sequence.toObject(c.sequenceType,f),f.oneofs&&(d.value="sequenceType")),c.mapType!=null&&c.hasOwnProperty("mapType")&&(d.mapType=u.onnx.TypeProto.Map.toObject(c.mapType,f),f.oneofs&&(d.value="mapType")),c.denotation!=null&&c.hasOwnProperty("denotation")&&(d.denotation=c.denotation),c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")&&(d.sparseTensorType=u.onnx.TypeProto.SparseTensor.toObject(c.sparseTensorType,f),f.oneofs&&(d.value="sparseTensorType")),c.optionalType!=null&&c.hasOwnProperty("optionalType")&&(d.optionalType=u.onnx.TypeProto.Optional.toObject(c.optionalType,f),f.oneofs&&(d.value="optionalType")),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TypeProto"},l.Tensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Tensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Tensor)return f;var d=new u.onnx.TypeProto.Tensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Tensor"},c}(),l.Sequence=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Sequence;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Sequence)return f;var d=new u.onnx.TypeProto.Sequence;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Sequence"},c}(),l.Map=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.keyType=0,c.prototype.valueType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.keyType!=null&&Object.hasOwnProperty.call(f,"keyType")&&d.uint32(8).int32(f.keyType),f.valueType!=null&&Object.hasOwnProperty.call(f,"valueType")&&u.onnx.TypeProto.encode(f.valueType,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Map;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.keyType=f.int32();break}case 2:{p.valueType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.keyType!=null&&f.hasOwnProperty("keyType")&&!a.isInteger(f.keyType))return"keyType: integer expected";if(f.valueType!=null&&f.hasOwnProperty("valueType")){var d=u.onnx.TypeProto.verify(f.valueType);if(d)return"valueType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Map)return f;var d=new u.onnx.TypeProto.Map;if(f.keyType!=null&&(d.keyType=f.keyType|0),f.valueType!=null){if(typeof f.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");d.valueType=u.onnx.TypeProto.fromObject(f.valueType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.keyType=0,h.valueType=null),f.keyType!=null&&f.hasOwnProperty("keyType")&&(h.keyType=f.keyType),f.valueType!=null&&f.hasOwnProperty("valueType")&&(h.valueType=u.onnx.TypeProto.toObject(f.valueType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Map"},c}(),l.Optional=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Optional;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Optional)return f;var d=new u.onnx.TypeProto.Optional;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Optional"},c}(),l.SparseTensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=i.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.SparseTensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.SparseTensor)return f;var d=new u.onnx.TypeProto.SparseTensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.SparseTensor"},c}(),l}(),s.OperatorSetIdProto=function(){function l(o){if(o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.domain="",l.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,l.create=function(o){return new l(o)},l.encode=function(o,c){return c||(c=i.create()),o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(10).string(o.domain),o.version!=null&&Object.hasOwnProperty.call(o,"version")&&c.uint32(16).int64(o.version),c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.OperatorSetIdProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.domain=o.string();break}case 2:{d.version=o.int64();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){return typeof o!="object"||o===null?"object expected":o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain)?"domain: string expected":o.version!=null&&o.hasOwnProperty("version")&&!a.isInteger(o.version)&&!(o.version&&a.isInteger(o.version.low)&&a.isInteger(o.version.high))?"version: integer|Long expected":null},l.fromObject=function(o){if(o instanceof u.onnx.OperatorSetIdProto)return o;var c=new u.onnx.OperatorSetIdProto;return o.domain!=null&&(c.domain=String(o.domain)),o.version!=null&&(a.Long?(c.version=a.Long.fromValue(o.version)).unsigned=!1:typeof o.version=="string"?c.version=parseInt(o.version,10):typeof o.version=="number"?c.version=o.version:typeof o.version=="object"&&(c.version=new a.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber())),c},l.toObject=function(o,c){c||(c={});var f={};if(c.defaults)if(f.domain="",a.Long){var d=new a.Long(0,0,!1);f.version=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.version=c.longs===String?"0":0;return o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.version!=null&&o.hasOwnProperty("version")&&(typeof o.version=="number"?f.version=c.longs===String?String(o.version):o.version:f.version=c.longs===String?a.Long.prototype.toString.call(o.version):c.longs===Number?new a.LongBits(o.version.low>>>0,o.version.high>>>0).toNumber():o.version),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.OperatorSetIdProto"},l}(),s.OperatorStatus=function(){var l={},o=Object.create(l);return o[l[0]="EXPERIMENTAL"]=0,o[l[1]="STABLE"]=1,o}(),s.FunctionProto=function(){function l(o){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],o)for(var c=Object.keys(o),f=0;f<c.length;++f)o[c[f]]!=null&&(this[c[f]]=o[c[f]])}return l.prototype.name="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.attribute=a.emptyArray,l.prototype.attributeProto=a.emptyArray,l.prototype.node=a.emptyArray,l.prototype.docString="",l.prototype.opsetImport=a.emptyArray,l.prototype.domain="",l.create=function(o){return new l(o)},l.encode=function(o,c){if(c||(c=i.create()),o.name!=null&&Object.hasOwnProperty.call(o,"name")&&c.uint32(10).string(o.name),o.input!=null&&o.input.length)for(var f=0;f<o.input.length;++f)c.uint32(34).string(o.input[f]);if(o.output!=null&&o.output.length)for(var f=0;f<o.output.length;++f)c.uint32(42).string(o.output[f]);if(o.attribute!=null&&o.attribute.length)for(var f=0;f<o.attribute.length;++f)c.uint32(50).string(o.attribute[f]);if(o.node!=null&&o.node.length)for(var f=0;f<o.node.length;++f)u.onnx.NodeProto.encode(o.node[f],c.uint32(58).fork()).ldelim();if(o.docString!=null&&Object.hasOwnProperty.call(o,"docString")&&c.uint32(66).string(o.docString),o.opsetImport!=null&&o.opsetImport.length)for(var f=0;f<o.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(o.opsetImport[f],c.uint32(74).fork()).ldelim();if(o.domain!=null&&Object.hasOwnProperty.call(o,"domain")&&c.uint32(82).string(o.domain),o.attributeProto!=null&&o.attributeProto.length)for(var f=0;f<o.attributeProto.length;++f)u.onnx.AttributeProto.encode(o.attributeProto[f],c.uint32(90).fork()).ldelim();return c},l.encodeDelimited=function(o,c){return this.encode(o,c).ldelim()},l.decode=function(o,c){o instanceof n||(o=n.create(o));for(var f=c===void 0?o.len:o.pos+c,d=new u.onnx.FunctionProto;o.pos<f;){var h=o.uint32();switch(h>>>3){case 1:{d.name=o.string();break}case 4:{d.input&&d.input.length||(d.input=[]),d.input.push(o.string());break}case 5:{d.output&&d.output.length||(d.output=[]),d.output.push(o.string());break}case 6:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(o.string());break}case 11:{d.attributeProto&&d.attributeProto.length||(d.attributeProto=[]),d.attributeProto.push(u.onnx.AttributeProto.decode(o,o.uint32()));break}case 7:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(o,o.uint32()));break}case 8:{d.docString=o.string();break}case 9:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(o,o.uint32()));break}case 10:{d.domain=o.string();break}default:o.skipType(h&7);break}}return d},l.decodeDelimited=function(o){return o instanceof n||(o=new n(o)),this.decode(o,o.uint32())},l.verify=function(o){if(typeof o!="object"||o===null)return"object expected";if(o.name!=null&&o.hasOwnProperty("name")&&!a.isString(o.name))return"name: string expected";if(o.input!=null&&o.hasOwnProperty("input")){if(!Array.isArray(o.input))return"input: array expected";for(var c=0;c<o.input.length;++c)if(!a.isString(o.input[c]))return"input: string[] expected"}if(o.output!=null&&o.hasOwnProperty("output")){if(!Array.isArray(o.output))return"output: array expected";for(var c=0;c<o.output.length;++c)if(!a.isString(o.output[c]))return"output: string[] expected"}if(o.attribute!=null&&o.hasOwnProperty("attribute")){if(!Array.isArray(o.attribute))return"attribute: array expected";for(var c=0;c<o.attribute.length;++c)if(!a.isString(o.attribute[c]))return"attribute: string[] expected"}if(o.attributeProto!=null&&o.hasOwnProperty("attributeProto")){if(!Array.isArray(o.attributeProto))return"attributeProto: array expected";for(var c=0;c<o.attributeProto.length;++c){var f=u.onnx.AttributeProto.verify(o.attributeProto[c]);if(f)return"attributeProto."+f}}if(o.node!=null&&o.hasOwnProperty("node")){if(!Array.isArray(o.node))return"node: array expected";for(var c=0;c<o.node.length;++c){var f=u.onnx.NodeProto.verify(o.node[c]);if(f)return"node."+f}}if(o.docString!=null&&o.hasOwnProperty("docString")&&!a.isString(o.docString))return"docString: string expected";if(o.opsetImport!=null&&o.hasOwnProperty("opsetImport")){if(!Array.isArray(o.opsetImport))return"opsetImport: array expected";for(var c=0;c<o.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(o.opsetImport[c]);if(f)return"opsetImport."+f}}return o.domain!=null&&o.hasOwnProperty("domain")&&!a.isString(o.domain)?"domain: string expected":null},l.fromObject=function(o){if(o instanceof u.onnx.FunctionProto)return o;var c=new u.onnx.FunctionProto;if(o.name!=null&&(c.name=String(o.name)),o.input){if(!Array.isArray(o.input))throw TypeError(".onnx.FunctionProto.input: array expected");c.input=[];for(var f=0;f<o.input.length;++f)c.input[f]=String(o.input[f])}if(o.output){if(!Array.isArray(o.output))throw TypeError(".onnx.FunctionProto.output: array expected");c.output=[];for(var f=0;f<o.output.length;++f)c.output[f]=String(o.output[f])}if(o.attribute){if(!Array.isArray(o.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");c.attribute=[];for(var f=0;f<o.attribute.length;++f)c.attribute[f]=String(o.attribute[f])}if(o.attributeProto){if(!Array.isArray(o.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");c.attributeProto=[];for(var f=0;f<o.attributeProto.length;++f){if(typeof o.attributeProto[f]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");c.attributeProto[f]=u.onnx.AttributeProto.fromObject(o.attributeProto[f])}}if(o.node){if(!Array.isArray(o.node))throw TypeError(".onnx.FunctionProto.node: array expected");c.node=[];for(var f=0;f<o.node.length;++f){if(typeof o.node[f]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(o.node[f])}}if(o.docString!=null&&(c.docString=String(o.docString)),o.opsetImport){if(!Array.isArray(o.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<o.opsetImport.length;++f){if(typeof o.opsetImport[f]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(o.opsetImport[f])}}return o.domain!=null&&(c.domain=String(o.domain)),c},l.toObject=function(o,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[],f.node=[],f.opsetImport=[],f.attributeProto=[]),c.defaults&&(f.name="",f.docString="",f.domain=""),o.name!=null&&o.hasOwnProperty("name")&&(f.name=o.name),o.input&&o.input.length){f.input=[];for(var d=0;d<o.input.length;++d)f.input[d]=o.input[d]}if(o.output&&o.output.length){f.output=[];for(var d=0;d<o.output.length;++d)f.output[d]=o.output[d]}if(o.attribute&&o.attribute.length){f.attribute=[];for(var d=0;d<o.attribute.length;++d)f.attribute[d]=o.attribute[d]}if(o.node&&o.node.length){f.node=[];for(var d=0;d<o.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(o.node[d],c)}if(o.docString!=null&&o.hasOwnProperty("docString")&&(f.docString=o.docString),o.opsetImport&&o.opsetImport.length){f.opsetImport=[];for(var d=0;d<o.opsetImport.length;++d)f.opsetImport[d]=u.onnx.OperatorSetIdProto.toObject(o.opsetImport[d],c)}if(o.domain!=null&&o.hasOwnProperty("domain")&&(f.domain=o.domain),o.attributeProto&&o.attributeProto.length){f.attributeProto=[];for(var d=0;d<o.attributeProto.length;++d)f.attributeProto[d]=u.onnx.AttributeProto.toObject(o.attributeProto[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(o){return o===void 0&&(o="type.googleapis.com"),o+"/onnx.FunctionProto"},l}(),s}(),e.exports=u});function $h(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Gy(t){return new TextDecoder().decode(t)}var Wt,Uc,dO,Xo,KP,Bn,qo,Fe,Wy,Vh,Jc,ef,mt=ee(()=>{"use strict";Ev(),XP(),Wt=wu(rf()),_u(),Uc=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},dO=class{static preprocessInputShapes(t,e){let r=t.length===1?[1,t[0]]:t,n=e.length===1?[e[0],1]:e;return[r,n]}static postprocessOutputShape(t,e,r){e===1&&t.splice(t.length-2,1),r===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},Xo=class Hc{static calcShape(e,r,n=!1){let i=e.length,a=r.length;if(i===0)return r;if(a===0)return e;let u=Math.max(e.length,r.length),s=new Array(u);if(n){if(i<2||a<2)return;let l=dO.calcMatMulShape([e[i-2],e[i-1]],[r[a-2],r[a-1]]);if(l===void 0)return;[s[u-2],s[u-1]]=l}for(let l=n?3:1;l<=u;l++){let o=i-l<0?1:e[i-l],c=a-l<0?1:r[a-l];if(o!==c&&o>1&&c>1)return;s[u-l]=Math.max(o,c)}return s}static index(e,r){let n=new Array(r.length);return Hc.fillIndex(e,r,n),n}static fillIndex(e,r,n){let i=e.length-r.length;for(let a=0;a<r.length;a++)n[a]=e[i+a]%r[a]}static calc(e,r,n,i,a){let u=Hc.calcShape(e.dims,r.dims);if(u){if(i&&!Fe.areEqual(u,e.dims))return;let s=Fe.size(u),l=i?e:new Vn(u,a||e.type);if(u.length===0)l.set([],n(e.get([]),r.get([])));else{let o=new Array(u.length),c=new Array(e.dims.length),f=new Array(r.dims.length),d=0,h=0,p=!1,m=!1;e.dims.length===0&&(d=e.get([]),p=!0),r.dims.length===0&&(h=r.get([]),m=!0);let v;for(let x=0;x<s;x++){v=x;for(let y=u.length-1;y>=0;y--)o[y]=v%u[y],v=Math.floor(v/u[y]);p||(Hc.fillIndex(o,e.dims,c),d=e.get(c)),m||(Hc.fillIndex(o,r.dims,f),h=r.get(f)),l.set(o,n(d,h))}}return l}}static isValidBroadcast(e,r){let n=e.length,i=r.length;if(n>i)return!1;for(let a=1;a<=n;a++)if(e[n-a]!==1&&e[n-a]!==r[i-a])return!1;return!0}static getBroadcastDims(e,r){let n=e.length,i=[];for(let a=0;a<n;a++){let u=n-1-a,s=e[u]||1;(r[r.length-1-a]||1)>1&&s===1&&i.unshift(u)}return i}},KP=class{static getShapeOfGemmResult(t,e,r,n,i){if(t.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let a,u,s;e?(a=t[1],u=t[0]):(a=t[0],u=t[1]);let l=-1;if(n?(s=r[0],l=1):(s=r[1],l=0),r[l]!==u)throw new Error("dimension mismatch");if(a<=0||s<=0||u<=0)throw new Error("invalid shape specified");if(i&&!Xo.isValidBroadcast(i,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,u]}},Bn=class qy{static tensorDataTypeFromProto(e){switch(e){case Wt.onnx.TensorProto.DataType.INT8:return"int8";case Wt.onnx.TensorProto.DataType.UINT8:return"uint8";case Wt.onnx.TensorProto.DataType.BOOL:return"bool";case Wt.onnx.TensorProto.DataType.INT16:return"int16";case Wt.onnx.TensorProto.DataType.UINT16:return"uint16";case Wt.onnx.TensorProto.DataType.INT32:return"int32";case Wt.onnx.TensorProto.DataType.UINT32:return"uint32";case Wt.onnx.TensorProto.DataType.FLOAT:return"float32";case Wt.onnx.TensorProto.DataType.DOUBLE:return"float64";case Wt.onnx.TensorProto.DataType.STRING:return"string";case Wt.onnx.TensorProto.DataType.INT64:return"int32";case Wt.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Wt.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return Wt.onnx.TensorProto.DataType.INT8;case"uint8":return Wt.onnx.TensorProto.DataType.UINT8;case"bool":return Wt.onnx.TensorProto.DataType.BOOL;case"int16":return Wt.onnx.TensorProto.DataType.INT16;case"uint16":return Wt.onnx.TensorProto.DataType.UINT16;case"int32":return Wt.onnx.TensorProto.DataType.INT32;case"uint32":return Wt.onnx.TensorProto.DataType.UINT32;case"float32":return Wt.onnx.TensorProto.DataType.FLOAT;case"float64":return Wt.onnx.TensorProto.DataType.DOUBLE;case"string":return Wt.onnx.TensorProto.DataType.STRING;case"int64":return Wt.onnx.TensorProto.DataType.INT64;case"uint64":return Wt.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(r=>oa.isLong(r)?r.toNumber():r)}static tensorValueTypeFromProto(e){return{tensorType:qy.tensorDataTypeFromProto(e.elemType),shape:{dims:qy.tensorDimsFromProto(e.shape.dim.map(r=>r.dimValue))}}}static tensorDimsFromORTFormat(e){let r=[];for(let n=0;n<e.dimsLength();n++)r.push(qo.longToNumber(e.dims(n)));return r}static tensorAttributesFromORTFormat(e){let r=[];for(let n=0;n<e.attributesLength();n++)r.push(e.attributes(n));return r}},qo=class{static longToNumber(t,e){return oa.isLong(t)?t.toNumber():t instanceof V.Long?oa.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return oa.isLong(t)||t instanceof V.Long}},Fe=class ra{static size(e){return ra.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return ra.getSizeFromDimensionRange(e,r,e.length)}static sizeToDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${e.length} dimensions.`);return ra.getSizeFromDimensionRange(e,0,r)}static getSizeFromDimensionRange(e,r,n){let i=1;for(let a=r;a<n;a++){if(e[a]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");i*=e[a]}return i}static computeStrides(e){let r=e.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=e[r-1];for(let i=r-3;i>=0;--i)n[i]=n[i+1]*e[i+1];return n}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,r,n){n===void 0&&(n=e.length);let i=0;for(let a=0;a<n;++a)i+=r[a]*e[a];return i}static offsetToIndices(e,r){let n=r.length;if(n===0)return[];if(n===1)return[e*r[0]];let i=new Array(r.length);for(let a=0;a<i.length-1;++a)i[a]=Math.floor(e/r[a]),e-=i[a]*r[a];return i[i.length-1]=e,i}static normalizeAxis(e,r){if(e<-r&&e>=r)throw new Error("unsupported axis for this operation.");return e<0?e+r:e}static normalizeAxes(e,r){return e.map(n=>this.normalizeAxis(n,r))}static incrementIndex(e,r,n){if(r.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(n===void 0)n=r.length;else if(n<=0||n>r.length)throw new Error("Incorrect axis to increment on");for(let i=n-1;i>=0&&(e[i]++,!(e[i]<r[i]));--i)e[i]=0}static calculateReshapedDims(e,r){if(r.length===0){if(e.length===0||ra.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let n=r.length,i=new Array(n),a=-1,u=1;for(let l=0;l<n;l++){if(r[l]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(r[l]===-1){if(a!==-1)throw new Error("at most one dimension in shape hints can be -1");a=l}else{if(r[l]===0){if(l>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");i[l]=e[l]}else i[l]=r[l];u*=i[l]}}let s=ra.size(e);if(a!==-1){if(s%u!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${r}]`);i[a]=s/u}else if(u!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return i}static sortBasedOnPerm(e,r){return r?r.map(n=>e[n]):e.slice().reverse()}static padShape(e,r){let n=e.length;return e.map((i,a)=>i+r[a]+r[a+n])}static areEqual(e,r){return e.length!==r.length?!1:e.every((n,i)=>n===r[i])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let r=1;for(let n of e){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);r*=n}return r}static flattenShape(e,r){r<0&&(r+=e.length);let n=e.reduce((a,u)=>a*u,1),i=e.slice(r).reduce((a,u)=>a*u,1);return[n/i,i]}static squeezeShape(e,r){let n=new Array;r=ra.normalizeAxes(r,e.length);for(let i=0;i<e.length;i++){let a=r.indexOf(i)>=0;if(a&&e[i]!==1)throw new Error("squeeze an axis of size different than 1");(r.length===0&&e[i]>1||r.length>0&&!a)&&n.push(e[i])}return n}static unsqueezeShape(e,r){let n=new Array(e.length+r.length);n.fill(0);for(let a=0;a<r.length;a++){let u=ra.normalizeAxis(r[a],n.length);if(u>=n.length)throw new Error("'axes' has an out of range axis");if(n[u]!==0)throw new Error("'axes' has a duplicate axis");n[u]=1}let i=0;for(let a=0;a<n.length;a++)n[a]===0&&(n[a]=e[i++]);if(i!==e.length)throw new Error("the unsqueezed dimension could not be established");return n}},Wy=class QP{static splitShape(e,r,n,i){if(n.length===0){if(!i)throw new Error("need to know number of outputs when the 'split' attribute is not specified");QP.determineSplit(e[r],i,n)}let a=[],u=[0];for(let s=0;s<n.length;++s){s!==0&&u.push(u[s-1]+n[s-1]);let l=e.slice();l[r]=n[s],a.push(l)}return[a,u]}static determineSplit(e,r,n){if(e%r!==0)throw new Error("cannot split tensor to equal sized parts");for(let i=0;i<r;++i)n.push(e/r)}},Vh=class zc{static adjustPoolAttributes(e,r,n,i,a,u){if(!e&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let s=0;s<r.length-2;s++)s>=n.length?n.push(r[s+2]):n[s]=r[s+2];for(let s=0;s<n.length;s++)if(s<i.length){if(i[s]<0)throw new Error("strides should be greater than or equal to 1")}else i.push(1);for(let s=0;s<n.length;s++)if(s<a.length){if(a[s]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let s=0;s<n.length*2;s++)if(s<u.length){if(u[s]<0)throw new Error("pad should be greater than or equal to 1")}else u.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(u[s]>=n[s]||u[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,r,n,i,a,u){if(u){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(i.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<e.length-2;s++)zc.adjustPadAndReturnShape(e[s+2],r[s],n[s],i[s],a,s,s+e.length-2,u)}}static computePoolOutputShape(e,r,n,i,a,u,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return zc.computeShapeHelper(e,r,l,n,i,a,u,s),l}static computeConvOutputShape(e,r,n,i,a,u,s){if(e.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[e[0],r[0]];return zc.computeShapeHelper(!1,e,l,n,i,a,u,s),l}static computeShapeHelper(e,r,n,i,a,u,s,l){if(e)for(let o=0;o<r.length-2;o++)n.push(1);else for(let o=0;o<r.length-2;o++)n.push(zc.adjustPadAndReturnShape(r[o+2],i[o],a[o],u[o],s,o,o+r.length-2,l))}static adjustPadAndReturnShape(e,r,n,i,a,u,s,l){let o=n*(i-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return a[u]=0,a[s]=0,Math.floor((e-o)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let c=((e+r-1)/r-1)*r+i-e;return a[u]=Math.floor(l==="SAME_LOWER"?(c+1)/2:c/2),a[s]=c-a[u],Math.floor((e+c-i)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[u]+a[s]-o)/r+1)}},Jc=-34028234663852886e22,ef=34028234663852886e22});function uW(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function hO(t){switch(t){case $e.onnx.TensorProto.DataType.UINT8:case $e.onnx.TensorProto.DataType.INT8:case $e.onnx.TensorProto.DataType.BOOL:return 1;case $e.onnx.TensorProto.DataType.UINT16:case $e.onnx.TensorProto.DataType.INT16:return 2;case $e.onnx.TensorProto.DataType.FLOAT:case $e.onnx.TensorProto.DataType.INT32:case $e.onnx.TensorProto.DataType.UINT32:return 4;case $e.onnx.TensorProto.DataType.INT64:case $e.onnx.TensorProto.DataType.DOUBLE:case $e.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${$e.onnx.TensorProto.DataType[t]}`)}}function lW(t,e){return new(JP(e))(t)}function JP(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function Xy(t,e){if(e===$e.onnx.TensorProto.DataType.INT64||e===Fh.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===$e.onnx.TensorProto.DataType.UINT32||e===Fh.TensorDataType.UINT32||e===$e.onnx.TensorProto.DataType.UINT64||e===Fh.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${$e.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function pO(t,e,r){switch(e){case $e.onnx.TensorProto.DataType.BOOL:case $e.onnx.TensorProto.DataType.UINT8:return t.getUint8(r);case $e.onnx.TensorProto.DataType.INT8:return t.getInt8(r);case $e.onnx.TensorProto.DataType.UINT16:return t.getUint16(r,!0);case $e.onnx.TensorProto.DataType.INT16:return t.getInt16(r,!0);case $e.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(r,!0);case $e.onnx.TensorProto.DataType.INT32:return t.getInt32(r,!0);case $e.onnx.TensorProto.DataType.UINT32:return t.getUint32(r,!0);case $e.onnx.TensorProto.DataType.INT64:return Xy(oa.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!1),e);case $e.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(r,!0);case $e.onnx.TensorProto.DataType.UINT64:return Xy(oa.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${$e.onnx.TensorProto.DataType[e]}`)}}var gO,$e,Fh,Vn,_u=ee(()=>{"use strict";gO=wu(WG()),XP(),zh(),$e=wu(rf()),mt(),Fh=Tt.experimental.fbs,Vn=class kh{constructor(e,r,n,i,a,u=gO.Guid.create()){this.dims=e,this.type=r,this.dataProvider=n,this.asyncDataProvider=i,this.cache=a,this.dataId=u,this.size=Fe.validateDimsAndCalcSize(e);let s=this.size,l=n===void 0&&i===void 0&&a===void 0;if(a!==void 0&&a.length!==s)throw new RangeError("Input dims doesn't match data length.");if(r==="string"){if(a!==void 0&&(!Array.isArray(a)||!a.every(o=>typeof o=="string")))throw new TypeError("cache should be a string array");l&&(this.cache=new Array(s))}else{if(a!==void 0){let o=JP(r);if(!(a instanceof o))throw new TypeError(`cache should be type ${o.name}`)}if(l){let o=new ArrayBuffer(s*uW(r));this.cache=lW(o,r)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[Fe.indicesToOffset(e,this.strides)]}set(e,r){this.data[Fe.indicesToOffset(e,this.strides)]=r}getData(){return U(this,null,function*(){return this.cache===void 0&&(this.cache=yield this.asyncDataProvider(this.dataId)),this.cache})}get strides(){return this._strides||(this._strides=Fe.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Bn.tensorDataTypeFromProto(e.dataType),n=Bn.tensorDimsFromProto(e.dims),i=new kh(n,r);if(r==="string")e.stringData.forEach((a,u)=>{i.data[u]=Gy(a)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let a=i.data,u=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),s=hO(e.dataType),l=e.rawData.byteLength/s;if(e.rawData.byteLength%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let o=0;o<l;o++){let c=pO(u,e.dataType,o*s);a[o]=c}}else{let a;switch(e.dataType){case $e.onnx.TensorProto.DataType.FLOAT:a=e.floatData;break;case $e.onnx.TensorProto.DataType.INT32:case $e.onnx.TensorProto.DataType.INT16:case $e.onnx.TensorProto.DataType.UINT16:case $e.onnx.TensorProto.DataType.INT8:case $e.onnx.TensorProto.DataType.UINT8:case $e.onnx.TensorProto.DataType.BOOL:a=e.int32Data;break;case $e.onnx.TensorProto.DataType.INT64:a=e.int64Data;break;case $e.onnx.TensorProto.DataType.DOUBLE:a=e.doubleData;break;case $e.onnx.TensorProto.DataType.UINT32:case $e.onnx.TensorProto.DataType.UINT64:a=e.uint64Data;break;default:throw new Error("unspecific error")}if(a==null)throw new Error("failed to populate data from a tensorproto value");let u=i.data;if(u.length!==a.length)throw new Error("array length mismatch");for(let s=0;s<a.length;s++){let l=a[s];oa.isLong(l)?u[s]=Xy(l,e.dataType):u[s]=l}}return i}static fromData(e,r,n){return new kh(r,n,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Bn.tensorDimsFromORTFormat(e),n=Bn.tensorDataTypeFromProto(e.dataType()),i=new kh(r,n);if(n==="string")for(let a=0;a<e.stringDataLength();a++)i.data[a]=e.stringData(a);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let a=i.data,u=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),s=hO(e.dataType()),l=e.rawDataLength()/s;if(e.rawDataLength()%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let o=0;o<l;o++){let c=pO(u,e.dataType(),o*s);a[o]=c}}return i}}});function Je(t){return t===1?e4:t4}function cW(t){let e=Je(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function fW(t){let e=Je(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function dW(t,e){let r=Je(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${r.output} = result;
  }
  `}var e4,t4,ir=ee(()=>{"use strict";e4={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},t4={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),tt=ee(()=>{"use strict"});function mO(t,e=n=>0,r){return U(this,null,function*(){return new Promise((n,i)=>{let a=0,u=()=>{if(t()){n();return}a++;let s=e(a);if(r!=null&&a>=r){i();return}setTimeout(u,s)};u()})})}function hy(t){return $h(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function hW(t){return $h(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function kc(t,e){let r=JSON.parse(JSON.stringify(t));return r=e,r}function Lc(t,e){return e.map(r=>t[r]).join(", ")}function ia(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function xu(t=6){return["x","y","z","w","u","v"].slice(0,t)}var Ii=ee(()=>{"use strict";mt()});function pW(t,e){return xu(e).map(r=>`${t}.${r}`)}function Tv(t,e){return e===1?[t]:pW(t,e)}function nf(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Eu=ee(()=>{"use strict";Ii()});function gW(t,e,r){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let n="";for(let i=t-2;i<t;i++)n+=`${r[i]} >= ${e[i-t+2]}`,i<t-1&&(n+="||");return n}function mW(t,e){let r=t.length;if(r===0)return"getA(), 0, 0, 0";if(r===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="r, c",i="r, cp1",a="rp1, c",u="rp1, cp1",s="";if(r>2)for(let l=0;l<r-2;++l)s=s+`${e[l]},`;return`getA(${s}${n}),
          rEdge ? 0. : getA(${s}${a}),
          cEdge ? 0. : getA(${s}${i}),
          rEdge || cEdge ? 0. : getA(${s}${u})`}function yW(t,e,r,n){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${n};
    bool cEdge = cp1 >= ${r};
    `}var py,yO,r4,vW=ee(()=>{"use strict";ir(),tt(),Ii(),Eu(),py={name:"pack",inputNames:["A"],inputTypes:[1]},yO=(t,e)=>{let r=Je(t.session.backend.glContext.version),n=e.dims,i=n.length,a=e.dims.length,u=ia(a),s=Tv("rc",a),l=yW(a,s,n[n.length-2],n[n.length-1]),o;i===0?o=[1,1]:i===1?o=[n[0],1]:o=[n[a-1],n[a-2]];let c=gW(a,o,s),f=mW(n,s),d=`
        void main() {
          ${u} rc = getOutputCoords();

          if(${c}) {
            ${r.output} = vec4(0);
          } else {
            ${l}

            ${r.output} = vec4(${f});
          }
        }
      `;return B(N({},py),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:d})},r4=(t,e)=>B(N({},py),{get:()=>yO(t,e)})});function vO(t){if(t.length===0)return[1,1,1];let e=1;for(let r=0;r<t.length-2;++r)e*=t[r];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function bW(t,e){let r=!1;return t.length===0||e.length===0?r=!0:t.length<2||e.length<2?r=t[t.length-1]===e[e.length-1]:r=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],r}function wW(t){let e=Fe.computeStrides(t),r=["b","r","c"],n="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((i,a)=>{let u=`int ${r[a]} = ${n} / ${i}`,s=a===e.length-1?`int ${r[a+1]} = ${n} - ${r[a]} * ${i}`:`index -= ${r[a]} * ${i}`;return`${u}; ${s};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function xW(t){let e=Fe.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var bO,wO,n4,_W=ee(()=>{"use strict";mt(),ir(),tt(),Eu(),bO=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),wO=(t,e,r,n)=>{let i=e.dims,a=n,u="";for(let o=0;o<4;o++){let c="";switch(o){case 0:c="outputCoords = rc;";break;case 1:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:c="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}u+=`
        ${c}
        ${o>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${o}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${o>0?"}":""}
      `}let s=Je(t.session.backend.glContext.version),l=`
      ${wW(i)}
      ${xW(a)}
      ${nf()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${a[2]};
        int cols = ${a[1]};

        ${u}
        ${s.output} = result;
      }
    `;return B(N({},r),{output:{dims:a,type:e.type,textureType:2},shaderSource:l,hasMain:!0})},n4=(t,e,r)=>{let n=bO(r);return B(N({},n),{get:()=>wO(t,e,n,r)})}}),Yy,EW=ee(()=>{"use strict";ir(),tt(),Yy=(t,e)=>{let r=e.shape,n=Je(t.session.backend.glContext.version),i=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${n.texture2D}(X,TexCoords).r;
      ${n.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:e.tensor.type,textureType:3},shaderSource:i,hasMain:!0};return t.executeProgram(a,[e.tensor])}});function TW(t,e){if(t===1)return"rc";let r="";for(let n=0;n<t;n++)r+=e[n],n<t-1&&(r+=",");return r}var gy,xO,o4,IW=ee(()=>{"use strict";ir(),tt(),Ii(),Eu(),gy={name:"unpack",inputNames:["A"],inputTypes:[2]},xO=(t,e)=>{let r=e.dims.length,n=Tv("rc",r),i=n.slice(-2),a=ia(r),u=nf(),s=e.dims.length===0?"":TW(r,n),l=r<=1?"rc":`vec2(${i.join(",")})`,o=Je(t.session.backend.glContext.version),c=`
    ${u}
    void main() {
      ${a} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${s});

       ${o.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return B(N({},gy),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:c})},o4=(t,e)=>B(N({},gy),{get:()=>xO(t,e)})}),i4,Zy,a4,jh=ee(()=>{"use strict";Do(),i4=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let r,n;return t.constructor!==Float32Array&&(dr.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(t)),e*this.channelSize>t.length?(dr.warning("Encoder","Source data too small. Allocating larger array"),n=t,r=this.allocate(e*this.channelSize),n.forEach((i,a)=>r[a]=i)):(n=t,r=n),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},Zy=class{constructor(t,e=1,r){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=r||t.FLOAT}encode(t,e){let r=t;return this.channelSize===1&&(dr.verbose("Encoder","Exploding into a larger array"),r=this.allocate(e),t.forEach((n,i)=>r[i*4]=n)),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},a4=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),Zc,s4,Ky,AW=ee(()=>{"use strict";mt(),tt(),Zc=(t,e,r)=>{let n=r===0||r===1?1:4,i=r===2,a=r===1||r===2,u=r===4?e.length-1:void 0,s=r===4?e.map((l,o)=>o===e.length-1?l*4:l):void 0;return Ky(t,e,n,s,{isPacked:i,reverseWH:a,breakAxis:u})},s4=(t,e,r)=>{let n=Zc(t,e,r);return[n.width,n.height]},Ky=(t,e,r=1,n,i)=>{let a=!!(i&&i.isPacked),[u,s]=t.computeTextureWH(a&&n||e,i),l=e.length,o=e.slice(0);if(l===0&&(o=[1]),r===1)n=e;else if(a){if(r!==4)throw new Error("a packed texture must be 4-channel");n=e,l>0&&(o[l-1]=Math.ceil(o[l-1]/2)),l>1&&(o[l-2]=Math.ceil(o[l-2]/2))}else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:s,channels:r,isPacked:a,shape:o,strides:Fe.computeStrides(o),unpackedShape:n,reversedWH:i&&i.reverseWH}}}),_O,u4,SW=ee(()=>{"use strict";Do(),_u(),mt(),vW(),_W(),EW(),IW(),jh(),AW(),tt(),_O=(t,e)=>{let r=e.map(i=>`${i.unpackedShape.join(",")};${i.width}x${i.height}`).join("_"),n=t.name;return t.cacheHint&&(n+="["+t.cacheHint+"]"),n+=":"+r,n},u4=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return s4(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let l=0;l<t.inputNames.length;++l)r[l]=this.getOrCreateTextureData(e[l],t.inputTypes[l]);let n=_O(t,r),i=this.session.programManager.getArtifact(n),a=i?i.programInfo:typeof t.get=="function"?t.get():t,u=Zc(this.session.layoutStrategy,a.output.dims,a.output.textureType),s=this.createTextureData(u,a.output.type);return i||(i=this.session.programManager.build(a,r,s),this.session.programManager.setArtifact(n,i)),this.runProgram(i,r,s),s}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,r){for(let n=0;n<e.length;++n)if(!!e[n].isPacked!=(t.programInfo.inputTypes[n]===2))throw new Error(`input[${n}] property packed inconsistent`);if(!!r.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,r)}getOrCreateTextureData(t,e){let r=this.getTextureData(t.dataId,e===2);if(!r&&(r=this.getTextureData(t.dataId,e!==2),r))return e===2?this.pack(r):this.unpack(r);if(!r){let n=Zc(this.session.layoutStrategy,t.dims,e);if(e===4){let i=t.dims;if(i.length===4){let a=[i[0],Math.ceil(i[1]*i[2]*i[3]/4)],u=Zc(this.session.layoutStrategy,a,e),s=t.numberData;if(i[1]*i[2]*i[3]%4!==0){let l=i[0],o=i[1]*i[2]*i[3],c=Math.ceil(o*1/4)*4,f=l*c;s=new Float32Array(f);for(let d=0;d<l;++d){let h=d*o,p=d*c+d%1*o;s.set(t.numberData.subarray(h,h+o),p)}}return this.createTextureData(u,t.type,s,t,1)}}if(e===2){let i=Ky(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),a=this.createTextureData(i,t.type,t.numberData,t,1);r=this.pack(a)}else r=this.createTextureData(n,t.type,t.numberData,t,1)}return r}createTextureDataFromLayoutBindTensor(t,e,r,n){return this.createTextureData(t,e,r,n,1)}createTextureData(t,e,r,n,i){dr.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let a=this.session.textureManager.createTextureFromLayout(e,t,r,i);return this.createTextureDataFromTexture(t,e,a,n)}reshapeUnpacked(t,e){let r=this.getOrCreateTextureData(t,0),n={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Fe.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}reshapePacked(t,e){let r=this.getOrCreateTextureData(t,2);if(bW(t.dims,e)){let s={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Fe.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(s,t.type,r.texture).tensor}let n=vO(t.dims),i=vO(e),a=this.reshapePacked(t,n),u=this.run(n4(this,a,i),[a]);return this.reshapePacked(u,e)}cast(t,e){let r=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(r,e,r.texture).tensor}createTextureDataFromTexture(t,e,r,n,i){let a=B(N({},t),{tensor:n||new Vn(t.unpackedShape,e,u=>this.readTexture(a),u=>U(this,null,function*(){return this.readTextureAsync(a)}),void 0,i),texture:r});return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(Yy(this,t))}readTextureAsync(t){return U(this,null,function*(){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(Yy(this,t))})}pack(t){return this.executeProgram(r4(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(o4(this,t.tensor),[t.tensor])}}}),EO,Xt,Xr=ee(()=>{"use strict";EO=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},Xt=t=>new EO(t)}),my,l4,c4,TO,IO,DW=ee(()=>{"use strict";Xr(),ir(),tt(),my={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},l4=(t,e,r)=>(IO(e),[t.run(B(N({},my),{cacheHint:r.cacheKey,get:()=>TO(t,e,r)}),e)]),c4=t=>{let e=t.attributes.getFloat("epsilon",1e-5),r=t.attributes.getFloat("momentum",.9),n=t.attributes.getInt("spatial",1);return Xt({epsilon:e,momentum:r,spatial:n})},TO=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),i=e[0].dims.length,[a,u]=t.calculateTextureWidthAndHeight(e[1].dims,0),s=`
  float process(int[${i}] indices) {
    vec2 position = offsetToCoords(indices[1], ${a}, ${u});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return B(N({},my),{output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:s})},IO=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],r=t[1],n=t[2],i=t[3],a=t[4];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1||i.dims.length!==1||a.dims.length!==1)throw new Error("invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1]||i.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||i.type!=="float32"&&i.type!=="float64"||a.type!=="float32"&&a.type!=="float64")throw new Error("invalid input tensor types.")}}),f4,Tu,fe,Qy,d4,aa=ee(()=>{"use strict";f4=class{constructor(t,e,r,n){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=r,this.outputTextureLayout=n}},Tu=class{constructor(t){this.context=t}},fe=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},Qy=class{constructor(t,e,r){this.name=t,r?this.dependencies=r:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},d4=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,r=new Set,n=new Array;return this.createOrderedNodes(t,e,r,n),n}static createOrderedNodes(t,e,r,n){for(let i=0;i<t.length;++i)this.dfsTraverse(t[i],e,r,n)}static dfsTraverse(t,e,r,n){if(!t||r.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let i=t.dependencies;if(i&&i.length>0)for(let a=0;a<i.length;++a)this.dfsTraverse(i[a],e,r,n);n.push(t),r.add(t.name),e.delete(t.name)}}});function CW(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function OW(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function PW(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function MW(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function NW(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function RW(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function FW(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function kW(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function LW(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function BW(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function $W(){return jW("pow")}function VW(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function jW(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var kn,AO,h4,p4,g4,m4,y4,v4,b4,w4,x4,_4,E4,T4,UW=ee(()=>{"use strict";mt(),aa(),ir(),tt(),kn=(t,e,r,n=e[0].type,i)=>{let a=t.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:i,get:()=>AO(t,e,r,n)}},AO=(t,e,r,n=e[0].type)=>{let i=t.session.pack?2:0,a=!Fe.areEqual(e[0].dims,e[1].dims),u=e[0].dims,s=t.session.pack;if(a){let c=Xo.calcShape(e[0].dims,e[1].dims,!1);if(!c)throw new Error("Can't perform binary op on the given tensors");u=c;let f=u.length,d=e[0].dims.length!==0?e[0].dims.length:1,h=e[1].dims.length!==0?e[1].dims.length:1,p=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",m=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v=Je(t.session.backend.glContext.version),x=s?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${v.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${f}]) {
        int aindices[${d}];
        int bindices[${h}];
        ${p}
        ${m}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:u,type:n,textureType:i},shaderSource:x,hasMain:s}}let l=Je(t.session.backend.glContext.version),o=`
    ${r.body}
    void main() {
      vec4 v1 = ${l.texture2D}(A, TexCoords);
      vec4 v2 = ${l.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${l.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[i,i],output:{dims:e[0].dims,type:n,textureType:i},shaderSource:o,hasMain:!0}},h4=(t,e)=>[t.run(kn(t,e,CW()),e)],p4=(t,e)=>[t.run(kn(t,e,kW(),"bool"),e)],g4=(t,e)=>[t.run(kn(t,e,OW()),e)],m4=(t,e)=>[t.run(kn(t,e,NW(),"bool"),e)],y4=(t,e)=>[t.run(kn(t,e,RW(),"bool"),e)],v4=(t,e)=>[t.run(kn(t,e,FW(),"bool"),e)],b4=(t,e)=>[t.run(kn(t,e,PW()),e)],w4=(t,e)=>[t.run(kn(t,e,LW(),"bool"),e)],x4=(t,e)=>[t.run(kn(t,e,$W()),e)],_4=(t,e)=>[t.run(kn(t,e,VW()),e)],E4=(t,e)=>[t.run(kn(t,e,MW()),e)],T4=(t,e)=>[t.run(kn(t,e,BW(),"bool"),e)]}),I4,A4,SO,HW=ee(()=>{"use strict";mt(),I4=(t,e,r)=>(SO(e),[t.cast(e[0],r)]),A4=t=>Bn.tensorDataTypeFromProto(t.attributes.getInt("to")),SO=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),DO,CO,S4,Bc,zW=ee(()=>{"use strict";ir(),tt(),Ii(),Eu(),DO=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(2),cacheHint:e}),CO=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let a=i.slice(0);for(let C=1;C<r.length;C++){let j=r[C].dims.slice();for(let z=0;z<i.length;z++)if(z===n)a[n]+=j[z];else if(i[z]!==j[z])throw new Error("non concat dimensions must match")}let u=a.length,s=Tv("coords",u),l=ia(u),o=nf(),c=r.map(C=>C.dims),f=xu(u),d=new Array(c.length-1);d[0]=c[0][n];for(let C=1;C<d.length;C++)d[C]=d[C-1]+c[C][n];let h=f[n],p=f.slice(-2),m=f.join(),v=`if (${h} < ${d[0]}) {
        return getChannel(
            getX0(${m}), vec2(${p.join()}));
        }`;for(let C=1;C<d.length;C++){let j=d[C-1];v+=`
            if (${h} < ${d[C]}  && ${h} >= ${d[C-1]}) {
              return getChannel(
                getX${C}(${Bc(f,h,j)}),
                vec2(${Bc(p,h,j)}));
            }`}let x=d.length,y=d[d.length-1];v+=`
            return getChannel(
              getX${x}(${Bc(f,h,y)}),
              vec2(${Bc(p,h,y)}));`;let _=Je(t.session.backend.glContext.version),I=`
          ${o}
          float getValue(${f.map(C=>"int "+C)}) {
            ${v}
          }

          void main() {
            ${l} coords = getOutputCoords();
            int lastDim = coords.${f[u-1]};
            coords.${f[u-1]} = coords.${f[u-2]};
            coords.${f[u-2]} = lastDim;

            vec4 result = vec4(getValue(${s}), 0., 0., 0.);

            ${s[u-1]} = ${s[u-1]} + 1;
            if (${s[u-1]} < ${a[u-1]}) {
              result.g = getValue(${s});
            }

            ${s[u-2]} = ${s[u-2]} + 1;
            if (${s[u-2]} < ${a[u-2]}) {
              result.a = getValue(${s});
            }

            ${s[u-1]} = ${s[u-1]} - 1;
            if (${s[u-2]} < ${a[u-2]} &&
                ${s[u-1]} < ${a[u-1]}) {
              result.b = getValue(${s});
            }
            ${_.output} = result;
          }
        `;return B(N({},e),{output:{dims:a,type:r[0].type,textureType:2},shaderSource:I,hasMain:!0})},S4=(t,e,r)=>{let n=DO(e.length,r.cacheKey);return B(N({},n),{get:()=>CO(t,n,e,r.axis)})},Bc=(t,e,r)=>{let n=t.indexOf(e);return t.map((i,a)=>a===n?`${i} - ${r}`:i).join()}}),D4,OO,PO,MO,yy,NO,RO,FO,C4,kO,GW=ee(()=>{"use strict";Xr(),tt(),zW(),D4=(t,e,r)=>(kO(e),t.session.pack&&e[0].dims.length>1?[t.run(S4(t,e,r),e)]:[t.run(MO(t,e,r),e)]),OO=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(0),cacheHint:e}),PO=(t,e,r,n)=>{let i=r[0].dims.slice();if(n>=i.length||n<-1*i.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=i.length+n);let a=i.slice(0);for(let h=1;h<r.length;h++){let p=r[h].dims.slice();for(let m=0;m<i.length;m++)if(m===n)a[n]+=p[m];else if(i[m]!==p[m])throw new Error("non concat dimensions must match")}let u=a.length,s=new Array(r.length),l=0;for(let h=0;h<s.length;++h)l+=r[h].dims[n],s[h]=l;let o="";r.length<5?o=yy(s):o=NO(s);let c=RO(r.length,u),f=FO(s),d=`
        ${c}
        ${f}
        ${o}
        float process(int indices[${u}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return B(N({},e),{output:{dims:a,type:r[0].type,textureType:0},shaderSource:d})},MO=(t,e,r)=>{let n=OO(e.length,r.cacheKey);return B(N({},n),{get:()=>PO(t,n,e,r.axis)})},yy=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,r)=>`if(index<${e}) {return ${r};}
`).join("")}
    }`,NO=t=>yy(t),RO=(t,e)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let n=0;n<t;++n)n===0?r.push(`	if (textureIndex == ${n}) { return _X${n}(indices); }`):n===t-1?r.push(`	else { return _X${n}(indices); }`):r.push(`	else if (textureIndex == ${n}) { return _X${n}(indices); }`);return r.push("	}"),r.join(`
`)},FO=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<t.length;++r)r===0?e.push(`	if (index == ${r}) { return ${t[r]}; }`):r===t.length-1?e.push(`	else { return ${t[r]}; }`):e.push(`	else if (index == ${r}) { return ${t[r]}; }`);return e.push("	}"),e.join(`
`)},C4=t=>Xt({axis:t.attributes.getInt("axis")}),kO=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,r=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let n of t){if(n.type!==e)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape")}}});function WW(){return Jn("abs")}function qW(){return Jn("acos")}function XW(){return Jn("asin")}function YW(){return Jn("atan")}function ZW(){return Jn("ceil")}function KW(){return Jn("cos")}function QW(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function JW(){return Jn("exp")}function eq(){return Jn("floor")}function O4(t,e){let r="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:0}}function tq(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function rq(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function nq(){return Jn("log")}function oq(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function iq(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function aq(){return Jn("sin")}function P4(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function M4(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function sq(){return Jn("sqrt")}function uq(){return Jn("tan")}function lq(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function Jn(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var LO,fr,N4,R4,F4,k4,Jy,L4,B4,BO,$4,V4,j4,U4,H4,z4,ev,G4,W4,q4,X4,Y4,Z4,K4,Q4,J4,eM,tM,rM=ee(()=>{"use strict";Xr(),mt(),aa(),ir(),tt(),LO=(t,e,r,n)=>{let i=t.session.pack?2:0,a=Je(t.session.backend.glContext.version);return B(N({},e),{output:{dims:r.dims,type:r.type,textureType:i},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${a.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${a.output} = v;
     }
     `,hasMain:!0})},fr=(t,e,r,n)=>{let i=t.session.pack?2:0,a={name:r.name,inputTypes:[i],inputNames:["A"],cacheHint:n};return B(N({},a),{get:()=>LO(t,a,e,r)})},N4=(t,e)=>[t.run(fr(t,e[0],WW()),e)],R4=(t,e)=>[t.run(fr(t,e[0],qW()),e)],F4=(t,e)=>[t.run(fr(t,e[0],XW()),e)],k4=(t,e)=>[t.run(fr(t,e[0],YW()),e)],Jy=(t,e,r)=>[t.run(fr(t,e[0],O4(r.min,r.max),r.cacheKey),e)],L4=t=>Xt({min:t.attributes.getFloat("min",Jc),max:t.attributes.getFloat("max",ef)}),B4=(t,e)=>{let r=BO(t,e);return Jy(t,[e[0]],r)},BO=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let r=e.length>=3?e[1].numberData[0]:Jc,n=e.length>=3?e[2].numberData[0]:ef;return Xt({min:r,max:n})},$4=(t,e)=>[t.run(fr(t,e[0],ZW()),e)],V4=(t,e)=>[t.run(fr(t,e[0],KW()),e)],j4=(t,e,r)=>[t.run(fr(t,e[0],QW(r.alpha),r.cacheKey),e)],U4=t=>Xt({alpha:t.attributes.getFloat("alpha",1)}),H4=(t,e)=>[t.run(fr(t,e[0],JW()),e)],z4=(t,e)=>[t.run(fr(t,e[0],eq()),e)],ev=(t,e)=>[t.run(fr(t,e[0],tq()),e)],G4=(t,e,r)=>[t.run(fr(t,e[0],rq(r.alpha),r.cacheKey),e)],W4=t=>Xt({alpha:t.attributes.getFloat("alpha",.01)}),q4=(t,e)=>[t.run(fr(t,e[0],nq()),e)],X4=(t,e)=>[t.run(fr(t,e[0],oq()),e)],Y4=(t,e)=>[t.run(fr(t,e[0],iq()),e)],Z4=(t,e)=>[t.run(fr(t,e[0],P4()),e)],K4=(t,e)=>[t.run(fr(t,e[0],M4()),e)],Q4=(t,e)=>[t.run(fr(t,e[0],aq()),e)],J4=(t,e)=>[t.run(fr(t,e[0],sq()),e)],eM=(t,e)=>[t.run(fr(t,e[0],uq()),e)],tM=(t,e)=>[t.run(fr(t,e[0],lq()),e)]});function of(t){let e;switch(t.activation){case"Relu":e=P4();break;case"Sigmoid":e=M4();break;case"Clip":e=O4(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=e.name,n=e.body,i=`value = ${r}_(value);`;return{activationFunction:n,applyActivation:i}}var Gh,Iu=ee(()=>{"use strict";mt(),rM(),Gh=t=>{let e=t.getString("activation","");if(e==="Clip"){let[r,n]=t.getFloats("activation_params",[Jc,ef]);return{activation:e,clipMax:n,clipMin:r,activationCacheKey:`${e}:${r},${n}`}}return{activation:e,activationCacheKey:e}}}),$O,VO,nM,cq=ee(()=>{"use strict";Do(),ir(),tt(),Sv(),Iu(),$O=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),VO=(t,e,r,n)=>{let i=e.length>2?"value += getBias(output_channel);":"",a=e[0].dims.slice(),u=e[1].dims.slice(),s=u[0]/n.group;dr.verbose("GroupedConv",`autpPad:${n.autoPad}, dilations:${n.dilations}, group:${n.group}, kernelShape:${n.kernelShape}, pads:${n.pads}, strides:${n.strides}`);let l=Kc(a,u,n.dilations,n.pads,n.strides),o=Je(t.session.backend.glContext.version),{activationFunction:c,applyActivation:f}=of(n),d=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${c}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${s};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${u[1]}; wInChannel++) {
      int input_channel = group_id * ${u[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${u[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${n.dilations[0]};

        if (xHeight < 0 || xHeight >= ${a[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${u[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${n.dilations[1]};
          if (xWidth < 0 || xWidth >= ${a[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${i}
    ${f}
    ${o.output} = vec4(value, .0, .0, .0);
  }
`;return B(N({},r),{output:{dims:l,type:e[0].type,textureType:0},shaderSource:d,hasMain:!0})},nM=(t,e,r)=>{let n=$O(e.length>2,r.cacheKey);return B(N({},n),{get:()=>VO(t,e,n,r)})}}),jO,UO,oM,fq=ee(()=>{"use strict";ir(),tt(),Eu(),jO=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),UO=(t,e,r,n,i,a)=>{let u=r.dims,s=n.dims,l=2,o=3,c=i.length,f=[s[1]*s[2]*s[3],i[2]*i[3]],d=s[2]*s[3],h=nf(),p=Je(t.session.backend.glContext.version),m="";for(let x=0;x<=1;x++)for(let y=0;y<=1;y++)m+=`
            blockIndex = rc.x + ${y};
            pos = rc.y + ${x};

            if(blockIndex < ${f[1]} && pos < ${f[0]}) {
              offsetY = int(blockIndex / (${i[c-1]})) * ${a.strides[0]} -
                ${a.pads[0]};
              d0 = offsetY + ${a.dilations[0]} * (imod(pos, ${d}) / ${s[2]});

              if(d0 < ${u[l]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${i[c-1]}) * ${a.strides[1]} -
                  ${a.pads[1]};
                d1 = offsetX + ${a.dilations[1]} * imod(imod(pos, ${d}), ${s[2]});

                if(d1 < ${u[o]} && d1 >= 0) {

                  ch = int(float(pos)/ ${d}.);
                    innerDims = vec2(d0, d1);
                    result[${x*2+y}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v=`
      ${h}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${m}
          ${p.output} = result;
      }
            `;return B(N({},e),{output:{dims:f,type:r.type,textureType:2},shaderSource:v,hasMain:!0})},oM=(t,e,r,n,i)=>{let a=jO(i.cacheKey);return B(N({},a),{get:()=>UO(t,a,e,r,n,i)})}});function dq(t,e,r){let n=e[0].dims,i=e[1].dims,a=Xo.calcShape(n,i,!0);if(!a)throw new Error("Can't use matmul on the given tensors");let u=ia(a.length),s=xu(),{activationFunction:l,applyActivation:o}=of(r),c=e.length>2,f=c?"value += getBiasForMatmul();":"",d=c?`${aM(u,s,e[2].dims,a,!1)}`:"",h=a.length,p=n.length,m=i.length,v=n[n.length-1],x=`
    ${l}
    ${d}
    float process(int indices[${h}]) {
        int a[${p}];
        int b[${m}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v}; ++k) {
            a[${p-1}] = k;
            b[${m-2}] = k;
            value += _A(a) * _B(b);
        }
        ${f}
        ${o}
        return value;
    }`;return B(N({},t),{output:{dims:a,type:e[0].type,textureType:0},shaderSource:x})}function iM(t,e){let r=lM(t.length>2,e.activationCacheKey);return B(N({},r),{get:()=>dq(r,t,e)})}function aM(t,e,r,n,i){let a="",u=r.length,s=n.length,l=s-u;s<2&&u>0?a="coords":a=r.map((d,h)=>`coords.${e[h+l]}`).join(", ");let o=Xo.getBroadcastDims(r,n).map(d=>`coords.${e[d+l]} = 0;`).join(`
`),c=Fe.size(r)===1,f="vec4(outputValue.xx, outputValue.yy)";return c&&(f="vec4(outputValue.x)"),i?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${o}
  vec4 outputValue = getBias(${a});
  return ${f};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${o}
  return getBias(coords.x);
}`}var sM,uM,lM,HO,Iv=ee(()=>{"use strict";mt(),tt(),Ii(),Iu(),cM(),sM=(t,e,r)=>(HO(e),t.session.pack?[t.run(Av(t,e,r),e)]:[t.run(iM(e,r),e)]),uM=t=>Gh(t.attributes),lM=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),HO=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function hq(t,e,r,n){let i=[],a=[],u=r[0].dims,s=r[1].dims,l=u.length,o=s.length,c=n.length,f=c-l,d=c-o;i=u.map((y,_)=>`coords.${e[_+f]}`),i[l-1]="i*2",i.join(", "),a=s.map((y,_)=>`coords.${e[_+d]}`),a[o-2]="i*2",a.join(", ");let h=Xo.getBroadcastDims(u,n),p=Xo.getBroadcastDims(s,n),m=h.map(y=>`coords.${e[y+f]} = 0;`).join(`
`),v=p.map(y=>`coords.${e[y+d]} = 0;`).join(`
`),x=`int lastDim = coords.${e[c-1]};
  coords.${e[c-1]} = coords.${e[c-2]};
  coords.${e[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${m}
  vec4 outputValue = getA(${i});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${v}
  vec4 outputValue = getB(${a});
  return outputValue;
}`}function pq(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`rc.${t[e-2]}, i*2`,r}function gq(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`i*2, rc.${t[e-1]}`,r}var zO,GO,Av,cM=ee(()=>{"use strict";mt(),ir(),tt(),Ii(),Iu(),Iv(),zO=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),GO=(t,e,r,n)=>{let i=r.length>2,a=i?"value += getBiasForMatmul();":"",u=r[0].dims,s=r[1].dims,l=Xo.calcShape(u,s,!0),o=!Fe.areEqual(r[0].dims,r[1].dims);if(!l)throw new Error("Can't use matmul on the given tensors");let c=u[u.length-1],f=Math.ceil(c/2),d=u.length,h=s.length,p=Je(t.session.backend.glContext.version),m=ia(l.length),v=l.length,x=xu(),{activationFunction:y,applyActivation:_}=of(n),I=i?`${aM(m,x,r[2].dims,l,!0)}`:"",C=o?`${hq(m,x,r,l)}`:"",j=o?"getAAtOutCoordsMatmul(i)":`getA(${pq(x,d)})`,z=o?"getBAtOutCoordsMatmul(i)":`getB(${gq(x,h)})`,W=o?"":`${m} rc =
          getOutputCoords(); int lastDim = rc.${x[v-1]}; rc.${x[v-1]} =
          rc.${x[v-2]}; rc.${x[v-2]} = lastDim;
      `,k=`
            ${C}
            ${I}
            ${y}
            void main() {
              ${W}

              vec4 value = vec4(0);
              for (int i = 0; i < ${f}; i++) {
                vec4 a = ${j};
                vec4 b = ${z};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${a}
              ${_}
              ${p.output} = value;
            }`;return B(N({},e),{output:{dims:l,type:r[0].type,textureType:2},shaderSource:k,hasMain:!0})},Av=(t,e,r)=>{let n=zO(e.length>2,r.activationCacheKey);return B(N({},n),{get:()=>GO(t,n,e,r)})}}),fM,mq=ee(()=>{"use strict";Sv(),fq(),cM(),fM=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Kc(n,i,r.dilations,r.pads,r.strides),u=t.run(oM(t,e[0],e[1],a,r),[e[0]]),s=t.reshapePacked(e[1],[i[0],i[1]*i[2]*i[3]]),l=e.length===3?[s,u,e[2]]:[s,u],o=t.run(Av(t,l,r),l);return t.reshapePacked(o,a)}}),WO,qO,dM,tv,hM=ee(()=>{"use strict";tt(),WO=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),qO=(t,e,r,n,i,a)=>{let u=r.dims,s=n.dims,l=i.length,o=tv(u,s,i,4),c=`
        const int XC = ${u[1]};
        const int XH = ${u[2]};
        const int XW = ${u[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${l}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${u.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return B(N({},e),{output:{dims:o,type:r.type,textureType:4},shaderSource:c})},dM=(t,e,r,n,i)=>{let a=WO(i.cacheKey);return B(N({},a),{get:()=>qO(t,a,e,r,n,i)})},tv=(t,e,r,n=4)=>[r[0],r[2],r[3],Math.ceil(t[1]*e[2]*e[3]/n)]}),XO,YO,pM,yq=ee(()=>{"use strict";mt(),ir(),tt(),Iu(),hM(),XO=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),YO=(t,e,r,n,i)=>{let a=r[0].dims,u=r[1].dims,s=[u[0],Math.ceil(a[1]*u[2]*u[3]/4)],l=tv(a,u,n),[o,c]=t.calculateTextureWidthAndHeight(s,4),f=Fe.computeStrides(l),[d,h]=t.calculateTextureWidthAndHeight(l,4),p=n.length,m=r.length<3?"0.0":"_B(b)",v=Math.ceil(a[1]*u[2]*u[3]/4),{activationFunction:x,applyActivation:y}=of(i),_=Je(t.session.backend.glContext.version),I=`
${x}
float process(int indices[${p}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${f[0]} + im2col[1] * ${f[1]} + im2col[2] * ${f[2]};
  int kernelOffset = indices[1] * ${s[1]};
  float value = ${m};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${d}, ${h});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${o}, ${c});
    value += dot(${_.texture2D}(Im2Col, im2colCoords), ${_.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y}
  return value;
}`;return B(N({},e),{output:{dims:n,type:r[0].type,textureType:0},shaderSource:I})},pM=(t,e,r,n)=>{let i=XO(e.length>2,n);return B(N({},i),{get:()=>YO(t,i,e,r,n)})}}),Kc,rv,ZO,KO,QO,JO,nv,e3,Sv=ee(()=>{"use strict";Xr(),mt(),cq(),mq(),yq(),Iu(),hM(),Iv(),Kc=(t,e,r,n,i)=>{let a=t[0],u=t.slice(2),s=u.length,l=e[0],o=e.slice(2).map((f,d)=>f+(f-1)*(r[d]-1)),c=u.map((f,d)=>f+n[d]+n[d+s]).map((f,d)=>Math.floor((f-o[d]+i[d])/i[d]));return[a,l].concat(...c)},rv=(t,e,r)=>(e3(e,r),ZO(t,e,r)),ZO=(t,e,r)=>{let n=JO(r,e),i=t.session.pack,a=n.kernelShape[0]===1&&n.kernelShape[1]===1;return n.group>1?[t.run(nM(t,e,n),e)]:a&&i?[KO(t,e,n)]:i&&e[0].dims.length===4&&e[0].dims[0]===1&&!a?[fM(t,e,n)]:[QO(t,e,n)]},KO=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Kc(n,i,r.dilations,r.pads,r.strides),u=t.reshapeUnpacked(e[0],[n[1],n[2]*n[3]]),s=t.reshapeUnpacked(e[1],[i[0],i[1]]),l=e.length>2?[s,u,e[2]]:[s,u],o=t.run(iM(l,r),l);return t.reshapeUnpacked(o,a)},QO=(t,e,r)=>{let n=e[0].dims,i=e[1].dims,a=Kc(n,i,r.dilations,r.pads,r.strides),u=t.run(dM(t,e[0],e[1],a,r),[e[0]]),s=e.length===3?[u,e[1],e[2]]:[u,e[1]];return t.run(pM(t,e,a,r),s)},JO=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let a=2;a<e[1].dims.length;++a)r.push(e[1].dims[a]);let n=t.pads.slice();Vh.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,r,n,t.autoPad);let i=Object.assign({},t);return Object.assign(i,{kernelShape:r,pads:n,cacheKey:t.cacheKey}),i},nv=t=>{let e=t.attributes,r=Gh(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return Xt(N({autoPad:n,dilations:i,group:a,kernelShape:u,pads:s,strides:l},r))},e3=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[1]*e.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let i=t[0].dims.length-2;if(e.dilations.length!==i)throw new Error(`dilations should be ${i}D`);if(e.strides.length!==i)throw new Error(`strides should be ${i}D`);if(e.pads.length!==i*2)throw new Error(`pads should be ${i*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),t3,r3,n3,gM,o3,i3,a3,s3,u3,l3,mM,c3,vq=ee(()=>{"use strict";Xr(),ir(),tt(),Iu(),t3=(t,e,r,n,i,a)=>(t-1)*e+r+(n-1)*i+1-a,r3=(t,e,r,n,i)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(r[n]=a,r[i]=t-a):e==="SAME_LOWER"&&(r[n]=t-a,r[i]=a)},n3=(t,e,r,n,i,a,u,s)=>{let l=t.length-2,o=s.length===0;for(let c=0;c<l;++c){let f=o?t[c+2]*a[c]:s[c],d=t3(t[c+2],a[c],i[c],e[c],r[c],f);r3(d,n,i,c,c+l),o&&s.push(a[c]*(t[c+2]-1)+u[c]+(e[c]-1)*r[c]+1-i[c]-i[c+l])}},gM=(t,e,r)=>(c3(e,r),o3(t,e,r)),o3=(t,e,r)=>{let n=l3(r,e);return[u3(t,e,n)]},i3=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),a3=(t,e,r,n)=>{let i=e.length>2?"getB(output_channel)":"0.0",a=e[0].dims,u=e[1].dims,s=u[1],l=u[0]/n.group,o=[e[0].dims[0],e[1].dims[1]*n.group,...n.outputShape],c=Je(t.session.backend.glContext.version),{activationFunction:f,applyActivation:d}=of(n),h=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${s};
    int wOutChannel = output_channel - group_id * ${s};

    float value = ${i};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${u[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${u[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${a[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${a[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${d}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return B(N({},r),{output:{dims:o,type:e[0].type,textureType:0},shaderSource:h,hasMain:!0})},s3=(t,e,r)=>{let n=i3(e.length>2,r.cacheKey);return B(N({},n),{get:()=>a3(t,e,n,r)})},u3=(t,e,r)=>t.run(s3(t,e,r),e),l3=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let s=2;s<e[1].dims.length;++s)r.push(e[1].dims[s]);let n=t.pads.slice(),i=t.outputShape.slice(),a=e[0].dims;n3(a,r,t.dilations,t.autoPad,n,t.strides,t.outputPadding,i);let u=Object.assign({},t);return Object.assign(u,{kernelShape:r,pads:n,outputShape:i,cacheKey:t.cacheKey}),u},mM=t=>{let e=t.attributes,r=Gh(e),n=e.getString("auto_pad","NOTSET"),i=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),o=e.getInts("pads",[0,0,0,0]),c=e.getInts("strides",[1,1]);return Xt(N({autoPad:n,dilations:i,group:a,kernelShape:u,outputPadding:s,outputShape:l,pads:o,strides:c},r))},c3=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let i=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==i))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),vy,tf,yM,f3,by,d3,h3,p3,Dv=ee(()=>{"use strict";Xr(),mt(),tt(),vy={name:"Transpose",inputNames:["A"],inputTypes:[0]},tf=(t,e,r)=>(p3(e),[t.run(B(N({},vy),{cacheHint:r.cacheKey,get:()=>f3(t,e[0],r.perm)}),e)]),yM=t=>Xt({perm:t.attributes.getInts("perm",[])}),f3=(t,e,r)=>{let n=e.dims;r=by(n,r);let i=d3(n,r),a=n.length,u=`
      ${h3("perm",r,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return B(N({},vy),{output:{dims:i,type:e.type,textureType:0},shaderSource:u})},by=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),d3=(t,e)=>(e=by(t,e),Fe.sortBasedOnPerm(t,e)),h3=(t,e,r)=>{let n=[];n.push(`void ${t}(out int a[${r}], int src[${r}]) {`);for(let i=0;i<r;++i)n.push(`	a[${e[i]}]=src[${i}];`);return n.push("	}"),n.join(`
`)},p3=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),vM,bM,g3,bq=ee(()=>{"use strict";Dv(),vM=(t,e,r)=>{g3(e);let n=r.blocksize,i=n*n,a=r.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],u=r.mode==="DCR"?[e[0].dims[0],n,n,e[0].dims[1]/i,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/i,n,n,e[0].dims[2],e[0].dims[3]],s=t.reshapeUnpacked(e[0],u),l={perm:a,cacheKey:`${a}`},[o]=tf(t,[s],l),c=[e[0].dims[0],e[0].dims[1]/i,e[0].dims[2]*n,e[0].dims[3]*n];return[t.reshapeUnpacked(o,c)]},bM=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let r=t.attributes.getString("mode","DCR");if(r!=="DCR"&&r!=="CRD")throw new Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:e}},g3=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),wM,xM,m3,wq=ee(()=>{"use strict";mt(),wM=(t,e,r)=>{m3(e,r);let n=Fe.flattenShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},xM=t=>t.attributes.getInt("axis",1),m3=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let r=t[0].dims.length;if(r===0)throw new Error("scalar tensor is not supported.");if(e<-r||e>r)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),af,Wh=ee(()=>{"use strict";af=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),_M,EM,y3,v3,b3,w3,xq=ee(()=>{"use strict";Xr(),Wh(),mt(),tt(),_M=(t,e,r)=>(w3(e,r.axis),[t.run(b3(t,e,r),e)]),EM=t=>Xt({axis:t.attributes.getInt("axis",0)}),y3={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},v3=(t,e,r,n)=>{let i=r[0].dims.slice(),a=r[1].dims.slice(),u=new Array(i.length+a.length-1);n=Fe.normalizeAxis(n,i.length);let s=[];for(let d=0;d<u.length;d++)d<n?(u[d]=i[d],s.push(`inputIdx[${d}] = outputIdx[${d}];`)):d<n+a.length?(u[d]=a[d-n],s.push(`indexDataIdx[${d-n}] = outputIdx[${d}];`)):(u[d]=i[d-a.length+1],s.push(`inputIdx[${d-a.length+1}] = outputIdx[${d}];`));let l=u.length||1,o=i.length,c=a.length||1,f=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${o}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${s.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${i[n]} : idx;
        return _A(inputIdx);
      }`;return B(N({},e),{output:{dims:u,type:r[0].type,textureType:0},shaderSource:f})},b3=(t,e,r)=>{let n=B(N({},y3),{cacheHint:r.cacheKey});return B(N({},n),{get:()=>v3(t,n,e,r.axis)})},w3=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let r=t[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(e<-r||e>r-1)throw new Error("Invalid axis.");if(af.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),ov,wy,TM,IM,x3,_3,E3,_q=ee(()=>{"use strict";Xr(),mt(),tt(),ov=(t,e,r)=>(E3(e,r),[t.run(x3(e,r),e)]),wy=(t,e)=>{let r=t.attributes.getInt("transA",0)!==0,n=t.attributes.getInt("transB",0)!==0,i=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return Xt({transA:r,transB:n,alpha:i,beta:a,isOptionalC:e})},TM=t=>wy(t,!1),IM=t=>wy(t,!0),x3=(t,e)=>{let r={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return B(N({},r),{get:()=>_3(r,t,e)})},_3=(t,e,r)=>{let n=e[0].dims.slice(),i=e[1].dims.slice(),[a,u]=KP.getShapeOfGemmResult(n,r.transA,i,r.transB,e.length===3?e[2].dims:void 0),s=[a,u];if(!s)throw new Error("Can't use gemm on the given tensors");let l=n[n.length-1],o="";r.transA&&(l=n[0]),r.transA&&r.transB?o="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?o="value += _A_T(a) * _B(b);":!r.transA&&r.transB?o="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(o="value += _A(a) * _B(b);");let c=s.length,f=e.length===3?`int c[${e[2].dims.length}];`:"",d=e.length===3?"bcastIndices_C(indices, c);":"",h=e.length===3?"value += beta * _C(c);":"",p=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${f}

          copyVec(indices, a);
          copyVec(indices, b);
          ${d}

          float value = 0.0;
          for (int k=0; k<${l}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${o}
          }

          value = value * alpha;
          ${h}
          return value;
      }`;return B(N({},t),{output:{dims:s,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p})},E3=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),AM,SM,T3,I3,A3,S3,D3,Eq=ee(()=>{"use strict";Xr(),tt(),AM=(t,e,r)=>(D3(e),[t.run(A3(t,e,r),e)]),SM=t=>{let e=t.attributes.getFloat("scale"),r=t.attributes.getFloats("bias");return Xt({scale:e,bias:r})},T3={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},I3=(t,e,r,n)=>{let i=r[0].dims.slice(),a=i.length,u=`
      ${S3(n.bias.length)}
      float process(int indices[${a}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return B(N({},e),{output:{dims:i,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:u})},A3=(t,e,r)=>{let n=B(N({},T3),{cacheHint:r.cacheKey});return B(N({},n),{get:()=>I3(t,n,e,r)})},S3=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let r=0;r<t;++r)r===0?e.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===t-1?e.push(`	else { return bias[${r}]; }`):e.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return e.push("	}"),e.join(`
`)},D3=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),DM,CM,xy,C3,O3,P3,M3,N3,R3,Tq=ee(()=>{"use strict";ir(),tt(),DM=(t,e,r)=>{R3(e);let n=t.run(O3(e[0]),e);return[t.run(N3(t,e[0],r,n.dims),[e[0],n,e[1],e[2]])]},CM=t=>t.attributes.getFloat("epsilon",1e-5),xy={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},C3=(t,e)=>{let r=e.dims.slice(),n=r[1],i=r[2]*r[3],a=[r[0],n],u=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${i});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${i});

        return v;
      }`;return B(N({},t),{output:{dims:a,type:e.type,textureType:4},shaderSource:u})},O3=t=>B(N({},xy),{get:()=>C3(xy,t)}),P3={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},M3=(t,e,r,n,i)=>{let a=Je(t.session.backend.glContext.version),[u,s]=t.calculateTextureWidthAndHeight(i,4),[l,o]=[u/4,s],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${l}, ${o});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return B(N({},e),{output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:c})},N3=(t,e,r,n)=>{let i=B(N({},P3),{cacheHint:`${r}`});return B(N({},i),{get:()=>M3(t,i,e,r,n)})},R3=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],r=t[1],n=t[2];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1)throw new Error("Invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function Iq(t,e){let r=t[0].dims[1],n=t[0].dims.length,i=-Math.floor((e.size-1)/2),a=Math.ceil((e.size-1)/2),u=`float(${e.alpha}) / float(${e.size})`,s=`float(${e.bias})`,l=`float(${e.beta})`,o=`
    float process(int indices[${n}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${i}; i <= ${a}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${r}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${s} + ${u} * square_sum, ${l});
    }`;return B(N({},Cv),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:o})}function Aq(t,e){return B(N({},Cv),{cacheHint:e.cacheKey,get:()=>Iq(t,e)})}var OM,PM,Cv,F3,Sq=ee(()=>{"use strict";Xr(),tt(),OM=(t,e,r)=>(F3(e),[t.run(Aq(e,r),e)]),PM=t=>{let e=t.attributes.getFloat("alpha",1e-4),r=t.attributes.getFloat("beta",.75),n=t.attributes.getFloat("bias",1),i=t.attributes.getInt("size");return Xt({alpha:e,beta:r,bias:n,size:i})},Cv={name:"LRN",inputNames:["X"],inputTypes:[0]},F3=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),k3,iv,MM,NM,RM,L3,B3,$3,V3,j3,U3,H3,z3,Dq=ee(()=>{"use strict";Xr(),mt(),ir(),tt(),k3={name:"Pad",inputNames:["A"],inputTypes:[0]},iv=(t,e,r)=>($3(e),[t.run(B(N({},k3),{cacheHint:r.cacheKey,get:()=>B3(t,e[0],r)}),e)]),MM=t=>{let e=t.attributes.getString("mode","constant"),r=t.attributes.getFloat("value",0),n=t.attributes.getInts("pads");return Xt({mode:e,value:r,pads:n})},NM=(t,e,r)=>{V3(e);let n=L3(t,e,r);return iv(t,[e[0]],n)},RM=t=>t.attributes.getString("mode","constant"),L3=(t,e,r)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let n=Array.from(e[1].integerData),i=e.length>=3?e[2].floatData[0]:0;return Xt({mode:r,pads:n,value:i})},B3=(t,e,r)=>{let n=Fe.padShape(e.dims.slice(),r.pads),i=n.length,a=`
      ${j3(t,e,r)}
      float process(int[${i}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:e.type,textureType:0},shaderSource:a}},$3=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},V3=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},j3=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[i,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=Fe.computeStrides(e.dims);switch(r.mode){case"constant":return U3(n,e.dims,u,i,a,r.pads,r.value);case"reflect":return H3(n,e.dims,u,i,a,r.pads);case"edge":return z3(n,e.dims,u,i,a,r.pads);default:throw new Error("Invalid mode")}},U3=(t,e,r,n,i,a,u)=>{let s=e.length,l="";for(let o=s-1;o>=0;--o)l+=`
        k = m[${o}] - ${a[o]};
        if (k < 0)  return constant;
        if (k >= ${e[o]}) return constant;
        offset += k * ${r[o]};
        `;return`
      float padA(int m[${s}]) {
        const float constant = float(${u});
        int offset = 0;
        int k = 0;
        ${l}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},H3=(t,e,r,n,i,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[l]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[l]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[l]};
        `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},z3=(t,e,r,n,i,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0)  k = 0;
        if (k >= ${e[l]}) k = ${e[l]-1};
        offset += k * ${r[l]};
      `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${i});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),FM,kM,_y,LM,BM,$M,VM,Ey,Ty,G3,Iy,jM,$c,Ay,Vc,W3,Cq=ee(()=>{"use strict";Xr(),mt(),tt(),FM=(t,e,r)=>{$c(e);let n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(B(N({},n),{get:()=>_y(e,n,!1,r)}),e)]},kM=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInt("count_include_pad",0)!==0,i=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),u=t.attributes.getInts("pads",[]);if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Xt({autoPad:e,ceilMode:r,countIncludePad:n,kernelShape:i,strides:a,pads:u})},_y=(t,e,r,n)=>{let[i,a]=Ty(t,n,r),u=Fe.size(i.kernelShape),s="value += _X(x);",l="";i.countIncludePad?l+=`value /= float(${u});`:l+=`value /= float(${u} - pad);`;let o=`
        ${Ay(t[0].dims,i,s,l,"0.0")}
      `;return B(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:o})},LM=(t,e,r)=>{$c(e);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[t.run(B(N({},n),{get:()=>_y(e,n,!0,r)}),e)]},BM=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return Xt({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},$M=(t,e,r)=>{$c(e);let n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(B(N({},n),{get:()=>Ey(e,n,!1,r)}),e)]},VM=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInts("kernel_shape"),i=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),u=t.attributes.getInt("storage_order",0),s=t.attributes.getInts("dilations",[]);if(u!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Xt({autoPad:e,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:i,pads:a,storageOrder:u,dilations:s})},Ey=(t,e,r,n)=>{let[i,a]=Ty(t,n,r),u=`
      value = max(_X(x), value);
    `,s="",l=`
      ${Ay(t[0].dims,i,u,s,"-1e5")}
    `;return B(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:l})},Ty=(t,e,r)=>{let n=t[0].dims.slice(),i=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),u=e.strides.slice(),s=i?e.dilations.slice():[],l=e.pads.slice();Vh.adjustPoolAttributes(r,n,a,u,s,l);let o=Vh.computePoolOutputShape(r,n,u,s,a,l,e.autoPad),c=Object.assign({},e);return i?Object.assign(c,{kernelShape:a,strides:u,pads:l,dilations:s,cacheKey:e.cacheKey}):Object.assign(c,{kernelShape:a,strides:u,pads:l,cacheKey:e.cacheKey}),[c,o]},G3={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},Iy={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},jM=(t,e)=>($c(e),[t.run(B(N({},Iy),{get:()=>Ey(e,Iy,!0,G3)}),e)]),$c=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},Ay=(t,e,r,n,i)=>{let a=t.length;if(e.kernelShape.length<=2){let u=e.kernelShape[e.kernelShape.length-1],s=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],o=e.pads[e.pads.length-1],c=t[a-1],f="",d="",h="";if(l+o!==0?f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            if (x[${a} - 1] < 0 || x[${a} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            ${r}
          }`,e.kernelShape.length===2){let p=e.kernelShape[e.kernelShape.length-2],m=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],x=e.pads[e.pads.length-2],y=t[a-2];v+x!==0?d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
              if (x[${a} - 2] < 0 || x[${a} - 2] >= ${y}) {
                pad+= ${u};
                continue;
              }
          `:d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
            `,h=`
          }
        `}return`
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);

          float value = ${i};
          int pad = 0;
          ${d}
          ${f}
          ${h}
          ${n}
          return value;
        }
      `}else{let u=Fe.size(e.kernelShape),s=Fe.computeStrides(e.kernelShape),l=s.length,o=e.pads.length,c=W3(l),f=Vc(t,"inputDims"),d=Vc(e.pads,"pads"),h=Vc(s,"kernelStrides"),p=Vc(e.strides,"strides"),m=e.pads.reduce((x,y)=>x+y),v="";return m?v=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:v=`
          }
          ${r}
        `,`
        ${c}
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);
          int offset[${l}];
          int pads[${o}];
          int inputDims[${a}];
          int kernelStrides[${l}];
          int strides[${l}];
          ${d}
          ${f}
          ${p}
          ${h}

          float value = ${i};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${u}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${a} - ${l}; j < ${a}; j++) {
              x[j] = indices[j] * strides[j - ${a} + ${l}]
                + offset[j - ${a} + ${l}] - pads[j - 2];
              ${v}
          }
          ${n}

          return value;
        }
      `}},Vc=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=`
      ${e}[${n}] = ${t[n]};
    `;return r},W3=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),ta,na,q3,X3,UM,HM,zM,GM,WM,qM,XM,Oq=ee(()=>{"use strict";Xr(),Wh(),mt(),tt(),ta=(t,e,r,n,i)=>{X3(e);let a={name:n,inputNames:["A"],inputTypes:[0]};return[t.run(B(N({},a),{cacheHint:r.cacheKey,get:()=>q3(t,e,r,n,i,a)}),e)]},na=t=>{let e=t.attributes.getInts("axes",[]),r=t.attributes.getInt("keepdims",1)===1;return Xt({axes:e,keepDims:r})},q3=(t,e,r,n,i,a)=>{let u=[],s=e[0].dims.length||1,l=[],o=Fe.normalizeAxes(r.axes,e[0].dims.length),c=i(e,o),f=c[1];for(let h=0;h<e[0].dims.length;h++)o.indexOf(h)>=0||o.length===0?(r.keepDims&&u.push(1),f=`
          for(int j${h} = 0; j${h} < ${e[0].dims[h]}; j${h}++) {
            inputIdx[${h}] = j${h};
            ${f}
          }`):(l.push(`inputIdx[${h}] = outputIdx[${u.length}];`),u.push(e[0].dims[h]));let d=`
      float process(int outputIdx[${u.length||1}]) {
        float value;                 // final result
        int inputIdx[${s}];      // addressing input data
        ${l.join(`
`)}
        ${c[0]}       // init ops for reduce max/min
        ${f}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return B(N({},a),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:d})},X3=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(af.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},UM=(t,e,r)=>ta(t,e,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),HM=(t,e,r)=>ta(t,e,r,"ReduceMean",(n,i)=>{let a=1;for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&(a*=n[0].dims[u]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${a}.;`]}),zM=(t,e,r)=>ta(t,e,r,"ReduceMax",(n,i)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),GM=(t,e,r)=>ta(t,e,r,"ReduceMin",(n,i)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(i.indexOf(u)>=0||i.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),WM=(t,e,r)=>ta(t,e,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),qM=(t,e,r)=>ta(t,e,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),XM=(t,e,r)=>ta(t,e,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),YM,Pq=ee(()=>{"use strict";mt(),YM=(t,e)=>{let r=Fe.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],r)]:[t.reshapeUnpacked(e[0],r)]}}),Sy,av,ZM,KM,Qc,Y3,sv,Uh,QM=ee(()=>{"use strict";Xr(),ir(),tt(),Sy={name:"Upsample",inputNames:["X"],inputTypes:[0]},av=(t,e,r)=>(sv(e,r),[t.run(B(N({},Sy),{cacheHint:r.cacheKey,get:()=>Y3(t,e,r)}),e)]),ZM=t=>Qc(t,7),KM=t=>Qc(t,9),Qc=(t,e)=>{let r=e>=10,n=t.attributes.getString("mode","nearest");if(n!=="nearest"&&n!=="linear"&&(e<11||n!=="cubic"))throw new Error(`unrecognized mode: ${n}`);let i=[];e<9&&(i=t.attributes.getFloats("scales"),Uh(i,n,r));let a=t.attributes.getFloat("extrapolation_value",0),u=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u)===-1)throw new Error(`coordinate_transform_mode '${u}' is not supported`);let s=u==="tf_crop_and_resize",l=s,o=n==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(o)===-1)throw new Error(`nearest_mode '${o}' is not supported`);let c=t.attributes.getFloat("cubic_coeff_a",-.75),f=t.attributes.getInt("exclude_outside",0)!==0;if(f&&n!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let d=e<11?!0:n==="nearest"&&u==="asymmetric"&&o==="floor",h=0,p=0,m=0;return e>10?t.inputs.length>2?(h=1,p=2,m=3):(p=1,m=2):e===9&&(p=1),Xt({opset:e,isResize:r,mode:n,scales:i,extrapolationValue:a,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:s,nearestMode:o,cubicCoefficientA:c,excludeOutside:f,useNearest2xOptimization:d,roiInputIdx:h,scalesInputIdx:p,sizesInputIdx:m})},Y3=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[i,a]=t.calculateTextureWidthAndHeight(e[0].dims,0),u=e[0].dims.map((m,v)=>Math.floor(m*r.scales[v])),[s,l]=t.calculateTextureWidthAndHeight(u,0),o=u.length,c=new Array(o),f=new Array(o),d=`
      int output_pitches[${o}];
      int input_pitches[${o}];
      `;for(let m=o-1;m>=0;m--)c[m]=m===o-1?1:c[m+1]*u[m+1],f[m]=m===o-1?1:f[m+1]*e[0].dims[m+1],d+=`
        output_pitches[${m}] = ${c[m]};
        input_pitches[${m}] = ${f[m]};
        `;let h=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${i}, ${a});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,p=r.mode==="nearest"?`
    ${h}
    float process(int indices[${o}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int d, m;
      for (int dim = 0; dim < ${o}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:o===4?`
    ${h}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return B(N({},Sy),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:p,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(m=>Math.ceil(m))}]})},sv=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},Uh=(t,e,r)=>{if(r){for(let n of t)if(n<=0)throw new Error("Scale value should be greater than 0.")}else for(let n of t)if(n<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}),Mh,uv,JM,eN,Z3,K3,Q3,J3,Mq=ee(()=>{"use strict";ir(),tt(),Ii(),Eu(),QM(),Mh={name:"Resize",inputNames:["A"],inputTypes:[2]},uv=(t,e,r)=>(sv(e,r),[t.run(B(N({},Mh),{cacheHint:r.cacheKey,get:()=>Z3(t,e,r)}),e)]),JM=t=>Qc(t,10),eN=t=>Qc(t,11),Z3=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[i,a]=K3(e,r);if(i.every(y=>y===1)&&r.coordinateTransformMode!=="tf_crop_and_resize")return B(N({},Mh),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${n.texture2D}(X, TexCoords);
                    ${n.output} = v;
                }`});let u=a.length;if(u<2)throw new Error(`output dimension should be at least 2, but got ${u}`);let s=a[u-2],l=a[u-1],o=e[0].dims;if(u!==o.length)throw new Error(`output dimension should match input ${o.length}, but got ${u}`);let c=o[u-2],f=o[u-1],d=i[u-2],h=i[u-1],p="";if(r.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${s}.0 - 1.0, ${l}.0 - 1.0,
                            ${s}.0 - 1.0);
                        vec4 original = vec4(${f}.0 - 1.0, ${c}.0 - 1.0, ${f}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let m=ia(u),v=nf(),x=`
            const vec2 inputWH = vec2(${c}.0, ${f}.0);
            const vec4 scaleWHWH = vec4(float(${d}), float(${h}), float(${d}), float(${h}));
            ${v}
            ${p}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${m} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${s-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${n.output} = vec4(newValue);
            }
        `;return B(N({},Mh),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:x})},K3=(t,e)=>{let r=t[0].dims,n=e.scales,i;if(n.length===0){let u=t[e.scalesInputIdx];if(u&&u.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");n=Q3(u,e.mode,e.isResize)}else{let s=t[e.sizesInputIdx];if(!s||s.size===0)throw new Error("Either scales or sizes MUST be provided as input.");i=Array.from(s.integerData),n=J3(i,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let a=i||r.map((u,s)=>Math.floor(u*n[s]));return[n,a]},Q3=(t,e,r)=>{let n=Array.from(t.floatData);return Uh(n,e,r),n},J3=(t,e,r,n)=>{let i=e.length,a=new Array(i);for(let u=0,s=i;u<s;u++)if(e[u]===0){if(t[u]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");a[u]=1}else a[u]=t[u]/e[u];return Uh(a,r,n),a}}),tN,eP,Nq=ee(()=>{"use strict";_u(),tN=(t,e)=>(eP(e),[new Vn([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),eP=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),Nh,rN,nN,Dy,tP,oN,rP,nP,Rq=ee(()=>{"use strict";Xr(),Wh(),mt(),tt(),Nh={name:"Slice",inputNames:["A"],inputTypes:[0]},rN=(t,e,r)=>(tP(e),[t.run(B(N({},Nh),{cacheHint:r.cacheKey,get:()=>Dy(t,e[0],r)}),e)]),nN=t=>{let e=t.attributes.getInts("starts"),r=t.attributes.getInts("ends"),n=t.attributes.getInts("axes",[]);return Xt({starts:e,ends:r,axes:n})},Dy=(t,e,r)=>{let n=r.axes.length===0?e.dims.slice(0).map((c,f)=>f):r.axes,i=Fe.normalizeAxes(n,e.dims.length),a=r.starts.map((c,f)=>c>e.dims[i[f]]-1?e.dims[i[f]]:Fe.normalizeAxis(c,e.dims[i[f]])),u=r.ends.map((c,f)=>c>e.dims[i[f]]-1?e.dims[i[f]]:Fe.normalizeAxis(c,e.dims[i[f]])),s=e.dims.slice(),l=[];for(let c=0;c<i.length;c++)s[i[c]]=u[c]-a[c],a[c]>0&&l.push(`outputIdx[${i[c]}] += ${a[c]};`);let o=`
      float process(int outputIdx[${s.length}]) {
        ${l.join(`
      `)}
        return _A(outputIdx);
      }`;return B(N({},Nh),{output:{dims:s,type:e.type,textureType:0},shaderSource:o})},tP=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(af.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},oN=(t,e)=>{nP(e);let r=rP(t,e);return[t.run(B(N({},Nh),{cacheHint:r.cacheKey,get:()=>Dy(t,e[0],r)}),[e[0]])]},rP=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(u=>u!==1))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(e[1].integerData),n=Array.from(e[2].integerData),i=e.length>=4?Array.from(e[3].integerData):[],a=`${i};${r};${n}`;return{starts:r,ends:n,axes:i,cacheKey:a}},nP=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),Cy,Oy,Py,iN,aN,sN,uN,My,oP,iP,aP,Ny,Fq=ee(()=>{"use strict";Xr(),mt(),ir(),tt(),Dv(),Cy={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},Oy={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},Py={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},iN=(t,e,r)=>{Ny(e);let n=e[0].dims.slice(),i=Fe.normalizeAxis(r.axis,n.length),a=Fe.sizeToDimension(n,i),u=Fe.sizeFromDimension(n,i);return My(t,e,r,a,u)},aN=t=>Xt({axis:t.attributes.getInt("axis",1)}),sN=t=>Xt({axis:t.attributes.getInt("axis",-1)}),uN=(t,e,r)=>{Ny(e);let n=e[0].dims.slice(),i=Fe.normalizeAxis(r.axis,n.length),a=n.length,u=i!==a-1,s=[],l=[],o=[],c;u&&(l=Array.from({length:a}).map((p,m)=>m),l[i]=a-1,l[a-1]=i,l.map(p=>s.push(n[p])),c=Xt({perm:l}),o=tf(t,e,c));let f=u?Fe.sizeToDimension(s,a-1):Fe.sizeToDimension(n,a-1),d=u?Fe.sizeFromDimension(s,a-1):Fe.sizeFromDimension(n,a-1),h=My(t,u?o:e,r,f,d);return u?tf(t,h,c):h},My=(t,e,r,n,i)=>{let a=oP(t,e[0],n,i,[n]),u=t.run(B(N({},Cy),{cacheHint:r.cacheKey,get:()=>a}),e),s=iP(t,e[0],n,i,a.output.dims,[n]),l=t.run(B(N({},Oy),{cacheHint:r.cacheKey,get:()=>s}),[e[0],u]),o=aP(t,e[0],n,i,a.output.dims,s.output.dims);return[t.run(B(N({},Py),{cacheHint:r.cacheKey,get:()=>o}),[e[0],u,l])]},oP=(t,e,r,n,i)=>{let[a,u]=t.calculateTextureWidthAndHeight(e.dims,0),s=i.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i.length!==1)throw new Error("Dimensionality of the output should be 1");if(i[0]!==r)throw new Error("Shape of the output should be equal to logical row count");let l=Je(t.session.backend.glContext.version),o=`
      float process(int[${s}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${u} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${u})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return B(N({},Cy),{output:{dims:i,type:e.type,textureType:0},shaderSource:o})},iP=(t,e,r,n,i,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=a.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(i.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let o=Je(t.session.backend.glContext.version),c=`
      float process(int[${l}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${o.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${u}, ${s}))) - max);
        }

        return norm_factor;
      }`;return B(N({},Oy),{output:{dims:a,type:e.type,textureType:0},shaderSource:c})},aP=(t,e,r,n,i,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=e.dims.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(i.length!==1||a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(i[0]!==r||a[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let o=`
      float process(int[${l}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${u}, ${s});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return B(N({},Py),{output:{dims:e.dims,type:e.type,textureType:0},shaderSource:o})},Ny=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),Ry,lN,cN,sP,uP,lP,kq=ee(()=>{"use strict";Xr(),mt(),tt(),Ry={name:"Split",inputNames:["A"],inputTypes:[0]},lN=(t,e,r)=>{lP(e);let n=Fe.normalizeAxis(r.axis,e[0].dims.length),i=sP(t,e,n,r),a=[];for(let u=0;u<i;++u)a.push(t.run(B(N({},Ry),{cacheHint:`${r.cacheKey};${u}`,get:()=>uP(t,e[0],r,n,u)}),e));return a},cN=t=>{let e=t.attributes.getInt("axis",0),r=t.attributes.getInts("split",[]),n=t.outputs.length;return Xt({axis:e,split:r,numOutputs:n})},sP=(t,e,r,n)=>{let[,i]=Wy.splitShape(e[0].dims,r,n.split,n.numOutputs);return i.length},uP=(t,e,r,n,i)=>{let[a,u]=Wy.splitShape(e.dims,n,r.split,r.numOutputs),s=u[i],l=a[i],o=`
      float process(int indices[${l.length}]) {
        indices[${n}] += ${s};
        return _A(indices);
      }
    `;return B(N({},Ry),{cacheHint:`${r.cacheKey}:${i}`,output:{dims:l,type:e.type,textureType:0},shaderSource:o})},lP=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),lv,fN,dN,cP,fP,Lq=ee(()=>{"use strict";mt(),lv=(t,e,r)=>{cP(e);let n=Fe.squeezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},fN=(t,e)=>(fP(e),lv(t,[e[0]],Array.from(e[1].integerData))),dN=t=>t.attributes.getInts("axes"),cP=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},fP=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),hN,dP,hP,Bq=ee(()=>{"use strict";ir(),tt(),hN=(t,e)=>{hP(e);let r={name:"Sum",inputNames:e.map((n,i)=>`X${i}`),inputTypes:new Array(e.length).fill(0)};return[t.run(B(N({},r),{get:()=>dP(t,e,r)}),e)]},dP=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),i=e[0].dims.slice(),a=`
      void main() {
        vec4 result = ${e.map((u,s)=>`${n.texture2D}(X${s},TexCoords)`).join(" + ")};
        ${n.output} = result;
      }
    `;return B(N({},r),{output:{dims:i,type:e[0].type,textureType:0},hasMain:!0,shaderSource:a})},hP=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let r=1;r<t.length;r++){if(e!==t[r].dims.length)throw new Error("Input shapes are mismatched.");for(let n=0;n<e;n++)if(t[0].dims[n]!==t[r].dims[n])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let r=1;r<t.length;r++)if(t[0].type!==t[r].type)throw new Error("Input types are not matched.")}}),pN,pP,gP,$q=ee(()=>{"use strict";Wh(),tt(),pN=(t,e)=>{gP(e);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run(B(N({},r),{get:()=>pP(t,e,r)}),e)]},pP=(t,e,r)=>{let n=e[0].dims.slice(),i=new Array(n.length),a=[];for(let l=0;l<n.length;l++)i[l]=n[l]*e[1].numberData[l],a.push(`inputIdx[${l}] = int(mod(float(outputIdx[${l}]), ${n[l]}.));`);let u=i.length,s=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${u}];
        ${a.join(`
`)}
        return _A(inputIdx);
      }
    `;return B(N({},r),{output:{dims:i,type:e[0].type,textureType:0},shaderSource:s})},gP=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(af.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),cv,gN,mN,mP,yP,Vq=ee(()=>{"use strict";mt(),cv=(t,e,r)=>{mP(e);let n=Fe.unsqueezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},gN=(t,e)=>(yP(e),cv(t,[e[0]],Array.from(e[1].integerData))),mN=t=>t.attributes.getInts("axes"),mP=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},yP=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),yN,jq=ee(()=>{"use strict";DW(),UW(),HW(),GW(),Sv(),vq(),bq(),wq(),xq(),_q(),Eq(),Tq(),Sq(),Iv(),Dq(),Cq(),Oq(),Pq(),Mq(),Nq(),Rq(),Fq(),kq(),Lq(),Bq(),$q(),Dv(),rM(),Vq(),QM(),yN=[["Abs","","6+",N4],["Acos","","7+",R4],["Add","","7+",h4],["And","","7+",p4],["Asin","","7+",F4],["Atan","","7+",k4],["AveragePool","","7+",FM,kM],["BatchNormalization","","7+",l4,c4],["Cast","","6+",I4,A4],["Ceil","","6+",$4],["Clip","","6-10",Jy,L4],["Clip","","11+",B4],["Concat","","4+",D4,C4],["Conv","","1+",rv,nv],["ConvTranspose","","1+",gM,mM],["Cos","","7+",V4],["Div","","7+",g4],["Dropout","","7+",ev],["DepthToSpace","","1+",vM,bM],["Equal","","7+",m4],["Elu","","6+",j4,U4],["Exp","","6+",H4],["Flatten","","1+",wM,xM],["Floor","","6+",z4],["FusedConv","com.microsoft","1+",rv,nv],["Gather","","1+",_M,EM],["Gemm","","7-10",ov,TM],["Gemm","","11+",ov,IM],["GlobalAveragePool","","1+",LM,BM],["GlobalMaxPool","","1+",jM],["Greater","","7+",y4],["Identity","","1+",ev],["ImageScaler","","1+",AM,SM],["InstanceNormalization","","6+",DM,CM],["LeakyRelu","","6+",G4,W4],["Less","","7+",v4],["LRN","","1+",OM,PM],["Log","","6+",q4],["MatMul","","1+",sM,uM],["MaxPool","","1+",$M,VM],["Mul","","7+",b4],["Neg","","6+",X4],["Not","","1+",Y4],["Or","","7+",w4],["Pad","","2-10",iv,MM],["Pad","","11+",NM,RM],["Pow","","7+",x4],["PRelu","","7+",_4],["ReduceLogSum","","1+",qM,na],["ReduceMax","","1+",zM,na],["ReduceMean","","1+",HM,na],["ReduceMin","","1+",GM,na],["ReduceProd","","1+",WM,na],["ReduceSum","","1-12",UM,na],["ReduceSumSquare","","1+",XM,na],["Relu","","6+",Z4],["Reshape","","5+",YM],["Resize","","10",uv,JM],["Resize","","11+",uv,eN],["Shape","","1+",tN],["Sigmoid","","6+",K4],["Sin","","7+",Q4],["Slice","","10+",oN],["Slice","","1-9",rN,nN],["Softmax","","1-12",iN,aN],["Softmax","","13+",uN,sN],["Split","","2-12",lN,cN],["Sqrt","","6+",J4],["Squeeze","","1-12",lv,dN],["Squeeze","","13+",fN],["Sub","","7+",E4],["Sum","","6+",hN],["Tan","","7+",eM],["Tanh","","6+",tM],["Tile","","6+",pN],["Transpose","","1+",tf,yM],["Upsample","","7-8",av,ZM],["Upsample","","9",av,KM],["Unsqueeze","","1-12",cv,mN],["Unsqueeze","","13+",gN],["Xor","","7+",T4]]});function Uq(t){let e={},r;for(;(r=fv.exec(t))!==null;){let n=r[3].split(",").map(i=>{let a=i.trim().split(" ");return a&&a.length===2?{type:a[0],name:a[1]}:null}).filter(i=>i!==null);e[r[2]]={params:n,body:r[4]}}for(let n in e){let i=vN.replace("__FUNC__",n),a=new RegExp(i,"gm");for(;(r=a.exec(t))!==null;){let u=r[1],s=r[2],l=r[3].split(","),o=u?`${u} ${s};`:"",c=e[n].body,f="";e[n].params.forEach((h,p)=>{h&&(f+=`${h.type} ${h.name} = ${l[p]};
`)}),c=`${f}
 ${c}`,c=c.replace("return",`${s} = `);let d=`
      ${o}
      {
        ${c}
      }
      `;t=t.replace(r[0],d)}}return t=t.replace(fv,""),t}var fv,vN,Hq=ee(()=>{"use strict";fv=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,vN="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Gc(t,e){let r=[],n=[],i=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||i?null:zq(e,t).sort(),u=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[u]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[u]==null||a[u]>s)&&t[s]===1&&(r.push(t[s]),n.push(s)),a[u]<=s&&u++}t[s]!==1&&(r.push(t[s]),n.push(s))}return{newShape:r,keptDims:n}}function zq(t,e){let r=e.length;return t=t==null?e.map((n,i)=>i):[].concat(t),$h(t.every(n=>n>=-r&&n<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),$h(t.every(Gq),()=>`All values in axis param must be integers but got axis ${t}`),t.map(n=>n<0?r+n:n)}function Gq(t){return t%1===0}function Wq(t){if(t.length===0)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function vP(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var bN,wN=ee(()=>{"use strict";Do(),mt(),bN=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let r=this.computeTexture(t,e);return e&&e.isPacked&&(r[0]/=2,r[1]/=2),e&&e.reverseWH?[r[1],r[0]]:r}computeTexture(t,e){let r=e&&e.isPacked;if(t.length===0)return r?[2,2]:[1,1];let n=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let u=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((l,o)=>l*o),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((l,o)=>l*o);if(u>n||s>n)dr.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[u,s]}let i=t.slice(0);r&&(n=n*2,i=i.map((u,s)=>s>=i.length-2?i[s]%2===0?i[s]:i[s]+1:i[s]),i.length===1&&(i=[2,i[0]])),i.length!==2&&(i=Gc(i).newShape);let a=Wq(i);return i.length<=1&&a<=n?[1,a]:i.length===2&&i[0]<=n&&i[1]<=n?i:i.length===3&&i[0]*i[1]<=n&&i[2]<=n?[i[0]*i[1],i[2]]:i.length===3&&i[0]<=n&&i[1]*i[2]<=n?[i[0],i[1]*i[2]]:i.length===4&&i[0]*i[1]*i[2]<=n&&i[3]<=n?[i[0]*i[1]*i[2],i[3]]:i.length===4&&i[0]<=n&&i[1]*i[2]*i[3]<=n?[i[0],i[1]*i[2]*i[3]]:r?vP(a/4).map(u=>u*2):vP(a)}}}),xN,qq=ee(()=>{"use strict";mt(),aa(),ir(),wN(),Ii(),xN=class extends Tu{constructor(t){super(t)}getFunctions(){return N(N(N(N(N(N(N({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new fe(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new fe(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputPacked1DCoords(e,r);break;case 2:n[i]=this.getOutputPacked2DCoords(e,r);break;case 3:n[i]=this.getOutputPacked3DCoords(e,r);break;default:n[i]=this.getOutputPackedNDCoords(e,r)}let a=`
      void setOutput(vec4 val) {
        ${Je(this.context.glContext.version).output} = val;
      }
    `,u="floatTextureSetRGBA";return n[u]=new fe(a),n}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},i="getOutputCoords";switch(e.length){case 0:n[i]=this.getOutputScalarCoords();break;case 1:n[i]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[i]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[i]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[i]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[i]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[i]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let a=`
        void setOutput(float val) {
          ${Je(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,u="floatTextureSetR";return n[u]=new fe(a),n}getOutputScalarCoords(){return new fe(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new fe(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new fe(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new fe(n))}getOutputPacked2DCoords(t,e){let r="";if(Uc.arraysEqual(t,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new fe(r);let n=e,i=Math.ceil(t[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${i}) * 2;
          int c = 2 * (index / ${i});

          return ivec2(r, c);
        }
      `,new fe(r)}getOutputPacked3DCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[2]/2),i=n*Math.ceil(t[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${i};
          index -= b * ${i};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new fe(a)}getOutputPackedNDCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[t.length-1]/2),i=n*Math.ceil(t[t.length-2]/2),a=i,u="",s="b, r, c";for(let o=2;o<t.length-1;o++)a*=t[t.length-o-1],u=`
      int b${o} = index / ${a};
      index -= b${o} * ${a};
    `+u,s=`b${o}, `+s;let l=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${i};
        index -= b * ${i};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${t.length}(${s});
      }
    `;return new fe(l)}getOutputUnpacked1DCoords(t,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new fe(r)}getOutputUnpacked2DCoords(t,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new fe(r)}getOutputUnpacked3DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new fe(r)}getOutputUnpacked4DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new fe(r)}getOutputUnpacked5DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2","d3"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new fe(r)}getOutputUnpacked6DCoords(t,e){let r="",n=t.length,i=null;n<2&&(i=[]),i=new Array(n-1),i[n-2]=t[n-1];for(let s=n-3;s>=0;--s)i[s]=i[s+1]*t[s+1];let a=["r","c","d","d2","d3","d4"],u=i.map((s,l)=>{let o=`int ${a[l]} = index / ${s}`,c=l===i.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${o}; ${c};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new fe(r)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new fe(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new fe(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new fe(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new fe(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=Je(this.context.glContext.version);return t[e]=new fe(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n],a=hy(r);i.isPacked?t[a]=this.getPackedSamplerFromInput(a,r,i):t[a]=this.getUnpackedSamplerFromInput(a,r,i);let u=hW(r);i.unpackedShape.length<=e.unpackedShape.length&&(i.isPacked?t[u]=this.getPackedSamplerAtOutputCoords(u,i,e,r):t[u]=this.getUnpackedSamplerAtOutputCoords(u,i,e,r))}),t}getPackedSamplerAtOutputCoords(t,e,r,n){let i=e.unpackedShape,a=r.unpackedShape,u=hy(n),s=i.length,l=a.length,o=Xo.getBroadcastDims(i,a),c=ia(l),f=l-s,d,h=xu();s===0?d="":l<2&&o.length>=1?d="coords = 0;":d=o.map(I=>`coords.${h[I+f]} = 0;`).join(`
`);let p="";l<2&&s>0?p="coords":p=i.map((I,C)=>`coords.${h[C+f]}`).join(", ");let m="return outputValue;",v=Fe.size(i)===1,x=Fe.size(a)===1;if(s===1&&!v&&!x)m=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v&&!x)l===1?m=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:m=`
          return vec4(outputValue.x);
        `;else if(o.length){let I=s-2,C=s-1;o.indexOf(I)>-1&&o.indexOf(C)>-1?m="return vec4(outputValue.x);":o.indexOf(I)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":o.indexOf(C)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}let y=`
        int lastDim = coords.${h[l-1]};
        coords.${h[l-1]} = coords.${h[l-2]};
        coords.${h[l-2]} = lastDim;
      `,_=`
      vec4 ${t}() {
        ${c} coords = getOutputCoords();
        ${y}
        ${d}
        vec4 outputValue = ${u}(${p});
        ${m}
      }
    `;return new fe(_,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,r,n){let i=[r.width,r.height],a=[e.width,e.height],u=e.unpackedShape.length,s=r.unpackedShape.length,l=e.unpackedShape,o=r.unpackedShape,c=hy(n);if(u===s&&Uc.arraysEqual(a,i)){let y=`
          float ${t}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new fe(y,["coordinates.sampleTexture"])}let f=ia(s),d=Xo.getBroadcastDims(l,o),h=s-u,p,m=xu();u===0?p="":s<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${m[y+h]} = 0;`).join(`
`);let v="";s<2&&u>0?v="coords":v=e.unpackedShape.map((y,_)=>`coords.${m[_+h]}`).join(", ");let x=`
        float ${t}() {
          ${f} coords = getOutputCoords();
          ${p}
          return ${c}(${v});
        }
      `;return new fe(x,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,r);case 2:return this.getPackedSampler2D(t,e,r);case 3:return this.getPackedSampler3D(t,e,r);default:return this.getPackedSamplerND(t,e,r)}}getUnpackedSamplerFromInput(t,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(t,e,r);case 1:return this.getUnpackedSampler1D(t,e,r);case 2:return this.getUnpackedSampler2D(t,e,r);case 3:return this.getUnpackedSampler3D(t,e,r);case 4:return this.getUnpackedSampler4D(t,e,r);case 5:return this.getUnpackedSampler5D(t,e,r);case 6:return this.getUnpackedSampler6D(t,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(t,e){let r=Je(this.context.glContext.version),n=`
          vec4 ${t}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new fe(n)}getPackedSampler1D(t,e,r){let n=[r.width,r.height],i=[n[1],n[0]],a=Je(this.context.glContext.version),u=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${i[0]}, ${i[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new fe(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],a=Je(this.context.glContext.version),u=i[0],s=i[1];if(i!=null&&Uc.arraysEqual(n,i)){let f=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${u}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new fe(f)}let l=i,o=Math.ceil(n[1]/2),c=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l[1]}, ${l[0]}, ${o}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new fe(c,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,r){let n=r.unpackedShape,i=[r.width,r.height],a=[i[0],i[1]],u=Je(this.context.glContext.version);if(n[0]===1){let d=n.slice(1),h=[1,2],p=kc(n,d),m=["b","row","col"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=this.getPackedSamplerFromInput(t,e,v),y=`${x.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${Lc(m,h)});
      } `;return new fe(y,x.dependencies)}let s=a[0],l=a[1],o=Math.ceil(n[2]/2),c=o*Math.ceil(n[1]/2),f=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${s}, ${c}, ${o}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new fe(f,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,r){let n=r.unpackedShape,i=n.length,a=[r.width,r.height],u=Je(this.context.glContext.version),s=[a[0],a[1]],l=s[1],o=s[0],c=Math.ceil(n[i-1]/2),f=c*Math.ceil(n[i-2]/2),d="int b, int row, int col",h=`b * ${f} + (row / 2) * ${c} + (col / 2)`;for(let m=2;m<i-1;m++)d=`int b${m}, `+d,f*=n[i-m-1],h=`b${m} * ${f} + `+h;let p=`vec4 ${t}(${d}) {
      int index = ${h};
      int texR = index / ${o};
      int texC = index - texR * ${o};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${o}, ${l});
      return ${u.texture2D}(${e}, uv);
    }`;return new fe(p)}getUnpackedSamplerScalar(t,e,r){let[n,i]=[r.width,r.height];if(n===1&&i===1){let u=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}let a=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${i});
          vec2 uv = uvFromFlat(${n}, ${i}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new fe(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,r){let n=r.width,i=r.height;if(i===1&&n===1){let u=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new fe(u,["coordinates.sampleTexture"])}if(i===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${i}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}let a=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${n}, ${i}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,r){let n=r.unpackedShape,i=[r.height,r.width];if(i!=null&&Uc.arraysEqual(n,i)){let f=i[1],d=i[0],h=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f}.0, ${d}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(h,["coordinates.sampleTexture"])}let{newShape:a,keptDims:u}=Gc(n),s=a;if(s.length<n.length){let f=kc(n,s),d=JSON.parse(JSON.stringify(r));d.unpackedShape=f;let h=["col","row"],p=`
          ${this.getUnpackedSamplerFromInput(t,e,d).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${Lc(h,u)});
          }
        `;return new fe(p,["coordinates.sampleTexture"])}let l=i[1],o=i[0];if(o===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${o});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(l===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${o});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${o}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let c=`
        float ${t}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${l}, ${o}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,r){let n=r.unpackedShape,i=n[1]*n[2],a=n[2],{newShape:u,keptDims:s}=Gc(n),l=u;if(l.length<n.length){let d=kc(n,l),h=["batch","col","row"],p=JSON.parse(JSON.stringify(r));p.unpackedShape=d;let m=this.getUnpackedSamplerFromInput(t,e,p),v=s.reverse(),x=`
          ${m.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${Lc(h,v)});
          }
        `;return new fe(x,m.dependencies)}let o=r.width,c=r.height,f=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${i} + col * ${a} + row;
            vec2 uv = uvFromFlat(${o}, ${c}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new fe(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,r){let n=r.unpackedShape,i=n[3],a=n[2]*i,u=n[1]*a,s=r.width,l=r.height,o=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${a} +
              depth2 * ${i} + depth;
          vec2 uv = uvFromFlat(${s}, ${l}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(o,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,r){let n=r.unpackedShape,i=n[4],a=n[3]*i,u=n[2]*a,s=n[1]*u,{newShape:l,keptDims:o}=Gc(n);if(l.length<n.length){let h=kc(n,l),p=["row","col","depth","depth2","depth3"],m=JSON.parse(JSON.stringify(r));m.unpackedShape=h;let v=`
          ${this.getUnpackedSamplerFromInput(t,e,m).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${Lc(p,o)});
          }
        `;return new fe(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c=r.width,f=r.height,d=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${s} + col * ${u} + depth * ${a} +
          depth3 * ${i} + depth2;
          vec2 uv = uvFromFlat(${c}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(d,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,r){let n=r.unpackedShape,i=n[5],a=n[4]*i,u=n[3]*a,s=n[2]*u,l=n[1]*s,{newShape:o,keptDims:c}=Gc(n);if(o.length<n.length){let p=kc(n,o),m=["row","col","depth","depth2","depth3","depth4"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=`
            ${this.getUnpackedSamplerFromInput(t,e,v).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${Lc(m,c)});
            }
          `;return new fe(x,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=r.width,d=r.height,h=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${l} + col * ${s} + depth * ${u} +
            depth2 * ${a} + depth3 * ${i} + depth4;
            vec2 uv = uvFromFlat(${f}, ${d}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,r=t.strides,n=t.width,i=t.height,a=[];for(let s=0;s<e-1;++s)a.push(`
        c[${s}] = offset / ${r[s]};`),a.push(`
        offset -= c[${s}] * ${r[s]};`);a.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${i});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new fe(u,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],i=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,a=`_${e}`;t[a]=new fe(this.getValueFromSingle(e,i,n.width,n.height,!1),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a=a+"_T",t[a]=new fe(this.getValueFromSingle(e,i,n.width,n.height,!0),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,r,n,i){let a=`_${t}`;i&&(a=a+"_T");let u=Je(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,r,n,i){let a=`_${t}_Pack`;i&&(a=a+"_T");let u=Je(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${t}, coords);
        }
        `}}}),_N,Xq=ee(()=>{"use strict";aa(),_N=class dv extends Tu{constructor(e){super(e)}getFunctions(){return N(N({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new fe(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new fe(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=dv.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new fe(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=dv.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new fe(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),r=new Uint32Array(e),n=new Uint8Array(e);if(r[0]=3735928559,n[0]===239)return!0;if(n[0]===222)return!1;throw new Error("unknown endianness")}}}),EN,Yq=ee(()=>{"use strict";aa(),ir(),EN=class extends Tu{constructor(t){super(t)}getFunctions(){return N(N({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let t=Je(this.context.glContext.version);return{setFragColor:new fe(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new fe(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),TN,Zq=ee(()=>{"use strict";aa(),TN=class Wc extends Tu{constructor(e){super(e)}getFunctions(){return N(N(N(N(N({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,i)=>{let a=this.context.inputTextureLayouts[i].unpackedShape;if(a.length<=e){let u=a.length,s=e-u,l=`bcastIndices_${n}`,o="";for(let f=0;f<u;++f)o+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l} (int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${o}
        }
        `;r[l]=new fe(c)}}),r}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,i)=>{let a=this.context.inputTextureLayouts[i].shape;if(!(a.length<2||a.length>e)){let u=a.length,s=e-u,l=`bcastMatmulIndices_${n}`,o="";for(let f=0;f<u-2;++f)o+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l}(int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${o}
          realIndices[${u-1}] = bcastedIndices[${e-1}];
          realIndices[${u-2}] = bcastedIndices[${e-2}];
        }
        `;r[l]=new fe(c)}}),r}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=i.length,s=`indicesToOffset_${r}`;e[s]=new fe(Wc.indexToOffsetSingle(s,u,a)),s=`indicesToOffset_${r}_T`,e[s]=new fe(Wc.indexToOffsetSingle(s,u,a.slice().reverse()))}),e}static indexToOffsetSingle(e,r,n){let i="";for(let a=r-1;a>=0;--a)i+=`
        offset += indices[${a}] * ${n[a]};
        `;return`
      int ${e}(int indices[${r}]) {
        int offset = 0;
        ${i}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=i.length,s=`offsetToIndices_${r}`;e[s]=new fe(Wc.offsetToIndicesSingle(s,u,a)),s=`offsetToIndices_${r}_T`,e[s]=new fe(Wc.offsetToIndicesSingle(s,u,a.slice().reverse()))}),e}static offsetToIndicesSingle(e,r,n){let i=[];for(let a=0;a<r-1;++a)i.push(`
      indices[${a}] = offset / ${n[a]};`),i.push(`
        offset -= indices[${a}] * ${n[a]};`);return i.push(`
      indices[${r-1}] = offset;`),`
      void ${e}(int offset, out int indices[${r}]) {
        ${i.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let i=this.context.inputTextureLayouts[n].shape,a=i.length,u=`incrementIndices_${r}`,s="";for(let o=0;o<a;++o)s+=`
        shape[${o}] = ${i[o]};`;let l=`
        void ${u}(int axis, out int indices[${a}]) {
          int shape[${a}];
          ${s};
          for(int i = ${a} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[u]=new fe(l)}),e}}}),IN,Kq=ee(()=>{"use strict";aa(),IN=class extends Tu{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return N(N(N(N({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let i=`${n}Vec`,a="";for(let s=0;s<t;++s)a+=`
          dest[${s}] ${e[n]} src[${s}];
          `;let u=`
        void ${i}(int src[${t}], out int dest[${t}]) {
          ${a}
        }
        `;r[i]=new fe(u)}return r}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<t;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new fe(r)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let r=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new fe(r)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${t-1}];
        `;let r=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new fe(r)}}}}),hv,Qq=ee(()=>{"use strict";qq(),Xq(),Yq(),Zq(),Kq(),hv={encoding:_N,fragcolor:EN,vec:IN,shapeUtils:TN,coordinates:xN}}),AN,Jq=ee(()=>{"use strict";aa(),Hq(),Qq(),ir(),AN=class{constructor(t,e,r,n){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new f4(t,e,r,n),Object.keys(hv).forEach(a=>{let u=new hv[a](this.context);this.libs[a]=u});let i=this.glslLibRoutineDependencyGraph;for(let a in this.libs){let u=this.libs[a].getFunctions();for(let s in u){let l=a+"."+s,o;i[l]?(o=i[l],o.routineBody=u[s].routineBody):(o=new Qy(l,u[s].routineBody),i[l]=o);let c=u[s].dependencies;if(c)for(let f=0;f<c.length;++f)if(i[c[f]])o.addDependency(i[c[f]]);else{let d=new Qy(c[f]);i[c[f]]=d,o.addDependency(d)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${dW(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Uq(e),`${fW(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let r="";for(let n=0;n<e.length;++n)if(e[n].routineBody)r+=e[n].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[n].name}`);return r}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];t.indexOf(n)!==-1&&e.push(this.glslLibRoutineDependencyGraph[r])}),d4.returnOrderedNodes(e)}getUniforms(t,e){let r=[];if(t)for(let n of t)r.push(`uniform sampler2D ${n};`);if(e)for(let n of e)r.push(`uniform ${n.type} ${n.name}${n.arrayLength?`[${n.arrayLength}]`:""};`);return r.join(`
`)}}}),SN,eX=ee(()=>{"use strict";as(),Do(),Jq(),ir(),SN=class{constructor(t,e,r){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,r){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let n=this.glContext.gl,i=t.program;n.useProgram(i);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(a){throw dr.error("ProgramManager",t.programInfo.shaderSource),a}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new AN(this.glContext,t,e,r),i=n.preprocess(),a=this.compile(i);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}})}compile(t){if(!this.vertexShader){dr.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let n=cW(this.glContext.version);this.vertexShader=this.glContext.compileShader(n,this.glContext.gl.VERTEX_SHADER)}$r.debug&&dr.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),r}bindOutput(t){let e=t.width,r=t.height;dr.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${r}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,r)}bindAttributes(t){let e=t.position,r=t.textureCoord;this.glContext.setVertexAttributes(e,r),this.attributesBound=!0}bindUniforms(t,e,r){let n=this.glContext.gl,i=0;for(let{name:a,type:u,location:s,arrayLength:l}of t){let o=e.find(c=>c.name===a)?.data;if(u!=="sampler2D"&&!o)throw new Error(`variable '${a}' does not have data defined in program info`);switch(u){case"sampler2D":this.bindTexture(r[i],s,i),i++;break;case"float":l?n.uniform1fv(s,o):n.uniform1f(s,o);break;case"int":l?n.uniform1iv(s,o):n.uniform1i(s,o);break;default:throw new Error(`Uniform not implemented: ${u}`)}}}bindTexture(t,e,r){this.glContext.bindTextureToUniform(t.texture,r,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,r){let n=[];if(e)for(let i of e)n.push({name:i,type:"sampler2D",location:this.getUniformLocation(t,i)});if(r)for(let i of r)n.push(B(N({},i),{location:this.getUniformLocation(t,i.name)}));return n}getUniformLocation(t,e){let r=this.glContext.gl.getUniformLocation(t,e);if(r===null)throw new Error(`Uniform ${e} not found.`);return r}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),DN,tX=ee(()=>{"use strict";Do(),jh(),DN=class{constructor(t,e,r,n){this.glContext=t,this.layoutStrategy=e,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,r,n){let i=this.toEncoderType(t),a=this.glContext.getEncoder(i,e.channels||1,n);if(e.isPacked&&n===1)throw new Error("not implemented");let u=e.width,s=e.height,l,o;if(this.config.reuseTextures){l=`${u}x${s}_${a.format}_${a.internalFormat}_${a.textureType}`,o=this.inUseTextures.get(l),o||(o=[],this.inUseTextures.set(l,o));let f=this.idleTextures.get(l);if(f&&f.length>0){let d=f.pop();return o.push(d),n===1&&this.glContext.updateTexture(d,u,s,a,this.toTextureData(t,r)),d}}dr.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let c=this.glContext.allocateTexture(u,s,a,this.toTextureData(t,r));return this.config.reuseTextures&&(o.push(c),this.textureLookup.set(c,l)),c}readTexture(t,e,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=t.shape.reduce((a,u)=>a*u)*r,i=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(e),r);return this.toTensorData(e,i)})}readTextureAsync(t,e,r){return U(this,null,function*(){let n=t.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let i=this.pendingRead.get(n);return new Promise(a=>i?.push(a))}return this.profiler.event("backend","TextureManager.readTextureAsync",()=>U(this,null,function*(){this.pendingRead.set(n,[]);let i=t.shape.reduce((l,o)=>l*o)*r;yield this.glContext.createAndWaitForFence();let a=this.glContext.readTexture(t.texture,t.width,t.height,i,this.toEncoderType(e),r),u=this.toTensorData(e,a),s=this.pendingRead.get(n);return this.pendingRead.delete(n),s?.forEach(l=>l(u)),u}))})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((n,i)=>n*i),r=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(r.buffer,r.byteOffset,e)})}releaseTexture(t,e){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(t.texture),r)){e&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let i=n.indexOf(t.texture);if(i!==-1){n.splice(i,1);let a=this.idleTextures.get(r);a||(a=[],this.idleTextures.set(r,a)),a.push(t.texture)}}}(!r||e)&&(dr.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),CN,rX=ee(()=>{"use strict";Do(),GG(),SW(),jq(),eX(),wN(),tX(),CN=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new bN(t.glContext.maxTextureSize),this.programManager=new SN(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new DN(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new u4(this)}onGraphInitialized(t){let e=t.getValues().filter(r=>r.from===-1&&r.tensor).map(r=>r.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){dr.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,r){let n=HG(t,e,yN);return{impl:n.opImpl,context:n.opInit?n.opInit(t,r):t}}}});function nX(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var pv,oX=ee(()=>{"use strict";as(),jh(),jh(),Ii(),pv=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,r,n){let i=this.gl,a=i.createTexture();i.bindTexture(i.TEXTURE_2D,a),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MAG_FILTER,i.NEAREST),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE);let u=n?r.encode(n,t*e):null;return i.texImage2D(i.TEXTURE_2D,0,r.internalFormat,t,e,0,r.format,r.textureType,u),this.checkError(),a}updateTexture(t,e,r,n,i){let a=this.gl;a.bindTexture(a.TEXTURE_2D,t);let u=n.encode(i,e*r);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,r,n.format,n.textureType,u),this.checkError()}attachFramebuffer(t,e,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.checkError(),n.viewport(0,0,e,r),n.scissor(0,0,e,r)}readTexture(t,e,r,n,i,a){let u=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,r);let s=this.getEncoder(i,a),l=s.allocate(e*r);return u.bindTexture(u.TEXTURE_2D,t),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),u.readPixels(0,0,e,r,u.RGBA,s.textureType,l),this.checkError(),s.decode(l,n)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let r=this.gl;r.vertexAttribPointer(t,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(t),e!==-1&&(r.vertexAttribPointer(e,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let r=this.gl,n=r.createProgram();return r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),n}compileShader(t,e){let r=this.gl,n=r.createShader(e);if(!n)throw new Error(`createShader() returned null with type ${e}`);if(r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${t}`);return n}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,r){let n=this.gl;n.activeTexture(n.TEXTURE0+e),this.checkError(),n.bindTexture(n.TEXTURE_2D,t),this.checkError(),n.uniform1i(r,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if($r.debug){let t=this.gl,e=t.getError(),r="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:r="INVALID_ENUM";break;case t.INVALID_VALUE:r="INVALID_VALUE";break;case t.INVALID_OPERATION:r="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(r)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,r=0){if(this.version===2)return new i4(this.gl,e);switch(t){case"float":return r===1||this.isRenderFloat32Supported?new Zy(this.gl,e):new Zy(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new a4(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let r=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let r=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,t.RGBA,t.FLOAT,null);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let i=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(n),i}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,r,n,i,a;try{e=t.createTexture(),r=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let u=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,u,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),n=t.createShader(t.VERTEX_SHADER),!n||(t.shaderSource(n,"void main(){}"),t.compileShader(n),i=t.createShader(t.FRAGMENT_SHADER),!i)||(t.shaderSource(i,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(i),a=t.createProgram(),!a)?!1:(t.attachShader(a,n),t.attachShader(a,i),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),n&&t.deleteShader(n),i&&t.deleteShader(i),r&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(r)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,r=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let n=this.gl,i=this.disjointTimerQueryWebgl2Extension;e=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(i.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!r}getTimerResult(t){let e=0;if(this.version===2){let r=this.gl;e=r.getQueryParameter(t,r.QUERY_RESULT),r.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}waitForQueryAndGetTime(t){return U(this,null,function*(){return yield mO(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)})}createAndWaitForFence(){return U(this,null,function*(){let t=this.createFence(this.gl);return this.pollFence(t)})}createFence(t){let e,r=t,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),n===null?e=()=>!0:e=()=>{let i=r.clientWaitSync(n,0,0);return i===r.ALREADY_SIGNALED||i===r.CONDITION_SATISFIED},{query:n,isFencePassed:e}}pollFence(t){return U(this,null,function*(){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})})}pollItems(){let t=nX(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){return U(this,null,function*(){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&(yield mO(()=>(this.pollItems(),this.itemsToPoll.length===0)))})}}});function ON(t){let e;if((!t||t==="webgl2")&&"webgl2"in ns?e=ns.webgl2:(!t||t==="webgl")&&"webgl"in ns&&(e=ns.webgl),!e)try{let n=aX();e=bP(n,t)}catch{let n=iX();e=bP(n,t)}t=t||e.version===1?"webgl":"webgl2";let r=e.gl;return ns[t]=e,r.isContextLost()?(delete ns[t],ON(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),e)}function bP(t,e){let r={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},n,i=r;if((!e||e==="webgl2")&&(n=t.getContext("webgl2",i),n))try{return new pv(n,2)}catch(a){dr.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${a}`)}if((!e||e==="webgl")&&(n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),n))try{return new pv(n,1)}catch(a){dr.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${a}`)}throw new Error("WebGL is not supported")}function iX(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function aX(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var ns,sX=ee(()=>{"use strict";Do(),oX(),ns={}}),PN,uX=ee(()=>{"use strict";as(),Do(),rX(),sX(),PN=class{get contextId(){return $r.webgl.contextId}set contextId(t){$r.webgl.contextId=t}get matmulMaxBatchSize(){return $r.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){$r.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return $r.webgl.textureCacheMode}set textureCacheMode(t){$r.webgl.textureCacheMode=t}get pack(){return $r.webgl.pack}set pack(t){$r.webgl.pack=t}get async(){return $r.webgl.async}set async(t){$r.webgl.async=t}initialize(){try{return this.glContext=ON(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),dr.setWithEnv($r),$r.webgl.context||Object.defineProperty($r.webgl,"context",{value:this.glContext.gl}),dr.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return dr.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new CN(this,t)}dispose(){this.glContext.dispose()}}});function MN(t){return U(this,null,function*(){if(t){let e=typeof t=="string"?[t]:t;for(let r of e){let n=Ov.get(r);if(n)return n;let i=yield lX(r);if(i)return i}}else return MN(["webgl"]);throw new Error("no available backend to use")})}function lX(t){return U(this,null,function*(){let e=NN;if(typeof e[t]<"u"&&cX(e[t])){let r=e[t],n=r.initialize();if(typeof n=="object"&&"then"in n&&(n=yield n),n)return Ov.set(t,r),r}})}function cX(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var Ov,NN,fX=ee(()=>{"use strict";uX(),Ov=new Map,NN={webgl:new PN}}),wP,RN,dX=ee(()=>{"use strict";Do(),wP=class{constructor(t,e){this.op=t,this.node=e}},RN=class{constructor(t,e,r){this.graph=t,this.profiler=r,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((r,n)=>new wP(r,e[n])),this.reset(),this._starter=[],this._ops.forEach((r,n)=>{let i=!0;for(let a of r.node.inputs)if(!this._values[a]&&this.graph.getInputIndices().indexOf(a)===-1){i=!1;break}i&&this._starter.push(n)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}execute(t,e){return U(this,null,function*(){return this.profiler.event("session","ExecutionPlan.execute",()=>U(this,null,function*(){this.reset();let r=t.createInferenceHandler(),n=this.graph.getInputIndices();if(e.length!==n.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${n.length}`);e.forEach((o,c)=>{let f=n[c];this._values[f]=o});let i=this._starter.slice(0),a=this.graph.getValues(),u=this.graph.getNodes(),s=0;for(;s<i.length;){let o=i[s++],c=this._ops[o],f=c.node.inputs.map(m=>this._values[m]);if(f.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${c.node}`);let d=f;dr.verbose("ExecPlan",`Runing op:${c.node.name} (${d.map((m,v)=>`'${c.node.inputs[v]}': ${m.type}[${m.dims.join(",")}]`).join(", ")})`);let h=yield this.profiler.event("node",c.node.name,()=>U(this,null,function*(){return c.op.impl(r,d,c.op.context)}));if(h.length!==c.node.outputs.length)throw new Error("the size of output does not match model definition.");h.forEach((m,v)=>{let x=c.node.outputs[v];if(this._values[x])throw new Error(`output [${x}] already has value: op:${c.node.name}`);this._values[x]=m});let p=new Set;h.forEach((m,v)=>{let x=c.node.outputs[v];for(let y of a[x].to){let _=u[y],I=!0;for(let C of _.inputs)if(!this._values[C]){I=!1;break}I&&p.add(y)}}),i.push(...p)}let l=[];for(let o=0;o<this.graph.getOutputIndices().length;o++){let c=this.graph.getOutputIndices()[o],f=this._values[c];if(f===void 0)throw new Error(`required output [${c}] does not have value`);c===0?yield f.getData():f.data,l.push(f)}return dr.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),l}))})}}}),We,Ln,gv,hX=ee(()=>{"use strict";zh(),We=wu(rf()),_u(),mt(),Ln=Tt.experimental.fbs,gv=class qc{constructor(e){if(this._attributes=new Map,e!=null){for(let r of e)r instanceof We.onnx.AttributeProto?this._attributes.set(r.name,[qc.getValue(r),qc.getType(r)]):r instanceof Ln.Attribute&&this._attributes.set(r.name(),[qc.getValue(r),qc.getType(r)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,r,n){this._attributes.set(e,[n,r])}delete(e){this._attributes.delete(e)}getFloat(e,r){return this.get(e,"float",r)}getInt(e,r){return this.get(e,"int",r)}getString(e,r){return this.get(e,"string",r)}getTensor(e,r){return this.get(e,"tensor",r)}getFloats(e,r){return this.get(e,"floats",r)}getInts(e,r){return this.get(e,"ints",r)}getStrings(e,r){return this.get(e,"strings",r)}getTensors(e,r){return this.get(e,"tensors",r)}get(e,r,n){let i=this._attributes.get(e);if(i===void 0){if(n!==void 0)return n;throw new Error(`required attribute not found: ${e}`)}if(i[1]!==r)throw new Error(`type mismatch: expected ${r} but got ${i[1]}`);return i[0]}static getType(e){let r=e instanceof We.onnx.AttributeProto?e.type:e.type();switch(r){case We.onnx.AttributeProto.AttributeType.FLOAT:return"float";case We.onnx.AttributeProto.AttributeType.INT:return"int";case We.onnx.AttributeProto.AttributeType.STRING:return"string";case We.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case We.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case We.onnx.AttributeProto.AttributeType.INTS:return"ints";case We.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case We.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${We.onnx.AttributeProto.AttributeType[r]}`)}}static getValue(e){let r=e instanceof We.onnx.AttributeProto?e.type:e.type();if(r===We.onnx.AttributeProto.AttributeType.GRAPH||r===We.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let n=this.getValueNoCheck(e);if(r===We.onnx.AttributeProto.AttributeType.INT&&qo.isLong(n))return qo.longToNumber(n);if(r===We.onnx.AttributeProto.AttributeType.INTS){let i=n,a=new Array(i.length);for(let u=0;u<i.length;u++){let s=i[u];a[u]=qo.longToNumber(s)}return a}if(r===We.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof We.onnx.AttributeProto?Vn.fromProto(n):Vn.fromOrtTensor(n);if(r===We.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof We.onnx.AttributeProto)return n.map(i=>Vn.fromProto(i));if(e instanceof Ln.Attribute)return n.map(i=>Vn.fromOrtTensor(i))}return r===We.onnx.AttributeProto.AttributeType.STRING&&e instanceof We.onnx.AttributeProto?Gy(n):r===We.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof We.onnx.AttributeProto?n.map(Gy):n}static getValueNoCheck(e){return e instanceof We.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case We.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case We.onnx.AttributeProto.AttributeType.INT:return e.i;case We.onnx.AttributeProto.AttributeType.STRING:return e.s;case We.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case We.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case We.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case We.onnx.AttributeProto.AttributeType.INTS:return e.ints;case We.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case We.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case We.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${We.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case Ln.AttributeType.FLOAT:return e.f();case Ln.AttributeType.INT:return e.i();case Ln.AttributeType.STRING:return e.s();case Ln.AttributeType.TENSOR:return e.t();case Ln.AttributeType.GRAPH:return e.g();case Ln.AttributeType.FLOATS:return e.floatsArray();case Ln.AttributeType.INTS:{let r=[];for(let n=0;n<e.intsLength();n++)r.push(e.ints(n));return r}case Ln.AttributeType.STRINGS:{let r=[];for(let n=0;n<e.stringsLength();n++)r.push(e.strings(n));return r}case Ln.AttributeType.TENSORS:{let r=[];for(let n=0;n<e.tensorsLength();n++)r.push(e.tensors(n));return r}default:throw new Error(`unsupported attribute type: ${Ln.AttributeType[e.type()]}`)}}}}),Fy,jc,mv,Ti,ky,xP,pX=ee(()=>{"use strict";hX(),zh(),Fy=wu(rf()),_u(),mt(),jc=Tt.experimental.fbs,mv={from:(t,e)=>new xP(t,e)},Ti=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=Bn.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},ky=class{constructor(t,e){t instanceof Fy.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new gv(t.attribute)):t instanceof jc.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new gv(Bn.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},xP=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof Fy.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof jc.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!t.input)throw new Error("missing information in graph: input");let n=[];for(let i of t.input){if(e.has(i.name))throw new Error(`duplicated input name: ${i.name}`);let a=this._allData.push(new Ti(i))-1;e.set(i.name,a),n.push(i.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let i of t.initializer){let a=e.get(i.name);if(a===void 0){let u=new Ti;u.type={shape:{dims:Bn.tensorDimsFromProto(i.dims)},tensorType:Bn.tensorDataTypeFromProto(i.dataType)},a=this._allData.push(u)-1,e.set(i.name,a)}this._allData[a]._from=-1,this._allData[a].tensor=Vn.fromProto(i)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(n[i]));if(!t.output)throw new Error("missing information in graph: output");for(let i of t.output){if(e.has(i.name))throw new Error(`duplicated output name: ${i.name}`);let a=this._allData.push(new Ti(i))-1;e.set(i.name,a),this._allOutputIndices.push(a),this._allOutputNames.push(i.name)}if(!t.node)throw new Error("missing information in graph: node");for(let i of t.node){if(!i.name)for(let u=0;;u++){let s=`unnamed_${i.opType}_${u}`;if(!r.has(s)){i.name=s;break}}if(r.has(i.name))throw new Error(`duplicated node name: ${i.name}`);let a=this._nodes.push(new ky(i))-1;r.set(i.name,a)}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.node[i];if(!u.output)throw new Error(`missing output for node: ${u.name}`);for(let s of u.output){let l=e.get(s);if(typeof l>"u"&&(l=this._allData.push(new Ti)-1,e.set(s,l)),a.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=i,u.opType==="Constant"){if(!u.attribute||u.attribute.length!==1||!u.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!u.output||u.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=Vn.fromProto(u.attribute[0].t)}}}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.node[i];if(!u.input)throw new Error(`missing input for node: ${u.name}`);for(let s of u.input){let l=e.get(s);if(typeof l>"u"){if(s===""&&(u.input.length===3||u.input.length===4)&&u.opType==="Resize")continue;throw new Error(`unrecognized input '${s}' for node: ${u.name}`)}a.inputs.push(l),this._allData[l]._to.push(i)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,n=[];for(let i=0;i<t.inputsLength();i++){let a=t.inputs(i);if(e.has(a))throw new Error(`duplicated input name: ${a}`);for(let u=0;u<t.nodeArgsLength();u++)if(t.nodeArgs(u)?.name()===a){let s=new Ti;if(t.nodeArgs(u)?.type()?.valueType()!==jc.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let l=t.nodeArgs(u).type().value(new jc.TensorTypeAndShape),o=Bn.tensorDataTypeFromProto(l.elemType()),c=l.shape(),f=[];for(let h=0;h<c.dimLength();h++)f.push(qo.longToNumber(c.dim(h).value().dimValue()));s.type={shape:{dims:f},tensorType:o};let d=this._allData.push(s)-1;e.set(a,d),n.push(a)}}for(let i=0;i<t.initializersLength();i++){let a=t.initializers(i),u=e.get(a.name());if(u===void 0){let s=new Ti,l=Bn.tensorDimsFromORTFormat(a),o=Bn.tensorDataTypeFromProto(a.dataType());s.type={shape:{dims:l},tensorType:o},u=this._allData.push(s)-1,e.set(a.name(),u)}this._allData[u]._from=-1,this._allData[u].tensor=Vn.fromOrtTensor(a)}for(let i=0;i<this._allData.length;i++)this._allData[i].tensor||(this._allInputIndices.push(i),this._allInputNames.push(n[i]));for(let i=0;i<t.outputsLength();i++){let a=t.outputs(i);if(e.has(a))throw new Error(`duplicated output name: ${a}`);let u=this._allData.push(new Ti)-1;e.set(a,u),this._allOutputIndices.push(u),this._allOutputNames.push(a)}if(!t.nodes)throw new Error("missing information in graph: node");for(let i=0;i<t.nodesLength();i++){let a=t.nodes(i),u=a.name();if(!u)for(let l=0;u=`unnamed_${a.opType()}_${l}`,!!r.has(u);l++);if(r.has(u))throw new Error(`duplicated node name: ${u}`);let s=this._nodes.push(new ky(a,u))-1;r.set(u,s)}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.nodes(i);if(u==null)throw new Error(`No node exists at index ${i}`);if(u?.outputsLength()===0)throw new Error(`missing output for node: ${u.name}`);for(let s=0;s<u?.outputsLength();s++){let l=u?.outputs(s),o=e.get(l);if(typeof o>"u"&&(o=this._allData.push(new Ti)-1,e.set(l,o)),a.outputs.push(o),this._allData[o]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${o}`);if(this._allData[o]._from=i,u.opType()==="Constant"){if(u.attributesLength()!==1||!u.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(u.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[o]._from=-1,this._allData[o].tensor=Vn.fromOrtTensor(u.attributes(0).t())}}}for(let i=0;i<this._nodes.length;i++){let a=this._nodes[i],u=t.nodes(i);if(u.inputsLength()===0)throw new Error(`missing input for node: ${u.name}`);for(let s=0;s<u.inputsLength();s++){let l=u.inputs(s),o=e.get(l);if(typeof o>"u")throw new Error(`unrecognized input '${l}' for node: ${u.name()}`);a.inputs.push(o),this._allData[o]._to.push(i)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(n=>{this._allData[n]._to.forEach(i=>{t.add(i)})});let e=Array.from(t),r=new Array(this._nodes.length).fill("white");for(;e.length>0;){let n=e.pop();r[n]==="gray"?r[n]="black":(e.push(n),r[n]="gray",this._nodes[n].outputs.forEach(i=>{let a=this._allData[i];if(typeof a.tensor<"u")throw new Error("node outputs should not be initialized");if(a._from!==n)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach(u=>{if(r[u]==="gray")throw new Error("model graph is cyclic");r[u]==="white"&&e.push(u)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),r=0;for(let n=0;n<this._nodes.length;n++)e[n]=r,this._nodes[n].executeNode?(r!==n&&(this._nodes[r]=this._nodes[n]),r++):this._nodes[n].outputs.forEach(i=>{this._allData[i]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let n=0;n<this._allData.length;n++){let i=this._allData[n];i._from!==void 0&&i._from!==-1&&i._from!==-2&&(i._from=e[i._from]);for(let a=0;a<i._to.length;a++)if(i._to[a]>=0)i._to[a]=e[i._to[a]];else throw new Error("Trying to update a removed node")}t=0;for(let n=0;n<this._allData.length;n++){if(this._allData[n].from===-2&&this._allOutputIndices.indexOf(n+t)===-1){t++,this._allData.splice(n,1),n--;continue}if(t>0){let i=-1;this._allData[n].from!==void 0&&this._allData[n].from!==-1?(i=this._nodes[this._allData[n].from].outputs.indexOf(n+t),i!==-1&&(this._nodes[this._allData[n].from].outputs[i]=n)):(i=this._allInputIndices.indexOf(n+t),i!==-1&&(this._allInputIndices[i]=n)),this._allData[n].to.forEach(a=>{i=this._nodes[a].inputs.indexOf(n+t),i!==-1&&(this._nodes[a].inputs[i]=n)}),this._allData[n].to.length===0&&(i=this._allOutputIndices.indexOf(n+t),i!==-1&&(this._allOutputIndices[i]=n))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let u=1;u<e.outputs.length;u++)if(this._allData[e.outputs[u]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let r=e.inputs[0],n=e.outputs[0],i=this._allData[n].to;for(let u=0;u<e.inputs.length;u++){let s=this._allData[e.inputs[u]].to.indexOf(t);if(s===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[u]].to.splice(s,1)}this._allData[n]._to=[];let a=this._allOutputIndices.indexOf(n);if(a!==-1&&(this._allOutputIndices[a]=r),i&&i.length>0)for(let u of i){let s=this._nodes[u].inputs.indexOf(n);if(s===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[u].inputs[s]=r,this._allData[r].to.push(u)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let r=this._nodes[e[0]];if(r.opType==="Clip")if(r.inputs.length===1)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[Jc,ef])}else if(r.inputs.length>=3&&this._allData[r.inputs[1]].tensor!==void 0&&this._allData[r.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",r.opType),this.deleteNode(e[0])}}}}}),_P,EP,FN,gX=ee(()=>{"use strict";Ev(),pX(),zh(),_P=wu(rf()),mt(),EP=Tt.experimental.fbs,FN=class{constructor(){}load(t,e,r){if(!r)try{this.loadFromOnnxFormat(t,e);return}catch(n){if(r!==void 0)throw n}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){let r=_P.onnx.ModelProto.decode(t);if(qo.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(n=>({domain:n.domain,version:qo.longToNumber(n.version)})),this._graph=mv.from(r.graph,e)}loadFromOrtFormat(t,e){let r=new V.ByteBuffer(t),n=EP.InferenceSession.getRootAsInferenceSession(r).model();if(qo.longToNumber(n.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let i=0;i<n.opsetImportLength();i++){let a=n.opsetImport(i);this._opsets.push({domain:a?.domain(),version:qo.longToNumber(a.version())})}this._graph=mv.from(n.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),kN,mX=ee(()=>{"use strict";fX(),dX(),Do(),gX(),kN=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=qP.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(t,e,r){return U(this,null,function*(){yield this.profiler.event("session","Session.loadModel",()=>U(this,null,function*(){let n=yield MN(this.backendHint);if(this.sessionHandler=n.createSessionHandler(this.context),this._model=new FN,typeof t=="string"){let i=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let a=yield(void 0)(t);this.initialize(a,i)}else{let a=yield(yield fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),i)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let i=new Uint8Array(t,e||0,r||t.byteLength);this.initialize(i)}}))})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,r,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new RN(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(t){return U(this,null,function*(){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",()=>U(this,null,function*(){let e=this.normalizeAndValidateInputs(t),r=yield this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(r)}))})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let r=new Array(t.size),n=0;for(let i=0;i<e.length;++i){let a=t.get(e[i]);if(!a)throw new Error(`missing input tensor for: '${name}'`);r[n++]=a}t=r}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let r=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),i=new Array(r.length);for(let a=0;a<r.length;++a){let u=n[r[a]];i[a]=u.type.shape.dims,this.context.graphInputTypes.push(u.type.tensorType),this.context.graphInputDims.push(t[a].dims)}this.validateInputTensorDims(i,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let r=0;r<e.length;r++){let n=t[r],i=e[r].type;if(n!==i)throw new Error(`input tensor[${r}] check failed: expected type '${n}' but got ${i}`)}}validateInputTensorDims(t,e,r){for(let n=0;n<e.length;n++){let i=t[n],a=e[n].dims;if(!this.compareTensorDims(i,a,r))throw new Error(`input tensor[${n}] check failed: expected shape '[${i.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]&&(!r||t[n]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<e.length;++n)r.set(e[n],t[n]);return r}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let r=0;r<e.length;r++)this._ops[r]=this.sessionHandler.resolve(e[r],this._model.opsets,t)}}}),LN,yX=ee(()=>{"use strict";as(),_u(),LN=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return U(this,null,function*(){})}run(t,e,r){return U(this,null,function*(){let n=new Map;for(let u in t)if(Object.hasOwnProperty.call(t,u)){let s=t[u];n.set(u,new Vn(s.dims,s.type,void 0,void 0,s.data))}let i=yield this.session.run(n),a={};return i.forEach((u,s)=>{a[s]=new $n(u.type,u.data,u.dims)}),a})}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),BN={};IP(BN,{onnxjsBackend:()=>$N});var TP,$N,vX=ee(()=>{"use strict";mX(),yX(),TP=class{init(){return U(this,null,function*(){})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new kN(e);return typeof t=="string"?yield r.loadModel(t):yield r.loadModel(t),new LN(r)})}},$N=new TP});as();as();as();var bX="1.17.1",hye=GP;{let t=(vX(),CG(BN)).onnxjsBackend;yv("webgl",t,-10)}Object.defineProperty($r.versions,"web",{value:bX,enumerable:!0});var Hv=Object.defineProperty,wX=Object.getOwnPropertyDescriptor,xX=Object.getOwnPropertyNames,_X=Object.prototype.hasOwnProperty,lt=(t,e)=>()=>(t&&(e=t(t=0)),e),Mu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),pf=(t,e)=>{for(var r in e)Hv(t,r,{get:e[r],enumerable:!0})},EX=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let i of xX(e))!_X.call(t,i)&&i!==r&&Hv(t,i,{get:()=>e[i],enumerable:!(n=wX(e,i))||n.enumerable});return t},Du=t=>EX(Hv({},"__esModule",{value:!0}),t),sf,sa,df,zv,Gv=lt(()=>{"use strict";sf=new Map,sa=[],df=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=sf.get(t);if(n===void 0)sf.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let i=sa.indexOf(t);i!==-1&&sa.splice(i,1);for(let a=0;a<sa.length;a++)if(sf.get(sa[a]).priority<=r){sa.splice(a,0,t);return}sa.push(t)}return}throw new TypeError("not a valid backend")},zv=t=>U(void 0,null,function*(){let e=t.length===0?sa:t,r=[];for(let n of e){let i=sf.get(n);if(i){if(i.initialized)return i.backend;if(i.aborted)continue;let a=!!i.initPromise;try{return a||(i.initPromise=i.backend.init(n)),yield i.initPromise,i.initialized=!0,i.backend}catch(u){a||r.push({name:n,err:u}),i.aborted=!0}finally{delete i.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),TX=lt(()=>{"use strict";Gv()}),t6,IX=lt(()=>{"use strict";t6="1.17.1"}),Pv,Cu,r6=lt(()=>{"use strict";IX(),Pv="warning",Cu={wasm:{},webgl:{},webgpu:{},versions:{common:t6},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);Pv=t}},get logLevel(){return Pv}},Object.defineProperty(Cu,"logLevel",{enumerable:!0})}),Jt,AX=lt(()=>{"use strict";r6(),Jt=Cu}),n6,o6,SX=lt(()=>{"use strict";n6=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let i,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[3]):(i=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,o;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?o=[0,0,0,0]:typeof s.bias=="number"?o=[s.bias,s.bias,s.bias,s.bias]:(o=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(o[3]=s.bias[3]));let c=a*i,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<i;v++){let x=(t.data[f++]-o[0])*l[0],y=(t.data[d++]-o[1])*l[1],_=(t.data[h++]-o[2])*l[2],I=p===-1?255:(t.data[p++]-o[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},o6=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let i,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(i=t.dims[2],a=t.dims[1],u=t.dims[3]):(i=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,o,c;l===void 0||l.mean===void 0?o=[255,255,255,255]:typeof l.mean=="number"?o=[l.mean,l.mean,l.mean,l.mean]:(o=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(o[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*i;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(i,a);for(let C=0;C<a*i;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*o[0],n.data[p]=(t.data[y++]-c[1])*o[1],n.data[m]=(t.data[_++]-c[2])*o[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*o[3]}else throw new Error("Can not access image data");return n}}),qh,i6,a6,s6,u6,DX=lt(()=>{"use strict";Wv(),qh=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,i=e.norm??{mean:255,bias:0},a,u;typeof i.mean=="number"?a=[i.mean,i.mean,i.mean,i.mean]:a=[i.mean[0],i.mean[1],i.mean[2],i.mean[3]??255],typeof i.bias=="number"?u=[i.bias,i.bias,i.bias,i.bias]:u=[i.bias[0],i.bias[1],i.bias[2],i.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",o=r*n,c=l==="RGBA"?new Float32Array(o*4):new Float32Array(o*3),f=4,d=0,h=1,p=2,m=3,v=0,x=o,y=o*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=o*3:l==="RBG"?(v=0,y=o,x=o*2):l==="BGR"&&(y=0,x=o,v=o*2);for(let I=0;I<o;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new Co("float32",c,[1,4,r,n]):new Co("float32",c,[1,3,r,n])},i6=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,i=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},o=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=o(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(i){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=o(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,qh(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=o(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(qh(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return qh(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),a6=(t,e)=>{let{width:r,height:n,download:i,dispose:a}=e,u=[1,n,r,4];return new Co({location:"texture",type:"float32",texture:t,dims:u,download:i,dispose:a})},s6=(t,e)=>{let{dataType:r,dims:n,download:i,dispose:a}=e;return new Co({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:i,dispose:a})},u6=(t,e,r)=>new Co({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),hf,Zh,Mv,l6,CX=lt(()=>{"use strict";hf=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Zh=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Mv=!1,l6=()=>{if(!Mv){Mv=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(hf.set("int64",BigInt64Array),Zh.set(BigInt64Array,"int64")),e&&(hf.set("uint64",BigUint64Array),Zh.set(BigUint64Array,"uint64"))}}}),c6,f6,OX=lt(()=>{"use strict";Wv(),c6=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},f6=(t,e)=>{switch(t.location){case"cpu":return new Co(t.type,t.data,e);case"cpu-pinned":return new Co({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new Co({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new Co({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),Co,Wv=lt(()=>{"use strict";SX(),DX(),CX(),OX(),Co=class{constructor(t,e,r){l6();let n,i;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,i=t.dims,t.location){case"cpu-pinned":{let u=hf.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=hf.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Zh.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");i=s,this.cpuData=u,this.dataLocation="cpu"}let a=c6(i);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=i,this.size=a}static fromImage(t,e){return U(this,null,function*(){return i6(t,e)})}static fromTexture(t,e){return a6(t,e)}static fromGpuBuffer(t,e){return s6(t,e)}static fromPinnedBuffer(t,e,r){return u6(t,e,r)}toDataURL(t){return n6(this,t)}toImageData(t){return o6(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return f6(this,t)}}}),mn,qv=lt(()=>{"use strict";Wv(),mn=Co}),$v,Nv,Ou,Pu,d6=lt(()=>{"use strict";r6(),$v=(t,e)=>{Cu.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},Nv=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let i=0;i<r.length;i++){if(n&&!r[i].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[i].trim().split(" ")[1]}`;e&&(a+=`::${e}`),$v("CPU",a);return}r[i].includes("TRACE_FUNC")&&(n=!0)}},Ou=t=>{Cu.wasm.trace&&Nv("BEGIN",t)},Pu=t=>{Cu.wasm.trace&&Nv("END",t)}}),h6,PX=lt(()=>{"use strict";Gv(),qv(),d6(),h6=class p6{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){Ou();let i={},a={};if(typeof e!="object"||e===null||e instanceof mn||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof mn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let o of r){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);i[o]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof mn)&&(o=!0,u=!1,i[f]=d)}if(o){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of this.inputNames)if(typeof e[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(u)for(let o of this.outputNames)i[o]=null;let s=yield this.handler.run(e,i,a),l={};for(let o in s)if(Object.hasOwnProperty.call(s,o)){let c=s[o];c instanceof mn?l[o]=c:l[o]=new mn(c.type,c.data,c.dims)}return Pu(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,i){return U(this,null,function*(){Ou();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let o=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=o.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${o.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>o.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${o.byteLength-c}].`);if(typeof i=="object"&&i!==null)u=i;else if(typeof i<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(o,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(o=>typeof o=="string"?o:o.name),l=yield(yield zv(s)).createInferenceSessionHandler(a,u);return Pu(),new p6(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),g6,MX=lt(()=>{"use strict";PX(),g6=h6}),NX=lt(()=>{"use strict"}),VN,m6,RX=lt(()=>{"use strict";Gv(),qv(),VN="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",m6=class y6{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",i=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield zv(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,i,a);return new y6(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(VN)})}typeNarrowingForRunStep(e,r,n,i,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof mn||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof i=="object"){if(i===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(i instanceof mn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(i)){if(i.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let o of i){if(typeof o!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(o)===-1)throw new RangeError(`'fetches' contains invalid output name: ${o}.`);u[o]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let o=!1,c=Object.getOwnPropertyNames(i);for(let f of r)if(c.indexOf(f)!==-1){let d=i[f];(d===null||d instanceof mn)&&(o=!0,l=!1,u[f]=d)}if(o){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=i}}else if(typeof i<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let o of e)if(typeof n[o]>"u")throw new Error(`input '${o}' is missing in 'feeds'.`);if(l)for(let o of r)u[o]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let i=e[n];i instanceof mn?r[n]=i:r[n]=new mn(i.type,i.data,i.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[i,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[i,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,i,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),v6,FX=lt(()=>{"use strict";RX(),v6=m6}),kX={};pf(kX,{InferenceSession:()=>g6,TRACE:()=>$v,TRACE_FUNC_BEGIN:()=>Ou,TRACE_FUNC_END:()=>Pu,Tensor:()=>mn,TrainingSession:()=>v6,env:()=>Jt,registerBackend:()=>df});var Nu=lt(()=>{"use strict";TX(),AX(),MX(),qv(),d6(),NX(),FX()}),Xv={};pf(Xv,{createReadStream:()=>x6,readFile:()=>b6,readFileSync:()=>w6});var b6,w6,x6,_6=lt(()=>{b6=void 0,w6=void 0,x6=void 0}),Yv={};pf(Yv,{join:()=>E6});var E6,T6=lt(()=>{E6=void 0}),LX=Mu((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){var a=i,u,s;a.ready=new Promise((w,T)=>{u=w,s=T});var l=Object.assign({},a),o="./this.program",c=typeof window=="object",f=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",p,m,v;if(d){var x=(_6(),Du(Xv)),y=(T6(),Du(Yv));h=f?y.dirname(h)+"/":__dirname+"/",p=(w,T)=>(w=At(w)?new URL(w):y.normalize(w),x.readFileSync(w,T?void 0:"utf8")),v=w=>(w=p(w,!0),w.buffer||(w=new Uint8Array(w)),w),m=(w,T,A,M=!0)=>{w=At(w)?new URL(w):y.normalize(w),x.readFile(w,M?void 0:"utf8",(G,Q)=>{G?A(G):T(M?Q.buffer:Q)})},!a.thisProgram&&1<process.argv.length&&(o=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(c||f)&&(f?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",p=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.send(null),T.responseText},f&&(v=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),m=(w,T,A)=>{var M=new XMLHttpRequest;M.open("GET",w,!0),M.responseType="arraybuffer",M.onload=()=>{M.status==200||M.status==0&&M.response?T(M.response):A()},M.onerror=A,M.send(null)});var _=console.log.bind(console),I=console.error.bind(console);Object.assign(a,l),l=null,typeof WebAssembly!="object"&&Ee("no native wasm support detected");var C,j=!1,z,W,k,X,ke;function me(){var w=C.buffer;a.HEAP8=z=new Int8Array(w),a.HEAP16=new Int16Array(w),a.HEAPU8=W=new Uint8Array(w),a.HEAPU16=new Uint16Array(w),a.HEAP32=k=new Int32Array(w),a.HEAPU32=X=new Uint32Array(w),a.HEAPF32=new Float32Array(w),a.HEAPF64=ke=new Float64Array(w)}var ye=[],Z=[],he=[],yt=0,qe=null,Ue=null;function Ee(w){throw w="Aborted("+w+")",I(w),j=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),s(w),w}var It=w=>w.startsWith("data:application/octet-stream;base64,"),At=w=>w.startsWith("file://"),Ft;if(Ft="ort-wasm.wasm",!It(Ft)){var vr=Ft;Ft=a.locateFile?a.locateFile(vr,h):h+vr}function Pt(w){if(v)return v(w);throw"both async and sync fetching of the wasm failed"}function hr(w){if(c||f){if(typeof fetch=="function"&&!At(w))return fetch(w,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+w+"'";return T.arrayBuffer()}).catch(()=>Pt(w));if(m)return new Promise((T,A)=>{m(w,M=>T(new Uint8Array(M)),A)})}return Promise.resolve().then(()=>Pt(w))}function Yt(w,T,A){return hr(w).then(M=>WebAssembly.instantiate(M,T)).then(M=>M).then(A,M=>{I(`failed to asynchronously prepare wasm: ${M}`),Ee(M)})}function jr(w,T){var A=Ft;return typeof WebAssembly.instantiateStreaming!="function"||It(A)||At(A)||d||typeof fetch!="function"?Yt(A,w,T):fetch(A,{credentials:"same-origin"}).then(M=>WebAssembly.instantiateStreaming(M,w).then(T,function(G){return I(`wasm streaming compile failed: ${G}`),I("falling back to ArrayBuffer instantiation"),Yt(A,w,T)}))}var Ae,Se={919888:(w,T,A,M)=>{if(typeof a>"u"||!a.za)return 1;if(w=Tr(w>>>0),w.startsWith("./")&&(w=w.substring(2)),w=a.za.get(w),!w)return 2;if(T>>>=0,A>>>=0,T+A>w.byteLength)return 3;try{return W.set(w.subarray(T,T+A),M>>>0>>>0),0}catch{return 4}}};function Er(w){this.xa=w-24,this.Ha=function(T){X[this.xa+4>>>2>>>0]=T},this.Ga=function(T){X[this.xa+8>>>2>>>0]=T},this.Aa=function(T,A){this.Fa(),this.Ha(T),this.Ga(A)},this.Fa=function(){X[this.xa+16>>>2>>>0]=0}}var er=0,yn=0,vn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,to=(w,T,A)=>{T>>>=0;var M=T+A;for(A=T;w[A]&&!(A>=M);)++A;if(16<A-T&&w.buffer&&vn)return vn.decode(w.subarray(T,A));for(M="";T<A;){var G=w[T++];if(G&128){var Q=w[T++]&63;if((G&224)==192)M+=String.fromCharCode((G&31)<<6|Q);else{var le=w[T++]&63;G=(G&240)==224?(G&15)<<12|Q<<6|le:(G&7)<<18|Q<<12|le<<6|w[T++]&63,65536>G?M+=String.fromCharCode(G):(G-=65536,M+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else M+=String.fromCharCode(G)}return M},Tr=(w,T)=>(w>>>=0)?to(W,w,T):"",Ir=w=>{for(var T=0,A=0;A<w.length;++A){var M=w.charCodeAt(A);127>=M?T++:2047>=M?T+=2:55296<=M&&57343>=M?(T+=4,++A):T+=3}return T},bn=(w,T,A,M)=>{if(A>>>=0,!(0<M))return 0;var G=A;M=A+M-1;for(var Q=0;Q<w.length;++Q){var le=w.charCodeAt(Q);if(55296<=le&&57343>=le){var Ve=w.charCodeAt(++Q);le=65536+((le&1023)<<10)|Ve&1023}if(127>=le){if(A>=M)break;T[A++>>>0]=le}else{if(2047>=le){if(A+1>=M)break;T[A++>>>0]=192|le>>6}else{if(65535>=le){if(A+2>=M)break;T[A++>>>0]=224|le>>12}else{if(A+3>=M)break;T[A++>>>0]=240|le>>18,T[A++>>>0]=128|le>>12&63}T[A++>>>0]=128|le>>6&63}T[A++>>>0]=128|le&63}}return T[A>>>0]=0,A-G},Ur=w=>w%4===0&&(w%100!==0||w%400===0),ro=[0,31,60,91,121,152,182,213,244,274,305,335],Yo=[0,31,59,90,120,151,181,212,243,273,304,334],Ar=w=>{var T=Ir(w)+1,A=Ko(T);return A&&bn(w,W,A,T),A},wn=[],Hr={},xn=()=>{if(!_n){var w={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:o||"./this.program"},T;for(T in Hr)Hr[T]===void 0?delete w[T]:w[T]=Hr[T];var A=[];for(T in w)A.push(`${T}=${w[T]}`);_n=A}return _n},_n,en=[null,[],[]],no=[31,29,31,30,31,30,31,31,30,31,30,31],oo=[31,28,31,30,31,30,31,31,30,31,30,31];function En(w){var T=Array(Ir(w)+1);return bn(w,T,0,T.length),T}function Zo(w,T,A,M){function G(O,pe,xe){for(O=typeof O=="number"?O.toString():O||"";O.length<pe;)O=xe[0]+O;return O}function Q(O,pe){return G(O,pe,"0")}function le(O,pe){function xe(lo){return 0>lo?-1:0<lo?1:0}var pr;return(pr=xe(O.getFullYear()-pe.getFullYear()))===0&&(pr=xe(O.getMonth()-pe.getMonth()))===0&&(pr=xe(O.getDate()-pe.getDate())),pr}function Ve(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function ct(O){var pe=O.ta;for(O=new Date(new Date(O.ua+1900,0,1).getTime());0<pe;){var xe=O.getMonth(),pr=(Ur(O.getFullYear())?no:oo)[xe];if(pe>pr-O.getDate())pe-=pr-O.getDate()+1,O.setDate(1),11>xe?O.setMonth(xe+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else{O.setDate(O.getDate()+pe);break}}return xe=new Date(O.getFullYear()+1,0,4),pe=Ve(new Date(O.getFullYear(),0,4)),xe=Ve(xe),0>=le(pe,O)?0>=le(xe,O)?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}w>>>=0,T>>>=0,A>>>=0,M>>>=0;var Xe=X[M+40>>>2>>>0];M={Da:k[M>>>2>>>0],Ca:k[M+4>>>2>>>0],va:k[M+8>>>2>>>0],ya:k[M+12>>>2>>>0],wa:k[M+16>>>2>>>0],ua:k[M+20>>>2>>>0],oa:k[M+24>>>2>>>0],ta:k[M+28>>>2>>>0],Ia:k[M+32>>>2>>>0],Ba:k[M+36>>>2>>>0],Ea:Xe?Tr(Xe):""},A=Tr(A),Xe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ye in Xe)A=A.replace(new RegExp(Ye,"g"),Xe[Ye]);var so="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),uo="January February March April May June July August September October November December".split(" ");Xe={"%a":O=>so[O.oa].substring(0,3),"%A":O=>so[O.oa],"%b":O=>uo[O.wa].substring(0,3),"%B":O=>uo[O.wa],"%C":O=>Q((O.ua+1900)/100|0,2),"%d":O=>Q(O.ya,2),"%e":O=>G(O.ya,2," "),"%g":O=>ct(O).toString().substring(2),"%G":O=>ct(O),"%H":O=>Q(O.va,2),"%I":O=>(O=O.va,O==0?O=12:12<O&&(O-=12),Q(O,2)),"%j":O=>{for(var pe=0,xe=0;xe<=O.wa-1;pe+=(Ur(O.ua+1900)?no:oo)[xe++]);return Q(O.ya+pe,3)},"%m":O=>Q(O.wa+1,2),"%M":O=>Q(O.Ca,2),"%n":()=>`
`,"%p":O=>0<=O.va&&12>O.va?"AM":"PM","%S":O=>Q(O.Da,2),"%t":()=>"	","%u":O=>O.oa||7,"%U":O=>Q(Math.floor((O.ta+7-O.oa)/7),2),"%V":O=>{var pe=Math.floor((O.ta+7-(O.oa+6)%7)/7);if(2>=(O.oa+371-O.ta-2)%7&&pe++,pe)pe==53&&(xe=(O.oa+371-O.ta)%7,xe==4||xe==3&&Ur(O.ua)||(pe=1));else{pe=52;var xe=(O.oa+7-O.ta-1)%7;(xe==4||xe==5&&Ur(O.ua%400-1))&&pe++}return Q(pe,2)},"%w":O=>O.oa,"%W":O=>Q(Math.floor((O.ta+7-(O.oa+6)%7)/7),2),"%y":O=>(O.ua+1900).toString().substring(2),"%Y":O=>O.ua+1900,"%z":O=>{O=O.Ba;var pe=0<=O;return O=Math.abs(O)/60,(pe?"+":"-")+("0000"+(O/60*100+O%60)).slice(-4)},"%Z":O=>O.Ea,"%%":()=>"%"},A=A.replace(/%%/g,"\0\0");for(Ye in Xe)A.includes(Ye)&&(A=A.replace(new RegExp(Ye,"g"),Xe[Ye](M)));return A=A.replace(/\0\0/g,"%"),Ye=En(A),Ye.length>T?0:(z.set(Ye,w>>>0),Ye.length-1)}var be={a:function(w,T,A){throw w>>>=0,new Er(w).Aa(T>>>0,A>>>0),er=w,yn++,er},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getUTCSeconds(),k[A+4>>>2>>>0]=w.getUTCMinutes(),k[A+8>>>2>>>0]=w.getUTCHours(),k[A+12>>>2>>>0]=w.getUTCDate(),k[A+16>>>2>>>0]=w.getUTCMonth(),k[A+20>>>2>>>0]=w.getUTCFullYear()-1900,k[A+24>>>2>>>0]=w.getUTCDay(),k[A+28>>>2>>>0]=(w.getTime()-Date.UTC(w.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getSeconds(),k[A+4>>>2>>>0]=w.getMinutes(),k[A+8>>>2>>>0]=w.getHours(),k[A+12>>>2>>>0]=w.getDate(),k[A+16>>>2>>>0]=w.getMonth(),k[A+20>>>2>>>0]=w.getFullYear()-1900,k[A+24>>>2>>>0]=w.getDay(),k[A+28>>>2>>>0]=(Ur(w.getFullYear())?ro:Yo)[w.getMonth()]+w.getDate()-1|0,k[A+36>>>2>>>0]=-(60*w.getTimezoneOffset()),T=new Date(w.getFullYear(),6,1).getTimezoneOffset();var M=new Date(w.getFullYear(),0,1).getTimezoneOffset();k[A+32>>>2>>>0]=(T!=M&&w.getTimezoneOffset()==Math.min(M,T))|0},p:function(w){w>>>=0;var T=new Date(k[w+20>>>2>>>0]+1900,k[w+16>>>2>>>0],k[w+12>>>2>>>0],k[w+8>>>2>>>0],k[w+4>>>2>>>0],k[w>>>2>>>0],0),A=k[w+32>>>2>>>0],M=T.getTimezoneOffset(),G=new Date(T.getFullYear(),6,1).getTimezoneOffset(),Q=new Date(T.getFullYear(),0,1).getTimezoneOffset(),le=Math.min(Q,G);return 0>A?k[w+32>>>2>>>0]=+(G!=Q&&le==M):0<A!=(le==M)&&(G=Math.max(Q,G),T.setTime(T.getTime()+6e4*((0<A?le:G)-M))),k[w+24>>>2>>>0]=T.getDay(),k[w+28>>>2>>>0]=(Ur(T.getFullYear())?ro:Yo)[T.getMonth()]+T.getDate()-1|0,k[w>>>2>>>0]=T.getSeconds(),k[w+4>>>2>>>0]=T.getMinutes(),k[w+8>>>2>>>0]=T.getHours(),k[w+12>>>2>>>0]=T.getDate(),k[w+16>>>2>>>0]=T.getMonth(),k[w+20>>>2>>>0]=T.getYear(),w=T.getTime(),isNaN(w)?(k[Tn()>>>2>>>0]=61,w=-1):w/=1e3,io((Ae=w,1<=+Math.abs(Ae)?0<Ae?+Math.floor(Ae/4294967296)>>>0:~~+Math.ceil((Ae-+(~~Ae>>>0))/4294967296)>>>0:0)),w>>>0},l:function(){return-52},m:function(){},t:function(w,T,A){function M(ct){return(ct=ct.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ct[1]:"GMT"}A>>>=0;var G=new Date().getFullYear(),Q=new Date(G,0,1),le=new Date(G,6,1);G=Q.getTimezoneOffset();var Ve=le.getTimezoneOffset();X[w>>>0>>>2>>>0]=60*Math.max(G,Ve),k[T>>>0>>>2>>>0]=+(G!=Ve),w=M(Q),T=M(le),w=Ar(w),T=Ar(T),Ve<G?(X[A>>>2>>>0]=w,X[A+4>>>2>>>0]=T):(X[A>>>2>>>0]=T,X[A+4>>>2>>>0]=w)},d:()=>{Ee("")},B:function(w,T,A){w>>>=0,T>>>=0,A>>>=0,wn.length=0;for(var M;M=W[T++>>>0];){var G=M!=105;G&=M!=112,A+=G&&A%8?4:0,wn.push(M==112?X[A>>>2>>>0]:M==105?k[A>>>2>>>0]:ke[A>>>3>>>0]),A+=G?8:4}return Se[w].apply(null,wn)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(w,T,A){return T>>>=0,W.copyWithin(w>>>0>>>0,T>>>0,T+(A>>>0)>>>0)},s:function(w){w>>>=0;var T=W.length;if(4294901760<w)return!1;for(var A=1;4>=A;A*=2){var M=T*(1+.2/A);M=Math.min(M,w+100663296);var G=Math;M=Math.max(w,M);e:{G=(G.min.call(G,4294901760,M+(65536-M%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(G),me();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},C:function(w,T){w>>>=0,T>>>=0;var A=0;return xn().forEach((M,G)=>{var Q=T+A;for(G=X[w+4*G>>>2>>>0]=Q,Q=0;Q<M.length;++Q)z[G++>>>0>>>0]=M.charCodeAt(Q);z[G>>>0>>>0]=0,A+=M.length+1}),0},D:function(w,T){w>>>=0,T>>>=0;var A=xn();X[w>>>2>>>0]=A.length;var M=0;return A.forEach(G=>M+=G.length+1),X[T>>>2>>>0]=M,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(w,T,A,M){T>>>=0,A>>>=0,M>>>=0;for(var G=0,Q=0;Q<A;Q++){var le=X[T>>>2>>>0],Ve=X[T+4>>>2>>>0];T+=8;for(var ct=0;ct<Ve;ct++){var Xe=W[le+ct>>>0],Ye=en[w];Xe===0||Xe===10?((w===1?_:I)(to(Ye,0)),Ye.length=0):Ye.push(Xe)}G+=Ve}return X[M>>>2>>>0]=G,0},r:Zo,c:function(w,T,A,M){return Zo(w>>>0,T>>>0,A>>>0,M>>>0)}},ie=function(){function w(A){return ie=A.exports,ie=Jo(),C=ie.K,me(),Z.unshift(ie.L),yt--,yt==0&&(qe!==null&&(clearInterval(qe),qe=null),Ue&&(A=Ue,Ue=null,A())),ie}var T={a:be};if(yt++,a.instantiateWasm)try{return a.instantiateWasm(T,w)}catch(A){I(`Module.instantiateWasm callback failed with error: ${A}`),s(A)}return jr(T,function(A){w(A.instance)}).catch(s),{}}();a._OrtInit=(w,T)=>(a._OrtInit=ie.M)(w,T),a._OrtGetLastError=(w,T)=>(a._OrtGetLastError=ie.N)(w,T),a._OrtCreateSessionOptions=(w,T,A,M,G,Q,le,Ve,ct,Xe)=>(a._OrtCreateSessionOptions=ie.O)(w,T,A,M,G,Q,le,Ve,ct,Xe),a._OrtAppendExecutionProvider=(w,T)=>(a._OrtAppendExecutionProvider=ie.P)(w,T),a._OrtAddFreeDimensionOverride=(w,T,A)=>(a._OrtAddFreeDimensionOverride=ie.Q)(w,T,A),a._OrtAddSessionConfigEntry=(w,T,A)=>(a._OrtAddSessionConfigEntry=ie.R)(w,T,A),a._OrtReleaseSessionOptions=w=>(a._OrtReleaseSessionOptions=ie.S)(w),a._OrtCreateSession=(w,T,A)=>(a._OrtCreateSession=ie.T)(w,T,A),a._OrtReleaseSession=w=>(a._OrtReleaseSession=ie.U)(w),a._OrtGetInputOutputCount=(w,T,A)=>(a._OrtGetInputOutputCount=ie.V)(w,T,A),a._OrtGetInputName=(w,T)=>(a._OrtGetInputName=ie.W)(w,T),a._OrtGetOutputName=(w,T)=>(a._OrtGetOutputName=ie.X)(w,T),a._OrtFree=w=>(a._OrtFree=ie.Y)(w),a._OrtCreateTensor=(w,T,A,M,G,Q)=>(a._OrtCreateTensor=ie.Z)(w,T,A,M,G,Q),a._OrtGetTensorData=(w,T,A,M,G)=>(a._OrtGetTensorData=ie._)(w,T,A,M,G),a._OrtReleaseTensor=w=>(a._OrtReleaseTensor=ie.$)(w),a._OrtCreateRunOptions=(w,T,A,M)=>(a._OrtCreateRunOptions=ie.aa)(w,T,A,M),a._OrtAddRunConfigEntry=(w,T,A)=>(a._OrtAddRunConfigEntry=ie.ba)(w,T,A),a._OrtReleaseRunOptions=w=>(a._OrtReleaseRunOptions=ie.ca)(w),a._OrtCreateBinding=w=>(a._OrtCreateBinding=ie.da)(w),a._OrtBindInput=(w,T,A)=>(a._OrtBindInput=ie.ea)(w,T,A),a._OrtBindOutput=(w,T,A,M)=>(a._OrtBindOutput=ie.fa)(w,T,A,M),a._OrtClearBoundOutputs=w=>(a._OrtClearBoundOutputs=ie.ga)(w),a._OrtReleaseBinding=w=>(a._OrtReleaseBinding=ie.ha)(w),a._OrtRunWithBinding=(w,T,A,M,G)=>(a._OrtRunWithBinding=ie.ia)(w,T,A,M,G),a._OrtRun=(w,T,A,M,G,Q,le,Ve)=>(a._OrtRun=ie.ja)(w,T,A,M,G,Q,le,Ve),a._OrtEndProfiling=w=>(a._OrtEndProfiling=ie.ka)(w);var Tn=()=>(Tn=ie.la)(),Ko=a._malloc=w=>(Ko=a._malloc=ie.ma)(w);a._free=w=>(a._free=ie.na)(w);var io=w=>(io=ie.pa)(w),Qo=()=>(Qo=ie.qa)(),te=w=>(te=ie.ra)(w),tn=w=>(tn=ie.sa)(w);function Jo(){var w=ie;w=Object.assign({},w);var T=M=>()=>M()>>>0,A=M=>G=>M(G)>>>0;return w.la=T(w.la),w.ma=A(w.ma),w.qa=T(w.qa),w.sa=A(w.sa),w}a.stackAlloc=tn,a.stackSave=Qo,a.stackRestore=te,a.UTF8ToString=Tr,a.stringToUTF8=(w,T,A)=>bn(w,W,T,A),a.lengthBytesUTF8=Ir;var Sr;Ue=function w(){Sr||ao(),Sr||(Ue=w)};function ao(){if(!(0<yt)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var w=a.preRun.shift();ye.unshift(w)}for(;0<ye.length;)ye.shift()(a);if(!(0<yt||Sr||(Sr=!0,a.calledRun=!0,j))){for(;0<Z.length;)Z.shift()(a);for(u(a);0<he.length;)he.shift()(a)}}}return ao(),i.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),BX=Mu(()=>{}),$X=Mu(()=>{}),I6={};pf(I6,{cpus:()=>A6});var A6,VX=lt(()=>{A6=void 0}),jX=Mu((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(i={}){function a(){return he.buffer!=Ee.buffer&&Pt(),Ee}function u(){return he.buffer!=Ee.buffer&&Pt(),It}function s(){return he.buffer!=Ee.buffer&&Pt(),At}function l(){return he.buffer!=Ee.buffer&&Pt(),Ft}function o(){return he.buffer!=Ee.buffer&&Pt(),vr}var c=i,f,d;c.ready=new Promise((g,b)=>{f=g,d=b});var h=Object.assign({},c),p="./this.program",m=(g,b)=>{throw b},v=typeof window=="object",x=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=c.ENVIRONMENT_IS_PTHREAD||!1,I="";function C(g){return c.locateFile?c.locateFile(g,I):I+g}var j,z,W;if(y){var k=(_6(),Du(Xv)),X=(T6(),Du(Yv));I=x?X.dirname(I)+"/":__dirname+"/",j=(b,E)=>(b=Tr(b)?new URL(b):X.normalize(b),k.readFileSync(b,E?void 0:"utf8")),W=b=>(b=j(b,!0),b.buffer||(b=new Uint8Array(b)),b),z=(b,E,S,R=!0)=>{b=Tr(b)?new URL(b):X.normalize(b),k.readFile(b,R?void 0:"utf8",(F,q)=>{F?S(F):E(R?q.buffer:q)})},!c.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(b,E)=>{throw process.exitCode=b,E},c.inspect=()=>"[Emscripten Module object]";let g;try{g=BX()}catch(b){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),b}global.Worker=g.Worker}else(v||x)&&(x?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),typeof n<"u"&&n&&(I=n),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",y||(j=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.send(null),b.responseText},x&&(W=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),z=(g,b,E)=>{var S=new XMLHttpRequest;S.open("GET",g,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?b(S.response):E()},S.onerror=E,S.send(null)}));y&&typeof performance>"u"&&(global.performance=$X().performance);var ke=console.log.bind(console),me=console.error.bind(console);y&&(ke=(...g)=>k.writeSync(1,g.join(" ")+`
`),me=(...g)=>k.writeSync(2,g.join(" ")+`
`));var ye=ke,Z=me;Object.assign(c,h),h=null,typeof WebAssembly!="object"&&vn("no native wasm support detected");var he,yt,qe=!1,Ue,Ee,It,At,Ft,vr;function Pt(){var g=he.buffer;c.HEAP8=Ee=new Int8Array(g),c.HEAP16=new Int16Array(g),c.HEAPU8=It=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAP32=At=new Int32Array(g),c.HEAPU32=Ft=new Uint32Array(g),c.HEAPF32=new Float32Array(g),c.HEAPF64=vr=new Float64Array(g)}var hr=16777216;if(_)he=c.wasmMemory;else if(c.wasmMemory)he=c.wasmMemory;else if(he=new WebAssembly.Memory({initial:hr/65536,maximum:65536,shared:!0}),!(he.buffer instanceof SharedArrayBuffer))throw Z("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&Z("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");Pt(),hr=he.buffer.byteLength;var Yt=[],jr=[],Ae=[],Se=0,Er=null,er=null;function yn(){if(Se--,Se==0&&(Er!==null&&(clearInterval(Er),Er=null),er)){var g=er;er=null,g()}}function vn(g){throw g="Aborted("+g+")",Z(g),qe=!0,Ue=1,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),d(g),g}var to=g=>g.startsWith("data:application/octet-stream;base64,"),Tr=g=>g.startsWith("file://"),Ir;Ir="ort-wasm-threaded.wasm",to(Ir)||(Ir=C(Ir));function bn(g){if(W)return W(g);throw"both async and sync fetching of the wasm failed"}function Ur(g){if(v||x){if(typeof fetch=="function"&&!Tr(g))return fetch(g,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+g+"'";return b.arrayBuffer()}).catch(()=>bn(g));if(z)return new Promise((b,E)=>{z(g,S=>b(new Uint8Array(S)),E)})}return Promise.resolve().then(()=>bn(g))}function ro(g,b,E){return Ur(g).then(S=>WebAssembly.instantiate(S,b)).then(S=>S).then(E,S=>{Z(`failed to asynchronously prepare wasm: ${S}`),vn(S)})}function Yo(g,b){var E=Ir;return typeof WebAssembly.instantiateStreaming!="function"||to(E)||Tr(E)||y||typeof fetch!="function"?ro(E,g,b):fetch(E,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,g).then(b,function(R){return Z(`wasm streaming compile failed: ${R}`),Z("falling back to ArrayBuffer instantiation"),ro(E,g,b)}))}var Ar,wn={921276:(g,b,E,S)=>{if(typeof c>"u"||!c.cb)return 1;if(g=En(g>>>0),g.startsWith("./")&&(g=g.substring(2)),g=c.cb.get(g),!g)return 2;if(b>>>=0,E>>>=0,S>>>=0,b+E>g.byteLength)return 3;try{return u().set(g.subarray(b,b+E),S>>>0),0}catch{return 4}}};function Hr(g){this.name="ExitStatus",this.message=`Program terminated with exit(${g})`,this.status=g}var xn=g=>{g.terminate(),g.onmessage=()=>{}},_n=g=>{te.Pa.length==0&&(io(),te.Ya(te.Pa[0]));var b=te.Pa.pop();if(!b)return 6;te.Qa.push(b),te.Ma[g.Oa]=b,b.Oa=g.Oa;var E={cmd:"run",start_routine:g.kb,arg:g.hb,pthread_ptr:g.Oa};return y&&b.unref(),b.postMessage(E,g.qb),0},en=0,no=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,oo=(g,b,E)=>{b>>>=0;var S=b+E;for(E=b;g[E]&&!(E>=S);)++E;if(16<E-b&&g.buffer&&no)return no.decode(g.buffer instanceof SharedArrayBuffer?g.slice(b,E):g.subarray(b,E));for(S="";b<E;){var R=g[b++];if(R&128){var F=g[b++]&63;if((R&224)==192)S+=String.fromCharCode((R&31)<<6|F);else{var q=g[b++]&63;R=(R&240)==224?(R&15)<<12|F<<6|q:(R&7)<<18|F<<12|q<<6|g[b++]&63,65536>R?S+=String.fromCharCode(R):(R-=65536,S+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else S+=String.fromCharCode(R)}return S},En=(g,b)=>(g>>>=0)?oo(u(),g,b):"",Zo=g=>{var b=ma();return g=g(),ri(b),g};function be(g,b){var E=arguments.length-2,S=arguments;return Zo(()=>{for(var R=ya(8*E),F=R>>>3,q=0;q<E;q++){var De=S[2+q];o()[F+q>>>0]=De}return tl(g,E,R,b)})}function ie(g){if(_)return be(0,1,g);Ue=g,0<en||(te.lb(),c.onExit?.(g),qe=!0),m(g,new Hr(g))}var Tn=g=>{if(Ue=g,_)throw Jo(g),"unwind";ie(g)};function Ko(){for(var g=c.numThreads;g--;)io();Yt.unshift(()=>{Se++,Qo(()=>yn())})}function io(){var g=C("ort-wasm-threaded.worker.js");g=new Worker(g),te.Pa.push(g)}function Qo(g){_?g():Promise.all(te.Pa.map(te.Ya)).then(g)}var te={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(te.receiveObjectTransfer=te.jb,te.threadInitTLS=te.ab,te.setExitStatus=te.$a):Ko()},$a:g=>Ue=g,tb:["$terminateWorker"],lb:()=>{for(var g of te.Qa)xn(g);for(g of te.Pa)xn(g);te.Pa=[],te.Qa=[],te.Ma=[]},Za:g=>{var b=g.Oa;delete te.Ma[b],te.Pa.push(g),te.Qa.splice(te.Qa.indexOf(g),1),g.Oa=0,pa(b)},jb(){},ab(){te.bb.forEach(g=>g())},Ya:g=>new Promise(b=>{g.onmessage=F=>{F=F.data;var q=F.cmd;if(F.targetThread&&F.targetThread!=ti()){var De=te.Ma[F.targetThread];De?De.postMessage(F,F.transferList):Z(`Internal error! Worker sent a message "${q}" to target pthread ${F.targetThread}, but that thread no longer exists!`)}else q==="checkMailbox"?ei():q==="spawnThread"?_n(F):q==="cleanupThread"?te.Za(te.Ma[F.thread]):q==="killThread"?(F=F.thread,q=te.Ma[F],delete te.Ma[F],xn(q),pa(F),te.Qa.splice(te.Qa.indexOf(q),1),q.Oa=0):q==="cancelThread"?te.Ma[F.thread].postMessage({cmd:"cancel"}):q==="loaded"?(g.loaded=!0,y&&!g.Oa&&g.unref(),b(g)):q==="alert"?alert(`Thread ${F.threadId}: ${F.text}`):F.target==="setimmediate"?g.postMessage(F):q==="callHandler"?c[F.handler](...F.args):q&&Z(`worker sent an unknown command ${q}`)},g.onerror=F=>{throw Z(`worker sent an error! ${F.filename}:${F.lineno}: ${F.message}`),F},y&&(g.on("message",F=>g.onmessage({data:F})),g.on("error",F=>g.onerror(F)));var E=[],S=["onExit"],R;for(R of S)c.hasOwnProperty(R)&&E.push(R);g.postMessage({cmd:"load",handlers:E,urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:he,wasmModule:yt})})};c.PThread=te;var tn=g=>{for(;0<g.length;)g.shift()(c)};c.establishStackSpace=()=>{var g=ti(),b=l()[g+52>>>2>>>0];g=l()[g+56>>>2>>>0],ol(b,b-g),ri(b)};function Jo(g){if(_)return be(1,0,g);Tn(g)}var Sr=[],ao;c.invokeEntryPoint=(g,b)=>{var E=Sr[g];E||(g>=Sr.length&&(Sr.length=g+1),Sr[g]=E=ao.get(g)),g=E(b),0<en?te.$a(g):ga(g)};function w(g){this.Va=g-24,this.gb=function(b){l()[this.Va+4>>>2>>>0]=b},this.fb=function(b){l()[this.Va+8>>>2>>>0]=b},this.Wa=function(b,E){this.eb(),this.gb(b),this.fb(E)},this.eb=function(){l()[this.Va+16>>>2>>>0]=0}}var T=0,A=0;function M(g,b,E,S){return _?be(2,1,g,b,E,S):G(g,b,E,S)}function G(g,b,E,S){if(g>>>=0,b>>>=0,E>>>=0,S>>>=0,typeof SharedArrayBuffer>"u")return Z("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var R=[];return _&&R.length===0?M(g,b,E,S):(g={kb:E,Oa:g,hb:S,qb:R},_?(g.sb="spawnThread",postMessage(g,R),0):_n(g))}function Q(g,b,E){return _?be(3,1,g,b,E):0}function le(g,b){if(_)return be(4,1,g,b)}var Ve=g=>{for(var b=0,E=0;E<g.length;++E){var S=g.charCodeAt(E);127>=S?b++:2047>=S?b+=2:55296<=S&&57343>=S?(b+=4,++E):b+=3}return b},ct=(g,b,E,S)=>{if(E>>>=0,!(0<S))return 0;var R=E;S=E+S-1;for(var F=0;F<g.length;++F){var q=g.charCodeAt(F);if(55296<=q&&57343>=q){var De=g.charCodeAt(++F);q=65536+((q&1023)<<10)|De&1023}if(127>=q){if(E>=S)break;b[E++>>>0]=q}else{if(2047>=q){if(E+1>=S)break;b[E++>>>0]=192|q>>6}else{if(65535>=q){if(E+2>=S)break;b[E++>>>0]=224|q>>12}else{if(E+3>=S)break;b[E++>>>0]=240|q>>18,b[E++>>>0]=128|q>>12&63}b[E++>>>0]=128|q>>6&63}b[E++>>>0]=128|q&63}}return b[E>>>0]=0,E-R},Xe=(g,b,E)=>ct(g,u(),b,E);function Ye(g,b){if(_)return be(5,1,g,b)}function so(g,b,E){if(_)return be(6,1,g,b,E)}function uo(g,b,E){return _?be(7,1,g,b,E):0}function O(g,b){if(_)return be(8,1,g,b)}function pe(g,b,E){if(_)return be(9,1,g,b,E)}function xe(g,b,E,S){if(_)return be(10,1,g,b,E,S)}function pr(g,b,E,S){if(_)return be(11,1,g,b,E,S)}function lo(g,b,E,S){if(_)return be(12,1,g,b,E,S)}function Ru(g){if(_)return be(13,1,g)}function Fu(g,b){if(_)return be(14,1,g,b)}function ku(g,b,E){if(_)return be(15,1,g,b,E)}function la(g){g>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(s(),g>>>2,g).value.then(ei),g+=128,Atomics.store(s(),g>>>2,1))}c.__emscripten_thread_mailbox_await=la;var ei=()=>{var g=ti();if(g&&(la(g),g=rl,!qe))try{if(g(),!(0<en))try{_?ga(Ue):Tn(Ue)}catch(b){b instanceof Hr||b=="unwind"||m(1,b)}}catch(b){b instanceof Hr||b=="unwind"||m(1,b)}};c.checkMailbox=ei;var ca=[],In=g=>g%4===0&&(g%100!==0||g%400===0),Lu=[0,31,60,91,121,152,182,213,244,274,305,335],Bu=[0,31,59,90,120,151,181,212,243,273,304,334];function $u(g,b,E,S,R,F,q,De){return _?be(16,1,g,b,E,S,R,F,q,De):-52}function Vu(g,b,E,S,R,F,q){if(_)return be(17,1,g,b,E,S,R,F,q)}var ju=g=>{var b=Ve(g)+1,E=Ju(b);return E&&Xe(g,E,b),E},fa=[],da={},Uu=()=>{if(!ha){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},b;for(b in da)da[b]===void 0?delete g[b]:g[b]=da[b];var E=[];for(b in g)E.push(`${b}=${g[b]}`);ha=E}return ha},ha;function Hu(g,b){if(_)return be(18,1,g,b);g>>>=0,b>>>=0;var E=0;return Uu().forEach((S,R)=>{var F=b+E;for(R=l()[g+4*R>>>2>>>0]=F,F=0;F<S.length;++F)a()[R++>>>0>>>0]=S.charCodeAt(F);a()[R>>>0>>>0]=0,E+=S.length+1}),0}function zu(g,b){if(_)return be(19,1,g,b);g>>>=0,b>>>=0;var E=Uu();l()[g>>>2>>>0]=E.length;var S=0;return E.forEach(R=>S+=R.length+1),l()[b>>>2>>>0]=S,0}function Gu(g){return _?be(20,1,g):52}function Wu(g,b,E,S){return _?be(21,1,g,b,E,S):52}function qu(g,b,E,S,R){return _?be(22,1,g,b,E,S,R):70}var Jh=[null,[],[]];function Xu(g,b,E,S){if(_)return be(23,1,g,b,E,S);b>>>=0,E>>>=0,S>>>=0;for(var R=0,F=0;F<E;F++){var q=l()[b>>>2>>>0],De=l()[b+4>>>2>>>0];b+=8;for(var gr=0;gr<De;gr++){var He=u()[q+gr>>>0],St=Jh[g];He===0||He===10?((g===1?ye:Z)(oo(St,0)),St.length=0):St.push(He)}R+=De}return l()[S>>>2>>>0]=R,0}var Yu=[31,29,31,30,31,30,31,31,30,31,30,31],Zu=[31,28,31,30,31,30,31,31,30,31,30,31];function ep(g){var b=Array(Ve(g)+1);return ct(g,b,0,b.length),b}var tp=(g,b)=>{a().set(g,b>>>0)};function Ku(g,b,E,S){function R(P,ve,Ce){for(P=typeof P=="number"?P.toString():P||"";P.length<ve;)P=Ce[0]+P;return P}function F(P,ve){return R(P,ve,"0")}function q(P,ve){function Ce(ul){return 0>ul?-1:0<ul?1:0}var rn;return(rn=Ce(P.getFullYear()-ve.getFullYear()))===0&&(rn=Ce(P.getMonth()-ve.getMonth()))===0&&(rn=Ce(P.getDate()-ve.getDate())),rn}function De(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function gr(P){var ve=P.Ra;for(P=new Date(new Date(P.Sa+1900,0,1).getTime());0<ve;){var Ce=P.getMonth(),rn=(In(P.getFullYear())?Yu:Zu)[Ce];if(ve>rn-P.getDate())ve-=rn-P.getDate()+1,P.setDate(1),11>Ce?P.setMonth(Ce+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ve);break}}return Ce=new Date(P.getFullYear()+1,0,4),ve=De(new Date(P.getFullYear(),0,4)),Ce=De(Ce),0>=q(ve,P)?0>=q(Ce,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}g>>>=0,b>>>=0,E>>>=0,S>>>=0;var He=l()[S+40>>>2>>>0];S={ob:s()[S>>>2>>>0],nb:s()[S+4>>>2>>>0],Ta:s()[S+8>>>2>>>0],Xa:s()[S+12>>>2>>>0],Ua:s()[S+16>>>2>>>0],Sa:s()[S+20>>>2>>>0],Na:s()[S+24>>>2>>>0],Ra:s()[S+28>>>2>>>0],ub:s()[S+32>>>2>>>0],mb:s()[S+36>>>2>>>0],pb:He?En(He):""},E=En(E),He={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var St in He)E=E.replace(new RegExp(St,"g"),He[St]);var al="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),sl="January February March April May June July August September October November December".split(" ");He={"%a":P=>al[P.Na].substring(0,3),"%A":P=>al[P.Na],"%b":P=>sl[P.Ua].substring(0,3),"%B":P=>sl[P.Ua],"%C":P=>F((P.Sa+1900)/100|0,2),"%d":P=>F(P.Xa,2),"%e":P=>R(P.Xa,2," "),"%g":P=>gr(P).toString().substring(2),"%G":P=>gr(P),"%H":P=>F(P.Ta,2),"%I":P=>(P=P.Ta,P==0?P=12:12<P&&(P-=12),F(P,2)),"%j":P=>{for(var ve=0,Ce=0;Ce<=P.Ua-1;ve+=(In(P.Sa+1900)?Yu:Zu)[Ce++]);return F(P.Xa+ve,3)},"%m":P=>F(P.Ua+1,2),"%M":P=>F(P.nb,2),"%n":()=>`
`,"%p":P=>0<=P.Ta&&12>P.Ta?"AM":"PM","%S":P=>F(P.ob,2),"%t":()=>"	","%u":P=>P.Na||7,"%U":P=>F(Math.floor((P.Ra+7-P.Na)/7),2),"%V":P=>{var ve=Math.floor((P.Ra+7-(P.Na+6)%7)/7);if(2>=(P.Na+371-P.Ra-2)%7&&ve++,ve)ve==53&&(Ce=(P.Na+371-P.Ra)%7,Ce==4||Ce==3&&In(P.Sa)||(ve=1));else{ve=52;var Ce=(P.Na+7-P.Ra-1)%7;(Ce==4||Ce==5&&In(P.Sa%400-1))&&ve++}return F(ve,2)},"%w":P=>P.Na,"%W":P=>F(Math.floor((P.Ra+7-(P.Na+6)%7)/7),2),"%y":P=>(P.Sa+1900).toString().substring(2),"%Y":P=>P.Sa+1900,"%z":P=>{P=P.mb;var ve=0<=P;return P=Math.abs(P)/60,(ve?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.pb,"%%":()=>"%"},E=E.replace(/%%/g,"\0\0");for(St in He)E.includes(St)&&(E=E.replace(new RegExp(St,"g"),He[St](S)));return E=E.replace(/\0\0/g,"%"),St=ep(E),St.length>b?0:(tp(St,g),St.length-1)}te.Wa();var rp=[ie,Jo,M,Q,le,Ye,so,uo,O,pe,xe,pr,lo,Ru,Fu,ku,$u,Vu,Hu,zu,Gu,Wu,qu,Xu],np={b:function(g,b,E){throw g>>>=0,new w(g).Wa(b>>>0,E>>>0),T=g,A++,T},L:function(g){el(g>>>0,!x,1,!v,131072,!1),te.ab()},j:function(g){g>>>=0,_?postMessage({cmd:"cleanupThread",thread:g}):te.Za(te.Ma[g])},H:G,h:Q,S:le,D:Ye,F:so,T:uo,Q:O,J:pe,P:xe,n:pr,E:lo,B:Ru,R:Fu,C:ku,p:()=>1,z:function(g,b){g>>>=0,g==b>>>0?setTimeout(()=>ei()):_?postMessage({targetThread:g,cmd:"checkMailbox"}):(g=te.Ma[g])&&g.postMessage({cmd:"checkMailbox"})},I:function(g,b,E,S){b>>>=0,ca.length=E,S=S>>>0>>>3;for(var R=0;R<E;R++)ca[R]=o()[S+R>>>0];return g=0>g?wn[-g-1]:rp[g],te.ib=b,b=g.apply(null,ca),te.ib=0,b},K:la,o:function(g){y&&te.Ma[g>>>0].ref()},s:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getUTCSeconds(),s()[E+4>>>2>>>0]=g.getUTCMinutes(),s()[E+8>>>2>>>0]=g.getUTCHours(),s()[E+12>>>2>>>0]=g.getUTCDate(),s()[E+16>>>2>>>0]=g.getUTCMonth(),s()[E+20>>>2>>>0]=g.getUTCFullYear()-1900,s()[E+24>>>2>>>0]=g.getUTCDay(),g=(g.getTime()-Date.UTC(g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[E+28>>>2>>>0]=g},t:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getSeconds(),s()[E+4>>>2>>>0]=g.getMinutes(),s()[E+8>>>2>>>0]=g.getHours(),s()[E+12>>>2>>>0]=g.getDate(),s()[E+16>>>2>>>0]=g.getMonth(),s()[E+20>>>2>>>0]=g.getFullYear()-1900,s()[E+24>>>2>>>0]=g.getDay(),b=(In(g.getFullYear())?Lu:Bu)[g.getMonth()]+g.getDate()-1|0,s()[E+28>>>2>>>0]=b,s()[E+36>>>2>>>0]=-(60*g.getTimezoneOffset()),b=new Date(g.getFullYear(),6,1).getTimezoneOffset();var S=new Date(g.getFullYear(),0,1).getTimezoneOffset();g=(b!=S&&g.getTimezoneOffset()==Math.min(S,b))|0,s()[E+32>>>2>>>0]=g},u:function(g){g>>>=0;var b=new Date(s()[g+20>>>2>>>0]+1900,s()[g+16>>>2>>>0],s()[g+12>>>2>>>0],s()[g+8>>>2>>>0],s()[g+4>>>2>>>0],s()[g>>>2>>>0],0),E=s()[g+32>>>2>>>0],S=b.getTimezoneOffset(),R=new Date(b.getFullYear(),6,1).getTimezoneOffset(),F=new Date(b.getFullYear(),0,1).getTimezoneOffset(),q=Math.min(F,R);return 0>E?s()[g+32>>>2>>>0]=+(R!=F&&q==S):0<E!=(q==S)&&(R=Math.max(F,R),b.setTime(b.getTime()+6e4*((0<E?q:R)-S))),s()[g+24>>>2>>>0]=b.getDay(),E=(In(b.getFullYear())?Lu:Bu)[b.getMonth()]+b.getDate()-1|0,s()[g+28>>>2>>>0]=E,s()[g>>>2>>>0]=b.getSeconds(),s()[g+4>>>2>>>0]=b.getMinutes(),s()[g+8>>>2>>>0]=b.getHours(),s()[g+12>>>2>>>0]=b.getDate(),s()[g+16>>>2>>>0]=b.getMonth(),s()[g+20>>>2>>>0]=b.getYear(),g=b.getTime(),isNaN(g)?(s()[Qu()>>>2>>>0]=61,g=-1):g/=1e3,nl((Ar=g,1<=+Math.abs(Ar)?0<Ar?+Math.floor(Ar/4294967296)>>>0:~~+Math.ceil((Ar-+(~~Ar>>>0))/4294967296)>>>0:0)),g>>>0},q:$u,r:Vu,y:function(g,b,E){function S(He){return(He=He.toTimeString().match(/\(([A-Za-z ]+)\)$/))?He[1]:"GMT"}g>>>=0,b>>>=0,E>>>=0;var R=new Date().getFullYear(),F=new Date(R,0,1),q=new Date(R,6,1);R=F.getTimezoneOffset();var De=q.getTimezoneOffset(),gr=Math.max(R,De);l()[g>>>2>>>0]=60*gr,s()[b>>>2>>>0]=+(R!=De),g=S(F),b=S(q),g=ju(g),b=ju(b),De<R?(l()[E>>>2>>>0]=g,l()[E+4>>>2>>>0]=b):(l()[E>>>2>>>0]=b,l()[E+4>>>2>>>0]=g)},c:()=>{vn("")},O:function(g,b,E){g>>>=0,b>>>=0,E>>>=0,fa.length=0;for(var S;S=u()[b++>>>0];){var R=S!=105;R&=S!=112,E+=R&&E%8?4:0,fa.push(S==112?l()[E>>>2>>>0]:S==105?s()[E>>>2>>>0]:o()[E>>>3>>>0]),E+=R?8:4}return wn[g].apply(null,fa)},k:()=>{},i:()=>Date.now(),U:()=>{throw en+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>y?(VX(),Du(I6)).cpus().length:navigator.hardwareConcurrency,x:function(g){g>>>=0;var b=u().length;if(g<=b||4294901760<g)return!1;for(var E=1;4>=E;E*=2){var S=b*(1+.2/E);S=Math.min(S,g+100663296);var R=Math;S=Math.max(g,S);e:{R=(R.min.call(R,4294901760,S+(65536-S%65536)%65536)-he.buffer.byteLength+65535)/65536;try{he.grow(R),Pt();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},M:Hu,N:zu,G:Tn,g:Gu,m:Wu,v:qu,l:Xu,a:he||c.wasmMemory,w:Ku,d:function(g,b,E,S){return Ku(g>>>0,b>>>0,E>>>0,S>>>0)}},J=function(){function g(E,S){return J=E.exports,J=op(),te.bb.push(J.za),ao=J.Aa,jr.unshift(J.V),yt=S,yn(),J}var b={a:np};if(Se++,c.instantiateWasm)try{return c.instantiateWasm(b,g)}catch(E){Z(`Module.instantiateWasm callback failed with error: ${E}`),d(E)}return Yo(b,function(E){g(E.instance,E.module)}).catch(d),{}}();c._OrtInit=(g,b)=>(c._OrtInit=J.W)(g,b),c._OrtGetLastError=(g,b)=>(c._OrtGetLastError=J.X)(g,b),c._OrtCreateSessionOptions=(g,b,E,S,R,F,q,De,gr,He)=>(c._OrtCreateSessionOptions=J.Y)(g,b,E,S,R,F,q,De,gr,He),c._OrtAppendExecutionProvider=(g,b)=>(c._OrtAppendExecutionProvider=J.Z)(g,b),c._OrtAddFreeDimensionOverride=(g,b,E)=>(c._OrtAddFreeDimensionOverride=J._)(g,b,E),c._OrtAddSessionConfigEntry=(g,b,E)=>(c._OrtAddSessionConfigEntry=J.$)(g,b,E),c._OrtReleaseSessionOptions=g=>(c._OrtReleaseSessionOptions=J.aa)(g),c._OrtCreateSession=(g,b,E)=>(c._OrtCreateSession=J.ba)(g,b,E),c._OrtReleaseSession=g=>(c._OrtReleaseSession=J.ca)(g),c._OrtGetInputOutputCount=(g,b,E)=>(c._OrtGetInputOutputCount=J.da)(g,b,E),c._OrtGetInputName=(g,b)=>(c._OrtGetInputName=J.ea)(g,b),c._OrtGetOutputName=(g,b)=>(c._OrtGetOutputName=J.fa)(g,b),c._OrtFree=g=>(c._OrtFree=J.ga)(g),c._OrtCreateTensor=(g,b,E,S,R,F)=>(c._OrtCreateTensor=J.ha)(g,b,E,S,R,F),c._OrtGetTensorData=(g,b,E,S,R)=>(c._OrtGetTensorData=J.ia)(g,b,E,S,R),c._OrtReleaseTensor=g=>(c._OrtReleaseTensor=J.ja)(g),c._OrtCreateRunOptions=(g,b,E,S)=>(c._OrtCreateRunOptions=J.ka)(g,b,E,S),c._OrtAddRunConfigEntry=(g,b,E)=>(c._OrtAddRunConfigEntry=J.la)(g,b,E),c._OrtReleaseRunOptions=g=>(c._OrtReleaseRunOptions=J.ma)(g),c._OrtCreateBinding=g=>(c._OrtCreateBinding=J.na)(g),c._OrtBindInput=(g,b,E)=>(c._OrtBindInput=J.oa)(g,b,E),c._OrtBindOutput=(g,b,E,S)=>(c._OrtBindOutput=J.pa)(g,b,E,S),c._OrtClearBoundOutputs=g=>(c._OrtClearBoundOutputs=J.qa)(g),c._OrtReleaseBinding=g=>(c._OrtReleaseBinding=J.ra)(g),c._OrtRunWithBinding=(g,b,E,S,R)=>(c._OrtRunWithBinding=J.sa)(g,b,E,S,R),c._OrtRun=(g,b,E,S,R,F,q,De)=>(c._OrtRun=J.ta)(g,b,E,S,R,F,q,De),c._OrtEndProfiling=g=>(c._OrtEndProfiling=J.ua)(g);var Qu=()=>(Qu=J.va)(),ti=c._pthread_self=()=>(ti=c._pthread_self=J.wa)(),Ju=c._malloc=g=>(Ju=c._malloc=J.xa)(g);c._free=g=>(c._free=J.ya)(g),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=J.za)();var el=c.__emscripten_thread_init=(g,b,E,S,R,F)=>(el=c.__emscripten_thread_init=J.Ba)(g,b,E,S,R,F);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=J.Ca)();var tl=(g,b,E,S)=>(tl=J.Da)(g,b,E,S),pa=g=>(pa=J.Ea)(g),ga=c.__emscripten_thread_exit=g=>(ga=c.__emscripten_thread_exit=J.Fa)(g),rl=()=>(rl=J.Ga)(),nl=g=>(nl=J.Ha)(g),ol=(g,b)=>(ol=J.Ia)(g,b),ma=()=>(ma=J.Ja)(),ri=g=>(ri=J.Ka)(g),ya=g=>(ya=J.La)(g);function op(){var g=J;g=Object.assign({},g);var b=S=>()=>S()>>>0,E=S=>R=>S(R)>>>0;return g.va=b(g.va),g.wa=b(g.wa),g.xa=E(g.xa),g.emscripten_main_runtime_thread_id=b(g.emscripten_main_runtime_thread_id),g.Ja=b(g.Ja),g.La=E(g.La),g}c.wasmMemory=he,c.stackAlloc=ya,c.stackSave=ma,c.stackRestore=ri,c.keepRuntimeAlive=()=>0<en,c.UTF8ToString=En,c.stringToUTF8=Xe,c.lengthBytesUTF8=Ve,c.ExitStatus=Hr,c.PThread=te;var ni;er=function g(){ni||il(),ni||(er=g)};function il(){if(!(0<Se))if(_)f(c),_||tn(jr),startWorker(c);else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Yt.unshift(c.preRun.shift());tn(Yt),0<Se||ni||(ni=!0,c.calledRun=!0,qe||(_||tn(jr),f(c),_||tn(Ae)))}}return il(),i.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),UX=Mu((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),jN,UN,Rv,Xh,uf,Fv,HN,zN,GN,S6,Vr,gf=lt(()=>{"use strict";jN=LX(),UN=jX(),Xh=!1,uf=!1,Fv=!1,HN=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},zN=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},GN=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",S6=t=>U(void 0,null,function*(){if(Xh)return Promise.resolve();if(uf)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(Fv)throw new Error("previous call to 'initializeWebAssembly()' failed.");uf=!0;let e=t.initTimeout,r=t.numThreads,n=t.simd,i=HN(r),a=n&&zN(),u=t.wasmPaths,s=typeof u=="string"?u:void 0,l=GN(a,i),o=typeof u=="object"?u[l]:void 0,c=!1,f=[];if(e>0&&f.push(new Promise(d=>{setTimeout(()=>{c=!0,d()},e)})),f.push(new Promise((d,h)=>{let p=i?UN:jN,m={locateFile:(v,x)=>i&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([UX()],{type:"text/javascript"})):v.endsWith(".wasm")?o||(s??x)+l:x+v};if(i)if(m.numThreads=r,typeof Blob>"u")m.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${p.toString()};`;m.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}p(m).then(v=>{uf=!1,Xh=!0,Rv=v,d()},v=>{uf=!1,Fv=!0,h(v)})})),yield Promise.race(f),c)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)}),Vr=()=>{if(Xh&&Rv)return Rv;throw new Error("WebAssembly is not initialized yet.")}}),Mr,Kh,_r,Zv=lt(()=>{"use strict";gf(),Mr=(t,e)=>{let r=Vr(),n=r.lengthBytesUTF8(t)+1,i=r._malloc(n);return r.stringToUTF8(t,i,n),e.push(i),i},Kh=(t,e,r,n)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([i,a])=>{let u=e?e+i:i;if(typeof a=="object")Kh(a,u+".",r,n);else if(typeof a=="string"||typeof a=="number")n(u,a.toString());else if(typeof a=="boolean")n(u,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},_r=t=>{let e=Vr(),r=e.stackSave();try{let n=e.stackAlloc(8);e._OrtGetLastError(n,n+4);let i=e.HEAP32[n/4],a=e.HEAPU32[n/4+1],u=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${i}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}}),D6,HX=lt(()=>{"use strict";gf(),Zv(),D6=t=>{let e=Vr(),r=0,n=[],i=t||{};try{if(t?.logSeverityLevel===void 0)i.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)i.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(i.terminate=!1);let a=0;return t?.tag!==void 0&&(a=Mr(t.tag,n)),r=e._OrtCreateRunOptions(i.logSeverityLevel,i.logVerbosityLevel,!!i.terminate,a),r===0&&_r("Can't create run options."),t?.extra!==void 0&&Kh(t.extra,"",new WeakSet,(u,s)=>{let l=Mr(u,n),o=Mr(s,n);e._OrtAddRunConfigEntry(r,l,o)!==0&&_r(`Can't set a run config entry: ${u} - ${s}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseRunOptions(r),n.forEach(u=>e._free(u)),a}}}),WN,qN,XN,YN,C6,zX=lt(()=>{"use strict";gf(),Zv(),WN=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},qN=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},XN=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},YN=(t,e,r)=>{for(let n of e){let i=typeof n=="string"?n:n.name;switch(i){case"webnn":if(i="WEBNN",typeof n!="string"){let u=n;if(u?.deviceType){let s=Mr("deviceType",r),l=Mr(u.deviceType,r);Vr()._OrtAddSessionConfigEntry(t,s,l)!==0&&_r(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let s=u.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let l=Mr("numThreads",r),o=Mr(s.toString(),r);Vr()._OrtAddSessionConfigEntry(t,l,o)!==0&&_r(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let s=Mr("powerPreference",r),l=Mr(u.powerPreference,r);Vr()._OrtAddSessionConfigEntry(t,s,l)!==0&&_r(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(i="JS",typeof n!="string"){let u=n;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let s=Mr("preferredLayout",r),l=Mr(u.preferredLayout,r);Vr()._OrtAddSessionConfigEntry(t,s,l)!==0&&_r(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${i}`)}let a=Mr(i,r);Vr()._OrtAppendExecutionProvider(t,a)!==0&&_r(`Can't append execution provider: ${i}.`)}},C6=t=>{let e=Vr(),r=0,n=[],i=t||{};XN(i);try{let a=WN(i.graphOptimizationLevel??"all"),u=qN(i.executionMode??"sequential"),s=typeof i.logId=="string"?Mr(i.logId,n):0,l=i.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let o=i.logVerbosityLevel??0;if(!Number.isInteger(o)||o<0||o>4)throw new Error(`log verbosity level is not valid: ${o}`);let c=typeof i.optimizedModelFilePath=="string"?Mr(i.optimizedModelFilePath,n):0;if(r=e._OrtCreateSessionOptions(a,!!i.enableCpuMemArena,!!i.enableMemPattern,u,!!i.enableProfiling,0,s,l,o,c),r===0&&_r("Can't create session options."),i.executionProviders&&YN(r,i.executionProviders,n),i.freeDimensionOverrides)for(let[f,d]of Object.entries(i.freeDimensionOverrides)){if(typeof f!="string")throw new Error(`free dimension override name must be a string: ${f}`);if(typeof d!="number"||!Number.isInteger(d)||d<0)throw new Error(`free dimension override value must be a non-negative integer: ${d}`);let h=Mr(f,n);e._OrtAddFreeDimensionOverride(r,h,d)!==0&&_r(`Can't set a free dimension override: ${f} - ${d}.`)}return i.extra!==void 0&&Kh(i.extra,"",new WeakSet,(f,d)=>{let h=Mr(f,n),p=Mr(d,n);e._OrtAddSessionConfigEntry(r,h,p)!==0&&_r(`Can't set a session config entry: ${f} - ${d}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseSessionOptions(r),n.forEach(u=>e._free(u)),a}}}),Vv,O6,jv,P6,M6,Kv,N6,R6=lt(()=>{"use strict";Vv=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},O6=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},jv=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],P6=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},M6=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},Kv=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",N6=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),Qh,F6=lt(()=>{"use strict";Qh=t=>U(void 0,null,function*(){if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(yield(void 0)(t))}catch(a){if(a.code==="ERR_FS_FILE_TOO_LARGE"){let u=(void 0)(t),s=[];try{for(var e=mf(u),r,n,i;r=!(n=yield e.next()).done;r=!1){let l=n.value;s.push(l)}}catch{i=[n]}finally{try{r&&(n=e.return)&&(yield n.call(e))}finally{if(i)throw i[0]}}return new Uint8Array(Buffer.concat(s))}throw a}else{let a=yield fetch(t);if(!a.ok)throw new Error(`failed to load external data file: ${t}`);let u=a.headers.get("Content-Length"),s=u?parseInt(u,10):0;if(s<1073741824)return new Uint8Array(yield a.arrayBuffer());{if(!a.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let l=a.body.getReader(),o;try{o=new ArrayBuffer(s)}catch(f){if(f instanceof RangeError){let d=Math.ceil(s/65536);o=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw f}let c=0;for(;;){let{done:f,value:d}=yield l.read();if(f)break;let h=d.byteLength;new Uint8Array(o,c,h).set(d),c+=h}return new Uint8Array(o,0,s)}}else return t instanceof Blob?new Uint8Array(yield t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)})}),ZN,k6,L6,Au,KN,Uv,B6,$6,kv,V6,j6,U6,GX=lt(()=>{"use strict";HX(),zX(),R6(),gf(),Zv(),F6(),ZN=(t,e)=>{Vr()._OrtInit(t,e)!==0&&_r("Can't initialize onnxruntime.")},k6=t=>U(void 0,null,function*(){ZN(t.wasm.numThreads,M6(t.logLevel))}),L6=(t,e)=>U(void 0,null,function*(){}),Au=new Map,KN=t=>{let e=Vr(),r=e.stackSave();try{let n=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,n,n+4)!==0&&_r("Can't get session input/output count."),[e.HEAP32[n/4],e.HEAP32[n/4+1]]}finally{e.stackRestore(r)}},Uv=t=>{let e=Vr(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},B6=(t,e)=>U(void 0,null,function*(){let r,n,i=Vr();Array.isArray(t)?[r,n]=t:t.buffer===i.HEAPU8.buffer?[r,n]=[t.byteOffset,t.byteLength]:[r,n]=Uv(t);let a=0,u=0,s=0,l=[],o=[],c=[];try{if([u,l]=C6(e),e?.externalData&&i.mountExternalData){let x=[];for(let y of e.externalData){let _=typeof y=="string"?y:y.path;x.push(Qh(typeof y=="string"?y:y.data).then(I=>{i.mountExternalData(_,I)}))}yield Promise.all(x)}a=i._OrtCreateSession(r,n,u),a===0&&_r("Can't create a session.");let[f,d]=KN(a),h=[],p=[],m=[];for(let x=0;x<f;x++){let y=i._OrtGetInputName(a,x);y===0&&_r("Can't get an input name."),o.push(y),h.push(i.UTF8ToString(y))}for(let x=0;x<d;x++){let y=i._OrtGetOutputName(a,x);y===0&&_r("Can't get an output name."),c.push(y);let _=i.UTF8ToString(y);p.push(_)}return Au.set(a,[a,o,c,null]),[a,h,p]}catch(f){throw o.forEach(d=>i._OrtFree(d)),c.forEach(d=>i._OrtFree(d)),s!==0&&i._OrtReleaseBinding(s),a!==0&&i._OrtReleaseSession(a),f}finally{i._free(r),u!==0&&i._OrtReleaseSessionOptions(u),l.forEach(f=>i._free(f)),i.unmountExternalData?.()}}),$6=t=>{let e=Vr(),r=Au.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[n,i,a,u]=r;u&&e._OrtReleaseBinding(u.handle),e.jsepUnregisterBuffers?.(t),i.forEach(s=>e._OrtFree(s)),a.forEach(s=>e._OrtFree(s)),e._OrtReleaseSession(n),Au.delete(t)},kv=(t,e,r,n,i)=>{if(!t){e.push(0);return}let a=Vr(),u=t[0],s=t[1],l=t[3],o,c;if(u==="string"&&l==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(l==="gpu-buffer"){let h=t[2].gpuBuffer,p=jv(Vv(u));c=s.reduce((m,v)=>m*v,1)*p,o=a.jsepRegisterBuffer(n,i,h,c)}else{let h=t[2];if(Array.isArray(h)){c=4*h.length,o=a._malloc(c),r.push(o);let p=o/4;for(let m=0;m<h.length;m++){if(typeof h[m]!="string")throw new TypeError(`tensor data at index ${m} is not a string`);a.HEAPU32[p++]=Mr(h[m],r)}}else c=h.byteLength,o=a._malloc(c),r.push(o),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,c),o)}let f=a.stackSave(),d=a.stackAlloc(4*s.length);try{let h=d/4;s.forEach(m=>a.HEAP32[h++]=m);let p=a._OrtCreateTensor(Vv(u),o,c,d,s.length,N6(l));p===0&&_r(`Can't create tensor for input/output. session=${n}, index=${i}.`),e.push(p)}finally{a.stackRestore(f)}},V6=(t,e,r,n,i,a)=>U(void 0,null,function*(){let u=Vr(),s=Au.get(t);if(!s)throw new Error(`cannot run inference. invalid session id: ${t}`);let[l,o,c,f]=s,d=e.length,h=n.length,p=0,m=[],v=[],x=[],y=[],_=u.stackSave(),I=u.stackAlloc(d*4),C=u.stackAlloc(d*4),j=u.stackAlloc(h*4),z=u.stackAlloc(h*4);try{[p,m]=D6(a);for(let Z=0;Z<d;Z++)kv(r[Z],v,y,t,e[Z]);for(let Z=0;Z<h;Z++)kv(i[Z],x,y,t,d+n[Z]);let W=I/4,k=C/4,X=j/4,ke=z/4;for(let Z=0;Z<d;Z++)u.HEAPU32[W++]=v[Z],u.HEAPU32[k++]=o[e[Z]];for(let Z=0;Z<h;Z++)u.HEAPU32[X++]=x[Z],u.HEAPU32[ke++]=c[n[Z]];let me;me=yield u._OrtRun(l,C,I,d,z,h,j,p),me!==0&&_r("failed to call OrtRun().");let ye=[];for(let Z=0;Z<h;Z++){let he=u.HEAPU32[j/4+Z];if(he===x[Z]){ye.push(i[Z]);continue}let yt=u.stackSave(),qe=u.stackAlloc(4*4),Ue=!1,Ee,It=0;try{u._OrtGetTensorData(he,qe,qe+4,qe+8,qe+12)!==0&&_r(`Can't access output tensor data on index ${Z}.`);let At=qe/4,Ft=u.HEAPU32[At++];It=u.HEAPU32[At++];let vr=u.HEAPU32[At++],Pt=u.HEAPU32[At++],hr=[];for(let Ae=0;Ae<Pt;Ae++)hr.push(u.HEAPU32[vr/4+Ae]);u._OrtFree(vr);let Yt=hr.reduce((Ae,Se)=>Ae*Se,1);Ee=O6(Ft);let jr=f?.outputPreferredLocations[n[Z]];if(Ee==="string"){if(jr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ae=[],Se=It/4;for(let Er=0;Er<Yt;Er++){let er=u.HEAPU32[Se++],yn=Er===Yt-1?void 0:u.HEAPU32[Se]-er;Ae.push(u.UTF8ToString(er,yn))}ye.push([Ee,hr,Ae,"cpu"])}else if(jr==="gpu-buffer"&&Yt>0){let Ae=u.jsepGetBuffer(It),Se=jv(Ft);if(Se===void 0||!Kv(Ee))throw new Error(`Unsupported data type: ${Ee}`);Ue=!0,ye.push([Ee,hr,{gpuBuffer:Ae,download:u.jsepCreateDownloader(Ae,Yt*Se,Ee),dispose:()=>{u._OrtReleaseTensor(he)}},"gpu-buffer"])}else{let Ae=P6(Ee),Se=new Ae(Yt);new Uint8Array(Se.buffer,Se.byteOffset,Se.byteLength).set(u.HEAPU8.subarray(It,It+Se.byteLength)),ye.push([Ee,hr,Se,"cpu"])}}finally{u.stackRestore(yt),Ee==="string"&&It&&u._free(It),Ue||u._OrtReleaseTensor(he)}}return f&&u._OrtClearBoundOutputs(f.handle),ye}finally{u.stackRestore(_),v.forEach(W=>u._OrtReleaseTensor(W)),x.forEach(W=>u._OrtReleaseTensor(W)),y.forEach(W=>u._free(W)),p!==0&&u._OrtReleaseRunOptions(p),m.forEach(W=>u._free(W))}}),j6=t=>{let e=Vr(),r=Au.get(t);if(!r)throw new Error("invalid session id");let n=r[0],i=e._OrtEndProfiling(n);i===0&&_r("Can't get an profile file name."),e._OrtFree(i)},U6=t=>{let e=[];for(let r of t){let n=r[2];!Array.isArray(n)&&"buffer"in n&&e.push(n.buffer)}return e}}),WX=Mu((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.17.1\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var et=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of Xr(d))!Qr.call(u,l)&&l!==a&&Et(u,l,{get:()=>d[l],enumerable:!(h=Jr(d,l))||h.enumerable});return u};var tt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=et((mr,xt)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,l;a.ready=new Promise((r,o)=>{h=r,l=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",A=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="",B,F,U;if(D){var k=(Mt(),tt(At)),L=(Dt(),tt(Ct));I=A?L.dirname(I)+"/":__dirname+"/",B=(r,o)=>(r=ye(r)?new URL(r):L.normalize(r),k.readFileSync(r,o?void 0:"utf8")),U=r=>(r=B(r,!0),r.buffer||(r=new Uint8Array(r)),r),F=(r,o,s,m=!0)=>{r=ye(r)?new URL(r):L.normalize(r),k.readFile(r,m?void 0:"utf8",(O,S)=>{O?s(O):o(m?S.buffer:S)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||A)&&(A?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),u&&(I=u),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",B=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},A&&(U=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),F=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var _=console.log.bind(console),x=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var N,he=!1,ie,ae,E,Y,ue;function Re(){var r=N.buffer;a.HEAP8=ie=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ae=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=E=new Int32Array(r),a.HEAPU32=Y=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=ue=new Float64Array(r)}var Ie=[],ee=[],j=[],ce=0,P=null,te=null;function de(r){throw r="Aborted("+r+")",x(r),he=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var ge=r=>r.startsWith("data:application/octet-stream;base64,"),ye=r=>r.startsWith("file://"),J;if(J="ort-wasm.wasm",!ge(J)){var fe=J;J=a.locateFile?a.locateFile(fe,I):I+fe}function we(r){if(U)return U(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(i||A){if(typeof fetch=="function"&&!ye(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>we(r));if(F)return new Promise((o,s)=>{F(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>we(r))}function Me(r,o,s){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{x(`failed to asynchronously prepare wasm: ${m}`),de(m)})}function Fe(r,o){var s=J;return typeof WebAssembly.instantiateStreaming!="function"||ge(s)||ye(s)||D||typeof fetch!="function"?Me(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return x(`wasm streaming compile failed: ${O}`),x("falling back to ArrayBuffer instantiation"),Me(s,r,o)}))}var Ee,pe={919888:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=be(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ae.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Oe(r){this.xa=r-24,this.Ha=function(o){Y[this.xa+4>>>2>>>0]=o},this.Ga=function(o){Y[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){Y[this.xa+16>>>2>>>0]=0}}var ve=0,re=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&Z)return Z.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var S=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|S);else{var R=r[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|R:(O&7)<<18|S<<12|R<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},be=(r,o)=>(r>>>=0)?Ce(ae,r,o):"",_e=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},ke=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var S=0;S<r.length;++S){var R=r.charCodeAt(S);if(55296<=R&&57343>=R){var K=r.charCodeAt(++S);R=65536+((R&1023)<<10)|K&1023}if(127>=R){if(s>=m)break;o[s++>>>0]=R}else{if(2047>=R){if(s+1>=m)break;o[s++>>>0]=192|R>>6}else{if(65535>=R){if(s+2>=m)break;o[s++>>>0]=224|R>>12}else{if(s+3>=m)break;o[s++>>>0]=240|R>>18,o[s++>>>0]=128|R>>12&63}o[s++>>>0]=128|R>>6&63}o[s++>>>0]=128|R&63}}return o[s>>>0]=0,s-O},Ue=r=>r%4===0&&(r%100!==0||r%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],De=r=>{var o=_e(r)+1,s=st(o);return s&&ke(r,ae,s,o),s},Ne=[],Pe={},He=()=>{if(!$e){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete r[o]:r[o]=Pe[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);$e=s}return $e},$e,Le=[null,[],[]],qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(r){var o=Array(_e(r)+1);return ke(r,o,0,o.length),o}function ot(r,o,s,m){function O(c,W,G){for(c=typeof c=="number"?c.toString():c||"";c.length<W;)c=G[0]+c;return c}function S(c,W){return O(c,W,"0")}function R(c,W){function G(Ke){return 0>Ke?-1:0<Ke?1:0}var Se;return(Se=G(c.getFullYear()-W.getFullYear()))===0&&(Se=G(c.getMonth()-W.getMonth()))===0&&(Se=G(c.getDate()-W.getDate())),Se}function K(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function le(c){var W=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<W;){var G=c.getMonth(),Se=(Ue(c.getFullYear())?qe:Ve)[G];if(W>Se-c.getDate())W-=Se-c.getDate()+1,c.setDate(1),11>G?c.setMonth(G+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+W);break}}return G=new Date(c.getFullYear()+1,0,4),W=K(new Date(c.getFullYear(),0,4)),G=K(G),0>=R(W,c)?0>=R(G,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var oe=Y[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:oe?be(oe):""},s=be(s),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)s=s.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ze="January February March April May June July August September October November December".split(" ");oe={"%a":c=>Qe[c.oa].substring(0,3),"%A":c=>Qe[c.oa],"%b":c=>Ze[c.wa].substring(0,3),"%B":c=>Ze[c.wa],"%C":c=>S((c.ua+1900)/100|0,2),"%d":c=>S(c.ya,2),"%e":c=>O(c.ya,2," "),"%g":c=>le(c).toString().substring(2),"%G":c=>le(c),"%H":c=>S(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var W=0,G=0;G<=c.wa-1;W+=(Ue(c.ua+1900)?qe:Ve)[G++]);return S(c.ya+W,3)},"%m":c=>S(c.wa+1,2),"%M":c=>S(c.Ca,2),"%n":()=>`\n`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>S(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>S(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var W=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&W++,W)W==53&&(G=(c.oa+371-c.ta)%7,G==4||G==3&&Ue(c.ua)||(W=1));else{W=52;var G=(c.oa+7-c.ta-1)%7;(G==4||G==5&&Ue(c.ua%400-1))&&W++}return S(W,2)},"%w":c=>c.oa,"%W":c=>S(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var W=0<=c;return c=Math.abs(c)/60,(W?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in oe)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),oe[se](m)));return s=s.replace(/\\0\\0/g,"%"),se=Ge(s),se.length>o?0:(ie.set(se,r>>>0),se.length-1)}var $={a:function(r,o,s){throw r>>>=0,new Oe(r).Aa(o>>>0,s>>>0),ve=r,re++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getUTCSeconds(),E[s+4>>>2>>>0]=r.getUTCMinutes(),E[s+8>>>2>>>0]=r.getUTCHours(),E[s+12>>>2>>>0]=r.getUTCDate(),E[s+16>>>2>>>0]=r.getUTCMonth(),E[s+20>>>2>>>0]=r.getUTCFullYear()-1900,E[s+24>>>2>>>0]=r.getUTCDay(),E[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getSeconds(),E[s+4>>>2>>>0]=r.getMinutes(),E[s+8>>>2>>>0]=r.getHours(),E[s+12>>>2>>>0]=r.getDate(),E[s+16>>>2>>>0]=r.getMonth(),E[s+20>>>2>>>0]=r.getFullYear()-1900,E[s+24>>>2>>>0]=r.getDay(),E[s+28>>>2>>>0]=(Ue(r.getFullYear())?ze:at)[r.getMonth()]+r.getDate()-1|0,E[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(E[r+20>>>2>>>0]+1900,E[r+16>>>2>>>0],E[r+12>>>2>>>0],E[r+8>>>2>>>0],E[r+4>>>2>>>0],E[r>>>2>>>0],0),s=E[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(S,O);return 0>s?E[r+32>>>2>>>0]=+(O!=S&&R==m):0<s!=(R==m)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?R:O)-m))),E[r+24>>>2>>>0]=o.getDay(),E[r+28>>>2>>>0]=(Ue(o.getFullYear())?ze:at)[o.getMonth()]+o.getDate()-1|0,E[r>>>2>>>0]=o.getSeconds(),E[r+4>>>2>>>0]=o.getMinutes(),E[r+8>>>2>>>0]=o.getHours(),E[r+12>>>2>>>0]=o.getDate(),E[r+16>>>2>>>0]=o.getMonth(),E[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(E[Ye()>>>2>>>0]=61,r=-1):r/=1e3,Je((Ee=r,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),R=new Date(O,6,1);O=S.getTimezoneOffset();var K=R.getTimezoneOffset();Y[r>>>0>>>2>>>0]=60*Math.max(O,K),E[o>>>0>>>2>>>0]=+(O!=K),r=m(S),o=m(R),r=De(r),o=De(o),K<O?(Y[s>>>2>>>0]=r,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=r)},d:()=>{de("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ae[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?Y[s>>>2>>>0]:m==105?E[s>>>2>>>0]:ue[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ae.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ae.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(O),Re();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var S=o+s;for(O=Y[r+4*O>>>2>>>0]=S,S=0;S<m.length;++S)ie[O++>>>0>>>0]=m.charCodeAt(S);ie[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();Y[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),Y[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,S=0;S<s;S++){var R=Y[o>>>2>>>0],K=Y[o+4>>>2>>>0];o+=8;for(var le=0;le<K;le++){var oe=ae[R+le>>>0],se=Le[r];oe===0||oe===10?((r===1?_:x)(Ce(se,0)),se.length=0):se.push(oe)}O+=K}return Y[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),N=C.K,Re(),ee.unshift(C.L),ce--,ce==0&&(P!==null&&(clearInterval(P),P=null),te&&(s=te,te=null,s())),C}var o={a:$};if(ce++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){x(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Fe(o,function(s){r(s.instance)}).catch(l),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,S,R,K,le,oe)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,S,R,K,le,oe),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,S)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,S),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,S,R,K)=>(a._OrtRun=C.ja)(r,o,s,m,O,S,R,K),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var Ye=()=>(Ye=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Je=r=>(Je=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),Be=r=>(Be=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=Be,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=be,a.stringToUTF8=(r,o,s)=>ke(r,ae,o,s),a.lengthBytesUTF8=_e;var xe;te=function r(){xe||Xe(),xe||(te=r)};function Xe(){if(!(0<ce)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();Ie.unshift(r)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<ce||xe||(xe=!0,a.calledRun=!0,he))){for(;0<ee.length;)ee.shift()(a);for(h(a);0<j.length;)j.shift()(a)}}}return Xe(),d.ready}})();typeof mr=="object"&&typeof xt=="object"?xt.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=et(()=>{});var yr=et(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=et((vr,Ft)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return j.buffer!=de.buffer&&we(),de}function h(){return j.buffer!=de.buffer&&we(),ge}function l(){return j.buffer!=de.buffer&&we(),ye}function w(){return j.buffer!=de.buffer&&we(),J}function g(){return j.buffer!=de.buffer&&we(),fe}var i=d,A,D;i.ready=new Promise((e,t)=>{A=e,D=t});var I=Object.assign({},i),B="./this.program",F=(e,t)=>{throw t},U=typeof window=="object",k=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,x="";function N(e){return i.locateFile?i.locateFile(e,x):x+e}var he,ie,ae;if(L){var E=(Mt(),tt(At)),Y=(Dt(),tt(Ct));x=k?Y.dirname(x)+"/":__dirname+"/",he=(t,n)=>(t=be(t)?new URL(t):Y.normalize(t),E.readFileSync(t,n?void 0:"utf8")),ae=t=>(t=he(t,!0),t.buffer||(t=new Uint8Array(t)),t),ie=(t,n,f,y=!0)=>{t=be(t)?new URL(t):Y.normalize(t),E.readFile(t,y?void 0:"utf8",(b,v)=>{b?f(b):n(y?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),F=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(U||k)&&(k?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof u<"u"&&u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",L||(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(ae=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=(e,t,n)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?t(f.response):n()},f.onerror=n,f.send(null)}));L&&typeof performance>"u"&&(global.performance=yr().performance);var ue=console.log.bind(console),Re=console.error.bind(console);L&&(ue=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=ue,ee=Re;Object.assign(i,I),I=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var j,ce,P=!1,te,de,ge,ye,J,fe;function we(){var e=j.buffer;i.HEAP8=de=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ge=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ye=new Int32Array(e),i.HEAPU32=J=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=fe=new Float64Array(e)}var Ae=16777216;if(_)j=i.wasmMemory;else if(i.wasmMemory)j=i.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");we(),Ae=j.buffer.byteLength;var Me=[],Fe=[],Ee=[],pe=0,Oe=null,ve=null;function re(){if(pe--,pe==0&&(Oe!==null&&(clearInterval(Oe),Oe=null),ve)){var e=ve;ve=null,e()}}function Z(e){throw e="Aborted("+e+")",ee(e),P=!0,te=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Ce=e=>e.startsWith("data:application/octet-stream;base64,"),be=e=>e.startsWith("file://"),_e;_e="ort-wasm-threaded.wasm",Ce(_e)||(_e=N(_e));function ke(e){if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function Ue(e){if(U||k){if(typeof fetch=="function"&&!be(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ke(e));if(ie)return new Promise((t,n)=>{ie(e,f=>t(new Uint8Array(f)),n)})}return Promise.resolve().then(()=>ke(e))}function ze(e,t,n){return Ue(e).then(f=>WebAssembly.instantiate(f,t)).then(f=>f).then(n,f=>{ee(`failed to asynchronously prepare wasm: ${f}`),Z(f)})}function at(e,t){var n=_e;return typeof WebAssembly.instantiateStreaming!="function"||Ce(n)||be(n)||L||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,e).then(t,function(y){return ee(`wasm streaming compile failed: ${y}`),ee("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var De,Ne={921276:(e,t,n,f)=>{if(typeof i>"u"||!i.cb)return 1;if(e=Ge(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,f>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),f>>>0),0}catch{return 4}}};function Pe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},$e=e=>{M.Pa.length==0&&(Je(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return L&&t.unref(),t.postMessage(n,e.qb),0},Le=0,qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ve=(e,t,n)=>{t>>>=0;var f=t+n;for(n=t;e[n]&&!(n>=f);)++n;if(16<n-t&&e.buffer&&qe)return qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(f="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var v=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[t++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},Ge=(e,t)=>(e>>>=0)?Ve(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function $(e,t){var n=arguments.length-2,f=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,v=0;v<n;v++){var z=f[2+v];g()[b+v>>>0]=z}return ar(e,n,y,t)})}function C(e){if(_)return $(0,1,e);te=e,0<Le||(M.lb(),i.onExit?.(e),P=!0),F(e,new Pe(e))}var Ye=e=>{if(te=e,_)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Je();Me.unshift(()=>{pe++,it(()=>re())})}function Je(){var e=N("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){_?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>te=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var z=M.Ma[b.targetThread];z?z.postMessage(b,b.transferList):ee(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ft():v==="spawnThread"?$e(b):v==="cleanupThread"?M.Za(M.Ma[b.thread]):v==="killThread"?(b=b.thread,v=M.Ma[b],delete M.Ma[b],He(v),wt(b),M.Qa.splice(M.Qa.indexOf(v),1),v.Oa=0):v==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,L&&!e.Oa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?i[b.handler](...b.args):v&&ee(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ee(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},L&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],f=["onExit"],y;for(y of f)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:j,wasmModule:ce})})};i.PThread=M;var Be=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(_)return $(1,0,e);Ye(e)}var xe=[],Xe;i.invokeEntryPoint=(e,t)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Xe.get(e)),e=n(t),0<Le?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,f){return _?$(2,1,e,t,n,f):O(e,t,n,f)}function O(e,t,n,f){if(e>>>=0,t>>>=0,n>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return _&&y.length===0?m(e,t,n,f):(e={kb:n,Oa:e,hb:f,qb:y},_?(e.sb="spawnThread",postMessage(e,y),0):$e(e))}function S(e,t,n){return _?$(3,1,e,t,n):0}function R(e,t){if(_)return $(4,1,e,t)}var K=e=>{for(var t=0,n=0;n<e.length;++n){var f=e.charCodeAt(n);127>=f?t++:2047>=f?t+=2:55296<=f&&57343>=f?(t+=4,++n):t+=3}return t},le=(e,t,n,f)=>{if(n>>>=0,!(0<f))return 0;var y=n;f=n+f-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=f)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=f)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=f)break;t[n++>>>0]=224|v>>12}else{if(n+3>=f)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-y},oe=(e,t,n)=>le(e,h(),t,n);function se(e,t){if(_)return $(5,1,e,t)}function Qe(e,t,n){if(_)return $(6,1,e,t,n)}function Ze(e,t,n){return _?$(7,1,e,t,n):0}function c(e,t){if(_)return $(8,1,e,t)}function W(e,t,n){if(_)return $(9,1,e,t,n)}function G(e,t,n,f){if(_)return $(10,1,e,t,n,f)}function Se(e,t,n,f){if(_)return $(11,1,e,t,n,f)}function Ke(e,t,n,f){if(_)return $(12,1,e,t,n,f)}function Bt(e){if(_)return $(13,1,e)}function Wt(e,t){if(_)return $(14,1,e,t)}function kt(e,t,n){if(_)return $(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(l(),e>>>2,e).value.then(ft),e+=128,Atomics.store(l(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!P))try{if(e(),!(0<Le))try{_?Ot(te):Ye(te)}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}};i.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,t,n,f,y,b,v,z){return _?$(16,1,e,t,n,f,y,b,v,z):-52}function Gt(e,t,n,f,y,b,v){if(_)return $(17,1,e,t,n,f,y,b,v)}var Yt=e=>{var t=K(e)+1,n=rr(t);return n&&oe(e,n,t),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(_)return $(18,1,e,t);e>>>=0,t>>>=0;var n=0;return jt().forEach((f,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<f.length;++b)a()[y++>>>0>>>0]=f.charCodeAt(b);a()[y>>>0>>>0]=0,n+=f.length+1}),0}function qt(e,t){if(_)return $(19,1,e,t);e>>>=0,t>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var f=0;return n.forEach(y=>f+=y.length+1),w()[t>>>2>>>0]=f,0}function Vt(e){return _?$(20,1,e):52}function Jt(e,t,n,f){return _?$(21,1,e,t,n,f):52}function Xt(e,t,n,f,y){return _?$(22,1,e,t,n,f,y):70}var Gr=[null,[],[]];function Qt(e,t,n,f){if(_)return $(23,1,e,t,n,f);t>>>=0,n>>>=0,f>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[t>>>2>>>0],z=w()[t+4>>>2>>>0];t+=8;for(var Te=0;Te<z;Te++){var ne=h()[v+Te>>>0],me=Gr[e];ne===0||ne===10?((e===1?Ie:ee)(Ve(me,0)),me.length=0):me.push(ne)}y+=z}return w()[f>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(e){var t=Array(K(e)+1);return le(e,t,0,t.length),t}var jr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,f){function y(p,H,q){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=q[0]+p;return p}function b(p,H){return y(p,H,"0")}function v(p,H){function q(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=q(p.getFullYear()-H.getFullYear()))===0&&(We=q(p.getMonth()-H.getMonth()))===0&&(We=q(p.getDate()-H.getDate())),We}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Te(p){var H=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<H;){var q=p.getMonth(),We=(je(p.getFullYear())?Zt:Kt)[q];if(H>We-p.getDate())H-=We-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return q=new Date(p.getFullYear()+1,0,4),H=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(H,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,f>>>=0;var ne=w()[f+40>>>2>>>0];f={ob:l()[f>>>2>>>0],nb:l()[f+4>>>2>>>0],Ta:l()[f+8>>>2>>>0],Xa:l()[f+12>>>2>>>0],Ua:l()[f+16>>>2>>>0],Sa:l()[f+20>>>2>>>0],Na:l()[f+24>>>2>>>0],Ra:l()[f+28>>>2>>>0],ub:l()[f+32>>>2>>>0],mb:l()[f+36>>>2>>>0],pb:ne?Ge(ne):""},n=Ge(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)n=n.replace(new RegExp(me,"g"),ne[me]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");ne={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Te(p).toString().substring(2),"%G":p=>Te(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var H=0,q=0;q<=p.Ua-1;H+=(je(p.Sa+1900)?Zt:Kt)[q++]);return b(p.Xa+H,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var H=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&H++,H)H==53&&(q=(p.Na+371-p.Ra)%7,q==4||q==3&&je(p.Sa)||(H=1));else{H=52;var q=(p.Na+7-p.Ra-1)%7;(q==4||q==5&&je(p.Sa%400-1))&&H++}return b(H,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(me in ne)n.includes(me)&&(n=n.replace(new RegExp(me,"g"),ne[me](f)));return n=n.replace(/\\0\\0/g,"%"),me=Yr(n),me.length>t?0:(jr(me,e),me.length-1)}M.Wa();var zr=[C,ut,m,S,R,se,Qe,Ze,c,W,G,Se,Ke,Bt,Wt,kt,$t,Gt,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!k,1,!U,131072,!1),M.ab()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:S,S:R,D:se,F:Qe,T:Ze,Q:c,J:W,P:G,n:Se,E:Ke,B:Bt,R:Wt,C:kt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,f){t>>>=0,gt.length=n,f=f>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[f+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){L&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var f=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=f&&e.getTimezoneOffset()==Math.min(f,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],f=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?l()[e+32>>>2>>>0]=+(y!=b&&v==f):0<n!=(v==f)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?v:y)-f))),l()[e+24>>>2>>>0]=t.getDay(),n=(je(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((De=e,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Gt,y:function(e,t,n){function f(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Te=Math.max(y,z);w()[e>>>2>>>0]=60*Te,l()[t>>>2>>>0]=+(y!=z),e=f(b),t=f(v),e=Yt(e),t=Yt(t),z<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{Z("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var f;f=h()[t++>>>0];){var y=f!=105;y&=f!=112,n+=y&&n%8?4:0,ht.push(f==112?w()[n>>>2>>>0]:f==105?l()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>L?(wr(),tt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var f=t*(1+.2/n);f=Math.min(f,e+100663296);var y=Math;f=Math.max(e,f);e:{y=(y.min.call(y,4294901760,f+(65536-f%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(y),we();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ye,g:Vt,m:Jt,v:Xt,l:Qt,a:j||i.wasmMemory,w:er,d:function(e,t,n,f){return er(e>>>0,t>>>0,n>>>0,f>>>0)}},T=function(){function e(n,f){return T=n.exports,T=Vr(),M.bb.push(T.za),Xe=T.Aa,Fe.unshift(T.V),ce=f,re(),T}var t={a:qr};if(pe++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ee(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return at(t,function(n){e(n.instance,n.module)}).catch(D),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,f,y,b,v,z,Te,ne)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,f,y,b,v,z,Te,ne),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,f,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,f,y,b),i._OrtGetTensorData=(e,t,n,f,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,f,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,f)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,f),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,f)=>(i._OrtBindOutput=T.pa)(e,t,n,f),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,f,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,f,y),i._OrtRun=(e,t,n,f,y,b,v,z)=>(i._OrtRun=T.ta)(e,t,n,f,y,b,v,z),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,f,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,f,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,f)=>(ar=T.Da)(e,t,n,f),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=f=>()=>f()>>>0,n=f=>y=>f(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=j,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Le,i.UTF8ToString=Ge,i.stringToUTF8=oe,i.lengthBytesUTF8=K,i.ExitStatus=Pe,i.PThread=M;var dt;ve=function e(){dt||ur(),dt||(ve=e)};function ur(){if(!(0<pe))if(_)A(i),_||Be(Fe),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Me.unshift(i.preRun.shift());Be(Me),0<pe||dt||(dt=!0,i.calledRun=!0,P||(_||Be(Fe),A(i),_||Be(Ee)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Ft=="object"?Ft.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=et((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),Ut,Pt=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Pt)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,l=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,A=un(w,l),D=typeof g=="object"?g[A]:void 0,I=!1,B=[];if(d>0&&B.push(new Promise(F=>{setTimeout(()=>{I=!0,F()},d)})),B.push(new Promise((F,U)=>{let k=l?an:Tr,L={locateFile:(_,x)=>l&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):_.endsWith(".wasm")?D||(i??x)+A:x+_};if(l)if(L.numThreads=a,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;L.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(L).then(_=>{pt=!1,Pt=!0,Ut=_,F()},_=>{pt=!1,Sr=!0,U(_)})})),await Promise.race(B),I)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},X=()=>{if(Pt&&Ut)return Ut;throw new Error("WebAssembly is not initialized yet.")};var Q=(u,d)=>{let a=X(),h=a.lengthBytesUTF8(u)+1,l=a._malloc(h);return a.stringToUTF8(u,l,h),d.push(l),l},rt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([l,w])=>{let g=d?d+l:l;if(typeof w=="object")rt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let l=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${l}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=X(),a=0,h=[],l=u||{};try{if(u?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(l.terminate=!1);let w=0;return u?.tag!==void 0&&(w=Q(u.tag,h)),a=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&rt(u.extra,"",new WeakSet,(g,i)=>{let A=Q(g,h),D=Q(i,h);d._OrtAddRunConfigEntry(a,A,D)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let l=typeof h=="string"?h:h.name;switch(l){case"webnn":if(l="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=Q("deviceType",a),A=Q(g.deviceType,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let A=Q("numThreads",a),D=Q(i.toString(),a);X()._OrtAddSessionConfigEntry(u,A,D)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=Q("powerPreference",a),A=Q(g.powerPreference,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=Q("preferredLayout",a),A=Q(g.preferredLayout,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let w=Q(l,a);X()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${l}.`)}},Cr=u=>{let d=X(),a=0,h=[],l=u||{};cn(l);try{let w=fn(l.graphOptimizationLevel??"all"),g=ln(l.executionMode??"sequential"),i=typeof l.logId=="string"?Q(l.logId,h):0,A=l.logSeverityLevel??2;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log serverity level is not valid: ${A}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let I=typeof l.optimizedModelFilePath=="string"?Q(l.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!l.enableCpuMemArena,!!l.enableMemPattern,g,!!l.enableProfiling,0,i,A,D,I),a===0&&V("Can\'t create session options."),l.executionProviders&&dn(a,l.executionProviders,h),l.freeDimensionOverrides)for(let[B,F]of Object.entries(l.freeDimensionOverrides)){if(typeof B!="string")throw new Error(`free dimension override name must be a string: ${B}`);if(typeof F!="number"||!Number.isInteger(F)||F<0)throw new Error(`free dimension override value must be a non-negative integer: ${F}`);let U=Q(B,h);d._OrtAddFreeDimensionOverride(a,U,F)!==0&&V(`Can\'t set a free dimension override: ${B} - ${F}.`)}return l.extra!==void 0&&rt(l.extra,"",new WeakSet,(B,F)=>{let U=Q(B,h),k=Q(F,h);d._OrtAddSessionConfigEntry(a,U,k)!==0&&V(`Can\'t set a session config entry: ${B} - ${F}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],xr=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Ur=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let l of a)h.push(l);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let l=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let A=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:A,maximum:A}).buffer}else throw i}let g=0;for(;;){let{done:i,value:A}=await l.read();if(i)break;let D=A.byteLength;new Uint8Array(w,g,D).set(A),g+=D}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{X()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,Fr(u.logLevel))},Br=async(u,d)=>{},nt=new Map,mn=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=X(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Wr=async(u,d)=>{let a,h,l=X();Array.isArray(u)?[a,h]=u:u.buffer===l.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,A=[],D=[],I=[];try{if([g,A]=Cr(d),d?.externalData&&l.mountExternalData){let x=[];for(let N of d.externalData){let he=typeof N=="string"?N:N.path;x.push(Rr(typeof N=="string"?N:N.data).then(ie=>{l.mountExternalData(he,ie)}))}await Promise.all(x)}w=l._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[B,F]=mn(w),U=[],k=[],L=[];for(let x=0;x<B;x++){let N=l._OrtGetInputName(w,x);N===0&&V("Can\'t get an input name."),D.push(N),U.push(l.UTF8ToString(N))}for(let x=0;x<F;x++){let N=l._OrtGetOutputName(w,x);N===0&&V("Can\'t get an output name."),I.push(N);let he=l.UTF8ToString(N);k.push(he)}let _=null;return nt.set(w,[w,D,I,_]),[w,U,k]}catch(B){throw D.forEach(F=>l._OrtFree(F)),I.forEach(F=>l._OrtFree(F)),i!==0&&l._OrtReleaseBinding(i),w!==0&&l._OrtReleaseSession(w),B}finally{l._free(a),g!==0&&l._OrtReleaseSessionOptions(g),A.forEach(B=>l._free(B)),l.unmountExternalData?.()}},kr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,l,w,g]=a;g&&d._OrtReleaseBinding(g.handle),d.jsepUnregisterBuffers?.(u),l.forEach(i=>d._OrtFree(i)),w.forEach(i=>d._OrtFree(i)),d._OrtReleaseSession(h),nt.delete(u)},Ir=(u,d,a,h,l)=>{if(!u){d.push(0);return}let w=X(),g=u[0],i=u[1],A=u[3],D,I;if(g==="string"&&A==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(A==="gpu-buffer"){let U=u[2].gpuBuffer,k=It(Rt(g));I=i.reduce((L,_)=>L*_,1)*k,D=w.jsepRegisterBuffer(h,l,U,I)}else{let U=u[2];if(Array.isArray(U)){I=4*U.length,D=w._malloc(I),a.push(D);let k=D/4;for(let L=0;L<U.length;L++){if(typeof U[L]!="string")throw new TypeError(`tensor data at index ${L} is not a string`);w.HEAPU32[k++]=Q(U[L],a)}}else I=U.byteLength,D=w._malloc(I),a.push(D),w.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,I),D)}let B=w.stackSave(),F=w.stackAlloc(4*i.length);try{let U=F/4;i.forEach(L=>w.HEAP32[U++]=L);let k=w._OrtCreateTensor(Rt(g),D,I,F,i.length,Pr(A));k===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${l}.`),d.push(k)}finally{w.stackRestore(B)}},Nr=async(u,d,a,h,l,w)=>{let g=X(),i=nt.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[A,D,I,B]=i,F=d.length,U=h.length,k=0,L=[],_=[],x=[],N=[],he=g.stackSave(),ie=g.stackAlloc(F*4),ae=g.stackAlloc(F*4),E=g.stackAlloc(U*4),Y=g.stackAlloc(U*4);try{[k,L]=Mr(w);for(let P=0;P<F;P++)Ir(a[P],_,N,u,d[P]);for(let P=0;P<U;P++)Ir(l[P],x,N,u,F+h[P]);let ue=ie/4,Re=ae/4,Ie=E/4,ee=Y/4;for(let P=0;P<F;P++)g.HEAPU32[ue++]=_[P],g.HEAPU32[Re++]=D[d[P]];for(let P=0;P<U;P++)g.HEAPU32[Ie++]=x[P],g.HEAPU32[ee++]=I[h[P]];let j;j=await g._OrtRun(A,ae,ie,F,Y,U,E,k),j!==0&&V("failed to call OrtRun().");let ce=[];for(let P=0;P<U;P++){let te=g.HEAPU32[E/4+P];if(te===x[P]){ce.push(l[P]);continue}let de=g.stackSave(),ge=g.stackAlloc(4*4),ye=!1,J,fe=0;try{g._OrtGetTensorData(te,ge,ge+4,ge+8,ge+12)!==0&&V(`Can\'t access output tensor data on index ${P}.`);let Ae=ge/4,Me=g.HEAPU32[Ae++];fe=g.HEAPU32[Ae++];let Fe=g.HEAPU32[Ae++],Ee=g.HEAPU32[Ae++],pe=[];for(let re=0;re<Ee;re++)pe.push(g.HEAPU32[Fe/4+re]);g._OrtFree(Fe);let Oe=pe.reduce((re,Z)=>re*Z,1);J=Dr(Me);let ve=B?.outputPreferredLocations[h[P]];if(J==="string"){if(ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Z=fe/4;for(let Ce=0;Ce<Oe;Ce++){let be=g.HEAPU32[Z++],_e=Ce===Oe-1?void 0:g.HEAPU32[Z]-be;re.push(g.UTF8ToString(be,_e))}ce.push([J,pe,re,"cpu"])}else if(ve==="gpu-buffer"&&Oe>0){let re=g.jsepGetBuffer(fe),Z=It(Me);if(Z===void 0||!Ur(J))throw new Error(`Unsupported data type: ${J}`);ye=!0,ce.push([J,pe,{gpuBuffer:re,download:g.jsepCreateDownloader(re,Oe*Z,J),dispose:()=>{g._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let re=xr(J),Z=new re(Oe);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(fe,fe+Z.byteLength)),ce.push([J,pe,Z,"cpu"])}}finally{g.stackRestore(de),J==="string"&&fe&&g._free(fe),ye||g._OrtReleaseTensor(te)}}return B&&g._OrtClearBoundOutputs(B.handle),ce}finally{g.stackRestore(he),_.forEach(ue=>g._OrtReleaseTensor(ue)),x.forEach(ue=>g._OrtReleaseTensor(ue)),N.forEach(ue=>g._free(ue)),k!==0&&g._OrtReleaseRunOptions(k),L.forEach(ue=>g._free(ue))}},Hr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error("invalid session id");let h=a[0],l=d._OrtEndProfiling(h);l===0&&V("Can\'t get an profile file name."),d._OrtFree(l)},$r=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:l}=a;Br(l,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,l=Lt(h);postMessage({type:d,out:l});break}case"create":{let{model:h,options:l}=a;Wr(h,l).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":kr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:l,inputs:w,outputIndices:g,options:i}=a;Nr(h,l,w,g,new Array(g.length).fill(null),i).then(A=>{A.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:A},$r(A))},A=>{postMessage({type:d,err:A})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'}),ua,eo,Su,lf,cf,Lv,Yh,us,ls,QN,ff,H6,z6,G6,W6,q6,X6,Y6,Z6=lt(()=>{"use strict";Nu(),GX(),gf(),ua=()=>!!Jt.wasm.proxy&&typeof document<"u",Su=!1,lf=!1,cf=!1,Yh=new Map,us=(t,e)=>{let r=Yh.get(t);r?r.push(e):Yh.set(t,[e])},ls=()=>{if(Su||!lf||cf||!eo)throw new Error("worker not ready")},QN=t=>{switch(t.data.type){case"init-wasm":Su=!1,t.data.err?(cf=!0,Lv[1](t.data.err)):(lf=!0,Lv[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=Yh.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}default:}},ff=typeof document<"u"?document?.currentScript?.src:void 0,H6=()=>U(void 0,null,function*(){if(!lf){if(Su)throw new Error("multiple calls to 'initWasm()' detected.");if(cf)throw new Error("previous call to 'initWasm()' failed.");if(Su=!0,ua())return Jt.wasm.wasmPaths===void 0&&ff&&ff.indexOf("blob:")!==0&&(Jt.wasm.wasmPaths=ff.substr(0,+ff.lastIndexOf("/")+1)),new Promise((t,e)=>{eo?.terminate();let r=URL.createObjectURL(new Blob([WX()],{type:"text/javascript"}));eo=new Worker(r,{name:"ort-wasm-proxy-worker"}),eo.onerror=i=>e(i),eo.onmessage=QN,URL.revokeObjectURL(r),Lv=[t,e];let n={type:"init-wasm",in:Jt};eo.postMessage(n)});try{yield S6(Jt.wasm),yield k6(Jt),lf=!0}catch(t){throw cf=!0,t}finally{Su=!1}}}),z6=t=>U(void 0,null,function*(){if(ua())return ls(),new Promise((e,r)=>{us("init-ep",[e,r]);let n={type:"init-ep",in:{epName:t,env:Jt}};eo.postMessage(n)});yield L6(Jt,t)}),G6=t=>U(void 0,null,function*(){return ua()?(ls(),new Promise((e,r)=>{us("copy-from",[e,r]);let n={type:"copy-from",in:{buffer:t}};eo.postMessage(n,[t.buffer])})):Uv(t)}),W6=(t,e)=>U(void 0,null,function*(){if(ua()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return ls(),new Promise((r,n)=>{us("create",[r,n]);let i={type:"create",in:{model:t,options:e}},a=[];t instanceof Uint8Array&&a.push(t.buffer),eo.postMessage(i,a)})}else return B6(t,e)}),q6=t=>U(void 0,null,function*(){if(ua())return ls(),new Promise((e,r)=>{us("release",[e,r]);let n={type:"release",in:t};eo.postMessage(n)});$6(t)}),X6=(t,e,r,n,i,a)=>U(void 0,null,function*(){if(ua()){if(r.some(u=>u[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(i.some(u=>u))throw new Error("pre-allocated output tensor is not supported for proxy.");return ls(),new Promise((u,s)=>{us("run",[u,s]);let l=r,o={type:"run",in:{sessionId:t,inputIndices:e,inputs:l,outputIndices:n,options:a}};eo.postMessage(o,U6(l))})}else return V6(t,e,r,n,i,a)}),Y6=t=>U(void 0,null,function*(){if(ua())return ls(),new Promise((e,r)=>{us("end-profiling",[e,r]);let n={type:"end-profiling",in:t};eo.postMessage(n)});j6(t)})}),Bv,JN,K6,qX=lt(()=>{"use strict";Nu(),Z6(),R6(),F6(),Bv=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},JN=t=>{switch(t[3]){case"cpu":return new mn(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!Kv(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:i}=t[2];return mn.fromGpuBuffer(r,{dataType:e,dims:t[1],download:n,dispose:i})}default:throw new Error(`invalid data location: ${t[3]}`)}},K6=class{fetchModelAndCopyToWasmMemory(t){return U(this,null,function*(){return G6(yield Qh(t))})}loadModel(t,e){return U(this,null,function*(){Ou();let r;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?r=yield Qh(t):r=yield this.fetchModelAndCopyToWasmMemory(t):r=t,[this.sessionId,this.inputNames,this.outputNames]=yield W6(r,e),Pu()})}dispose(){return U(this,null,function*(){return q6(this.sessionId)})}run(t,e,r){return U(this,null,function*(){Ou();let n=[],i=[];Object.entries(t).forEach(f=>{let d=f[0],h=f[1],p=this.inputNames.indexOf(d);if(p===-1)throw new Error(`invalid input '${d}'`);n.push(h),i.push(p)});let a=[],u=[];Object.entries(e).forEach(f=>{let d=f[0],h=f[1],p=this.outputNames.indexOf(d);if(p===-1)throw new Error(`invalid output '${d}'`);a.push(h),u.push(p)});let s=n.map((f,d)=>Bv(f,()=>`input "${this.inputNames[i[d]]}"`)),l=a.map((f,d)=>f?Bv(f,()=>`output "${this.outputNames[u[d]]}"`):null),o=yield X6(this.sessionId,i,s,u,l,r),c={};for(let f=0;f<o.length;f++)c[this.outputNames[u[f]]]=a[f]??JN(o[f]);return Pu(),c})}startProfiling(){}endProfiling(){Y6(this.sessionId)}}}),e6,Q6,XX=lt(()=>{"use strict";Nu(),Z6(),qX(),e6=()=>{if((typeof Jt.wasm.initTimeout!="number"||Jt.wasm.initTimeout<0)&&(Jt.wasm.initTimeout=0),typeof Jt.wasm.simd!="boolean"&&(Jt.wasm.simd=!0),typeof Jt.wasm.proxy!="boolean"&&(Jt.wasm.proxy=!1),typeof Jt.wasm.trace!="boolean"&&(Jt.wasm.trace=!1),typeof Jt.wasm.numThreads!="number"||!Number.isInteger(Jt.wasm.numThreads)||Jt.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Jt.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Jt.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},Q6=class{init(t){return U(this,null,function*(){e6(),yield H6(),yield z6(t)})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new K6;return yield r.loadModel(t,e),Promise.resolve(r)})}}}),J6={};pf(J6,{wasmBackend:()=>eR});var eR,YX=lt(()=>{"use strict";XX(),eR=new Q6});Nu();Nu();Nu();var ZX="1.17.1";{let t=(YX(),Du(J6)).wasmBackend;df("cpu",t,10),df("wasm",t,10),df("webnn",t,9)}Object.defineProperty(Jt.versions,"web",{value:ZX,enumerable:!0});var tR=(()=>{let e=class e{constructor(n){this.documentRef=n,this.session=null,this.modelLoaded=!1,this.inputSize=224,this.confThreshold=.1,this.iouThreshold=.45,this.debug=!1,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);let i=this.documentRef.baseURI||window.location.href;if(we.wasm.wasmPaths=new URL("assets/wasm/",i).toString(),this.isIOS)we.wasm.numThreads=1,we.wasm.simd=!1,this.debugLog("iOS detected: Using single-threaded WASM without SIMD");else{let u=this.getOptimalThreadCount();we.wasm.numThreads=u,we.wasm.simd=!0,this.debugLog("Optimal thread count for this device:",u)}typeof SharedArrayBuffer<"u"&&window.crossOriginIsolated===!0||(we.wasm.numThreads=1,this.debugLog("SharedArrayBuffer not available: forcing single-thread WASM")),we.wasm.proxy=!1,this.debugLog("ONNX Runtime configured with WASM path:",we.wasm.wasmPaths)}getOptimalThreadCount(){let n=navigator.hardwareConcurrency||4,i=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768&&window.innerHeight>window.innerWidth,a="ontouchstart"in window||navigator.maxTouchPoints>0,u;return i||a?u=Math.min(2,Math.max(1,Math.floor(n/2))):u=Math.min(4,Math.max(2,Math.floor(n/2))),this.debugLog("Device detection:",{hardwareConcurrency:n,isMobile:i,isTouchDevice:a,optimalThreads:u}),u}debugLog(...n){this.debug&&console.log(...n)}getAvailableBackends(){try{let n=["webgl","wasm","webnn","cpu"];return this.debugLog("Checking ONNX Runtime backend availability..."),n}catch(n){return this.debugLog("Error checking backends:",n),[]}}hasWebGLSupport(){try{let n=document.createElement("canvas"),i=n.getContext("webgl2")||n.getContext("webgl")||n.getContext("experimental-webgl"),a=!!i;if(i&&typeof i.getParameter=="function"){let u=i.getParameter(i.VENDOR);this.debugLog("WebGL vendor:",u)}return this.debugLog("WebGL support:",a),a}catch(n){return this.debugLog("WebGL check failed:",n),!1}}hasWasmSupport(){try{return typeof WebAssembly<"u"&&typeof WebAssembly.instantiate=="function"}catch{return!1}}hasWasmSharedMemorySupport(){let n=typeof SharedArrayBuffer<"u",i=window.crossOriginIsolated===!0;return n&&i}loadModel(n){return U(this,null,function*(){try{if(this.debugLog("Loading ORT model from:",n),this.debugLog("ONNX Runtime version:",we.versions),this.debugLog("Available backends:",this.getAvailableBackends()),this.debugLog("Current location:",window.location.href),this.isIOS){let o=null;try{let c=new URL(n,window.location.href).toString(),f=[c];c.includes("?")&&f.push(c.split("?")[0]);let d=null;for(let h of f)try{this.debugLog("iOS: Fetching model as ArrayBuffer:",h);let p=yield fetch(h,{cache:"no-store"});if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);o=yield p.arrayBuffer(),this.debugLog(`iOS: Model loaded, size: ${o.byteLength} bytes`);break}catch(p){d=p,this.debugLog("iOS: Fetch failed for URL:",h,p?.message||p)}if(!o)throw d||new Error("Unknown fetch error")}catch(c){throw new Error(`iOS: Cannot fetch model file: ${c.message}`)}try{this.debugLog("iOS Strategy 1: Trying explicit WebGL provider"),this.session=yield _i.create(o,{executionProviders:["webgl"],graphOptimizationLevel:"all"}),this.debugLog("\u2705 iOS: Successfully loaded with WebGL"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);console.error("iOS WebGL failed:",c),this.debugLog("\u274C iOS Strategy 1 failed:",f)}try{this.debugLog("iOS Strategy 2: Trying WASM provider"),this.session=yield _i.create(o,{executionProviders:["wasm"],graphOptimizationLevel:"basic"}),this.debugLog("\u2705 iOS: Successfully loaded with WASM"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);console.error("iOS WASM failed:",c),this.debugLog("\u274C iOS Strategy 2 failed:",f)}try{this.debugLog("iOS Strategy 3: Auto-select backend"),this.session=yield _i.create(o,{graphOptimizationLevel:"basic"}),this.debugLog("\u2705 iOS: Successfully loaded with auto-selected backend"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);throw console.error("iOS auto-select failed:",c),this.debugLog("\u274C iOS Strategy 3 failed:",f),new Error(`iOS: Cannot load model. All strategies failed.
Last error: ${f}
Model size: ${o.byteLength} bytes
Try: 1) Enable WebGL in Safari 2) Update iOS 3) Use different browser`)}}let i=this.hasWebGLSupport(),a=this.hasWasmSupport();this.debugLog("Backend support:",{webglSupported:i,wasmSupported:a});let u=[];if(i&&u.push("webgl"),a&&u.push("wasm"),u.length===0)throw new Error("No available backend. Both WebGL and WASM are unavailable.");let s=!1,l=null;for(let o of u)try{this.debugLog(`Trying execution provider: ${o}`),this.session=yield _i.create(n,{executionProviders:[o],graphOptimizationLevel:"all"}),this.debugLog(`Successfully loaded model with ${o} provider`);break}catch(c){if(l=c,console.warn(`Failed to load with ${o}:`,c),o==="wasm"&&we.wasm.simd&&!s)try{s=!0,we.wasm.simd=!1,console.warn("Retrying WASM without SIMD..."),this.session=yield _i.create(n,{executionProviders:[o],graphOptimizationLevel:"all"}),this.debugLog("Successfully loaded model with wasm provider (SIMD disabled)");break}catch(f){throw console.warn("Failed to load with wasm provider (SIMD disabled):",f),f}}if(!this.session)try{this.debugLog("All providers failed, trying default backend..."),this.session=yield _i.create(n,{graphOptimizationLevel:"basic"}),this.debugLog("Successfully loaded model with default backend")}catch(o){throw console.error("Default backend also failed:",o),l||o}if(!this.session)throw l||new Error("Failed to initialize inference session");this.modelLoaded=!0,this.debugLog("Model loaded successfully"),this.debugLog("Input names:",this.session.inputNames),this.debugLog("Output names:",this.session.outputNames)}catch(i){throw console.error("Failed to load ONNX model:",i),this.modelLoaded=!1,i}})}isModelLoaded(){return this.modelLoaded}detect(n){return U(this,null,function*(){if(!this.session)throw new Error("Model not loaded");try{let i=this.preprocessImage(n),a={};a[this.session.inputNames[0]]=i.tensor;let s=(yield this.session.run(a))[this.session.outputNames[0]];return this.postprocess(s,n.width,n.height,i)}catch(i){return console.error("Detection error:",i),[]}})}preprocessImage(n){let{width:i,height:a}=n,u=document.createElement("canvas");u.width=this.inputSize,u.height=this.inputSize;let s=u.getContext("2d"),l=Math.min(this.inputSize/i,this.inputSize/a),o=Math.round(i*l),c=Math.round(a*l),f=Math.round((this.inputSize-o)/2),d=Math.round((this.inputSize-c)/2);s.fillStyle="rgb(114, 114, 114)",s.fillRect(0,0,this.inputSize,this.inputSize);let h=document.createElement("canvas");h.width=i,h.height=a,h.getContext("2d").putImageData(n,0,0),s.drawImage(h,f,d,o,c);let v=s.getImageData(0,0,this.inputSize,this.inputSize).data,x=[],y=[],_=[];for(let C=0;C<v.length;C+=4)x.push(v[C]/255),y.push(v[C+1]/255),_.push(v[C+2]/255);let I=Float32Array.from([...x,...y,..._]);return{tensor:new Wr("float32",I,[1,3,this.inputSize,this.inputSize]),scale:l,padX:f,padY:d}}postprocess(n,i,a,u){let s=[],l=n.data,o=n.dims;this.debugLog("\xF0\u0178\u201D\x8D ONNX Output dimensions:",o),this.debugLog("\xF0\u0178\u201D\x8D Output data length:",l.length),this.debugLog("\xF0\u0178\u201D\x8D First 20 values:",Array.from(l.slice(0,20)));let c=0,f=0,d=0,h=!1,p=!1;if(o.length===3){let C=o[1],j=o[2],z=C<=100&&j>100,W=j<=100&&C>100;if(z?(d=C,c=j,h=!0):W?(d=j,c=C,h=!1):C>j?(d=C,c=j,h=!0):(d=j,c=C,h=!1),d===4)f=1,p=!1;else if(d===5)f=1,p=!0;else if(d===6)f=1,p=!0;else if(d===84)f=80,p=!1;else if(d===85)f=80,p=!0;else{let k=d-4,X=d-5;X>=1&&(X===1||X===80)?(f=X,p=!0):(f=k,p=!1)}}else return console.warn("Unexpected output dimensions:",o),s;let{scale:m,padX:v,padY:x}=u;this.debugLog("\xF0\u0178\u201D\x8D Processing predictions:",c,"features:",d,"classes:",f,"featuresFirst:",h,"hasObjectness:",p),this.debugLog("\u{1F50D} Letterbox scale:",m,"pad:",v,x),this.debugLog("\xF0\u0178\u201D\x8D Confidence threshold:",this.confThreshold);let y=(C,j)=>h?l[C*c+j]:l[j*d+C],_=0;for(let C=0;C<c;C++){let j,z,W,k,X;j=y(0,C),z=y(1,C),W=y(2,C),k=y(3,C);let ke=1,me=4;if(p&&(ke=y(4,C),me=5),X=0,d<=me)X=ke;else{for(let ye=0;ye<f;ye++){let Z=y(me+ye,C);Z>X&&(X=Z)}X*=ke}if(X>this.confThreshold){_++;let ye=j,Z=z,he=W,yt=k;j<2&&z<2&&W<2&&k<2&&(ye=j*this.inputSize,Z=z*this.inputSize,he=W*this.inputSize,yt=k*this.inputSize);let qe=(ye-he/2-v)/m,Ue=(Z-yt/2-x)/m,Ee=he/m,It=yt/m,At=Math.max(0,Math.min(i-1,qe)),Ft=Math.max(0,Math.min(a-1,Ue)),vr=Math.max(0,Math.min(i-At,Ee)),Pt=Math.max(0,Math.min(a-Ft,It));_<=3&&this.debugLog(`\xF0\u0178\u017D\xAF Detection ${_}:`,{raw:{x_center:j.toFixed(4),y_center:z.toFixed(4),w:W.toFixed(4),h:k.toFixed(4)},pixel:{x_pixel:ye.toFixed(1),y_pixel:Z.toFixed(1),w_pixel:he.toFixed(1),h_pixel:yt.toFixed(1)},confidence:X.toFixed(3),final_bbox:[At.toFixed(1),Ft.toFixed(1),vr.toFixed(1),Pt.toFixed(1)]}),s.push({bbox:[At,Ft,vr,Pt],confidence:X,class:0})}}this.debugLog(`\xE2\u0153\u2026 Found ${s.length} candidate detections (threshold: ${this.confThreshold})`);let I=this.nonMaxSuppression(s);return this.debugLog(`\xF0\u0178\u017D\xAF After NMS: ${I.length} final detections`),I}nonMaxSuppression(n){if(n.length===0)return[];n.sort((a,u)=>u.confidence-a.confidence);let i=[];for(;n.length>0;){let a=n.shift();i.push(a),n=n.filter(u=>this.calculateIoU(a.bbox,u.bbox)<this.iouThreshold)}return i}calculateIoU(n,i){let[a,u,s,l]=n,[o,c,f,d]=i,h=a+s,p=u+l,m=o+f,v=c+d,x=Math.max(a,o),y=Math.max(u,c),_=Math.min(h,m),I=Math.min(p,v),C=Math.max(0,_-x),j=Math.max(0,I-y),z=C*j,W=s*l,k=f*d,X=W+k-z;return z/X}};e.\u0275fac=function(i){return new(i||e)(Dt($o))},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var rR=(()=>{let e=class e{constructor(){this.modelLoaded=!1,setTimeout(()=>{this.modelLoaded=!0,console.log("Mock detector ready")},1e3)}loadModel(n){return U(this,null,function*(){return console.log("Mock: Loading model from:",n),new Promise(i=>{setTimeout(()=>{this.modelLoaded=!0,console.log("Mock: Model loaded successfully"),i()},1500)})})}isModelLoaded(){return this.modelLoaded}detect(n){return U(this,null,function*(){if(!this.modelLoaded)throw new Error("Mock: Model not loaded");yield new Promise(u=>setTimeout(u,100));let i=[],a=Math.floor(Math.random()*3);for(let u=0;u<a;u++){let s=Math.random()*(n.width-100),l=Math.random()*(n.height-100),o=80+Math.random()*50,c=30+Math.random()*20,f=.7+Math.random()*.3;i.push({bbox:[s,l,o,c],confidence:f,class:0})}return console.log(`Mock: Detected ${i.length} barcodes`),i})}};e.\u0275fac=function(i){return new(i||e)},e.\u0275prov=Kt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JX=["videoElement"],eY=["canvasElement"];function tY(t,e){if(t&1&&(wt(0,"span",24),ar(1),dt()),t&2){let r=Fa();Ct(),di("Loading ",r.useMockDetector?"Mock":"ONNX"," model...")}}function rY(t,e){if(t&1&&(wt(0,"span",25),ar(1),dt()),t&2){let r=Fa();Ct(),di("",r.useMockDetector?"Mock":"ONNX"," Model ready")}}function nY(t,e){if(t&1&&(wt(0,"span",26),ar(1),dt()),t&2){let r=Fa();Ct(),Fi(r.error)}}function oY(t,e){if(t&1&&(wt(0,"option",27),ar(1),dt()),t&2){let r=e.$implicit;Cn("value",r.value),Ct(),di(" ",r.label," ")}}function iY(t,e){if(t&1&&(wt(0,"div",28)(1,"div",29)(2,"span",30),ar(3,"Camera FPS:"),dt(),wt(4,"span",31),ar(5),dt()(),wt(6,"div",29)(7,"span",30),ar(8,"Render FPS:"),dt(),wt(9,"span",31),ar(10),dt()(),wt(11,"div",29)(12,"span",30),ar(13,"Detections:"),dt(),wt(14,"span",31),ar(15),dt()(),wt(16,"div",29)(17,"span",30),ar(18,"Resolution:"),dt(),wt(19,"span",32),ar(20),dt()()()),t&2){let r=Fa();Ct(5),Fi(r.actualCameraFps),Ct(5),Fi(r.fps),Ct(4),ci("highlight",r.detectionCount>0),Ct(),Fi(r.detectionCount),Ct(5),Fi(r.currentResolution||"-")}}function aY(t,e){if(t&1&&(wt(0,"div",33)(1,"div",34),ar(2),dt(),wt(3,"div",35),ar(4),dt()()),t&2){let r=Fa();Ct(2),Fi(r.decodedText),Ct(2),di("Format: ",r.decodedFormat,"")}}function sY(t,e){if(t&1&&(wt(0,"div",36),ar(1),dt()),t&2){let r=Fa();Ct(),di(" ",r.streamMessage," ")}}function uY(t,e){t&1&&(wt(0,"div",37),Ra(1,"div",38)(2,"div",39)(3,"div",40),dt())}function lY(t,e){t&1&&(wt(0,"div",41)(1,"p"),ar(2,'Click "Start Camera" to begin detecting barcodes'),dt(),wt(3,"p"),ar(4,"The detector will automatically identify and highlight barcodes in real-time"),dt()())}var nR=(()=>{let e=class e{constructor(n,i,a){this.onnxDetectorService=n,this.mockDetectorService=i,this.ngZone=a,this.isStreaming=!1,this.isModelLoading=!1,this.modelLoaded=!1,this.error=null,this.detectionCount=0,this.fps=0,this.currentResolution="",this.decodedText="",this.decodedFormat="",this.decodedHistory=[],this.streamMessage="",this.desiredStreamMessage="",this.desiredStreamPriority=0,this.streamMessageSince=0,this.streamMessageHoldMs=1500,this.useMockDetector=!1,this.actualCameraFps=0,this.stream=null,this.animationFrameId=null,this.detectionIntervalId=null,this.overlayCanvas=null,this.currentDetections=[],this.lastFrameTime=0,this.frameCount=0,this.fpsUpdateTime=0,this.lastVideoTime=0,this.videoFrameCount=0,this.lastVideoFpsUpdate=0,this.debug=!1,this.decodeCooldownMs=0,this.lastDecodeAt=0,this.decodeInFlight=!1,this.lastDecodedAt=0,this.decodedStaleMs=4e3,this.zxingReader=new ME,this.roi={top:.25,right:.2,bottom:.25,left:.2},this.preprocessEnabled=!0,this.cameraResolution="fhd",this.cameraResolutionOptions=[{value:"fhd",label:"Full HD (1920x1080)"},{value:"hd",label:"HD (1280x720)"},{value:"auto",label:"Auto (device default)"}]}getBasePath(){let n=document.baseURI||window.location.href,a=new URL(n).pathname;return a==="/"||a.endsWith("/")?a:a+"/"}debugLog(...n){this.debug&&console.log(...n)}ngOnInit(){return U(this,null,function*(){yield this.loadModel()})}ngOnDestroy(){this.stopCamera()}loadModel(){return U(this,null,function*(){try{this.isModelLoading=!0,this.error=null;let n=this.useMockDetector?this.mockDetectorService:this.onnxDetectorService;if(this.useMockDetector)yield n.loadModel("");else{let i=this.getBasePath();this.debugLog("Base path:",i);let a="2026-01-28-1",u=[`${i}assets/models/yolotiny.ort?v=${a}`,`${i}assets/models/yolotiny.onnx?v=${a}`,`${i}assets/yolotiny.ort?v=${a}`,`${i}assets/yolotiny.onnx?v=${a}`,`/assets/models/yolotiny.ort?v=${a}`,`/assets/yolotiny.ort?v=${a}`],s=null,l=0,o=u;if(/iPad|iPhone|iPod/.test(navigator.userAgent)){let f=new Set,d=[];for(let p of u){let m=new URL(p,window.location.href).toString();if(f.has(m)||(f.add(m),d.push(m)),m.includes("?")){let v=m.split("?")[0];f.has(v)||(f.add(v),d.push(v))}}let h=null;for(let p of d)try{if((yield fetch(p,{method:"HEAD",cache:"no-store"})).ok){h=p;break}}catch{}h?o=[h]:o=d}for(let f of o)try{l++,this.debugLog(`[${l}/${o.length}] Trying to load model from: ${f}`),yield n.loadModel(f),this.debugLog(`\u2705 Successfully loaded model from: ${f}`);break}catch(d){let h=d.message;console.warn(`\u274C Failed to load from ${f}:`,h),s=d}if(!n.isModelLoaded())throw s||new Error(`All ${o.length} model paths failed. Check console for details.`)}this.modelLoaded=!0,this.isModelLoading=!1}catch(n){let i=n.message;i.includes("iOS requires WebGL")?this.error=`iOS Safari: WebGL is required but not available. Please check:
1. Safari Settings > Advanced > Enable WebGL
2. Try updating iOS to the latest version
3. Restart Safari browser`:i.includes("backend not found")||i.includes("no available backend")?this.error="No compatible graphics backend found. Your browser may not support WebGL or WebAssembly.":this.error="Failed to load model: "+i,this.isModelLoading=!1,console.error("Model loading error:",n)}})}getUserMediaWithFallbacks(){return U(this,null,function*(){let n={ideal:60,min:30},i=[];this.cameraResolution==="fhd"?i.push({video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080},frameRate:n},audio:!1}):this.cameraResolution==="hd"?i.push({video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720},frameRate:n},audio:!1}):i.push({video:{facingMode:{ideal:"environment"},frameRate:n},audio:!1}),i.push({video:{facingMode:{ideal:"environment"}},audio:!1},{video:!0,audio:!1});let a=null;for(let u of i)try{return yield navigator.mediaDevices.getUserMedia(u)}catch(s){a=s,console.warn("getUserMedia failed with constraints:",u,s)}throw a||new Error("Failed to access camera")})}waitForVideoReady(n){return U(this,null,function*(){n.readyState>=2&&n.videoWidth>0||(yield new Promise((i,a)=>{let u=()=>{o(),i()},s=()=>{o(),a(new Error("Video failed to load"))},l=window.setTimeout(()=>{o(),i()},2e3),o=()=>{window.clearTimeout(l),n.removeEventListener("loadeddata",u),n.removeEventListener("loadedmetadata",u),n.removeEventListener("error",s)};n.addEventListener("loadeddata",u,{once:!0}),n.addEventListener("loadedmetadata",u,{once:!0}),n.addEventListener("error",s,{once:!0})}))})}startCamera(){return U(this,null,function*(){try{this.error=null,this.isStreaming&&this.stopCamera(),this.stream=yield this.getUserMediaWithFallbacks();let n=this.videoElement.nativeElement;n.setAttribute("playsinline","true"),n.setAttribute("webkit-playsinline","true"),n.muted=!0,n.playsInline=!0,n.srcObject=this.stream;try{yield n.play()}catch(u){console.warn("Autoplay prevented, waiting for metadata:",u)}yield this.waitForVideoReady(n);let i=this.stream.getVideoTracks()[0],a=i?.getCapabilities?.();if(a){let u={};if(a.focusMode?.includes("auto")&&(u.focusMode="auto"),a.exposureMode?.includes("continuous")&&(u.exposureMode="continuous"),a.whiteBalanceMode?.includes("continuous")&&(u.whiteBalanceMode="continuous"),Object.keys(u).length>0)try{yield i.applyConstraints({advanced:[u]})}catch(s){console.warn("Failed to apply camera constraints:",s)}}this.isStreaming=!0,this.currentResolution=`${n.videoWidth}x${n.videoHeight}`,this.lastVideoTime=0,this.videoFrameCount=0,this.lastVideoFpsUpdate=performance.now(),this.actualCameraFps=0,this.frameCount=0,this.fpsUpdateTime=performance.now(),this.fps=0,this.setupCanvas(),this.startStreamRendering(),this.startDetectionLoop()}catch(n){this.error="Failed to access camera: "+n.message,console.error(n)}})}stopCamera(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.detectionIntervalId&&(clearInterval(this.detectionIntervalId),this.detectionIntervalId=null),this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),this.isStreaming=!1}setupCanvas(){let n=this.videoElement.nativeElement,i=this.canvasElement.nativeElement;i.width=n.videoWidth,i.height=n.videoHeight}startStreamRendering(){let n=0,a=1e3/30,u=()=>{if(!this.isStreaming)return;let s=performance.now();if(s-n<a){this.animationFrameId=requestAnimationFrame(u);return}let l=this.videoElement.nativeElement,o=this.canvasElement.nativeElement,c=o.getContext("2d",{willReadFrequently:!0});c.drawImage(l,0,0,o.width,o.height),this.detectionsChanged()&&this.redrawDetectionOverlay(o),this.overlayCanvas&&c.drawImage(this.overlayCanvas,0,0),n=s,this.ngZone.run(()=>{this.updateFPS()}),this.animationFrameId=requestAnimationFrame(u)};this.animationFrameId=requestAnimationFrame(u)}startDetectionLoop(){this.detectionIntervalId=setInterval(()=>U(this,null,function*(){this.isStreaming&&(yield this.runDetectionCycle())}),300)}runDetectionCycle(){return U(this,null,function*(){let n=this.videoElement.nativeElement,i=this.canvasElement.nativeElement,a=i.getContext("2d"),u=Math.round(i.width*this.roi.left),s=Math.round(i.height*this.roi.top),l=Math.round(i.width*(1-this.roi.left-this.roi.right)),o=Math.round(i.height*(1-this.roi.top-this.roi.bottom)),c=a.getImageData(u,s,l,o);try{let p=(yield(this.useMockDetector?this.mockDetectorService:this.onnxDetectorService).detect(c)).map(y=>{let[_,I,C,j]=y.bbox;return B(N({},y),{bbox:[_+u,I+s,C,j]})}).filter(y=>y.confidence>=.3),m=p.length>0?p.reduce((y,_)=>_.confidence>y.confidence?_:y):null,v=m?[m]:[];this.detectionCount=v.length,yield this.decodeBarcodes(i,v);let x=performance.now();this.decodedText&&x-this.lastDecodedAt>this.decodedStaleMs&&(this.decodedText="",this.decodedFormat=""),v.length===0?(this.desiredStreamMessage="Please place barcode inside the red box",this.desiredStreamPriority=0):this.decodedText?(this.desiredStreamMessage="",this.desiredStreamPriority=2):(this.desiredStreamMessage="Move closer to the barcode for better scanning",this.desiredStreamPriority=1),this.updateStreamMessage(),this.cacheDetectionOverlay(i,v),v.length>0&&this.frameCount%30===0&&this.debugLog(`\xF0\u0178\u201C\u0160 Frame detection: ${v.length} barcodes`)}catch(f){console.error("Detection error:",f)}})}decodeBarcodes(n,i){return U(this,null,function*(){if(this.decodeInFlight||i.length===0)return;this.decodeInFlight=!0,this.lastDecodeAt=performance.now();let a=document.createElement("canvas"),u=a.getContext("2d");if(!u){this.decodeInFlight=!1;return}try{for(let s of i){let[l,o,c,f]=s.bbox;if(!(c<10||f<10)){this.preprocessEnabled?(a.width=Math.max(1,Math.round(c*1.3)),a.height=Math.max(1,Math.round(f*1.3))):(a.width=Math.max(1,Math.round(c)),a.height=Math.max(1,Math.round(f))),u.clearRect(0,0,a.width,a.height),u.drawImage(n,l,o,c,f,0,0,a.width,a.height),this.preprocessEnabled&&this.preprocessForZXing(u,a.width,a.height);try{let d=yield this.zxingReader.decodeFromCanvas(a);this.applyDecodeResult(d);break}catch{}}}}finally{this.decodeInFlight=!1}})}preprocessForZXing(n,i,a){let u=n.getImageData(0,0,i,a),s=u.data,l=1.1,o=130;for(let c=0;c<s.length;c+=4){let f=s[c],d=s[c+1],h=s[c+2],v=(.299*f+.587*d+.114*h-128)*l+128>o?255:0;s[c]=v,s[c+1]=v,s[c+2]=v}n.putImageData(u,0,0)}onCameraResolutionChange(){this.isStreaming&&(this.stopCamera(),this.startCamera())}applyDecodeResult(n){let i=n.getText();if(!i)return;let a=String(n.getBarcodeFormat()),u=new Date().toLocaleTimeString();this.decodedHistory.length>0&&this.decodedHistory[0].text===i||(this.decodedText=i,this.decodedFormat=a,this.decodedHistory=[{text:i,format:a,time:u},...this.decodedHistory].slice(0,5),this.lastDecodedAt=performance.now())}drawDetections(n,i){i.length!==0&&(this.debugLog(`\xF0\u0178\u017D\xA8 Drawing ${i.length} detections`),i.forEach((a,u)=>{let[s,l,o,c]=a.bbox;this.debugLog(`Drawing box ${u+1}:`,{x:s.toFixed(1),y:l.toFixed(1),width:o.toFixed(1),height:c.toFixed(1)}),n.strokeStyle="#00FF00",n.lineWidth=4,n.strokeRect(s,l,o,c);let f=`Barcode ${(a.confidence*100).toFixed(1)}%`;n.font="bold 18px Arial";let d=n.measureText(f);n.fillStyle="rgba(0, 255, 0, 0.8)",n.fillRect(s,Math.max(0,l-28),d.width+12,28),n.fillStyle="#000000",n.fillText(f,s+6,Math.max(20,l-8));let h=15;n.strokeStyle="#00FF00",n.lineWidth=3,n.beginPath(),n.moveTo(s,l+h),n.lineTo(s,l),n.lineTo(s+h,l),n.stroke(),n.beginPath(),n.moveTo(s+o-h,l),n.lineTo(s+o,l),n.lineTo(s+o,l+h),n.stroke(),n.beginPath(),n.moveTo(s,l+c-h),n.lineTo(s,l+c),n.lineTo(s+h,l+c),n.stroke(),n.beginPath(),n.moveTo(s+o-h,l+c),n.lineTo(s+o,l+c),n.lineTo(s+o,l+c-h),n.stroke()}))}updateStreamMessage(){let n=performance.now(),i=this.getMessagePriority(this.streamMessage);if(this.desiredStreamMessage===this.streamMessage){this.streamMessageSince=0;return}if(this.desiredStreamPriority>=i){this.streamMessage=this.desiredStreamMessage,this.streamMessageSince=0;return}this.streamMessageSince===0&&(this.streamMessageSince=n),n-this.streamMessageSince>=this.streamMessageHoldMs&&(this.streamMessage=this.desiredStreamMessage,this.streamMessageSince=0)}getMessagePriority(n){return n.startsWith("Move closer")?1:n.startsWith("No barcode")?0:2}startFPSOnlyLoop(){let n=()=>{this.isStreaming&&(this.updateFPS(),this.animationFrameId=requestAnimationFrame(n))};n()}updateFPS(){let n=performance.now();this.frameCount++,n-this.fpsUpdateTime>=1e3&&(this.fps=Math.round(this.frameCount/((n-this.fpsUpdateTime)/1e3)),this.frameCount=0,this.fpsUpdateTime=n),this.updateCameraFPS()}updateCameraFPS(){let n=this.videoElement.nativeElement,i=performance.now();n.currentTime!==this.lastVideoTime&&(this.videoFrameCount++,this.lastVideoTime=n.currentTime),i-this.lastVideoFpsUpdate>=1e3&&(this.actualCameraFps=Math.round(this.videoFrameCount/((i-this.lastVideoFpsUpdate)/1e3)),this.videoFrameCount=0,this.lastVideoFpsUpdate=i)}detectionsChanged(){return!0}redrawDetectionOverlay(n){if(!this.overlayCanvas)return;n.getContext("2d").drawImage(this.overlayCanvas,0,0)}cacheDetectionOverlay(n,i){this.overlayCanvas||(this.overlayCanvas=document.createElement("canvas")),this.overlayCanvas.width=n.width,this.overlayCanvas.height=n.height;let a=this.overlayCanvas.getContext("2d");a.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.drawDetections(a,i),this.currentDetections=i}toggleDetector(){this.debugLog("Switching detector mode:",this.useMockDetector?"Mock":"ONNX"),this.modelLoaded=!1,this.loadModel()}toggleCamera(){this.isStreaming?this.stopCamera():this.startCamera()}};e.\u0275fac=function(i){return new(i||e)(ot(tR),ot(rR),ot(Rr))},e.\u0275cmp=fd({type:e,selectors:[["app-barcode-detector"]],viewQuery:function(i,a){if(i&1&&(u0(JX,5),u0(eY,5)),i&2){let u;l0(u=c0())&&(a.videoElement=u.first),l0(u=c0())&&(a.canvasElement=u.first)}},standalone:!0,features:[Td],decls:30,vars:21,consts:[["videoElement",""],["canvasElement",""],[1,"detector-container"],[1,"header"],[1,"status"],["class","loading",4,"ngIf"],["class","ready",4,"ngIf"],["class","error",4,"ngIf"],[1,"controls"],[3,"click","disabled"],[1,"control-row"],[1,"control-toggle"],["type","checkbox",3,"ngModelChange","ngModel"],[1,"control-select"],[3,"ngModelChange","change","ngModel"],[3,"value",4,"ngFor","ngForOf"],["class","stats",4,"ngIf"],[1,"video-container"],["autoplay","","playsinline","","muted",""],["class","decoded-overlay",4,"ngIf"],["class","status-overlay",4,"ngIf"],["aria-hidden","true",1,"roi-overlay",2,"--roi-top","25%","--roi-right","20%","--roi-bottom","25%","--roi-left","20%"],["class","center-crosshair","aria-hidden","true",4,"ngIf"],["class","info",4,"ngIf"],[1,"loading"],[1,"ready"],[1,"error"],[3,"value"],[1,"stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","small"],[1,"decoded-overlay"],[1,"decoded-value"],[1,"decoded-meta"],[1,"status-overlay"],["aria-hidden","true",1,"center-crosshair"],[1,"crosshair-line","horizontal"],[1,"crosshair-line","vertical"],[1,"crosshair-center"],[1,"info"]],template:function(i,a){if(i&1){let u=c2();wt(0,"div",2)(1,"div",3)(2,"h1"),ar(3,"Barcode Detector"),dt(),wt(4,"div",4),Ri(5,tY,2,1,"span",5)(6,rY,2,1,"span",6)(7,nY,2,1,"span",7),dt()(),wt(8,"div",8)(9,"button",9),fi("click",function(){return Il(u),Al(a.toggleCamera())}),ar(10),dt(),wt(11,"div",10)(12,"label",11)(13,"input",12),Ed("ngModelChange",function(l){return Il(u),f0(a.preprocessEnabled,l)||(a.preprocessEnabled=l),Al(l)}),dt(),ar(14," Preprocess (resize + threshold) "),dt(),wt(15,"label",13),ar(16," Resolution "),wt(17,"select",14),Ed("ngModelChange",function(l){return Il(u),f0(a.cameraResolution,l)||(a.cameraResolution=l),Al(l)}),fi("change",function(){return Il(u),Al(a.onCameraResolutionChange())}),Ri(18,oY,2,2,"option",15),dt()()()(),Ri(19,iY,21,6,"div",16),wt(20,"div",17),Ra(21,"video",18,0)(23,"canvas",null,1),Ri(25,aY,5,2,"div",19)(26,sY,2,1,"div",20),Ra(27,"div",21),Ri(28,uY,4,0,"div",22),dt(),Ri(29,lY,5,0,"div",23),dt()}i&2&&(Ct(5),Cn("ngIf",a.isModelLoading),Ct(),Cn("ngIf",a.modelLoaded&&!a.isModelLoading),Ct(),Cn("ngIf",a.error),Ct(2),ci("stop",a.isStreaming),Cn("disabled",!a.modelLoaded||a.isModelLoading),Ct(),di(" ",a.isStreaming?"Stop Camera":"Start Camera"," "),Ct(3),_d("ngModel",a.preprocessEnabled),Ct(4),_d("ngModel",a.cameraResolution),Ct(),Cn("ngForOf",a.cameraResolutionOptions),Ct(),Cn("ngIf",a.isStreaming),Ct(2),ci("hidden",!a.isStreaming),Ct(2),ci("hidden",!a.isStreaming),Ct(2),Cn("ngIf",a.isStreaming&&a.decodedText),Ct(),Cn("ngIf",a.isStreaming&&a.streamMessage),Ct(),ci("hidden",!a.isStreaming),Ct(),Cn("ngIf",a.isStreaming),Ct(),Cn("ngIf",!a.isStreaming&&a.modelLoaded))},dependencies:[Ol,T2,I2,i_,r_,o_,O0,Fd,Q2,M0],styles:['.detector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;max-width:100vw;min-height:100vh}.detector-toggle[_ngcontent-%COMP%]{margin-bottom:10px}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;font-size:.9rem;cursor:pointer}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#fff}.status[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem}.status[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{color:orange}.status[_ngcontent-%COMP%]   .ready[_ngcontent-%COMP%]{color:#4caf50}.status[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ff5252}.controls[_ngcontent-%COMP%]{margin:20px 0}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px;font-size:1.1rem;padding:15px 30px}.controls[_ngcontent-%COMP%]   button.stop[_ngcontent-%COMP%]{background-color:#f44336}.controls[_ngcontent-%COMP%]   button.stop[_ngcontent-%COMP%]:hover{background-color:#da190b}.controls[_ngcontent-%COMP%]   .control-row[_ngcontent-%COMP%]{margin-top:12px;display:flex;flex-wrap:wrap;gap:12px 16px;align-items:center;justify-content:center}.controls[_ngcontent-%COMP%]   .control-toggle[_ngcontent-%COMP%], .controls[_ngcontent-%COMP%]   .control-select[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#e6e6e6;font-size:.95rem}.controls[_ngcontent-%COMP%]   .control-select[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{background:#1e1e1e;color:#fff;border:1px solid rgba(255,255,255,.2);border-radius:6px;padding:6px 8px}.stats[_ngcontent-%COMP%]{display:flex;gap:30px;margin:20px 0;padding:15px 30px;background-color:#ffffff1a;border-radius:8px}.stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.stats[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#aaa}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#4caf50}.stats[_ngcontent-%COMP%]   .stat-value.highlight[_ngcontent-%COMP%]{color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5);animation:_ngcontent-%COMP%_pulse 1s ease-in-out infinite}.stats[_ngcontent-%COMP%]   .stat-value.small[_ngcontent-%COMP%]{font-size:1rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.video-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:1280px;margin:20px auto;background-color:#000;border-radius:8px;overflow:hidden;box-shadow:0 4px 6px #0000004d}.video-container[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:75%}@media (min-width: 768px){.video-container[_ngcontent-%COMP%]:before{padding-bottom:56.25%}}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;display:block}.video-container[_ngcontent-%COMP%]   video.hidden[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas.hidden[_ngcontent-%COMP%]{display:none}.video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{z-index:2}.video-container[_ngcontent-%COMP%]   .roi-overlay[_ngcontent-%COMP%]{position:absolute;top:var(--roi-top);left:var(--roi-left);right:var(--roi-right);bottom:var(--roi-bottom);pointer-events:none;z-index:3;border:1px solid #ff0000;box-sizing:border-box}.video-container[_ngcontent-%COMP%]   .roi-overlay.hidden[_ngcontent-%COMP%]{display:none}.decoded-overlay[_ngcontent-%COMP%]{position:absolute;top:12px;left:50%;transform:translate(-50%);z-index:4;text-align:center;background:#0000004d;color:#fff;padding:8px 14px;border-radius:8px;max-width:90%}.status-overlay[_ngcontent-%COMP%]{position:absolute;top:60px;left:50%;transform:translate(-50%);z-index:4;text-align:center;background:#0000004d;color:#fff;padding:6px 12px;border-radius:6px;font-size:1.1rem;font-weight:600;max-width:90%}.decoded-value[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;word-break:break-all}.decoded-meta[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#e0e0e0;margin-top:4px}.info[_ngcontent-%COMP%]{text-align:center;margin-top:30px;padding:20px;background-color:#ffffff0d;border-radius:8px;max-width:600px}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;color:#ccc;line-height:1.6}.center-crosshair[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5;pointer-events:none;width:60px;height:60px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line[_ngcontent-%COMP%]{position:absolute;background:#fffc;box-shadow:0 0 4px #00000080}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.horizontal[_ngcontent-%COMP%]{top:50%;left:10px;right:10px;height:2px;transform:translateY(-50%)}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.vertical[_ngcontent-%COMP%]{left:50%;top:10px;bottom:10px;width:2px;transform:translate(-50%)}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:8px;height:8px;background:#ffffffe6;border:2px solid rgba(0,0,0,.7);border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 6px #0000004d}@keyframes _ngcontent-%COMP%_crosshair-pulse{0%,to{opacity:.8}50%{opacity:1}}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crosshair-pulse 2s ease-in-out infinite}@media (max-width: 768px){.center-crosshair[_ngcontent-%COMP%]{width:50px;height:50px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.horizontal[_ngcontent-%COMP%]{left:8px;right:8px;height:1.5px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.vertical[_ngcontent-%COMP%]{top:8px;bottom:8px;width:1.5px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{width:6px;height:6px}}@media (max-width: 768px){.detector-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:8px}.status[_ngcontent-%COMP%]{font-size:.9rem}.controls[_ngcontent-%COMP%]{margin:15px 0}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;font-size:1rem;padding:12px 20px}.stats[_ngcontent-%COMP%]{flex-direction:column;gap:10px;padding:12px 15px;margin:15px 0}.stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;gap:10px}.stats[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:#ccc}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.1rem}.stats[_ngcontent-%COMP%]   .stat-value.small[_ngcontent-%COMP%]{font-size:.9rem}.video-container[_ngcontent-%COMP%]{margin:15px auto;border-radius:6px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border-radius:6px}.decoded-overlay[_ngcontent-%COMP%]{top:8px;padding:8px 12px;border-radius:4px}.decoded-overlay[_ngcontent-%COMP%]   .decoded-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700}.decoded-overlay[_ngcontent-%COMP%]   .decoded-meta[_ngcontent-%COMP%]{font-size:.7rem;margin-top:2px}.status-overlay[_ngcontent-%COMP%]{font-size:.8rem;padding:6px 10px;border-radius:4px}.info[_ngcontent-%COMP%]{padding:15px;text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;margin:5px 0}}@media (min-width: 769px) and (max-width: 1024px){.detector-container[_ngcontent-%COMP%]{padding:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.stats[_ngcontent-%COMP%]{gap:20px;padding:12px 25px}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.video-container[_ngcontent-%COMP%]{max-width:800px}}@media (hover: none) and (pointer: coarse){.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:48px;font-size:1.1rem}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-height:44px;padding:8px 0;align-items:flex-start}}']});let t=e;return t})();var oR=(()=>{let e=class e{constructor(){this.title="Angular Barcode Detector"}};e.\u0275fac=function(i){return new(i||e)},e.\u0275cmp=fd({type:e,selectors:[["app-root"]],standalone:!0,features:[Td],decls:2,vars:0,consts:[[1,"app-container"]],template:function(i,a){i&1&&(wt(0,"div",0),Ra(1,"app-barcode-detector"),dt())},dependencies:[Ol,nR],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a1a1a,#2d2d2d)}"]});let t=e;return t})();R2(oR,{providers:[]}).catch(t=>console.error(t));
