var rN=Object.defineProperty,nN=Object.defineProperties;var iN=Object.getOwnPropertyDescriptors;var ky=Object.getOwnPropertySymbols;var oN=Object.prototype.hasOwnProperty,aN=Object.prototype.propertyIsEnumerable;var Ly=(t,e)=>(e=Symbol[t])?e:Symbol.for("Symbol."+t);var By=(t,e,r)=>e in t?rN(t,e,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[e]=r,N=(t,e)=>{for(var r in e||={})oN.call(e,r)&&By(t,r,e[r]);if(ky)for(var r of ky(e))aN.call(e,r)&&By(t,r,e[r]);return t},j=(t,e)=>nN(t,iN(e));var U=(t,e,r)=>new Promise((n,o)=>{var a=l=>{try{s(r.next(l))}catch(i){o(i)}},u=l=>{try{s(r.throw(l))}catch(i){o(i)}},s=l=>l.done?n(l.value):Promise.resolve(l.value).then(a,u);s((r=r.apply(t,e)).next())});var Uc=(t,e,r)=>(e=t[Ly("asyncIterator")])?e.call(t):(t=t[Ly("iterator")](),e={},r=(n,o)=>(o=t[n])&&(e[n]=a=>new Promise((u,s,l)=>(a=o.call(t,a),l=a.done,Promise.resolve(a.value).then(i=>u({value:i,done:l}),s)))),r("next"),r("return"),e);var $y=null;var ih=1,Vy=Symbol("SIGNAL");function lt(t){let e=$y;return $y=t,e}var jy={version:0,lastCleanEpoch:0,dirty:!1,producerNode:void 0,producerLastReadVersion:void 0,producerIndexOfThis:void 0,nextProducerIndex:0,liveConsumerNode:void 0,liveConsumerIndexOfThis:void 0,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sN(t){if(!(sh(t)&&!t.dirty)&&!(!t.dirty&&t.lastCleanEpoch===ih)){if(!t.producerMustRecompute(t)&&!oh(t)){t.dirty=!1,t.lastCleanEpoch=ih;return}t.producerRecomputeValue(t),t.dirty=!1,t.lastCleanEpoch=ih}}function Uy(t){return t&&(t.nextProducerIndex=0),lt(t)}function Hy(t,e){if(lt(e),!(!t||t.producerNode===void 0||t.producerIndexOfThis===void 0||t.producerLastReadVersion===void 0)){if(sh(t))for(let r=t.nextProducerIndex;r<t.producerNode.length;r++)ah(t.producerNode[r],t.producerIndexOfThis[r]);for(;t.producerNode.length>t.nextProducerIndex;)t.producerNode.pop(),t.producerLastReadVersion.pop(),t.producerIndexOfThis.pop()}}function oh(t){Hc(t);for(let e=0;e<t.producerNode.length;e++){let r=t.producerNode[e],n=t.producerLastReadVersion[e];if(n!==r.version||(sN(r),n!==r.version))return!0}return!1}function zy(t){if(Hc(t),sh(t))for(let e=0;e<t.producerNode.length;e++)ah(t.producerNode[e],t.producerIndexOfThis[e]);t.producerNode.length=t.producerLastReadVersion.length=t.producerIndexOfThis.length=0,t.liveConsumerNode&&(t.liveConsumerNode.length=t.liveConsumerIndexOfThis.length=0)}function ah(t,e){if(uN(t),Hc(t),t.liveConsumerNode.length===1)for(let n=0;n<t.producerNode.length;n++)ah(t.producerNode[n],t.producerIndexOfThis[n]);let r=t.liveConsumerNode.length-1;if(t.liveConsumerNode[e]=t.liveConsumerNode[r],t.liveConsumerIndexOfThis[e]=t.liveConsumerIndexOfThis[r],t.liveConsumerNode.length--,t.liveConsumerIndexOfThis.length--,e<t.liveConsumerNode.length){let n=t.liveConsumerIndexOfThis[e],o=t.liveConsumerNode[e];Hc(o),o.producerIndexOfThis[n]=e}}function sh(t){return t.consumerIsAlwaysLive||(t?.liveConsumerNode?.length??0)>0}function Hc(t){t.producerNode??=[],t.producerIndexOfThis??=[],t.producerLastReadVersion??=[]}function uN(t){t.liveConsumerNode??=[],t.liveConsumerIndexOfThis??=[]}function lN(){throw new Error}var cN=lN;function Gy(t){cN=t}function un(t){return typeof t=="function"}function zc(t){let r=t(n=>{Error.call(n),n.stack=new Error().stack});return r.prototype=Object.create(Error.prototype),r.prototype.constructor=r,r}var Gc=zc(t=>function(r){t(this),this.message=r?`${r.length} errors occurred during unsubscription:
${r.map((n,o)=>`${o+1}) ${n.toString()}`).join(`
  `)}`:"",this.name="UnsubscriptionError",this.errors=r});function Vu(t,e){if(t){let r=t.indexOf(e);0<=r&&t.splice(r,1)}}var ln=class t{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;let{_parentage:r}=this;if(r)if(this._parentage=null,Array.isArray(r))for(let a of r)a.remove(this);else r.remove(this);let{initialTeardown:n}=this;if(un(n))try{n()}catch(a){e=a instanceof Gc?a.errors:[a]}let{_finalizers:o}=this;if(o){this._finalizers=null;for(let a of o)try{Wy(a)}catch(u){e=e??[],u instanceof Gc?e=[...e,...u.errors]:e.push(u)}}if(e)throw new Gc(e)}}add(e){var r;if(e&&e!==this)if(this.closed)Wy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(r=this._finalizers)!==null&&r!==void 0?r:[]).push(e)}}_hasParent(e){let{_parentage:r}=this;return r===e||Array.isArray(r)&&r.includes(e)}_addParent(e){let{_parentage:r}=this;this._parentage=Array.isArray(r)?(r.push(e),r):r?[r,e]:e}_removeParent(e){let{_parentage:r}=this;r===e?this._parentage=null:Array.isArray(r)&&Vu(r,e)}remove(e){let{_finalizers:r}=this;r&&Vu(r,e),e instanceof t&&e._removeParent(this)}};ln.EMPTY=(()=>{let t=new ln;return t.closed=!0,t})();var uh=ln.EMPTY;function Wc(t){return t instanceof ln||t&&"closed"in t&&un(t.remove)&&un(t.add)&&un(t.unsubscribe)}function Wy(t){un(t)?t():t.unsubscribe()}var ri={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1};var qa={setTimeout(t,e,...r){let{delegate:n}=qa;return n?.setTimeout?n.setTimeout(t,e,...r):setTimeout(t,e,...r)},clearTimeout(t){let{delegate:e}=qa;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function qy(t){qa.setTimeout(()=>{let{onUnhandledError:e}=ri;if(e)e(t);else throw t})}function lh(){}var Xy=ch("C",void 0,void 0);function Yy(t){return ch("E",void 0,t)}function Zy(t){return ch("N",t,void 0)}function ch(t,e,r){return{kind:t,value:e,error:r}}var aa=null;function Xa(t){if(ri.useDeprecatedSynchronousErrorHandling){let e=!aa;if(e&&(aa={errorThrown:!1,error:null}),t(),e){let{errorThrown:r,error:n}=aa;if(aa=null,r)throw n}}else t()}function Ky(t){ri.useDeprecatedSynchronousErrorHandling&&aa&&(aa.errorThrown=!0,aa.error=t)}var sa=class extends ln{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,Wc(e)&&e.add(this)):this.destination=hN}static create(e,r,n){return new Ya(e,r,n)}next(e){this.isStopped?dh(Zy(e),this):this._next(e)}error(e){this.isStopped?dh(Yy(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?dh(Xy,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}},fN=Function.prototype.bind;function fh(t,e){return fN.call(t,e)}var hh=class{constructor(e){this.partialObserver=e}next(e){let{partialObserver:r}=this;if(r.next)try{r.next(e)}catch(n){qc(n)}}error(e){let{partialObserver:r}=this;if(r.error)try{r.error(e)}catch(n){qc(n)}else qc(e)}complete(){let{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(r){qc(r)}}},Ya=class extends sa{constructor(e,r,n){super();let o;if(un(e)||!e)o={next:e??void 0,error:r??void 0,complete:n??void 0};else{let a;this&&ri.useDeprecatedNextContext?(a=Object.create(e),a.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&fh(e.next,a),error:e.error&&fh(e.error,a),complete:e.complete&&fh(e.complete,a)}):o=e}this.destination=new hh(o)}};function qc(t){ri.useDeprecatedSynchronousErrorHandling?Ky(t):qy(t)}function dN(t){throw t}function dh(t,e){let{onStoppedNotification:r}=ri;r&&qa.setTimeout(()=>r(t,e))}var hN={closed:!0,next:lh,error:dN,complete:lh};var Qy=typeof Symbol=="function"&&Symbol.observable||"@@observable";function Jy(t){return t}function ev(t){return t.length===0?Jy:t.length===1?t[0]:function(r){return t.reduce((n,o)=>o(n),r)}}var ph=(()=>{class t{constructor(r){r&&(this._subscribe=r)}lift(r){let n=new t;return n.source=this,n.operator=r,n}subscribe(r,n,o){let a=gN(r)?r:new Ya(r,n,o);return Xa(()=>{let{operator:u,source:s}=this;a.add(u?u.call(a,s):s?this._subscribe(a):this._trySubscribe(a))}),a}_trySubscribe(r){try{return this._subscribe(r)}catch(n){r.error(n)}}forEach(r,n){return n=tv(n),new n((o,a)=>{let u=new Ya({next:s=>{try{r(s)}catch(l){a(l),u.unsubscribe()}},error:a,complete:o});this.subscribe(u)})}_subscribe(r){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(r)}[Qy](){return this}pipe(...r){return ev(r)(this)}toPromise(r){return r=tv(r),new r((n,o)=>{let a;this.subscribe(u=>a=u,u=>o(u),()=>n(a))})}}return t.create=e=>new t(e),t})();function tv(t){var e;return(e=t??ri.Promise)!==null&&e!==void 0?e:Promise}function pN(t){return t&&un(t.next)&&un(t.error)&&un(t.complete)}function gN(t){return t&&t instanceof sa||pN(t)&&Wc(t)}function mN(t){return un(t?.lift)}function rv(t){return e=>{if(mN(e))return e.lift(function(r){try{return t(r,this)}catch(n){this.error(n)}});throw new TypeError("Unable to lift unknown Observable type")}}function nv(t,e,r,n,o){return new gh(t,e,r,n,o)}var gh=class extends sa{constructor(e,r,n,o,a,u){super(e),this.onFinalize=a,this.shouldUnsubscribe=u,this._next=r?function(s){try{r(s)}catch(l){e.error(l)}}:super._next,this._error=o?function(s){try{o(s)}catch(l){e.error(l)}finally{this.unsubscribe()}}:super._error,this._complete=n?function(){try{n()}catch(s){e.error(s)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){let{closed:r}=this;super.unsubscribe(),!r&&((e=this.onFinalize)===null||e===void 0||e.call(this))}}};var iv=zc(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var mo=(()=>{class t extends ph{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(r){let n=new Xc(this,this);return n.operator=r,n}_throwIfClosed(){if(this.closed)throw new iv}next(r){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(let n of this.currentObservers)n.next(r)}})}error(r){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=r;let{observers:n}=this;for(;n.length;)n.shift().error(r)}})}complete(){Xa(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;let{observers:r}=this;for(;r.length;)r.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var r;return((r=this.observers)===null||r===void 0?void 0:r.length)>0}_trySubscribe(r){return this._throwIfClosed(),super._trySubscribe(r)}_subscribe(r){return this._throwIfClosed(),this._checkFinalizedStatuses(r),this._innerSubscribe(r)}_innerSubscribe(r){let{hasError:n,isStopped:o,observers:a}=this;return n||o?uh:(this.currentObservers=null,a.push(r),new ln(()=>{this.currentObservers=null,Vu(a,r)}))}_checkFinalizedStatuses(r){let{hasError:n,thrownError:o,isStopped:a}=this;n?r.error(o):a&&r.complete()}asObservable(){let r=new ph;return r.source=this,r}}return t.create=(e,r)=>new Xc(e,r),t})(),Xc=class extends mo{constructor(e,r){super(),this.destination=e,this.source=r}next(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.next)===null||n===void 0||n.call(r,e)}error(e){var r,n;(n=(r=this.destination)===null||r===void 0?void 0:r.error)===null||n===void 0||n.call(r,e)}complete(){var e,r;(r=(e=this.destination)===null||e===void 0?void 0:e.complete)===null||r===void 0||r.call(e)}_subscribe(e){var r,n;return(n=(r=this.source)===null||r===void 0?void 0:r.subscribe(e))!==null&&n!==void 0?n:uh}};var ju=class extends mo{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){let r=super._subscribe(e);return!r.closed&&e.next(this._value),r}getValue(){let{hasError:e,thrownError:r,_value:n}=this;if(e)throw r;return this._throwIfClosed(),n}next(e){super.next(this._value=e)}};function mh(t,e){return rv((r,n)=>{let o=0;r.subscribe(nv(n,a=>{n.next(t.call(e,a,o++))}))})}var yN="https://g.co/ng/security#xss",gt=class extends Error{constructor(e,r){super(pp(e,r)),this.code=e}};function pp(t,e){return`${`NG0${Math.abs(t)}`}${e?": "+e:""}`}function gp(t){return{toString:t}.toString()}var Uu=globalThis;function Wt(t){for(let e in t)if(t[e]===Wt)return e;throw Error("Could not find renamed property on target object.")}function xn(t){if(typeof t=="string")return t;if(Array.isArray(t))return"["+t.map(xn).join(", ")+"]";if(t==null)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;let e=t.toString();if(e==null)return""+e;let r=e.indexOf(`
`);return r===-1?e:e.substring(0,r)}function ov(t,e){return t==null||t===""?e===null?"":e:e==null||e===""?t:t+" "+e}var vN=Wt({__forward_ref__:Wt});function mp(t){return t.__forward_ref__=mp,t.toString=function(){return xn(this())},t}function ii(t){return bN(t)?t():t}function bN(t){return typeof t=="function"&&t.hasOwnProperty(vN)&&t.__forward_ref__===mp}function Zt(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function cs(t){return{providers:t.providers||[],imports:t.imports||[]}}function yp(t){return av(t,jv)||av(t,Uv)}function av(t,e){return t.hasOwnProperty(e)?t[e]:null}function wN(t){let e=t&&(t[jv]||t[Uv]);return e||null}function sv(t){return t&&(t.hasOwnProperty(uv)||t.hasOwnProperty(xN))?t[uv]:null}var jv=Wt({\u0275prov:Wt}),uv=Wt({\u0275inj:Wt}),Uv=Wt({ngInjectableDef:Wt}),xN=Wt({ngInjectorDef:Wt}),Ft=class{constructor(e,r){this._desc=e,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,typeof r=="number"?this.__NG_ELEMENT_ID__=r:r!==void 0&&(this.\u0275prov=Zt({token:this,providedIn:r.providedIn||"root",factory:r.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}};function Hv(t){return t&&!!t.\u0275providers}var _N=Wt({\u0275cmp:Wt}),EN=Wt({\u0275dir:Wt}),TN=Wt({\u0275pipe:Wt});var lv=Wt({\u0275fac:Wt}),Hu=Wt({__NG_ELEMENT_ID__:Wt}),cv=Wt({__NG_ENV_ID__:Wt});function zv(t){return typeof t=="string"?t:t==null?"":String(t)}function IN(t){return typeof t=="function"?t.name||t.toString():typeof t=="object"&&t!=null&&typeof t.type=="function"?t.type.name||t.type.toString():zv(t)}function AN(t,e){let r=e?`. Dependency path: ${e.join(" > ")} > ${t}`:"";throw new gt(-200,t)}function vp(t,e){throw new gt(-201,!1)}var Ze=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}(Ze||{}),Oh;function Gv(){return Oh}function _i(t){let e=Oh;return Oh=t,e}function Wv(t,e,r){let n=yp(t);if(n&&n.providedIn=="root")return n.value===void 0?n.value=n.factory():n.value;if(r&Ze.Optional)return null;if(e!==void 0)return e;vp(t,"Injector")}var SN={},zu=SN,DN="__NG_DI_FLAG__",rf="ngTempTokenPath",CN="ngTokenPath",ON=/\n/gm,PN="\u0275",fv="__source",es;function MN(){return es}function Za(t){let e=es;return es=t,e}function NN(t,e=Ze.Default){if(es===void 0)throw new gt(-203,!1);return es===null?Wv(t,void 0,e):es.get(t,e&Ze.Optional?null:void 0,e)}function Et(t,e=Ze.Default){return(Gv()||NN)(ii(t),e)}function Ir(t,e=Ze.Default){return Et(t,bf(e))}function bf(t){return typeof t>"u"||typeof t=="number"?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function Ph(t){let e=[];for(let r=0;r<t.length;r++){let n=ii(t[r]);if(Array.isArray(n)){if(n.length===0)throw new gt(900,!1);let o,a=Ze.Default;for(let u=0;u<n.length;u++){let s=n[u],l=RN(s);typeof l=="number"?l===-1?o=s.token:a|=l:o=s}e.push(Et(o,a))}else e.push(Et(n))}return e}function RN(t){return t[DN]}function FN(t,e,r,n){let o=t[rf];throw e[fv]&&o.unshift(e[fv]),t.message=kN(`
`+t.message,o,r,n),t[CN]=o,t[rf]=null,t}function kN(t,e,r,n=null){t=t&&t.charAt(0)===`
`&&t.charAt(1)==PN?t.slice(2):t;let o=xn(e);if(Array.isArray(e))o=e.map(xn).join(" -> ");else if(typeof e=="object"){let a=[];for(let u in e)if(e.hasOwnProperty(u)){let s=e[u];a.push(u+":"+(typeof s=="string"?JSON.stringify(s):xn(s)))}o=`{${a.join(", ")}}`}return`${r}${n?"("+n+")":""}[${o}]: ${t.replace(ON,`
  `)}`}function Gu(t,e){let r=t.hasOwnProperty(lv);return r?t[lv]:null}function LN(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;n++){let o=t[n],a=e[n];if(r&&(o=r(o),a=r(a)),a!==o)return!1}return!0}function BN(t){return t.flat(Number.POSITIVE_INFINITY)}function bp(t,e){t.forEach(r=>Array.isArray(r)?bp(r,e):e(r))}function qv(t,e,r){e>=t.length?t.push(r):t.splice(e,0,r)}function nf(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function $N(t,e,r,n){let o=t.length;if(o==e)t.push(r,n);else if(o===1)t.push(n,t[0]),t[0]=r;else{for(o--,t.push(t[o-1],t[o]);o>e;){let a=o-2;t[o]=t[a],o--}t[e]=r,t[e+1]=n}}function VN(t,e,r){let n=rl(t,e);return n>=0?t[n|1]=r:(n=~n,$N(t,n,e,r)),n}function yh(t,e){let r=rl(t,e);if(r>=0)return t[r|1]}function rl(t,e){return jN(t,e,1)}function jN(t,e,r){let n=0,o=t.length>>r;for(;o!==n;){let a=n+(o-n>>1),u=t[a<<r];if(e===u)return a<<r;u>e?o=a:n=a+1}return~(o<<r)}var Wu={},oi=[],qu=new Ft(""),Xv=new Ft("",-1),Yv=new Ft(""),of=class{get(e,r=zu){if(r===zu){let n=new Error(`NullInjectorError: No provider for ${xn(e)}!`);throw n.name="NullInjectorError",n}return r}},Zv=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Zv||{}),Ii=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}(Ii||{}),vo=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(vo||{});function UN(t,e,r){let n=t.length;for(;;){let o=t.indexOf(e,r);if(o===-1)return o;if(o===0||t.charCodeAt(o-1)<=32){let a=e.length;if(o+a===n||t.charCodeAt(o+a)<=32)return o}r=o+1}}function Mh(t,e,r){let n=0;for(;n<r.length;){let o=r[n];if(typeof o=="number"){if(o!==0)break;n++;let a=r[n++],u=r[n++],s=r[n++];t.setAttribute(e,u,s,a)}else{let a=o,u=r[++n];zN(a)?t.setProperty(e,a,u):t.setAttribute(e,a,u),n++}}return n}function HN(t){return t===3||t===4||t===6}function zN(t){return t.charCodeAt(0)===64}function wp(t,e){if(!(e===null||e.length===0))if(t===null||t.length===0)t=e.slice();else{let r=-1;for(let n=0;n<e.length;n++){let o=e[n];typeof o=="number"?r=o:r===0||(r===-1||r===2?dv(t,r,o,null,e[++n]):dv(t,r,o,null,null))}}return t}function dv(t,e,r,n,o){let a=0,u=t.length;if(e===-1)u=-1;else for(;a<t.length;){let s=t[a++];if(typeof s=="number"){if(s===e){u=-1;break}else if(s>e){u=a-1;break}}}for(;a<t.length;){let s=t[a];if(typeof s=="number")break;if(s===r){if(n===null){o!==null&&(t[a+1]=o);return}else if(n===t[a+1]){t[a+2]=o;return}}a++,n!==null&&a++,o!==null&&a++}u!==-1&&(t.splice(u,0,e),a=u+1),t.splice(a++,0,r),n!==null&&t.splice(a++,0,n),o!==null&&t.splice(a++,0,o)}var Kv="ng-template";function GN(t,e,r,n){let o=0;if(n){for(;o<e.length&&typeof e[o]=="string";o+=2)if(e[o]==="class"&&UN(e[o+1].toLowerCase(),r,0)!==-1)return!0}else if(xp(t))return!1;if(o=e.indexOf(1,o),o>-1){let a;for(;++o<e.length&&typeof(a=e[o])=="string";)if(a.toLowerCase()===r)return!0}return!1}function xp(t){return t.type===4&&t.value!==Kv}function WN(t,e,r){let n=t.type===4&&!r?Kv:t.value;return e===n}function qN(t,e,r){let n=4,o=t.attrs,a=o!==null?ZN(o):0,u=!1;for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number"){if(!u&&!ni(n)&&!ni(l))return!1;if(u&&ni(l))continue;u=!1,n=l|n&1;continue}if(!u)if(n&4){if(n=2|n&1,l!==""&&!WN(t,l,r)||l===""&&e.length===1){if(ni(n))return!1;u=!0}}else if(n&8){if(o===null||!GN(t,o,l,r)){if(ni(n))return!1;u=!0}}else{let i=e[++s],c=XN(l,o,xp(t),r);if(c===-1){if(ni(n))return!1;u=!0;continue}if(i!==""){let f;if(c>a?f="":f=o[c+1].toLowerCase(),n&2&&i!==f){if(ni(n))return!1;u=!0}}}}return ni(n)||u}function ni(t){return(t&1)===0}function XN(t,e,r,n){if(e===null)return-1;let o=0;if(n||!r){let a=!1;for(;o<e.length;){let u=e[o];if(u===t)return o;if(u===3||u===6)a=!0;else if(u===1||u===2){let s=e[++o];for(;typeof s=="string";)s=e[++o];continue}else{if(u===4)break;if(u===0){o+=4;continue}}o+=a?1:2}return-1}else return KN(e,t)}function YN(t,e,r=!1){for(let n=0;n<e.length;n++)if(qN(t,e[n],r))return!0;return!1}function ZN(t){for(let e=0;e<t.length;e++){let r=t[e];if(HN(r))return e}return t.length}function KN(t,e){let r=t.indexOf(4);if(r>-1)for(r++;r<t.length;){let n=t[r];if(typeof n=="number")return-1;if(n===e)return r;r++}return-1}function hv(t,e){return t?":not("+e.trim()+")":e}function QN(t){let e=t[0],r=1,n=2,o="",a=!1;for(;r<t.length;){let u=t[r];if(typeof u=="string")if(n&2){let s=t[++r];o+="["+u+(s.length>0?'="'+s+'"':"")+"]"}else n&8?o+="."+u:n&4&&(o+=" "+u);else o!==""&&!ni(u)&&(e+=hv(a,o),o=""),n=u,a=a||!ni(n);r++}return o!==""&&(e+=hv(a,o)),e}function JN(t){return t.map(QN).join(",")}function e6(t){let e=[],r=[],n=1,o=2;for(;n<t.length;){let a=t[n];if(typeof a=="string")o===2?a!==""&&e.push(a,t[++n]):o===8&&r.push(a);else{if(!ni(o))break;o=a}n++}return{attrs:e,classes:r}}function wf(t){return gp(()=>{let e=eb(t),r=j(N({},e),{decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Zv.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||Ii.Emulated,styles:t.styles||oi,_:null,schemas:t.schemas||null,tView:null,id:""});tb(r);let n=t.dependencies;return r.directiveDefs=gv(n,!1),r.pipeDefs=gv(n,!0),r.id=i6(r),r})}function t6(t){return ns(t)||Qv(t)}function r6(t){return t!==null}function fs(t){return gp(()=>({type:t.type,bootstrap:t.bootstrap||oi,declarations:t.declarations||oi,imports:t.imports||oi,exports:t.exports||oi,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function pv(t,e){if(t==null)return Wu;let r={};for(let n in t)if(t.hasOwnProperty(n)){let o=t[n],a,u,s=vo.None;Array.isArray(o)?(s=o[0],a=o[1],u=o[2]??a):(a=o,u=o),e?(r[a]=s!==vo.None?[n,s]:n,e[a]=u):r[a]=n}return r}function _p(t){return gp(()=>{let e=eb(t);return tb(e),e})}function ns(t){return t[_N]||null}function Qv(t){return t[EN]||null}function Jv(t){return t[TN]||null}function n6(t){let e=ns(t)||Qv(t)||Jv(t);return e!==null?e.standalone:!1}function eb(t){let e={};return{type:t.type,providersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputTransforms:null,inputConfig:t.inputs||Wu,exportAs:t.exportAs||null,standalone:t.standalone===!0,signals:t.signals===!0,selectors:t.selectors||oi,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:pv(t.inputs,e),outputs:pv(t.outputs),debugInfo:null}}function tb(t){t.features?.forEach(e=>e(t))}function gv(t,e){if(!t)return null;let r=e?Jv:t6;return()=>(typeof t=="function"?t():t).map(n=>r(n)).filter(r6)}function i6(t){let e=0,r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery].join("|");for(let o of r)e=Math.imul(31,e)+o.charCodeAt(0)<<0;return e+=2147483648,"c"+e}function rb(t){return{\u0275providers:t}}function o6(...t){return{\u0275providers:nb(!0,t),\u0275fromNgModule:!0}}function nb(t,...e){let r=[],n=new Set,o,a=u=>{r.push(u)};return bp(e,u=>{let s=u;Nh(s,a,[],n)&&(o||=[],o.push(s))}),o!==void 0&&ib(o,a),r}function ib(t,e){for(let r=0;r<t.length;r++){let{ngModule:n,providers:o}=t[r];Ep(o,a=>{e(a,n)})}}function Nh(t,e,r,n){if(t=ii(t),!t)return!1;let o=null,a=sv(t),u=!a&&ns(t);if(!a&&!u){let l=t.ngModule;if(a=sv(l),a)o=l;else return!1}else{if(u&&!u.standalone)return!1;o=t}let s=n.has(o);if(u){if(s)return!1;if(n.add(o),u.dependencies){let l=typeof u.dependencies=="function"?u.dependencies():u.dependencies;for(let i of l)Nh(i,e,r,n)}}else if(a){if(a.imports!=null&&!s){n.add(o);let i;try{bp(a.imports,c=>{Nh(c,e,r,n)&&(i||=[],i.push(c))})}finally{}i!==void 0&&ib(i,e)}if(!s){let i=Gu(o)||(()=>new o);e({provide:o,useFactory:i,deps:oi},o),e({provide:Yv,useValue:o,multi:!0},o),e({provide:qu,useValue:()=>Et(o),multi:!0},o)}let l=a.providers;if(l!=null&&!s){let i=t;Ep(l,c=>{e(c,i)})}}else return!1;return o!==t&&t.providers!==void 0}function Ep(t,e){for(let r of t)Hv(r)&&(r=r.\u0275providers),Array.isArray(r)?Ep(r,e):e(r)}var a6=Wt({provide:String,useValue:Wt});function ob(t){return t!==null&&typeof t=="object"&&a6 in t}function s6(t){return!!(t&&t.useExisting)}function u6(t){return!!(t&&t.useFactory)}function Rh(t){return typeof t=="function"}var xf=new Ft(""),Zc={},l6={},vh;function Tp(){return vh===void 0&&(vh=new of),vh}var bo=class{},af=class extends bo{get destroyed(){return this._destroyed}constructor(e,r,n,o){super(),this.parent=r,this.source=n,this.scopes=o,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,kh(e,u=>this.processProvider(u)),this.records.set(Xv,Ka(void 0,this)),o.has("environment")&&this.records.set(bo,Ka(void 0,this));let a=this.records.get(xf);a!=null&&typeof a.value=="string"&&this.scopes.add(a.value),this.injectorDefTypes=new Set(this.get(Yv,oi,Ze.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;let e=lt(null);try{for(let n of this._ngOnDestroyHooks)n.ngOnDestroy();let r=this._onDestroyHooks;this._onDestroyHooks=[];for(let n of r)n()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),lt(e)}}onDestroy(e){return this.assertNotDestroyed(),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){this.assertNotDestroyed();let r=Za(this),n=_i(void 0),o;try{return e()}finally{Za(r),_i(n)}}get(e,r=zu,n=Ze.Default){if(this.assertNotDestroyed(),e.hasOwnProperty(cv))return e[cv](this);n=bf(n);let o,a=Za(this),u=_i(void 0);try{if(!(n&Ze.SkipSelf)){let l=this.records.get(e);if(l===void 0){let i=g6(e)&&yp(e);i&&this.injectableDefInScope(i)?l=Ka(Fh(e),Zc):l=null,this.records.set(e,l)}if(l!=null)return this.hydrate(e,l)}let s=n&Ze.Self?Tp():this.parent;return r=n&Ze.Optional&&r===zu?null:r,s.get(e,r)}catch(s){if(s.name==="NullInjectorError"){if((s[rf]=s[rf]||[]).unshift(xn(e)),a)throw s;return FN(s,e,"R3InjectorError",this.source)}else throw s}finally{_i(u),Za(a)}}resolveInjectorInitializers(){let e=lt(null),r=Za(this),n=_i(void 0),o;try{let a=this.get(qu,oi,Ze.Self);for(let u of a)u()}finally{Za(r),_i(n),lt(e)}}toString(){let e=[],r=this.records;for(let n of r.keys())e.push(xn(n));return`R3Injector[${e.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new gt(205,!1)}processProvider(e){e=ii(e);let r=Rh(e)?e:ii(e&&e.provide),n=f6(e);if(!Rh(e)&&e.multi===!0){let o=this.records.get(r);o||(o=Ka(void 0,Zc,!0),o.factory=()=>Ph(o.multi),this.records.set(r,o)),r=e,o.multi.push(e)}this.records.set(r,n)}hydrate(e,r){let n=lt(null);try{return r.value===Zc&&(r.value=l6,r.value=r.factory()),typeof r.value=="object"&&r.value&&p6(r.value)&&this._ngOnDestroyHooks.add(r.value),r.value}finally{lt(n)}}injectableDefInScope(e){if(!e.providedIn)return!1;let r=ii(e.providedIn);return typeof r=="string"?r==="any"||this.scopes.has(r):this.injectorDefTypes.has(r)}removeOnDestroy(e){let r=this._onDestroyHooks.indexOf(e);r!==-1&&this._onDestroyHooks.splice(r,1)}};function Fh(t){let e=yp(t),r=e!==null?e.factory:Gu(t);if(r!==null)return r;if(t instanceof Ft)throw new gt(204,!1);if(t instanceof Function)return c6(t);throw new gt(204,!1)}function c6(t){if(t.length>0)throw new gt(204,!1);let r=wN(t);return r!==null?()=>r.factory(t):()=>new t}function f6(t){if(ob(t))return Ka(void 0,t.useValue);{let e=d6(t);return Ka(e,Zc)}}function d6(t,e,r){let n;if(Rh(t)){let o=ii(t);return Gu(o)||Fh(o)}else if(ob(t))n=()=>ii(t.useValue);else if(u6(t))n=()=>t.useFactory(...Ph(t.deps||[]));else if(s6(t))n=()=>Et(ii(t.useExisting));else{let o=ii(t&&(t.useClass||t.provide));if(h6(t))n=()=>new o(...Ph(t.deps));else return Gu(o)||Fh(o)}return n}function Ka(t,e,r=!1){return{factory:t,value:e,multi:r?[]:void 0}}function h6(t){return!!t.deps}function p6(t){return t!==null&&typeof t=="object"&&typeof t.ngOnDestroy=="function"}function g6(t){return typeof t=="function"||typeof t=="object"&&t instanceof Ft}function kh(t,e){for(let r of t)Array.isArray(r)?kh(r,e):r&&Hv(r)?kh(r.\u0275providers,e):e(r)}function m6(){return Gv()!==void 0||MN()!=null}function y6(t){return typeof t=="function"}var Qi=0,je=1,Te=2,Vr=3,ai=4,ui=5,sf=6,Xu=7,si=8,is=9,Ai=10,Jr=11,Yu=12,mv=13,ds=14,Xi=15,nl=16,Qa=17,Yi=18,_f=19,ab=20,yo=21,bh=22,ca=23,wo=25,sb=1;var fa=7,uf=8,os=9,_n=10,Ip=function(t){return t[t.None=0]="None",t[t.HasTransplantedViews=2]="HasTransplantedViews",t}(Ip||{});function ts(t){return Array.isArray(t)&&typeof t[sb]=="object"}function Ji(t){return Array.isArray(t)&&t[sb]===!0}function ub(t){return(t.flags&4)!==0}function Ap(t){return t.componentOffset>-1}function Sp(t){return(t.flags&1)===1}function il(t){return!!t.template}function v6(t){return(t[Te]&512)!==0}var Lh=class{constructor(e,r,n){this.previousValue=e,this.currentValue=r,this.firstChange=n}isFirstChange(){return this.firstChange}};function lb(t,e,r,n){e!==null?e.applyValueToInputSignal(e,n):t[r]=n}function Dp(){return cb}function cb(t){return t.type.prototype.ngOnChanges&&(t.setInput=w6),b6}Dp.ngInherit=!0;function b6(){let t=db(this),e=t?.current;if(e){let r=t.previous;if(r===Wu)t.previous=e;else for(let n in e)r[n]=e[n];t.current=null,this.ngOnChanges(e)}}function w6(t,e,r,n,o){let a=this.declaredInputs[n],u=db(t)||x6(t,{previous:Wu,current:null}),s=u.current||(u.current={}),l=u.previous,i=l[a];s[a]=new Lh(i&&i.currentValue,r,l===Wu),lb(t,e,o,r)}var fb="__ngSimpleChanges__";function db(t){return t[fb]||null}function x6(t,e){return t[fb]=e}var yv=null;var Ei=function(t,e,r){yv?.(t,e,r)},_6="svg",E6="math",T6=!1;function I6(){return T6}function Si(t){for(;Array.isArray(t);)t=t[Qi];return t}function hb(t,e){return Si(e[t])}function li(t,e){return Si(e[t.index])}function pb(t,e){return t.data[e]}function hs(t,e){let r=e[t];return ts(r)?r:r[Qi]}function A6(t){return(t[Te]&4)===4}function Cp(t){return(t[Te]&128)===128}function S6(t){return Ji(t[Vr])}function lf(t,e){return e==null?null:t[e]}function gb(t){t[Qa]=0}function D6(t){t[Te]&1024||(t[Te]|=1024,Cp(t)&&Zu(t))}function C6(t,e){for(;t>0;)e=e[ds],t--;return e}function Op(t){return!!(t[Te]&9216||t[ca]?.dirty)}function Bh(t){t[Ai].changeDetectionScheduler?.notify(1),Op(t)?Zu(t):t[Te]&64&&(I6()?(t[Te]|=1024,Zu(t)):t[Ai].changeDetectionScheduler?.notify())}function Zu(t){t[Ai].changeDetectionScheduler?.notify();let e=Ku(t);for(;e!==null&&!(e[Te]&8192||(e[Te]|=8192,!Cp(e)));)e=Ku(e)}function mb(t,e){if((t[Te]&256)===256)throw new gt(911,!1);t[yo]===null&&(t[yo]=[]),t[yo].push(e)}function O6(t,e){if(t[yo]===null)return;let r=t[yo].indexOf(e);r!==-1&&t[yo].splice(r,1)}function Ku(t){let e=t[Vr];return Ji(e)?e[Vr]:e}var ze={lFrame:Ab(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function P6(){return ze.lFrame.elementDepthCount}function M6(){ze.lFrame.elementDepthCount++}function N6(){ze.lFrame.elementDepthCount--}function yb(){return ze.bindingsEnabled}function R6(){return ze.skipHydrationRootTNode!==null}function F6(t){return ze.skipHydrationRootTNode===t}function k6(){ze.skipHydrationRootTNode=null}function dr(){return ze.lFrame.lView}function Di(){return ze.lFrame.tView}function vb(t){return ze.lFrame.contextLView=t,t[si]}function bb(t){return ze.lFrame.contextLView=null,t}function eo(){let t=wb();for(;t!==null&&t.type===64;)t=t.parent;return t}function wb(){return ze.lFrame.currentTNode}function L6(){let t=ze.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}function ol(t,e){let r=ze.lFrame;r.currentTNode=t,r.isParent=e}function xb(){return ze.lFrame.isParent}function B6(){ze.lFrame.isParent=!1}function $6(t){return ze.lFrame.bindingIndex=t}function _b(){return ze.lFrame.bindingIndex++}function V6(t){let e=ze.lFrame,r=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,r}function j6(){return ze.lFrame.inI18n}function U6(t,e){let r=ze.lFrame;r.bindingIndex=r.bindingRootIndex=t,$h(e)}function H6(){return ze.lFrame.currentDirectiveIndex}function $h(t){ze.lFrame.currentDirectiveIndex=t}function z6(t){let e=ze.lFrame.currentDirectiveIndex;return e===-1?null:t[e]}function Eb(){return ze.lFrame.currentQueryIndex}function Pp(t){ze.lFrame.currentQueryIndex=t}function G6(t){let e=t[je];return e.type===2?e.declTNode:e.type===1?t[ui]:null}function Tb(t,e,r){if(r&Ze.SkipSelf){let o=e,a=t;for(;o=o.parent,o===null&&!(r&Ze.Host);)if(o=G6(a),o===null||(a=a[ds],o.type&10))break;if(o===null)return!1;e=o,t=a}let n=ze.lFrame=Ib();return n.currentTNode=e,n.lView=t,!0}function Mp(t){let e=Ib(),r=t[je];ze.lFrame=e,e.currentTNode=r.firstChild,e.lView=t,e.tView=r,e.contextLView=t,e.bindingIndex=r.bindingStartIndex,e.inI18n=!1}function Ib(){let t=ze.lFrame,e=t===null?null:t.child;return e===null?Ab(t):e}function Ab(t){let e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return t!==null&&(t.child=e),e}function Sb(){let t=ze.lFrame;return ze.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}var Db=Sb;function Np(){let t=Sb();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function W6(t){return(ze.lFrame.contextLView=C6(t,ze.lFrame.contextLView))[si]}function ps(){return ze.lFrame.selectedIndex}function da(t){ze.lFrame.selectedIndex=t}function q6(){let t=ze.lFrame;return pb(t.tView,t.selectedIndex)}function X6(){return ze.lFrame.currentNamespace}var Cb=!0;function Rp(){return Cb}function Fp(t){Cb=t}function Y6(t,e,r){let{ngOnChanges:n,ngOnInit:o,ngDoCheck:a}=e.type.prototype;if(n){let u=cb(e);(r.preOrderHooks??=[]).push(t,u),(r.preOrderCheckHooks??=[]).push(t,u)}o&&(r.preOrderHooks??=[]).push(0-t,o),a&&((r.preOrderHooks??=[]).push(t,a),(r.preOrderCheckHooks??=[]).push(t,a))}function kp(t,e){for(let r=e.directiveStart,n=e.directiveEnd;r<n;r++){let a=t.data[r].type.prototype,{ngAfterContentInit:u,ngAfterContentChecked:s,ngAfterViewInit:l,ngAfterViewChecked:i,ngOnDestroy:c}=a;u&&(t.contentHooks??=[]).push(-r,u),s&&((t.contentHooks??=[]).push(r,s),(t.contentCheckHooks??=[]).push(r,s)),l&&(t.viewHooks??=[]).push(-r,l),i&&((t.viewHooks??=[]).push(r,i),(t.viewCheckHooks??=[]).push(r,i)),c!=null&&(t.destroyHooks??=[]).push(r,c)}}function Kc(t,e,r){Ob(t,e,3,r)}function Qc(t,e,r,n){(t[Te]&3)===r&&Ob(t,e,r,n)}function wh(t,e){let r=t[Te];(r&3)===e&&(r&=16383,r+=1,t[Te]=r)}function Ob(t,e,r,n){let o=n!==void 0?t[Qa]&65535:0,a=n??-1,u=e.length-1,s=0;for(let l=o;l<u;l++)if(typeof e[l+1]=="number"){if(s=e[l],n!=null&&s>=n)break}else e[l]<0&&(t[Qa]+=65536),(s<a||a==-1)&&(Z6(t,r,e,l),t[Qa]=(t[Qa]&4294901760)+l+2),l++}function vv(t,e){Ei(4,t,e);let r=lt(null);try{e.call(t)}finally{lt(r),Ei(5,t,e)}}function Z6(t,e,r,n){let o=r[n]<0,a=r[n+1],u=o?-r[n]:r[n],s=t[u];o?t[Te]>>14<t[Qa]>>16&&(t[Te]&3)===e&&(t[Te]+=16384,vv(s,a)):vv(s,a)}var rs=-1,Qu=class{constructor(e,r,n){this.factory=e,this.resolving=!1,this.canSeeViewProviders=r,this.injectImpl=n}};function K6(t){return t instanceof Qu}function Q6(t){return(t.flags&8)!==0}function J6(t){return(t.flags&16)!==0}function Pb(t){return t!==rs}function cf(t){return t&32767}function eR(t){return t>>16}function ff(t,e){let r=eR(t),n=e;for(;r>0;)n=n[ds],r--;return n}var Vh=!0;function bv(t){let e=Vh;return Vh=t,e}var tR=256,Mb=tR-1,Nb=5,rR=0,Ti={};function nR(t,e,r){let n;typeof r=="string"?n=r.charCodeAt(0)||0:r.hasOwnProperty(Hu)&&(n=r[Hu]),n==null&&(n=r[Hu]=rR++);let o=n&Mb,a=1<<o;e.data[t+(o>>Nb)]|=a}function Rb(t,e){let r=Fb(t,e);if(r!==-1)return r;let n=e[je];n.firstCreatePass&&(t.injectorIndex=e.length,xh(n.data,t),xh(e,null),xh(n.blueprint,null));let o=Lp(t,e),a=t.injectorIndex;if(Pb(o)){let u=cf(o),s=ff(o,e),l=s[je].data;for(let i=0;i<8;i++)e[a+i]=s[u+i]|l[u+i]}return e[a+8]=o,a}function xh(t,e){t.push(0,0,0,0,0,0,0,0,e)}function Fb(t,e){return t.injectorIndex===-1||t.parent&&t.parent.injectorIndex===t.injectorIndex||e[t.injectorIndex+8]===null?-1:t.injectorIndex}function Lp(t,e){if(t.parent&&t.parent.injectorIndex!==-1)return t.parent.injectorIndex;let r=0,n=null,o=e;for(;o!==null;){if(n=Vb(o),n===null)return rs;if(r++,o=o[ds],n.injectorIndex!==-1)return n.injectorIndex|r<<16}return rs}function iR(t,e,r){nR(t,e,r)}function kb(t,e,r){if(r&Ze.Optional||t!==void 0)return t;vp(e,"NodeInjector")}function Lb(t,e,r,n){if(r&Ze.Optional&&n===void 0&&(n=null),!(r&(Ze.Self|Ze.Host))){let o=t[is],a=_i(void 0);try{return o?o.get(e,n,r&Ze.Optional):Wv(e,n,r&Ze.Optional)}finally{_i(a)}}return kb(n,e,r)}function Bb(t,e,r,n=Ze.Default,o){if(t!==null){if(e[Te]&2048&&!(n&Ze.Self)){let u=uR(t,e,r,n,Ti);if(u!==Ti)return u}let a=$b(t,e,r,n,Ti);if(a!==Ti)return a}return Lb(e,r,n,o)}function $b(t,e,r,n,o){let a=aR(r);if(typeof a=="function"){if(!Tb(e,t,n))return n&Ze.Host?kb(o,r,n):Lb(e,r,n,o);try{let u;if(u=a(n),u==null&&!(n&Ze.Optional))vp(r);else return u}finally{Db()}}else if(typeof a=="number"){let u=null,s=Fb(t,e),l=rs,i=n&Ze.Host?e[Xi][ui]:null;for((s===-1||n&Ze.SkipSelf)&&(l=s===-1?Lp(t,e):e[s+8],l===rs||!xv(n,!1)?s=-1:(u=e[je],s=cf(l),e=ff(l,e)));s!==-1;){let c=e[je];if(wv(a,s,c.data)){let f=oR(s,e,r,u,n,i);if(f!==Ti)return f}l=e[s+8],l!==rs&&xv(n,e[je].data[s+8]===i)&&wv(a,s,e)?(u=c,s=cf(l),e=ff(l,e)):s=-1}}return o}function oR(t,e,r,n,o,a){let u=e[je],s=u.data[t+8],l=n==null?Ap(s)&&Vh:n!=u&&(s.type&3)!==0,i=o&Ze.Host&&a===s,c=Jc(s,u,r,l,i);return c!==null?as(e,u,c,s):Ti}function Jc(t,e,r,n,o){let a=t.providerIndexes,u=e.data,s=a&1048575,l=t.directiveStart,i=t.directiveEnd,c=a>>20,f=n?s:s+c,d=o?s+c:i;for(let h=f;h<d;h++){let p=u[h];if(h<l&&r===p||h>=l&&p.type===r)return h}if(o){let h=u[l];if(h&&il(h)&&h.type===r)return l}return null}function as(t,e,r,n){let o=t[r],a=e.data;if(K6(o)){let u=o;u.resolving&&AN(IN(a[r]));let s=bv(u.canSeeViewProviders);u.resolving=!0;let l,i=u.injectImpl?_i(u.injectImpl):null,c=Tb(t,n,Ze.Default);try{o=t[r]=u.factory(void 0,a,t,n),e.firstCreatePass&&r>=n.directiveStart&&Y6(r,a[r],e)}finally{i!==null&&_i(i),bv(s),u.resolving=!1,Db()}}return o}function aR(t){if(typeof t=="string")return t.charCodeAt(0)||0;let e=t.hasOwnProperty(Hu)?t[Hu]:void 0;return typeof e=="number"?e>=0?e&Mb:sR:e}function wv(t,e,r){let n=1<<t;return!!(r[e+(t>>Nb)]&n)}function xv(t,e){return!(t&Ze.Self)&&!(t&Ze.Host&&e)}var la=class{constructor(e,r){this._tNode=e,this._lView=r}get(e,r,n){return Bb(this._tNode,this._lView,e,bf(n),r)}};function sR(){return new la(eo(),dr())}function uR(t,e,r,n,o){let a=t,u=e;for(;a!==null&&u!==null&&u[Te]&2048&&!(u[Te]&512);){let s=$b(a,u,r,n|Ze.Self,Ti);if(s!==Ti)return s;let l=a.parent;if(!l){let i=u[ab];if(i){let c=i.get(r,Ti,n);if(c!==Ti)return c}l=Vb(u),u=u[ds]}a=l}return o}function Vb(t){let e=t[je],r=e.type;return r===2?e.declTNode:r===1?t[ui]:null}function _v(t,e=null,r=null,n){let o=lR(t,e,r,n);return o.resolveInjectorInitializers(),o}function lR(t,e=null,r=null,n,o=new Set){let a=[r||oi,o6(t)];return n=n||(typeof t=="object"?void 0:xn(t)),new af(a,e||Tp(),n||null,o)}var Ef=(()=>{let e=class e{static create(n,o){if(Array.isArray(n))return _v({name:""},o,n,"");{let a=n.name??"";return _v({name:a},n.parent,n.providers,a)}}};e.THROW_IF_NOT_FOUND=zu,e.NULL=new of,e.\u0275prov=Zt({token:e,providedIn:"any",factory:()=>Et(Xv)}),e.__NG_ELEMENT_ID__=-1;let t=e;return t})();var cR="ngOriginalError";function _h(t){return t[cR]}var Zi=class{constructor(){this._console=console}handleError(e){let r=this._findOriginalError(e);this._console.error("ERROR",e),r&&this._console.error("ORIGINAL ERROR",r)}_findOriginalError(e){let r=e&&_h(e);for(;r&&_h(r);)r=_h(r);return r||null}},jb=new Ft("",{providedIn:"root",factory:()=>Ir(Zi).handleError.bind(void 0)}),Ub=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=fR,e.__NG_ENV_ID__=n=>n;let t=e;return t})(),jh=class extends Ub{constructor(e){super(),this._lView=e}onDestroy(e){return mb(this._lView,e),()=>O6(this._lView,e)}};function fR(){return new jh(dr())}function dR(){return gs(eo(),dr())}function gs(t,e){return new ga(li(t,e))}var ga=(()=>{let e=class e{constructor(n){this.nativeElement=n}};e.__NG_ELEMENT_ID__=dR;let t=e;return t})();function hR(t){return t instanceof ga?t.nativeElement:t}var Uh=class extends mo{constructor(e=!1){super(),this.destroyRef=void 0,this.__isAsync=e,m6()&&(this.destroyRef=Ir(Ub,{optional:!0})??void 0)}emit(e){let r=lt(null);try{super.next(e)}finally{lt(r)}}subscribe(e,r,n){let o=e,a=r||(()=>null),u=n;if(e&&typeof e=="object"){let l=e;o=l.next?.bind(l),a=l.error?.bind(l),u=l.complete?.bind(l)}this.__isAsync&&(a=Eh(a),o&&(o=Eh(o)),u&&(u=Eh(u)));let s=super.subscribe({next:o,error:a,complete:u});return e instanceof ln&&e.add(s),s}};function Eh(t){return e=>{setTimeout(t,void 0,e)}}var ua=Uh;function pR(){return this._results[Symbol.iterator]()}var Hh=class t{get changes(){return this._changes??=new ua}constructor(e=!1){this._emitDistinctChangesOnly=e,this.dirty=!0,this._onDirty=void 0,this._results=[],this._changesDetected=!1,this._changes=void 0,this.length=0,this.first=void 0,this.last=void 0;let r=t.prototype;r[Symbol.iterator]||(r[Symbol.iterator]=pR)}get(e){return this._results[e]}map(e){return this._results.map(e)}filter(e){return this._results.filter(e)}find(e){return this._results.find(e)}reduce(e,r){return this._results.reduce(e,r)}forEach(e){this._results.forEach(e)}some(e){return this._results.some(e)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(e,r){this.dirty=!1;let n=BN(e);(this._changesDetected=!LN(this._results,n,r))&&(this._results=n,this.length=n.length,this.last=n[this.length-1],this.first=n[0])}notifyOnChanges(){this._changes!==void 0&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}onDirty(e){this._onDirty=e}setDirty(){this.dirty=!0,this._onDirty?.()}destroy(){this._changes!==void 0&&(this._changes.complete(),this._changes.unsubscribe())}};function Hb(t){return(t.flags&128)===128}var zb=new Map,gR=0;function mR(){return gR++}function yR(t){zb.set(t[_f],t)}function vR(t){zb.delete(t[_f])}var Ev="__ngContext__";function ha(t,e){ts(e)?(t[Ev]=e[_f],yR(e)):t[Ev]=e}function Gb(t){return qb(t[Yu])}function Wb(t){return qb(t[ai])}function qb(t){for(;t!==null&&!Ji(t);)t=t[ai];return t}var zh;function Xb(t){zh=t}function bR(){if(zh!==void 0)return zh;if(typeof document<"u")return document;throw new gt(210,!1)}var Bp=new Ft("",{providedIn:"root",factory:()=>wR}),wR="ng",$p=new Ft(""),ms=new Ft("",{providedIn:"platform",factory:()=>"unknown"});var Vp=new Ft("",{providedIn:"root",factory:()=>bR().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});var xR="h",_R="b";var ER=()=>null;function jp(t,e,r=!1){return ER(t,e,r)}var Yb=!1,TR=new Ft("",{providedIn:"root",factory:()=>Yb});var Gh=class{constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yN})`}};function Up(t){return t instanceof Gh?t.changingThisBreaksApplicationSecurity:t}var Ki=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Ki||{}),IR;function Hp(t,e){return IR(t,e)}function Ja(t,e,r,n,o){if(n!=null){let a,u=!1;Ji(n)?a=n:ts(n)&&(u=!0,n=n[Qi]);let s=Si(n);t===0&&r!==null?o==null?ew(e,r,s):df(e,r,s,o||null,!0):t===1&&r!==null?df(e,r,s,o||null,!0):t===2?UR(e,s,u):t===3&&e.destroyNode(s),a!=null&&zR(e,t,a,r,o)}}function AR(t,e){return t.createText(e)}function SR(t,e,r){t.setValue(e,r)}function Zb(t,e,r){return t.createElement(e,r)}function DR(t,e){Kb(t,e),e[Qi]=null,e[ui]=null}function CR(t,e,r,n,o,a){n[Qi]=o,n[ui]=e,Tf(t,n,r,1,o,a)}function Kb(t,e){e[Ai].changeDetectionScheduler?.notify(1),Tf(t,e,e[Jr],2,null,null)}function OR(t){let e=t[Yu];if(!e)return Th(t[je],t);for(;e;){let r=null;if(ts(e))r=e[Yu];else{let n=e[_n];n&&(r=n)}if(!r){for(;e&&!e[ai]&&e!==t;)ts(e)&&Th(e[je],e),e=e[Vr];e===null&&(e=t),ts(e)&&Th(e[je],e),r=e&&e[ai]}e=r}}function PR(t,e,r,n){let o=_n+n,a=r.length;n>0&&(r[o-1][ai]=e),n<a-_n?(e[ai]=r[o],qv(r,_n+n,e)):(r.push(e),e[ai]=null),e[Vr]=r;let u=e[nl];u!==null&&r!==u&&MR(u,e);let s=e[Yi];s!==null&&s.insertView(t),Bh(e),e[Te]|=128}function MR(t,e){let r=t[os],o=e[Vr][Vr][Xi];e[Xi]!==o&&(t[Te]|=Ip.HasTransplantedViews),r===null?t[os]=[e]:r.push(e)}function Qb(t,e){let r=t[os],n=r.indexOf(e);r.splice(n,1)}function Wh(t,e){if(t.length<=_n)return;let r=_n+e,n=t[r];if(n){let o=n[nl];o!==null&&o!==t&&Qb(o,n),e>0&&(t[r-1][ai]=n[ai]);let a=nf(t,_n+e);DR(n[je],n);let u=a[Yi];u!==null&&u.detachView(a[je]),n[Vr]=null,n[ai]=null,n[Te]&=-129}return n}function Jb(t,e){if(!(e[Te]&256)){let r=e[Jr];r.destroyNode&&Tf(t,e,r,3,null,null),OR(e)}}function Th(t,e){if(e[Te]&256)return;let r=lt(null);try{e[Te]&=-129,e[Te]|=256,e[ca]&&zy(e[ca]),RR(t,e),NR(t,e),e[je].type===1&&e[Jr].destroy();let n=e[nl];if(n!==null&&Ji(e[Vr])){n!==e[Vr]&&Qb(n,e);let o=e[Yi];o!==null&&o.detachView(t)}vR(e)}finally{lt(r)}}function NR(t,e){let r=t.cleanup,n=e[Xu];if(r!==null)for(let a=0;a<r.length-1;a+=2)if(typeof r[a]=="string"){let u=r[a+3];u>=0?n[u]():n[-u].unsubscribe(),a+=2}else{let u=n[r[a+1]];r[a].call(u)}n!==null&&(e[Xu]=null);let o=e[yo];if(o!==null){e[yo]=null;for(let a=0;a<o.length;a++){let u=o[a];u()}}}function RR(t,e){let r;if(t!=null&&(r=t.destroyHooks)!=null)for(let n=0;n<r.length;n+=2){let o=e[r[n]];if(!(o instanceof Qu)){let a=r[n+1];if(Array.isArray(a))for(let u=0;u<a.length;u+=2){let s=o[a[u]],l=a[u+1];Ei(4,s,l);try{l.call(s)}finally{Ei(5,s,l)}}else{Ei(4,o,a);try{a.call(o)}finally{Ei(5,o,a)}}}}}function FR(t,e,r){return kR(t,e.parent,r)}function kR(t,e,r){let n=e;for(;n!==null&&n.type&40;)e=n,n=e.parent;if(n===null)return r[Qi];{let{componentOffset:o}=n;if(o>-1){let{encapsulation:a}=t.data[n.directiveStart+o];if(a===Ii.None||a===Ii.Emulated)return null}return li(n,r)}}function df(t,e,r,n,o){t.insertBefore(e,r,n,o)}function ew(t,e,r){t.appendChild(e,r)}function Tv(t,e,r,n,o){n!==null?df(t,e,r,n,o):ew(t,e,r)}function LR(t,e,r,n){t.removeChild(e,r,n)}function zp(t,e){return t.parentNode(e)}function BR(t,e){return t.nextSibling(e)}function $R(t,e,r){return jR(t,e,r)}function VR(t,e,r){return t.type&40?li(t,r):null}var jR=VR,Iv;function Gp(t,e,r,n){let o=FR(t,n,e),a=e[Jr],u=n.parent||e[ui],s=$R(u,n,e);if(o!=null)if(Array.isArray(r))for(let l=0;l<r.length;l++)Tv(a,o,r[l],s,!1);else Tv(a,o,r,s,!1);Iv!==void 0&&Iv(a,n,e,r,o)}function ef(t,e){if(e!==null){let r=e.type;if(r&3)return li(e,t);if(r&4)return qh(-1,t[e.index]);if(r&8){let n=e.child;if(n!==null)return ef(t,n);{let o=t[e.index];return Ji(o)?qh(-1,o):Si(o)}}else{if(r&32)return Hp(e,t)()||Si(t[e.index]);{let n=tw(t,e);if(n!==null){if(Array.isArray(n))return n[0];let o=Ku(t[Xi]);return ef(o,n)}else return ef(t,e.next)}}}return null}function tw(t,e){if(e!==null){let n=t[Xi][ui],o=e.projection;return n.projection[o]}return null}function qh(t,e){let r=_n+t+1;if(r<e.length){let n=e[r],o=n[je].firstChild;if(o!==null)return ef(n,o)}return e[fa]}function UR(t,e,r){let n=zp(t,e);n&&LR(t,n,e,r)}function Wp(t,e,r,n,o,a,u){for(;r!=null;){let s=n[r.index],l=r.type;if(u&&e===0&&(s&&ha(Si(s),n),r.flags|=2),(r.flags&32)!==32)if(l&8)Wp(t,e,r.child,n,o,a,!1),Ja(e,t,o,s,a);else if(l&32){let i=Hp(r,n),c;for(;c=i();)Ja(e,t,o,c,a);Ja(e,t,o,s,a)}else l&16?HR(t,e,n,r,o,a):Ja(e,t,o,s,a);r=u?r.projectionNext:r.next}}function Tf(t,e,r,n,o,a){Wp(r,n,t.firstChild,e,o,a,!1)}function HR(t,e,r,n,o,a){let u=r[Xi],l=u[ui].projection[n.projection];if(Array.isArray(l))for(let i=0;i<l.length;i++){let c=l[i];Ja(e,t,o,c,a)}else{let i=l,c=u[Vr];Hb(n)&&(i.flags|=128),Wp(t,e,i,c,o,a,!0)}}function zR(t,e,r,n,o){let a=r[fa],u=Si(r);a!==u&&Ja(e,t,n,a,o);for(let s=_n;s<r.length;s++){let l=r[s];Tf(l[je],l,t,e,n,a)}}function GR(t,e,r,n,o){if(e)o?t.addClass(r,n):t.removeClass(r,n);else{let a=n.indexOf("-")===-1?void 0:Ki.DashCase;o==null?t.removeStyle(r,n,a):(typeof o=="string"&&o.endsWith("!important")&&(o=o.slice(0,-10),a|=Ki.Important),t.setStyle(r,n,o,a))}}function WR(t,e,r){t.setAttribute(e,"style",r)}function rw(t,e,r){r===""?t.removeAttribute(e,"class"):t.setAttribute(e,"class",r)}function nw(t,e,r){let{mergedAttrs:n,classes:o,styles:a}=r;n!==null&&Mh(t,e,n),o!==null&&rw(t,e,o),a!==null&&WR(t,e,a)}var ys={};function qt(t=1){iw(Di(),dr(),ps()+t,!1)}function iw(t,e,r,n){if(!n)if((e[Te]&3)===3){let a=t.preOrderCheckHooks;a!==null&&Kc(e,a,r)}else{let a=t.preOrderHooks;a!==null&&Qc(e,a,0,r)}da(r)}function to(t,e=Ze.Default){let r=dr();if(r===null)return Et(t,e);let n=eo();return Bb(n,r,ii(t),e)}function ow(t,e,r,n,o,a){let u=lt(null);try{let s=null;o&vo.SignalBased&&(s=e[n][Vy]),s!==null&&s.transformFn!==void 0&&(a=s.transformFn(a)),o&vo.HasDecoratorInputTransform&&(a=t.inputTransforms[n].call(e,a)),t.setInput!==null?t.setInput(e,s,a,r,n):lb(e,s,n,a)}finally{lt(u)}}function qR(t,e){let r=t.hostBindingOpCodes;if(r!==null)try{for(let n=0;n<r.length;n++){let o=r[n];if(o<0)da(~o);else{let a=o,u=r[++n],s=r[++n];U6(u,a);let l=e[a];s(2,l)}}}finally{da(-1)}}function If(t,e,r,n,o,a,u,s,l,i,c){let f=e.blueprint.slice();return f[Qi]=o,f[Te]=n|4|128|8|64,(i!==null||t&&t[Te]&2048)&&(f[Te]|=2048),gb(f),f[Vr]=f[ds]=t,f[si]=r,f[Ai]=u||t&&t[Ai],f[Jr]=s||t&&t[Jr],f[is]=l||t&&t[is]||null,f[ui]=a,f[_f]=mR(),f[sf]=c,f[ab]=i,f[Xi]=e.type==2?t[Xi]:f,f}function Af(t,e,r,n,o){let a=t.data[e];if(a===null)a=XR(t,e,r,n,o),j6()&&(a.flags|=32);else if(a.type&64){a.type=r,a.value=n,a.attrs=o;let u=L6();a.injectorIndex=u===null?-1:u.injectorIndex}return ol(a,!0),a}function XR(t,e,r,n,o){let a=wb(),u=xb(),s=u?a:a&&a.parent,l=t.data[e]=eF(t,s,r,e,n,o);return t.firstChild===null&&(t.firstChild=l),a!==null&&(u?a.child==null&&l.parent!==null&&(a.child=l):a.next===null&&(a.next=l,l.prev=a)),l}function aw(t,e,r,n){if(r===0)return-1;let o=e.length;for(let a=0;a<r;a++)e.push(n),t.blueprint.push(n),t.data.push(null);return o}function sw(t,e,r,n,o){let a=ps(),u=n&2;try{da(-1),u&&e.length>wo&&iw(t,e,wo,!1),Ei(u?2:0,o),r(n,o)}finally{da(a),Ei(u?3:1,o)}}function uw(t,e,r){if(ub(e)){let n=lt(null);try{let o=e.directiveStart,a=e.directiveEnd;for(let u=o;u<a;u++){let s=t.data[u];if(s.contentQueries){let l=r[u];s.contentQueries(1,l,u)}}}finally{lt(n)}}}function lw(t,e,r){yb()&&(sF(t,e,r,li(r,e)),(r.flags&64)===64&&pw(t,e,r))}function cw(t,e,r=li){let n=e.localNames;if(n!==null){let o=e.index+1;for(let a=0;a<n.length;a+=2){let u=n[a+1],s=u===-1?r(e,t):t[u];t[o++]=s}}}function fw(t){let e=t.tView;return e===null||e.incompleteFirstPass?t.tView=qp(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}function qp(t,e,r,n,o,a,u,s,l,i,c){let f=wo+n,d=f+o,h=YR(f,d),p=typeof i=="function"?i():i;return h[je]={type:t,blueprint:h,template:r,queries:null,viewQuery:s,declTNode:e,data:h.slice().fill(null,f),bindingStartIndex:f,expandoStartIndex:d,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:typeof a=="function"?a():a,pipeRegistry:typeof u=="function"?u():u,firstChild:null,schemas:l,consts:p,incompleteFirstPass:!1,ssrId:c}}function YR(t,e){let r=[];for(let n=0;n<e;n++)r.push(n<t?null:ys);return r}function ZR(t,e,r,n){let a=n.get(TR,Yb)||r===Ii.ShadowDom,u=t.selectRootElement(e,a);return KR(u),u}function KR(t){QR(t)}var QR=()=>null;function JR(t,e,r,n){let o=yw(e);o.push(r),t.firstCreatePass&&vw(t).push(n,o.length-1)}function eF(t,e,r,n,o,a){let u=e?e.injectorIndex:-1,s=0;return R6()&&(s|=128),{type:r,index:n,insertBeforeIndex:null,injectorIndex:u,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:s,providerIndexes:0,value:o,attrs:a,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}function Av(t,e,r,n,o){for(let a in e){if(!e.hasOwnProperty(a))continue;let u=e[a];if(u===void 0)continue;n??={};let s,l=vo.None;Array.isArray(u)?(s=u[0],l=u[1]):s=u;let i=a;if(o!==null){if(!o.hasOwnProperty(a))continue;i=o[a]}t===0?Sv(n,r,i,s,l):Sv(n,r,i,s)}return n}function Sv(t,e,r,n,o){let a;t.hasOwnProperty(r)?(a=t[r]).push(e,n):a=t[r]=[e,n],o!==void 0&&a.push(o)}function tF(t,e,r){let n=e.directiveStart,o=e.directiveEnd,a=t.data,u=e.attrs,s=[],l=null,i=null;for(let c=n;c<o;c++){let f=a[c],d=r?r.get(f):null,h=d?d.inputs:null,p=d?d.outputs:null;l=Av(0,f.inputs,c,l,h),i=Av(1,f.outputs,c,i,p);let m=l!==null&&u!==null&&!xp(e)?mF(l,c,u):null;s.push(m)}l!==null&&(l.hasOwnProperty("class")&&(e.flags|=8),l.hasOwnProperty("style")&&(e.flags|=16)),e.initialInputs=s,e.inputs=l,e.outputs=i}function rF(t){return t==="class"?"className":t==="for"?"htmlFor":t==="formaction"?"formAction":t==="innerHtml"?"innerHTML":t==="readonly"?"readOnly":t==="tabindex"?"tabIndex":t}function nF(t,e,r,n,o,a,u,s){let l=li(e,r),i=e.inputs,c;!s&&i!=null&&(c=i[n])?(Xp(t,r,c,n,o),Ap(e)&&iF(r,e.index)):e.type&3?(n=rF(n),o=u!=null?u(o,e.value||"",n):o,a.setProperty(l,n,o)):e.type&12}function iF(t,e){let r=hs(e,t);r[Te]&16||(r[Te]|=64)}function dw(t,e,r,n){if(yb()){let o=n===null?null:{"":-1},a=lF(t,r),u,s;a===null?u=s=null:[u,s]=a,u!==null&&hw(t,e,r,u,o,s),o&&cF(r,n,o)}r.mergedAttrs=wp(r.mergedAttrs,r.attrs)}function hw(t,e,r,n,o,a){for(let i=0;i<n.length;i++)iR(Rb(r,e),t,n[i].type);dF(r,t.data.length,n.length);for(let i=0;i<n.length;i++){let c=n[i];c.providersResolver&&c.providersResolver(c)}let u=!1,s=!1,l=aw(t,e,n.length,null);for(let i=0;i<n.length;i++){let c=n[i];r.mergedAttrs=wp(r.mergedAttrs,c.hostAttrs),hF(t,r,e,l,c),fF(l,c,o),c.contentQueries!==null&&(r.flags|=4),(c.hostBindings!==null||c.hostAttrs!==null||c.hostVars!==0)&&(r.flags|=64);let f=c.type.prototype;!u&&(f.ngOnChanges||f.ngOnInit||f.ngDoCheck)&&((t.preOrderHooks??=[]).push(r.index),u=!0),!s&&(f.ngOnChanges||f.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(r.index),s=!0),l++}tF(t,r,a)}function oF(t,e,r,n,o){let a=o.hostBindings;if(a){let u=t.hostBindingOpCodes;u===null&&(u=t.hostBindingOpCodes=[]);let s=~e.index;aF(u)!=s&&u.push(s),u.push(r,n,a)}}function aF(t){let e=t.length;for(;e>0;){let r=t[--e];if(typeof r=="number"&&r<0)return r}return 0}function sF(t,e,r,n){let o=r.directiveStart,a=r.directiveEnd;Ap(r)&&pF(e,r,t.data[o+r.componentOffset]),t.firstCreatePass||Rb(r,e),ha(n,e);let u=r.initialInputs;for(let s=o;s<a;s++){let l=t.data[s],i=as(e,t,s,r);if(ha(i,e),u!==null&&gF(e,s-o,i,l,r,u),il(l)){let c=hs(r.index,e);c[si]=as(e,t,s,r)}}}function pw(t,e,r){let n=r.directiveStart,o=r.directiveEnd,a=r.index,u=H6();try{da(a);for(let s=n;s<o;s++){let l=t.data[s],i=e[s];$h(s),(l.hostBindings!==null||l.hostVars!==0||l.hostAttrs!==null)&&uF(l,i)}}finally{da(-1),$h(u)}}function uF(t,e){t.hostBindings!==null&&t.hostBindings(1,e)}function lF(t,e){let r=t.directiveRegistry,n=null,o=null;if(r)for(let a=0;a<r.length;a++){let u=r[a];if(YN(e,u.selectors,!1))if(n||(n=[]),il(u))if(u.findHostDirectiveDefs!==null){let s=[];o=o||new Map,u.findHostDirectiveDefs(u,s,o),n.unshift(...s,u);let l=s.length;Xh(t,e,l)}else n.unshift(u),Xh(t,e,0);else o=o||new Map,u.findHostDirectiveDefs?.(u,n,o),n.push(u)}return n===null?null:[n,o]}function Xh(t,e,r){e.componentOffset=r,(t.components??=[]).push(e.index)}function cF(t,e,r){if(e){let n=t.localNames=[];for(let o=0;o<e.length;o+=2){let a=r[e[o+1]];if(a==null)throw new gt(-301,!1);n.push(e[o],a)}}}function fF(t,e,r){if(r){if(e.exportAs)for(let n=0;n<e.exportAs.length;n++)r[e.exportAs[n]]=t;il(e)&&(r[""]=t)}}function dF(t,e,r){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+r,t.providerIndexes=e}function hF(t,e,r,n,o){t.data[n]=o;let a=o.factory||(o.factory=Gu(o.type,!0)),u=new Qu(a,il(o),to);t.blueprint[n]=u,r[n]=u,oF(t,e,n,aw(t,r,o.hostVars,ys),o)}function pF(t,e,r){let n=li(e,t),o=fw(r),a=t[Ai].rendererFactory,u=16;r.signals?u=4096:r.onPush&&(u=64);let s=Sf(t,If(t,o,null,u,n,e,null,a.createRenderer(n,r),null,null,null));t[e.index]=s}function gF(t,e,r,n,o,a){let u=a[e];if(u!==null)for(let s=0;s<u.length;){let l=u[s++],i=u[s++],c=u[s++],f=u[s++];ow(n,r,l,i,c,f)}}function mF(t,e,r){let n=null,o=0;for(;o<r.length;){let a=r[o];if(a===0){o+=4;continue}else if(a===5){o+=2;continue}if(typeof a=="number")break;if(t.hasOwnProperty(a)){n===null&&(n=[]);let u=t[a];for(let s=0;s<u.length;s+=3)if(u[s]===e){n.push(a,u[s+1],u[s+2],r[o+1]);break}}o+=2}return n}function gw(t,e,r,n){return[t,!0,0,e,null,n,null,r,null,null]}function mw(t,e){let r=t.contentQueries;if(r!==null){let n=lt(null);try{for(let o=0;o<r.length;o+=2){let a=r[o],u=r[o+1];if(u!==-1){let s=t.data[u];Pp(a),s.contentQueries(2,e[u],u)}}}finally{lt(n)}}}function Sf(t,e){return t[Yu]?t[mv][ai]=e:t[Yu]=e,t[mv]=e,e}function Yh(t,e,r){Pp(0);let n=lt(null);try{e(t,r)}finally{lt(n)}}function yw(t){return t[Xu]||(t[Xu]=[])}function vw(t){return t.cleanup||(t.cleanup=[])}function bw(t,e){let r=t[is],n=r?r.get(Zi,null):null;n&&n.handleError(e)}function Xp(t,e,r,n,o){for(let a=0;a<r.length;){let u=r[a++],s=r[a++],l=r[a++],i=e[u],c=t.data[u];ow(c,i,n,s,l,o)}}function yF(t,e,r){let n=hb(e,t);SR(t[Jr],n,r)}function vF(t,e){let r=hs(e,t),n=r[je];bF(n,r);let o=r[Qi];o!==null&&r[sf]===null&&(r[sf]=jp(o,r[is])),Yp(n,r,r[si])}function bF(t,e){for(let r=e.length;r<t.blueprint.length;r++)e.push(t.blueprint[r])}function Yp(t,e,r){Mp(e);try{let n=t.viewQuery;n!==null&&Yh(1,n,r);let o=t.template;o!==null&&sw(t,e,o,1,r),t.firstCreatePass&&(t.firstCreatePass=!1),e[Yi]?.finishViewCreation(t),t.staticContentQueries&&mw(t,e),t.staticViewQueries&&Yh(2,t.viewQuery,r);let a=t.components;a!==null&&wF(e,a)}catch(n){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),n}finally{e[Te]&=-5,Np()}}function wF(t,e){for(let r=0;r<e.length;r++)vF(t,e[r])}function xF(t,e,r,n){let o=lt(null);try{let a=e.tView,s=t[Te]&4096?4096:16,l=If(t,a,r,s,null,e,null,null,n?.injector??null,n?.embeddedViewInjector??null,n?.dehydratedView??null),i=t[e.index];l[nl]=i;let c=t[Yi];return c!==null&&(l[Yi]=c.createEmbeddedView(a)),Yp(a,l,r),l}finally{lt(o)}}function Dv(t,e){return!e||e.firstChild===null||Hb(t)}function _F(t,e,r,n=!0){let o=e[je];if(PR(o,e,t,r),n){let u=qh(r,t),s=e[Jr],l=zp(s,t[fa]);l!==null&&CR(o,t[ui],s,e,l,u)}let a=e[sf];a!==null&&a.firstChild!==null&&(a.firstChild=null)}function hf(t,e,r,n,o=!1){for(;r!==null;){let a=e[r.index];a!==null&&n.push(Si(a)),Ji(a)&&EF(a,n);let u=r.type;if(u&8)hf(t,e,r.child,n);else if(u&32){let s=Hp(r,e),l;for(;l=s();)n.push(l)}else if(u&16){let s=tw(e,r);if(Array.isArray(s))n.push(...s);else{let l=Ku(e[Xi]);hf(l[je],l,s,n,!0)}}r=o?r.projectionNext:r.next}return n}function EF(t,e){for(let r=_n;r<t.length;r++){let n=t[r],o=n[je].firstChild;o!==null&&hf(n[je],n,o,e)}t[fa]!==t[Qi]&&e.push(t[fa])}var ww=[];function TF(t){return t[ca]??IF(t)}function IF(t){let e=ww.pop()??Object.create(SF);return e.lView=t,e}function AF(t){t.lView[ca]!==t&&(t.lView=null,ww.push(t))}var SF=j(N({},jy),{consumerIsAlwaysLive:!0,consumerMarkedDirty:t=>{Zu(t.lView)},consumerOnSignalRead(){this.lView[ca]=this}}),xw=100;function _w(t,e=!0,r=0){let n=t[Ai],o=n.rendererFactory,a=!1;a||o.begin?.();try{DF(t,r)}catch(u){throw e&&bw(t,u),u}finally{a||(o.end?.(),n.inlineEffectRunner?.flush())}}function DF(t,e){Zh(t,e);let r=0;for(;Op(t);){if(r===xw)throw new gt(103,!1);r++,Zh(t,1)}}function CF(t,e,r,n){let o=e[Te];if((o&256)===256)return;let a=!1;!a&&e[Ai].inlineEffectRunner?.flush(),Mp(e);let u=null,s=null;!a&&OF(t)&&(s=TF(e),u=Uy(s));try{gb(e),$6(t.bindingStartIndex),r!==null&&sw(t,e,r,2,n);let l=(o&3)===3;if(!a)if(l){let f=t.preOrderCheckHooks;f!==null&&Kc(e,f,null)}else{let f=t.preOrderHooks;f!==null&&Qc(e,f,0,null),wh(e,0)}if(PF(e),Ew(e,0),t.contentQueries!==null&&mw(t,e),!a)if(l){let f=t.contentCheckHooks;f!==null&&Kc(e,f)}else{let f=t.contentHooks;f!==null&&Qc(e,f,1),wh(e,1)}qR(t,e);let i=t.components;i!==null&&Iw(e,i,0);let c=t.viewQuery;if(c!==null&&Yh(2,c,n),!a)if(l){let f=t.viewCheckHooks;f!==null&&Kc(e,f)}else{let f=t.viewHooks;f!==null&&Qc(e,f,2),wh(e,2)}if(t.firstUpdatePass===!0&&(t.firstUpdatePass=!1),e[bh]){for(let f of e[bh])f();e[bh]=null}a||(e[Te]&=-73)}catch(l){throw Zu(e),l}finally{s!==null&&(Hy(s,u),AF(s)),Np()}}function OF(t){return t.type!==2}function Ew(t,e){for(let r=Gb(t);r!==null;r=Wb(r))for(let n=_n;n<r.length;n++){let o=r[n];Tw(o,e)}}function PF(t){for(let e=Gb(t);e!==null;e=Wb(e)){if(!(e[Te]&Ip.HasTransplantedViews))continue;let r=e[os];for(let n=0;n<r.length;n++){let o=r[n],a=o[Vr];D6(o)}}}function MF(t,e,r){let n=hs(e,t);Tw(n,r)}function Tw(t,e){Cp(t)&&Zh(t,e)}function Zh(t,e){let n=t[je],o=t[Te],a=t[ca],u=!!(e===0&&o&16);if(u||=!!(o&64&&e===0),u||=!!(o&1024),u||=!!(a?.dirty&&oh(a)),a&&(a.dirty=!1),t[Te]&=-9217,u)CF(n,t,n.template,t[si]);else if(o&8192){Ew(t,1);let s=n.components;s!==null&&Iw(t,s,1)}}function Iw(t,e,r){for(let n=0;n<e.length;n++)MF(t,e[n],r)}function Zp(t){for(t[Ai].changeDetectionScheduler?.notify();t;){t[Te]|=64;let e=Ku(t);if(v6(t)&&!e)return t;t=e}return null}var Ju=class{get rootNodes(){let e=this._lView,r=e[je];return hf(r,e,r.firstChild,[])}constructor(e,r,n=!0){this._lView=e,this._cdRefInjectingView=r,this.notifyErrorHandler=n,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[si]}set context(e){this._lView[si]=e}get destroyed(){return(this._lView[Te]&256)===256}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){let e=this._lView[Vr];if(Ji(e)){let r=e[uf],n=r?r.indexOf(this):-1;n>-1&&(Wh(e,n),nf(r,n))}this._attachedToViewContainer=!1}Jb(this._lView[je],this._lView)}onDestroy(e){mb(this._lView,e)}markForCheck(){Zp(this._cdRefInjectingView||this._lView)}detach(){this._lView[Te]&=-129}reattach(){Bh(this._lView),this._lView[Te]|=128}detectChanges(){this._lView[Te]|=1024,_w(this._lView,this.notifyErrorHandler)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new gt(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,Kb(this._lView[je],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new gt(902,!1);this._appRef=e,Bh(this._lView)}},ss=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=FF;let t=e;return t})(),NF=ss,RF=class extends NF{constructor(e,r,n){super(),this._declarationLView=e,this._declarationTContainer=r,this.elementRef=n}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(e,r){return this.createEmbeddedViewImpl(e,r)}createEmbeddedViewImpl(e,r,n){let o=xF(this._declarationLView,this._declarationTContainer,e,{embeddedViewInjector:r,dehydratedView:n});return new Ju(o)}};function FF(){return Kp(eo(),dr())}function Kp(t,e){return t.type&4?new RF(e,t,gs(t,e)):null}var Aq=new RegExp(`^(\\d+)*(${_R}|${xR})*(.*)`);var kF=()=>null;function Cv(t,e){return kF(t,e)}var Kh=class{},Qh=class{},pf=class{};function LF(t){let e=Error(`No component factory found for ${xn(t)}.`);return e[BF]=t,e}var BF="ngComponent";var Jh=class{resolveComponentFactory(e){throw LF(e)}},Qp=(()=>{let e=class e{};e.NULL=new Jh;let t=e;return t})(),el=class{};var $F=(()=>{let e=class e{};e.\u0275prov=Zt({token:e,providedIn:"root",factory:()=>null});let t=e;return t})(),Ih={};var Ov=new Set;function Aw(t){Ov.has(t)||(Ov.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}function Pv(...t){}function VF(){let t=typeof Uu.requestAnimationFrame=="function",e=Uu[t?"requestAnimationFrame":"setTimeout"],r=Uu[t?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&e&&r){let n=e[Zone.__symbol__("OriginalDelegate")];n&&(e=n);let o=r[Zone.__symbol__("OriginalDelegate")];o&&(r=o)}return{nativeRequestAnimationFrame:e,nativeCancelAnimationFrame:r}}var Pr=class t{constructor({enableLongStackTrace:e=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new ua(!1),this.onMicrotaskEmpty=new ua(!1),this.onStable=new ua(!1),this.onError=new ua(!1),typeof Zone>"u")throw new gt(908,!1);Zone.assertZonePatched();let o=this;o._nesting=0,o._outer=o._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(o._inner=o._inner.fork(new Zone.TaskTrackingZoneSpec)),e&&Zone.longStackTraceZoneSpec&&(o._inner=o._inner.fork(Zone.longStackTraceZoneSpec)),o.shouldCoalesceEventChangeDetection=!n&&r,o.shouldCoalesceRunChangeDetection=n,o.lastRequestAnimationFrameId=-1,o.nativeRequestAnimationFrame=VF().nativeRequestAnimationFrame,HF(o)}static isInAngularZone(){return typeof Zone<"u"&&Zone.current.get("isAngularZone")===!0}static assertInAngularZone(){if(!t.isInAngularZone())throw new gt(909,!1)}static assertNotInAngularZone(){if(t.isInAngularZone())throw new gt(909,!1)}run(e,r,n){return this._inner.run(e,r,n)}runTask(e,r,n,o){let a=this._inner,u=a.scheduleEventTask("NgZoneEvent: "+o,e,jF,Pv,Pv);try{return a.runTask(u,r,n)}finally{a.cancelTask(u)}}runGuarded(e,r,n){return this._inner.runGuarded(e,r,n)}runOutsideAngular(e){return this._outer.run(e)}},jF={};function Jp(t){if(t._nesting==0&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function UF(t){t.isCheckStableRunning||t.lastRequestAnimationFrameId!==-1||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Uu,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,ep(t),t.isCheckStableRunning=!0,Jp(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),ep(t))}function HF(t){let e=()=>{UF(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(r,n,o,a,u,s)=>{if(zF(s))return r.invokeTask(o,a,u,s);try{return Mv(t),r.invokeTask(o,a,u,s)}finally{(t.shouldCoalesceEventChangeDetection&&a.type==="eventTask"||t.shouldCoalesceRunChangeDetection)&&e(),Nv(t)}},onInvoke:(r,n,o,a,u,s,l)=>{try{return Mv(t),r.invoke(o,a,u,s,l)}finally{t.shouldCoalesceRunChangeDetection&&e(),Nv(t)}},onHasTask:(r,n,o,a)=>{r.hasTask(o,a),n===o&&(a.change=="microTask"?(t._hasPendingMicrotasks=a.microTask,ep(t),Jp(t)):a.change=="macroTask"&&(t.hasPendingMacrotasks=a.macroTask))},onHandleError:(r,n,o,a)=>(r.handleError(o,a),t.runOutsideAngular(()=>t.onError.emit(a)),!1)})}function ep(t){t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&t.lastRequestAnimationFrameId!==-1?t.hasPendingMicrotasks=!0:t.hasPendingMicrotasks=!1}function Mv(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function Nv(t){t._nesting--,Jp(t)}function zF(t){return!Array.isArray(t)||t.length!==1?!1:t[0].data?.__ignore_ng_zone__===!0}var Sw=(()=>{let e=class e{constructor(){this.handler=null,this.internalCallbacks=[]}execute(){this.executeInternalCallbacks(),this.handler?.execute()}executeInternalCallbacks(){let n=[...this.internalCallbacks];this.internalCallbacks.length=0;for(let o of n)o()}ngOnDestroy(){this.handler?.destroy(),this.handler=null,this.internalCallbacks.length=0}};e.\u0275prov=Zt({token:e,providedIn:"root",factory:()=>new e});let t=e;return t})();function tp(t,e,r){let n=r?t.styles:null,o=r?t.classes:null,a=0;if(e!==null)for(let u=0;u<e.length;u++){let s=e[u];if(typeof s=="number")a=s;else if(a==1)o=ov(o,s);else if(a==2){let l=s,i=e[++u];n=ov(n,l+": "+i+";")}}r?t.styles=n:t.stylesWithoutHost=n,r?t.classes=o:t.classesWithoutHost=o}var rp=class extends Qp{constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){let r=ns(e);return new gf(r,this.ngModule)}};function Rv(t){let e=[];for(let r in t){if(!t.hasOwnProperty(r))continue;let n=t[r];n!==void 0&&e.push({propName:Array.isArray(n)?n[0]:n,templateName:r})}return e}function GF(t){let e=t.toLowerCase();return e==="svg"?_6:e==="math"?E6:null}var np=class{constructor(e,r){this.injector=e,this.parentInjector=r}get(e,r,n){n=bf(n);let o=this.injector.get(e,Ih,n);return o!==Ih||r===Ih?o:this.parentInjector.get(e,r,n)}},gf=class extends pf{get inputs(){let e=this.componentDef,r=e.inputTransforms,n=Rv(e.inputs);if(r!==null)for(let o of n)r.hasOwnProperty(o.propName)&&(o.transform=r[o.propName]);return n}get outputs(){return Rv(this.componentDef.outputs)}constructor(e,r){super(),this.componentDef=e,this.ngModule=r,this.componentType=e.type,this.selector=JN(e.selectors),this.ngContentSelectors=e.ngContentSelectors?e.ngContentSelectors:[],this.isBoundToModule=!!r}create(e,r,n,o){let a=lt(null);try{o=o||this.ngModule;let u=o instanceof bo?o:o?.injector;u&&this.componentDef.getStandaloneInjector!==null&&(u=this.componentDef.getStandaloneInjector(u)||u);let s=u?new np(e,u):e,l=s.get(el,null);if(l===null)throw new gt(407,!1);let i=s.get($F,null),c=s.get(Sw,null),f=s.get(Kh,null),d={rendererFactory:l,sanitizer:i,inlineEffectRunner:null,afterRenderEventManager:c,changeDetectionScheduler:f},h=l.createRenderer(null,this.componentDef),p=this.componentDef.selectors[0][0]||"div",m=n?ZR(h,n,this.componentDef.encapsulation,s):Zb(h,p,GF(p)),v=512;this.componentDef.signals?v|=4096:this.componentDef.onPush||(v|=16);let x=null;m!==null&&(x=jp(m,s,!0));let y=qp(0,null,null,1,0,null,null,null,null,null,null),_=If(null,y,null,v,null,null,d,h,s,null,x);Mp(_);let I,C;try{let V=this.componentDef,z,W=null;V.findHostDirectiveDefs?(z=[],W=new Map,V.findHostDirectiveDefs(V,z,W),z.push(V)):z=[V];let k=WF(_,m),X=qF(k,m,V,z,_,d,h);C=pb(y,wo),m&&ZF(h,V,m,n),r!==void 0&&KF(C,this.ngContentSelectors,r),I=YF(X,V,z,W,_,[QF]),Yp(y,_,null)}finally{Np()}return new ip(this.componentType,I,gs(C,_),_,C)}finally{lt(a)}}},ip=class extends Qh{constructor(e,r,n,o,a){super(),this.location=n,this._rootLView=o,this._tNode=a,this.previousInputValues=null,this.instance=r,this.hostView=this.changeDetectorRef=new Ju(o,void 0,!1),this.componentType=e}setInput(e,r){let n=this._tNode.inputs,o;if(n!==null&&(o=n[e])){if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),r))return;let a=this._rootLView;Xp(a[je],a,o,e,r),this.previousInputValues.set(e,r);let u=hs(this._tNode.index,a);Zp(u)}}get injector(){return new la(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}};function WF(t,e){let r=t[je],n=wo;return t[n]=e,Af(r,n,2,"#host",null)}function qF(t,e,r,n,o,a,u){let s=o[je];XF(n,t,e,u);let l=null;e!==null&&(l=jp(e,o[is]));let i=a.rendererFactory.createRenderer(e,r),c=16;r.signals?c=4096:r.onPush&&(c=64);let f=If(o,fw(r),null,c,o[t.index],t,a,i,null,null,l);return s.firstCreatePass&&Xh(s,t,n.length-1),Sf(o,f),o[t.index]=f}function XF(t,e,r,n){for(let o of t)e.mergedAttrs=wp(e.mergedAttrs,o.hostAttrs);e.mergedAttrs!==null&&(tp(e,e.mergedAttrs,!0),r!==null&&nw(n,r,e))}function YF(t,e,r,n,o,a){let u=eo(),s=o[je],l=li(u,o);hw(s,o,u,r,null,n);for(let c=0;c<r.length;c++){let f=u.directiveStart+c,d=as(o,s,f,u);ha(d,o)}pw(s,o,u),l&&ha(l,o);let i=as(o,s,u.directiveStart+u.componentOffset,u);if(t[si]=o[si]=i,a!==null)for(let c of a)c(i,e);return uw(s,u,o),i}function ZF(t,e,r,n){if(n)Mh(t,r,["ng-version","17.3.12"]);else{let{attrs:o,classes:a}=e6(e.selectors[0]);o&&Mh(t,r,o),a&&a.length>0&&rw(t,r,a.join(" "))}}function KF(t,e,r){let n=t.projection=[];for(let o=0;o<e.length;o++){let a=r[o];n.push(a!=null?Array.from(a):null)}}function QF(){let t=eo();kp(dr()[je],t)}var al=(()=>{let e=class e{};e.__NG_ELEMENT_ID__=JF;let t=e;return t})();function JF(){let t=eo();return Cw(t,dr())}var e8=al,Dw=class extends e8{constructor(e,r,n){super(),this._lContainer=e,this._hostTNode=r,this._hostLView=n}get element(){return gs(this._hostTNode,this._hostLView)}get injector(){return new la(this._hostTNode,this._hostLView)}get parentInjector(){let e=Lp(this._hostTNode,this._hostLView);if(Pb(e)){let r=ff(e,this._hostLView),n=cf(e),o=r[je].data[n+8];return new la(o,r)}else return new la(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){let r=Fv(this._lContainer);return r!==null&&r[e]||null}get length(){return this._lContainer.length-_n}createEmbeddedView(e,r,n){let o,a;typeof n=="number"?o=n:n!=null&&(o=n.index,a=n.injector);let u=Cv(this._lContainer,e.ssrId),s=e.createEmbeddedViewImpl(r||{},a,u);return this.insertImpl(s,o,Dv(this._hostTNode,u)),s}createComponent(e,r,n,o,a){let u=e&&!y6(e),s;if(u)s=r;else{let p=r||{};s=p.index,n=p.injector,o=p.projectableNodes,a=p.environmentInjector||p.ngModuleRef}let l=u?e:new gf(ns(e)),i=n||this.parentInjector;if(!a&&l.ngModule==null){let m=(u?i:this.parentInjector).get(bo,null);m&&(a=m)}let c=ns(l.componentType??{}),f=Cv(this._lContainer,c?.id??null),d=f?.firstChild??null,h=l.create(i,o,d,a);return this.insertImpl(h.hostView,s,Dv(this._hostTNode,f)),h}insert(e,r){return this.insertImpl(e,r,!0)}insertImpl(e,r,n){let o=e._lView;if(S6(o)){let s=this.indexOf(e);if(s!==-1)this.detach(s);else{let l=o[Vr],i=new Dw(l,l[ui],l[Vr]);i.detach(i.indexOf(e))}}let a=this._adjustIndex(r),u=this._lContainer;return _F(u,o,a,n),e.attachToViewContainerRef(),qv(Ah(u),a,e),e}move(e,r){return this.insert(e,r)}indexOf(e){let r=Fv(this._lContainer);return r!==null?r.indexOf(e):-1}remove(e){let r=this._adjustIndex(e,-1),n=Wh(this._lContainer,r);n&&(nf(Ah(this._lContainer),r),Jb(n[je],n))}detach(e){let r=this._adjustIndex(e,-1),n=Wh(this._lContainer,r);return n&&nf(Ah(this._lContainer),r)!=null?new Ju(n):null}_adjustIndex(e,r=0){return e??this.length+r}};function Fv(t){return t[uf]}function Ah(t){return t[uf]||(t[uf]=[])}function Cw(t,e){let r,n=e[t.index];return Ji(n)?r=n:(r=gw(n,e,null,t),e[t.index]=r,Sf(e,r)),r8(r,e,t,n),new Dw(r,t,e)}function t8(t,e){let r=t[Jr],n=r.createComment(""),o=li(e,t),a=zp(r,o);return df(r,a,n,BR(r,o),!1),n}var r8=o8,n8=()=>!1;function i8(t,e,r){return n8(t,e,r)}function o8(t,e,r,n){if(t[fa])return;let o;r.type&8?o=Si(n):o=t8(e,r),t[fa]=o}var op=class t{constructor(e){this.queryList=e,this.matches=null}clone(){return new t(this.queryList)}setDirty(){this.queryList.setDirty()}},ap=class t{constructor(e=[]){this.queries=e}createEmbeddedView(e){let r=e.queries;if(r!==null){let n=e.contentQueries!==null?e.contentQueries[0]:r.length,o=[];for(let a=0;a<n;a++){let u=r.getByIndex(a),s=this.queries[u.indexInDeclarationView];o.push(s.clone())}return new t(o)}return null}insertView(e){this.dirtyQueriesWithMatches(e)}detachView(e){this.dirtyQueriesWithMatches(e)}finishViewCreation(e){this.dirtyQueriesWithMatches(e)}dirtyQueriesWithMatches(e){for(let r=0;r<this.queries.length;r++)eg(e,r).matches!==null&&this.queries[r].setDirty()}},sp=class{constructor(e,r,n=null){this.flags=r,this.read=n,typeof e=="string"?this.predicate=h8(e):this.predicate=e}},up=class t{constructor(e=[]){this.queries=e}elementStart(e,r){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(e,r)}elementEnd(e){for(let r=0;r<this.queries.length;r++)this.queries[r].elementEnd(e)}embeddedTView(e){let r=null;for(let n=0;n<this.length;n++){let o=r!==null?r.length:0,a=this.getByIndex(n).embeddedTView(e,o);a&&(a.indexInDeclarationView=n,r!==null?r.push(a):r=[a])}return r!==null?new t(r):null}template(e,r){for(let n=0;n<this.queries.length;n++)this.queries[n].template(e,r)}getByIndex(e){return this.queries[e]}get length(){return this.queries.length}track(e){this.queries.push(e)}},lp=class t{constructor(e,r=-1){this.metadata=e,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=r}elementStart(e,r){this.isApplyingToNode(r)&&this.matchTNode(e,r)}elementEnd(e){this._declarationNodeIndex===e.index&&(this._appliesToNextNode=!1)}template(e,r){this.elementStart(e,r)}embeddedTView(e,r){return this.isApplyingToNode(e)?(this.crossesNgTemplate=!0,this.addMatch(-e.index,r),new t(this.metadata)):null}isApplyingToNode(e){if(this._appliesToNextNode&&(this.metadata.flags&1)!==1){let r=this._declarationNodeIndex,n=e.parent;for(;n!==null&&n.type&8&&n.index!==r;)n=n.parent;return r===(n!==null?n.index:-1)}return this._appliesToNextNode}matchTNode(e,r){let n=this.metadata.predicate;if(Array.isArray(n))for(let o=0;o<n.length;o++){let a=n[o];this.matchTNodeWithReadOption(e,r,a8(r,a)),this.matchTNodeWithReadOption(e,r,Jc(r,e,a,!1,!1))}else n===ss?r.type&4&&this.matchTNodeWithReadOption(e,r,-1):this.matchTNodeWithReadOption(e,r,Jc(r,e,n,!1,!1))}matchTNodeWithReadOption(e,r,n){if(n!==null){let o=this.metadata.read;if(o!==null)if(o===ga||o===al||o===ss&&r.type&4)this.addMatch(r.index,-2);else{let a=Jc(r,e,o,!1,!1);a!==null&&this.addMatch(r.index,a)}else this.addMatch(r.index,n)}}addMatch(e,r){this.matches===null?this.matches=[e,r]:this.matches.push(e,r)}};function a8(t,e){let r=t.localNames;if(r!==null){for(let n=0;n<r.length;n+=2)if(r[n]===e)return r[n+1]}return null}function s8(t,e){return t.type&11?gs(t,e):t.type&4?Kp(t,e):null}function u8(t,e,r,n){return r===-1?s8(e,t):r===-2?l8(t,e,n):as(t,t[je],r,e)}function l8(t,e,r){if(r===ga)return gs(e,t);if(r===ss)return Kp(e,t);if(r===al)return Cw(e,t)}function Ow(t,e,r,n){let o=e[Yi].queries[n];if(o.matches===null){let a=t.data,u=r.matches,s=[];for(let l=0;u!==null&&l<u.length;l+=2){let i=u[l];if(i<0)s.push(null);else{let c=a[i];s.push(u8(e,c,u[l+1],r.metadata.read))}}o.matches=s}return o.matches}function cp(t,e,r,n){let o=t.queries.getByIndex(r),a=o.matches;if(a!==null){let u=Ow(t,e,o,r);for(let s=0;s<a.length;s+=2){let l=a[s];if(l>0)n.push(u[s/2]);else{let i=a[s+1],c=e[-l];for(let f=_n;f<c.length;f++){let d=c[f];d[nl]===d[Vr]&&cp(d[je],d,i,n)}if(c[os]!==null){let f=c[os];for(let d=0;d<f.length;d++){let h=f[d];cp(h[je],h,i,n)}}}}}return n}function c8(t,e){return t[Yi].queries[e].queryList}function f8(t,e,r){let n=new Hh((r&4)===4);return JR(t,e,n,n.destroy),(e[Yi]??=new ap).queries.push(new op(n))-1}function d8(t,e,r){let n=Di();return n.firstCreatePass&&(p8(n,new sp(t,e,r),-1),(e&2)===2&&(n.staticViewQueries=!0)),f8(n,dr(),e)}function h8(t){return t.split(",").map(e=>e.trim())}function p8(t,e,r){t.queries===null&&(t.queries=new up),t.queries.track(new lp(e,r))}function eg(t,e){return t.queries.getByIndex(e)}function g8(t,e){let r=t[je],n=eg(r,e);return n.crossesNgTemplate?cp(r,t,e,[]):Ow(r,t,n,e)}var us=class{};var mf=class extends us{constructor(e){super(),this.componentFactoryResolver=new rp(this),this.instance=null;let r=new af([...e.providers,{provide:us,useValue:this},{provide:Qp,useValue:this.componentFactoryResolver}],e.parent||Tp(),e.debugName,new Set(["environment"]));this.injector=r,e.runEnvironmentInitializers&&r.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}};function m8(t,e,r=null){return new mf({providers:t,parent:e,debugName:r,runEnvironmentInitializers:!0}).injector}var Pw=(()=>{let e=class e{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new ju(!1)}get _hasPendingTasks(){return this.hasPendingTasks.value}add(){this._hasPendingTasks||this.hasPendingTasks.next(!0);let n=this.taskId++;return this.pendingTasks.add(n),n}remove(n){this.pendingTasks.delete(n),this.pendingTasks.size===0&&this._hasPendingTasks&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this._hasPendingTasks&&this.hasPendingTasks.next(!1)}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function tg(t,e,r){let n=t[e];return Object.is(n,r)?!1:(t[e]=r,!0)}function y8(t){return(t.flags&32)===32}function v8(t,e,r,n,o,a,u,s,l){let i=e.consts,c=Af(e,t,4,u||null,lf(i,s));dw(e,r,c,lf(i,l)),kp(e,c);let f=c.tView=qp(2,c,n,o,a,e.directiveRegistry,e.pipeRegistry,null,e.schemas,i,null);return e.queries!==null&&(e.queries.template(e,c),f.queries=e.queries.embeddedTView(c)),c}function ma(t,e,r,n,o,a,u,s){let l=dr(),i=Di(),c=t+wo,f=i.firstCreatePass?v8(c,i,l,e,r,n,o,a,u):i.data[c];ol(f,!1);let d=b8(i,l,f,t);Rp()&&Gp(i,l,d,f),ha(d,l);let h=gw(d,l,d,f);return l[c]=h,Sf(l,h),i8(h,f,l),Sp(f)&&lw(i,l,f),u!=null&&cw(l,f,s),ma}var b8=w8;function w8(t,e,r,n){return Fp(!0),e[Jr].createComment("")}function x8(t,e,r,n){return tg(t,_b(),r)?e+zv(r)+n:ys}function Yc(t,e){return t<<17|e<<2}function pa(t){return t>>17&32767}function _8(t){return(t&2)==2}function E8(t,e){return t&131071|e<<17}function fp(t){return t|2}function ls(t){return(t&131068)>>2}function Sh(t,e){return t&-131069|e<<2}function T8(t){return(t&1)===1}function dp(t){return t|1}function I8(t,e,r,n,o,a){let u=a?e.classBindings:e.styleBindings,s=pa(u),l=ls(u);t[n]=r;let i=!1,c;if(Array.isArray(r)){let f=r;c=f[1],(c===null||rl(f,c)>0)&&(i=!0)}else c=r;if(o)if(l!==0){let d=pa(t[s+1]);t[n+1]=Yc(d,s),d!==0&&(t[d+1]=Sh(t[d+1],n)),t[s+1]=E8(t[s+1],n)}else t[n+1]=Yc(s,0),s!==0&&(t[s+1]=Sh(t[s+1],n)),s=n;else t[n+1]=Yc(l,0),s===0?s=n:t[l+1]=Sh(t[l+1],n),l=n;i&&(t[n+1]=fp(t[n+1])),kv(t,c,n,!0),kv(t,c,n,!1),A8(e,c,t,n,a),u=Yc(s,l),a?e.classBindings=u:e.styleBindings=u}function A8(t,e,r,n,o){let a=o?t.residualClasses:t.residualStyles;a!=null&&typeof e=="string"&&rl(a,e)>=0&&(r[n+1]=dp(r[n+1]))}function kv(t,e,r,n){let o=t[r+1],a=e===null,u=n?pa(o):ls(o),s=!1;for(;u!==0&&(s===!1||a);){let l=t[u],i=t[u+1];S8(l,e)&&(s=!0,t[u+1]=n?dp(i):fp(i)),u=n?pa(i):ls(i)}s&&(t[r+1]=n?fp(o):dp(o))}function S8(t,e){return t===null||e==null||(Array.isArray(t)?t[1]:t)===e?!0:Array.isArray(t)&&typeof e=="string"?rl(t,e)>=0:!1}function ci(t,e,r){let n=dr(),o=_b();if(tg(n,o,e)){let a=Di(),u=q6();nF(a,u,n,t,e,n[Jr],r,!1)}return ci}function Lv(t,e,r,n,o){let a=e.inputs,u=o?"class":"style";Xp(t,r,a[u],u,n)}function xo(t,e){return D8(t,e,null,!0),xo}function D8(t,e,r,n){let o=dr(),a=Di(),u=V6(2);if(a.firstUpdatePass&&O8(a,t,u,n),e!==ys&&tg(o,u,e)){let s=a.data[ps()];F8(a,s,o,o[Jr],t,o[u+1]=k8(e,r),n,u)}}function C8(t,e){return e>=t.expandoStartIndex}function O8(t,e,r,n){let o=t.data;if(o[r+1]===null){let a=o[ps()],u=C8(t,r);L8(a,n)&&e===null&&!u&&(e=!1),e=P8(o,a,e,n),I8(o,a,e,r,u,n)}}function P8(t,e,r,n){let o=z6(t),a=n?e.residualClasses:e.residualStyles;if(o===null)(n?e.classBindings:e.styleBindings)===0&&(r=Dh(null,t,e,r,n),r=tl(r,e.attrs,n),a=null);else{let u=e.directiveStylingLast;if(u===-1||t[u]!==o)if(r=Dh(o,t,e,r,n),a===null){let l=M8(t,e,n);l!==void 0&&Array.isArray(l)&&(l=Dh(null,t,e,l[1],n),l=tl(l,e.attrs,n),N8(t,e,n,l))}else a=R8(t,e,n)}return a!==void 0&&(n?e.residualClasses=a:e.residualStyles=a),r}function M8(t,e,r){let n=r?e.classBindings:e.styleBindings;if(ls(n)!==0)return t[pa(n)]}function N8(t,e,r,n){let o=r?e.classBindings:e.styleBindings;t[pa(o)]=n}function R8(t,e,r){let n,o=e.directiveEnd;for(let a=1+e.directiveStylingLast;a<o;a++){let u=t[a].hostAttrs;n=tl(n,u,r)}return tl(n,e.attrs,r)}function Dh(t,e,r,n,o){let a=null,u=r.directiveEnd,s=r.directiveStylingLast;for(s===-1?s=r.directiveStart:s++;s<u&&(a=e[s],n=tl(n,a.hostAttrs,o),a!==t);)s++;return t!==null&&(r.directiveStylingLast=s),n}function tl(t,e,r){let n=r?1:2,o=-1;if(e!==null)for(let a=0;a<e.length;a++){let u=e[a];typeof u=="number"?o=u:o===n&&(Array.isArray(t)||(t=t===void 0?[]:["",t]),VN(t,u,r?!0:e[++a]))}return t===void 0?null:t}function F8(t,e,r,n,o,a,u,s){if(!(e.type&3))return;let l=t.data,i=l[s+1],c=T8(i)?Bv(l,e,r,o,ls(i),u):void 0;if(!yf(c)){yf(a)||_8(i)&&(a=Bv(l,null,r,o,s,u));let f=hb(ps(),r);GR(n,u,f,o,a)}}function Bv(t,e,r,n,o,a){let u=e===null,s;for(;o>0;){let l=t[o],i=Array.isArray(l),c=i?l[1]:l,f=c===null,d=r[o+1];d===ys&&(d=f?oi:void 0);let h=f?yh(d,n):c===n?d:void 0;if(i&&!yf(h)&&(h=yh(l,n)),yf(h)&&(s=h,u))return s;let p=t[o+1];o=u?pa(p):ls(p)}if(e!==null){let l=a?e.residualClasses:e.residualStyles;l!=null&&(s=yh(l,n))}return s}function yf(t){return t!==void 0}function k8(t,e){return t==null||t===""||(typeof e=="string"?t=t+e:typeof t=="object"&&(t=xn(Up(t)))),t}function L8(t,e){return(t.flags&(e?8:16))!==0}function B8(t,e,r,n,o,a){let u=e.consts,s=lf(u,o),l=Af(e,t,2,n,s);return dw(e,r,l,lf(u,a)),l.attrs!==null&&tp(l,l.attrs,!1),l.mergedAttrs!==null&&tp(l,l.mergedAttrs,!0),e.queries!==null&&e.queries.elementStart(e,l),l}function kt(t,e,r,n){let o=dr(),a=Di(),u=wo+t,s=o[Jr],l=a.firstCreatePass?B8(u,a,o,e,r,n):a.data[u],i=$8(a,o,l,s,e,t);o[u]=i;let c=Sp(l);return ol(l,!0),nw(s,i,l),!y8(l)&&Rp()&&Gp(a,o,i,l),P6()===0&&ha(i,o),M6(),c&&(lw(a,o,l),uw(a,l,o)),n!==null&&cw(o,l),kt}function Ot(){let t=eo();xb()?B6():(t=t.parent,ol(t,!1));let e=t;F6(e)&&k6(),N6();let r=Di();return r.firstCreatePass&&(kp(r,t),ub(t)&&r.queries.elementEnd(t)),e.classesWithoutHost!=null&&Q6(e)&&Lv(r,e,dr(),e.classesWithoutHost,!0),e.stylesWithoutHost!=null&&J6(e)&&Lv(r,e,dr(),e.stylesWithoutHost,!1),Ot}function ya(t,e,r,n){return kt(t,e,r,n),Ot(),ya}var $8=(t,e,r,n,o,a)=>(Fp(!0),Zb(n,o,X6()));function Mw(){return dr()}var vf="en-US";var V8=vf;function j8(t){typeof t=="string"&&(V8=t.toLowerCase().replace(/_/g,"-"))}function Df(t,e,r,n){let o=dr(),a=Di(),u=eo();return H8(a,o,o[Jr],u,t,e,n),Df}function U8(t,e,r,n){let o=t.cleanup;if(o!=null)for(let a=0;a<o.length-1;a+=2){let u=o[a];if(u===r&&o[a+1]===n){let s=e[Xu],l=o[a+2];return s.length>l?s[l]:null}typeof u=="string"&&(a+=2)}return null}function H8(t,e,r,n,o,a,u){let s=Sp(n),i=t.firstCreatePass&&vw(t),c=e[si],f=yw(e),d=!0;if(n.type&3||u){let m=li(n,e),v=u?u(m):m,x=f.length,y=u?I=>u(Si(I[n.index])):n.index,_=null;if(!u&&s&&(_=U8(t,e,o,n.index)),_!==null){let I=_.__ngLastListenerFn__||_;I.__ngNextListenerFn__=a,_.__ngLastListenerFn__=a,d=!1}else{a=Vv(n,e,c,a,!1);let I=r.listen(v,o,a);f.push(a,I),i&&i.push(o,y,x,x+1)}}else a=Vv(n,e,c,a,!1);let h=n.outputs,p;if(d&&h!==null&&(p=h[o])){let m=p.length;if(m)for(let v=0;v<m;v+=2){let x=p[v],y=p[v+1],C=e[x][y].subscribe(a),V=f.length;f.push(a,C),i&&i.push(o,n.index,V,-(V+1))}}}function $v(t,e,r,n){let o=lt(null);try{return Ei(6,e,r),r(n)!==!1}catch(a){return bw(t,a),!1}finally{Ei(7,e,r),lt(o)}}function Vv(t,e,r,n,o){return function a(u){if(u===Function)return n;let s=t.componentOffset>-1?hs(t.index,e):e;Zp(s);let l=$v(e,r,n,u),i=a.__ngNextListenerFn__;for(;i;)l=$v(e,r,i,u)&&l,i=i.__ngNextListenerFn__;return o&&l===!1&&u.preventDefault(),l}}function va(t=1){return W6(t)}function rg(t,e,r){d8(t,e,r)}function ng(t){let e=dr(),r=Di(),n=Eb();Pp(n+1);let o=eg(r,n);if(t.dirty&&A6(e)===((o.metadata.flags&2)===2)){if(o.matches===null)t.reset([]);else{let a=g8(e,n);t.reset(a,hR),t.notifyOnChanges()}return!0}return!1}function ig(){return c8(dr(),Eb())}function Ar(t,e=""){let r=dr(),n=Di(),o=t+wo,a=n.firstCreatePass?Af(n,o,1,e,null):n.data[o],u=z8(n,r,a,e,t);r[o]=u,Rp()&&Gp(n,r,u,a),ol(a,!1)}var z8=(t,e,r,n,o)=>(Fp(!0),AR(e[Jr],n));function _o(t){return Eo("",t,""),_o}function Eo(t,e,r){let n=dr(),o=x8(n,t,e,r);return o!==ys&&yF(n,ps(),o),Eo}var G8=(()=>{let e=class e{constructor(n){this._injector=n,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){let o=nb(!1,n.type),a=o.length>0?m8([o],this._injector,`Standalone[${n.type.name}]`):null;this.cachedInjectors.set(n,a)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(let n of this.cachedInjectors.values())n!==null&&n.destroy()}finally{this.cachedInjectors.clear()}}};e.\u0275prov=Zt({token:e,providedIn:"environment",factory:()=>new e(Et(bo))});let t=e;return t})();function Cf(t){Aw("NgStandalone"),t.getStandaloneInjector=e=>e.get(G8).getOrCreateStandaloneInjector(t)}var Nw=new Ft("");function Of(t){return!!t&&typeof t.then=="function"}function Rw(t){return!!t&&typeof t.subscribe=="function"}var W8=new Ft(""),Fw=(()=>{let e=class e{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((n,o)=>{this.resolve=n,this.reject=o}),this.appInits=Ir(W8,{optional:!0})??[]}runInitializers(){if(this.initialized)return;let n=[];for(let a of this.appInits){let u=a();if(Of(u))n.push(u);else if(Rw(u)){let s=new Promise((l,i)=>{u.subscribe({complete:l,error:i})});n.push(s)}}let o=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{o()}).catch(a=>{this.reject(a)}),n.length===0&&o(),this.initialized=!0}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})(),q8=new Ft("");function X8(){Gy(()=>{throw new gt(600,!1)})}function Y8(t){return t.isBoundToModule}function Z8(t,e,r){try{let n=r();return Of(n)?n.catch(o=>{throw e.runOutsideAngular(()=>t.handleError(o)),o}):n}catch(n){throw e.runOutsideAngular(()=>t.handleError(n)),n}}var og=(()=>{let e=class e{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=Ir(jb),this.afterRenderEffectManager=Ir(Sw),this.externalTestViews=new Set,this.beforeRender=new mo,this.afterTick=new mo,this.componentTypes=[],this.components=[],this.isStable=Ir(Pw).hasPendingTasks.pipe(mh(n=>!n)),this._injector=Ir(bo)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(n,o){let a=n instanceof pf;if(!this._injector.get(Fw).done){let h=!a&&n6(n),p=!1;throw new gt(405,p)}let s;a?s=n:s=this._injector.get(Qp).resolveComponentFactory(n),this.componentTypes.push(s.componentType);let l=Y8(s)?void 0:this._injector.get(us),i=o||s.selector,c=s.create(Ef.NULL,[],i,l),f=c.location.nativeElement,d=c.injector.get(Nw,null);return d?.registerApplication(f),c.onDestroy(()=>{this.detachView(c.hostView),Ch(this.components,c),d?.unregisterApplication(f)}),this._loadComponent(c),c}tick(){this._tick(!0)}_tick(n){if(this._runningTick)throw new gt(101,!1);let o=lt(null);try{this._runningTick=!0,this.detectChangesInAttachedViews(n)}catch(a){this.internalErrorHandler(a)}finally{this.afterTick.next(),this._runningTick=!1,lt(o)}}detectChangesInAttachedViews(n){let o=0,a=this.afterRenderEffectManager;for(;;){if(o===xw)throw new gt(103,!1);if(n){let u=o===0;this.beforeRender.next(u);for(let{_lView:s,notifyErrorHandler:l}of this._views)K8(s,u,l)}if(o++,a.executeInternalCallbacks(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>hp(u))&&(a.execute(),![...this.externalTestViews.keys(),...this._views].some(({_lView:u})=>hp(u))))break}}attachView(n){let o=n;this._views.push(o),o.attachToAppRef(this)}detachView(n){let o=n;Ch(this._views,o),o.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView),this.tick(),this.components.push(n);let o=this._injector.get(q8,[]);[...this._bootstrapListeners,...o].forEach(a=>a(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Ch(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new gt(406,!1);let n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function Ch(t,e){let r=t.indexOf(e);r>-1&&t.splice(r,1)}function K8(t,e,r){!e&&!hp(t)||Q8(t,r,e)}function hp(t){return Op(t)}function Q8(t,e,r){let n;r?(n=0,t[Te]|=1024):t[Te]&64?n=0:n=1,_w(t,e,n)}var J8=(()=>{let e=class e{constructor(){this.zone=Ir(Pr),this.applicationRef=Ir(og)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ek(t){return[{provide:Pr,useFactory:t},{provide:qu,multi:!0,useFactory:()=>{let e=Ir(J8,{optional:!0});return()=>e.initialize()}},{provide:qu,multi:!0,useFactory:()=>{let e=Ir(ik);return()=>{e.initialize()}}},{provide:jb,useFactory:tk}]}function tk(){let t=Ir(Pr),e=Ir(Zi);return r=>t.runOutsideAngular(()=>e.handleError(r))}function rk(t){let e=ek(()=>new Pr(nk(t)));return rb([[],e])}function nk(t){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:t?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:t?.runCoalescing??!1}}var ik=(()=>{let e=class e{constructor(){this.subscription=new ln,this.initialized=!1,this.zone=Ir(Pr),this.pendingTasks=Ir(Pw)}initialize(){if(this.initialized)return;this.initialized=!0;let n=null;!this.zone.isStable&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(n=this.pendingTasks.add()),this.zone.runOutsideAngular(()=>{this.subscription.add(this.zone.onStable.subscribe(()=>{Pr.assertNotInAngularZone(),queueMicrotask(()=>{n!==null&&!this.zone.hasPendingMacrotasks&&!this.zone.hasPendingMicrotasks&&(this.pendingTasks.remove(n),n=null)})}))}),this.subscription.add(this.zone.onUnstable.subscribe(()=>{Pr.assertInAngularZone(),n??=this.pendingTasks.add()}))}ngOnDestroy(){this.subscription.unsubscribe()}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();function ok(){return typeof $localize<"u"&&$localize.locale||vf}var ag=new Ft("",{providedIn:"root",factory:()=>Ir(ag,Ze.Optional|Ze.SkipSelf)||ok()});var kw=new Ft("");var tf=null;function ak(t=[],e){return Ef.create({name:e,providers:[{provide:xf,useValue:"platform"},{provide:kw,useValue:new Set([()=>tf=null])},...t]})}function sk(t=[]){if(tf)return tf;let e=ak(t);return tf=e,X8(),uk(e),e}function uk(t){t.get($p,null)?.forEach(r=>r())}function Lw(t){try{let{rootComponent:e,appProviders:r,platformProviders:n}=t,o=sk(n),a=[rk(),...r||[]],s=new mf({providers:a,parent:o,debugName:"",runEnvironmentInitializers:!1}).injector,l=s.get(Pr);return l.run(()=>{s.resolveInjectorInitializers();let i=s.get(Zi,null),c;l.runOutsideAngular(()=>{c=l.onError.subscribe({next:h=>{i.handleError(h)}})});let f=()=>s.destroy(),d=o.get(kw);return d.add(f),s.onDestroy(()=>{c.unsubscribe(),d.delete(f)}),Z8(i,l,()=>{let h=s.get(Fw);return h.runInitializers(),h.donePromise.then(()=>{let p=s.get(ag,vf);j8(p||vf);let m=s.get(og);return e!==void 0&&m.bootstrap(e),m})})})}catch(e){return Promise.reject(e)}}var Uw=null;function ug(){return Uw}function Hw(t){Uw??=t}var Pf=class{};var Ci=new Ft("");function zw(t,e){e=encodeURIComponent(e);for(let r of t.split(";")){let n=r.indexOf("="),[o,a]=n==-1?[r,""]:[r.slice(0,n),r.slice(n+1)];if(o.trim()===e)return decodeURIComponent(a)}return null}var Gw=(()=>{let e=class e{constructor(n,o){this._viewContainer=n,this._context=new sg,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=o}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){Bw("ngIfThen",n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){Bw("ngIfElse",n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(n,o){return!0}};e.\u0275fac=function(o){return new(o||e)(to(al),to(ss))},e.\u0275dir=_p({type:e,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0});let t=e;return t})(),sg=class{constructor(){this.$implicit=null,this.ngIf=null}};function Bw(t,e){if(!!!(!e||e.createEmbeddedView))throw new Error(`${t} must be a TemplateRef, but received '${xn(e)}'.`)}var sl=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=fs({type:e}),e.\u0275inj=cs({});let t=e;return t})(),Ww="browser",ck="server";function lg(t){return t===ck}var Mf=class{};var dg=class extends Pf{constructor(){super(...arguments),this.supportsDOMEvents=!0}},hg=class t extends dg{static makeCurrent(){Hw(new t)}onAndCancel(e,r,n){return e.addEventListener(r,n),()=>{e.removeEventListener(r,n)}}dispatchEvent(e,r){e.dispatchEvent(r)}remove(e){e.parentNode&&e.parentNode.removeChild(e)}createElement(e,r){return r=r||this.getDefaultDocument(),r.createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,r){return r==="window"?window:r==="document"?e:r==="body"?e.body:null}getBaseHref(e){let r=hk();return r==null?null:pk(r)}resetBaseElement(){ul=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return zw(document.cookie,e)}},ul=null;function hk(){return ul=ul||document.querySelector("base"),ul?ul.getAttribute("href"):null}function pk(t){return new URL(t,document.baseURI).pathname}var gk=(()=>{let e=class e{build(){return new XMLHttpRequest}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})(),pg=new Ft(""),Zw=(()=>{let e=class e{constructor(n,o){this._zone=o,this._eventNameToPlugin=new Map,n.forEach(a=>{a.manager=this}),this._plugins=n.slice().reverse()}addEventListener(n,o,a){return this._findPluginFor(o).addEventListener(n,o,a)}getZone(){return this._zone}_findPluginFor(n){let o=this._eventNameToPlugin.get(n);if(o)return o;if(o=this._plugins.find(u=>u.supports(n)),!o)throw new gt(5101,!1);return this._eventNameToPlugin.set(n,o),o}};e.\u0275fac=function(o){return new(o||e)(Et(pg),Et(Pr))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})(),Nf=class{constructor(e){this._doc=e}},cg="ng-app-id",Kw=(()=>{let e=class e{constructor(n,o,a,u={}){this.doc=n,this.appId=o,this.nonce=a,this.platformId=u,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=lg(u),this.resetHostNodes()}addStyles(n){for(let o of n)this.changeUsageCount(o,1)===1&&this.onStyleAdded(o)}removeStyles(n){for(let o of n)this.changeUsageCount(o,-1)<=0&&this.onStyleRemoved(o)}ngOnDestroy(){let n=this.styleNodesInDOM;n&&(n.forEach(o=>o.remove()),n.clear());for(let o of this.getAllStyles())this.onStyleRemoved(o);this.resetHostNodes()}addHost(n){this.hostNodes.add(n);for(let o of this.getAllStyles())this.addStyleToHost(n,o)}removeHost(n){this.hostNodes.delete(n)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(n){for(let o of this.hostNodes)this.addStyleToHost(o,n)}onStyleRemoved(n){let o=this.styleRef;o.get(n)?.elements?.forEach(a=>a.remove()),o.delete(n)}collectServerRenderedStyles(){let n=this.doc.head?.querySelectorAll(`style[${cg}="${this.appId}"]`);if(n?.length){let o=new Map;return n.forEach(a=>{a.textContent!=null&&o.set(a.textContent,a)}),o}return null}changeUsageCount(n,o){let a=this.styleRef;if(a.has(n)){let u=a.get(n);return u.usage+=o,u.usage}return a.set(n,{usage:o,elements:[]}),o}getStyleElement(n,o){let a=this.styleNodesInDOM,u=a?.get(o);if(u?.parentNode===n)return a.delete(o),u.removeAttribute(cg),u;{let s=this.doc.createElement("style");return this.nonce&&s.setAttribute("nonce",this.nonce),s.textContent=o,this.platformIsServer&&s.setAttribute(cg,this.appId),n.appendChild(s),s}}addStyleToHost(n,o){let a=this.getStyleElement(n,o),u=this.styleRef,s=u.get(o)?.elements;s?s.push(a):u.set(o,{elements:[a],usage:1})}resetHostNodes(){let n=this.hostNodes;n.clear(),n.add(this.doc.head)}};e.\u0275fac=function(o){return new(o||e)(Et(Ci),Et(Bp),Et(Vp,8),Et(ms))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})(),fg={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},mg=/%COMP%/g,Qw="%COMP%",mk=`_nghost-${Qw}`,yk=`_ngcontent-${Qw}`,vk=!0,bk=new Ft("",{providedIn:"root",factory:()=>vk});function wk(t){return yk.replace(mg,t)}function xk(t){return mk.replace(mg,t)}function Jw(t,e){return e.map(r=>r.replace(mg,t))}var qw=(()=>{let e=class e{constructor(n,o,a,u,s,l,i,c=null){this.eventManager=n,this.sharedStylesHost=o,this.appId=a,this.removeStylesOnCompDestroy=u,this.doc=s,this.platformId=l,this.ngZone=i,this.nonce=c,this.rendererByCompId=new Map,this.platformIsServer=lg(l),this.defaultRenderer=new ll(n,s,i,this.platformIsServer)}createRenderer(n,o){if(!n||!o)return this.defaultRenderer;this.platformIsServer&&o.encapsulation===Ii.ShadowDom&&(o=j(N({},o),{encapsulation:Ii.Emulated}));let a=this.getOrCreateRenderer(n,o);return a instanceof Rf?a.applyToHost(n):a instanceof cl&&a.applyStyles(),a}getOrCreateRenderer(n,o){let a=this.rendererByCompId,u=a.get(o.id);if(!u){let s=this.doc,l=this.ngZone,i=this.eventManager,c=this.sharedStylesHost,f=this.removeStylesOnCompDestroy,d=this.platformIsServer;switch(o.encapsulation){case Ii.Emulated:u=new Rf(i,c,o,this.appId,f,s,l,d);break;case Ii.ShadowDom:return new gg(i,c,n,o,s,l,this.nonce,d);default:u=new cl(i,c,o,f,s,l,d);break}a.set(o.id,u)}return u}ngOnDestroy(){this.rendererByCompId.clear()}};e.\u0275fac=function(o){return new(o||e)(Et(Zw),Et(Kw),Et(Bp),Et(bk),Et(Ci),Et(ms),Et(Pr),Et(Vp))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})(),ll=class{constructor(e,r,n,o){this.eventManager=e,this.doc=r,this.ngZone=n,this.platformIsServer=o,this.data=Object.create(null),this.throwOnSyntheticProps=!0,this.destroyNode=null}destroy(){}createElement(e,r){return r?this.doc.createElementNS(fg[r]||r,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,r){(Xw(e)?e.content:e).appendChild(r)}insertBefore(e,r,n){e&&(Xw(e)?e.content:e).insertBefore(r,n)}removeChild(e,r){e&&e.removeChild(r)}selectRootElement(e,r){let n=typeof e=="string"?this.doc.querySelector(e):e;if(!n)throw new gt(-5104,!1);return r||(n.textContent=""),n}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,r,n,o){if(o){r=o+":"+r;let a=fg[o];a?e.setAttributeNS(a,r,n):e.setAttribute(r,n)}else e.setAttribute(r,n)}removeAttribute(e,r,n){if(n){let o=fg[n];o?e.removeAttributeNS(o,r):e.removeAttribute(`${n}:${r}`)}else e.removeAttribute(r)}addClass(e,r){e.classList.add(r)}removeClass(e,r){e.classList.remove(r)}setStyle(e,r,n,o){o&(Ki.DashCase|Ki.Important)?e.style.setProperty(r,n,o&Ki.Important?"important":""):e.style[r]=n}removeStyle(e,r,n){n&Ki.DashCase?e.style.removeProperty(r):e.style[r]=""}setProperty(e,r,n){e!=null&&(e[r]=n)}setValue(e,r){e.nodeValue=r}listen(e,r,n){if(typeof e=="string"&&(e=ug().getGlobalEventTarget(this.doc,e),!e))throw new Error(`Unsupported event target ${e} for event ${r}`);return this.eventManager.addEventListener(e,r,this.decoratePreventDefault(n))}decoratePreventDefault(e){return r=>{if(r==="__ngUnwrap__")return e;(this.platformIsServer?this.ngZone.runGuarded(()=>e(r)):e(r))===!1&&r.preventDefault()}}};function Xw(t){return t.tagName==="TEMPLATE"&&t.content!==void 0}var gg=class extends ll{constructor(e,r,n,o,a,u,s,l){super(e,a,u,l),this.sharedStylesHost=r,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);let i=Jw(o.id,o.styles);for(let c of i){let f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=c,this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,r){return super.appendChild(this.nodeOrShadowRoot(e),r)}insertBefore(e,r,n){return super.insertBefore(this.nodeOrShadowRoot(e),r,n)}removeChild(e,r){return super.removeChild(this.nodeOrShadowRoot(e),r)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}},cl=class extends ll{constructor(e,r,n,o,a,u,s,l){super(e,a,u,s),this.sharedStylesHost=r,this.removeStylesOnCompDestroy=o,this.styles=l?Jw(l,n.styles):n.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}},Rf=class extends cl{constructor(e,r,n,o,a,u,s,l){let i=o+"-"+n.id;super(e,r,n,a,u,s,l,i),this.contentAttr=wk(i),this.hostAttr=xk(i)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,r){let n=super.createElement(e,r);return super.setAttribute(n,this.contentAttr,""),n}},_k=(()=>{let e=class e extends Nf{constructor(n){super(n)}supports(n){return!0}addEventListener(n,o,a){return n.addEventListener(o,a,!1),()=>this.removeEventListener(n,o,a)}removeEventListener(n,o,a){return n.removeEventListener(o,a)}};e.\u0275fac=function(o){return new(o||e)(Et(Ci))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})(),Yw=["alt","control","meta","shift"],Ek={"\b":"Backspace","	":"Tab","\x7F":"Delete","\x1B":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Tk={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey},Ik=(()=>{let e=class e extends Nf{constructor(n){super(n)}supports(n){return e.parseEventName(n)!=null}addEventListener(n,o,a){let u=e.parseEventName(o),s=e.eventCallback(u.fullKey,a,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>ug().onAndCancel(n,u.domEventName,s))}static parseEventName(n){let o=n.toLowerCase().split("."),a=o.shift();if(o.length===0||!(a==="keydown"||a==="keyup"))return null;let u=e._normalizeKey(o.pop()),s="",l=o.indexOf("code");if(l>-1&&(o.splice(l,1),s="code."),Yw.forEach(c=>{let f=o.indexOf(c);f>-1&&(o.splice(f,1),s+=c+".")}),s+=u,o.length!=0||u.length===0)return null;let i={};return i.domEventName=a,i.fullKey=s,i}static matchEventFullKeyCode(n,o){let a=Ek[n.key]||n.key,u="";return o.indexOf("code.")>-1&&(a=n.code,u="code."),a==null||!a?!1:(a=a.toLowerCase(),a===" "?a="space":a==="."&&(a="dot"),Yw.forEach(s=>{if(s!==a){let l=Tk[s];l(n)&&(u+=s+".")}}),u+=a,u===o)}static eventCallback(n,o,a){return u=>{e.matchEventFullKeyCode(u,n)&&a.runGuarded(()=>o(u))}}static _normalizeKey(n){return n==="esc"?"escape":n}};e.\u0275fac=function(o){return new(o||e)(Et(Ci))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac});let t=e;return t})();function ex(t,e){return Lw(N({rootComponent:t},Ak(e)))}function Ak(t){return{appProviders:[...Pk,...t?.providers??[]],platformProviders:Ok}}function Sk(){hg.makeCurrent()}function Dk(){return new Zi}function Ck(){return Xb(document),document}var Ok=[{provide:ms,useValue:Ww},{provide:$p,useValue:Sk,multi:!0},{provide:Ci,useFactory:Ck,deps:[]}];var Pk=[{provide:xf,useValue:"root"},{provide:Zi,useFactory:Dk,deps:[]},{provide:pg,useClass:_k,multi:!0,deps:[Ci,Pr,ms]},{provide:pg,useClass:Ik,multi:!0,deps:[Ci]},qw,Kw,Zw,{provide:el,useExisting:qw},{provide:Mf,useClass:gk,deps:[]},[]];var Mk={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},XX=j(N({},Mk),{"[class.ng-submitted]":"isSubmitted"});var Nk=new Ft("CallSetDisabledState",{providedIn:"root",factory:()=>tx}),tx="always";var Rk=(()=>{let e=class e{};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=fs({type:e}),e.\u0275inj=cs({});let t=e;return t})();var rx=(()=>{let e=class e{static withConfig(n){return{ngModule:e,providers:[{provide:Nk,useValue:n.callSetDisabledState??tx}]}}};e.\u0275fac=function(o){return new(o||e)},e.\u0275mod=fs({type:e}),e.\u0275inj=cs({imports:[Rk]});let t=e;return t})();function Fk(t,e){var r=Object.setPrototypeOf;r?r(t,e):t.__proto__=e}function kk(t,e){e===void 0&&(e=t.constructor);var r=Error.captureStackTrace;r&&r(t,e)}var Lk=function(){var t=function(r,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(o,a){o.__proto__=a}||function(o,a){for(var u in a)Object.prototype.hasOwnProperty.call(a,u)&&(o[u]=a[u])},t(r,n)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nx=function(t){Lk(e,t);function e(r,n){var o=this.constructor,a=t.call(this,r,n)||this;return Object.defineProperty(a,"name",{value:o.name,enumerable:!1,configurable:!0}),Fk(a,o.prototype),kk(a),a}return e}(Error);var Bk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),$k=function(t){Bk(e,t);function e(r){r===void 0&&(r=void 0);var n=t.call(this,r)||this;return n.message=r,n}return e.prototype.getKind=function(){var r=this.constructor;return r.kind},e.kind="Exception",e}(nx),Tt=$k;var Vk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jk=function(t){Vk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArgumentException",e}(Tt),Xt=jk;var Uk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Hk=function(t){Uk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalArgumentException",e}(Tt),re=Hk;var zk=function(){function t(e){if(this.binarizer=e,e===null)throw new re("Binarizer must be non-null.")}return t.prototype.getWidth=function(){return this.binarizer.getWidth()},t.prototype.getHeight=function(){return this.binarizer.getHeight()},t.prototype.getBlackRow=function(e,r){return this.binarizer.getBlackRow(e,r)},t.prototype.getBlackMatrix=function(){return(this.matrix===null||this.matrix===void 0)&&(this.matrix=this.binarizer.getBlackMatrix()),this.matrix},t.prototype.isCropSupported=function(){return this.binarizer.getLuminanceSource().isCropSupported()},t.prototype.crop=function(e,r,n,o){var a=this.binarizer.getLuminanceSource().crop(e,r,n,o);return new t(this.binarizer.createBinarizer(a))},t.prototype.isRotateSupported=function(){return this.binarizer.getLuminanceSource().isRotateSupported()},t.prototype.rotateCounterClockwise=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise();return new t(this.binarizer.createBinarizer(e))},t.prototype.rotateCounterClockwise45=function(){var e=this.binarizer.getLuminanceSource().rotateCounterClockwise45();return new t(this.binarizer.createBinarizer(e))},t.prototype.toString=function(){try{return this.getBlackMatrix().toString()}catch{return""}},t}(),fl=zk;var Gk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wk=function(t){Gk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getChecksumInstance=function(){return new e},e.kind="ChecksumException",e}(Tt),nt=Wk;var qk=function(){function t(e){this.source=e}return t.prototype.getLuminanceSource=function(){return this.source},t.prototype.getWidth=function(){return this.source.getWidth()},t.prototype.getHeight=function(){return this.source.getHeight()},t}(),yg=qk;var Xk=function(){function t(){}return t.arraycopy=function(e,r,n,o,a){for(;a--;)n[o++]=e[r++]},t.currentTimeMillis=function(){return Date.now()},t}(),Pe=Xk;var Yk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zk=function(t){Yk(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IndexOutOfBoundsException",e}(Tt),vs=Zk;var Kk=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Qk=function(t){Kk(e,t);function e(r,n){r===void 0&&(r=void 0),n===void 0&&(n=void 0);var o=t.call(this,n)||this;return o.index=r,o.message=n,o}return e.kind="ArrayIndexOutOfBoundsException",e}(vs),vg=Qk;var Jk=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eL=function(){function t(){}return t.fill=function(e,r){for(var n=0,o=e.length;n<o;n++)e[n]=r},t.fillWithin=function(e,r,n,o){t.rangeCheck(e.length,r,n);for(var a=r;a<n;a++)e[a]=o},t.rangeCheck=function(e,r,n){if(r>n)throw new re("fromIndex("+r+") > toIndex("+n+")");if(r<0)throw new vg(r);if(n>e)throw new vg(n)},t.asList=function(){for(var e=[],r=0;r<arguments.length;r++)e[r]=arguments[r];return e},t.create=function(e,r,n){var o=Array.from({length:e});return o.map(function(a){return Array.from({length:r}).fill(n)})},t.createInt32Array=function(e,r,n){var o=Array.from({length:e});return o.map(function(a){return Int32Array.from({length:r}).fill(n)})},t.equals=function(e,r){if(!e||!r||!e.length||!r.length||e.length!==r.length)return!1;for(var n=0,o=e.length;n<o;n++)if(e[n]!==r[n])return!1;return!0},t.hashCode=function(e){var r,n;if(e===null)return 0;var o=1;try{for(var a=Jk(e),u=a.next();!u.done;u=a.next()){var s=u.value;o=31*o+s}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.fillUint8Array=function(e,r){for(var n=0;n!==e.length;n++)e[n]=r},t.copyOf=function(e,r){return e.slice(0,r)},t.copyOfUint8Array=function(e,r){if(e.length<=r){var n=new Uint8Array(r);return n.set(e),n}return e.slice(0,r)},t.copyOfRange=function(e,r,n){var o=n-r,a=new Int32Array(o);return Pe.arraycopy(e,r,a,0,o),a},t.binarySearch=function(e,r,n){n===void 0&&(n=t.numberComparator);for(var o=0,a=e.length-1;o<=a;){var u=a+o>>1,s=n(r,e[u]);if(s>0)o=u+1;else if(s<0)a=u-1;else return u}return-o-1},t.numberComparator=function(e,r){return e-r},t}(),it=eL;var tL=function(){function t(){}return t.numberOfTrailingZeros=function(e){var r;if(e===0)return 32;var n=31;return r=e<<16,r!==0&&(n-=16,e=r),r=e<<8,r!==0&&(n-=8,e=r),r=e<<4,r!==0&&(n-=4,e=r),r=e<<2,r!==0&&(n-=2,e=r),n-(e<<1>>>31)},t.numberOfLeadingZeros=function(e){if(e===0)return 32;var r=1;return e>>>16||(r+=16,e<<=16),e>>>24||(r+=8,e<<=8),e>>>28||(r+=4,e<<=4),e>>>30||(r+=2,e<<=2),r-=e>>>31,r},t.toHexString=function(e){return e.toString(16)},t.toBinaryString=function(e){return String(parseInt(String(e),2))},t.bitCount=function(e){return e=e-(e>>>1&1431655765),e=(e&858993459)+(e>>>2&858993459),e=e+(e>>>4)&252645135,e=e+(e>>>8),e=e+(e>>>16),e&63},t.truncDivision=function(e,r){return Math.trunc(e/r)},t.parseInt=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t.MIN_VALUE_32_BITS=-2147483648,t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),ge=tL;var rL=function(){function t(e,r){e===void 0?(this.size=0,this.bits=new Int32Array(1)):(this.size=e,r==null?this.bits=t.makeArray(e):this.bits=r)}return t.prototype.getSize=function(){return this.size},t.prototype.getSizeInBytes=function(){return Math.floor((this.size+7)/8)},t.prototype.ensureCapacity=function(e){if(e>this.bits.length*32){var r=t.makeArray(e);Pe.arraycopy(this.bits,0,r,0,this.bits.length),this.bits=r}},t.prototype.get=function(e){return(this.bits[Math.floor(e/32)]&1<<(e&31))!==0},t.prototype.set=function(e){this.bits[Math.floor(e/32)]|=1<<(e&31)},t.prototype.flip=function(e){this.bits[Math.floor(e/32)]^=1<<(e&31)},t.prototype.getNextSet=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,o=Math.floor(e/32),a=n[o];a&=~((1<<(e&31))-1);for(var u=n.length;a===0;){if(++o===u)return r;a=n[o]}var s=o*32+ge.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.getNextUnset=function(e){var r=this.size;if(e>=r)return r;var n=this.bits,o=Math.floor(e/32),a=~n[o];a&=~((1<<(e&31))-1);for(var u=n.length;a===0;){if(++o===u)return r;a=~n[o]}var s=o*32+ge.numberOfTrailingZeros(a);return s>r?r:s},t.prototype.setBulk=function(e,r){this.bits[Math.floor(e/32)]=r},t.prototype.setRange=function(e,r){if(r<e||e<0||r>this.size)throw new re;if(r!==e){r--;for(var n=Math.floor(e/32),o=Math.floor(r/32),a=this.bits,u=n;u<=o;u++){var s=u>n?0:e&31,l=u<o?31:r&31,i=(2<<l)-(1<<s);a[u]|=i}}},t.prototype.clear=function(){for(var e=this.bits.length,r=this.bits,n=0;n<e;n++)r[n]=0},t.prototype.isRange=function(e,r,n){if(r<e||e<0||r>this.size)throw new re;if(r===e)return!0;r--;for(var o=Math.floor(e/32),a=Math.floor(r/32),u=this.bits,s=o;s<=a;s++){var l=s>o?0:e&31,i=s<a?31:r&31,c=(2<<i)-(1<<l)&4294967295;if((u[s]&c)!==(n?c:0))return!1}return!0},t.prototype.appendBit=function(e){this.ensureCapacity(this.size+1),e&&(this.bits[Math.floor(this.size/32)]|=1<<(this.size&31)),this.size++},t.prototype.appendBits=function(e,r){if(r<0||r>32)throw new re("Num bits must be between 0 and 32");this.ensureCapacity(this.size+r);for(var n=r;n>0;n--)this.appendBit((e>>n-1&1)===1)},t.prototype.appendBitArray=function(e){var r=e.size;this.ensureCapacity(this.size+r);for(var n=0;n<r;n++)this.appendBit(e.get(n))},t.prototype.xor=function(e){if(this.size!==e.size)throw new re("Sizes don't match");for(var r=this.bits,n=0,o=r.length;n<o;n++)r[n]^=e.bits[n]},t.prototype.toBytes=function(e,r,n,o){for(var a=0;a<o;a++){for(var u=0,s=0;s<8;s++)this.get(e)&&(u|=1<<7-s),e++;r[n+a]=u}},t.prototype.getBitArray=function(){return this.bits},t.prototype.reverse=function(){for(var e=new Int32Array(this.bits.length),r=Math.floor((this.size-1)/32),n=r+1,o=this.bits,a=0;a<n;a++){var u=o[a];u=u>>1&1431655765|(u&1431655765)<<1,u=u>>2&858993459|(u&858993459)<<2,u=u>>4&252645135|(u&252645135)<<4,u=u>>8&16711935|(u&16711935)<<8,u=u>>16&65535|(u&65535)<<16,e[r-a]=u}if(this.size!==n*32){for(var s=n*32-this.size,l=e[0]>>>s,a=1;a<n;a++){var i=e[a];l|=i<<32-s,e[a-1]=l,l=i>>>s}e[n-1]=l}this.bits=e},t.makeArray=function(e){return new Int32Array(Math.floor((e+31)/32))},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.size===r.size&&it.equals(this.bits,r.bits)},t.prototype.hashCode=function(){return 31*this.size+it.hashCode(this.bits)},t.prototype.toString=function(){for(var e="",r=0,n=this.size;r<n;r++)r&7||(e+=" "),e+=this.get(r)?"X":".";return e},t.prototype.clone=function(){return new t(this.size,this.bits.slice())},t.prototype.toArray=function(){for(var e=[],r=0,n=this.size;r<n;r++)e.push(this.get(r));return e},t}(),Pt=rL;var ix=function(t){return t[t.OTHER=0]="OTHER",t[t.PURE_BARCODE=1]="PURE_BARCODE",t[t.POSSIBLE_FORMATS=2]="POSSIBLE_FORMATS",t[t.TRY_HARDER=3]="TRY_HARDER",t[t.CHARACTER_SET=4]="CHARACTER_SET",t[t.ALLOWED_LENGTHS=5]="ALLOWED_LENGTHS",t[t.ASSUME_CODE_39_CHECK_DIGIT=6]="ASSUME_CODE_39_CHECK_DIGIT",t[t.ENABLE_CODE_39_EXTENDED_MODE=7]="ENABLE_CODE_39_EXTENDED_MODE",t[t.ASSUME_GS1=8]="ASSUME_GS1",t[t.RETURN_CODABAR_START_END=9]="RETURN_CODABAR_START_END",t[t.NEED_RESULT_POINT_CALLBACK=10]="NEED_RESULT_POINT_CALLBACK",t[t.ALLOWED_EAN_EXTENSIONS=11]="ALLOWED_EAN_EXTENSIONS",t}(ix||{}),Me=ix;var nL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),iL=function(t){nL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getFormatInstance=function(){return new e},e.kind="FormatException",e}(Tt),K=iL;var oL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},At=function(t){return t[t.Cp437=0]="Cp437",t[t.ISO8859_1=1]="ISO8859_1",t[t.ISO8859_2=2]="ISO8859_2",t[t.ISO8859_3=3]="ISO8859_3",t[t.ISO8859_4=4]="ISO8859_4",t[t.ISO8859_5=5]="ISO8859_5",t[t.ISO8859_6=6]="ISO8859_6",t[t.ISO8859_7=7]="ISO8859_7",t[t.ISO8859_8=8]="ISO8859_8",t[t.ISO8859_9=9]="ISO8859_9",t[t.ISO8859_10=10]="ISO8859_10",t[t.ISO8859_11=11]="ISO8859_11",t[t.ISO8859_13=12]="ISO8859_13",t[t.ISO8859_14=13]="ISO8859_14",t[t.ISO8859_15=14]="ISO8859_15",t[t.ISO8859_16=15]="ISO8859_16",t[t.SJIS=16]="SJIS",t[t.Cp1250=17]="Cp1250",t[t.Cp1251=18]="Cp1251",t[t.Cp1252=19]="Cp1252",t[t.Cp1256=20]="Cp1256",t[t.UnicodeBigUnmarked=21]="UnicodeBigUnmarked",t[t.UTF8=22]="UTF8",t[t.ASCII=23]="ASCII",t[t.Big5=24]="Big5",t[t.GB18030=25]="GB18030",t[t.EUC_KR=26]="EUC_KR",t}(At||{}),aL=function(){function t(e,r,n){for(var o,a,u=[],s=3;s<arguments.length;s++)u[s-3]=arguments[s];this.valueIdentifier=e,this.name=n,typeof r=="number"?this.values=Int32Array.from([r]):this.values=r,this.otherEncodingNames=u,t.VALUE_IDENTIFIER_TO_ECI.set(e,this),t.NAME_TO_ECI.set(n,this);for(var l=this.values,i=0,c=l.length;i!==c;i++){var f=l[i];t.VALUES_TO_ECI.set(f,this)}try{for(var d=oL(u),h=d.next();!h.done;h=d.next()){var p=h.value;t.NAME_TO_ECI.set(p,this)}}catch(m){o={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}}return t.prototype.getValueIdentifier=function(){return this.valueIdentifier},t.prototype.getName=function(){return this.name},t.prototype.getValue=function(){return this.values[0]},t.getCharacterSetECIByValue=function(e){if(e<0||e>=900)throw new K("incorect value");var r=t.VALUES_TO_ECI.get(e);if(r===void 0)throw new K("incorect value");return r},t.getCharacterSetECIByName=function(e){var r=t.NAME_TO_ECI.get(e);if(r===void 0)throw new K("incorect value");return r},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.getName()===r.getName()},t.VALUE_IDENTIFIER_TO_ECI=new Map,t.VALUES_TO_ECI=new Map,t.NAME_TO_ECI=new Map,t.Cp437=new t(At.Cp437,Int32Array.from([0,2]),"Cp437"),t.ISO8859_1=new t(At.ISO8859_1,Int32Array.from([1,3]),"ISO-8859-1","ISO88591","ISO8859_1"),t.ISO8859_2=new t(At.ISO8859_2,4,"ISO-8859-2","ISO88592","ISO8859_2"),t.ISO8859_3=new t(At.ISO8859_3,5,"ISO-8859-3","ISO88593","ISO8859_3"),t.ISO8859_4=new t(At.ISO8859_4,6,"ISO-8859-4","ISO88594","ISO8859_4"),t.ISO8859_5=new t(At.ISO8859_5,7,"ISO-8859-5","ISO88595","ISO8859_5"),t.ISO8859_6=new t(At.ISO8859_6,8,"ISO-8859-6","ISO88596","ISO8859_6"),t.ISO8859_7=new t(At.ISO8859_7,9,"ISO-8859-7","ISO88597","ISO8859_7"),t.ISO8859_8=new t(At.ISO8859_8,10,"ISO-8859-8","ISO88598","ISO8859_8"),t.ISO8859_9=new t(At.ISO8859_9,11,"ISO-8859-9","ISO88599","ISO8859_9"),t.ISO8859_10=new t(At.ISO8859_10,12,"ISO-8859-10","ISO885910","ISO8859_10"),t.ISO8859_11=new t(At.ISO8859_11,13,"ISO-8859-11","ISO885911","ISO8859_11"),t.ISO8859_13=new t(At.ISO8859_13,15,"ISO-8859-13","ISO885913","ISO8859_13"),t.ISO8859_14=new t(At.ISO8859_14,16,"ISO-8859-14","ISO885914","ISO8859_14"),t.ISO8859_15=new t(At.ISO8859_15,17,"ISO-8859-15","ISO885915","ISO8859_15"),t.ISO8859_16=new t(At.ISO8859_16,18,"ISO-8859-16","ISO885916","ISO8859_16"),t.SJIS=new t(At.SJIS,20,"SJIS","Shift_JIS"),t.Cp1250=new t(At.Cp1250,21,"Cp1250","windows-1250"),t.Cp1251=new t(At.Cp1251,22,"Cp1251","windows-1251"),t.Cp1252=new t(At.Cp1252,23,"Cp1252","windows-1252"),t.Cp1256=new t(At.Cp1256,24,"Cp1256","windows-1256"),t.UnicodeBigUnmarked=new t(At.UnicodeBigUnmarked,25,"UnicodeBigUnmarked","UTF-16BE","UnicodeBig"),t.UTF8=new t(At.UTF8,26,"UTF8","UTF-8"),t.ASCII=new t(At.ASCII,Int32Array.from([27,170]),"ASCII","US-ASCII"),t.Big5=new t(At.Big5,28,"Big5"),t.GB18030=new t(At.GB18030,29,"GB18030","GB2312","EUC_CN","GBK"),t.EUC_KR=new t(At.EUC_KR,30,"EUC_KR","EUC-KR"),t}(),Mt=aL;var sL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),uL=function(t){sL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="UnsupportedOperationException",e}(Tt),wa=uL;var lL=function(){function t(){}return t.decode=function(e,r){var n=this.encodingName(r);return this.customDecoder?this.customDecoder(e,n):typeof TextDecoder>"u"||this.shouldDecodeOnFallback(n)?this.decodeFallback(e,n):new TextDecoder(n).decode(e)},t.shouldDecodeOnFallback=function(e){return!t.isBrowser()&&e==="ISO-8859-1"},t.encode=function(e,r){var n=this.encodingName(r);return this.customEncoder?this.customEncoder(e,n):typeof TextEncoder>"u"?this.encodeFallback(e):new TextEncoder().encode(e)},t.isBrowser=function(){return typeof window<"u"&&{}.toString.call(window)==="[object Window]"},t.encodingName=function(e){return typeof e=="string"?e:e.getName()},t.encodingCharacterSet=function(e){return e instanceof Mt?e:Mt.getCharacterSetECIByName(e)},t.decodeFallback=function(e,r){var n=this.encodingCharacterSet(r);if(t.isDecodeFallbackSupported(n)){for(var o="",a=0,u=e.length;a<u;a++){var s=e[a].toString(16);s.length<2&&(s="0"+s),o+="%"+s}return decodeURIComponent(o)}if(n.equals(Mt.UnicodeBigUnmarked))return String.fromCharCode.apply(null,new Uint16Array(e.buffer));throw new wa("Encoding "+this.encodingName(r)+" not supported by fallback.")},t.isDecodeFallbackSupported=function(e){return e.equals(Mt.UTF8)||e.equals(Mt.ISO8859_1)||e.equals(Mt.ASCII)},t.encodeFallback=function(e){for(var r=btoa(unescape(encodeURIComponent(e))),n=r.split(""),o=[],a=0;a<n.length;a++)o.push(n[a].charCodeAt(0));return new Uint8Array(o)},t}(),Sr=lL;var cL=function(){function t(){}return t.castAsNonUtf8Char=function(e,r){r===void 0&&(r=null);var n=r?r.getName():this.ISO88591;return Sr.decode(new Uint8Array([e]),n)},t.guessEncoding=function(e,r){if(r!=null&&r.get(Me.CHARACTER_SET)!==void 0)return r.get(Me.CHARACTER_SET).toString();for(var n=e.length,o=!0,a=!0,u=!0,s=0,l=0,i=0,c=0,f=0,d=0,h=0,p=0,m=0,v=0,x=0,y=e.length>3&&e[0]===239&&e[1]===187&&e[2]===191,_=0;_<n&&(o||a||u);_++){var I=e[_]&255;u&&(s>0?I&128?s--:u=!1:I&128&&(I&64?(s++,I&32?(s++,I&16?(s++,I&8?u=!1:c++):i++):l++):u=!1)),o&&(I>127&&I<160?o=!1:I>159&&(I<192||I===215||I===247)&&x++),a&&(f>0?I<64||I===127||I>252?a=!1:f--:I===128||I===160||I>239?a=!1:I>160&&I<224?(d++,p=0,h++,h>m&&(m=h)):I>127?(f++,h=0,p++,p>v&&(v=p)):(h=0,p=0))}return u&&s>0&&(u=!1),a&&f>0&&(a=!1),u&&(y||l+i+c>0)?t.UTF8:a&&(t.ASSUME_SHIFT_JIS||m>=3||v>=3)?t.SHIFT_JIS:o&&a?m===2&&d===2||x*10>=n?t.SHIFT_JIS:t.ISO88591:o?t.ISO88591:a?t.SHIFT_JIS:u?t.UTF8:t.PLATFORM_DEFAULT_ENCODING},t.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var o=-1;function a(s,l,i,c,f,d){if(s==="%%")return"%";if(r[++o]!==void 0){s=c?parseInt(c.substr(1)):void 0;var h=f?parseInt(f.substr(1)):void 0,p;switch(d){case"s":p=r[o];break;case"c":p=r[o][0];break;case"f":p=parseFloat(r[o]).toFixed(s);break;case"p":p=parseFloat(r[o]).toPrecision(s);break;case"e":p=parseFloat(r[o]).toExponential(s);break;case"x":p=parseInt(r[o]).toString(h||16);break;case"d":p=parseFloat(parseInt(r[o],h||10).toPrecision(s)).toFixed(0);break}p=typeof p=="object"?JSON.stringify(p):(+p).toString(h);for(var m=parseInt(i),v=i&&i[0]+""=="0"?"0":" ";p.length<m;)p=l!==void 0?p+v:v+p;return p}}var u=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(u,a)},t.getBytes=function(e,r){return Sr.encode(e,r)},t.getCharCode=function(e,r){return r===void 0&&(r=0),e.charCodeAt(r)},t.getCharAt=function(e){return String.fromCharCode(e)},t.SHIFT_JIS=Mt.SJIS.getName(),t.GB2312="GB2312",t.ISO88591=Mt.ISO8859_1.getName(),t.EUC_JP="EUC_JP",t.UTF8=Mt.UTF8.getName(),t.PLATFORM_DEFAULT_ENCODING=t.UTF8,t.ASSUME_SHIFT_JIS=!1,t}(),_e=cL;var fL=function(){function t(e){e===void 0&&(e=""),this.value=e}return t.prototype.enableDecoding=function(e){return this.encoding=e,this},t.prototype.append=function(e){return typeof e=="string"?this.value+=e.toString():this.encoding?this.value+=_e.castAsNonUtf8Char(e,this.encoding):this.value+=String.fromCharCode(e),this},t.prototype.appendChars=function(e,r,n){for(var o=r;r<r+n;o++)this.append(e[o]);return this},t.prototype.length=function(){return this.value.length},t.prototype.charAt=function(e){return this.value.charAt(e)},t.prototype.deleteCharAt=function(e){this.value=this.value.substr(0,e)+this.value.substring(e+1)},t.prototype.setCharAt=function(e,r){this.value=this.value.substr(0,e)+r+this.value.substr(e+1)},t.prototype.substring=function(e,r){return this.value.substring(e,r)},t.prototype.setLengthToZero=function(){this.value=""},t.prototype.toString=function(){return this.value},t.prototype.insert=function(e,r){this.value=this.value.substring(0,e)+r+this.value.substring(e)},t}(),de=fL;var dL=function(){function t(e,r,n,o){if(this.width=e,this.height=r,this.rowSize=n,this.bits=o,r==null&&(r=e),this.height=r,e<1||r<1)throw new re("Both dimensions must be greater than 0");n==null&&(n=Math.floor((e+31)/32)),this.rowSize=n,o==null&&(this.bits=new Int32Array(this.rowSize*this.height))}return t.parseFromBooleanArray=function(e){for(var r=e.length,n=e[0].length,o=new t(n,r),a=0;a<r;a++)for(var u=e[a],s=0;s<n;s++)u[s]&&o.set(s,a);return o},t.parseFromString=function(e,r,n){if(e===null)throw new re("stringRepresentation cannot be null");for(var o=new Array(e.length),a=0,u=0,s=-1,l=0,i=0;i<e.length;)if(e.charAt(i)===`
`||e.charAt(i)==="\r"){if(a>u){if(s===-1)s=a-u;else if(a-u!==s)throw new re("row lengths do not match");u=a,l++}i++}else if(e.substring(i,i+r.length)===r)i+=r.length,o[a]=!0,a++;else if(e.substring(i,i+n.length)===n)i+=n.length,o[a]=!1,a++;else throw new re("illegal character encountered: "+e.substring(i));if(a>u){if(s===-1)s=a-u;else if(a-u!==s)throw new re("row lengths do not match");l++}for(var c=new t(s,l),f=0;f<a;f++)o[f]&&c.set(Math.floor(f%s),Math.floor(f/s));return c},t.prototype.get=function(e,r){var n=r*this.rowSize+Math.floor(e/32);return(this.bits[n]>>>(e&31)&1)!==0},t.prototype.set=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]|=1<<(e&31)&4294967295},t.prototype.unset=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]&=~(1<<(e&31)&4294967295)},t.prototype.flip=function(e,r){var n=r*this.rowSize+Math.floor(e/32);this.bits[n]^=1<<(e&31)&4294967295},t.prototype.xor=function(e){if(this.width!==e.getWidth()||this.height!==e.getHeight()||this.rowSize!==e.getRowSize())throw new re("input matrix dimensions do not match");for(var r=new Pt(Math.floor(this.width/32)+1),n=this.rowSize,o=this.bits,a=0,u=this.height;a<u;a++)for(var s=a*n,l=e.getRow(a,r).getBitArray(),i=0;i<n;i++)o[s+i]^=l[i]},t.prototype.clear=function(){for(var e=this.bits,r=e.length,n=0;n<r;n++)e[n]=0},t.prototype.setRegion=function(e,r,n,o){if(r<0||e<0)throw new re("Left and top must be nonnegative");if(o<1||n<1)throw new re("Height and width must be at least 1");var a=e+n,u=r+o;if(u>this.height||a>this.width)throw new re("The region must fit inside the matrix");for(var s=this.rowSize,l=this.bits,i=r;i<u;i++)for(var c=i*s,f=e;f<a;f++)l[c+Math.floor(f/32)]|=1<<(f&31)&4294967295},t.prototype.getRow=function(e,r){r==null||r.getSize()<this.width?r=new Pt(this.width):r.clear();for(var n=this.rowSize,o=this.bits,a=e*n,u=0;u<n;u++)r.setBulk(u*32,o[a+u]);return r},t.prototype.setRow=function(e,r){Pe.arraycopy(r.getBitArray(),0,this.bits,e*this.rowSize,this.rowSize)},t.prototype.rotate180=function(){for(var e=this.getWidth(),r=this.getHeight(),n=new Pt(e),o=new Pt(e),a=0,u=Math.floor((r+1)/2);a<u;a++)n=this.getRow(a,n),o=this.getRow(r-1-a,o),n.reverse(),o.reverse(),this.setRow(a,o),this.setRow(r-1-a,n)},t.prototype.getEnclosingRectangle=function(){for(var e=this.width,r=this.height,n=this.rowSize,o=this.bits,a=e,u=r,s=-1,l=-1,i=0;i<r;i++)for(var c=0;c<n;c++){var f=o[i*n+c];if(f!==0){if(i<u&&(u=i),i>l&&(l=i),c*32<a){for(var d=0;!(f<<31-d&4294967295);)d++;c*32+d<a&&(a=c*32+d)}if(c*32+31>s){for(var d=31;!(f>>>d);)d--;c*32+d>s&&(s=c*32+d)}}}return s<a||l<u?null:Int32Array.from([a,u,s-a+1,l-u+1])},t.prototype.getTopLeftOnBit=function(){for(var e=this.rowSize,r=this.bits,n=0;n<r.length&&r[n]===0;)n++;if(n===r.length)return null;for(var o=n/e,a=n%e*32,u=r[n],s=0;!(u<<31-s&4294967295);)s++;return a+=s,Int32Array.from([a,o])},t.prototype.getBottomRightOnBit=function(){for(var e=this.rowSize,r=this.bits,n=r.length-1;n>=0&&r[n]===0;)n--;if(n<0)return null;for(var o=Math.floor(n/e),a=Math.floor(n%e)*32,u=r[n],s=31;!(u>>>s);)s--;return a+=s,Int32Array.from([a,o])},t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.getRowSize=function(){return this.rowSize},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.width===r.width&&this.height===r.height&&this.rowSize===r.rowSize&&it.equals(this.bits,r.bits)},t.prototype.hashCode=function(){var e=this.width;return e=31*e+this.width,e=31*e+this.height,e=31*e+this.rowSize,e=31*e+it.hashCode(this.bits),e},t.prototype.toString=function(e,r,n){return e===void 0&&(e="X "),r===void 0&&(r="  "),n===void 0&&(n=`
`),this.buildToString(e,r,n)},t.prototype.buildToString=function(e,r,n){for(var o=new de,a=0,u=this.height;a<u;a++){for(var s=0,l=this.width;s<l;s++)o.append(this.get(s,a)?e:r);o.append(n)}return o.toString()},t.prototype.clone=function(){return new t(this.width,this.height,this.rowSize,this.bits.slice())},t}(),Nt=dL;var hL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),pL=function(t){hL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.getNotFoundInstance=function(){return new e},e.kind="NotFoundException",e}(Tt),L=pL;var gL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mL=function(t){gL(e,t);function e(r){var n=t.call(this,r)||this;return n.luminances=e.EMPTY,n.buckets=new Int32Array(e.LUMINANCE_BUCKETS),n}return e.prototype.getBlackRow=function(r,n){var o=this.getLuminanceSource(),a=o.getWidth();n==null||n.getSize()<a?n=new Pt(a):n.clear(),this.initArrays(a);for(var u=o.getRow(r,this.luminances),s=this.buckets,l=0;l<a;l++)s[(u[l]&255)>>e.LUMINANCE_SHIFT]++;var i=e.estimateBlackPoint(s);if(a<3)for(var l=0;l<a;l++)(u[l]&255)<i&&n.set(l);else for(var c=u[0]&255,f=u[1]&255,l=1;l<a-1;l++){var d=u[l+1]&255;(f*4-c-d)/2<i&&n.set(l),c=f,f=d}return n},e.prototype.getBlackMatrix=function(){var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight(),a=new Nt(n,o);this.initArrays(n);for(var u=this.buckets,s=1;s<5;s++)for(var l=Math.floor(o*s/5),i=r.getRow(l,this.luminances),c=Math.floor(n*4/5),f=Math.floor(n/5);f<c;f++){var d=i[f]&255;u[d>>e.LUMINANCE_SHIFT]++}for(var h=e.estimateBlackPoint(u),p=r.getMatrix(),s=0;s<o;s++)for(var m=s*n,f=0;f<n;f++){var d=p[m+f]&255;d<h&&a.set(f,s)}return a},e.prototype.createBinarizer=function(r){return new e(r)},e.prototype.initArrays=function(r){this.luminances.length<r&&(this.luminances=new Uint8ClampedArray(r));for(var n=this.buckets,o=0;o<e.LUMINANCE_BUCKETS;o++)n[o]=0},e.estimateBlackPoint=function(r){for(var n=r.length,o=0,a=0,u=0,s=0;s<n;s++)r[s]>u&&(a=s,u=r[s]),r[s]>o&&(o=r[s]);for(var l=0,i=0,s=0;s<n;s++){var c=s-a,f=r[s]*c*c;f>i&&(l=s,i=f)}if(a>l){var d=a;a=l,l=d}if(l-a<=n/16)throw new L;for(var h=l-1,p=-1,s=l-1;s>a;s--){var m=s-a,f=m*m*(l-s)*(o-r[s]);f>p&&(h=s,p=f)}return h<<e.LUMINANCE_SHIFT},e.LUMINANCE_BITS=5,e.LUMINANCE_SHIFT=8-e.LUMINANCE_BITS,e.LUMINANCE_BUCKETS=1<<e.LUMINANCE_BITS,e.EMPTY=Uint8ClampedArray.from([0]),e}(yg),bg=mL;var yL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),vL=function(t){yL(e,t);function e(r){var n=t.call(this,r)||this;return n.matrix=null,n}return e.prototype.getBlackMatrix=function(){if(this.matrix!==null)return this.matrix;var r=this.getLuminanceSource(),n=r.getWidth(),o=r.getHeight();if(n>=e.MINIMUM_DIMENSION&&o>=e.MINIMUM_DIMENSION){var a=r.getMatrix(),u=n>>e.BLOCK_SIZE_POWER;n&e.BLOCK_SIZE_MASK&&u++;var s=o>>e.BLOCK_SIZE_POWER;o&e.BLOCK_SIZE_MASK&&s++;var l=e.calculateBlackPoints(a,u,s,n,o),i=new Nt(n,o);e.calculateThresholdForBlock(a,u,s,n,o,l,i),this.matrix=i}else this.matrix=t.prototype.getBlackMatrix.call(this);return this.matrix},e.prototype.createBinarizer=function(r){return new e(r)},e.calculateThresholdForBlock=function(r,n,o,a,u,s,l){for(var i=u-e.BLOCK_SIZE,c=a-e.BLOCK_SIZE,f=0;f<o;f++){var d=f<<e.BLOCK_SIZE_POWER;d>i&&(d=i);for(var h=e.cap(f,2,o-3),p=0;p<n;p++){var m=p<<e.BLOCK_SIZE_POWER;m>c&&(m=c);for(var v=e.cap(p,2,n-3),x=0,y=-2;y<=2;y++){var _=s[h+y];x+=_[v-2]+_[v-1]+_[v]+_[v+1]+_[v+2]}var I=x/25;e.thresholdBlock(r,m,d,I,a,l)}}},e.cap=function(r,n,o){return r<n?n:r>o?o:r},e.thresholdBlock=function(r,n,o,a,u,s){for(var l=0,i=o*u+n;l<e.BLOCK_SIZE;l++,i+=u)for(var c=0;c<e.BLOCK_SIZE;c++)(r[i+c]&255)<=a&&s.set(n+c,o+l)},e.calculateBlackPoints=function(r,n,o,a,u){for(var s=u-e.BLOCK_SIZE,l=a-e.BLOCK_SIZE,i=new Array(o),c=0;c<o;c++){i[c]=new Int32Array(n);var f=c<<e.BLOCK_SIZE_POWER;f>s&&(f=s);for(var d=0;d<n;d++){var h=d<<e.BLOCK_SIZE_POWER;h>l&&(h=l);for(var p=0,m=255,v=0,x=0,y=f*a+h;x<e.BLOCK_SIZE;x++,y+=a){for(var _=0;_<e.BLOCK_SIZE;_++){var I=r[y+_]&255;p+=I,I<m&&(m=I),I>v&&(v=I)}if(v-m>e.MIN_DYNAMIC_RANGE)for(x++,y+=a;x<e.BLOCK_SIZE;x++,y+=a)for(var _=0;_<e.BLOCK_SIZE;_++)p+=r[y+_]&255}var C=p>>e.BLOCK_SIZE_POWER*2;if(v-m<=e.MIN_DYNAMIC_RANGE&&(C=m/2,c>0&&d>0)){var V=(i[c-1][d]+2*i[c][d-1]+i[c-1][d-1])/4;m<V&&(C=V)}i[c][d]=C}}return i},e.BLOCK_SIZE_POWER=3,e.BLOCK_SIZE=1<<e.BLOCK_SIZE_POWER,e.BLOCK_SIZE_MASK=e.BLOCK_SIZE-1,e.MINIMUM_DIMENSION=e.BLOCK_SIZE*5,e.MIN_DYNAMIC_RANGE=24,e}(bg),dl=vL;var bL=function(){function t(e,r){this.width=e,this.height=r}return t.prototype.getWidth=function(){return this.width},t.prototype.getHeight=function(){return this.height},t.prototype.isCropSupported=function(){return!1},t.prototype.crop=function(e,r,n,o){throw new wa("This luminance source does not support cropping.")},t.prototype.isRotateSupported=function(){return!1},t.prototype.rotateCounterClockwise=function(){throw new wa("This luminance source does not support rotation by 90 degrees.")},t.prototype.rotateCounterClockwise45=function(){throw new wa("This luminance source does not support rotation by 45 degrees.")},t.prototype.toString=function(){for(var e=new Uint8ClampedArray(this.width),r=new de,n=0;n<this.height;n++){for(var o=this.getRow(n,e),a=0;a<this.width;a++){var u=o[a]&255,s=void 0;u<64?s="#":u<128?s="+":u<192?s=".":s=" ",r.append(s)}r.append(`
`)}return r.toString()},t}(),fi=bL;var wL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xL=function(t){wL(e,t);function e(r){var n=t.call(this,r.getWidth(),r.getHeight())||this;return n.delegate=r,n}return e.prototype.getRow=function(r,n){for(var o=this.delegate.getRow(r,n),a=this.getWidth(),u=0;u<a;u++)o[u]=255-(o[u]&255);return o},e.prototype.getMatrix=function(){for(var r=this.delegate.getMatrix(),n=this.getWidth()*this.getHeight(),o=new Uint8ClampedArray(n),a=0;a<n;a++)o[a]=255-(r[a]&255);return o},e.prototype.isCropSupported=function(){return this.delegate.isCropSupported()},e.prototype.crop=function(r,n,o,a){return new e(this.delegate.crop(r,n,o,a))},e.prototype.isRotateSupported=function(){return this.delegate.isRotateSupported()},e.prototype.invert=function(){return this.delegate},e.prototype.rotateCounterClockwise=function(){return new e(this.delegate.rotateCounterClockwise())},e.prototype.rotateCounterClockwise45=function(){return new e(this.delegate.rotateCounterClockwise45())},e}(fi),ro=xL;var _L=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ox=function(t){_L(e,t);function e(r,n){n===void 0&&(n=!1);var o=t.call(this,r.width,r.height)||this;return o.canvas=r,o.tempCanvasElement=null,o.buffer=e.makeBufferFromCanvasImageData(r,n),o}return e.makeBufferFromCanvasImageData=function(r,n){n===void 0&&(n=!1);var o=r.getContext("2d").getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(o.data,r.width,r.height,n)},e.toGrayscaleBuffer=function(r,n,o,a){a===void 0&&(a=!1);var u=new Uint8ClampedArray(n*o);if(e.FRAME_INDEX=!e.FRAME_INDEX,e.FRAME_INDEX||!a)for(var s=0,l=0,i=r.length;s<i;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],h=r[s+1],p=r[s+2];c=306*d+601*h+117*p+512>>10}u[l]=c}else for(var s=0,l=0,m=r.length;s<m;s+=4,l++){var c=void 0,f=r[s+3];if(f===0)c=255;else{var d=r[s],h=r[s+1],p=r[s+2];c=306*d+601*h+117*p+512>>10}u[l]=255-c}return u},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var o=this.getWidth(),a=r*o;return n===null?n=this.buffer.slice(a,a+o):(n.length<o&&(n=new Uint8ClampedArray(o)),n.set(this.buffer.slice(a,a+o))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return t.prototype.crop.call(this,r,n,o,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement(),o=n.getContext("2d"),a=r*e.DEGREE_TO_RADIANS,u=this.canvas.width,s=this.canvas.height,l=Math.ceil(Math.abs(Math.cos(a))*u+Math.abs(Math.sin(a))*s),i=Math.ceil(Math.abs(Math.sin(a))*u+Math.abs(Math.cos(a))*s);return n.width=l,n.height=i,o.translate(l/2,i/2),o.rotate(a),o.drawImage(this.canvas,u/-2,s/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.prototype.invert=function(){return new ro(this)},e.DEGREE_TO_RADIANS=Math.PI/180,e.FRAME_INDEX=!0,e}(fi);var ax=function(){function t(e,r,n){this.deviceId=e,this.label=r,this.kind="videoinput",this.groupId=n||void 0}return t.prototype.toJSON=function(){return{kind:this.kind,groupId:this.groupId,deviceId:this.deviceId,label:this.label}},t}();var en=function(t,e,r,n){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function s(c){try{i(n.next(c))}catch(f){u(f)}}function l(c){try{i(n.throw(c))}catch(f){u(f)}}function i(c){c.done?a(c.value):o(c.value).then(s,l)}i((n=n.apply(t,e||[])).next())})},tn=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(i){return function(c){return l([i,c])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=i[0]&2?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[i[0]&2,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(c){i=[6,c],o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},EL=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Rn=function(){function t(e,r,n){r===void 0&&(r=500),this.reader=e,this.timeBetweenScansMillis=r,this._hints=n,this._stopContinuousDecode=!1,this._stopAsyncDecode=!1,this._timeBetweenDecodingAttempts=0}return Object.defineProperty(t.prototype,"hasNavigator",{get:function(){return typeof navigator<"u"},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isMediaDevicesSuported",{get:function(){return this.hasNavigator&&!!navigator.mediaDevices},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"canEnumerateDevices",{get:function(){return!!(this.isMediaDevicesSuported&&navigator.mediaDevices.enumerateDevices)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"timeBetweenDecodingAttempts",{get:function(){return this._timeBetweenDecodingAttempts},set:function(e){this._timeBetweenDecodingAttempts=e<0?0:e},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hints",{get:function(){return this._hints},set:function(e){this._hints=e||null},enumerable:!1,configurable:!0}),t.prototype.listVideoInputDevices=function(){return en(this,void 0,void 0,function(){var e,r,n,o,a,u,s,l,i,c,f,d;return tn(this,function(h){switch(h.label){case 0:if(!this.hasNavigator)throw new Error("Can't enumerate devices, navigator is not present.");if(!this.canEnumerateDevices)throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=EL(e),o=n.next();!o.done;o=n.next())a=o.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device "+(r.length+1),i=a.groupId,c={deviceId:s,label:l,kind:u,groupId:i},r.push(c))}catch(p){f={error:p}}finally{try{o&&!o.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.prototype.getVideoInputDevices=function(){return en(this,void 0,void 0,function(){var e;return tn(this,function(r){switch(r.label){case 0:return[4,this.listVideoInputDevices()];case 1:return e=r.sent(),[2,e.map(function(n){return new ax(n.deviceId,n.label)})]}})})},t.prototype.findDeviceById=function(e){return en(this,void 0,void 0,function(){var r;return tn(this,function(n){switch(n.label){case 0:return[4,this.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(o){return o.deviceId===e})]:[2,null]}})})},t.prototype.decodeFromInputVideoDevice=function(e,r){return en(this,void 0,void 0,function(){return tn(this,function(n){switch(n.label){case 0:return[4,this.decodeOnceFromVideoDevice(e,r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return en(this,void 0,void 0,function(){var n,o;return tn(this,function(a){switch(a.label){case 0:return this.reset(),e?n={deviceId:{exact:e}}:n={facingMode:"environment"},o={video:n},[4,this.decodeOnceFromConstraints(o,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return en(this,void 0,void 0,function(){var n;return tn(this,function(o){switch(o.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return n=o.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return en(this,void 0,void 0,function(){var n,o;return tn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return n=a.sent(),[4,this.decodeOnce(n)];case 2:return o=a.sent(),[2,o]}})})},t.prototype.decodeFromInputVideoDeviceContinuously=function(e,r,n){return en(this,void 0,void 0,function(){return tn(this,function(o){switch(o.label){case 0:return[4,this.decodeFromVideoDevice(e,r,n)];case 1:return[2,o.sent()]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return en(this,void 0,void 0,function(){var o,a;return tn(this,function(u){switch(u.label){case 0:return e?o={deviceId:{exact:e}}:o={facingMode:"environment"},a={video:o},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,u.sent()]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return en(this,void 0,void 0,function(){var o;return tn(this,function(a){switch(a.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return o=a.sent(),[4,this.decodeFromStream(o,r,n)];case 2:return[2,a.sent()]}})})},t.prototype.decodeFromStream=function(e,r,n){return en(this,void 0,void 0,function(){var o;return tn(this,function(a){switch(a.label){case 0:return this.reset(),[4,this.attachStreamToVideo(e,r)];case 1:return o=a.sent(),[4,this.decodeContinuously(o,n)];case 2:return[2,a.sent()]}})})},t.prototype.stopAsyncDecode=function(){this._stopAsyncDecode=!0},t.prototype.stopContinuousDecode=function(){this._stopContinuousDecode=!0},t.prototype.attachStreamToVideo=function(e,r){return en(this,void 0,void 0,function(){var n;return tn(this,function(o){switch(o.label){case 0:return n=this.prepareVideoElement(r),this.addVideoSource(n,e),this.videoElement=n,this.stream=e,[4,this.playVideoOnLoadAsync(n)];case 1:return o.sent(),[2,n]}})})},t.prototype.playVideoOnLoadAsync=function(e){var r=this;return new Promise(function(n,o){return r.playVideoOnLoad(e,function(){return n()})})},t.prototype.playVideoOnLoad=function(e,r){var n=this;this.videoEndedListener=function(){return n.stopStreams()},this.videoCanPlayListener=function(){return n.tryPlayVideo(e)},e.addEventListener("ended",this.videoEndedListener),e.addEventListener("canplay",this.videoCanPlayListener),e.addEventListener("playing",r),this.tryPlayVideo(e)},t.prototype.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&!e.ended&&e.readyState>2},t.prototype.tryPlayVideo=function(e){return en(this,void 0,void 0,function(){var r;return tn(this,function(n){switch(n.label){case 0:if(this.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[3,4];case 3:return r=n.sent(),console.warn("It was not possible to play the video."),[3,4];case 4:return[2]}})})},t.prototype.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Xt("element with id '"+e+"' not found");if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Xt("element with id '"+e+"' must be an "+r+" element");return n},t.prototype.decodeFromImage=function(e,r){if(!e&&!r)throw new Xt("either imageElement with a src set or an url must be provided");return r&&!e?this.decodeFromImageUrl(r):this.decodeFromImageElement(e)},t.prototype.decodeFromVideo=function(e,r){if(!e&&!r)throw new Xt("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrl(r):this.decodeFromVideoElement(e)},t.prototype.decodeFromVideoContinuously=function(e,r,n){if(e===void 0&&r===void 0)throw new Xt("Either an element with a src set or an URL must be provided");return r&&!e?this.decodeFromVideoUrlContinuously(r,n):this.decodeFromVideoElementContinuously(e,n)},t.prototype.decodeFromImageElement=function(e){if(!e)throw new Xt("An image element must be provided.");this.reset();var r=this.prepareImageElement(e);this.imageElement=r;var n;return this.isImageLoaded(r)?n=this.decodeOnce(r,!1,!0):n=this._decodeOnLoadImage(r),n},t.prototype.decodeFromVideoElement=function(e){var r=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideo(r)},t.prototype.decodeFromVideoElementContinuously=function(e,r){var n=this._decodeFromVideoElementSetup(e);return this._decodeOnLoadVideoContinuously(n,r)},t.prototype._decodeFromVideoElementSetup=function(e){if(!e)throw new Xt("A video element must be provided.");this.reset();var r=this.prepareVideoElement(e);return this.videoElement=r,r},t.prototype.decodeFromImageUrl=function(e){if(!e)throw new Xt("An URL must be provided.");this.reset();var r=this.prepareImageElement();this.imageElement=r;var n=this._decodeOnLoadImage(r);return r.src=e,n},t.prototype.decodeFromVideoUrl=function(e){if(!e)throw new Xt("An URL must be provided.");this.reset();var r=this.prepareVideoElement(),n=this.decodeFromVideoElement(r);return r.src=e,n},t.prototype.decodeFromVideoUrlContinuously=function(e,r){if(!e)throw new Xt("An URL must be provided.");this.reset();var n=this.prepareVideoElement(),o=this.decodeFromVideoElementContinuously(n,r);return n.src=e,o},t.prototype._decodeOnLoadImage=function(e){var r=this;return new Promise(function(n,o){r.imageLoadedListener=function(){return r.decodeOnce(e,!1,!0).then(n,o)},e.addEventListener("load",r.imageLoadedListener)})},t.prototype._decodeOnLoadVideo=function(e){return en(this,void 0,void 0,function(){return tn(this,function(r){switch(r.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return r.sent(),[4,this.decodeOnce(e)];case 2:return[2,r.sent()]}})})},t.prototype._decodeOnLoadVideoContinuously=function(e,r){return en(this,void 0,void 0,function(){return tn(this,function(n){switch(n.label){case 0:return[4,this.playVideoOnLoadAsync(e)];case 1:return n.sent(),this.decodeContinuously(e,r),[2]}})})},t.prototype.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.prototype.prepareImageElement=function(e){var r;return typeof e>"u"&&(r=document.createElement("img"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"img")),e instanceof HTMLImageElement&&(r=e),r},t.prototype.prepareVideoElement=function(e){var r;return!e&&typeof document<"u"&&(r=document.createElement("video"),r.width=200,r.height=200),typeof e=="string"&&(r=this.getMediaElement(e,"video")),e instanceof HTMLVideoElement&&(r=e),r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.prototype.decodeOnce=function(e,r,n){var o=this;r===void 0&&(r=!0),n===void 0&&(n=!0),this._stopAsyncDecode=!1;var a=function(u,s){if(o._stopAsyncDecode){s(new L("Video stream has ended before any code could be detected.")),o._stopAsyncDecode=void 0;return}try{var l=o.decode(e);u(l)}catch(d){var i=r&&d instanceof L,c=d instanceof nt||d instanceof K,f=c&&n;if(i||f)return setTimeout(a,o._timeBetweenDecodingAttempts,u,s);s(d)}};return new Promise(function(u,s){return a(u,s)})},t.prototype.decodeContinuously=function(e,r){var n=this;this._stopContinuousDecode=!1;var o=function(){if(n._stopContinuousDecode){n._stopContinuousDecode=void 0;return}try{var a=n.decode(e);r(a,null),setTimeout(o,n.timeBetweenScansMillis)}catch(l){r(null,l);var u=l instanceof nt||l instanceof K,s=l instanceof L;(u||s)&&setTimeout(o,n._timeBetweenDecodingAttempts)}};o()},t.prototype.decode=function(e){var r=this.createBinaryBitmap(e);return this.decodeBitmap(r)},t.prototype.createBinaryBitmap=function(e){var r=this.getCaptureCanvasContext(e),n=!1;e instanceof HTMLVideoElement?(this.drawFrameOnCanvas(e),n=!0):this.drawImageOnCanvas(e);var o=this.getCaptureCanvas(e),a=new ox(o,n),u=new dl(a);return new fl(u)},t.prototype.getCaptureCanvasContext=function(e){if(!this.captureCanvasContext){var r=this.getCaptureCanvas(e),n=void 0;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}this.captureCanvasContext=n}return this.captureCanvasContext},t.prototype.getCaptureCanvas=function(e){if(!this.captureCanvas){var r=this.createCaptureCanvas(e);this.captureCanvas=r}return this.captureCanvas},t.prototype.drawFrameOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.videoWidth,sHeight:e.videoHeight,dx:0,dy:0,dWidth:e.videoWidth,dHeight:e.videoHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.drawImageOnCanvas=function(e,r,n){r===void 0&&(r={sx:0,sy:0,sWidth:e.naturalWidth,sHeight:e.naturalHeight,dx:0,dy:0,dWidth:e.naturalWidth,dHeight:e.naturalHeight}),n===void 0&&(n=this.captureCanvasContext),n.drawImage(e,r.sx,r.sy,r.sWidth,r.sHeight,r.dx,r.dy,r.dWidth,r.dHeight)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this._hints)},t.prototype.createCaptureCanvas=function(e){if(typeof document>"u")return this._destroyCaptureCanvas(),null;var r=document.createElement("canvas"),n,o;return typeof e<"u"&&(e instanceof HTMLVideoElement?(n=e.videoWidth,o=e.videoHeight):e instanceof HTMLImageElement&&(n=e.naturalWidth||e.width,o=e.naturalHeight||e.height)),r.style.width=n+"px",r.style.height=o+"px",r.width=n,r.height=o,r},t.prototype.stopStreams=function(){this.stream&&(this.stream.getVideoTracks().forEach(function(e){return e.stop()}),this.stream=void 0),this._stopAsyncDecode===!1&&this.stopAsyncDecode(),this._stopContinuousDecode===!1&&this.stopContinuousDecode()},t.prototype.reset=function(){this.stopStreams(),this._destroyVideoElement(),this._destroyImageElement(),this._destroyCaptureCanvas()},t.prototype._destroyVideoElement=function(){this.videoElement&&(typeof this.videoEndedListener<"u"&&this.videoElement.removeEventListener("ended",this.videoEndedListener),typeof this.videoPlayingEventListener<"u"&&this.videoElement.removeEventListener("playing",this.videoPlayingEventListener),typeof this.videoCanPlayListener<"u"&&this.videoElement.removeEventListener("loadedmetadata",this.videoCanPlayListener),this.cleanVideoSource(this.videoElement),this.videoElement=void 0)},t.prototype._destroyImageElement=function(){this.imageElement&&(this.imageLoadedListener!==void 0&&this.imageElement.removeEventListener("load",this.imageLoadedListener),this.imageElement.src=void 0,this.imageElement.removeAttribute("src"),this.imageElement=void 0)},t.prototype._destroyCaptureCanvas=function(){this.captureCanvasContext=void 0,this.captureCanvas=void 0},t.prototype.addVideoSource=function(e,r){try{e.srcObject=r}catch{e.src=URL.createObjectURL(r)}},t.prototype.cleanVideoSource=function(e){try{e.srcObject=null}catch{e.src=""}this.videoElement.removeAttribute("src")},t}();var TL=function(){function t(e,r,n,o,a,u){n===void 0&&(n=r==null?0:8*r.length),u===void 0&&(u=Pe.currentTimeMillis()),this.text=e,this.rawBytes=r,this.numBits=n,this.resultPoints=o,this.format=a,this.timestamp=u,this.text=e,this.rawBytes=r,n==null?this.numBits=r==null?0:8*r.length:this.numBits=n,this.resultPoints=o,this.format=a,this.resultMetadata=null,u==null?this.timestamp=Pe.currentTimeMillis():this.timestamp=u}return t.prototype.getText=function(){return this.text},t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.getBarcodeFormat=function(){return this.format},t.prototype.getResultMetadata=function(){return this.resultMetadata},t.prototype.putMetadata=function(e,r){this.resultMetadata===null&&(this.resultMetadata=new Map),this.resultMetadata.set(e,r)},t.prototype.putAllMetadata=function(e){e!==null&&(this.resultMetadata===null?this.resultMetadata=e:this.resultMetadata=new Map(e))},t.prototype.addResultPoints=function(e){var r=this.resultPoints;if(r===null)this.resultPoints=e;else if(e!==null&&e.length>0){var n=new Array(r.length+e.length);Pe.arraycopy(r,0,n,0,r.length),Pe.arraycopy(e,0,n,r.length,e.length),this.resultPoints=n}},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.toString=function(){return this.text},t}(),rt=TL;var sx=function(t){return t[t.AZTEC=0]="AZTEC",t[t.CODABAR=1]="CODABAR",t[t.CODE_39=2]="CODE_39",t[t.CODE_93=3]="CODE_93",t[t.CODE_128=4]="CODE_128",t[t.DATA_MATRIX=5]="DATA_MATRIX",t[t.EAN_8=6]="EAN_8",t[t.EAN_13=7]="EAN_13",t[t.ITF=8]="ITF",t[t.MAXICODE=9]="MAXICODE",t[t.PDF_417=10]="PDF_417",t[t.QR_CODE=11]="QR_CODE",t[t.RSS_14=12]="RSS_14",t[t.RSS_EXPANDED=13]="RSS_EXPANDED",t[t.UPC_A=14]="UPC_A",t[t.UPC_E=15]="UPC_E",t[t.UPC_EAN_EXTENSION=16]="UPC_EAN_EXTENSION",t}(sx||{}),ae=sx;var ux=function(t){return t[t.OTHER=0]="OTHER",t[t.ORIENTATION=1]="ORIENTATION",t[t.BYTE_SEGMENTS=2]="BYTE_SEGMENTS",t[t.ERROR_CORRECTION_LEVEL=3]="ERROR_CORRECTION_LEVEL",t[t.ISSUE_NUMBER=4]="ISSUE_NUMBER",t[t.SUGGESTED_PRICE=5]="SUGGESTED_PRICE",t[t.POSSIBLE_COUNTRY=6]="POSSIBLE_COUNTRY",t[t.UPC_EAN_EXTENSION=7]="UPC_EAN_EXTENSION",t[t.PDF417_EXTRA_METADATA=8]="PDF417_EXTRA_METADATA",t[t.STRUCTURED_APPEND_SEQUENCE=9]="STRUCTURED_APPEND_SEQUENCE",t[t.STRUCTURED_APPEND_PARITY=10]="STRUCTURED_APPEND_PARITY",t}(ux||{}),Lt=ux;var IL=function(){function t(e,r,n,o,a,u){a===void 0&&(a=-1),u===void 0&&(u=-1),this.rawBytes=e,this.text=r,this.byteSegments=n,this.ecLevel=o,this.structuredAppendSequenceNumber=a,this.structuredAppendParity=u,this.numBits=e==null?0:8*e.length}return t.prototype.getRawBytes=function(){return this.rawBytes},t.prototype.getNumBits=function(){return this.numBits},t.prototype.setNumBits=function(e){this.numBits=e},t.prototype.getText=function(){return this.text},t.prototype.getByteSegments=function(){return this.byteSegments},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getErrorsCorrected=function(){return this.errorsCorrected},t.prototype.setErrorsCorrected=function(e){this.errorsCorrected=e},t.prototype.getErasures=function(){return this.erasures},t.prototype.setErasures=function(e){this.erasures=e},t.prototype.getOther=function(){return this.other},t.prototype.setOther=function(e){this.other=e},t.prototype.hasStructuredAppend=function(){return this.structuredAppendParity>=0&&this.structuredAppendSequenceNumber>=0},t.prototype.getStructuredAppendParity=function(){return this.structuredAppendParity},t.prototype.getStructuredAppendSequenceNumber=function(){return this.structuredAppendSequenceNumber},t}(),no=IL;var AL=function(){function t(){}return t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.addOrSubtract=function(e,r){return e^r},t}(),xa=AL;var SL=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var o=1;o<n&&r[o]===0;)o++;o===n?this.coefficients=Int32Array.from([0]):(this.coefficients=new Int32Array(n-o),Pe.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){if(e===0)return this.getCoefficient(0);var r=this.coefficients,n;if(e===1){n=0;for(var o=0,a=r.length;o!==a;o++){var u=r[o];n=xa.addOrSubtract(n,u)}return n}n=r[0];for(var s=r.length,l=this.field,o=1;o<s;o++)n=xa.addOrSubtract(l.multiply(e,n),r[o]);return n},t.prototype.addOrSubtract=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var a=new Int32Array(n.length),u=n.length-r.length;Pe.arraycopy(n,0,a,0,u);for(var s=u;s<n.length;s++)a[s]=xa.addOrSubtract(r[s-u],n[s]);return new t(this.field,a)},t.prototype.multiply=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(this.isZero()||e.isZero())return this.field.getZero();for(var r=this.coefficients,n=r.length,o=e.coefficients,a=o.length,u=new Int32Array(n+a-1),s=this.field,l=0;l<n;l++)for(var i=r[l],c=0;c<a;c++)u[l+c]=xa.addOrSubtract(u[l+c],s.multiply(i,o[c]));return new t(s,u)},t.prototype.multiplyScalar=function(e){if(e===0)return this.field.getZero();if(e===1)return this;for(var r=this.coefficients.length,n=this.field,o=new Int32Array(r),a=this.coefficients,u=0;u<r;u++)o[u]=n.multiply(a[u],e);return new t(n,o)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return this.field.getZero();for(var n=this.coefficients,o=n.length,a=new Int32Array(o+e),u=this.field,s=0;s<o;s++)a[s]=u.multiply(n[s],r);return new t(u,a)},t.prototype.divide=function(e){if(!this.field.equals(e.field))throw new re("GenericGFPolys do not have same GenericGF field");if(e.isZero())throw new re("Divide by 0");for(var r=this.field,n=r.getZero(),o=this,a=e.getCoefficient(e.getDegree()),u=r.inverse(a);o.getDegree()>=e.getDegree()&&!o.isZero();){var s=o.getDegree()-e.getDegree(),l=r.multiply(o.getCoefficient(o.getDegree()),u),i=e.multiplyByMonomial(s,l),c=r.buildMonomial(s,l);n=n.addOrSubtract(c),o=o.addOrSubtract(i)}return[n,o]},t.prototype.toString=function(){for(var e="",r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);if(n!==0){if(n<0?(e+=" - ",n=-n):e.length>0&&(e+=" + "),r===0||n!==1){var o=this.field.log(n);o===0?e+="1":o===1?e+="a":(e+="a^",e+=o)}r!==0&&(r===1?e+="x":(e+="x^",e+=r))}}return e},t}(),Fn=SL;var DL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),CL=function(t){DL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ArithmeticException",e}(Tt),hl=CL;var OL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),PL=function(t){OL(e,t);function e(r,n,o){var a=t.call(this)||this;a.primitive=r,a.size=n,a.generatorBase=o;for(var u=new Int32Array(n),s=1,l=0;l<n;l++)u[l]=s,s*=2,s>=n&&(s^=r,s&=n-1);a.expTable=u;for(var i=new Int32Array(n),l=0;l<n-1;l++)i[u[l]]=l;return a.logTable=i,a.zero=new Fn(a,Int32Array.from([0])),a.one=new Fn(a,Int32Array.from([1])),a}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var o=new Int32Array(r+1);return o[0]=n,new Fn(this,o)},e.prototype.inverse=function(r){if(r===0)throw new hl;return this.expTable[this.size-this.logTable[r]-1]},e.prototype.multiply=function(r,n){return r===0||n===0?0:this.expTable[(this.logTable[r]+this.logTable[n])%(this.size-1)]},e.prototype.getSize=function(){return this.size},e.prototype.getGeneratorBase=function(){return this.generatorBase},e.prototype.toString=function(){return"GF(0x"+ge.toHexString(this.primitive)+","+this.size+")"},e.prototype.equals=function(r){return r===this},e.AZTEC_DATA_12=new e(4201,4096,1),e.AZTEC_DATA_10=new e(1033,1024,1),e.AZTEC_DATA_6=new e(67,64,1),e.AZTEC_PARAM=new e(19,16,1),e.QR_CODE_FIELD_256=new e(285,256,0),e.DATA_MATRIX_FIELD_256=new e(301,256,1),e.AZTEC_DATA_8=e.DATA_MATRIX_FIELD_256,e.MAXICODE_FIELD_64=e.AZTEC_DATA_6,e}(xa),nr=PL;var ML=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),NL=function(t){ML(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReedSolomonException",e}(Tt),bs=NL;var RL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),FL=function(t){RL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="IllegalStateException",e}(Tt),hr=FL;var kL=function(){function t(e){this.field=e}return t.prototype.decode=function(e,r){for(var n=this.field,o=new Fn(n,e),a=new Int32Array(r),u=!0,s=0;s<r;s++){var l=o.evaluateAt(n.exp(s+n.getGeneratorBase()));a[a.length-1-s]=l,l!==0&&(u=!1)}if(!u)for(var i=new Fn(n,a),c=this.runEuclideanAlgorithm(n.buildMonomial(r,1),i,r),f=c[0],d=c[1],h=this.findErrorLocations(f),p=this.findErrorMagnitudes(d,h),s=0;s<h.length;s++){var m=e.length-1-n.log(h[s]);if(m<0)throw new bs("Bad error location");e[m]=nr.addOrSubtract(e[m],p[s])}},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var o=e;e=r,r=o}for(var a=this.field,u=e,s=r,l=a.getZero(),i=a.getOne();s.getDegree()>=(n/2|0);){var c=u,f=l;if(u=s,l=i,u.isZero())throw new bs("r_{i-1} was zero");s=c;for(var d=a.getZero(),h=u.getCoefficient(u.getDegree()),p=a.inverse(h);s.getDegree()>=u.getDegree()&&!s.isZero();){var m=s.getDegree()-u.getDegree(),v=a.multiply(s.getCoefficient(s.getDegree()),p);d=d.addOrSubtract(a.buildMonomial(m,v)),s=s.addOrSubtract(u.multiplyByMonomial(m,v))}if(i=d.multiply(l).addOrSubtract(f),s.getDegree()>=u.getDegree())throw new hr("Division algorithm failed to reduce polynomial?")}var x=i.getCoefficient(0);if(x===0)throw new bs("sigmaTilde(0) was zero");var y=a.inverse(x),_=i.multiplyScalar(y),I=s.multiplyScalar(y);return[_,I]},t.prototype.findErrorLocations=function(e){var r=e.getDegree();if(r===1)return Int32Array.from([e.getCoefficient(1)]);for(var n=new Int32Array(r),o=0,a=this.field,u=1;u<a.getSize()&&o<r;u++)e.evaluateAt(u)===0&&(n[o]=a.inverse(u),o++);if(o!==r)throw new bs("Error locator degree does not match number of roots");return n},t.prototype.findErrorMagnitudes=function(e,r){for(var n=r.length,o=new Int32Array(n),a=this.field,u=0;u<n;u++){for(var s=a.inverse(r[u]),l=1,i=0;i<n;i++)if(u!==i){var c=a.multiply(r[i],s),f=c&1?c&-2:c|1;l=a.multiply(l,f)}o[u]=a.multiply(e.evaluateAt(s),a.inverse(l)),a.getGeneratorBase()!==0&&(o[u]=a.multiply(o[u],s))}return o},t}(),io=kL;var Gr=function(t){return t[t.UPPER=0]="UPPER",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.DIGIT=3]="DIGIT",t[t.PUNCT=4]="PUNCT",t[t.BINARY=5]="BINARY",t}(Gr||{}),LL=function(){function t(){}return t.prototype.decode=function(e){this.ddata=e;var r=e.getBits(),n=this.extractBits(r),o=this.correctBits(n),a=t.convertBoolArrayToByteArray(o),u=t.getEncodedData(o),s=new no(a,u,null,null);return s.setNumBits(o.length),s},t.highLevelDecode=function(e){return this.getEncodedData(e)},t.getEncodedData=function(e){for(var r=e.length,n=Gr.UPPER,o=Gr.UPPER,a="",u=0;u<r;)if(o===Gr.BINARY){if(r-u<5)break;var s=t.readCode(e,u,5);if(u+=5,s===0){if(r-u<11)break;s=t.readCode(e,u,11)+31,u+=11}for(var l=0;l<s;l++){if(r-u<8){u=r;break}var i=t.readCode(e,u,8);a+=_e.castAsNonUtf8Char(i),u+=8}o=n}else{var c=o===Gr.DIGIT?4:5;if(r-u<c)break;var i=t.readCode(e,u,c);u+=c;var f=t.getCharacter(o,i);f.startsWith("CTRL_")?(n=o,o=t.getTable(f.charAt(5)),f.charAt(6)==="L"&&(n=o)):(a+=f,o=n)}return a},t.getTable=function(e){switch(e){case"L":return Gr.LOWER;case"P":return Gr.PUNCT;case"M":return Gr.MIXED;case"D":return Gr.DIGIT;case"B":return Gr.BINARY;case"U":default:return Gr.UPPER}},t.getCharacter=function(e,r){switch(e){case Gr.UPPER:return t.UPPER_TABLE[r];case Gr.LOWER:return t.LOWER_TABLE[r];case Gr.MIXED:return t.MIXED_TABLE[r];case Gr.PUNCT:return t.PUNCT_TABLE[r];case Gr.DIGIT:return t.DIGIT_TABLE[r];default:throw new hr("Bad table")}},t.prototype.correctBits=function(e){var r,n;this.ddata.getNbLayers()<=2?(n=6,r=nr.AZTEC_DATA_6):this.ddata.getNbLayers()<=8?(n=8,r=nr.AZTEC_DATA_8):this.ddata.getNbLayers()<=22?(n=10,r=nr.AZTEC_DATA_10):(n=12,r=nr.AZTEC_DATA_12);var o=this.ddata.getNbDatablocks(),a=e.length/n;if(a<o)throw new K;for(var u=e.length%n,s=new Int32Array(a),l=0;l<a;l++,u+=n)s[l]=t.readCode(e,u,n);try{var i=new io(r);i.decode(s,a-o)}catch(v){throw new K(v)}for(var c=(1<<n)-1,f=0,l=0;l<o;l++){var d=s[l];if(d===0||d===c)throw new K;(d===1||d===c-1)&&f++}for(var h=new Array(o*n-f),p=0,l=0;l<o;l++){var d=s[l];if(d===1||d===c-1)h.fill(d>1,p,p+n-1),p+=n-1;else for(var m=n-1;m>=0;--m)h[p++]=(d&1<<m)!==0}return h},t.prototype.extractBits=function(e){var r=this.ddata.isCompact(),n=this.ddata.getNbLayers(),o=(r?11:14)+n*4,a=new Int32Array(o),u=new Array(this.totalBitsInLayer(n,r));if(r)for(var s=0;s<a.length;s++)a[s]=s;else for(var l=o+1+2*ge.truncDivision(ge.truncDivision(o,2)-1,15),i=o/2,c=ge.truncDivision(l,2),s=0;s<i;s++){var f=s+ge.truncDivision(s,15);a[i-s-1]=c-f-1,a[i+s]=c+f+1}for(var s=0,d=0;s<n;s++){for(var h=(n-s)*4+(r?9:12),p=s*2,m=o-1-p,v=0;v<h;v++)for(var x=v*2,y=0;y<2;y++)u[d+x+y]=e.get(a[p+y],a[p+v]),u[d+2*h+x+y]=e.get(a[p+v],a[m-y]),u[d+4*h+x+y]=e.get(a[m-y],a[m-v]),u[d+6*h+x+y]=e.get(a[m-v],a[p+y]);d+=h*8}return u},t.readCode=function(e,r,n){for(var o=0,a=r;a<r+n;a++)o<<=1,e[a]&&(o|=1);return o},t.readByte=function(e,r){var n=e.length-r;return n>=8?t.readCode(e,r,8):t.readCode(e,r,n)<<8-n},t.convertBoolArrayToByteArray=function(e){for(var r=new Uint8Array((e.length+7)/8),n=0;n<r.length;n++)r[n]=t.readByte(e,8*n);return r},t.prototype.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.UPPER_TABLE=["CTRL_PS"," ","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","CTRL_LL","CTRL_ML","CTRL_DL","CTRL_BS"],t.LOWER_TABLE=["CTRL_PS"," ","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","CTRL_US","CTRL_ML","CTRL_DL","CTRL_BS"],t.MIXED_TABLE=["CTRL_PS"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F","CTRL_LL","CTRL_UL","CTRL_PL","CTRL_BS"],t.PUNCT_TABLE=["","\r",`\r
`,". ",", ",": ","!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}","CTRL_UL"],t.DIGIT_TABLE=["CTRL_PS"," ","0","1","2","3","4","5","6","7","8","9",",",".","CTRL_UL","CTRL_US"],t}(),Ff=LL;var BL=function(){function t(){}return t.round=function(e){return isNaN(e)?0:e<=Number.MIN_SAFE_INTEGER?Number.MIN_SAFE_INTEGER:e>=Number.MAX_SAFE_INTEGER?Number.MAX_SAFE_INTEGER:e+(e<0?-.5:.5)|0},t.distance=function(e,r,n,o){var a=e-n,u=r-o;return Math.sqrt(a*a+u*u)},t.sum=function(e){for(var r=0,n=0,o=e.length;n!==o;n++){var a=e[n];r+=a}return r},t}(),Ne=BL;var $L=function(){function t(){}return t.floatToIntBits=function(e){return e},t.MAX_VALUE=Number.MAX_SAFE_INTEGER,t}(),pl=$L;var VL=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t.prototype.equals=function(e){if(e instanceof t){var r=e;return this.x===r.x&&this.y===r.y}return!1},t.prototype.hashCode=function(){return 31*pl.floatToIntBits(this.x)+pl.floatToIntBits(this.y)},t.prototype.toString=function(){return"("+this.x+","+this.y+")"},t.orderBestPatterns=function(e){var r=this.distance(e[0],e[1]),n=this.distance(e[1],e[2]),o=this.distance(e[0],e[2]),a,u,s;if(n>=r&&n>=o?(u=e[0],a=e[1],s=e[2]):o>=n&&o>=r?(u=e[1],a=e[0],s=e[2]):(u=e[2],a=e[0],s=e[1]),this.crossProductZ(a,u,s)<0){var l=a;a=s,s=l}e[0]=a,e[1]=u,e[2]=s},t.distance=function(e,r){return Ne.distance(e.x,e.y,r.x,r.y)},t.crossProductZ=function(e,r,n){var o=r.x,a=r.y;return(n.x-o)*(e.y-a)-(n.y-a)*(e.x-o)},t}(),se=VL;var jL=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),_a=jL;var UL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),HL=function(t){UL(e,t);function e(r,n,o,a,u){var s=t.call(this,r,n)||this;return s.compact=o,s.nbDatablocks=a,s.nbLayers=u,s}return e.prototype.getNbLayers=function(){return this.nbLayers},e.prototype.getNbDatablocks=function(){return this.nbDatablocks},e.prototype.isCompact=function(){return this.compact},e}(_a),wg=HL;var zL=function(){function t(e,r,n,o){this.image=e,this.height=e.getHeight(),this.width=e.getWidth(),r==null&&(r=t.INIT_SIZE),n==null&&(n=e.getWidth()/2|0),o==null&&(o=e.getHeight()/2|0);var a=r/2|0;if(this.leftInit=n-a,this.rightInit=n+a,this.upInit=o-a,this.downInit=o+a,this.upInit<0||this.leftInit<0||this.downInit>=this.height||this.rightInit>=this.width)throw new L}return t.prototype.detect=function(){for(var e=this.leftInit,r=this.rightInit,n=this.upInit,o=this.downInit,a=!1,u=!0,s=!1,l=!1,i=!1,c=!1,f=!1,d=this.width,h=this.height;u;){u=!1;for(var p=!0;(p||!l)&&r<d;)p=this.containsBlackPoint(n,o,r,!1),p?(r++,u=!0,l=!0):l||r++;if(r>=d){a=!0;break}for(var m=!0;(m||!i)&&o<h;)m=this.containsBlackPoint(e,r,o,!0),m?(o++,u=!0,i=!0):i||o++;if(o>=h){a=!0;break}for(var v=!0;(v||!c)&&e>=0;)v=this.containsBlackPoint(n,o,e,!1),v?(e--,u=!0,c=!0):c||e--;if(e<0){a=!0;break}for(var x=!0;(x||!f)&&n>=0;)x=this.containsBlackPoint(e,r,n,!0),x?(n--,u=!0,f=!0):f||n--;if(n<0){a=!0;break}u&&(s=!0)}if(!a&&s){for(var y=r-e,_=null,I=1;_===null&&I<y;I++)_=this.getBlackPointOnSegment(e,o-I,e+I,o);if(_==null)throw new L;for(var C=null,I=1;C===null&&I<y;I++)C=this.getBlackPointOnSegment(e,n+I,e+I,n);if(C==null)throw new L;for(var V=null,I=1;V===null&&I<y;I++)V=this.getBlackPointOnSegment(r,n+I,r-I,n);if(V==null)throw new L;for(var z=null,I=1;z===null&&I<y;I++)z=this.getBlackPointOnSegment(r,o-I,r-I,o);if(z==null)throw new L;return this.centerEdges(z,_,V,C)}else throw new L},t.prototype.getBlackPointOnSegment=function(e,r,n,o){for(var a=Ne.round(Ne.distance(e,r,n,o)),u=(n-e)/a,s=(o-r)/a,l=this.image,i=0;i<a;i++){var c=Ne.round(e+i*u),f=Ne.round(r+i*s);if(l.get(c,f))return new se(c,f)}return null},t.prototype.centerEdges=function(e,r,n,o){var a=e.getX(),u=e.getY(),s=r.getX(),l=r.getY(),i=n.getX(),c=n.getY(),f=o.getX(),d=o.getY(),h=t.CORR;return a<this.width/2?[new se(f-h,d+h),new se(s+h,l+h),new se(i-h,c-h),new se(a+h,u-h)]:[new se(f+h,d+h),new se(s+h,l-h),new se(i-h,c+h),new se(a-h,u-h)]},t.prototype.containsBlackPoint=function(e,r,n,o){var a=this.image;if(o){for(var u=e;u<=r;u++)if(a.get(u,n))return!0}else for(var s=e;s<=r;s++)if(a.get(n,s))return!0;return!1},t.INIT_SIZE=10,t.CORR=1,t}(),ws=zL;var GL=function(){function t(){}return t.checkAndNudgePoints=function(e,r){for(var n=e.getWidth(),o=e.getHeight(),a=!0,u=0;u<r.length&&a;u+=2){var s=Math.floor(r[u]),l=Math.floor(r[u+1]);if(s<-1||s>n||l<-1||l>o)throw new L;a=!1,s===-1?(r[u]=0,a=!0):s===n&&(r[u]=n-1,a=!0),l===-1?(r[u+1]=0,a=!0):l===o&&(r[u+1]=o-1,a=!0)}a=!0;for(var u=r.length-2;u>=0&&a;u-=2){var s=Math.floor(r[u]),l=Math.floor(r[u+1]);if(s<-1||s>n||l<-1||l>o)throw new L;a=!1,s===-1?(r[u]=0,a=!0):s===n&&(r[u]=n-1,a=!0),l===-1?(r[u+1]=0,a=!0):l===o&&(r[u+1]=o-1,a=!0)}},t}(),kf=GL;var WL=function(){function t(e,r,n,o,a,u,s,l,i){this.a11=e,this.a21=r,this.a31=n,this.a12=o,this.a22=a,this.a32=u,this.a13=s,this.a23=l,this.a33=i}return t.quadrilateralToQuadrilateral=function(e,r,n,o,a,u,s,l,i,c,f,d,h,p,m,v){var x=t.quadrilateralToSquare(e,r,n,o,a,u,s,l),y=t.squareToQuadrilateral(i,c,f,d,h,p,m,v);return y.times(x)},t.prototype.transformPoints=function(e){for(var r=e.length,n=this.a11,o=this.a12,a=this.a13,u=this.a21,s=this.a22,l=this.a23,i=this.a31,c=this.a32,f=this.a33,d=0;d<r;d+=2){var h=e[d],p=e[d+1],m=a*h+l*p+f;e[d]=(n*h+u*p+i)/m,e[d+1]=(o*h+s*p+c)/m}},t.prototype.transformPointsWithValues=function(e,r){for(var n=this.a11,o=this.a12,a=this.a13,u=this.a21,s=this.a22,l=this.a23,i=this.a31,c=this.a32,f=this.a33,d=e.length,h=0;h<d;h++){var p=e[h],m=r[h],v=a*p+l*m+f;e[h]=(n*p+u*m+i)/v,r[h]=(o*p+s*m+c)/v}},t.squareToQuadrilateral=function(e,r,n,o,a,u,s,l){var i=e-n+a-s,c=r-o+u-l;if(i===0&&c===0)return new t(n-e,a-n,e,o-r,u-o,r,0,0,1);var f=n-a,d=s-a,h=o-u,p=l-u,m=f*p-d*h,v=(i*p-d*c)/m,x=(f*c-i*h)/m;return new t(n-e+v*n,s-e+x*s,e,o-r+v*o,l-r+x*l,r,v,x,1)},t.quadrilateralToSquare=function(e,r,n,o,a,u,s,l){return t.squareToQuadrilateral(e,r,n,o,a,u,s,l).buildAdjoint()},t.prototype.buildAdjoint=function(){return new t(this.a22*this.a33-this.a23*this.a32,this.a23*this.a31-this.a21*this.a33,this.a21*this.a32-this.a22*this.a31,this.a13*this.a32-this.a12*this.a33,this.a11*this.a33-this.a13*this.a31,this.a12*this.a31-this.a11*this.a32,this.a12*this.a23-this.a13*this.a22,this.a13*this.a21-this.a11*this.a23,this.a11*this.a22-this.a12*this.a21)},t.prototype.times=function(e){return new t(this.a11*e.a11+this.a21*e.a12+this.a31*e.a13,this.a11*e.a21+this.a21*e.a22+this.a31*e.a23,this.a11*e.a31+this.a21*e.a32+this.a31*e.a33,this.a12*e.a11+this.a22*e.a12+this.a32*e.a13,this.a12*e.a21+this.a22*e.a22+this.a32*e.a23,this.a12*e.a31+this.a22*e.a32+this.a32*e.a33,this.a13*e.a11+this.a23*e.a12+this.a33*e.a13,this.a13*e.a21+this.a23*e.a22+this.a33*e.a23,this.a13*e.a31+this.a23*e.a32+this.a33*e.a33)},t}(),gl=WL;var qL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),XL=function(t){qL(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.sampleGrid=function(r,n,o,a,u,s,l,i,c,f,d,h,p,m,v,x,y,_,I){var C=gl.quadrilateralToQuadrilateral(a,u,s,l,i,c,f,d,h,p,m,v,x,y,_,I);return this.sampleGridWithTransform(r,n,o,C)},e.prototype.sampleGridWithTransform=function(r,n,o,a){if(n<=0||o<=0)throw new L;for(var u=new Nt(n,o),s=new Float32Array(2*n),l=0;l<o;l++){for(var i=s.length,c=l+.5,f=0;f<i;f+=2)s[f]=f/2+.5,s[f+1]=c;a.transformPoints(s),kf.checkAndNudgePoints(r,s);try{for(var f=0;f<i;f+=2)r.get(Math.floor(s[f]),Math.floor(s[f+1]))&&u.set(f/2,l)}catch{throw new L}}return u},e}(kf),xg=XL;var YL=function(){function t(){}return t.setGridSampler=function(e){t.gridSampler=e},t.getInstance=function(){return t.gridSampler},t.gridSampler=new xg,t}(),Ea=YL;var rn=function(){function t(e,r){this.x=e,this.y=r}return t.prototype.toResultPoint=function(){return new se(this.getX(),this.getY())},t.prototype.getX=function(){return this.x},t.prototype.getY=function(){return this.y},t}();var ZL=function(){function t(e){this.EXPECTED_CORNER_BITS=new Int32Array([3808,476,2107,1799]),this.image=e}return t.prototype.detect=function(){return this.detectMirror(!1)},t.prototype.detectMirror=function(e){var r=this.getMatrixCenter(),n=this.getBullsEyeCorners(r);if(e){var o=n[0];n[0]=n[2],n[2]=o}this.extractParameters(n);var a=this.sampleGrid(this.image,n[this.shift%4],n[(this.shift+1)%4],n[(this.shift+2)%4],n[(this.shift+3)%4]),u=this.getMatrixCornerPoints(n);return new wg(a,u,this.compact,this.nbDataBlocks,this.nbLayers)},t.prototype.extractParameters=function(e){if(!this.isValidPoint(e[0])||!this.isValidPoint(e[1])||!this.isValidPoint(e[2])||!this.isValidPoint(e[3]))throw new L;var r=2*this.nbCenterLayers,n=new Int32Array([this.sampleLine(e[0],e[1],r),this.sampleLine(e[1],e[2],r),this.sampleLine(e[2],e[3],r),this.sampleLine(e[3],e[0],r)]);this.shift=this.getRotation(n,r);for(var o=0,a=0;a<4;a++){var u=n[(this.shift+a)%4];this.compact?(o<<=7,o+=u>>1&127):(o<<=10,o+=(u>>2&992)+(u>>1&31))}var s=this.getCorrectedParameterData(o,this.compact);this.compact?(this.nbLayers=(s>>6)+1,this.nbDataBlocks=(s&63)+1):(this.nbLayers=(s>>11)+1,this.nbDataBlocks=(s&2047)+1)},t.prototype.getRotation=function(e,r){var n=0;e.forEach(function(a,u,s){var l=(a>>r-2<<1)+(a&1);n=(n<<3)+l}),n=((n&1)<<11)+(n>>1);for(var o=0;o<4;o++)if(ge.bitCount(n^this.EXPECTED_CORNER_BITS[o])<=2)return o;throw new L},t.prototype.getCorrectedParameterData=function(e,r){var n,o;r?(n=7,o=2):(n=10,o=4);for(var a=n-o,u=new Int32Array(n),s=n-1;s>=0;--s)u[s]=e&15,e>>=4;try{var l=new io(nr.AZTEC_PARAM);l.decode(u,a)}catch{throw new L}for(var i=0,s=0;s<o;s++)i=(i<<4)+u[s];return i},t.prototype.getBullsEyeCorners=function(e){var r=e,n=e,o=e,a=e,u=!0;for(this.nbCenterLayers=1;this.nbCenterLayers<9;this.nbCenterLayers++){var s=this.getFirstDifferent(r,u,1,-1),l=this.getFirstDifferent(n,u,1,1),i=this.getFirstDifferent(o,u,-1,1),c=this.getFirstDifferent(a,u,-1,-1);if(this.nbCenterLayers>2){var f=this.distancePoint(c,s)*this.nbCenterLayers/(this.distancePoint(a,r)*(this.nbCenterLayers+2));if(f<.75||f>1.25||!this.isWhiteOrBlackRectangle(s,l,i,c))break}r=s,n=l,o=i,a=c,u=!u}if(this.nbCenterLayers!==5&&this.nbCenterLayers!==7)throw new L;this.compact=this.nbCenterLayers===5;var d=new se(r.getX()+.5,r.getY()-.5),h=new se(n.getX()+.5,n.getY()+.5),p=new se(o.getX()-.5,o.getY()+.5),m=new se(a.getX()-.5,a.getY()-.5);return this.expandSquare([d,h,p,m],2*this.nbCenterLayers-3,2*this.nbCenterLayers)},t.prototype.getMatrixCenter=function(){var e,r,n,o;try{var a=new ws(this.image).detect();e=a[0],r=a[1],n=a[2],o=a[3]}catch{var u=this.image.getWidth()/2,s=this.image.getHeight()/2;e=this.getFirstDifferent(new rn(u+7,s-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rn(u+7,s+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rn(u-7,s+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new rn(u-7,s-7),!1,-1,-1).toResultPoint()}var l=Ne.round((e.getX()+o.getX()+r.getX()+n.getX())/4),i=Ne.round((e.getY()+o.getY()+r.getY()+n.getY())/4);try{var a=new ws(this.image,15,l,i).detect();e=a[0],r=a[1],n=a[2],o=a[3]}catch{e=this.getFirstDifferent(new rn(l+7,i-7),!1,1,-1).toResultPoint(),r=this.getFirstDifferent(new rn(l+7,i+7),!1,1,1).toResultPoint(),n=this.getFirstDifferent(new rn(l-7,i+7),!1,-1,1).toResultPoint(),o=this.getFirstDifferent(new rn(l-7,i-7),!1,-1,-1).toResultPoint()}return l=Ne.round((e.getX()+o.getX()+r.getX()+n.getX())/4),i=Ne.round((e.getY()+o.getY()+r.getY()+n.getY())/4),new rn(l,i)},t.prototype.getMatrixCornerPoints=function(e){return this.expandSquare(e,2*this.nbCenterLayers,this.getDimension())},t.prototype.sampleGrid=function(e,r,n,o,a){var u=Ea.getInstance(),s=this.getDimension(),l=s/2-this.nbCenterLayers,i=s/2+this.nbCenterLayers;return u.sampleGrid(e,s,s,l,l,i,l,i,i,l,i,r.getX(),r.getY(),n.getX(),n.getY(),o.getX(),o.getY(),a.getX(),a.getY())},t.prototype.sampleLine=function(e,r,n){for(var o=0,a=this.distanceResultPoint(e,r),u=a/n,s=e.getX(),l=e.getY(),i=u*(r.getX()-e.getX())/a,c=u*(r.getY()-e.getY())/a,f=0;f<n;f++)this.image.get(Ne.round(s+f*i),Ne.round(l+f*c))&&(o|=1<<n-f-1);return o},t.prototype.isWhiteOrBlackRectangle=function(e,r,n,o){var a=3;e=new rn(e.getX()-a,e.getY()+a),r=new rn(r.getX()-a,r.getY()-a),n=new rn(n.getX()+a,n.getY()-a),o=new rn(o.getX()+a,o.getY()+a);var u=this.getColor(o,e);if(u===0)return!1;var s=this.getColor(e,r);return s!==u||(s=this.getColor(r,n),s!==u)?!1:(s=this.getColor(n,o),s===u)},t.prototype.getColor=function(e,r){for(var n=this.distancePoint(e,r),o=(r.getX()-e.getX())/n,a=(r.getY()-e.getY())/n,u=0,s=e.getX(),l=e.getY(),i=this.image.get(e.getX(),e.getY()),c=Math.ceil(n),f=0;f<c;f++)s+=o,l+=a,this.image.get(Ne.round(s),Ne.round(l))!==i&&u++;var d=u/n;return d>.1&&d<.9?0:d<=.1===i?1:-1},t.prototype.getFirstDifferent=function(e,r,n,o){for(var a=e.getX()+n,u=e.getY()+o;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=n,u+=o;for(a-=n,u-=o;this.isValid(a,u)&&this.image.get(a,u)===r;)a+=n;for(a-=n;this.isValid(a,u)&&this.image.get(a,u)===r;)u+=o;return u-=o,new rn(a,u)},t.prototype.expandSquare=function(e,r,n){var o=n/(2*r),a=e[0].getX()-e[2].getX(),u=e[0].getY()-e[2].getY(),s=(e[0].getX()+e[2].getX())/2,l=(e[0].getY()+e[2].getY())/2,i=new se(s+o*a,l+o*u),c=new se(s-o*a,l-o*u);a=e[1].getX()-e[3].getX(),u=e[1].getY()-e[3].getY(),s=(e[1].getX()+e[3].getX())/2,l=(e[1].getY()+e[3].getY())/2;var f=new se(s+o*a,l+o*u),d=new se(s-o*a,l-o*u),h=[i,f,c,d];return h},t.prototype.isValid=function(e,r){return e>=0&&e<this.image.getWidth()&&r>0&&r<this.image.getHeight()},t.prototype.isValidPoint=function(e){var r=Ne.round(e.getX()),n=Ne.round(e.getY());return this.isValid(r,n)},t.prototype.distancePoint=function(e,r){return Ne.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.distanceResultPoint=function(e,r){return Ne.distance(e.getX(),e.getY(),r.getX(),r.getY())},t.prototype.getDimension=function(){return this.compact?4*this.nbLayers+11:this.nbLayers<=4?4*this.nbLayers+15:4*this.nbLayers+2*(ge.truncDivision(this.nbLayers-4,8)+1)+15},t}(),_g=ZL;var KL=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=null,o=new _g(e.getBlackMatrix()),a=null,u=null;try{var s=o.detectMirror(!1);a=s.getPoints(),this.reportFoundResultPoints(r,a),u=new Ff().decode(s)}catch(f){n=f}if(u==null)try{var s=o.detectMirror(!0);a=s.getPoints(),this.reportFoundResultPoints(r,a),u=new Ff().decode(s)}catch(f){throw n??f}var l=new rt(u.getText(),u.getRawBytes(),u.getNumBits(),a,ae.AZTEC,Pe.currentTimeMillis()),i=u.getByteSegments();i!=null&&l.putMetadata(Lt.BYTE_SEGMENTS,i);var c=u.getECLevel();return c!=null&&l.putMetadata(Lt.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reportFoundResultPoints=function(e,r){if(e!=null){var n=e.get(Me.NEED_RESULT_POINT_CALLBACK);n!=null&&r.forEach(function(o,a,u){n.foundPossibleResultPoint(o)})}},t.prototype.reset=function(){},t}(),To=KL;var QL=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),GK=function(t){QL(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new To,r)||this}return e}(Rn);var JL=function(){function t(){}return t.prototype.decode=function(e,r){try{return this.doDecode(e,r)}catch{var n=r&&r.get(Me.TRY_HARDER)===!0;if(n&&e.isRotateSupported()){var o=e.rotateCounterClockwise(),a=this.doDecode(o,r),u=a.getResultMetadata(),s=270;u!==null&&u.get(Lt.ORIENTATION)===!0&&(s=s+u.get(Lt.ORIENTATION)%360),a.putMetadata(Lt.ORIENTATION,s);var l=a.getResultPoints();if(l!==null)for(var i=o.getHeight(),c=0;c<l.length;c++)l[c]=new se(i-l[c].getY()-1,l[c].getX());return a}else throw new L}},t.prototype.reset=function(){},t.prototype.doDecode=function(e,r){var n=e.getWidth(),o=e.getHeight(),a=new Pt(n),u=r&&r.get(Me.TRY_HARDER)===!0,s=Math.max(1,o>>(u?8:5)),l;u?l=o:l=15;for(var i=Math.trunc(o/2),c=0;c<l;c++){var f=Math.trunc((c+1)/2),d=(c&1)===0,h=i+s*(d?f:-f);if(h<0||h>=o)break;try{a=e.getBlackRow(h,a)}catch{continue}for(var p=function(y){if(y===1&&(a.reverse(),r&&r.get(Me.NEED_RESULT_POINT_CALLBACK)===!0)){var _=new Map;r.forEach(function(V,z){return _.set(z,V)}),_.delete(Me.NEED_RESULT_POINT_CALLBACK),r=_}try{var I=m.decodeRow(h,a,r);if(y===1){I.putMetadata(Lt.ORIENTATION,180);var C=I.getResultPoints();C!==null&&(C[0]=new se(n-C[0].getX()-1,C[0].getY()),C[1]=new se(n-C[1].getX()-1,C[1].getY()))}return{value:I}}catch{}},m=this,v=0;v<2;v++){var x=p(v);if(typeof x=="object")return x.value}}throw new L},t.recordPattern=function(e,r,n){for(var o=n.length,a=0;a<o;a++)n[a]=0;var u=e.getSize();if(r>=u)throw new L;for(var s=!e.get(r),l=0,i=r;i<u;){if(e.get(i)!==s)n[l]++;else{if(++l===o)break;n[l]=1,s=!s}i++}if(!(l===o||l===o-1&&i===u))throw new L},t.recordPatternInReverse=function(e,r,n){for(var o=n.length,a=e.get(r);r>0&&o>=0;)e.get(--r)!==a&&(o--,a=!a);if(o>=0)throw new L;t.recordPattern(e,r+1,n)},t.patternMatchVariance=function(e,r,n){for(var o=e.length,a=0,u=0,s=0;s<o;s++)a+=e[s],u+=r[s];if(a<u)return Number.POSITIVE_INFINITY;var l=a/u;n*=l;for(var i=0,c=0;c<o;c++){var f=e[c],d=r[c]*l,h=f>d?f-d:d-f;if(h>n)return Number.POSITIVE_INFINITY;i+=h}return i/a},t}(),mt=JL;var e5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),t5=function(t){e5(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.findStartPattern=function(r){for(var n=r.getSize(),o=r.getNextSet(0),a=0,u=Int32Array.from([0,0,0,0,0,0]),s=o,l=!1,i=6,c=o;c<n;c++)if(r.get(c)!==l)u[a]++;else{if(a===i-1){for(var f=e.MAX_AVG_VARIANCE,d=-1,h=e.CODE_START_A;h<=e.CODE_START_C;h++){var p=mt.patternMatchVariance(u,e.CODE_PATTERNS[h],e.MAX_INDIVIDUAL_VARIANCE);p<f&&(f=p,d=h)}if(d>=0&&r.isRange(Math.max(0,s-(c-s)/2),s,!1))return Int32Array.from([s,c,d]);s+=u[0]+u[1],u=u.slice(2,u.length),u[a-1]=0,u[a]=0,a--}else a++;u[a]=1,l=!l}throw new L},e.decodeCode=function(r,n,o){mt.recordPattern(r,o,n);for(var a=e.MAX_AVG_VARIANCE,u=-1,s=0;s<e.CODE_PATTERNS.length;s++){var l=e.CODE_PATTERNS[s],i=this.patternMatchVariance(n,l,e.MAX_INDIVIDUAL_VARIANCE);i<a&&(a=i,u=s)}if(u>=0)return u;throw new L},e.prototype.decodeRow=function(r,n,o){var a=o&&o.get(Me.ASSUME_GS1)===!0,u=e.findStartPattern(n),s=u[2],l=0,i=new Uint8Array(20);i[l++]=s;var c;switch(s){case e.CODE_START_A:c=e.CODE_CODE_A;break;case e.CODE_START_B:c=e.CODE_CODE_B;break;case e.CODE_START_C:c=e.CODE_CODE_C;break;default:throw new K}for(var f=!1,d=!1,h="",p=u[0],m=u[1],v=Int32Array.from([0,0,0,0,0,0]),x=0,y=0,_=s,I=0,C=!0,V=!1,z=!1;!f;){var W=d;switch(d=!1,x=y,y=e.decodeCode(n,v,m),i[l++]=y,y!==e.CODE_STOP&&(C=!0),y!==e.CODE_STOP&&(I++,_+=I*y),p=m,m+=v.reduce(function(qe,Ue){return qe+Ue},0),y){case e.CODE_START_A:case e.CODE_START_B:case e.CODE_START_C:throw new K}switch(c){case e.CODE_CODE_A:if(y<64)z===V?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),z=!1;else if(y<96)z===V?h+=String.fromCharCode(y-64):h+=String.fromCharCode(y+64),z=!1;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_A:!V&&z?(V=!0,z=!1):V&&z?(V=!1,z=!1):z=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_B;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_B:if(y<96)z===V?h+=String.fromCharCode(32+y):h+=String.fromCharCode(32+y+128),z=!1;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_FNC_2:case e.CODE_FNC_3:break;case e.CODE_FNC_4_B:!V&&z?(V=!0,z=!1):V&&z?(V=!1,z=!1):z=!0;break;case e.CODE_SHIFT:d=!0,c=e.CODE_CODE_A;break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_C:c=e.CODE_CODE_C;break;case e.CODE_STOP:f=!0;break}break;case e.CODE_CODE_C:if(y<100)y<10&&(h+="0"),h+=y;else switch(y!==e.CODE_STOP&&(C=!1),y){case e.CODE_FNC_1:a&&(h.length===0?h+="]C1":h+="");break;case e.CODE_CODE_A:c=e.CODE_CODE_A;break;case e.CODE_CODE_B:c=e.CODE_CODE_B;break;case e.CODE_STOP:f=!0;break}break}W&&(c=c===e.CODE_CODE_A?e.CODE_CODE_B:e.CODE_CODE_A)}var k=m-p;if(m=n.getNextUnset(m),!n.isRange(m,Math.min(n.getSize(),m+(m-p)/2),!1))throw new L;if(_-=I*x,_%103!==x)throw new nt;var X=h.length;if(X===0)throw new L;X>0&&C&&(c===e.CODE_CODE_C?h=h.substring(0,X-2):h=h.substring(0,X-1));for(var ke=(u[1]+u[0])/2,me=p+k/2,ye=i.length,Z=new Uint8Array(ye),he=0;he<ye;he++)Z[he]=i[he];var pt=[new se(ke,r),new se(me,r)];return new rt(h,Z,0,pt,ae.CODE_128,new Date().getTime())},e.CODE_PATTERNS=[Int32Array.from([2,1,2,2,2,2]),Int32Array.from([2,2,2,1,2,2]),Int32Array.from([2,2,2,2,2,1]),Int32Array.from([1,2,1,2,2,3]),Int32Array.from([1,2,1,3,2,2]),Int32Array.from([1,3,1,2,2,2]),Int32Array.from([1,2,2,2,1,3]),Int32Array.from([1,2,2,3,1,2]),Int32Array.from([1,3,2,2,1,2]),Int32Array.from([2,2,1,2,1,3]),Int32Array.from([2,2,1,3,1,2]),Int32Array.from([2,3,1,2,1,2]),Int32Array.from([1,1,2,2,3,2]),Int32Array.from([1,2,2,1,3,2]),Int32Array.from([1,2,2,2,3,1]),Int32Array.from([1,1,3,2,2,2]),Int32Array.from([1,2,3,1,2,2]),Int32Array.from([1,2,3,2,2,1]),Int32Array.from([2,2,3,2,1,1]),Int32Array.from([2,2,1,1,3,2]),Int32Array.from([2,2,1,2,3,1]),Int32Array.from([2,1,3,2,1,2]),Int32Array.from([2,2,3,1,1,2]),Int32Array.from([3,1,2,1,3,1]),Int32Array.from([3,1,1,2,2,2]),Int32Array.from([3,2,1,1,2,2]),Int32Array.from([3,2,1,2,2,1]),Int32Array.from([3,1,2,2,1,2]),Int32Array.from([3,2,2,1,1,2]),Int32Array.from([3,2,2,2,1,1]),Int32Array.from([2,1,2,1,2,3]),Int32Array.from([2,1,2,3,2,1]),Int32Array.from([2,3,2,1,2,1]),Int32Array.from([1,1,1,3,2,3]),Int32Array.from([1,3,1,1,2,3]),Int32Array.from([1,3,1,3,2,1]),Int32Array.from([1,1,2,3,1,3]),Int32Array.from([1,3,2,1,1,3]),Int32Array.from([1,3,2,3,1,1]),Int32Array.from([2,1,1,3,1,3]),Int32Array.from([2,3,1,1,1,3]),Int32Array.from([2,3,1,3,1,1]),Int32Array.from([1,1,2,1,3,3]),Int32Array.from([1,1,2,3,3,1]),Int32Array.from([1,3,2,1,3,1]),Int32Array.from([1,1,3,1,2,3]),Int32Array.from([1,1,3,3,2,1]),Int32Array.from([1,3,3,1,2,1]),Int32Array.from([3,1,3,1,2,1]),Int32Array.from([2,1,1,3,3,1]),Int32Array.from([2,3,1,1,3,1]),Int32Array.from([2,1,3,1,1,3]),Int32Array.from([2,1,3,3,1,1]),Int32Array.from([2,1,3,1,3,1]),Int32Array.from([3,1,1,1,2,3]),Int32Array.from([3,1,1,3,2,1]),Int32Array.from([3,3,1,1,2,1]),Int32Array.from([3,1,2,1,1,3]),Int32Array.from([3,1,2,3,1,1]),Int32Array.from([3,3,2,1,1,1]),Int32Array.from([3,1,4,1,1,1]),Int32Array.from([2,2,1,4,1,1]),Int32Array.from([4,3,1,1,1,1]),Int32Array.from([1,1,1,2,2,4]),Int32Array.from([1,1,1,4,2,2]),Int32Array.from([1,2,1,1,2,4]),Int32Array.from([1,2,1,4,2,1]),Int32Array.from([1,4,1,1,2,2]),Int32Array.from([1,4,1,2,2,1]),Int32Array.from([1,1,2,2,1,4]),Int32Array.from([1,1,2,4,1,2]),Int32Array.from([1,2,2,1,1,4]),Int32Array.from([1,2,2,4,1,1]),Int32Array.from([1,4,2,1,1,2]),Int32Array.from([1,4,2,2,1,1]),Int32Array.from([2,4,1,2,1,1]),Int32Array.from([2,2,1,1,1,4]),Int32Array.from([4,1,3,1,1,1]),Int32Array.from([2,4,1,1,1,2]),Int32Array.from([1,3,4,1,1,1]),Int32Array.from([1,1,1,2,4,2]),Int32Array.from([1,2,1,1,4,2]),Int32Array.from([1,2,1,2,4,1]),Int32Array.from([1,1,4,2,1,2]),Int32Array.from([1,2,4,1,1,2]),Int32Array.from([1,2,4,2,1,1]),Int32Array.from([4,1,1,2,1,2]),Int32Array.from([4,2,1,1,1,2]),Int32Array.from([4,2,1,2,1,1]),Int32Array.from([2,1,2,1,4,1]),Int32Array.from([2,1,4,1,2,1]),Int32Array.from([4,1,2,1,2,1]),Int32Array.from([1,1,1,1,4,3]),Int32Array.from([1,1,1,3,4,1]),Int32Array.from([1,3,1,1,4,1]),Int32Array.from([1,1,4,1,1,3]),Int32Array.from([1,1,4,3,1,1]),Int32Array.from([4,1,1,1,1,3]),Int32Array.from([4,1,1,3,1,1]),Int32Array.from([1,1,3,1,4,1]),Int32Array.from([1,1,4,1,3,1]),Int32Array.from([3,1,1,1,4,1]),Int32Array.from([4,1,1,1,3,1]),Int32Array.from([2,1,1,4,1,2]),Int32Array.from([2,1,1,2,1,4]),Int32Array.from([2,1,1,2,3,2]),Int32Array.from([2,3,3,1,1,1,2])],e.MAX_AVG_VARIANCE=.25,e.MAX_INDIVIDUAL_VARIANCE=.7,e.CODE_SHIFT=98,e.CODE_CODE_C=99,e.CODE_CODE_B=100,e.CODE_CODE_A=101,e.CODE_FNC_1=102,e.CODE_FNC_2=97,e.CODE_FNC_3=96,e.CODE_FNC_4_A=101,e.CODE_FNC_4_B=100,e.CODE_START_A=103,e.CODE_START_B=104,e.CODE_START_C=105,e.CODE_STOP=106,e}(mt),Lf=t5;var r5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Eg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n5=function(t){r5(e,t);function e(r,n){r===void 0&&(r=!1),n===void 0&&(n=!1);var o=t.call(this)||this;return o.usingCheckDigit=r,o.extendedMode=n,o.decodeRowResult="",o.counters=new Int32Array(9),o}return e.prototype.decodeRow=function(r,n,o){var a,u,s,l,i=this.counters;i.fill(0),this.decodeRowResult="";var c=e.findAsteriskPattern(n,i),f=n.getNextSet(c[1]),d=n.getSize(),h,p;do{e.recordPattern(n,f,i);var m=e.toNarrowWidePattern(i);if(m<0)throw new L;h=e.patternToChar(m),this.decodeRowResult+=h,p=f;try{for(var v=(a=void 0,Eg(i)),x=v.next();!x.done;x=v.next()){var y=x.value;f+=y}}catch(ye){a={error:ye}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}f=n.getNextSet(f)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var I=Eg(i),C=I.next();!C.done;C=I.next()){var y=C.value;_+=y}}catch(ye){s={error:ye}}finally{try{C&&!C.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}var V=f-p-_;if(f!==d&&V*2<_)throw new L;if(this.usingCheckDigit){for(var z=this.decodeRowResult.length-1,W=0,k=0;k<z;k++)W+=e.ALPHABET_STRING.indexOf(this.decodeRowResult.charAt(k));if(this.decodeRowResult.charAt(z)!==e.ALPHABET_STRING.charAt(W%43))throw new nt;this.decodeRowResult=this.decodeRowResult.substring(0,z)}if(this.decodeRowResult.length===0)throw new L;var X;this.extendedMode?X=e.decodeExtended(this.decodeRowResult):X=this.decodeRowResult;var ke=(c[1]+c[0])/2,me=p+_/2;return new rt(X,null,0,[new se(ke,r),new se(me,r)],ae.CODE_39,new Date().getTime())},e.findAsteriskPattern=function(r,n){for(var o=r.getSize(),a=r.getNextSet(0),u=0,s=a,l=!1,i=n.length,c=a;c<o;c++)if(r.get(c)!==l)n[u]++;else{if(u===i-1){if(this.toNarrowWidePattern(n)===e.ASTERISK_ENCODING&&r.isRange(Math.max(0,s-Math.floor((c-s)/2)),s,!1))return[s,c];s+=n[0]+n[1],n.copyWithin(0,2,2+u-1),n[u-1]=0,n[u]=0,u--}else u++;n[u]=1,l=!l}throw new L},e.toNarrowWidePattern=function(r){var n,o,a=r.length,u=0,s;do{var l=2147483647;try{for(var i=(n=void 0,Eg(r)),c=i.next();!c.done;c=i.next()){var f=c.value;f<l&&f>u&&(l=f)}}catch(m){n={error:m}}finally{try{c&&!c.done&&(o=i.return)&&o.call(i)}finally{if(n)throw n.error}}u=l,s=0;for(var d=0,h=0,p=0;p<a;p++){var f=r[p];f>u&&(h|=1<<a-1-p,s++,d+=f)}if(s===3){for(var p=0;p<a&&s>0;p++){var f=r[p];if(f>u&&(s--,f*2>=d))return-1}return h}}while(s>3);return-1},e.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);if(r===e.ASTERISK_ENCODING)return"*";throw new L},e.decodeExtended=function(r){for(var n=r.length,o="",a=0;a<n;a++){var u=r.charAt(a);if(u==="+"||u==="$"||u==="%"||u==="/"){var s=r.charAt(a+1),l="\0";switch(u){case"+":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new K;break;case"$":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new K;break;case"%":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s==="X"||s==="Y"||s==="Z")l="\x7F";else throw new K;break;case"/":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new K;break}o+=l,a++}else o+=u}return o},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%",e.CHARACTER_ENCODINGS=[52,289,97,352,49,304,112,37,292,100,265,73,328,25,280,88,13,268,76,28,259,67,322,19,274,82,7,262,70,22,385,193,448,145,400,208,133,388,196,168,162,138,42],e.ASTERISK_ENCODING=148,e}(mt),Bf=n5;var i5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Tg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o5=function(t){i5(e,t);function e(){var r=t.call(this)||this;return r.decodeRowResult="",r.counters=new Int32Array(6),r}return e.prototype.decodeRow=function(r,n,o){var a,u,s,l,i=this.findAsteriskPattern(n),c=n.getNextSet(i[1]),f=n.getSize(),d=this.counters;d.fill(0),this.decodeRowResult="";var h,p;do{e.recordPattern(n,c,d);var m=this.toPattern(d);if(m<0)throw new L;h=this.patternToChar(m),this.decodeRowResult+=h,p=c;try{for(var v=(a=void 0,Tg(d)),x=v.next();!x.done;x=v.next()){var y=x.value;c+=y}}catch(k){a={error:k}}finally{try{x&&!x.done&&(u=v.return)&&u.call(v)}finally{if(a)throw a.error}}c=n.getNextSet(c)}while(h!=="*");this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-1);var _=0;try{for(var I=Tg(d),C=I.next();!C.done;C=I.next()){var y=C.value;_+=y}}catch(k){s={error:k}}finally{try{C&&!C.done&&(l=I.return)&&l.call(I)}finally{if(s)throw s.error}}if(c===f||!n.get(c))throw new L;if(this.decodeRowResult.length<2)throw new L;this.checkChecksums(this.decodeRowResult),this.decodeRowResult=this.decodeRowResult.substring(0,this.decodeRowResult.length-2);var V=this.decodeExtended(this.decodeRowResult),z=(i[1]+i[0])/2,W=p+_/2;return new rt(V,null,0,[new se(z,r),new se(W,r)],ae.CODE_93,new Date().getTime())},e.prototype.findAsteriskPattern=function(r){var n=r.getSize(),o=r.getNextSet(0);this.counters.fill(0);for(var a=this.counters,u=o,s=!1,l=a.length,i=0,c=o;c<n;c++)if(r.get(c)!==s)a[i]++;else{if(i===l-1){if(this.toPattern(a)===e.ASTERISK_ENCODING)return new Int32Array([u,c]);u+=a[0]+a[1],a.copyWithin(0,2,2+i-1),a[i-1]=0,a[i]=0,i--}else i++;a[i]=1,s=!s}throw new L},e.prototype.toPattern=function(r){var n,o,a=0;try{for(var u=Tg(r),s=u.next();!s.done;s=u.next()){var l=s.value;a+=l}}catch(p){n={error:p}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}for(var i=0,c=r.length,f=0;f<c;f++){var d=Math.round(r[f]*9/a);if(d<1||d>4)return-1;if(f&1)i<<=d;else for(var h=0;h<d;h++)i=i<<1|1}return i},e.prototype.patternToChar=function(r){for(var n=0;n<e.CHARACTER_ENCODINGS.length;n++)if(e.CHARACTER_ENCODINGS[n]===r)return e.ALPHABET_STRING.charAt(n);throw new L},e.prototype.decodeExtended=function(r){for(var n=r.length,o="",a=0;a<n;a++){var u=r.charAt(a);if(u>="a"&&u<="d"){if(a>=n-1)throw new K;var s=r.charAt(a+1),l="\0";switch(u){case"d":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)+32);else throw new K;break;case"a":if(s>="A"&&s<="Z")l=String.fromCharCode(s.charCodeAt(0)-64);else throw new K;break;case"b":if(s>="A"&&s<="E")l=String.fromCharCode(s.charCodeAt(0)-38);else if(s>="F"&&s<="J")l=String.fromCharCode(s.charCodeAt(0)-11);else if(s>="K"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)+16);else if(s>="P"&&s<="T")l=String.fromCharCode(s.charCodeAt(0)+43);else if(s==="U")l="\0";else if(s==="V")l="@";else if(s==="W")l="`";else if(s>="X"&&s<="Z")l="\x7F";else throw new K;break;case"c":if(s>="A"&&s<="O")l=String.fromCharCode(s.charCodeAt(0)-32);else if(s==="Z")l=":";else throw new K;break}o+=l,a++}else o+=u}return o},e.prototype.checkChecksums=function(r){var n=r.length;this.checkOneChecksum(r,n-2,20),this.checkOneChecksum(r,n-1,15)},e.prototype.checkOneChecksum=function(r,n,o){for(var a=1,u=0,s=n-1;s>=0;s--)u+=a*e.ALPHABET_STRING.indexOf(r.charAt(s)),++a>o&&(a=1);if(r.charAt(n)!==e.ALPHABET_STRING[u%47])throw new nt},e.ALPHABET_STRING="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%abcd*",e.CHARACTER_ENCODINGS=[276,328,324,322,296,292,290,336,274,266,424,420,418,404,402,394,360,356,354,308,282,344,332,326,300,278,436,434,428,422,406,410,364,358,310,314,302,468,466,458,366,374,430,294,474,470,306,350],e.ASTERISK_ENCODING=e.CHARACTER_ENCODINGS[47],e}(mt),$f=o5;var a5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),s5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},u5=function(t){a5(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.narrowLineWidth=-1,r}return e.prototype.decodeRow=function(r,n,o){var a,u,s=this.decodeStart(n),l=this.decodeEnd(n),i=new de;e.decodeMiddle(n,s[1],l[0],i);var c=i.toString(),f=null;o!=null&&(f=o.get(Me.ALLOWED_LENGTHS)),f==null&&(f=e.DEFAULT_ALLOWED_LENGTHS);var d=c.length,h=!1,p=0;try{for(var m=s5(f),v=m.next();!v.done;v=m.next()){var x=v.value;if(d===x){h=!0;break}x>p&&(p=x)}}catch(I){a={error:I}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}if(!h&&d>p&&(h=!0),!h)throw new K;var y=[new se(s[1],r),new se(l[0],r)],_=new rt(c,null,0,y,ae.ITF,new Date().getTime());return _},e.decodeMiddle=function(r,n,o,a){var u=new Int32Array(10),s=new Int32Array(5),l=new Int32Array(5);for(u.fill(0),s.fill(0),l.fill(0);n<o;){mt.recordPattern(r,n,u);for(var i=0;i<5;i++){var c=2*i;s[i]=u[c],l[i]=u[c+1]}var f=e.decodeDigit(s);a.append(f.toString()),f=this.decodeDigit(l),a.append(f.toString()),u.forEach(function(d){n+=d})}},e.prototype.decodeStart=function(r){var n=e.skipWhiteSpace(r),o=e.findGuardPattern(r,n,e.START_PATTERN);return this.narrowLineWidth=(o[1]-o[0])/4,this.validateQuietZone(r,o[0]),o},e.prototype.validateQuietZone=function(r,n){var o=this.narrowLineWidth*10;o=o<n?o:n;for(var a=n-1;o>0&&a>=0&&!r.get(a);a--)o--;if(o!==0)throw new L},e.skipWhiteSpace=function(r){var n=r.getSize(),o=r.getNextSet(0);if(o===n)throw new L;return o},e.prototype.decodeEnd=function(r){r.reverse();try{var n=e.skipWhiteSpace(r),o=void 0;try{o=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[0])}catch(u){u instanceof L&&(o=e.findGuardPattern(r,n,e.END_PATTERN_REVERSED[1]))}this.validateQuietZone(r,o[0]);var a=o[0];return o[0]=r.getSize()-o[1],o[1]=r.getSize()-a,o}finally{r.reverse()}},e.findGuardPattern=function(r,n,o){var a=o.length,u=new Int32Array(a),s=r.getSize(),l=!1,i=0,c=n;u.fill(0);for(var f=n;f<s;f++)if(r.get(f)!==l)u[i]++;else{if(i===a-1){if(mt.patternMatchVariance(u,o,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return[c,f];c+=u[0]+u[1],Pe.arraycopy(u,2,u,0,i-1),u[i-1]=0,u[i]=0,i--}else i++;u[i]=1,l=!l}throw new L},e.decodeDigit=function(r){for(var n=e.MAX_AVG_VARIANCE,o=-1,a=e.PATTERNS.length,u=0;u<a;u++){var s=e.PATTERNS[u],l=mt.patternMatchVariance(r,s,e.MAX_INDIVIDUAL_VARIANCE);l<n?(n=l,o=u):l===n&&(o=-1)}if(o>=0)return o%10;throw new L},e.PATTERNS=[Int32Array.from([1,1,2,2,1]),Int32Array.from([2,1,1,1,2]),Int32Array.from([1,2,1,1,2]),Int32Array.from([2,2,1,1,1]),Int32Array.from([1,1,2,1,2]),Int32Array.from([2,1,2,1,1]),Int32Array.from([1,2,2,1,1]),Int32Array.from([1,1,1,2,2]),Int32Array.from([2,1,1,2,1]),Int32Array.from([1,2,1,2,1]),Int32Array.from([1,1,3,3,1]),Int32Array.from([3,1,1,1,3]),Int32Array.from([1,3,1,1,3]),Int32Array.from([3,3,1,1,1]),Int32Array.from([1,1,3,1,3]),Int32Array.from([3,1,3,1,1]),Int32Array.from([1,3,3,1,1]),Int32Array.from([1,1,1,3,3]),Int32Array.from([3,1,1,3,1]),Int32Array.from([1,3,1,3,1])],e.MAX_AVG_VARIANCE=.38,e.MAX_INDIVIDUAL_VARIANCE=.5,e.DEFAULT_ALLOWED_LENGTHS=[6,8,10,12,14],e.START_PATTERN=Int32Array.from([1,1,1,1]),e.END_PATTERN_REVERSED=[Int32Array.from([1,1,2]),Int32Array.from([1,1,3])],e}(mt),Vf=u5;var l5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),c5=function(t){l5(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.decodeRowStringBuffer="",r}return e.findStartGuardPattern=function(r){for(var n=!1,o,a=0,u=Int32Array.from([0,0,0]);!n;){u=Int32Array.from([0,0,0]),o=e.findGuardPattern(r,a,!1,this.START_END_PATTERN,u);var s=o[0];a=o[1];var l=s-(a-s);l>=0&&(n=r.isRange(l,s,!1))}return o},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var o=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===o},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,o=0,a=n-1;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;o+=u}o*=3;for(var a=n-2;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;o+=u}return(1e3-o)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e.findGuardPatternWithoutCounters=function(r,n,o,a){return this.findGuardPattern(r,n,o,a,new Int32Array(a.length))},e.findGuardPattern=function(r,n,o,a,u){var s=r.getSize();n=o?r.getNextUnset(n):r.getNextSet(n);for(var l=0,i=n,c=a.length,f=o,d=n;d<s;d++)if(r.get(d)!==f)u[l]++;else{if(l===c-1){if(mt.patternMatchVariance(u,a,e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return Int32Array.from([i,d]);i+=u[0]+u[1];for(var h=u.slice(2,u.length),p=0;p<l-1;p++)u[p]=h[p];u[l-1]=0,u[l]=0,l--}else l++;u[l]=1,f=!f}throw new L},e.decodeDigit=function(r,n,o,a){this.recordPattern(r,o,n);for(var u=this.MAX_AVG_VARIANCE,s=-1,l=a.length,i=0;i<l;i++){var c=a[i],f=mt.patternMatchVariance(n,c,e.MAX_INDIVIDUAL_VARIANCE);f<u&&(u=f,s=i)}if(s>=0)return s;throw new L},e.MAX_AVG_VARIANCE=.48,e.MAX_INDIVIDUAL_VARIANCE=.7,e.START_END_PATTERN=Int32Array.from([1,1,1]),e.MIDDLE_PATTERN=Int32Array.from([1,1,1,1,1]),e.END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.L_PATTERNS=[Int32Array.from([3,2,1,1]),Int32Array.from([2,2,2,1]),Int32Array.from([2,1,2,2]),Int32Array.from([1,4,1,1]),Int32Array.from([1,1,3,2]),Int32Array.from([1,2,3,1]),Int32Array.from([1,1,1,4]),Int32Array.from([1,3,1,2]),Int32Array.from([1,2,1,3]),Int32Array.from([3,1,1,2])],e}(mt),Oi=c5;var f5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d5=function(){function t(){this.CHECK_DIGIT_ENCODINGS=[24,20,18,17,12,6,3,10,9,5],this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,o),u=o.toString(),s=t.parseExtensionString(u),l=[new se((n[0]+n[1])/2,e),new se(a,e)],i=new rt(u,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&i.putAllMetadata(s),i},t.prototype.decodeMiddle=function(e,r,n){var o,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var s=e.getSize(),l=r[1],i=0,c=0;c<5&&l<s;c++){var f=Oi.decodeDigit(e,u,l,Oi.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(o=void 0,f5(u)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(v){o={error:v}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}f>=10&&(i|=1<<4-c),c!==4&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==5)throw new L;var m=this.determineCheckDigit(i);if(t.extensionChecksum(n.toString())!==m)throw new L;return l},t.extensionChecksum=function(e){for(var r=e.length,n=0,o=r-2;o>=0;o-=2)n+=e.charAt(o).charCodeAt(0)-48;n*=3;for(var o=r-1;o>=0;o-=2)n+=e.charAt(o).charCodeAt(0)-48;return n*=3,n%10},t.prototype.determineCheckDigit=function(e){for(var r=0;r<10;r++)if(e===this.CHECK_DIGIT_ENCODINGS[r])return r;throw new L},t.parseExtensionString=function(e){if(e.length!==5)return null;var r=t.parseExtension5String(e);return r==null?null:new Map([[Lt.SUGGESTED_PRICE,r]])},t.parseExtension5String=function(e){var r;switch(e.charAt(0)){case"0":r="\xA3";break;case"5":r="$";break;case"9":switch(e){case"90000":return null;case"99991":return"0.00";case"99990":return"Used"}r="";break;default:r="";break}var n=parseInt(e.substring(1)),o=(n/100).toString(),a=n%100,u=a<10?"0"+a:a.toString();return r+o+"."+u},t}(),lx=d5;var h5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p5=function(){function t(){this.decodeMiddleCounters=Int32Array.from([0,0,0,0]),this.decodeRowStringBuffer=""}return t.prototype.decodeRow=function(e,r,n){var o=this.decodeRowStringBuffer,a=this.decodeMiddle(r,n,o),u=o.toString(),s=t.parseExtensionString(u),l=[new se((n[0]+n[1])/2,e),new se(a,e)],i=new rt(u,null,0,l,ae.UPC_EAN_EXTENSION,new Date().getTime());return s!=null&&i.putAllMetadata(s),i},t.prototype.decodeMiddle=function(e,r,n){var o,a,u=this.decodeMiddleCounters;u[0]=0,u[1]=0,u[2]=0,u[3]=0;for(var s=e.getSize(),l=r[1],i=0,c=0;c<2&&l<s;c++){var f=Oi.decodeDigit(e,u,l,Oi.L_AND_G_PATTERNS);n+=String.fromCharCode(48+f%10);try{for(var d=(o=void 0,h5(u)),h=d.next();!h.done;h=d.next()){var p=h.value;l+=p}}catch(m){o={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}f>=10&&(i|=1<<1-c),c!==1&&(l=e.getNextSet(l),l=e.getNextUnset(l))}if(n.length!==2)throw new L;if(parseInt(n.toString())%4!==i)throw new L;return l},t.parseExtensionString=function(e){return e.length!==2?null:new Map([[Lt.ISSUE_NUMBER,parseInt(e)]])},t}(),cx=p5;var g5=function(){function t(){}return t.decodeRow=function(e,r,n){var o=Oi.findGuardPattern(r,n,!1,this.EXTENSION_START_PATTERN,new Int32Array(this.EXTENSION_START_PATTERN.length).fill(0));try{var a=new lx;return a.decodeRow(e,r,o)}catch{var u=new cx;return u.decodeRow(e,r,o)}},t.EXTENSION_START_PATTERN=Int32Array.from([1,1,2]),t}(),fx=g5;var m5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y5=function(t){m5(e,t);function e(){var r=t.call(this)||this;r.decodeRowStringBuffer="",e.L_AND_G_PATTERNS=e.L_PATTERNS.map(function(s){return Int32Array.from(s)});for(var n=10;n<20;n++){for(var o=e.L_PATTERNS[n-10],a=new Int32Array(o.length),u=0;u<o.length;u++)a[u]=o[o.length-u-1];e.L_AND_G_PATTERNS[n]=a}return r}return e.prototype.decodeRow=function(r,n,o){var a=e.findStartGuardPattern(n),u=o==null?null:o.get(Me.NEED_RESULT_POINT_CALLBACK);if(u!=null){var s=new se((a[0]+a[1])/2,r);u.foundPossibleResultPoint(s)}var l=this.decodeMiddle(n,a,this.decodeRowStringBuffer),i=l.rowOffset,c=l.resultString;if(u!=null){var f=new se(i,r);u.foundPossibleResultPoint(f)}var d=e.decodeEnd(n,i);if(u!=null){var h=new se((d[0]+d[1])/2,r);u.foundPossibleResultPoint(h)}var p=d[1],m=p+(p-d[0]);if(m>=n.getSize()||!n.isRange(p,m,!1))throw new L;var v=c.toString();if(v.length<8)throw new K;if(!e.checkChecksum(v))throw new nt;var x=(a[1]+a[0])/2,y=(d[1]+d[0])/2,_=this.getBarcodeFormat(),I=[new se(x,r),new se(y,r)],C=new rt(v,null,0,I,_,new Date().getTime()),V=0;try{var z=fx.decodeRow(r,n,d[1]);C.putMetadata(Lt.UPC_EAN_EXTENSION,z.getText()),C.putAllMetadata(z.getResultMetadata()),C.addResultPoints(z.getResultPoints()),V=z.getText().length}catch{}var W=o==null?null:o.get(Me.ALLOWED_EAN_EXTENSIONS);if(W!=null){var k=!1;for(var X in W)if(V.toString()===X){k=!0;break}if(!k)throw new L}return _===ae.EAN_13||ae.UPC_A,C},e.checkChecksum=function(r){return e.checkStandardUPCEANChecksum(r)},e.checkStandardUPCEANChecksum=function(r){var n=r.length;if(n===0)return!1;var o=parseInt(r.charAt(n-1),10);return e.getStandardUPCEANChecksum(r.substring(0,n-1))===o},e.getStandardUPCEANChecksum=function(r){for(var n=r.length,o=0,a=n-1;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;o+=u}o*=3;for(var a=n-2;a>=0;a-=2){var u=r.charAt(a).charCodeAt(0)-48;if(u<0||u>9)throw new K;o+=u}return(1e3-o)%10},e.decodeEnd=function(r,n){return e.findGuardPattern(r,n,!1,e.START_END_PATTERN,new Int32Array(e.START_END_PATTERN.length).fill(0))},e}(Oi),Qt=y5;var v5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),dx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b5=function(t){v5(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,o){var a,u,s,l,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var c=r.getSize(),f=n[1],d=0,h=0;h<6&&f<c;h++){var p=Qt.decodeDigit(r,i,f,Qt.L_AND_G_PATTERNS);o+=String.fromCharCode(48+p%10);try{for(var m=(a=void 0,dx(i)),v=m.next();!v.done;v=m.next()){var x=v.value;f+=x}}catch(C){a={error:C}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}p>=10&&(d|=1<<5-h)}o=e.determineFirstDigit(o,d);var y=Qt.findGuardPattern(r,f,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0));f=y[1];for(var h=0;h<6&&f<c;h++){var p=Qt.decodeDigit(r,i,f,Qt.L_PATTERNS);o+=String.fromCharCode(48+p);try{for(var _=(s=void 0,dx(i)),I=_.next();!I.done;I=_.next()){var x=I.value;f+=x}}catch(z){s={error:z}}finally{try{I&&!I.done&&(l=_.return)&&l.call(_)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:o}},e.prototype.getBarcodeFormat=function(){return ae.EAN_13},e.determineFirstDigit=function(r,n){for(var o=0;o<10;o++)if(n===this.FIRST_DIGIT_ENCODINGS[o])return r=String.fromCharCode(48+o)+r,r;throw new L},e.FIRST_DIGIT_ENCODINGS=[0,11,13,14,19,25,28,21,22,26],e}(Qt),xs=b5;var w5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},x5=function(t){w5(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=Int32Array.from([0,0,0,0]),r}return e.prototype.decodeMiddle=function(r,n,o){var a,u,s,l,i=this.decodeMiddleCounters;i[0]=0,i[1]=0,i[2]=0,i[3]=0;for(var c=r.getSize(),f=n[1],d=0;d<4&&f<c;d++){var h=Qt.decodeDigit(r,i,f,Qt.L_PATTERNS);o+=String.fromCharCode(48+h);try{for(var p=(a=void 0,hx(i)),m=p.next();!m.done;m=p.next()){var v=m.value;f+=v}}catch(I){a={error:I}}finally{try{m&&!m.done&&(u=p.return)&&u.call(p)}finally{if(a)throw a.error}}}var x=Qt.findGuardPattern(r,f,!0,Qt.MIDDLE_PATTERN,new Int32Array(Qt.MIDDLE_PATTERN.length).fill(0));f=x[1];for(var d=0;d<4&&f<c;d++){var h=Qt.decodeDigit(r,i,f,Qt.L_PATTERNS);o+=String.fromCharCode(48+h);try{for(var y=(s=void 0,hx(i)),_=y.next();!_.done;_=y.next()){var v=_.value;f+=v}}catch(V){s={error:V}}finally{try{_&&!_.done&&(l=y.return)&&l.call(y)}finally{if(s)throw s.error}}}return{rowOffset:f,resultString:o}},e.prototype.getBarcodeFormat=function(){return ae.EAN_8},e}(Qt),Ig=x5;var _5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),E5=function(t){_5(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.ean13Reader=new xs,r}return e.prototype.getBarcodeFormat=function(){return ae.UPC_A},e.prototype.decode=function(r,n){return this.maybeReturnResult(this.ean13Reader.decode(r))},e.prototype.decodeRow=function(r,n,o){return this.maybeReturnResult(this.ean13Reader.decodeRow(r,n,o))},e.prototype.decodeMiddle=function(r,n,o){return this.ean13Reader.decodeMiddle(r,n,o)},e.prototype.maybeReturnResult=function(r){var n=r.getText();if(n.charAt(0)==="0"){var o=new rt(n.substring(1),null,null,r.getResultPoints(),ae.UPC_A);return r.getResultMetadata()!=null&&o.putAllMetadata(r.getResultMetadata()),o}else throw new L},e.prototype.reset=function(){this.ean13Reader.reset()},e}(Qt),Ag=E5;var T5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),I5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A5=function(t){T5(e,t);function e(){var r=t.call(this)||this;return r.decodeMiddleCounters=new Int32Array(4),r}return e.prototype.decodeMiddle=function(r,n,o){var a,u,s=this.decodeMiddleCounters.map(function(v){return v});s[0]=0,s[1]=0,s[2]=0,s[3]=0;for(var l=r.getSize(),i=n[1],c=0,f=0;f<6&&i<l;f++){var d=e.decodeDigit(r,s,i,e.L_AND_G_PATTERNS);o+=String.fromCharCode(48+d%10);try{for(var h=(a=void 0,I5(s)),p=h.next();!p.done;p=h.next()){var m=p.value;i+=m}}catch(v){a={error:v}}finally{try{p&&!p.done&&(u=h.return)&&u.call(h)}finally{if(a)throw a.error}}d>=10&&(c|=1<<5-f)}return e.determineNumSysAndCheckDigit(new de(o),c),i},e.prototype.decodeEnd=function(r,n){return e.findGuardPatternWithoutCounters(r,n,!0,e.MIDDLE_END_PATTERN)},e.prototype.checkChecksum=function(r){return Qt.checkChecksum(e.convertUPCEtoUPCA(r))},e.determineNumSysAndCheckDigit=function(r,n){for(var o=0;o<=1;o++)for(var a=0;a<10;a++)if(n===this.NUMSYS_AND_CHECK_DIGIT_PATTERNS[o][a]){r.insert(0,"0"+o),r.append("0"+a);return}throw L.getNotFoundInstance()},e.prototype.getBarcodeFormat=function(){return ae.UPC_E},e.convertUPCEtoUPCA=function(r){var n=r.slice(1,7).split("").map(function(u){return u.charCodeAt(0)}),o=new de;o.append(r.charAt(0));var a=n[5];switch(a){case 0:case 1:case 2:o.appendChars(n,0,2),o.append(a),o.append("0000"),o.appendChars(n,2,3);break;case 3:o.appendChars(n,0,3),o.append("00000"),o.appendChars(n,3,2);break;case 4:o.appendChars(n,0,4),o.append("00000"),o.append(n[4]);break;default:o.appendChars(n,0,5),o.append("0000"),o.append(a);break}return r.length>=8&&o.append(r.charAt(7)),o.toString()},e.MIDDLE_END_PATTERN=Int32Array.from([1,1,1,1,1,1]),e.NUMSYS_AND_CHECK_DIGIT_PATTERNS=[Int32Array.from([56,52,50,49,44,38,35,42,41,37]),Int32Array.from([7,11,13,14,19,25,28,21,22,1])],e}(Qt),Sg=A5;var S5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),px=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},D5=function(t){S5(e,t);function e(r){var n=t.call(this)||this,o=r==null?null:r.get(Me.POSSIBLE_FORMATS),a=[];return o!=null&&(o.indexOf(ae.EAN_13)>-1&&a.push(new xs),o.indexOf(ae.UPC_A)>-1&&a.push(new Ag),o.indexOf(ae.EAN_8)>-1&&a.push(new Ig),o.indexOf(ae.UPC_E)>-1&&a.push(new Sg)),a.length===0&&(a.push(new xs),a.push(new Ag),a.push(new Ig),a.push(new Sg)),n.readers=a,n}return e.prototype.decodeRow=function(r,n,o){var a,u;try{for(var s=px(this.readers),l=s.next();!l.done;l=s.next()){var i=l.value;try{var c=i.decodeRow(r,n,o),f=c.getBarcodeFormat()===ae.EAN_13&&c.getText().charAt(0)==="0",d=o==null?null:o.get(Me.POSSIBLE_FORMATS),h=d==null||d.includes(ae.UPC_A);if(f&&h){var p=c.getRawBytes(),m=new rt(c.getText().substring(1),p,p?p.length:null,c.getResultPoints(),ae.UPC_A);return m.putAllMetadata(c.getResultMetadata()),m}return c}catch{}}}catch(v){a={error:v}}finally{try{l&&!l.done&&(u=s.return)&&u.call(s)}finally{if(a)throw a.error}}throw new L},e.prototype.reset=function(){var r,n;try{for(var o=px(this.readers),a=o.next();!a.done;a=o.next()){var u=a.value;u.reset()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e}(mt),jf=D5;var C5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),O5=function(t){C5(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.CODA_BAR_CHAR_SET={nnnnnww:"0",nnnnwwn:"1",nnnwnnw:"2",wwnnnnn:"3",nnwnnwn:"4",wnnnnwn:"5",nwnnnnw:"6",nwnnwnn:"7",nwwnnnn:"8",wnnwnnn:"9",nnnwwnn:"-",nnwwnnn:"$",wnnnwnw:":",wnwnnnw:"/",wnwnwnn:".",nnwwwww:"+",nnwwnwn:"A",nwnwnnw:"B",nnnwnww:"C",nnnwwwn:"D"},r}return e.prototype.decodeRow=function(r,n,o){var a=this.getValidRowData(n);if(!a)throw new L;var u=this.codaBarDecodeRow(a.row);if(!u)throw new L;return new rt(u,null,0,[new se(a.left,r),new se(a.right,r)],ae.CODABAR,new Date().getTime())},e.prototype.getValidRowData=function(r){var n=r.toArray(),o=n.indexOf(!0);if(o===-1)return null;var a=n.lastIndexOf(!0);if(a<=o)return null;n=n.slice(o,a+1);for(var u=[],s=n[0],l=1,i=1;i<n.length;i++)n[i]===s?l++:(s=n[i],u.push(l),l=1);return u.push(l),u.length<23&&(u.length+1)%8!==0?null:{row:u,left:o,right:a}},e.prototype.codaBarDecodeRow=function(r){for(var n=[],o=Math.ceil(r.reduce(function(l,i){return(l+i)/2},0));r.length>0;){var a=r.splice(0,8).splice(0,7),u=a.map(function(l){return l<o?"n":"w"}).join("");if(this.CODA_BAR_CHAR_SET[u]===void 0)return null;n.push(this.CODA_BAR_CHAR_SET[u])}var s=n.join("");return this.validCodaBarString(s)?s:null},e.prototype.validCodaBarString=function(r){var n=/^[A-D].{1,}[A-D]$/;return n.test(r)},e}(mt),Dg=O5;var P5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),M5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},N5=function(t){P5(e,t);function e(){var r=t.call(this)||this;return r.decodeFinderCounters=new Int32Array(4),r.dataCharacterCounters=new Int32Array(8),r.oddRoundingErrors=new Array(4),r.evenRoundingErrors=new Array(4),r.oddCounts=new Array(r.dataCharacterCounters.length/2),r.evenCounts=new Array(r.dataCharacterCounters.length/2),r}return e.prototype.getDecodeFinderCounters=function(){return this.decodeFinderCounters},e.prototype.getDataCharacterCounters=function(){return this.dataCharacterCounters},e.prototype.getOddRoundingErrors=function(){return this.oddRoundingErrors},e.prototype.getEvenRoundingErrors=function(){return this.evenRoundingErrors},e.prototype.getOddCounts=function(){return this.oddCounts},e.prototype.getEvenCounts=function(){return this.evenCounts},e.prototype.parseFinderValue=function(r,n){for(var o=0;o<n.length;o++)if(mt.patternMatchVariance(r,n[o],e.MAX_INDIVIDUAL_VARIANCE)<e.MAX_AVG_VARIANCE)return o;throw new L},e.count=function(r){return Ne.sum(new Int32Array(r))},e.increment=function(r,n){for(var o=0,a=n[0],u=1;u<r.length;u++)n[u]>a&&(a=n[u],o=u);r[o]++},e.decrement=function(r,n){for(var o=0,a=n[0],u=1;u<r.length;u++)n[u]<a&&(a=n[u],o=u);r[o]--},e.isFinderPattern=function(r){var n,o,a=r[0]+r[1],u=a+r[2]+r[3],s=a/u;if(s>=e.MIN_FINDER_PATTERN_RATIO&&s<=e.MAX_FINDER_PATTERN_RATIO){var l=Number.MAX_SAFE_INTEGER,i=Number.MIN_SAFE_INTEGER;try{for(var c=M5(r),f=c.next();!f.done;f=c.next()){var d=f.value;d>i&&(i=d),d<l&&(l=d)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}return i<10*l}return!1},e.MAX_AVG_VARIANCE=.2,e.MAX_INDIVIDUAL_VARIANCE=.45,e.MIN_FINDER_PATTERN_RATIO=9.5/12,e.MAX_FINDER_PATTERN_RATIO=12.5/14,e}(mt),oo=N5;var R5=function(){function t(e,r){this.value=e,this.checksumPortion=r}return t.prototype.getValue=function(){return this.value},t.prototype.getChecksumPortion=function(){return this.checksumPortion},t.prototype.toString=function(){return this.value+"("+this.checksumPortion+")"},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value&&this.checksumPortion===r.checksumPortion},t.prototype.hashCode=function(){return this.value^this.checksumPortion},t}(),Ta=R5;var F5=function(){function t(e,r,n,o,a){this.value=e,this.startEnd=r,this.value=e,this.startEnd=r,this.resultPoints=new Array,this.resultPoints.push(new se(n,a)),this.resultPoints.push(new se(o,a))}return t.prototype.getValue=function(){return this.value},t.prototype.getStartEnd=function(){return this.startEnd},t.prototype.getResultPoints=function(){return this.resultPoints},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.hashCode=function(){return this.value},t}(),Uf=F5;var k5=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},L5=function(){function t(){}return t.getRSSvalue=function(e,r,n){var o,a,u=0;try{for(var s=k5(e),l=s.next();!l.done;l=s.next()){var i=l.value;u+=i}}catch(y){o={error:y}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}for(var c=0,f=0,d=e.length,h=0;h<d-1;h++){var p=void 0;for(p=1,f|=1<<h;p<e[h];p++,f&=~(1<<h)){var m=t.combins(u-p-1,d-h-2);if(n&&f===0&&u-p-(d-h-1)>=d-h-1&&(m-=t.combins(u-p-(d-h),d-h-2)),d-h-1>1){for(var v=0,x=u-p-(d-h-2);x>r;x--)v+=t.combins(u-p-x-1,d-h-3);m-=v*(d-1-h)}else u-p>r&&m--;c+=m}u-=p}return c},t.combins=function(e,r){var n,o;e-r>r?(o=r,n=e-r):(o=e-r,n=r);for(var a=1,u=1,s=e;s>n;s--)a*=s,u<=o&&(a/=u,u++);for(;u<=o;)a/=u,u++;return a},t}(),Io=L5;var B5=function(){function t(){}return t.buildBitArray=function(e){var r=e.length*2-1;e[e.length-1].getRightChar()==null&&(r-=1);for(var n=12*r,o=new Pt(n),a=0,u=e[0],s=u.getRightChar().getValue(),l=11;l>=0;--l)s&1<<l&&o.set(a),a++;for(var l=1;l<e.length;++l){for(var i=e[l],c=i.getLeftChar().getValue(),f=11;f>=0;--f)c&1<<f&&o.set(a),a++;if(i.getRightChar()!==null)for(var d=i.getRightChar().getValue(),f=11;f>=0;--f)d&1<<f&&o.set(a),a++}return o},t}(),gx=B5;var $5=function(){function t(e,r){r?this.decodedInformation=null:(this.finished=e,this.decodedInformation=r)}return t.prototype.getDecodedInformation=function(){return this.decodedInformation},t.prototype.isFinished=function(){return this.finished},t}(),Ao=$5;var V5=function(){function t(e){this.newPosition=e}return t.prototype.getNewPosition=function(){return this.newPosition},t}(),_s=V5;var j5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U5=function(t){j5(e,t);function e(r,n){var o=t.call(this,r)||this;return o.value=n,o}return e.prototype.getValue=function(){return this.value},e.prototype.isFNC1=function(){return this.value===e.FNC1},e.FNC1="$",e}(_s),kn=U5;var H5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),z5=function(t){H5(e,t);function e(r,n,o){var a=t.call(this,r)||this;return o?(a.remaining=!0,a.remainingValue=a.remainingValue):(a.remaining=!1,a.remainingValue=0),a.newString=n,a}return e.prototype.getNewString=function(){return this.newString},e.prototype.isRemaining=function(){return this.remaining},e.prototype.getRemainingValue=function(){return this.remainingValue},e}(_s),So=z5;var G5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),W5=function(t){G5(e,t);function e(r,n,o){var a=t.call(this,r)||this;if(n<0||n>10||o<0||o>10)throw new K;return a.firstDigit=n,a.secondDigit=o,a}return e.prototype.getFirstDigit=function(){return this.firstDigit},e.prototype.getSecondDigit=function(){return this.secondDigit},e.prototype.getValue=function(){return this.firstDigit*10+this.secondDigit},e.prototype.isFirstDigitFNC1=function(){return this.firstDigit===e.FNC1},e.prototype.isSecondDigitFNC1=function(){return this.secondDigit===e.FNC1},e.prototype.isAnyFNC1=function(){return this.firstDigit===e.FNC1||this.secondDigit===e.FNC1},e.FNC1=10,e}(_s),Ia=W5;var Hf=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q5=function(){function t(){}return t.parseFieldsInGeneralPurpose=function(e){var r,n,o,a,u,s,l,i;if(!e)return null;if(e.length<2)throw new L;var c=e.substring(0,2);try{for(var f=Hf(t.TWO_DIGIT_DATA_LENGTH),d=f.next();!d.done;d=f.next()){var h=d.value;if(h[0]===c)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(2,h[2],e):t.processFixedAI(2,h[1],e)}}catch(V){r={error:V}}finally{try{d&&!d.done&&(n=f.return)&&n.call(f)}finally{if(r)throw r.error}}if(e.length<3)throw new L;var p=e.substring(0,3);try{for(var m=Hf(t.THREE_DIGIT_DATA_LENGTH),v=m.next();!v.done;v=m.next()){var h=v.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(3,h[2],e):t.processFixedAI(3,h[1],e)}}catch(V){o={error:V}}finally{try{v&&!v.done&&(a=m.return)&&a.call(m)}finally{if(o)throw o.error}}try{for(var x=Hf(t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH),y=x.next();!y.done;y=x.next()){var h=y.value;if(h[0]===p)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(V){u={error:V}}finally{try{y&&!y.done&&(s=x.return)&&s.call(x)}finally{if(u)throw u.error}}if(e.length<4)throw new L;var _=e.substring(0,4);try{for(var I=Hf(t.FOUR_DIGIT_DATA_LENGTH),C=I.next();!C.done;C=I.next()){var h=C.value;if(h[0]===_)return h[1]===t.VARIABLE_LENGTH?t.processVariableAI(4,h[2],e):t.processFixedAI(4,h[1],e)}}catch(V){l={error:V}}finally{try{C&&!C.done&&(i=I.return)&&i.call(I)}finally{if(l)throw l.error}}throw new L},t.processFixedAI=function(e,r,n){if(n.length<e)throw new L;var o=n.substring(0,e);if(n.length<e+r)throw new L;var a=n.substring(e,e+r),u=n.substring(e+r),s="("+o+")"+a,l=t.parseFieldsInGeneralPurpose(u);return l==null?s:s+l},t.processVariableAI=function(e,r,n){var o=n.substring(0,e),a;n.length<e+r?a=n.length:a=e+r;var u=n.substring(e,a),s=n.substring(a),l="("+o+")"+u,i=t.parseFieldsInGeneralPurpose(s);return i==null?l:l+i},t.VARIABLE_LENGTH=[],t.TWO_DIGIT_DATA_LENGTH=[["00",18],["01",14],["02",14],["10",t.VARIABLE_LENGTH,20],["11",6],["12",6],["13",6],["15",6],["17",6],["20",2],["21",t.VARIABLE_LENGTH,20],["22",t.VARIABLE_LENGTH,29],["30",t.VARIABLE_LENGTH,8],["37",t.VARIABLE_LENGTH,8],["90",t.VARIABLE_LENGTH,30],["91",t.VARIABLE_LENGTH,30],["92",t.VARIABLE_LENGTH,30],["93",t.VARIABLE_LENGTH,30],["94",t.VARIABLE_LENGTH,30],["95",t.VARIABLE_LENGTH,30],["96",t.VARIABLE_LENGTH,30],["97",t.VARIABLE_LENGTH,3],["98",t.VARIABLE_LENGTH,30],["99",t.VARIABLE_LENGTH,30]],t.THREE_DIGIT_DATA_LENGTH=[["240",t.VARIABLE_LENGTH,30],["241",t.VARIABLE_LENGTH,30],["242",t.VARIABLE_LENGTH,6],["250",t.VARIABLE_LENGTH,30],["251",t.VARIABLE_LENGTH,30],["253",t.VARIABLE_LENGTH,17],["254",t.VARIABLE_LENGTH,20],["400",t.VARIABLE_LENGTH,30],["401",t.VARIABLE_LENGTH,30],["402",17],["403",t.VARIABLE_LENGTH,30],["410",13],["411",13],["412",13],["413",13],["414",13],["420",t.VARIABLE_LENGTH,20],["421",t.VARIABLE_LENGTH,15],["422",3],["423",t.VARIABLE_LENGTH,15],["424",3],["425",3],["426",3]],t.THREE_DIGIT_PLUS_DIGIT_DATA_LENGTH=[["310",6],["311",6],["312",6],["313",6],["314",6],["315",6],["316",6],["320",6],["321",6],["322",6],["323",6],["324",6],["325",6],["326",6],["327",6],["328",6],["329",6],["330",6],["331",6],["332",6],["333",6],["334",6],["335",6],["336",6],["340",6],["341",6],["342",6],["343",6],["344",6],["345",6],["346",6],["347",6],["348",6],["349",6],["350",6],["351",6],["352",6],["353",6],["354",6],["355",6],["356",6],["357",6],["360",6],["361",6],["362",6],["363",6],["364",6],["365",6],["366",6],["367",6],["368",6],["369",6],["390",t.VARIABLE_LENGTH,15],["391",t.VARIABLE_LENGTH,18],["392",t.VARIABLE_LENGTH,15],["393",t.VARIABLE_LENGTH,18],["703",t.VARIABLE_LENGTH,30]],t.FOUR_DIGIT_DATA_LENGTH=[["7001",13],["7002",t.VARIABLE_LENGTH,30],["7003",10],["8001",14],["8002",t.VARIABLE_LENGTH,20],["8003",t.VARIABLE_LENGTH,30],["8004",t.VARIABLE_LENGTH,30],["8005",6],["8006",18],["8007",t.VARIABLE_LENGTH,30],["8008",t.VARIABLE_LENGTH,12],["8018",18],["8020",t.VARIABLE_LENGTH,25],["8100",6],["8101",10],["8102",2],["8110",t.VARIABLE_LENGTH,70],["8200",t.VARIABLE_LENGTH,70]],t}(),mx=q5;var X5=function(){function t(e){this.buffer=new de,this.information=e}return t.prototype.decodeAllCodes=function(e,r){var n=r,o=null;do{var a=this.decodeGeneralPurposeField(n,o),u=mx.parseFieldsInGeneralPurpose(a.getNewString());if(u!=null&&e.append(u),a.isRemaining()?o=""+a.getRemainingValue():o=null,n===a.getNewPosition())break;n=a.getNewPosition()}while(!0);return e.toString()},t.prototype.isStillNumeric=function(e){if(e+7>this.information.getSize())return e+4<=this.information.getSize();for(var r=e;r<e+3;++r)if(this.information.get(r))return!0;return this.information.get(e+3)},t.prototype.decodeNumeric=function(e){if(e+7>this.information.getSize()){var r=this.extractNumericValueFromBitArray(e,4);return r===0?new Ia(this.information.getSize(),Ia.FNC1,Ia.FNC1):new Ia(this.information.getSize(),r-1,Ia.FNC1)}var n=this.extractNumericValueFromBitArray(e,7),o=(n-8)/11,a=(n-8)%11;return new Ia(e+7,o,a)},t.prototype.extractNumericValueFromBitArray=function(e,r){return t.extractNumericValueFromBitArray(this.information,e,r)},t.extractNumericValueFromBitArray=function(e,r,n){for(var o=0,a=0;a<n;++a)e.get(r+a)&&(o|=1<<n-a-1);return o},t.prototype.decodeGeneralPurposeField=function(e,r){this.buffer.setLengthToZero(),r!=null&&this.buffer.append(r),this.current.setPosition(e);var n=this.parseBlocks();return n!=null&&n.isRemaining()?new So(this.current.getPosition(),this.buffer.toString(),n.getRemainingValue()):new So(this.current.getPosition(),this.buffer.toString())},t.prototype.parseBlocks=function(){var e,r;do{var n=this.current.getPosition();this.current.isAlpha()?(r=this.parseAlphaBlock(),e=r.isFinished()):this.current.isIsoIec646()?(r=this.parseIsoIec646Block(),e=r.isFinished()):(r=this.parseNumericBlock(),e=r.isFinished());var o=n!==this.current.getPosition();if(!o&&!e)break}while(!e);return r.getDecodedInformation()},t.prototype.parseNumericBlock=function(){for(;this.isStillNumeric(this.current.getPosition());){var e=this.decodeNumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFirstDigitFNC1()){var r=void 0;return e.isSecondDigitFNC1()?r=new So(this.current.getPosition(),this.buffer.toString()):r=new So(this.current.getPosition(),this.buffer.toString(),e.getSecondDigit()),new Ao(!0,r)}if(this.buffer.append(e.getFirstDigit()),e.isSecondDigitFNC1()){var r=new So(this.current.getPosition(),this.buffer.toString());return new Ao(!0,r)}this.buffer.append(e.getSecondDigit())}return this.isNumericToAlphaNumericLatch(this.current.getPosition())&&(this.current.setAlpha(),this.current.incrementPosition(4)),new Ao(!1)},t.prototype.parseIsoIec646Block=function(){for(;this.isStillIsoIec646(this.current.getPosition());){var e=this.decodeIsoIec646(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new So(this.current.getPosition(),this.buffer.toString());return new Ao(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setAlpha()),new Ao(!1)},t.prototype.parseAlphaBlock=function(){for(;this.isStillAlpha(this.current.getPosition());){var e=this.decodeAlphanumeric(this.current.getPosition());if(this.current.setPosition(e.getNewPosition()),e.isFNC1()){var r=new So(this.current.getPosition(),this.buffer.toString());return new Ao(!0,r)}this.buffer.append(e.getValue())}return this.isAlphaOr646ToNumericLatch(this.current.getPosition())?(this.current.incrementPosition(3),this.current.setNumeric()):this.isAlphaTo646ToAlphaLatch(this.current.getPosition())&&(this.current.getPosition()+5<this.information.getSize()?this.current.incrementPosition(5):this.current.setPosition(this.information.getSize()),this.current.setIsoIec646()),new Ao(!1)},t.prototype.isStillIsoIec646=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+7>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<116)return!0;if(e+8>this.information.getSize())return!1;var o=this.extractNumericValueFromBitArray(e,8);return o>=232&&o<253},t.prototype.decodeIsoIec646=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new kn(e+5,kn.FNC1);if(r>=5&&r<15)return new kn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,7);if(n>=64&&n<90)return new kn(e+7,""+(n+1));if(n>=90&&n<116)return new kn(e+7,""+(n+7));var o=this.extractNumericValueFromBitArray(e,8),a;switch(o){case 232:a="!";break;case 233:a='"';break;case 234:a="%";break;case 235:a="&";break;case 236:a="'";break;case 237:a="(";break;case 238:a=")";break;case 239:a="*";break;case 240:a="+";break;case 241:a=",";break;case 242:a="-";break;case 243:a=".";break;case 244:a="/";break;case 245:a=":";break;case 246:a=";";break;case 247:a="<";break;case 248:a="=";break;case 249:a=">";break;case 250:a="?";break;case 251:a="_";break;case 252:a=" ";break;default:throw new K}return new kn(e+8,a)},t.prototype.isStillAlpha=function(e){if(e+5>this.information.getSize())return!1;var r=this.extractNumericValueFromBitArray(e,5);if(r>=5&&r<16)return!0;if(e+6>this.information.getSize())return!1;var n=this.extractNumericValueFromBitArray(e,6);return n>=16&&n<63},t.prototype.decodeAlphanumeric=function(e){var r=this.extractNumericValueFromBitArray(e,5);if(r===15)return new kn(e+5,kn.FNC1);if(r>=5&&r<15)return new kn(e+5,"0"+(r-5));var n=this.extractNumericValueFromBitArray(e,6);if(n>=32&&n<58)return new kn(e+6,""+(n+33));var o;switch(n){case 58:o="*";break;case 59:o=",";break;case 60:o="-";break;case 61:o=".";break;case 62:o="/";break;default:throw new hr("Decoding invalid alphanumeric value: "+n)}return new kn(e+6,o)},t.prototype.isAlphaTo646ToAlphaLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<5&&r+e<this.information.getSize();++r)if(r===2){if(!this.information.get(e+2))return!1}else if(this.information.get(e+r))return!1;return!0},t.prototype.isAlphaOr646ToNumericLatch=function(e){if(e+3>this.information.getSize())return!1;for(var r=e;r<e+3;++r)if(this.information.get(r))return!1;return!0},t.prototype.isNumericToAlphaNumericLatch=function(e){if(e+1>this.information.getSize())return!1;for(var r=0;r<4&&r+e<this.information.getSize();++r)if(this.information.get(e+r))return!1;return!0},t}(),Es=X5;var Y5=function(){function t(e){this.information=e,this.generalDecoder=new Es(e)}return t.prototype.getInformation=function(){return this.information},t.prototype.getGeneralDecoder=function(){return this.generalDecoder},t}(),ml=Y5;var Z5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),K5=function(t){Z5(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedGtin=function(r,n){r.append("(01)");var o=r.length();r.append("9"),this.encodeCompressedGtinWithoutAI(r,n,o)},e.prototype.encodeCompressedGtinWithoutAI=function(r,n,o){for(var a=0;a<4;++a){var u=this.getGeneralDecoder().extractNumericValueFromBitArray(n+10*a,10);u/100===0&&r.append("0"),u/10===0&&r.append("0"),r.append(u)}e.appendCheckDigit(r,o)},e.appendCheckDigit=function(r,n){for(var o=0,a=0;a<13;a++){var u=r.charAt(a+n).charCodeAt(0)-48;o+=a&1?u:3*u}o=10-o%10,o===10&&(o=0),r.append(o)},e.GTIN_SIZE=40,e}(ml),nn=K5;var Q5=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),J5=function(t){Q5(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new de;r.append("(01)");var n=r.length(),o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE,4);return r.append(o),this.encodeCompressedGtinWithoutAI(r,e.HEADER_SIZE+4,n),this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE+44)},e.HEADER_SIZE=4,e}(nn),yx=J5;var eB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),tB=function(t){eB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){var r=new de;return this.getGeneralDecoder().decodeAllCodes(r,e.HEADER_SIZE)},e.HEADER_SIZE=5,e}(ml),vx=tB;var rB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),nB=function(t){rB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.encodeCompressedWeight=function(r,n,o){var a=this.getGeneralDecoder().extractNumericValueFromBitArray(n,o);this.addWeightCode(r,a);for(var u=this.checkWeight(a),s=1e5,l=0;l<5;++l)u/s===0&&r.append("0"),s/=10;r.append(u)},e}(nn),Ts=nB;var iB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),oB=function(t){iB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+Ts.GTIN_SIZE+e.WEIGHT_SIZE)throw new L;var r=new de;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+Ts.GTIN_SIZE,e.WEIGHT_SIZE),r.toString()},e.HEADER_SIZE=5,e.WEIGHT_SIZE=15,e}(Ts),zf=oB;var aB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),sB=function(t){aB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){r.append("(3103)")},e.prototype.checkWeight=function(r){return r},e}(zf),bx=sB;var uB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lB=function(t){uB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.addWeightCode=function(r,n){n<1e4?r.append("(3202)"):r.append("(3203)")},e.prototype.checkWeight=function(r){return r<1e4?r:r-1e4},e}(zf),wx=lB;var cB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fB=function(t){cB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+nn.GTIN_SIZE)throw new L;var r=new de;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(392"),r.append(n),r.append(")");var o=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE,null);return r.append(o.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e}(nn),xx=fB;var dB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),hB=function(t){dB(e,t);function e(r){return t.call(this,r)||this}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()<e.HEADER_SIZE+nn.GTIN_SIZE)throw new L;var r=new de;this.encodeCompressedGtin(r,e.HEADER_SIZE);var n=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE,e.LAST_DIGIT_SIZE);r.append("(393"),r.append(n),r.append(")");var o=this.getGeneralDecoder().extractNumericValueFromBitArray(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE,e.FIRST_THREE_DIGITS_SIZE);o/100===0&&r.append("0"),o/10===0&&r.append("0"),r.append(o);var a=this.getGeneralDecoder().decodeGeneralPurposeField(e.HEADER_SIZE+nn.GTIN_SIZE+e.LAST_DIGIT_SIZE+e.FIRST_THREE_DIGITS_SIZE,null);return r.append(a.getNewString()),r.toString()},e.HEADER_SIZE=8,e.LAST_DIGIT_SIZE=2,e.FIRST_THREE_DIGITS_SIZE=10,e}(nn),_x=hB;var pB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),gB=function(t){pB(e,t);function e(r,n,o){var a=t.call(this,r)||this;return a.dateCode=o,a.firstAIdigits=n,a}return e.prototype.parseInformation=function(){if(this.getInformation().getSize()!==e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE+e.DATE_SIZE)throw new L;var r=new de;return this.encodeCompressedGtin(r,e.HEADER_SIZE),this.encodeCompressedWeight(r,e.HEADER_SIZE+e.GTIN_SIZE,e.WEIGHT_SIZE),this.encodeCompressedDate(r,e.HEADER_SIZE+e.GTIN_SIZE+e.WEIGHT_SIZE),r.toString()},e.prototype.encodeCompressedDate=function(r,n){var o=this.getGeneralDecoder().extractNumericValueFromBitArray(n,e.DATE_SIZE);if(o!==38400){r.append("("),r.append(this.dateCode),r.append(")");var a=o%32;o/=32;var u=o%12+1;o/=12;var s=o;s/10===0&&r.append("0"),r.append(s),u/10===0&&r.append("0"),r.append(u),a/10===0&&r.append("0"),r.append(a)}},e.prototype.addWeightCode=function(r,n){r.append("("),r.append(this.firstAIdigits),r.append(n/1e5),r.append(")")},e.prototype.checkWeight=function(r){return r%1e5},e.HEADER_SIZE=8,e.WEIGHT_SIZE=20,e.DATE_SIZE=16,e}(Ts),ao=gB;function Cg(t){try{if(t.get(1))return new yx(t);if(!t.get(2))return new vx(t);var e=Es.extractNumericValueFromBitArray(t,1,4);switch(e){case 4:return new bx(t);case 5:return new wx(t)}var r=Es.extractNumericValueFromBitArray(t,1,5);switch(r){case 12:return new xx(t);case 13:return new _x(t)}var n=Es.extractNumericValueFromBitArray(t,1,7);switch(n){case 56:return new ao(t,"310","11");case 57:return new ao(t,"320","11");case 58:return new ao(t,"310","13");case 59:return new ao(t,"320","13");case 60:return new ao(t,"310","15");case 61:return new ao(t,"320","15");case 62:return new ao(t,"310","17");case 63:return new ao(t,"320","17")}}catch(o){throw console.log(o),new hr("unknown decoder: "+t)}}var mB=function(){function t(e,r,n,o){this.leftchar=e,this.rightchar=r,this.finderpattern=n,this.maybeLast=o}return t.prototype.mayBeLast=function(){return this.maybeLast},t.prototype.getLeftChar=function(){return this.leftchar},t.prototype.getRightChar=function(){return this.rightchar},t.prototype.getFinderPattern=function(){return this.finderpattern},t.prototype.mustBeLast=function(){return this.rightchar==null},t.prototype.toString=function(){return"[ "+this.leftchar+", "+this.rightchar+" : "+(this.finderpattern==null?"null":this.finderpattern.getValue())+" ]"},t.equals=function(e,r){return e instanceof t?t.equalsOrNull(e.leftchar,r.leftchar)&&t.equalsOrNull(e.rightchar,r.rightchar)&&t.equalsOrNull(e.finderpattern,r.finderpattern):!1},t.equalsOrNull=function(e,r){return e===null?r===null:t.equals(e,r)},t.prototype.hashCode=function(){var e=this.leftchar.getValue()^this.rightchar.getValue()^this.finderpattern.getValue();return e},t}(),Og=mB;var yB=function(){function t(e,r,n){this.pairs=e,this.rowNumber=r,this.wasReversed=n}return t.prototype.getPairs=function(){return this.pairs},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.isReversed=function(){return this.wasReversed},t.prototype.isEquivalent=function(e){return this.checkEqualitity(this,e)},t.prototype.toString=function(){return"{ "+this.pairs+" }"},t.prototype.equals=function(e,r){return e instanceof t?this.checkEqualitity(e,r)&&e.wasReversed===r.wasReversed:!1},t.prototype.checkEqualitity=function(e,r){if(!(!e||!r)){var n;return e.forEach(function(o,a){r.forEach(function(u){o.getLeftChar().getValue()===u.getLeftChar().getValue()&&o.getRightChar().getValue()===u.getRightChar().getValue()&&o.getFinderPatter().getValue()===u.getFinderPatter().getValue()&&(n=!0)})}),n}},t}(),Ex=yB;var vB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Do=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},bB=function(t){vB(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.pairs=new Array(e.MAX_PAIRS),r.rows=new Array,r.startEnd=[2],r}return e.prototype.decodeRow=function(r,n,o){this.pairs.length=0,this.startFromEven=!1;try{return e.constructResult(this.decodeRow2pairs(r,n))}catch{}return this.pairs.length=0,this.startFromEven=!0,e.constructResult(this.decodeRow2pairs(r,n))},e.prototype.reset=function(){this.pairs.length=0,this.rows.length=0},e.prototype.decodeRow2pairs=function(r,n){for(var o=!1;!o;)try{this.pairs.push(this.retrieveNextPair(n,this.pairs,r))}catch(s){if(s instanceof L){if(!this.pairs.length)throw new L;o=!0}}if(this.checkChecksum())return this.pairs;var a;if(this.rows.length?a=!0:a=!1,this.storeRow(r,!1),a){var u=this.checkRowsBoolean(!1);if(u!=null||(u=this.checkRowsBoolean(!0),u!=null))return u}throw new L},e.prototype.checkRowsBoolean=function(r){if(this.rows.length>25)return this.rows.length=0,null;this.pairs.length=0,r&&(this.rows=this.rows.reverse());var n=null;try{n=this.checkRows(new Array,0)}catch(o){console.log(o)}return r&&(this.rows=this.rows.reverse()),n},e.prototype.checkRows=function(r,n){for(var o,a,u=n;u<this.rows.length;u++){var s=this.rows[u];this.pairs.length=0;try{for(var l=(o=void 0,Do(r)),i=l.next();!i.done;i=l.next()){var c=i.value;this.pairs.push(c.getPairs())}}catch(d){o={error:d}}finally{try{i&&!i.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}if(this.pairs.push(s.getPairs()),!!e.isValidSequence(this.pairs)){if(this.checkChecksum())return this.pairs;var f=new Array(r);f.push(s);try{return this.checkRows(f,u+1)}catch(d){console.log(d)}}}throw new L},e.isValidSequence=function(r){var n,o;try{for(var a=Do(e.FINDER_PATTERN_SEQUENCES),u=a.next();!u.done;u=a.next()){var s=u.value;if(!(r.length>s.length)){for(var l=!0,i=0;i<r.length;i++)if(r[i].getFinderPattern().getValue()!==s[i]){l=!1;break}if(l)return!0}}}catch(c){n={error:c}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return!1},e.prototype.storeRow=function(r,n){for(var o=0,a=!1,u=!1;o<this.rows.length;){var s=this.rows[o];if(s.getRowNumber()>r){u=s.isEquivalent(this.pairs);break}a=s.isEquivalent(this.pairs),o++}u||a||e.isPartialRow(this.pairs,this.rows)||(this.rows.push(o,new Ex(this.pairs,r,n)),this.removePartialRows(this.pairs,this.rows))},e.prototype.removePartialRows=function(r,n){var o,a,u,s,l,i;try{for(var c=Do(n),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.getPairs().length!==r.length){var h=!0;try{for(var p=(u=void 0,Do(d.getPairs())),m=p.next();!m.done;m=p.next()){var v=m.value,x=!1;try{for(var y=(l=void 0,Do(r)),_=y.next();!_.done;_=y.next()){var I=_.value;if(Og.equals(v,I)){x=!0;break}}}catch(C){l={error:C}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(l)throw l.error}}x||(h=!1)}}catch(C){u={error:C}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(u)throw u.error}}}}}catch(C){o={error:C}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}},e.isPartialRow=function(r,n){var o,a,u,s,l,i;try{for(var c=Do(n),f=c.next();!f.done;f=c.next()){var d=f.value,h=!0;try{for(var p=(u=void 0,Do(r)),m=p.next();!m.done;m=p.next()){var v=m.value,x=!1;try{for(var y=(l=void 0,Do(d.getPairs())),_=y.next();!_.done;_=y.next()){var I=_.value;if(v.equals(I)){x=!0;break}}}catch(C){l={error:C}}finally{try{_&&!_.done&&(i=y.return)&&i.call(y)}finally{if(l)throw l.error}}if(!x){h=!1;break}}}catch(C){u={error:C}}finally{try{m&&!m.done&&(s=p.return)&&s.call(p)}finally{if(u)throw u.error}}if(h)return!0}}catch(C){o={error:C}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}return!1},e.prototype.getRows=function(){return this.rows},e.constructResult=function(r){var n=gx.buildBitArray(r),o=Cg(n),a=o.parseInformation(),u=r[0].getFinderPattern().getResultPoints(),s=r[r.length-1].getFinderPattern().getResultPoints(),l=[u[0],u[1],s[0],s[1]];return new rt(a,null,null,l,ae.RSS_EXPANDED,null)},e.prototype.checkChecksum=function(){var r=this.pairs.get(0),n=r.getLeftChar(),o=r.getRightChar();if(o===null)return!1;for(var a=o.getChecksumPortion(),u=2,s=1;s<this.pairs.size();++s){var l=this.pairs.get(s);a+=l.getLeftChar().getChecksumPortion(),u++;var i=l.getRightChar();i!=null&&(a+=i.getChecksumPortion(),u++)}a%=211;var c=211*(u-4)+a;return c===n.getValue()},e.getNextSecondBar=function(r,n){var o;return r.get(n)?(o=r.getNextUnset(n),o=r.getNextSet(o)):(o=r.getNextSet(n),o=r.getNextUnset(o)),o},e.prototype.retrieveNextPair=function(r,n,o){var a=n.length%2===0;this.startFromEven&&(a=!a);var u,s=!0,l=-1;do this.findNextPair(r,n,l),u=this.parseFoundFinderPattern(r,o,a),u===null?l=e.getNextSecondBar(r,this.startEnd[0]):s=!1;while(s);var i=this.decodeDataCharacter(r,u,a,!0);if(!this.isEmptyPair(n)&&n[n.length-1].mustBeLast())throw new L;var c;try{c=this.decodeDataCharacter(r,u,a,!1)}catch(f){c=null,console.log(f)}return new Og(i,c,u,!0)},e.prototype.isEmptyPair=function(r){return r.length===0},e.prototype.findNextPair=function(r,n,o){var a=this.getDecodeFinderCounters();a[0]=0,a[1]=0,a[2]=0,a[3]=0;var u=r.getSize(),s;if(o>=0)s=o;else if(this.isEmptyPair(n))s=0;else{var l=n[n.length-1];s=l.getFinderPattern().getStartEnd()[1]}var i=n.length%2!==0;this.startFromEven&&(i=!i);for(var c=!1;s<u&&(c=!r.get(s),!!c);)s++;for(var f=0,d=s,h=s;h<u;h++)if(r.get(h)!==c)a[f]++;else{if(f===3){if(i&&e.reverseCounters(a),e.isFinderPattern(a)){this.startEnd[0]=d,this.startEnd[1]=h;return}i&&e.reverseCounters(a),d+=a[0]+a[1],a[0]=a[2],a[1]=a[3],a[2]=0,a[3]=0,f--}else f++;a[f]=1,c=!c}throw new L},e.reverseCounters=function(r){for(var n=r.length,o=0;o<n/2;++o){var a=r[o];r[o]=r[n-o-1],r[n-o-1]=a}},e.prototype.parseFoundFinderPattern=function(r,n,o){var a,u,s;if(o){for(var l=this.startEnd[0]-1;l>=0&&!r.get(l);)l--;l++,a=this.startEnd[0]-l,u=l,s=this.startEnd[1]}else u=this.startEnd[0],s=r.getNextUnset(this.startEnd[1]+1),a=s-this.startEnd[1];var i=this.getDecodeFinderCounters();Pe.arraycopy(i,0,i,1,i.length-1),i[0]=a;var c;try{c=this.parseFinderValue(i,e.FINDER_PATTERNS)}catch{return null}return new Uf(c,[u,s],u,s,n)},e.prototype.decodeDataCharacter=function(r,n,o,a){for(var u=this.getDataCharacterCounters(),s=0;s<u.length;s++)u[s]=0;if(a)e.recordPatternInReverse(r,n.getStartEnd()[0],u);else{e.recordPattern(r,n.getStartEnd()[1],u);for(var l=0,i=u.length-1;l<i;l++,i--){var c=u[l];u[l]=u[i],u[i]=c}}var f=17,d=Ne.sum(new Int32Array(u))/f,h=(n.getStartEnd()[1]-n.getStartEnd()[0])/15;if(Math.abs(d-h)/h>.3)throw new L;for(var p=this.getOddCounts(),m=this.getEvenCounts(),v=this.getOddRoundingErrors(),x=this.getEvenRoundingErrors(),l=0;l<u.length;l++){var y=1*u[l]/d,_=y+.5;if(_<1){if(y<.3)throw new L;_=1}else if(_>8){if(y>8.7)throw new L;_=8}var I=l/2;l&1?(m[I]=_,x[I]=y-_):(p[I]=_,v[I]=y-_)}this.adjustOddEvenCounts(f);for(var C=4*n.getValue()+(o?0:2)+(a?0:1)-1,V=0,z=0,l=p.length-1;l>=0;l--){if(e.isNotA1left(n,o,a)){var W=e.WEIGHTS[C][2*l];z+=p[l]*W}V+=p[l]}for(var k=0,l=m.length-1;l>=0;l--)if(e.isNotA1left(n,o,a)){var W=e.WEIGHTS[C][2*l+1];k+=m[l]*W}var X=z+k;if(V&1||V>13||V<4)throw new L;var ke=(13-V)/2,me=e.SYMBOL_WIDEST[ke],ye=9-me,Z=Io.getRSSvalue(p,me,!0),he=Io.getRSSvalue(m,ye,!1),pt=e.EVEN_TOTAL_SUBSET[ke],qe=e.GSUM[ke],Ue=Z*pt+he+qe;return new Ta(Ue,X)},e.isNotA1left=function(r,n,o){return!(r.getValue()===0&&n&&o)},e.prototype.adjustOddEvenCounts=function(r){var n=Ne.sum(new Int32Array(this.getOddCounts())),o=Ne.sum(new Int32Array(this.getEvenCounts())),a=!1,u=!1;n>13?u=!0:n<4&&(a=!0);var s=!1,l=!1;o>13?l=!0:o<4&&(s=!0);var i=n+o-r,c=(n&1)===1,f=(o&1)===0;if(i===1)if(c){if(f)throw new L;u=!0}else{if(!f)throw new L;l=!0}else if(i===-1)if(c){if(f)throw new L;a=!0}else{if(!f)throw new L;s=!0}else if(i===0){if(c){if(!f)throw new L;n<o?(a=!0,l=!0):(u=!0,s=!0)}else if(f)throw new L}else throw new L;if(a){if(u)throw new L;e.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(u&&e.decrement(this.getOddCounts(),this.getOddRoundingErrors()),s){if(l)throw new L;e.increment(this.getEvenCounts(),this.getOddRoundingErrors())}l&&e.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.SYMBOL_WIDEST=[7,5,4,3,1],e.EVEN_TOTAL_SUBSET=[4,20,52,104,204],e.GSUM=[0,348,1388,2948,3988],e.FINDER_PATTERNS=[Int32Array.from([1,8,4,1]),Int32Array.from([3,6,4,1]),Int32Array.from([3,4,6,1]),Int32Array.from([3,2,8,1]),Int32Array.from([2,6,5,1]),Int32Array.from([2,2,9,1])],e.WEIGHTS=[[1,3,9,27,81,32,96,77],[20,60,180,118,143,7,21,63],[189,145,13,39,117,140,209,205],[193,157,49,147,19,57,171,91],[62,186,136,197,169,85,44,132],[185,133,188,142,4,12,36,108],[113,128,173,97,80,29,87,50],[150,28,84,41,123,158,52,156],[46,138,203,187,139,206,196,166],[76,17,51,153,37,111,122,155],[43,129,176,106,107,110,119,146],[16,48,144,10,30,90,59,177],[109,116,137,200,178,112,125,164],[70,210,208,202,184,130,179,115],[134,191,151,31,93,68,204,190],[148,22,66,198,172,94,71,2],[6,18,54,162,64,192,154,40],[120,149,25,75,14,42,126,167],[79,26,78,23,69,207,199,175],[103,98,83,38,114,131,182,124],[161,61,183,127,170,88,53,159],[55,165,73,8,24,72,5,15],[45,135,194,160,58,174,100,89]],e.FINDER_PAT_A=0,e.FINDER_PAT_B=1,e.FINDER_PAT_C=2,e.FINDER_PAT_D=3,e.FINDER_PAT_E=4,e.FINDER_PAT_F=5,e.FINDER_PATTERN_SEQUENCES=[[e.FINDER_PAT_A,e.FINDER_PAT_A],[e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B],[e.FINDER_PAT_A,e.FINDER_PAT_C,e.FINDER_PAT_B,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_C],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_E,e.FINDER_PAT_B,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F],[e.FINDER_PAT_A,e.FINDER_PAT_A,e.FINDER_PAT_B,e.FINDER_PAT_B,e.FINDER_PAT_C,e.FINDER_PAT_D,e.FINDER_PAT_D,e.FINDER_PAT_E,e.FINDER_PAT_E,e.FINDER_PAT_F,e.FINDER_PAT_F]],e.MAX_PAIRS=11,e}(oo),Pg=bB;var wB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),xB=function(t){wB(e,t);function e(r,n,o){var a=t.call(this,r,n)||this;return a.count=0,a.finderPattern=o,a}return e.prototype.getFinderPattern=function(){return this.finderPattern},e.prototype.getCount=function(){return this.count},e.prototype.incrementCount=function(){this.count++},e}(Ta),Tx=xB;var _B=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Mg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},EB=function(t){_B(e,t);function e(){var r=t!==null&&t.apply(this,arguments)||this;return r.possibleLeftPairs=[],r.possibleRightPairs=[],r}return e.prototype.decodeRow=function(r,n,o){var a,u,s,l,i=this.decodePair(n,!1,r,o);e.addOrTally(this.possibleLeftPairs,i),n.reverse();var c=this.decodePair(n,!0,r,o);e.addOrTally(this.possibleRightPairs,c),n.reverse();try{for(var f=Mg(this.possibleLeftPairs),d=f.next();!d.done;d=f.next()){var h=d.value;if(h.getCount()>1)try{for(var p=(s=void 0,Mg(this.possibleRightPairs)),m=p.next();!m.done;m=p.next()){var v=m.value;if(v.getCount()>1&&e.checkChecksum(h,v))return e.constructResult(h,v)}}catch(x){s={error:x}}finally{try{m&&!m.done&&(l=p.return)&&l.call(p)}finally{if(s)throw s.error}}}}catch(x){a={error:x}}finally{try{d&&!d.done&&(u=f.return)&&u.call(f)}finally{if(a)throw a.error}}throw new L},e.addOrTally=function(r,n){var o,a;if(n!=null){var u=!1;try{for(var s=Mg(r),l=s.next();!l.done;l=s.next()){var i=l.value;if(i.getValue()===n.getValue()){i.incrementCount(),u=!0;break}}}catch(c){o={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}u||r.push(n)}},e.prototype.reset=function(){this.possibleLeftPairs.length=0,this.possibleRightPairs.length=0},e.constructResult=function(r,n){for(var o=4537077*r.getValue()+n.getValue(),a=new String(o).toString(),u=new de,s=13-a.length;s>0;s--)u.append("0");u.append(a);for(var l=0,s=0;s<13;s++){var i=u.charAt(s).charCodeAt(0)-48;l+=s&1?i:3*i}l=10-l%10,l===10&&(l=0),u.append(l.toString());var c=r.getFinderPattern().getResultPoints(),f=n.getFinderPattern().getResultPoints();return new rt(u.toString(),null,0,[c[0],c[1],f[0],f[1]],ae.RSS_14,new Date().getTime())},e.checkChecksum=function(r,n){var o=(r.getChecksumPortion()+16*n.getChecksumPortion())%79,a=9*r.getFinderPattern().getValue()+n.getFinderPattern().getValue();return a>72&&a--,a>8&&a--,o===a},e.prototype.decodePair=function(r,n,o,a){try{var u=this.findFinderPattern(r,n),s=this.parseFoundFinderPattern(r,o,n,u),l=a==null?null:a.get(Me.NEED_RESULT_POINT_CALLBACK);if(l!=null){var i=(u[0]+u[1])/2;n&&(i=r.getSize()-1-i),l.foundPossibleResultPoint(new se(i,o))}var c=this.decodeDataCharacter(r,s,!0),f=this.decodeDataCharacter(r,s,!1);return new Tx(1597*c.getValue()+f.getValue(),c.getChecksumPortion()+4*f.getChecksumPortion(),s)}catch{return null}},e.prototype.decodeDataCharacter=function(r,n,o){for(var a=this.getDataCharacterCounters(),u=0;u<a.length;u++)a[u]=0;if(o)mt.recordPatternInReverse(r,n.getStartEnd()[0],a);else{mt.recordPattern(r,n.getStartEnd()[1]+1,a);for(var s=0,l=a.length-1;s<l;s++,l--){var i=a[s];a[s]=a[l],a[l]=i}}for(var c=o?16:15,f=Ne.sum(new Int32Array(a))/c,d=this.getOddCounts(),h=this.getEvenCounts(),p=this.getOddRoundingErrors(),m=this.getEvenRoundingErrors(),s=0;s<a.length;s++){var v=a[s]/f,x=Math.floor(v+.5);x<1?x=1:x>8&&(x=8);var y=Math.floor(s/2);s&1?(h[y]=x,m[y]=v-x):(d[y]=x,p[y]=v-x)}this.adjustOddEvenCounts(o,c);for(var _=0,I=0,s=d.length-1;s>=0;s--)I*=9,I+=d[s],_+=d[s];for(var C=0,V=0,s=h.length-1;s>=0;s--)C*=9,C+=h[s],V+=h[s];var z=I+3*C;if(o){if(_&1||_>12||_<4)throw new L;var W=(12-_)/2,k=e.OUTSIDE_ODD_WIDEST[W],X=9-k,ke=Io.getRSSvalue(d,k,!1),me=Io.getRSSvalue(h,X,!0),ye=e.OUTSIDE_EVEN_TOTAL_SUBSET[W],Z=e.OUTSIDE_GSUM[W];return new Ta(ke*ye+me+Z,z)}else{if(V&1||V>10||V<4)throw new L;var W=(10-V)/2,k=e.INSIDE_ODD_WIDEST[W],X=9-k,ke=Io.getRSSvalue(d,k,!0),me=Io.getRSSvalue(h,X,!1),he=e.INSIDE_ODD_TOTAL_SUBSET[W],Z=e.INSIDE_GSUM[W];return new Ta(me*he+ke+Z,z)}},e.prototype.findFinderPattern=function(r,n){var o=this.getDecodeFinderCounters();o[0]=0,o[1]=0,o[2]=0,o[3]=0;for(var a=r.getSize(),u=!1,s=0;s<a&&(u=!r.get(s),n!==u);)s++;for(var l=0,i=s,c=s;c<a;c++)if(r.get(c)!==u)o[l]++;else{if(l===3){if(oo.isFinderPattern(o))return[i,c];i+=o[0]+o[1],o[0]=o[2],o[1]=o[3],o[2]=0,o[3]=0,l--}else l++;o[l]=1,u=!u}throw new L},e.prototype.parseFoundFinderPattern=function(r,n,o,a){for(var u=r.get(a[0]),s=a[0]-1;s>=0&&u!==r.get(s);)s--;s++;var l=a[0]-s,i=this.getDecodeFinderCounters(),c=new Int32Array(i.length);Pe.arraycopy(i,0,c,1,i.length-1),c[0]=l;var f=this.parseFinderValue(c,e.FINDER_PATTERNS),d=s,h=a[1];return o&&(d=r.getSize()-1-d,h=r.getSize()-1-h),new Uf(f,[s,a[1]],d,h,n)},e.prototype.adjustOddEvenCounts=function(r,n){var o=Ne.sum(new Int32Array(this.getOddCounts())),a=Ne.sum(new Int32Array(this.getEvenCounts())),u=!1,s=!1,l=!1,i=!1;r?(o>12?s=!0:o<4&&(u=!0),a>12?i=!0:a<4&&(l=!0)):(o>11?s=!0:o<5&&(u=!0),a>10?i=!0:a<4&&(l=!0));var c=o+a-n,f=(o&1)===(r?1:0),d=(a&1)===1;if(c===1)if(f){if(d)throw new L;s=!0}else{if(!d)throw new L;i=!0}else if(c===-1)if(f){if(d)throw new L;u=!0}else{if(!d)throw new L;l=!0}else if(c===0){if(f){if(!d)throw new L;o<a?(u=!0,i=!0):(s=!0,l=!0)}else if(d)throw new L}else throw new L;if(u){if(s)throw new L;oo.increment(this.getOddCounts(),this.getOddRoundingErrors())}if(s&&oo.decrement(this.getOddCounts(),this.getOddRoundingErrors()),l){if(i)throw new L;oo.increment(this.getEvenCounts(),this.getOddRoundingErrors())}i&&oo.decrement(this.getEvenCounts(),this.getEvenRoundingErrors())},e.OUTSIDE_EVEN_TOTAL_SUBSET=[1,10,34,70,126],e.INSIDE_ODD_TOTAL_SUBSET=[4,20,48,81],e.OUTSIDE_GSUM=[0,161,961,2015,2715],e.INSIDE_GSUM=[0,336,1036,1516],e.OUTSIDE_ODD_WIDEST=[8,6,4,3,1],e.INSIDE_ODD_WIDEST=[2,4,6,8],e.FINDER_PATTERNS=[Int32Array.from([3,8,2,1]),Int32Array.from([3,5,5,1]),Int32Array.from([3,3,7,1]),Int32Array.from([3,1,9,1]),Int32Array.from([2,7,4,1]),Int32Array.from([2,5,6,1]),Int32Array.from([2,3,8,1]),Int32Array.from([1,5,7,1]),Int32Array.from([1,3,9,1])],e}(oo),Gf=EB;var TB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),IB=function(t){TB(e,t);function e(r){var n=t.call(this)||this;n.readers=[];var o=r?r.get(Me.POSSIBLE_FORMATS):null,a=r&&r.get(Me.ASSUME_CODE_39_CHECK_DIGIT)!==void 0,u=r&&r.get(Me.ENABLE_CODE_39_EXTENDED_MODE)!==void 0;return o&&((o.includes(ae.EAN_13)||o.includes(ae.UPC_A)||o.includes(ae.EAN_8)||o.includes(ae.UPC_E))&&n.readers.push(new jf(r)),o.includes(ae.CODE_39)&&n.readers.push(new Bf(a,u)),o.includes(ae.CODE_93)&&n.readers.push(new $f),o.includes(ae.CODE_128)&&n.readers.push(new Lf),o.includes(ae.ITF)&&n.readers.push(new Vf),o.includes(ae.CODABAR)&&n.readers.push(new Dg),o.includes(ae.RSS_14)&&n.readers.push(new Gf),o.includes(ae.RSS_EXPANDED)&&(console.warn("RSS Expanded reader IS NOT ready for production yet! use at your own risk."),n.readers.push(new Pg))),n.readers.length===0&&(n.readers.push(new jf(r)),n.readers.push(new Bf),n.readers.push(new $f),n.readers.push(new jf(r)),n.readers.push(new Lf),n.readers.push(new Vf),n.readers.push(new Gf)),n}return e.prototype.decodeRow=function(r,n,o){for(var a=0;a<this.readers.length;a++)try{return this.readers[a].decodeRow(r,n,o)}catch{}throw new L},e.prototype.reset=function(){this.readers.forEach(function(r){return r.reset()})},e}(mt),Pi=IB;var AB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ore=function(t){AB(e,t);function e(r,n){return r===void 0&&(r=500),t.call(this,new Pi(n),r,n)||this}return e}(Rn);var Ix=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},yt=function(){function t(e,r,n){this.ecCodewords=e,this.ecBlocks=[r],n&&this.ecBlocks.push(n)}return t.prototype.getECCodewords=function(){return this.ecCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t}();var ct=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}();var SB=function(){function t(e,r,n,o,a,u){var s,l;this.versionNumber=e,this.symbolSizeRows=r,this.symbolSizeColumns=n,this.dataRegionSizeRows=o,this.dataRegionSizeColumns=a,this.ecBlocks=u;var i=0,c=u.getECCodewords(),f=u.getECBlocks();try{for(var d=Ix(f),h=d.next();!h.done;h=d.next()){var p=h.value;i+=p.getCount()*(p.getDataCodewords()+c)}}catch(m){s={error:m}}finally{try{h&&!h.done&&(l=d.return)&&l.call(d)}finally{if(s)throw s.error}}this.totalCodewords=i}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getSymbolSizeRows=function(){return this.symbolSizeRows},t.prototype.getSymbolSizeColumns=function(){return this.symbolSizeColumns},t.prototype.getDataRegionSizeRows=function(){return this.dataRegionSizeRows},t.prototype.getDataRegionSizeColumns=function(){return this.dataRegionSizeColumns},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getECBlocks=function(){return this.ecBlocks},t.getVersionForDimensions=function(e,r){var n,o;if(e&1||r&1)throw new K;try{for(var a=Ix(t.VERSIONS),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.symbolSizeRows===e&&s.symbolSizeColumns===r)return s}}catch(l){n={error:l}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}throw new K},t.prototype.toString=function(){return""+this.versionNumber},t.buildVersions=function(){return[new t(1,10,10,8,8,new yt(5,new ct(1,3))),new t(2,12,12,10,10,new yt(7,new ct(1,5))),new t(3,14,14,12,12,new yt(10,new ct(1,8))),new t(4,16,16,14,14,new yt(12,new ct(1,12))),new t(5,18,18,16,16,new yt(14,new ct(1,18))),new t(6,20,20,18,18,new yt(18,new ct(1,22))),new t(7,22,22,20,20,new yt(20,new ct(1,30))),new t(8,24,24,22,22,new yt(24,new ct(1,36))),new t(9,26,26,24,24,new yt(28,new ct(1,44))),new t(10,32,32,14,14,new yt(36,new ct(1,62))),new t(11,36,36,16,16,new yt(42,new ct(1,86))),new t(12,40,40,18,18,new yt(48,new ct(1,114))),new t(13,44,44,20,20,new yt(56,new ct(1,144))),new t(14,48,48,22,22,new yt(68,new ct(1,174))),new t(15,52,52,24,24,new yt(42,new ct(2,102))),new t(16,64,64,14,14,new yt(56,new ct(2,140))),new t(17,72,72,16,16,new yt(36,new ct(4,92))),new t(18,80,80,18,18,new yt(48,new ct(4,114))),new t(19,88,88,20,20,new yt(56,new ct(4,144))),new t(20,96,96,22,22,new yt(68,new ct(4,174))),new t(21,104,104,24,24,new yt(56,new ct(6,136))),new t(22,120,120,18,18,new yt(68,new ct(6,175))),new t(23,132,132,20,20,new yt(62,new ct(8,163))),new t(24,144,144,22,22,new yt(62,new ct(8,156),new ct(2,155))),new t(25,8,18,6,16,new yt(7,new ct(1,5))),new t(26,8,32,6,14,new yt(11,new ct(1,10))),new t(27,12,26,10,24,new yt(14,new ct(1,16))),new t(28,12,36,10,16,new yt(18,new ct(1,22))),new t(29,16,36,14,16,new yt(24,new ct(1,32))),new t(30,16,48,14,22,new yt(28,new ct(1,49)))]},t.VERSIONS=t.buildVersions(),t}(),Ax=SB;var DB=function(){function t(e){var r=e.getHeight();if(r<8||r>144||r&1)throw new K;this.version=t.readVersion(e),this.mappingBitMatrix=this.extractDataRegion(e),this.readMappingMatrix=new Nt(this.mappingBitMatrix.getWidth(),this.mappingBitMatrix.getHeight())}return t.prototype.getVersion=function(){return this.version},t.readVersion=function(e){var r=e.getHeight(),n=e.getWidth();return Ax.getVersionForDimensions(r,n)},t.prototype.readCodewords=function(){var e=new Int8Array(this.version.getTotalCodewords()),r=0,n=4,o=0,a=this.mappingBitMatrix.getHeight(),u=this.mappingBitMatrix.getWidth(),s=!1,l=!1,i=!1,c=!1;do if(n===a&&o===0&&!s)e[r++]=this.readCorner1(a,u)&255,n-=2,o+=2,s=!0;else if(n===a-2&&o===0&&u&3&&!l)e[r++]=this.readCorner2(a,u)&255,n-=2,o+=2,l=!0;else if(n===a+4&&o===2&&!(u&7)&&!i)e[r++]=this.readCorner3(a,u)&255,n-=2,o+=2,i=!0;else if(n===a-2&&o===0&&(u&7)===4&&!c)e[r++]=this.readCorner4(a,u)&255,n-=2,o+=2,c=!0;else{do n<a&&o>=0&&!this.readMappingMatrix.get(o,n)&&(e[r++]=this.readUtah(n,o,a,u)&255),n-=2,o+=2;while(n>=0&&o<u);n+=1,o+=3;do n>=0&&o<u&&!this.readMappingMatrix.get(o,n)&&(e[r++]=this.readUtah(n,o,a,u)&255),n+=2,o-=2;while(n<a&&o>=0);n+=3,o+=1}while(n<a||o<u);if(r!==this.version.getTotalCodewords())throw new K;return e},t.prototype.readModule=function(e,r,n,o){return e<0&&(e+=n,r+=4-(n+4&7)),r<0&&(r+=o,e+=4-(o+4&7)),this.readMappingMatrix.set(r,e),this.mappingBitMatrix.get(r,e)},t.prototype.readUtah=function(e,r,n,o){var a=0;return this.readModule(e-2,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e-2,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e-1,r,n,o)&&(a|=1),a<<=1,this.readModule(e,r-2,n,o)&&(a|=1),a<<=1,this.readModule(e,r-1,n,o)&&(a|=1),a<<=1,this.readModule(e,r,n,o)&&(a|=1),a},t.prototype.readCorner1=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,1,e,r)&&(n|=1),n<<=1,this.readModule(e-1,2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.readCorner2=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-4,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner3=function(e,r){var n=0;return this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(0,r-3,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-3,e,r)&&(n|=1),n<<=1,this.readModule(1,r-2,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n},t.prototype.readCorner4=function(e,r){var n=0;return this.readModule(e-3,0,e,r)&&(n|=1),n<<=1,this.readModule(e-2,0,e,r)&&(n|=1),n<<=1,this.readModule(e-1,0,e,r)&&(n|=1),n<<=1,this.readModule(0,r-2,e,r)&&(n|=1),n<<=1,this.readModule(0,r-1,e,r)&&(n|=1),n<<=1,this.readModule(1,r-1,e,r)&&(n|=1),n<<=1,this.readModule(2,r-1,e,r)&&(n|=1),n<<=1,this.readModule(3,r-1,e,r)&&(n|=1),n},t.prototype.extractDataRegion=function(e){var r=this.version.getSymbolSizeRows(),n=this.version.getSymbolSizeColumns();if(e.getHeight()!==r)throw new re("Dimension of bitMatrix must match the version size");for(var o=this.version.getDataRegionSizeRows(),a=this.version.getDataRegionSizeColumns(),u=r/o|0,s=n/a|0,l=u*o,i=s*a,c=new Nt(i,l),f=0;f<u;++f)for(var d=f*o,h=0;h<s;++h)for(var p=h*a,m=0;m<o;++m)for(var v=f*(o+2)+1+m,x=d+m,y=0;y<a;++y){var _=h*(a+2)+1+y;if(e.get(_,v)){var I=p+y;c.set(I,x)}}return c},t}(),Sx=DB;var Dx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},CB=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r){var n,o,a,u,s=r.getECBlocks(),l=0,i=s.getECBlocks();try{for(var c=Dx(i),f=c.next();!f.done;f=c.next()){var d=f.value;l+=d.getCount()}}catch(Z){n={error:Z}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}var h=new Array(l),p=0;try{for(var m=Dx(i),v=m.next();!v.done;v=m.next())for(var d=v.value,x=0;x<d.getCount();x++){var y=d.getDataCodewords(),_=s.getECCodewords()+y;h[p++]=new t(y,new Uint8Array(_))}}catch(Z){a={error:Z}}finally{try{v&&!v.done&&(u=m.return)&&u.call(m)}finally{if(a)throw a.error}}for(var I=h[0].codewords.length,C=I-s.getECCodewords(),V=C-1,z=0,x=0;x<V;x++)for(var W=0;W<p;W++)h[W].codewords[x]=e[z++];for(var k=r.getVersionNumber()===24,X=k?8:p,W=0;W<X;W++)h[W].codewords[C-1]=e[z++];for(var ke=h[0].codewords.length,x=C;x<ke;x++)for(var W=0;W<p;W++){var me=k?(W+8)%p:W,ye=k&&me>7?x-1:x;h[me].codewords[ye]=e[z++]}if(z!==e.length)throw new re;return h},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Cx=CB;var OB=function(){function t(e){this.bytes=e,this.byteOffset=0,this.bitOffset=0}return t.prototype.getBitOffset=function(){return this.bitOffset},t.prototype.getByteOffset=function(){return this.byteOffset},t.prototype.readBits=function(e){if(e<1||e>32||e>this.available())throw new re(""+e);var r=0,n=this.bitOffset,o=this.byteOffset,a=this.bytes;if(n>0){var u=8-n,s=e<u?e:u,l=u-s,i=255>>8-s<<l;r=(a[o]&i)>>l,e-=s,n+=s,n===8&&(n=0,o++)}if(e>0){for(;e>=8;)r=r<<8|a[o]&255,o++,e-=8;if(e>0){var l=8-e,i=255>>l<<l;r=r<<e|(a[o]&i)>>l,n+=e}}return this.bitOffset=n,this.byteOffset=o,r},t.prototype.available=function(){return 8*(this.bytes.length-this.byteOffset)-this.bitOffset},t}(),yl=OB;var Mr=function(t){return t[t.PAD_ENCODE=0]="PAD_ENCODE",t[t.ASCII_ENCODE=1]="ASCII_ENCODE",t[t.C40_ENCODE=2]="C40_ENCODE",t[t.TEXT_ENCODE=3]="TEXT_ENCODE",t[t.ANSIX12_ENCODE=4]="ANSIX12_ENCODE",t[t.EDIFACT_ENCODE=5]="EDIFACT_ENCODE",t[t.BASE256_ENCODE=6]="BASE256_ENCODE",t}(Mr||{}),PB=function(){function t(){}return t.decode=function(e){var r=new yl(e),n=new de,o=new de,a=new Array,u=Mr.ASCII_ENCODE;do if(u===Mr.ASCII_ENCODE)u=this.decodeAsciiSegment(r,n,o);else{switch(u){case Mr.C40_ENCODE:this.decodeC40Segment(r,n);break;case Mr.TEXT_ENCODE:this.decodeTextSegment(r,n);break;case Mr.ANSIX12_ENCODE:this.decodeAnsiX12Segment(r,n);break;case Mr.EDIFACT_ENCODE:this.decodeEdifactSegment(r,n);break;case Mr.BASE256_ENCODE:this.decodeBase256Segment(r,n,a);break;default:throw new K}u=Mr.ASCII_ENCODE}while(u!==Mr.PAD_ENCODE&&r.available()>0);return o.length()>0&&n.append(o.toString()),new no(e,n.toString(),a.length===0?null:a,null)},t.decodeAsciiSegment=function(e,r,n){var o=!1;do{var a=e.readBits(8);if(a===0)throw new K;if(a<=128)return o&&(a+=128),r.append(String.fromCharCode(a-1)),Mr.ASCII_ENCODE;if(a===129)return Mr.PAD_ENCODE;if(a<=229){var u=a-130;u<10&&r.append("0"),r.append(""+u)}else switch(a){case 230:return Mr.C40_ENCODE;case 231:return Mr.BASE256_ENCODE;case 232:r.append("");break;case 233:case 234:break;case 235:o=!0;break;case 236:r.append("[)>05"),n.insert(0,"");break;case 237:r.append("[)>06"),n.insert(0,"");break;case 238:return Mr.ANSIX12_ENCODE;case 239:return Mr.TEXT_ENCODE;case 240:return Mr.EDIFACT_ENCODE;case 241:break;default:if(a!==254||e.available()!==0)throw new K;break}}while(e.available()>0);return Mr.ASCII_ENCODE},t.decodeC40Segment=function(e,r){var n=!1,o=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.C40_BASIC_SET_CHARS.length){var i=this.C40_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(i.charCodeAt(0)+128)),n=!1):r.append(i)}else throw new K;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.C40_SHIFT2_SET_CHARS.length){var i=this.C40_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(i.charCodeAt(0)+128)),n=!1):r.append(i)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new K}a=0;break;case 3:n?(r.append(String.fromCharCode(l+224)),n=!1):r.append(String.fromCharCode(l+96)),a=0;break;default:throw new K}}}while(e.available()>0)},t.decodeTextSegment=function(e,r){var n=!1,o=[],a=0;do{if(e.available()===8)return;var u=e.readBits(8);if(u===254)return;this.parseTwoBytes(u,e.readBits(8),o);for(var s=0;s<3;s++){var l=o[s];switch(a){case 0:if(l<3)a=l+1;else if(l<this.TEXT_BASIC_SET_CHARS.length){var i=this.TEXT_BASIC_SET_CHARS[l];n?(r.append(String.fromCharCode(i.charCodeAt(0)+128)),n=!1):r.append(i)}else throw new K;break;case 1:n?(r.append(String.fromCharCode(l+128)),n=!1):r.append(String.fromCharCode(l)),a=0;break;case 2:if(l<this.TEXT_SHIFT2_SET_CHARS.length){var i=this.TEXT_SHIFT2_SET_CHARS[l];n?(r.append(String.fromCharCode(i.charCodeAt(0)+128)),n=!1):r.append(i)}else switch(l){case 27:r.append("");break;case 30:n=!0;break;default:throw new K}a=0;break;case 3:if(l<this.TEXT_SHIFT3_SET_CHARS.length){var i=this.TEXT_SHIFT3_SET_CHARS[l];n?(r.append(String.fromCharCode(i.charCodeAt(0)+128)),n=!1):r.append(i),a=0}else throw new K;break;default:throw new K}}}while(e.available()>0)},t.decodeAnsiX12Segment=function(e,r){var n=[];do{if(e.available()===8)return;var o=e.readBits(8);if(o===254)return;this.parseTwoBytes(o,e.readBits(8),n);for(var a=0;a<3;a++){var u=n[a];switch(u){case 0:r.append("\r");break;case 1:r.append("*");break;case 2:r.append(">");break;case 3:r.append(" ");break;default:if(u<14)r.append(String.fromCharCode(u+44));else if(u<40)r.append(String.fromCharCode(u+51));else throw new K;break}}}while(e.available()>0)},t.parseTwoBytes=function(e,r,n){var o=(e<<8)+r-1,a=Math.floor(o/1600);n[0]=a,o-=a*1600,a=Math.floor(o/40),n[1]=a,n[2]=o-a*40},t.decodeEdifactSegment=function(e,r){do{if(e.available()<=16)return;for(var n=0;n<4;n++){var o=e.readBits(6);if(o===31){var a=8-e.getBitOffset();a!==8&&e.readBits(a);return}o&32||(o|=64),r.append(String.fromCharCode(o))}}while(e.available()>0)},t.decodeBase256Segment=function(e,r,n){var o=1+e.getByteOffset(),a=this.unrandomize255State(e.readBits(8),o++),u;if(a===0?u=e.available()/8|0:a<250?u=a:u=250*(a-249)+this.unrandomize255State(e.readBits(8),o++),u<0)throw new K;for(var s=new Uint8Array(u),l=0;l<u;l++){if(e.available()<8)throw new K;s[l]=this.unrandomize255State(e.readBits(8),o++)}n.push(s);try{r.append(Sr.decode(s,_e.ISO88591))}catch(i){throw new hr("Platform does not support required encoding: "+i.message)}},t.unrandomize255State=function(e,r){var n=149*r%255+1,o=e-n;return o>=0?o:o+256},t.C40_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"],t.C40_SHIFT2_SET_CHARS=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],t.TEXT_BASIC_SET_CHARS=["*","*","*"," ","0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z"],t.TEXT_SHIFT2_SET_CHARS=t.C40_SHIFT2_SET_CHARS,t.TEXT_SHIFT3_SET_CHARS=["`","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","{","|","}","~","\x7F"],t}(),Ng=PB;var MB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},NB=function(){function t(){this.rsDecoder=new io(nr.DATA_MATRIX_FIELD_256)}return t.prototype.decode=function(e){var r,n,o=new Sx(e),a=o.getVersion(),u=o.readCodewords(),s=Cx.getDataBlocks(u,a),l=0;try{for(var i=MB(s),c=i.next();!c.done;c=i.next()){var f=c.value;l+=f.getNumDataCodewords()}}catch(_){r={error:_}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}for(var d=new Uint8Array(l),h=s.length,p=0;p<h;p++){var m=s[p],v=m.getCodewords(),x=m.getNumDataCodewords();this.correctErrors(v,x);for(var y=0;y<x;y++)d[y*h+p]=v[y]}return Ng.decode(d)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new nt}for(var o=0;o<r;o++)e[o]=n[o]},t}(),Ox=NB;var RB=function(){function t(e){this.image=e,this.rectangleDetector=new ws(this.image)}return t.prototype.detect=function(){var e=this.rectangleDetector.detect(),r=this.detectSolid1(e);if(r=this.detectSolid2(r),r[3]=this.correctTopRight(r),!r[3])throw new L;r=this.shiftToModuleCenter(r);var n=r[0],o=r[1],a=r[2],u=r[3],s=this.transitionsBetween(n,u)+1,l=this.transitionsBetween(a,u)+1;(s&1)===1&&(s+=1),(l&1)===1&&(l+=1),4*s<7*l&&4*l<7*s&&(s=l=Math.max(s,l));var i=t.sampleGrid(this.image,n,o,a,u,s,l);return new _a(i,[n,o,a,u])},t.shiftPoint=function(e,r,n){var o=(r.getX()-e.getX())/(n+1),a=(r.getY()-e.getY())/(n+1);return new se(e.getX()+o,e.getY()+a)},t.moveAway=function(e,r,n){var o=e.getX(),a=e.getY();return o<r?o-=1:o+=1,a<n?a-=1:a+=1,new se(o,a)},t.prototype.detectSolid1=function(e){var r=e[0],n=e[1],o=e[3],a=e[2],u=this.transitionsBetween(r,n),s=this.transitionsBetween(n,o),l=this.transitionsBetween(o,a),i=this.transitionsBetween(a,r),c=u,f=[a,r,n,o];return c>s&&(c=s,f[0]=r,f[1]=n,f[2]=o,f[3]=a),c>l&&(c=l,f[0]=n,f[1]=o,f[2]=a,f[3]=r),c>i&&(f[0]=o,f[1]=a,f[2]=r,f[3]=n),f},t.prototype.detectSolid2=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],u=this.transitionsBetween(r,a),s=t.shiftPoint(n,o,(u+1)*4),l=t.shiftPoint(o,n,(u+1)*4),i=this.transitionsBetween(s,r),c=this.transitionsBetween(l,a);return i<c?(e[0]=r,e[1]=n,e[2]=o,e[3]=a):(e[0]=n,e[1]=o,e[2]=a,e[3]=r),e},t.prototype.correctTopRight=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],u=this.transitionsBetween(r,a),s=this.transitionsBetween(n,a),l=t.shiftPoint(r,n,(s+1)*4),i=t.shiftPoint(o,n,(u+1)*4);u=this.transitionsBetween(l,a),s=this.transitionsBetween(i,a);var c=new se(a.getX()+(o.getX()-n.getX())/(u+1),a.getY()+(o.getY()-n.getY())/(u+1)),f=new se(a.getX()+(r.getX()-n.getX())/(s+1),a.getY()+(r.getY()-n.getY())/(s+1));if(!this.isValid(c))return this.isValid(f)?f:null;if(!this.isValid(f))return c;var d=this.transitionsBetween(l,c)+this.transitionsBetween(i,c),h=this.transitionsBetween(l,f)+this.transitionsBetween(i,f);return d>h?c:f},t.prototype.shiftToModuleCenter=function(e){var r=e[0],n=e[1],o=e[2],a=e[3],u=this.transitionsBetween(r,a)+1,s=this.transitionsBetween(o,a)+1,l=t.shiftPoint(r,n,s*4),i=t.shiftPoint(o,n,u*4);u=this.transitionsBetween(l,a)+1,s=this.transitionsBetween(i,a)+1,(u&1)===1&&(u+=1),(s&1)===1&&(s+=1);var c=(r.getX()+n.getX()+o.getX()+a.getX())/4,f=(r.getY()+n.getY()+o.getY()+a.getY())/4;r=t.moveAway(r,c,f),n=t.moveAway(n,c,f),o=t.moveAway(o,c,f),a=t.moveAway(a,c,f);var d,h;return l=t.shiftPoint(r,n,s*4),l=t.shiftPoint(l,a,u*4),d=t.shiftPoint(n,r,s*4),d=t.shiftPoint(d,o,u*4),i=t.shiftPoint(o,a,s*4),i=t.shiftPoint(i,n,u*4),h=t.shiftPoint(a,o,s*4),h=t.shiftPoint(h,r,u*4),[l,d,i,h]},t.prototype.isValid=function(e){return e.getX()>=0&&e.getX()<this.image.getWidth()&&e.getY()>0&&e.getY()<this.image.getHeight()},t.sampleGrid=function(e,r,n,o,a,u,s){var l=Ea.getInstance();return l.sampleGrid(e,u,s,.5,.5,u-.5,.5,u-.5,s-.5,.5,s-.5,r.getX(),r.getY(),a.getX(),a.getY(),o.getX(),o.getY(),n.getX(),n.getY())},t.prototype.transitionsBetween=function(e,r){var n=Math.trunc(e.getX()),o=Math.trunc(e.getY()),a=Math.trunc(r.getX()),u=Math.trunc(r.getY()),s=Math.abs(u-o)>Math.abs(a-n);if(s){var l=n;n=o,o=l,l=a,a=u,u=l}for(var i=Math.abs(a-n),c=Math.abs(u-o),f=-i/2,d=o<u?1:-1,h=n<a?1:-1,p=0,m=this.image.get(s?o:n,s?n:o),v=n,x=o;v!==a;v+=h){var y=this.image.get(s?x:v,s?v:x);if(y!==m&&(p++,m=y),f+=c,f>0){if(x===u)break;x+=d,f-=i}}return p},t}(),Px=RB;var FB=function(){function t(){this.decoder=new Ox}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n,o;if(r!=null&&r.has(Me.PURE_BARCODE)){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decode(a),o=t.NO_POINTS}else{var u=new Px(e.getBlackMatrix()).detect();n=this.decoder.decode(u.getBits()),o=u.getPoints()}var s=n.getRawBytes(),l=new rt(n.getText(),s,8*s.length,o,ae.DATA_MATRIX,Pe.currentTimeMillis()),i=n.getByteSegments();i!=null&&l.putMetadata(Lt.BYTE_SEGMENTS,i);var c=n.getECLevel();return c!=null&&l.putMetadata(Lt.ERROR_CORRECTION_LEVEL,c),l},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r==null||n==null)throw new L;var o=this.moduleSize(r,e),a=r[1],u=n[1],s=r[0],l=n[0],i=(l-s+1)/o,c=(u-a+1)/o;if(i<=0||c<=0)throw new L;var f=o/2;a+=f,s+=f;for(var d=new Nt(i,c),h=0;h<c;h++)for(var p=a+h*o,m=0;m<i;m++)e.get(s+m*o,p)&&d.set(m,h);return d},t.moduleSize=function(e,r){for(var n=r.getWidth(),o=e[0],a=e[1];o<n&&r.get(o,a);)o++;if(o===n)throw new L;var u=o-e[0];if(u===0)throw new L;return u},t.NO_POINTS=[],t}(),Co=FB;var kB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kre=function(t){kB(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Co,r)||this}return e}(Rn);var vl=function(t){return t[t.L=0]="L",t[t.M=1]="M",t[t.Q=2]="Q",t[t.H=3]="H",t}(vl||{}),LB=function(){function t(e,r,n){this.value=e,this.stringValue=r,this.bits=n,t.FOR_BITS.set(n,this),t.FOR_VALUE.set(e,this)}return t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.fromString=function(e){switch(e){case"L":return t.L;case"M":return t.M;case"Q":return t.Q;case"H":return t.H;default:throw new Xt(e+"not available")}},t.prototype.toString=function(){return this.stringValue},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.forBits=function(e){if(e<0||e>=t.FOR_BITS.size)throw new re;return t.FOR_BITS.get(e)},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.L=new t(vl.L,"L",1),t.M=new t(vl.M,"M",0),t.Q=new t(vl.Q,"Q",3),t.H=new t(vl.H,"H",2),t}(),on=LB;var BB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},$B=function(){function t(e){this.errorCorrectionLevel=on.forBits(e>>3&3),this.dataMask=e&7}return t.numBitsDiffering=function(e,r){return ge.bitCount(e^r)},t.decodeFormatInformation=function(e,r){var n=t.doDecodeFormatInformation(e,r);return n!==null?n:t.doDecodeFormatInformation(e^t.FORMAT_INFO_MASK_QR,r^t.FORMAT_INFO_MASK_QR)},t.doDecodeFormatInformation=function(e,r){var n,o,a=Number.MAX_SAFE_INTEGER,u=0;try{for(var s=BB(t.FORMAT_INFO_DECODE_LOOKUP),l=s.next();!l.done;l=s.next()){var i=l.value,c=i[0];if(c===e||c===r)return new t(i[1]);var f=t.numBitsDiffering(e,c);f<a&&(u=i[1],a=f),e!==r&&(f=t.numBitsDiffering(r,c),f<a&&(u=i[1],a=f))}}catch(d){n={error:d}}finally{try{l&&!l.done&&(o=s.return)&&o.call(s)}finally{if(n)throw n.error}}return a<=3?new t(u):null},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getDataMask=function(){return this.dataMask},t.prototype.hashCode=function(){return this.errorCorrectionLevel.getBits()<<3|this.dataMask},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.errorCorrectionLevel===r.errorCorrectionLevel&&this.dataMask===r.dataMask},t.FORMAT_INFO_MASK_QR=21522,t.FORMAT_INFO_DECODE_LOOKUP=[Int32Array.from([21522,0]),Int32Array.from([20773,1]),Int32Array.from([24188,2]),Int32Array.from([23371,3]),Int32Array.from([17913,4]),Int32Array.from([16590,5]),Int32Array.from([20375,6]),Int32Array.from([19104,7]),Int32Array.from([30660,8]),Int32Array.from([29427,9]),Int32Array.from([32170,10]),Int32Array.from([30877,11]),Int32Array.from([26159,12]),Int32Array.from([25368,13]),Int32Array.from([27713,14]),Int32Array.from([26998,15]),Int32Array.from([5769,16]),Int32Array.from([5054,17]),Int32Array.from([7399,18]),Int32Array.from([6608,19]),Int32Array.from([1890,20]),Int32Array.from([597,21]),Int32Array.from([3340,22]),Int32Array.from([2107,23]),Int32Array.from([13663,24]),Int32Array.from([12392,25]),Int32Array.from([16177,26]),Int32Array.from([14854,27]),Int32Array.from([9396,28]),Int32Array.from([8579,29]),Int32Array.from([11994,30]),Int32Array.from([11245,31])],t}(),bl=$B;var VB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},jB=function(){function t(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.ecCodewordsPerBlock=e,this.ecBlocks=r}return t.prototype.getECCodewordsPerBlock=function(){return this.ecCodewordsPerBlock},t.prototype.getNumBlocks=function(){var e,r,n=0,o=this.ecBlocks;try{for(var a=VB(o),u=a.next();!u.done;u=a.next()){var s=u.value;n+=s.getCount()}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n},t.prototype.getTotalECCodewords=function(){return this.ecCodewordsPerBlock*this.getNumBlocks()},t.prototype.getECBlocks=function(){return this.ecBlocks},t}(),H=jB;var UB=function(){function t(e,r){this.count=e,this.dataCodewords=r}return t.prototype.getCount=function(){return this.count},t.prototype.getDataCodewords=function(){return this.dataCodewords},t}(),D=UB;var HB=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},zB=function(){function t(e,r){for(var n,o,a=[],u=2;u<arguments.length;u++)a[u-2]=arguments[u];this.versionNumber=e,this.alignmentPatternCenters=r,this.ecBlocks=a;var s=0,l=a[0].getECCodewordsPerBlock(),i=a[0].getECBlocks();try{for(var c=HB(i),f=c.next();!f.done;f=c.next()){var d=f.value;s+=d.getCount()*(d.getDataCodewords()+l)}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}this.totalCodewords=s}return t.prototype.getVersionNumber=function(){return this.versionNumber},t.prototype.getAlignmentPatternCenters=function(){return this.alignmentPatternCenters},t.prototype.getTotalCodewords=function(){return this.totalCodewords},t.prototype.getDimensionForVersion=function(){return 17+4*this.versionNumber},t.prototype.getECBlocksForLevel=function(e){return this.ecBlocks[e.getValue()]},t.getProvisionalVersionForDimension=function(e){if(e%4!==1)throw new K;try{return this.getVersionForNumber((e-17)/4)}catch{throw new K}},t.getVersionForNumber=function(e){if(e<1||e>40)throw new re;return t.VERSIONS[e-1]},t.decodeVersionInformation=function(e){for(var r=Number.MAX_SAFE_INTEGER,n=0,o=0;o<t.VERSION_DECODE_INFO.length;o++){var a=t.VERSION_DECODE_INFO[o];if(a===e)return t.getVersionForNumber(o+7);var u=bl.numBitsDiffering(e,a);u<r&&(n=o+7,r=u)}return r<=3?t.getVersionForNumber(n):null},t.prototype.buildFunctionPattern=function(){var e=this.getDimensionForVersion(),r=new Nt(e);r.setRegion(0,0,9,9),r.setRegion(e-8,0,8,9),r.setRegion(0,e-8,9,8);for(var n=this.alignmentPatternCenters.length,o=0;o<n;o++)for(var a=this.alignmentPatternCenters[o]-2,u=0;u<n;u++)o===0&&(u===0||u===n-1)||o===n-1&&u===0||r.setRegion(this.alignmentPatternCenters[u]-2,a,5,5);return r.setRegion(6,9,1,e-17),r.setRegion(9,6,e-17,1),this.versionNumber>6&&(r.setRegion(e-11,0,3,6),r.setRegion(0,e-11,6,3)),r},t.prototype.toString=function(){return""+this.versionNumber},t.VERSION_DECODE_INFO=Int32Array.from([31892,34236,39577,42195,48118,51042,55367,58893,63784,68472,70749,76311,79154,84390,87683,92361,96236,102084,102881,110507,110734,117786,119615,126325,127568,133589,136944,141498,145311,150283,152622,158308,161089,167017]),t.VERSIONS=[new t(1,new Int32Array(0),new H(7,new D(1,19)),new H(10,new D(1,16)),new H(13,new D(1,13)),new H(17,new D(1,9))),new t(2,Int32Array.from([6,18]),new H(10,new D(1,34)),new H(16,new D(1,28)),new H(22,new D(1,22)),new H(28,new D(1,16))),new t(3,Int32Array.from([6,22]),new H(15,new D(1,55)),new H(26,new D(1,44)),new H(18,new D(2,17)),new H(22,new D(2,13))),new t(4,Int32Array.from([6,26]),new H(20,new D(1,80)),new H(18,new D(2,32)),new H(26,new D(2,24)),new H(16,new D(4,9))),new t(5,Int32Array.from([6,30]),new H(26,new D(1,108)),new H(24,new D(2,43)),new H(18,new D(2,15),new D(2,16)),new H(22,new D(2,11),new D(2,12))),new t(6,Int32Array.from([6,34]),new H(18,new D(2,68)),new H(16,new D(4,27)),new H(24,new D(4,19)),new H(28,new D(4,15))),new t(7,Int32Array.from([6,22,38]),new H(20,new D(2,78)),new H(18,new D(4,31)),new H(18,new D(2,14),new D(4,15)),new H(26,new D(4,13),new D(1,14))),new t(8,Int32Array.from([6,24,42]),new H(24,new D(2,97)),new H(22,new D(2,38),new D(2,39)),new H(22,new D(4,18),new D(2,19)),new H(26,new D(4,14),new D(2,15))),new t(9,Int32Array.from([6,26,46]),new H(30,new D(2,116)),new H(22,new D(3,36),new D(2,37)),new H(20,new D(4,16),new D(4,17)),new H(24,new D(4,12),new D(4,13))),new t(10,Int32Array.from([6,28,50]),new H(18,new D(2,68),new D(2,69)),new H(26,new D(4,43),new D(1,44)),new H(24,new D(6,19),new D(2,20)),new H(28,new D(6,15),new D(2,16))),new t(11,Int32Array.from([6,30,54]),new H(20,new D(4,81)),new H(30,new D(1,50),new D(4,51)),new H(28,new D(4,22),new D(4,23)),new H(24,new D(3,12),new D(8,13))),new t(12,Int32Array.from([6,32,58]),new H(24,new D(2,92),new D(2,93)),new H(22,new D(6,36),new D(2,37)),new H(26,new D(4,20),new D(6,21)),new H(28,new D(7,14),new D(4,15))),new t(13,Int32Array.from([6,34,62]),new H(26,new D(4,107)),new H(22,new D(8,37),new D(1,38)),new H(24,new D(8,20),new D(4,21)),new H(22,new D(12,11),new D(4,12))),new t(14,Int32Array.from([6,26,46,66]),new H(30,new D(3,115),new D(1,116)),new H(24,new D(4,40),new D(5,41)),new H(20,new D(11,16),new D(5,17)),new H(24,new D(11,12),new D(5,13))),new t(15,Int32Array.from([6,26,48,70]),new H(22,new D(5,87),new D(1,88)),new H(24,new D(5,41),new D(5,42)),new H(30,new D(5,24),new D(7,25)),new H(24,new D(11,12),new D(7,13))),new t(16,Int32Array.from([6,26,50,74]),new H(24,new D(5,98),new D(1,99)),new H(28,new D(7,45),new D(3,46)),new H(24,new D(15,19),new D(2,20)),new H(30,new D(3,15),new D(13,16))),new t(17,Int32Array.from([6,30,54,78]),new H(28,new D(1,107),new D(5,108)),new H(28,new D(10,46),new D(1,47)),new H(28,new D(1,22),new D(15,23)),new H(28,new D(2,14),new D(17,15))),new t(18,Int32Array.from([6,30,56,82]),new H(30,new D(5,120),new D(1,121)),new H(26,new D(9,43),new D(4,44)),new H(28,new D(17,22),new D(1,23)),new H(28,new D(2,14),new D(19,15))),new t(19,Int32Array.from([6,30,58,86]),new H(28,new D(3,113),new D(4,114)),new H(26,new D(3,44),new D(11,45)),new H(26,new D(17,21),new D(4,22)),new H(26,new D(9,13),new D(16,14))),new t(20,Int32Array.from([6,34,62,90]),new H(28,new D(3,107),new D(5,108)),new H(26,new D(3,41),new D(13,42)),new H(30,new D(15,24),new D(5,25)),new H(28,new D(15,15),new D(10,16))),new t(21,Int32Array.from([6,28,50,72,94]),new H(28,new D(4,116),new D(4,117)),new H(26,new D(17,42)),new H(28,new D(17,22),new D(6,23)),new H(30,new D(19,16),new D(6,17))),new t(22,Int32Array.from([6,26,50,74,98]),new H(28,new D(2,111),new D(7,112)),new H(28,new D(17,46)),new H(30,new D(7,24),new D(16,25)),new H(24,new D(34,13))),new t(23,Int32Array.from([6,30,54,78,102]),new H(30,new D(4,121),new D(5,122)),new H(28,new D(4,47),new D(14,48)),new H(30,new D(11,24),new D(14,25)),new H(30,new D(16,15),new D(14,16))),new t(24,Int32Array.from([6,28,54,80,106]),new H(30,new D(6,117),new D(4,118)),new H(28,new D(6,45),new D(14,46)),new H(30,new D(11,24),new D(16,25)),new H(30,new D(30,16),new D(2,17))),new t(25,Int32Array.from([6,32,58,84,110]),new H(26,new D(8,106),new D(4,107)),new H(28,new D(8,47),new D(13,48)),new H(30,new D(7,24),new D(22,25)),new H(30,new D(22,15),new D(13,16))),new t(26,Int32Array.from([6,30,58,86,114]),new H(28,new D(10,114),new D(2,115)),new H(28,new D(19,46),new D(4,47)),new H(28,new D(28,22),new D(6,23)),new H(30,new D(33,16),new D(4,17))),new t(27,Int32Array.from([6,34,62,90,118]),new H(30,new D(8,122),new D(4,123)),new H(28,new D(22,45),new D(3,46)),new H(30,new D(8,23),new D(26,24)),new H(30,new D(12,15),new D(28,16))),new t(28,Int32Array.from([6,26,50,74,98,122]),new H(30,new D(3,117),new D(10,118)),new H(28,new D(3,45),new D(23,46)),new H(30,new D(4,24),new D(31,25)),new H(30,new D(11,15),new D(31,16))),new t(29,Int32Array.from([6,30,54,78,102,126]),new H(30,new D(7,116),new D(7,117)),new H(28,new D(21,45),new D(7,46)),new H(30,new D(1,23),new D(37,24)),new H(30,new D(19,15),new D(26,16))),new t(30,Int32Array.from([6,26,52,78,104,130]),new H(30,new D(5,115),new D(10,116)),new H(28,new D(19,47),new D(10,48)),new H(30,new D(15,24),new D(25,25)),new H(30,new D(23,15),new D(25,16))),new t(31,Int32Array.from([6,30,56,82,108,134]),new H(30,new D(13,115),new D(3,116)),new H(28,new D(2,46),new D(29,47)),new H(30,new D(42,24),new D(1,25)),new H(30,new D(23,15),new D(28,16))),new t(32,Int32Array.from([6,34,60,86,112,138]),new H(30,new D(17,115)),new H(28,new D(10,46),new D(23,47)),new H(30,new D(10,24),new D(35,25)),new H(30,new D(19,15),new D(35,16))),new t(33,Int32Array.from([6,30,58,86,114,142]),new H(30,new D(17,115),new D(1,116)),new H(28,new D(14,46),new D(21,47)),new H(30,new D(29,24),new D(19,25)),new H(30,new D(11,15),new D(46,16))),new t(34,Int32Array.from([6,34,62,90,118,146]),new H(30,new D(13,115),new D(6,116)),new H(28,new D(14,46),new D(23,47)),new H(30,new D(44,24),new D(7,25)),new H(30,new D(59,16),new D(1,17))),new t(35,Int32Array.from([6,30,54,78,102,126,150]),new H(30,new D(12,121),new D(7,122)),new H(28,new D(12,47),new D(26,48)),new H(30,new D(39,24),new D(14,25)),new H(30,new D(22,15),new D(41,16))),new t(36,Int32Array.from([6,24,50,76,102,128,154]),new H(30,new D(6,121),new D(14,122)),new H(28,new D(6,47),new D(34,48)),new H(30,new D(46,24),new D(10,25)),new H(30,new D(2,15),new D(64,16))),new t(37,Int32Array.from([6,28,54,80,106,132,158]),new H(30,new D(17,122),new D(4,123)),new H(28,new D(29,46),new D(14,47)),new H(30,new D(49,24),new D(10,25)),new H(30,new D(24,15),new D(46,16))),new t(38,Int32Array.from([6,32,58,84,110,136,162]),new H(30,new D(4,122),new D(18,123)),new H(28,new D(13,46),new D(32,47)),new H(30,new D(48,24),new D(14,25)),new H(30,new D(42,15),new D(32,16))),new t(39,Int32Array.from([6,26,54,82,110,138,166]),new H(30,new D(20,117),new D(4,118)),new H(28,new D(40,47),new D(7,48)),new H(30,new D(43,24),new D(22,25)),new H(30,new D(10,15),new D(67,16))),new t(40,Int32Array.from([6,30,58,86,114,142,170]),new H(30,new D(19,118),new D(6,119)),new H(28,new D(18,47),new D(31,48)),new H(30,new D(34,24),new D(34,25)),new H(30,new D(20,15),new D(61,16)))],t}(),di=zB;var jr=function(t){return t[t.DATA_MASK_000=0]="DATA_MASK_000",t[t.DATA_MASK_001=1]="DATA_MASK_001",t[t.DATA_MASK_010=2]="DATA_MASK_010",t[t.DATA_MASK_011=3]="DATA_MASK_011",t[t.DATA_MASK_100=4]="DATA_MASK_100",t[t.DATA_MASK_101=5]="DATA_MASK_101",t[t.DATA_MASK_110=6]="DATA_MASK_110",t[t.DATA_MASK_111=7]="DATA_MASK_111",t}(jr||{}),GB=function(){function t(e,r){this.value=e,this.isMasked=r}return t.prototype.unmaskBitMatrix=function(e,r){for(var n=0;n<r;n++)for(var o=0;o<r;o++)this.isMasked(n,o)&&e.flip(o,n)},t.values=new Map([[jr.DATA_MASK_000,new t(jr.DATA_MASK_000,function(e,r){return(e+r&1)===0})],[jr.DATA_MASK_001,new t(jr.DATA_MASK_001,function(e,r){return(e&1)===0})],[jr.DATA_MASK_010,new t(jr.DATA_MASK_010,function(e,r){return r%3===0})],[jr.DATA_MASK_011,new t(jr.DATA_MASK_011,function(e,r){return(e+r)%3===0})],[jr.DATA_MASK_100,new t(jr.DATA_MASK_100,function(e,r){return(Math.floor(e/2)+Math.floor(r/3)&1)===0})],[jr.DATA_MASK_101,new t(jr.DATA_MASK_101,function(e,r){return e*r%6===0})],[jr.DATA_MASK_110,new t(jr.DATA_MASK_110,function(e,r){return e*r%6<3})],[jr.DATA_MASK_111,new t(jr.DATA_MASK_111,function(e,r){return(e+r+e*r%3&1)===0})]]),t}(),Wf=GB;var WB=function(){function t(e){var r=e.getHeight();if(r<21||(r&3)!==1)throw new K;this.bitMatrix=e}return t.prototype.readFormatInformation=function(){if(this.parsedFormatInfo!==null&&this.parsedFormatInfo!==void 0)return this.parsedFormatInfo;for(var e=0,r=0;r<6;r++)e=this.copyBit(r,8,e);e=this.copyBit(7,8,e),e=this.copyBit(8,8,e),e=this.copyBit(8,7,e);for(var n=5;n>=0;n--)e=this.copyBit(8,n,e);for(var o=this.bitMatrix.getHeight(),a=0,u=o-7,n=o-1;n>=u;n--)a=this.copyBit(8,n,a);for(var r=o-8;r<o;r++)a=this.copyBit(r,8,a);if(this.parsedFormatInfo=bl.decodeFormatInformation(e,a),this.parsedFormatInfo!==null)return this.parsedFormatInfo;throw new K},t.prototype.readVersion=function(){if(this.parsedVersion!==null&&this.parsedVersion!==void 0)return this.parsedVersion;var e=this.bitMatrix.getHeight(),r=Math.floor((e-17)/4);if(r<=6)return di.getVersionForNumber(r);for(var n=0,o=e-11,a=5;a>=0;a--)for(var u=e-9;u>=o;u--)n=this.copyBit(u,a,n);var s=di.decodeVersionInformation(n);if(s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;n=0;for(var u=5;u>=0;u--)for(var a=e-9;a>=o;a--)n=this.copyBit(u,a,n);if(s=di.decodeVersionInformation(n),s!==null&&s.getDimensionForVersion()===e)return this.parsedVersion=s,s;throw new K},t.prototype.copyBit=function(e,r,n){var o=this.isMirror?this.bitMatrix.get(r,e):this.bitMatrix.get(e,r);return o?n<<1|1:n<<1},t.prototype.readCodewords=function(){var e=this.readFormatInformation(),r=this.readVersion(),n=Wf.values.get(e.getDataMask()),o=this.bitMatrix.getHeight();n.unmaskBitMatrix(this.bitMatrix,o);for(var a=r.buildFunctionPattern(),u=!0,s=new Uint8Array(r.getTotalCodewords()),l=0,i=0,c=0,f=o-1;f>0;f-=2){f===6&&f--;for(var d=0;d<o;d++)for(var h=u?o-1-d:d,p=0;p<2;p++)a.get(f-p,h)||(c++,i<<=1,this.bitMatrix.get(f-p,h)&&(i|=1),c===8&&(s[l++]=i,c=0,i=0));u=!u}if(l!==r.getTotalCodewords())throw new K;return s},t.prototype.remask=function(){if(this.parsedFormatInfo!==null){var e=Wf.values.get(this.parsedFormatInfo.getDataMask()),r=this.bitMatrix.getHeight();e.unmaskBitMatrix(this.bitMatrix,r)}},t.prototype.setMirror=function(e){this.parsedVersion=null,this.parsedFormatInfo=null,this.isMirror=e},t.prototype.mirror=function(){for(var e=this.bitMatrix,r=0,n=e.getWidth();r<n;r++)for(var o=r+1,a=e.getHeight();o<a;o++)e.get(r,o)!==e.get(o,r)&&(e.flip(o,r),e.flip(r,o))},t}(),Mx=WB;var Nx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},qB=function(){function t(e,r){this.numDataCodewords=e,this.codewords=r}return t.getDataBlocks=function(e,r,n){var o,a,u,s;if(e.length!==r.getTotalCodewords())throw new re;var l=r.getECBlocksForLevel(n),i=0,c=l.getECBlocks();try{for(var f=Nx(c),d=f.next();!d.done;d=f.next()){var h=d.value;i+=h.getCount()}}catch(ye){o={error:ye}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}var p=new Array(i),m=0;try{for(var v=Nx(c),x=v.next();!x.done;x=v.next())for(var h=x.value,y=0;y<h.getCount();y++){var _=h.getDataCodewords(),I=l.getECCodewordsPerBlock()+_;p[m++]=new t(_,new Uint8Array(I))}}catch(ye){u={error:ye}}finally{try{x&&!x.done&&(s=v.return)&&s.call(v)}finally{if(u)throw u.error}}for(var C=p[0].codewords.length,V=p.length-1;V>=0;){var z=p[V].codewords.length;if(z===C)break;V--}V++;for(var W=C-l.getECCodewordsPerBlock(),k=0,y=0;y<W;y++)for(var X=0;X<m;X++)p[X].codewords[y]=e[k++];for(var X=V;X<m;X++)p[X].codewords[W]=e[k++];for(var ke=p[0].codewords.length,y=W;y<ke;y++)for(var X=0;X<m;X++){var me=X<V?y:y+1;p[X].codewords[me]=e[k++]}return p},t.prototype.getNumDataCodewords=function(){return this.numDataCodewords},t.prototype.getCodewords=function(){return this.codewords},t}(),Rx=qB;var hi=function(t){return t[t.TERMINATOR=0]="TERMINATOR",t[t.NUMERIC=1]="NUMERIC",t[t.ALPHANUMERIC=2]="ALPHANUMERIC",t[t.STRUCTURED_APPEND=3]="STRUCTURED_APPEND",t[t.BYTE=4]="BYTE",t[t.ECI=5]="ECI",t[t.KANJI=6]="KANJI",t[t.FNC1_FIRST_POSITION=7]="FNC1_FIRST_POSITION",t[t.FNC1_SECOND_POSITION=8]="FNC1_SECOND_POSITION",t[t.HANZI=9]="HANZI",t}(hi||{}),XB=function(){function t(e,r,n,o){this.value=e,this.stringValue=r,this.characterCountBitsForVersions=n,this.bits=o,t.FOR_BITS.set(o,this),t.FOR_VALUE.set(e,this)}return t.forBits=function(e){var r=t.FOR_BITS.get(e);if(r===void 0)throw new re;return r},t.prototype.getCharacterCountBits=function(e){var r=e.getVersionNumber(),n;return r<=9?n=0:r<=26?n=1:n=2,this.characterCountBitsForVersions[n]},t.prototype.getValue=function(){return this.value},t.prototype.getBits=function(){return this.bits},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;return this.value===r.value},t.prototype.toString=function(){return this.stringValue},t.FOR_BITS=new Map,t.FOR_VALUE=new Map,t.TERMINATOR=new t(hi.TERMINATOR,"TERMINATOR",Int32Array.from([0,0,0]),0),t.NUMERIC=new t(hi.NUMERIC,"NUMERIC",Int32Array.from([10,12,14]),1),t.ALPHANUMERIC=new t(hi.ALPHANUMERIC,"ALPHANUMERIC",Int32Array.from([9,11,13]),2),t.STRUCTURED_APPEND=new t(hi.STRUCTURED_APPEND,"STRUCTURED_APPEND",Int32Array.from([0,0,0]),3),t.BYTE=new t(hi.BYTE,"BYTE",Int32Array.from([8,16,16]),4),t.ECI=new t(hi.ECI,"ECI",Int32Array.from([0,0,0]),7),t.KANJI=new t(hi.KANJI,"KANJI",Int32Array.from([8,10,12]),8),t.FNC1_FIRST_POSITION=new t(hi.FNC1_FIRST_POSITION,"FNC1_FIRST_POSITION",Int32Array.from([0,0,0]),5),t.FNC1_SECOND_POSITION=new t(hi.FNC1_SECOND_POSITION,"FNC1_SECOND_POSITION",Int32Array.from([0,0,0]),9),t.HANZI=new t(hi.HANZI,"HANZI",Int32Array.from([8,10,12]),13),t}(),St=XB;var YB=function(){function t(){}return t.decode=function(e,r,n,o){var a=new yl(e),u=new de,s=new Array,l=-1,i=-1;try{var c=null,f=!1,d=void 0;do{if(a.available()<4)d=St.TERMINATOR;else{var h=a.readBits(4);d=St.forBits(h)}switch(d){case St.TERMINATOR:break;case St.FNC1_FIRST_POSITION:case St.FNC1_SECOND_POSITION:f=!0;break;case St.STRUCTURED_APPEND:if(a.available()<16)throw new K;l=a.readBits(8),i=a.readBits(8);break;case St.ECI:var p=t.parseECIValue(a);if(c=Mt.getCharacterSetECIByValue(p),c===null)throw new K;break;case St.HANZI:var m=a.readBits(4),v=a.readBits(d.getCharacterCountBits(r));m===t.GB2312_SUBSET&&t.decodeHanziSegment(a,u,v);break;default:var x=a.readBits(d.getCharacterCountBits(r));switch(d){case St.NUMERIC:t.decodeNumericSegment(a,u,x);break;case St.ALPHANUMERIC:t.decodeAlphanumericSegment(a,u,x,f);break;case St.BYTE:t.decodeByteSegment(a,u,x,c,s,o);break;case St.KANJI:t.decodeKanjiSegment(a,u,x);break;default:throw new K}break}}while(d!==St.TERMINATOR)}catch{throw new K}return new no(e,u.toString(),s.length===0?null:s,n===null?null:n.toString(),l,i)},t.decodeHanziSegment=function(e,r,n){if(n*13>e.available())throw new K;for(var o=new Uint8Array(2*n),a=0;n>0;){var u=e.readBits(13),s=u/96<<8&4294967295|u%96;s<959?s+=41377:s+=42657,o[a]=s>>8&255,o[a+1]=s&255,a+=2,n--}try{r.append(Sr.decode(o,_e.GB2312))}catch(l){throw new K(l)}},t.decodeKanjiSegment=function(e,r,n){if(n*13>e.available())throw new K;for(var o=new Uint8Array(2*n),a=0;n>0;){var u=e.readBits(13),s=u/192<<8&4294967295|u%192;s<7936?s+=33088:s+=49472,o[a]=s>>8,o[a+1]=s,a+=2,n--}try{r.append(Sr.decode(o,_e.SHIFT_JIS))}catch(l){throw new K(l)}},t.decodeByteSegment=function(e,r,n,o,a,u){if(8*n>e.available())throw new K;for(var s=new Uint8Array(n),l=0;l<n;l++)s[l]=e.readBits(8);var i;o===null?i=_e.guessEncoding(s,u):i=o.getName();try{r.append(Sr.decode(s,i))}catch(c){throw new K(c)}a.push(s)},t.toAlphaNumericChar=function(e){if(e>=t.ALPHANUMERIC_CHARS.length)throw new K;return t.ALPHANUMERIC_CHARS[e]},t.decodeAlphanumericSegment=function(e,r,n,o){for(var a=r.length();n>1;){if(e.available()<11)throw new K;var u=e.readBits(11);r.append(t.toAlphaNumericChar(Math.floor(u/45))),r.append(t.toAlphaNumericChar(u%45)),n-=2}if(n===1){if(e.available()<6)throw new K;r.append(t.toAlphaNumericChar(e.readBits(6)))}if(o)for(var s=a;s<r.length();s++)r.charAt(s)==="%"&&(s<r.length()-1&&r.charAt(s+1)==="%"?r.deleteCharAt(s+1):r.setCharAt(s,""))},t.decodeNumericSegment=function(e,r,n){for(;n>=3;){if(e.available()<10)throw new K;var o=e.readBits(10);if(o>=1e3)throw new K;r.append(t.toAlphaNumericChar(Math.floor(o/100))),r.append(t.toAlphaNumericChar(Math.floor(o/10)%10)),r.append(t.toAlphaNumericChar(o%10)),n-=3}if(n===2){if(e.available()<7)throw new K;var a=e.readBits(7);if(a>=100)throw new K;r.append(t.toAlphaNumericChar(Math.floor(a/10))),r.append(t.toAlphaNumericChar(a%10))}else if(n===1){if(e.available()<4)throw new K;var u=e.readBits(4);if(u>=10)throw new K;r.append(t.toAlphaNumericChar(u))}},t.parseECIValue=function(e){var r=e.readBits(8);if(!(r&128))return r&127;if((r&192)===128){var n=e.readBits(8);return(r&63)<<8&4294967295|n}if((r&224)===192){var o=e.readBits(16);return(r&31)<<16&4294967295|o}throw new K},t.ALPHANUMERIC_CHARS="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:",t.GB2312_SUBSET=1,t}(),Rg=YB;var ZB=function(){function t(e){this.mirrored=e}return t.prototype.isMirrored=function(){return this.mirrored},t.prototype.applyMirroredCorrection=function(e){if(!(!this.mirrored||e===null||e.length<3)){var r=e[0];e[0]=e[2],e[2]=r}},t}(),qf=ZB;var Fx=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},KB=function(){function t(){this.rsDecoder=new io(nr.QR_CODE_FIELD_256)}return t.prototype.decodeBooleanArray=function(e,r){return this.decodeBitMatrix(Nt.parseFromBooleanArray(e),r)},t.prototype.decodeBitMatrix=function(e,r){var n=new Mx(e),o=null;try{return this.decodeBitMatrixParser(n,r)}catch(u){o=u}try{n.remask(),n.setMirror(!0),n.readVersion(),n.readFormatInformation(),n.mirror();var a=this.decodeBitMatrixParser(n,r);return a.setOther(new qf(!0)),a}catch(u){throw o!==null?o:u}},t.prototype.decodeBitMatrixParser=function(e,r){var n,o,a,u,s=e.readVersion(),l=e.readFormatInformation().getErrorCorrectionLevel(),i=e.readCodewords(),c=Rx.getDataBlocks(i,s,l),f=0;try{for(var d=Fx(c),h=d.next();!h.done;h=d.next()){var p=h.value;f+=p.getNumDataCodewords()}}catch(V){n={error:V}}finally{try{h&&!h.done&&(o=d.return)&&o.call(d)}finally{if(n)throw n.error}}var m=new Uint8Array(f),v=0;try{for(var x=Fx(c),y=x.next();!y.done;y=x.next()){var p=y.value,_=p.getCodewords(),I=p.getNumDataCodewords();this.correctErrors(_,I);for(var C=0;C<I;C++)m[v++]=_[C]}}catch(V){a={error:V}}finally{try{y&&!y.done&&(u=x.return)&&u.call(x)}finally{if(a)throw a.error}}return Rg.decode(m,s,l,r)},t.prototype.correctErrors=function(e,r){var n=new Int32Array(e);try{this.rsDecoder.decode(n,e.length-r)}catch{throw new nt}for(var o=0;o<r;o++)e[o]=n[o]},t}(),kx=KB;var QB=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),JB=function(t){QB(e,t);function e(r,n,o){var a=t.call(this,r,n)||this;return a.estimatedModuleSize=o,a}return e.prototype.aboutEquals=function(r,n,o){if(Math.abs(n-this.getY())<=r&&Math.abs(o-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,o){var a=(this.getX()+n)/2,u=(this.getY()+r)/2,s=(this.estimatedModuleSize+o)/2;return new e(a,u,s)},e}(se),Lx=JB;var e$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},t$=function(){function t(e,r,n,o,a,u,s){this.image=e,this.startX=r,this.startY=n,this.width=o,this.height=a,this.moduleSize=u,this.resultPointCallback=s,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(3)}return t.prototype.find=function(){for(var e=this.startX,r=this.height,n=this.width,o=e+n,a=this.startY+r/2,u=new Int32Array(3),s=this.image,l=0;l<r;l++){var i=a+(l&1?-Math.floor((l+1)/2):Math.floor((l+1)/2));u[0]=0,u[1]=0,u[2]=0;for(var c=e;c<o&&!s.get(c,i);)c++;for(var f=0;c<o;){if(s.get(c,i))if(f===1)u[1]++;else if(f===2){if(this.foundPatternCross(u)){var d=this.handlePossibleCenter(u,i,c);if(d!==null)return d}u[0]=u[2],u[1]=1,u[2]=0,f=1}else u[++f]++;else f===1&&f++,u[f]++;c++}if(this.foundPatternCross(u)){var d=this.handlePossibleCenter(u,i,o);if(d!==null)return d}}if(this.possibleCenters.length!==0)return this.possibleCenters[0];throw new L},t.centerFromEnd=function(e,r){return r-e[2]-e[1]/2},t.prototype.foundPatternCross=function(e){for(var r=this.moduleSize,n=r/2,o=0;o<3;o++)if(Math.abs(r-e[o])>=n)return!1;return!0},t.prototype.crossCheckVertical=function(e,r,n,o){var a=this.image,u=a.getHeight(),s=this.crossCheckStateCount;s[0]=0,s[1]=0,s[2]=0;for(var l=e;l>=0&&a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&!a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(r,l)&&s[1]<=n;)s[1]++,l++;if(l===u||s[1]>n)return NaN;for(;l<u&&!a.get(r,l)&&s[2]<=n;)s[2]++,l++;if(s[2]>n)return NaN;var i=s[0]+s[1]+s[2];return 5*Math.abs(i-o)>=2*o?NaN:this.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n){var o,a,u=e[0]+e[1]+e[2],s=t.centerFromEnd(e,n),l=this.crossCheckVertical(r,s,2*e[1],u);if(!isNaN(l)){var i=(e[0]+e[1]+e[2])/3;try{for(var c=e$(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value;if(d.aboutEquals(i,l,s))return d.combineEstimate(l,s,i)}}catch(p){o={error:p}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}var h=new Lx(s,l,i);this.possibleCenters.push(h),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(h)}return null},t}(),Bx=t$;var r$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),n$=function(t){r$(e,t);function e(r,n,o,a){var u=t.call(this,r,n)||this;return u.estimatedModuleSize=o,u.count=a,a===void 0&&(u.count=1),u}return e.prototype.getEstimatedModuleSize=function(){return this.estimatedModuleSize},e.prototype.getCount=function(){return this.count},e.prototype.aboutEquals=function(r,n,o){if(Math.abs(n-this.getY())<=r&&Math.abs(o-this.getX())<=r){var a=Math.abs(r-this.estimatedModuleSize);return a<=1||a<=this.estimatedModuleSize}return!1},e.prototype.combineEstimate=function(r,n,o){var a=this.count+1,u=(this.count*this.getX()+n)/a,s=(this.count*this.getY()+r)/a,l=(this.count*this.estimatedModuleSize+o)/a;return new e(u,s,l,a)},e}(se),$x=n$;var i$=function(){function t(e){this.bottomLeft=e[0],this.topLeft=e[1],this.topRight=e[2]}return t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t}(),Vx=i$;var wl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},o$=function(){function t(e,r){this.image=e,this.resultPointCallback=r,this.possibleCenters=[],this.crossCheckStateCount=new Int32Array(5),this.resultPointCallback=r}return t.prototype.getImage=function(){return this.image},t.prototype.getPossibleCenters=function(){return this.possibleCenters},t.prototype.find=function(e){var r=e!=null&&e.get(Me.TRY_HARDER)!==void 0,n=e!=null&&e.get(Me.PURE_BARCODE)!==void 0,o=this.image,a=o.getHeight(),u=o.getWidth(),s=Math.floor(3*a/(4*t.MAX_MODULES));(s<t.MIN_SKIP||r)&&(s=t.MIN_SKIP);for(var l=!1,i=new Int32Array(5),c=s-1;c<a&&!l;c+=s){i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0;for(var f=0,d=0;d<u;d++)if(o.get(d,c))(f&1)===1&&f++,i[f]++;else if(f&1)i[f]++;else if(f===4)if(t.foundPatternCross(i)){var h=this.handlePossibleCenter(i,c,d,n);if(h===!0)if(s=2,this.hasSkipped===!0)l=this.haveMultiplyConfirmedCenters();else{var p=this.findRowSkip();p>i[2]&&(c+=p-i[2]-s,d=u-1)}else{i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,f=3;continue}f=0,i[0]=0,i[1]=0,i[2]=0,i[3]=0,i[4]=0}else i[0]=i[2],i[1]=i[3],i[2]=i[4],i[3]=1,i[4]=0,f=3;else i[++f]++;if(t.foundPatternCross(i)){var h=this.handlePossibleCenter(i,c,u,n);h===!0&&(s=i[0],this.hasSkipped&&(l=this.haveMultiplyConfirmedCenters()))}}var m=this.selectBestPatterns();return se.orderBestPatterns(m),new Vx(m)},t.centerFromEnd=function(e,r){return r-e[4]-e[3]-e[2]/2},t.foundPatternCross=function(e){for(var r=0,n=0;n<5;n++){var o=e[n];if(o===0)return!1;r+=o}if(r<7)return!1;var a=r/7,u=a/2;return Math.abs(a-e[0])<u&&Math.abs(a-e[1])<u&&Math.abs(3*a-e[2])<3*u&&Math.abs(a-e[3])<u&&Math.abs(a-e[4])<u},t.prototype.getCrossCheckStateCount=function(){var e=this.crossCheckStateCount;return e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e},t.prototype.crossCheckDiagonal=function(e,r,n,o){for(var a=this.getCrossCheckStateCount(),u=0,s=this.image;e>=u&&r>=u&&s.get(r-u,e-u);)a[2]++,u++;if(e<u||r<u)return!1;for(;e>=u&&r>=u&&!s.get(r-u,e-u)&&a[1]<=n;)a[1]++,u++;if(e<u||r<u||a[1]>n)return!1;for(;e>=u&&r>=u&&s.get(r-u,e-u)&&a[0]<=n;)a[0]++,u++;if(a[0]>n)return!1;var l=s.getHeight(),i=s.getWidth();for(u=1;e+u<l&&r+u<i&&s.get(r+u,e+u);)a[2]++,u++;if(e+u>=l||r+u>=i)return!1;for(;e+u<l&&r+u<i&&!s.get(r+u,e+u)&&a[3]<n;)a[3]++,u++;if(e+u>=l||r+u>=i||a[3]>=n)return!1;for(;e+u<l&&r+u<i&&s.get(r+u,e+u)&&a[4]<n;)a[4]++,u++;if(a[4]>=n)return!1;var c=a[0]+a[1]+a[2]+a[3]+a[4];return Math.abs(c-o)<2*o&&t.foundPatternCross(a)},t.prototype.crossCheckVertical=function(e,r,n,o){for(var a=this.image,u=a.getHeight(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(r,l);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(r,l)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(r,l)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(r,l);)s[2]++,l++;if(l===u)return NaN;for(;l<u&&!a.get(r,l)&&s[3]<n;)s[3]++,l++;if(l===u||s[3]>=n)return NaN;for(;l<u&&a.get(r,l)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var i=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(i-o)>=2*o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.crossCheckHorizontal=function(e,r,n,o){for(var a=this.image,u=a.getWidth(),s=this.getCrossCheckStateCount(),l=e;l>=0&&a.get(l,r);)s[2]++,l--;if(l<0)return NaN;for(;l>=0&&!a.get(l,r)&&s[1]<=n;)s[1]++,l--;if(l<0||s[1]>n)return NaN;for(;l>=0&&a.get(l,r)&&s[0]<=n;)s[0]++,l--;if(s[0]>n)return NaN;for(l=e+1;l<u&&a.get(l,r);)s[2]++,l++;if(l===u)return NaN;for(;l<u&&!a.get(l,r)&&s[3]<n;)s[3]++,l++;if(l===u||s[3]>=n)return NaN;for(;l<u&&a.get(l,r)&&s[4]<n;)s[4]++,l++;if(s[4]>=n)return NaN;var i=s[0]+s[1]+s[2]+s[3]+s[4];return 5*Math.abs(i-o)>=o?NaN:t.foundPatternCross(s)?t.centerFromEnd(s,l):NaN},t.prototype.handlePossibleCenter=function(e,r,n,o){var a=e[0]+e[1]+e[2]+e[3]+e[4],u=t.centerFromEnd(e,n),s=this.crossCheckVertical(r,Math.floor(u),e[2],a);if(!isNaN(s)&&(u=this.crossCheckHorizontal(Math.floor(u),Math.floor(s),e[2],a),!isNaN(u)&&(!o||this.crossCheckDiagonal(Math.floor(s),Math.floor(u),e[2],a)))){for(var l=a/7,i=!1,c=this.possibleCenters,f=0,d=c.length;f<d;f++){var h=c[f];if(h.aboutEquals(l,s,u)){c[f]=h.combineEstimate(s,u,l),i=!0;break}}if(!i){var p=new $x(u,s,l);c.push(p),this.resultPointCallback!==null&&this.resultPointCallback!==void 0&&this.resultPointCallback.foundPossibleResultPoint(p)}return!0}return!1},t.prototype.findRowSkip=function(){var e,r,n=this.possibleCenters.length;if(n<=1)return 0;var o=null;try{for(var a=wl(this.possibleCenters),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.getCount()>=t.CENTER_QUORUM)if(o==null)o=s;else return this.hasSkipped=!0,Math.floor((Math.abs(o.getX()-s.getX())-Math.abs(o.getY()-s.getY()))/2)}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return 0},t.prototype.haveMultiplyConfirmedCenters=function(){var e,r,n,o,a=0,u=0,s=this.possibleCenters.length;try{for(var l=wl(this.possibleCenters),i=l.next();!i.done;i=l.next()){var c=i.value;c.getCount()>=t.CENTER_QUORUM&&(a++,u+=c.getEstimatedModuleSize())}}catch(m){e={error:m}}finally{try{i&&!i.done&&(r=l.return)&&r.call(l)}finally{if(e)throw e.error}}if(a<3)return!1;var f=u/s,d=0;try{for(var h=wl(this.possibleCenters),p=h.next();!p.done;p=h.next()){var c=p.value;d+=Math.abs(c.getEstimatedModuleSize()-f)}}catch(m){n={error:m}}finally{try{p&&!p.done&&(o=h.return)&&o.call(h)}finally{if(n)throw n.error}}return d<=.05*u},t.prototype.selectBestPatterns=function(){var e,r,n,o,a=this.possibleCenters.length;if(a<3)throw new L;var u=this.possibleCenters,s;if(a>3){var l=0,i=0;try{for(var c=wl(this.possibleCenters),f=c.next();!f.done;f=c.next()){var d=f.value,h=d.getEstimatedModuleSize();l+=h,i+=h*h}}catch(C){e={error:C}}finally{try{f&&!f.done&&(r=c.return)&&r.call(c)}finally{if(e)throw e.error}}s=l/a;var p=Math.sqrt(i/a-s*s);u.sort(function(C,V){var z=Math.abs(V.getEstimatedModuleSize()-s),W=Math.abs(C.getEstimatedModuleSize()-s);return z<W?-1:z>W?1:0});for(var m=Math.max(.2*s,p),v=0;v<u.length&&u.length>3;v++){var x=u[v];Math.abs(x.getEstimatedModuleSize()-s)>m&&(u.splice(v,1),v--)}}if(u.length>3){var l=0;try{for(var y=wl(u),_=y.next();!_.done;_=y.next()){var I=_.value;l+=I.getEstimatedModuleSize()}}catch(V){n={error:V}}finally{try{_&&!_.done&&(o=y.return)&&o.call(y)}finally{if(n)throw n.error}}s=l/u.length,u.sort(function(V,z){if(z.getCount()===V.getCount()){var W=Math.abs(z.getEstimatedModuleSize()-s),k=Math.abs(V.getEstimatedModuleSize()-s);return W<k?1:W>k?-1:0}else return z.getCount()-V.getCount()}),u.splice(3)}return[u[0],u[1],u[2]]},t.CENTER_QUORUM=2,t.MIN_SKIP=3,t.MAX_MODULES=57,t}(),jx=o$;var a$=function(){function t(e){this.image=e}return t.prototype.getImage=function(){return this.image},t.prototype.getResultPointCallback=function(){return this.resultPointCallback},t.prototype.detect=function(e){this.resultPointCallback=e==null?null:e.get(Me.NEED_RESULT_POINT_CALLBACK);var r=new jx(this.image,this.resultPointCallback),n=r.find(e);return this.processFinderPatternInfo(n)},t.prototype.processFinderPatternInfo=function(e){var r=e.getTopLeft(),n=e.getTopRight(),o=e.getBottomLeft(),a=this.calculateModuleSize(r,n,o);if(a<1)throw new L("No pattern found in proccess finder.");var u=t.computeDimension(r,n,o,a),s=di.getProvisionalVersionForDimension(u),l=s.getDimensionForVersion()-7,i=null;if(s.getAlignmentPatternCenters().length>0)for(var c=n.getX()-r.getX()+o.getX(),f=n.getY()-r.getY()+o.getY(),d=1-3/l,h=Math.floor(r.getX()+d*(c-r.getX())),p=Math.floor(r.getY()+d*(f-r.getY())),m=4;m<=16;m<<=1)try{i=this.findAlignmentInRegion(a,h,p,m);break}catch(_){if(!(_ instanceof L))throw _}var v=t.createTransform(r,n,o,i,u),x=t.sampleGrid(this.image,v,u),y;return i===null?y=[o,r,n]:y=[o,r,n,i],new _a(x,y)},t.createTransform=function(e,r,n,o,a){var u=a-3.5,s,l,i,c;return o!==null?(s=o.getX(),l=o.getY(),i=u-3,c=i):(s=r.getX()-e.getX()+n.getX(),l=r.getY()-e.getY()+n.getY(),i=u,c=u),gl.quadrilateralToQuadrilateral(3.5,3.5,u,3.5,i,c,3.5,u,e.getX(),e.getY(),r.getX(),r.getY(),s,l,n.getX(),n.getY())},t.sampleGrid=function(e,r,n){var o=Ea.getInstance();return o.sampleGridWithTransform(e,n,n,r)},t.computeDimension=function(e,r,n,o){var a=Ne.round(se.distance(e,r)/o),u=Ne.round(se.distance(e,n)/o),s=Math.floor((a+u)/2)+7;switch(s&3){case 0:s++;break;case 2:s--;break;case 3:throw new L("Dimensions could be not found.")}return s},t.prototype.calculateModuleSize=function(e,r,n){return(this.calculateModuleSizeOneWay(e,r)+this.calculateModuleSizeOneWay(e,n))/2},t.prototype.calculateModuleSizeOneWay=function(e,r){var n=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(e.getX()),Math.floor(e.getY()),Math.floor(r.getX()),Math.floor(r.getY())),o=this.sizeOfBlackWhiteBlackRunBothWays(Math.floor(r.getX()),Math.floor(r.getY()),Math.floor(e.getX()),Math.floor(e.getY()));return isNaN(n)?o/7:isNaN(o)?n/7:(n+o)/14},t.prototype.sizeOfBlackWhiteBlackRunBothWays=function(e,r,n,o){var a=this.sizeOfBlackWhiteBlackRun(e,r,n,o),u=1,s=e-(n-e);s<0?(u=e/(e-s),s=0):s>=this.image.getWidth()&&(u=(this.image.getWidth()-1-e)/(s-e),s=this.image.getWidth()-1);var l=Math.floor(r-(o-r)*u);return u=1,l<0?(u=r/(r-l),l=0):l>=this.image.getHeight()&&(u=(this.image.getHeight()-1-r)/(l-r),l=this.image.getHeight()-1),s=Math.floor(e+(s-e)*u),a+=this.sizeOfBlackWhiteBlackRun(e,r,s,l),a-1},t.prototype.sizeOfBlackWhiteBlackRun=function(e,r,n,o){var a=Math.abs(o-r)>Math.abs(n-e);if(a){var u=e;e=r,r=u,u=n,n=o,o=u}for(var s=Math.abs(n-e),l=Math.abs(o-r),i=-s/2,c=e<n?1:-1,f=r<o?1:-1,d=0,h=n+c,p=e,m=r;p!==h;p+=c){var v=a?m:p,x=a?p:m;if(d===1===this.image.get(v,x)){if(d===2)return Ne.distance(p,m,e,r);d++}if(i+=l,i>0){if(m===o)break;m+=f,i-=s}}return d===2?Ne.distance(n+c,o,e,r):NaN},t.prototype.findAlignmentInRegion=function(e,r,n,o){var a=Math.floor(o*e),u=Math.max(0,r-a),s=Math.min(this.image.getWidth()-1,r+a);if(s-u<e*3)throw new L("Alignment top exceeds estimated module size.");var l=Math.max(0,n-a),i=Math.min(this.image.getHeight()-1,n+a);if(i-l<e*3)throw new L("Alignment bottom exceeds estimated module size.");var c=new Bx(this.image,u,l,s-u,i-l,e,this.resultPointCallback);return c.find()},t}(),Ux=a$;var s$=function(){function t(){this.decoder=new kx}return t.prototype.getDecoder=function(){return this.decoder},t.prototype.decode=function(e,r){var n,o;if(r!=null&&r.get(Me.PURE_BARCODE)!==void 0){var a=t.extractPureBits(e.getBlackMatrix());n=this.decoder.decodeBitMatrix(a,r),o=t.NO_POINTS}else{var u=new Ux(e.getBlackMatrix()).detect(r);n=this.decoder.decodeBitMatrix(u.getBits(),r),o=u.getPoints()}n.getOther()instanceof qf&&n.getOther().applyMirroredCorrection(o);var s=new rt(n.getText(),n.getRawBytes(),void 0,o,ae.QR_CODE,void 0),l=n.getByteSegments();l!==null&&s.putMetadata(Lt.BYTE_SEGMENTS,l);var i=n.getECLevel();return i!==null&&s.putMetadata(Lt.ERROR_CORRECTION_LEVEL,i),n.hasStructuredAppend()&&(s.putMetadata(Lt.STRUCTURED_APPEND_SEQUENCE,n.getStructuredAppendSequenceNumber()),s.putMetadata(Lt.STRUCTURED_APPEND_PARITY,n.getStructuredAppendParity())),s},t.prototype.reset=function(){},t.extractPureBits=function(e){var r=e.getTopLeftOnBit(),n=e.getBottomRightOnBit();if(r===null||n===null)throw new L;var o=this.moduleSize(r,e),a=r[1],u=n[1],s=r[0],l=n[0];if(s>=l||a>=u)throw new L;if(u-a!==l-s&&(l=s+(u-a),l>=e.getWidth()))throw new L;var i=Math.round((l-s+1)/o),c=Math.round((u-a+1)/o);if(i<=0||c<=0)throw new L;if(c!==i)throw new L;var f=Math.floor(o/2);a+=f,s+=f;var d=s+Math.floor((i-1)*o)-l;if(d>0){if(d>f)throw new L;s-=d}var h=a+Math.floor((c-1)*o)-u;if(h>0){if(h>f)throw new L;a-=h}for(var p=new Nt(i,c),m=0;m<c;m++)for(var v=a+Math.floor(m*o),x=0;x<i;x++)e.get(s+Math.floor(x*o),v)&&p.set(x,m);return p},t.moduleSize=function(e,r){for(var n=r.getHeight(),o=r.getWidth(),a=e[0],u=e[1],s=!0,l=0;a<o&&u<n;){if(s!==r.get(a,u)){if(++l===5)break;s=!s}a++,u++}if(a===o||u===n)throw new L;return(a-e[0])/7},t.NO_POINTS=new Array,t}(),Oo=s$;var u$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l$=function(){function t(){}return t.prototype.PDF417Common=function(){},t.getBitCountSum=function(e){return Ne.sum(e)},t.toIntArray=function(e){var r,n;if(e==null||!e.length)return t.EMPTY_INT_ARRAY;var o=new Int32Array(e.length),a=0;try{for(var u=u$(e),s=u.next();!s.done;s=u.next()){var l=s.value;o[a++]=l}}catch(i){r={error:i}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return o},t.getCodeword=function(e){var r=it.binarySearch(t.SYMBOL_TABLE,e&262143);return r<0?-1:(t.CODEWORD_TABLE[r]-1)%t.NUMBER_OF_CODEWORDS},t.NUMBER_OF_CODEWORDS=929,t.MAX_CODEWORDS_IN_BARCODE=t.NUMBER_OF_CODEWORDS-1,t.MIN_ROWS_IN_BARCODE=3,t.MAX_ROWS_IN_BARCODE=90,t.MODULES_IN_CODEWORD=17,t.MODULES_IN_STOP_PATTERN=18,t.BARS_IN_MODULE=8,t.EMPTY_INT_ARRAY=new Int32Array([]),t.SYMBOL_TABLE=Int32Array.from([66142,66170,66206,66236,66290,66292,66350,66382,66396,66454,66470,66476,66594,66600,66614,66626,66628,66632,66640,66654,66662,66668,66682,66690,66718,66720,66748,66758,66776,66798,66802,66804,66820,66824,66832,66846,66848,66876,66880,66936,66950,66956,66968,66992,67006,67022,67036,67042,67044,67048,67062,67118,67150,67164,67214,67228,67256,67294,67322,67350,67366,67372,67398,67404,67416,67438,67474,67476,67490,67492,67496,67510,67618,67624,67650,67656,67664,67678,67686,67692,67706,67714,67716,67728,67742,67744,67772,67782,67788,67800,67822,67826,67828,67842,67848,67870,67872,67900,67904,67960,67974,67992,68016,68030,68046,68060,68066,68068,68072,68086,68104,68112,68126,68128,68156,68160,68216,68336,68358,68364,68376,68400,68414,68448,68476,68494,68508,68536,68546,68548,68552,68560,68574,68582,68588,68654,68686,68700,68706,68708,68712,68726,68750,68764,68792,68802,68804,68808,68816,68830,68838,68844,68858,68878,68892,68920,68976,68990,68994,68996,69e3,69008,69022,69024,69052,69062,69068,69080,69102,69106,69108,69142,69158,69164,69190,69208,69230,69254,69260,69272,69296,69310,69326,69340,69386,69394,69396,69410,69416,69430,69442,69444,69448,69456,69470,69478,69484,69554,69556,69666,69672,69698,69704,69712,69726,69754,69762,69764,69776,69790,69792,69820,69830,69836,69848,69870,69874,69876,69890,69918,69920,69948,69952,70008,70022,70040,70064,70078,70094,70108,70114,70116,70120,70134,70152,70174,70176,70264,70384,70412,70448,70462,70496,70524,70542,70556,70584,70594,70600,70608,70622,70630,70636,70664,70672,70686,70688,70716,70720,70776,70896,71136,71180,71192,71216,71230,71264,71292,71360,71416,71452,71480,71536,71550,71554,71556,71560,71568,71582,71584,71612,71622,71628,71640,71662,71726,71732,71758,71772,71778,71780,71784,71798,71822,71836,71864,71874,71880,71888,71902,71910,71916,71930,71950,71964,71992,72048,72062,72066,72068,72080,72094,72096,72124,72134,72140,72152,72174,72178,72180,72206,72220,72248,72304,72318,72416,72444,72456,72464,72478,72480,72508,72512,72568,72588,72600,72624,72638,72654,72668,72674,72676,72680,72694,72726,72742,72748,72774,72780,72792,72814,72838,72856,72880,72894,72910,72924,72930,72932,72936,72950,72966,72972,72984,73008,73022,73056,73084,73102,73116,73144,73156,73160,73168,73182,73190,73196,73210,73226,73234,73236,73250,73252,73256,73270,73282,73284,73296,73310,73318,73324,73346,73348,73352,73360,73374,73376,73404,73414,73420,73432,73454,73498,73518,73522,73524,73550,73564,73570,73572,73576,73590,73800,73822,73858,73860,73872,73886,73888,73916,73944,73970,73972,73992,74014,74016,74044,74048,74104,74118,74136,74160,74174,74210,74212,74216,74230,74244,74256,74270,74272,74360,74480,74502,74508,74544,74558,74592,74620,74638,74652,74680,74690,74696,74704,74726,74732,74782,74784,74812,74992,75232,75288,75326,75360,75388,75456,75512,75576,75632,75646,75650,75652,75664,75678,75680,75708,75718,75724,75736,75758,75808,75836,75840,75896,76016,76256,76736,76824,76848,76862,76896,76924,76992,77048,77296,77340,77368,77424,77438,77536,77564,77572,77576,77584,77600,77628,77632,77688,77702,77708,77720,77744,77758,77774,77788,77870,77902,77916,77922,77928,77966,77980,78008,78018,78024,78032,78046,78060,78074,78094,78136,78192,78206,78210,78212,78224,78238,78240,78268,78278,78284,78296,78322,78324,78350,78364,78448,78462,78560,78588,78600,78622,78624,78652,78656,78712,78726,78744,78768,78782,78798,78812,78818,78820,78824,78838,78862,78876,78904,78960,78974,79072,79100,79296,79352,79368,79376,79390,79392,79420,79424,79480,79600,79628,79640,79664,79678,79712,79740,79772,79800,79810,79812,79816,79824,79838,79846,79852,79894,79910,79916,79942,79948,79960,79982,79988,80006,80024,80048,80062,80078,80092,80098,80100,80104,80134,80140,80176,80190,80224,80252,80270,80284,80312,80328,80336,80350,80358,80364,80378,80390,80396,80408,80432,80446,80480,80508,80576,80632,80654,80668,80696,80752,80766,80776,80784,80798,80800,80828,80844,80856,80878,80882,80884,80914,80916,80930,80932,80936,80950,80962,80968,80976,80990,80998,81004,81026,81028,81040,81054,81056,81084,81094,81100,81112,81134,81154,81156,81160,81168,81182,81184,81212,81216,81272,81286,81292,81304,81328,81342,81358,81372,81380,81384,81398,81434,81454,81458,81460,81486,81500,81506,81508,81512,81526,81550,81564,81592,81602,81604,81608,81616,81630,81638,81644,81702,81708,81722,81734,81740,81752,81774,81778,81780,82050,82078,82080,82108,82180,82184,82192,82206,82208,82236,82240,82296,82316,82328,82352,82366,82402,82404,82408,82440,82448,82462,82464,82492,82496,82552,82672,82694,82700,82712,82736,82750,82784,82812,82830,82882,82884,82888,82896,82918,82924,82952,82960,82974,82976,83004,83008,83064,83184,83424,83468,83480,83504,83518,83552,83580,83648,83704,83740,83768,83824,83838,83842,83844,83848,83856,83872,83900,83910,83916,83928,83950,83984,84e3,84028,84032,84088,84208,84448,84928,85040,85054,85088,85116,85184,85240,85488,85560,85616,85630,85728,85756,85764,85768,85776,85790,85792,85820,85824,85880,85894,85900,85912,85936,85966,85980,86048,86080,86136,86256,86496,86976,88160,88188,88256,88312,88560,89056,89200,89214,89312,89340,89536,89592,89608,89616,89632,89664,89720,89840,89868,89880,89904,89952,89980,89998,90012,90040,90190,90204,90254,90268,90296,90306,90308,90312,90334,90382,90396,90424,90480,90494,90500,90504,90512,90526,90528,90556,90566,90572,90584,90610,90612,90638,90652,90680,90736,90750,90848,90876,90884,90888,90896,90910,90912,90940,90944,91e3,91014,91020,91032,91056,91070,91086,91100,91106,91108,91112,91126,91150,91164,91192,91248,91262,91360,91388,91584,91640,91664,91678,91680,91708,91712,91768,91888,91928,91952,91966,92e3,92028,92046,92060,92088,92098,92100,92104,92112,92126,92134,92140,92188,92216,92272,92384,92412,92608,92664,93168,93200,93214,93216,93244,93248,93304,93424,93664,93720,93744,93758,93792,93820,93888,93944,93980,94008,94064,94078,94084,94088,94096,94110,94112,94140,94150,94156,94168,94246,94252,94278,94284,94296,94318,94342,94348,94360,94384,94398,94414,94428,94440,94470,94476,94488,94512,94526,94560,94588,94606,94620,94648,94658,94660,94664,94672,94686,94694,94700,94714,94726,94732,94744,94768,94782,94816,94844,94912,94968,94990,95004,95032,95088,95102,95112,95120,95134,95136,95164,95180,95192,95214,95218,95220,95244,95256,95280,95294,95328,95356,95424,95480,95728,95758,95772,95800,95856,95870,95968,95996,96008,96016,96030,96032,96060,96064,96120,96152,96176,96190,96220,96226,96228,96232,96290,96292,96296,96310,96322,96324,96328,96336,96350,96358,96364,96386,96388,96392,96400,96414,96416,96444,96454,96460,96472,96494,96498,96500,96514,96516,96520,96528,96542,96544,96572,96576,96632,96646,96652,96664,96688,96702,96718,96732,96738,96740,96744,96758,96772,96776,96784,96798,96800,96828,96832,96888,97008,97030,97036,97048,97072,97086,97120,97148,97166,97180,97208,97220,97224,97232,97246,97254,97260,97326,97330,97332,97358,97372,97378,97380,97384,97398,97422,97436,97464,97474,97476,97480,97488,97502,97510,97516,97550,97564,97592,97648,97666,97668,97672,97680,97694,97696,97724,97734,97740,97752,97774,97830,97836,97850,97862,97868,97880,97902,97906,97908,97926,97932,97944,97968,97998,98012,98018,98020,98024,98038,98618,98674,98676,98838,98854,98874,98892,98904,98926,98930,98932,98968,99006,99042,99044,99048,99062,99166,99194,99246,99286,99350,99366,99372,99386,99398,99416,99438,99442,99444,99462,99504,99518,99534,99548,99554,99556,99560,99574,99590,99596,99608,99632,99646,99680,99708,99726,99740,99768,99778,99780,99784,99792,99806,99814,99820,99834,99858,99860,99874,99880,99894,99906,99920,99934,99962,99970,99972,99976,99984,99998,1e5,100028,100038,100044,100056,100078,100082,100084,100142,100174,100188,100246,100262,100268,100306,100308,100390,100396,100410,100422,100428,100440,100462,100466,100468,100486,100504,100528,100542,100558,100572,100578,100580,100584,100598,100620,100656,100670,100704,100732,100750,100792,100802,100808,100816,100830,100838,100844,100858,100888,100912,100926,100960,100988,101056,101112,101148,101176,101232,101246,101250,101252,101256,101264,101278,101280,101308,101318,101324,101336,101358,101362,101364,101410,101412,101416,101430,101442,101448,101456,101470,101478,101498,101506,101508,101520,101534,101536,101564,101580,101618,101620,101636,101640,101648,101662,101664,101692,101696,101752,101766,101784,101838,101858,101860,101864,101934,101938,101940,101966,101980,101986,101988,101992,102030,102044,102072,102082,102084,102088,102096,102138,102166,102182,102188,102214,102220,102232,102254,102282,102290,102292,102306,102308,102312,102326,102444,102458,102470,102476,102488,102514,102516,102534,102552,102576,102590,102606,102620,102626,102632,102646,102662,102668,102704,102718,102752,102780,102798,102812,102840,102850,102856,102864,102878,102886,102892,102906,102936,102974,103008,103036,103104,103160,103224,103280,103294,103298,103300,103312,103326,103328,103356,103366,103372,103384,103406,103410,103412,103472,103486,103520,103548,103616,103672,103920,103992,104048,104062,104160,104188,104194,104196,104200,104208,104224,104252,104256,104312,104326,104332,104344,104368,104382,104398,104412,104418,104420,104424,104482,104484,104514,104520,104528,104542,104550,104570,104578,104580,104592,104606,104608,104636,104652,104690,104692,104706,104712,104734,104736,104764,104768,104824,104838,104856,104910,104930,104932,104936,104968,104976,104990,104992,105020,105024,105080,105200,105240,105278,105312,105372,105410,105412,105416,105424,105446,105518,105524,105550,105564,105570,105572,105576,105614,105628,105656,105666,105672,105680,105702,105722,105742,105756,105784,105840,105854,105858,105860,105864,105872,105888,105932,105970,105972,106006,106022,106028,106054,106060,106072,106100,106118,106124,106136,106160,106174,106190,106210,106212,106216,106250,106258,106260,106274,106276,106280,106306,106308,106312,106320,106334,106348,106394,106414,106418,106420,106566,106572,106610,106612,106630,106636,106648,106672,106686,106722,106724,106728,106742,106758,106764,106776,106800,106814,106848,106876,106894,106908,106936,106946,106948,106952,106960,106974,106982,106988,107032,107056,107070,107104,107132,107200,107256,107292,107320,107376,107390,107394,107396,107400,107408,107422,107424,107452,107462,107468,107480,107502,107506,107508,107544,107568,107582,107616,107644,107712,107768,108016,108060,108088,108144,108158,108256,108284,108290,108292,108296,108304,108318,108320,108348,108352,108408,108422,108428,108440,108464,108478,108494,108508,108514,108516,108520,108592,108640,108668,108736,108792,109040,109536,109680,109694,109792,109820,110016,110072,110084,110088,110096,110112,110140,110144,110200,110320,110342,110348,110360,110384,110398,110432,110460,110478,110492,110520,110532,110536,110544,110558,110658,110686,110714,110722,110724,110728,110736,110750,110752,110780,110796,110834,110836,110850,110852,110856,110864,110878,110880,110908,110912,110968,110982,111e3,111054,111074,111076,111080,111108,111112,111120,111134,111136,111164,111168,111224,111344,111372,111422,111456,111516,111554,111556,111560,111568,111590,111632,111646,111648,111676,111680,111736,111856,112096,112152,112224,112252,112320,112440,112514,112516,112520,112528,112542,112544,112588,112686,112718,112732,112782,112796,112824,112834,112836,112840,112848,112870,112890,112910,112924,112952,113008,113022,113026,113028,113032,113040,113054,113056,113100,113138,113140,113166,113180,113208,113264,113278,113376,113404,113416,113424,113440,113468,113472,113560,113614,113634,113636,113640,113686,113702,113708,113734,113740,113752,113778,113780,113798,113804,113816,113840,113854,113870,113890,113892,113896,113926,113932,113944,113968,113982,114016,114044,114076,114114,114116,114120,114128,114150,114170,114194,114196,114210,114212,114216,114242,114244,114248,114256,114270,114278,114306,114308,114312,114320,114334,114336,114364,114380,114420,114458,114478,114482,114484,114510,114524,114530,114532,114536,114842,114866,114868,114970,114994,114996,115042,115044,115048,115062,115130,115226,115250,115252,115278,115292,115298,115300,115304,115318,115342,115394,115396,115400,115408,115422,115430,115436,115450,115478,115494,115514,115526,115532,115570,115572,115738,115758,115762,115764,115790,115804,115810,115812,115816,115830,115854,115868,115896,115906,115912,115920,115934,115942,115948,115962,115996,116024,116080,116094,116098,116100,116104,116112,116126,116128,116156,116166,116172,116184,116206,116210,116212,116246,116262,116268,116282,116294,116300,116312,116334,116338,116340,116358,116364,116376,116400,116414,116430,116444,116450,116452,116456,116498,116500,116514,116520,116534,116546,116548,116552,116560,116574,116582,116588,116602,116654,116694,116714,116762,116782,116786,116788,116814,116828,116834,116836,116840,116854,116878,116892,116920,116930,116936,116944,116958,116966,116972,116986,117006,117048,117104,117118,117122,117124,117136,117150,117152,117180,117190,117196,117208,117230,117234,117236,117304,117360,117374,117472,117500,117506,117508,117512,117520,117536,117564,117568,117624,117638,117644,117656,117680,117694,117710,117724,117730,117732,117736,117750,117782,117798,117804,117818,117830,117848,117874,117876,117894,117936,117950,117966,117986,117988,117992,118022,118028,118040,118064,118078,118112,118140,118172,118210,118212,118216,118224,118238,118246,118266,118306,118312,118338,118352,118366,118374,118394,118402,118404,118408,118416,118430,118432,118460,118476,118514,118516,118574,118578,118580,118606,118620,118626,118628,118632,118678,118694,118700,118730,118738,118740,118830,118834,118836,118862,118876,118882,118884,118888,118902,118926,118940,118968,118978,118980,118984,118992,119006,119014,119020,119034,119068,119096,119152,119166,119170,119172,119176,119184,119198,119200,119228,119238,119244,119256,119278,119282,119284,119324,119352,119408,119422,119520,119548,119554,119556,119560,119568,119582,119584,119612,119616,119672,119686,119692,119704,119728,119742,119758,119772,119778,119780,119784,119798,119920,119934,120032,120060,120256,120312,120324,120328,120336,120352,120384,120440,120560,120582,120588,120600,120624,120638,120672,120700,120718,120732,120760,120770,120772,120776,120784,120798,120806,120812,120870,120876,120890,120902,120908,120920,120946,120948,120966,120972,120984,121008,121022,121038,121058,121060,121064,121078,121100,121112,121136,121150,121184,121212,121244,121282,121284,121288,121296,121318,121338,121356,121368,121392,121406,121440,121468,121536,121592,121656,121730,121732,121736,121744,121758,121760,121804,121842,121844,121890,121922,121924,121928,121936,121950,121958,121978,121986,121988,121992,122e3,122014,122016,122044,122060,122098,122100,122116,122120,122128,122142,122144,122172,122176,122232,122246,122264,122318,122338,122340,122344,122414,122418,122420,122446,122460,122466,122468,122472,122510,122524,122552,122562,122564,122568,122576,122598,122618,122646,122662,122668,122694,122700,122712,122738,122740,122762,122770,122772,122786,122788,122792,123018,123026,123028,123042,123044,123048,123062,123098,123146,123154,123156,123170,123172,123176,123190,123202,123204,123208,123216,123238,123244,123258,123290,123314,123316,123402,123410,123412,123426,123428,123432,123446,123458,123464,123472,123486,123494,123500,123514,123522,123524,123528,123536,123552,123580,123590,123596,123608,123630,123634,123636,123674,123698,123700,123740,123746,123748,123752,123834,123914,123922,123924,123938,123944,123958,123970,123976,123984,123998,124006,124012,124026,124034,124036,124048,124062,124064,124092,124102,124108,124120,124142,124146,124148,124162,124164,124168,124176,124190,124192,124220,124224,124280,124294,124300,124312,124336,124350,124366,124380,124386,124388,124392,124406,124442,124462,124466,124468,124494,124508,124514,124520,124558,124572,124600,124610,124612,124616,124624,124646,124666,124694,124710,124716,124730,124742,124748,124760,124786,124788,124818,124820,124834,124836,124840,124854,124946,124948,124962,124964,124968,124982,124994,124996,125e3,125008,125022,125030,125036,125050,125058,125060,125064,125072,125086,125088,125116,125126,125132,125144,125166,125170,125172,125186,125188,125192,125200,125216,125244,125248,125304,125318,125324,125336,125360,125374,125390,125404,125410,125412,125416,125430,125444,125448,125456,125472,125504,125560,125680,125702,125708,125720,125744,125758,125792,125820,125838,125852,125880,125890,125892,125896,125904,125918,125926,125932,125978,125998,126002,126004,126030,126044,126050,126052,126056,126094,126108,126136,126146,126148,126152,126160,126182,126202,126222,126236,126264,126320,126334,126338,126340,126344,126352,126366,126368,126412,126450,126452,126486,126502,126508,126522,126534,126540,126552,126574,126578,126580,126598,126604,126616,126640,126654,126670,126684,126690,126692,126696,126738,126754,126756,126760,126774,126786,126788,126792,126800,126814,126822,126828,126842,126894,126898,126900,126934,127126,127142,127148,127162,127178,127186,127188,127254,127270,127276,127290,127302,127308,127320,127342,127346,127348,127370,127378,127380,127394,127396,127400,127450,127510,127526,127532,127546,127558,127576,127598,127602,127604,127622,127628,127640,127664,127678,127694,127708,127714,127716,127720,127734,127754,127762,127764,127778,127784,127810,127812,127816,127824,127838,127846,127866,127898,127918,127922,127924,128022,128038,128044,128058,128070,128076,128088,128110,128114,128116,128134,128140,128152,128176,128190,128206,128220,128226,128228,128232,128246,128262,128268,128280,128304,128318,128352,128380,128398,128412,128440,128450,128452,128456,128464,128478,128486,128492,128506,128522,128530,128532,128546,128548,128552,128566,128578,128580,128584,128592,128606,128614,128634,128642,128644,128648,128656,128670,128672,128700,128716,128754,128756,128794,128814,128818,128820,128846,128860,128866,128868,128872,128886,128918,128934,128940,128954,128978,128980,129178,129198,129202,129204,129238,129258,129306,129326,129330,129332,129358,129372,129378,129380,129384,129398,129430,129446,129452,129466,129482,129490,129492,129562,129582,129586,129588,129614,129628,129634,129636,129640,129654,129678,129692,129720,129730,129732,129736,129744,129758,129766,129772,129814,129830,129836,129850,129862,129868,129880,129902,129906,129908,129930,129938,129940,129954,129956,129960,129974,130010]),t.CODEWORD_TABLE=Int32Array.from([2627,1819,2622,2621,1813,1812,2729,2724,2723,2779,2774,2773,902,896,908,868,865,861,859,2511,873,871,1780,835,2493,825,2491,842,837,844,1764,1762,811,810,809,2483,807,2482,806,2480,815,814,813,812,2484,817,816,1745,1744,1742,1746,2655,2637,2635,2626,2625,2623,2628,1820,2752,2739,2737,2728,2727,2725,2730,2785,2783,2778,2777,2775,2780,787,781,747,739,736,2413,754,752,1719,692,689,681,2371,678,2369,700,697,694,703,1688,1686,642,638,2343,631,2341,627,2338,651,646,643,2345,654,652,1652,1650,1647,1654,601,599,2322,596,2321,594,2319,2317,611,610,608,606,2324,603,2323,615,614,612,1617,1616,1614,1612,616,1619,1618,2575,2538,2536,905,901,898,909,2509,2507,2504,870,867,864,860,2512,875,872,1781,2490,2489,2487,2485,1748,836,834,832,830,2494,827,2492,843,841,839,845,1765,1763,2701,2676,2674,2653,2648,2656,2634,2633,2631,2629,1821,2638,2636,2770,2763,2761,2750,2745,2753,2736,2735,2733,2731,1848,2740,2738,2786,2784,591,588,576,569,566,2296,1590,537,534,526,2276,522,2274,545,542,539,548,1572,1570,481,2245,466,2242,462,2239,492,485,482,2249,496,494,1534,1531,1528,1538,413,2196,406,2191,2188,425,419,2202,415,2199,432,430,427,1472,1467,1464,433,1476,1474,368,367,2160,365,2159,362,2157,2155,2152,378,377,375,2166,372,2165,369,2162,383,381,379,2168,1419,1418,1416,1414,385,1411,384,1423,1422,1420,1424,2461,802,2441,2439,790,786,783,794,2409,2406,2403,750,742,738,2414,756,753,1720,2367,2365,2362,2359,1663,693,691,684,2373,680,2370,702,699,696,704,1690,1687,2337,2336,2334,2332,1624,2329,1622,640,637,2344,634,2342,630,2340,650,648,645,2346,655,653,1653,1651,1649,1655,2612,2597,2595,2571,2568,2565,2576,2534,2529,2526,1787,2540,2537,907,904,900,910,2503,2502,2500,2498,1768,2495,1767,2510,2508,2506,869,866,863,2513,876,874,1782,2720,2713,2711,2697,2694,2691,2702,2672,2670,2664,1828,2678,2675,2647,2646,2644,2642,1823,2639,1822,2654,2652,2650,2657,2771,1855,2765,2762,1850,1849,2751,2749,2747,2754,353,2148,344,342,336,2142,332,2140,345,1375,1373,306,2130,299,2128,295,2125,319,314,311,2132,1354,1352,1349,1356,262,257,2101,253,2096,2093,274,273,267,2107,263,2104,280,278,275,1316,1311,1308,1320,1318,2052,202,2050,2044,2040,219,2063,212,2060,208,2055,224,221,2066,1260,1258,1252,231,1248,229,1266,1264,1261,1268,155,1998,153,1996,1994,1991,1988,165,164,2007,162,2006,159,2003,2e3,172,171,169,2012,166,2010,1186,1184,1182,1179,175,1176,173,1192,1191,1189,1187,176,1194,1193,2313,2307,2305,592,589,2294,2292,2289,578,572,568,2297,580,1591,2272,2267,2264,1547,538,536,529,2278,525,2275,547,544,541,1574,1571,2237,2235,2229,1493,2225,1489,478,2247,470,2244,465,2241,493,488,484,2250,498,495,1536,1533,1530,1539,2187,2186,2184,2182,1432,2179,1430,2176,1427,414,412,2197,409,2195,405,2193,2190,426,424,421,2203,418,2201,431,429,1473,1471,1469,1466,434,1477,1475,2478,2472,2470,2459,2457,2454,2462,803,2437,2432,2429,1726,2443,2440,792,789,785,2401,2399,2393,1702,2389,1699,2411,2408,2405,745,741,2415,758,755,1721,2358,2357,2355,2353,1661,2350,1660,2347,1657,2368,2366,2364,2361,1666,690,687,2374,683,2372,701,698,705,1691,1689,2619,2617,2610,2608,2605,2613,2593,2588,2585,1803,2599,2596,2563,2561,2555,1797,2551,1795,2573,2570,2567,2577,2525,2524,2522,2520,1786,2517,1785,2514,1783,2535,2533,2531,2528,1788,2541,2539,906,903,911,2721,1844,2715,2712,1838,1836,2699,2696,2693,2703,1827,1826,1824,2673,2671,2669,2666,1829,2679,2677,1858,1857,2772,1854,1853,1851,1856,2766,2764,143,1987,139,1986,135,133,131,1984,128,1983,125,1981,138,137,136,1985,1133,1132,1130,112,110,1974,107,1973,104,1971,1969,122,121,119,117,1977,114,1976,124,1115,1114,1112,1110,1117,1116,84,83,1953,81,1952,78,1950,1948,1945,94,93,91,1959,88,1958,85,1955,99,97,95,1961,1086,1085,1083,1081,1078,100,1090,1089,1087,1091,49,47,1917,44,1915,1913,1910,1907,59,1926,56,1925,53,1922,1919,66,64,1931,61,1929,1042,1040,1038,71,1035,70,1032,68,1048,1047,1045,1043,1050,1049,12,10,1869,1867,1864,1861,21,1880,19,1877,1874,1871,28,1888,25,1886,22,1883,982,980,977,974,32,30,991,989,987,984,34,995,994,992,2151,2150,2147,2146,2144,356,355,354,2149,2139,2138,2136,2134,1359,343,341,338,2143,335,2141,348,347,346,1376,1374,2124,2123,2121,2119,1326,2116,1324,310,308,305,2131,302,2129,298,2127,320,318,316,313,2133,322,321,1355,1353,1351,1357,2092,2091,2089,2087,1276,2084,1274,2081,1271,259,2102,256,2100,252,2098,2095,272,269,2108,266,2106,281,279,277,1317,1315,1313,1310,282,1321,1319,2039,2037,2035,2032,1203,2029,1200,1197,207,2053,205,2051,201,2049,2046,2043,220,218,2064,215,2062,211,2059,228,226,223,2069,1259,1257,1254,232,1251,230,1267,1265,1263,2316,2315,2312,2311,2309,2314,2304,2303,2301,2299,1593,2308,2306,590,2288,2287,2285,2283,1578,2280,1577,2295,2293,2291,579,577,574,571,2298,582,581,1592,2263,2262,2260,2258,1545,2255,1544,2252,1541,2273,2271,2269,2266,1550,535,532,2279,528,2277,546,543,549,1575,1573,2224,2222,2220,1486,2217,1485,2214,1482,1479,2238,2236,2234,2231,1496,2228,1492,480,477,2248,473,2246,469,2243,490,487,2251,497,1537,1535,1532,2477,2476,2474,2479,2469,2468,2466,2464,1730,2473,2471,2453,2452,2450,2448,1729,2445,1728,2460,2458,2456,2463,805,804,2428,2427,2425,2423,1725,2420,1724,2417,1722,2438,2436,2434,2431,1727,2444,2442,793,791,788,795,2388,2386,2384,1697,2381,1696,2378,1694,1692,2402,2400,2398,2395,1703,2392,1701,2412,2410,2407,751,748,744,2416,759,757,1807,2620,2618,1806,1805,2611,2609,2607,2614,1802,1801,1799,2594,2592,2590,2587,1804,2600,2598,1794,1793,1791,1789,2564,2562,2560,2557,1798,2554,1796,2574,2572,2569,2578,1847,1846,2722,1843,1842,1840,1845,2716,2714,1835,1834,1832,1830,1839,1837,2700,2698,2695,2704,1817,1811,1810,897,862,1777,829,826,838,1760,1758,808,2481,1741,1740,1738,1743,2624,1818,2726,2776,782,740,737,1715,686,679,695,1682,1680,639,628,2339,647,644,1645,1643,1640,1648,602,600,597,595,2320,593,2318,609,607,604,1611,1610,1608,1606,613,1615,1613,2328,926,924,892,886,899,857,850,2505,1778,824,823,821,819,2488,818,2486,833,831,828,840,1761,1759,2649,2632,2630,2746,2734,2732,2782,2781,570,567,1587,531,527,523,540,1566,1564,476,467,463,2240,486,483,1524,1521,1518,1529,411,403,2192,399,2189,423,416,1462,1457,1454,428,1468,1465,2210,366,363,2158,360,2156,357,2153,376,373,370,2163,1410,1409,1407,1405,382,1402,380,1417,1415,1412,1421,2175,2174,777,774,771,784,732,725,722,2404,743,1716,676,674,668,2363,665,2360,685,1684,1681,626,624,622,2335,620,2333,617,2330,641,635,649,1646,1644,1642,2566,928,925,2530,2527,894,891,888,2501,2499,2496,858,856,854,851,1779,2692,2668,2665,2645,2643,2640,2651,2768,2759,2757,2744,2743,2741,2748,352,1382,340,337,333,1371,1369,307,300,296,2126,315,312,1347,1342,1350,261,258,250,2097,246,2094,271,268,264,1306,1301,1298,276,1312,1309,2115,203,2048,195,2045,191,2041,213,209,2056,1246,1244,1238,225,1234,222,1256,1253,1249,1262,2080,2079,154,1997,150,1995,147,1992,1989,163,160,2004,156,2001,1175,1174,1172,1170,1167,170,1164,167,1185,1183,1180,1177,174,1190,1188,2025,2024,2022,587,586,564,559,556,2290,573,1588,520,518,512,2268,508,2265,530,1568,1565,461,457,2233,450,2230,446,2226,479,471,489,1526,1523,1520,397,395,2185,392,2183,389,2180,2177,410,2194,402,422,1463,1461,1459,1456,1470,2455,799,2433,2430,779,776,773,2397,2394,2390,734,728,724,746,1717,2356,2354,2351,2348,1658,677,675,673,670,667,688,1685,1683,2606,2589,2586,2559,2556,2552,927,2523,2521,2518,2515,1784,2532,895,893,890,2718,2709,2707,2689,2687,2684,2663,2662,2660,2658,1825,2667,2769,1852,2760,2758,142,141,1139,1138,134,132,129,126,1982,1129,1128,1126,1131,113,111,108,105,1972,101,1970,120,118,115,1109,1108,1106,1104,123,1113,1111,82,79,1951,75,1949,72,1946,92,89,86,1956,1077,1076,1074,1072,98,1069,96,1084,1082,1079,1088,1968,1967,48,45,1916,42,1914,39,1911,1908,60,57,54,1923,50,1920,1031,1030,1028,1026,67,1023,65,1020,62,1041,1039,1036,1033,69,1046,1044,1944,1943,1941,11,9,1868,7,1865,1862,1859,20,1878,16,1875,13,1872,970,968,966,963,29,960,26,23,983,981,978,975,33,971,31,990,988,985,1906,1904,1902,993,351,2145,1383,331,330,328,326,2137,323,2135,339,1372,1370,294,293,291,289,2122,286,2120,283,2117,309,303,317,1348,1346,1344,245,244,242,2090,239,2088,236,2085,2082,260,2099,249,270,1307,1305,1303,1300,1314,189,2038,186,2036,183,2033,2030,2026,206,198,2047,194,216,1247,1245,1243,1240,227,1237,1255,2310,2302,2300,2286,2284,2281,565,563,561,558,575,1589,2261,2259,2256,2253,1542,521,519,517,514,2270,511,533,1569,1567,2223,2221,2218,2215,1483,2211,1480,459,456,453,2232,449,474,491,1527,1525,1522,2475,2467,2465,2451,2449,2446,801,800,2426,2424,2421,2418,1723,2435,780,778,775,2387,2385,2382,2379,1695,2375,1693,2396,735,733,730,727,749,1718,2616,2615,2604,2603,2601,2584,2583,2581,2579,1800,2591,2550,2549,2547,2545,1792,2542,1790,2558,929,2719,1841,2710,2708,1833,1831,2690,2688,2686,1815,1809,1808,1774,1756,1754,1737,1736,1734,1739,1816,1711,1676,1674,633,629,1638,1636,1633,1641,598,1605,1604,1602,1600,605,1609,1607,2327,887,853,1775,822,820,1757,1755,1584,524,1560,1558,468,464,1514,1511,1508,1519,408,404,400,1452,1447,1444,417,1458,1455,2208,364,361,358,2154,1401,1400,1398,1396,374,1393,371,1408,1406,1403,1413,2173,2172,772,726,723,1712,672,669,666,682,1678,1675,625,623,621,618,2331,636,632,1639,1637,1635,920,918,884,880,889,849,848,847,846,2497,855,852,1776,2641,2742,2787,1380,334,1367,1365,301,297,1340,1338,1335,1343,255,251,247,1296,1291,1288,265,1302,1299,2113,204,196,192,2042,1232,1230,1224,214,1220,210,1242,1239,1235,1250,2077,2075,151,148,1993,144,1990,1163,1162,1160,1158,1155,161,1152,157,1173,1171,1168,1165,168,1181,1178,2021,2020,2018,2023,585,560,557,1585,516,509,1562,1559,458,447,2227,472,1516,1513,1510,398,396,393,390,2181,386,2178,407,1453,1451,1449,1446,420,1460,2209,769,764,720,712,2391,729,1713,664,663,661,659,2352,656,2349,671,1679,1677,2553,922,919,2519,2516,885,883,881,2685,2661,2659,2767,2756,2755,140,1137,1136,130,127,1125,1124,1122,1127,109,106,102,1103,1102,1100,1098,116,1107,1105,1980,80,76,73,1947,1068,1067,1065,1063,90,1060,87,1075,1073,1070,1080,1966,1965,46,43,40,1912,36,1909,1019,1018,1016,1014,58,1011,55,1008,51,1029,1027,1024,1021,63,1037,1034,1940,1939,1937,1942,8,1866,4,1863,1,1860,956,954,952,949,946,17,14,969,967,964,961,27,957,24,979,976,972,1901,1900,1898,1896,986,1905,1903,350,349,1381,329,327,324,1368,1366,292,290,287,284,2118,304,1341,1339,1337,1345,243,240,237,2086,233,2083,254,1297,1295,1293,1290,1304,2114,190,187,184,2034,180,2031,177,2027,199,1233,1231,1229,1226,217,1223,1241,2078,2076,584,555,554,552,550,2282,562,1586,507,506,504,502,2257,499,2254,515,1563,1561,445,443,441,2219,438,2216,435,2212,460,454,475,1517,1515,1512,2447,798,797,2422,2419,770,768,766,2383,2380,2376,721,719,717,714,731,1714,2602,2582,2580,2548,2546,2543,923,921,2717,2706,2705,2683,2682,2680,1771,1752,1750,1733,1732,1731,1735,1814,1707,1670,1668,1631,1629,1626,1634,1599,1598,1596,1594,1603,1601,2326,1772,1753,1751,1581,1554,1552,1504,1501,1498,1509,1442,1437,1434,401,1448,1445,2206,1392,1391,1389,1387,1384,359,1399,1397,1394,1404,2171,2170,1708,1672,1669,619,1632,1630,1628,1773,1378,1363,1361,1333,1328,1336,1286,1281,1278,248,1292,1289,2111,1218,1216,1210,197,1206,193,1228,1225,1221,1236,2073,2071,1151,1150,1148,1146,152,1143,149,1140,145,1161,1159,1156,1153,158,1169,1166,2017,2016,2014,2019,1582,510,1556,1553,452,448,1506,1500,394,391,387,1443,1441,1439,1436,1450,2207,765,716,713,1709,662,660,657,1673,1671,916,914,879,878,877,882,1135,1134,1121,1120,1118,1123,1097,1096,1094,1092,103,1101,1099,1979,1059,1058,1056,1054,77,1051,74,1066,1064,1061,1071,1964,1963,1007,1006,1004,1002,999,41,996,37,1017,1015,1012,1009,52,1025,1022,1936,1935,1933,1938,942,940,938,935,932,5,2,955,953,950,947,18,943,15,965,962,958,1895,1894,1892,1890,973,1899,1897,1379,325,1364,1362,288,285,1334,1332,1330,241,238,234,1287,1285,1283,1280,1294,2112,188,185,181,178,2028,1219,1217,1215,1212,200,1209,1227,2074,2072,583,553,551,1583,505,503,500,513,1557,1555,444,442,439,436,2213,455,451,1507,1505,1502,796,763,762,760,767,711,710,708,706,2377,718,715,1710,2544,917,915,2681,1627,1597,1595,2325,1769,1749,1747,1499,1438,1435,2204,1390,1388,1385,1395,2169,2167,1704,1665,1662,1625,1623,1620,1770,1329,1282,1279,2109,1214,1207,1222,2068,2065,1149,1147,1144,1141,146,1157,1154,2013,2011,2008,2015,1579,1549,1546,1495,1487,1433,1431,1428,1425,388,1440,2205,1705,658,1667,1664,1119,1095,1093,1978,1057,1055,1052,1062,1962,1960,1005,1003,1e3,997,38,1013,1010,1932,1930,1927,1934,941,939,936,933,6,930,3,951,948,944,1889,1887,1884,1881,959,1893,1891,35,1377,1360,1358,1327,1325,1322,1331,1277,1275,1272,1269,235,1284,2110,1205,1204,1201,1198,182,1195,179,1213,2070,2067,1580,501,1551,1548,440,437,1497,1494,1490,1503,761,709,707,1706,913,912,2198,1386,2164,2161,1621,1766,2103,1208,2058,2054,1145,1142,2005,2002,1999,2009,1488,1429,1426,2200,1698,1659,1656,1975,1053,1957,1954,1001,998,1924,1921,1918,1928,937,934,931,1879,1876,1873,1870,945,1885,1882,1323,1273,1270,2105,1202,1199,1196,1211,2061,2057,1576,1543,1540,1484,1481,1478,1491,1700]),t}(),Le=l$;var c$=function(){function t(e,r){this.bits=e,this.points=r}return t.prototype.getBits=function(){return this.bits},t.prototype.getPoints=function(){return this.points},t}(),Hx=c$;var f$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},d$=function(){function t(){}return t.detectMultiple=function(e,r,n){var o=e.getBlackMatrix(),a=t.detect(n,o);return a.length||(o=o.clone(),o.rotate180(),a=t.detect(n,o)),new Hx(o,a)},t.detect=function(e,r){for(var n,o,a=new Array,u=0,s=0,l=!1;u<r.getHeight();){var i=t.findVertices(r,u,s);if(i[0]==null&&i[3]==null){if(!l)break;l=!1,s=0;try{for(var c=(n=void 0,f$(a)),f=c.next();!f.done;f=c.next()){var d=f.value;d[1]!=null&&(u=Math.trunc(Math.max(u,d[1].getY()))),d[3]!=null&&(u=Math.max(u,Math.trunc(d[3].getY())))}}catch(h){n={error:h}}finally{try{f&&!f.done&&(o=c.return)&&o.call(c)}finally{if(n)throw n.error}}u+=t.ROW_STEP;continue}if(l=!0,a.push(i),!e)break;i[2]!=null?(s=Math.trunc(i[2].getX()),u=Math.trunc(i[2].getY())):(s=Math.trunc(i[4].getX()),u=Math.trunc(i[4].getY()))}return a},t.findVertices=function(e,r,n){var o=e.getHeight(),a=e.getWidth(),u=new Array(8);return t.copyToResult(u,t.findRowsWithPattern(e,o,a,r,n,t.START_PATTERN),t.INDEXES_START_PATTERN),u[4]!=null&&(n=Math.trunc(u[4].getX()),r=Math.trunc(u[4].getY())),t.copyToResult(u,t.findRowsWithPattern(e,o,a,r,n,t.STOP_PATTERN),t.INDEXES_STOP_PATTERN),u},t.copyToResult=function(e,r,n){for(var o=0;o<n.length;o++)e[n[o]]=r[o]},t.findRowsWithPattern=function(e,r,n,o,a,u){for(var s=new Array(4),l=!1,i=new Int32Array(u.length);o<r;o+=t.ROW_STEP){var c=t.findGuardPattern(e,a,o,n,!1,u,i);if(c!=null){for(;o>0;){var f=t.findGuardPattern(e,a,--o,n,!1,u,i);if(f!=null)c=f;else{o++;break}}s[0]=new se(c[0],o),s[1]=new se(c[1],o),l=!0;break}}var d=o+1;if(l){for(var h=0,f=Int32Array.from([Math.trunc(s[0].getX()),Math.trunc(s[1].getX())]);d<r;d++){var c=t.findGuardPattern(e,f[0],d,n,!1,u,i);if(c!=null&&Math.abs(f[0]-c[0])<t.MAX_PATTERN_DRIFT&&Math.abs(f[1]-c[1])<t.MAX_PATTERN_DRIFT)f=c,h=0;else{if(h>t.SKIPPED_ROW_COUNT_MAX)break;h++}}d-=h+1,s[2]=new se(f[0],d),s[3]=new se(f[1],d)}return d-o<t.BARCODE_MIN_HEIGHT&&it.fill(s,null),s},t.findGuardPattern=function(e,r,n,o,a,u,s){it.fillWithin(s,0,s.length,0);for(var l=r,i=0;e.get(l,n)&&l>0&&i++<t.MAX_PIXEL_DRIFT;)l--;for(var c=l,f=0,d=u.length,h=a;c<o;c++){var p=e.get(c,n);if(p!==h)s[f]++;else{if(f===d-1){if(t.patternMatchVariance(s,u,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE)return new Int32Array([l,c]);l+=s[0]+s[1],Pe.arraycopy(s,2,s,0,f-1),s[f-1]=0,s[f]=0,f--}else f++;s[f]=1,h=!h}}return f===d-1&&t.patternMatchVariance(s,u,t.MAX_INDIVIDUAL_VARIANCE)<t.MAX_AVG_VARIANCE?new Int32Array([l,c-1]):null},t.patternMatchVariance=function(e,r,n){for(var o=e.length,a=0,u=0,s=0;s<o;s++)a+=e[s],u+=r[s];if(a<u)return 1/0;var l=a/u;n*=l;for(var i=0,c=0;c<o;c++){var f=e[c],d=r[c]*l,h=f>d?f-d:d-f;if(h>n)return 1/0;i+=h}return i/a},t.INDEXES_START_PATTERN=Int32Array.from([0,4,1,5]),t.INDEXES_STOP_PATTERN=Int32Array.from([6,2,7,3]),t.MAX_AVG_VARIANCE=.42,t.MAX_INDIVIDUAL_VARIANCE=.8,t.START_PATTERN=Int32Array.from([8,1,1,1,1,1,1,3]),t.STOP_PATTERN=Int32Array.from([7,1,1,3,1,1,1,2,1]),t.MAX_PIXEL_DRIFT=3,t.MAX_PATTERN_DRIFT=5,t.SKIPPED_ROW_COUNT_MAX=25,t.ROW_STEP=5,t.BARCODE_MIN_HEIGHT=10,t}(),zx=d$;var h$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},p$=function(){function t(e,r){if(r.length===0)throw new re;this.field=e;var n=r.length;if(n>1&&r[0]===0){for(var o=1;o<n&&r[o]===0;)o++;o===n?this.coefficients=new Int32Array([0]):(this.coefficients=new Int32Array(n-o),Pe.arraycopy(r,o,this.coefficients,0,this.coefficients.length))}else this.coefficients=r}return t.prototype.getCoefficients=function(){return this.coefficients},t.prototype.getDegree=function(){return this.coefficients.length-1},t.prototype.isZero=function(){return this.coefficients[0]===0},t.prototype.getCoefficient=function(e){return this.coefficients[this.coefficients.length-1-e]},t.prototype.evaluateAt=function(e){var r,n;if(e===0)return this.getCoefficient(0);if(e===1){var o=0;try{for(var a=h$(this.coefficients),u=a.next();!u.done;u=a.next()){var s=u.value;o=this.field.add(o,s)}}catch(f){r={error:f}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o}for(var l=this.coefficients[0],i=this.coefficients.length,c=1;c<i;c++)l=this.field.add(this.field.multiply(e,l),this.coefficients[c]);return l},t.prototype.add=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero())return e;if(e.isZero())return this;var r=this.coefficients,n=e.coefficients;if(r.length>n.length){var o=r;r=n,n=o}var a=new Int32Array(n.length),u=n.length-r.length;Pe.arraycopy(n,0,a,0,u);for(var s=u;s<n.length;s++)a[s]=this.field.add(r[s-u],n[s]);return new t(this.field,a)},t.prototype.subtract=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");return e.isZero()?this:this.add(e.negative())},t.prototype.multiply=function(e){return e instanceof t?this.multiplyOther(e):this.multiplyScalar(e)},t.prototype.multiplyOther=function(e){if(!this.field.equals(e.field))throw new re("ModulusPolys do not have same ModulusGF field");if(this.isZero()||e.isZero())return new t(this.field,new Int32Array([0]));for(var r=this.coefficients,n=r.length,o=e.coefficients,a=o.length,u=new Int32Array(n+a-1),s=0;s<n;s++)for(var l=r[s],i=0;i<a;i++)u[s+i]=this.field.add(u[s+i],this.field.multiply(l,o[i]));return new t(this.field,u)},t.prototype.negative=function(){for(var e=this.coefficients.length,r=new Int32Array(e),n=0;n<e;n++)r[n]=this.field.subtract(0,this.coefficients[n]);return new t(this.field,r)},t.prototype.multiplyScalar=function(e){if(e===0)return new t(this.field,new Int32Array([0]));if(e===1)return this;for(var r=this.coefficients.length,n=new Int32Array(r),o=0;o<r;o++)n[o]=this.field.multiply(this.coefficients[o],e);return new t(this.field,n)},t.prototype.multiplyByMonomial=function(e,r){if(e<0)throw new re;if(r===0)return new t(this.field,new Int32Array([0]));for(var n=this.coefficients.length,o=new Int32Array(n+e),a=0;a<n;a++)o[a]=this.field.multiply(this.coefficients[a],r);return new t(this.field,o)},t.prototype.toString=function(){for(var e=new de,r=this.getDegree();r>=0;r--){var n=this.getCoefficient(r);n!==0&&(n<0?(e.append(" - "),n=-n):e.length()>0&&e.append(" + "),(r===0||n!==1)&&e.append(n),r!==0&&(r===1?e.append("x"):(e.append("x^"),e.append(r))))}return e.toString()},t}(),so=p$;var g$=function(){function t(){}return t.prototype.add=function(e,r){return(e+r)%this.modulus},t.prototype.subtract=function(e,r){return(this.modulus+e-r)%this.modulus},t.prototype.exp=function(e){return this.expTable[e]},t.prototype.log=function(e){if(e===0)throw new re;return this.logTable[e]},t.prototype.inverse=function(e){if(e===0)throw new hl;return this.expTable[this.modulus-this.logTable[e]-1]},t.prototype.multiply=function(e,r){return e===0||r===0?0:this.expTable[(this.logTable[e]+this.logTable[r])%(this.modulus-1)]},t.prototype.getSize=function(){return this.modulus},t.prototype.equals=function(e){return e===this},t}(),Gx=g$;var m$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),y$=function(t){m$(e,t);function e(r,n){var o=t.call(this)||this;o.modulus=r,o.expTable=new Int32Array(r),o.logTable=new Int32Array(r);for(var a=1,u=0;u<r;u++)o.expTable[u]=a,a=a*n%r;for(var u=0;u<r-1;u++)o.logTable[o.expTable[u]]=u;return o.zero=new so(o,new Int32Array([0])),o.one=new so(o,new Int32Array([1])),o}return e.prototype.getZero=function(){return this.zero},e.prototype.getOne=function(){return this.one},e.prototype.buildMonomial=function(r,n){if(r<0)throw new re;if(n===0)return this.zero;var o=new Int32Array(r+1);return o[0]=n,new so(this,o)},e.PDF417_GF=new e(Le.NUMBER_OF_CODEWORDS,3),e}(Gx),Wx=y$;var v$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},b$=function(){function t(){this.field=Wx.PDF417_GF}return t.prototype.decode=function(e,r,n){for(var o,a,u=new so(this.field,e),s=new Int32Array(r),l=!1,i=r;i>0;i--){var c=u.evaluateAt(this.field.exp(i));s[r-i]=c,c!==0&&(l=!0)}if(!l)return 0;var f=this.field.getOne();if(n!=null)try{for(var d=v$(n),h=d.next();!h.done;h=d.next()){var p=h.value,m=this.field.exp(e.length-1-p),v=new so(this.field,new Int32Array([this.field.subtract(0,m),1]));f=f.multiply(v)}}catch(W){o={error:W}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}for(var x=new so(this.field,s),y=this.runEuclideanAlgorithm(this.field.buildMonomial(r,1),x,r),_=y[0],I=y[1],C=this.findErrorLocations(_),V=this.findErrorMagnitudes(I,_,C),i=0;i<C.length;i++){var z=e.length-1-this.field.log(C[i]);if(z<0)throw nt.getChecksumInstance();e[z]=this.field.subtract(e[z],V[i])}return C.length},t.prototype.runEuclideanAlgorithm=function(e,r,n){if(e.getDegree()<r.getDegree()){var o=e;e=r,r=o}for(var a=e,u=r,s=this.field.getZero(),l=this.field.getOne();u.getDegree()>=Math.round(n/2);){var i=a,c=s;if(a=u,s=l,a.isZero())throw nt.getChecksumInstance();u=i;for(var f=this.field.getZero(),d=a.getCoefficient(a.getDegree()),h=this.field.inverse(d);u.getDegree()>=a.getDegree()&&!u.isZero();){var p=u.getDegree()-a.getDegree(),m=this.field.multiply(u.getCoefficient(u.getDegree()),h);f=f.add(this.field.buildMonomial(p,m)),u=u.subtract(a.multiplyByMonomial(p,m))}l=f.multiply(s).subtract(c).negative()}var v=l.getCoefficient(0);if(v===0)throw nt.getChecksumInstance();var x=this.field.inverse(v),y=l.multiply(x),_=u.multiply(x);return[y,_]},t.prototype.findErrorLocations=function(e){for(var r=e.getDegree(),n=new Int32Array(r),o=0,a=1;a<this.field.getSize()&&o<r;a++)e.evaluateAt(a)===0&&(n[o]=this.field.inverse(a),o++);if(o!==r)throw nt.getChecksumInstance();return n},t.prototype.findErrorMagnitudes=function(e,r,n){for(var o=r.getDegree(),a=new Int32Array(o),u=1;u<=o;u++)a[o-u]=this.field.multiply(u,r.getCoefficient(u));for(var s=new so(this.field,a),l=n.length,i=new Int32Array(l),u=0;u<l;u++){var c=this.field.inverse(n[u]),f=this.field.subtract(0,e.evaluateAt(c)),d=this.field.inverse(s.evaluateAt(c));i[u]=this.field.multiply(f,d)}return i},t}(),Fg=b$;var w$=function(){function t(e,r,n,o,a){e instanceof t?this.constructor_2(e):this.constructor_1(e,r,n,o,a)}return t.prototype.constructor_1=function(e,r,n,o,a){var u=r==null||n==null,s=o==null||a==null;if(u&&s)throw new L;u?(r=new se(0,o.getY()),n=new se(0,a.getY())):s&&(o=new se(e.getWidth()-1,r.getY()),a=new se(e.getWidth()-1,n.getY())),this.image=e,this.topLeft=r,this.bottomLeft=n,this.topRight=o,this.bottomRight=a,this.minX=Math.trunc(Math.min(r.getX(),n.getX())),this.maxX=Math.trunc(Math.max(o.getX(),a.getX())),this.minY=Math.trunc(Math.min(r.getY(),o.getY())),this.maxY=Math.trunc(Math.max(n.getY(),a.getY()))},t.prototype.constructor_2=function(e){this.image=e.image,this.topLeft=e.getTopLeft(),this.bottomLeft=e.getBottomLeft(),this.topRight=e.getTopRight(),this.bottomRight=e.getBottomRight(),this.minX=e.getMinX(),this.maxX=e.getMaxX(),this.minY=e.getMinY(),this.maxY=e.getMaxY()},t.merge=function(e,r){return e==null?r:r==null?e:new t(e.image,e.topLeft,e.bottomLeft,r.topRight,r.bottomRight)},t.prototype.addMissingRows=function(e,r,n){var o=this.topLeft,a=this.bottomLeft,u=this.topRight,s=this.bottomRight;if(e>0){var l=n?this.topLeft:this.topRight,i=Math.trunc(l.getY()-e);i<0&&(i=0);var c=new se(l.getX(),i);n?o=c:u=c}if(r>0){var f=n?this.bottomLeft:this.bottomRight,d=Math.trunc(f.getY()+r);d>=this.image.getHeight()&&(d=this.image.getHeight()-1);var h=new se(f.getX(),d);n?a=h:s=h}return new t(this.image,o,a,u,s)},t.prototype.getMinX=function(){return this.minX},t.prototype.getMaxX=function(){return this.maxX},t.prototype.getMinY=function(){return this.minY},t.prototype.getMaxY=function(){return this.maxY},t.prototype.getTopLeft=function(){return this.topLeft},t.prototype.getTopRight=function(){return this.topRight},t.prototype.getBottomLeft=function(){return this.bottomLeft},t.prototype.getBottomRight=function(){return this.bottomRight},t}(),xl=w$;var x$=function(){function t(e,r,n,o){this.columnCount=e,this.errorCorrectionLevel=o,this.rowCountUpperPart=r,this.rowCountLowerPart=n,this.rowCount=r+n}return t.prototype.getColumnCount=function(){return this.columnCount},t.prototype.getErrorCorrectionLevel=function(){return this.errorCorrectionLevel},t.prototype.getRowCount=function(){return this.rowCount},t.prototype.getRowCountUpperPart=function(){return this.rowCountUpperPart},t.prototype.getRowCountLowerPart=function(){return this.rowCountLowerPart},t}(),qx=x$;var _$=function(){function t(){this.buffer=""}return t.form=function(e,r){var n=-1;function o(u,s,l,i,c,f){if(u==="%%")return"%";if(r[++n]!==void 0){u=i?parseInt(i.substr(1)):void 0;var d=c?parseInt(c.substr(1)):void 0,h;switch(f){case"s":h=r[n];break;case"c":h=r[n][0];break;case"f":h=parseFloat(r[n]).toFixed(u);break;case"p":h=parseFloat(r[n]).toPrecision(u);break;case"e":h=parseFloat(r[n]).toExponential(u);break;case"x":h=parseInt(r[n]).toString(d||16);break;case"d":h=parseFloat(parseInt(r[n],d||10).toPrecision(u)).toFixed(0);break}h=typeof h=="object"?JSON.stringify(h):(+h).toString(d);for(var p=parseInt(l),m=l&&l[0]+""=="0"?"0":" ";h.length<p;)h=s!==void 0?h+m:m+h;return h}}var a=/%(-)?(0?[0-9]+)?([.][0-9]+)?([#][0-9]+)?([scfpexd%])/g;return e.replace(a,o)},t.prototype.format=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];this.buffer+=t.form(e,r)},t.prototype.toString=function(){return this.buffer},t}(),Is=_$;var E$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},T$=function(){function t(e){this.boundingBox=new xl(e),this.codewords=new Array(e.getMaxY()-e.getMinY()+1)}return t.prototype.getCodewordNearby=function(e){var r=this.getCodeword(e);if(r!=null)return r;for(var n=1;n<t.MAX_NEARBY_DISTANCE;n++){var o=this.imageRowToCodewordIndex(e)-n;if(o>=0&&(r=this.codewords[o],r!=null)||(o=this.imageRowToCodewordIndex(e)+n,o<this.codewords.length&&(r=this.codewords[o],r!=null)))return r}return null},t.prototype.imageRowToCodewordIndex=function(e){return e-this.boundingBox.getMinY()},t.prototype.setCodeword=function(e,r){this.codewords[this.imageRowToCodewordIndex(e)]=r},t.prototype.getCodeword=function(e){return this.codewords[this.imageRowToCodewordIndex(e)]},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.getCodewords=function(){return this.codewords},t.prototype.toString=function(){var e,r,n=new Is,o=0;try{for(var a=E$(this.codewords),u=a.next();!u.done;u=a.next()){var s=u.value;if(s==null){n.format("%3d:    |   %n",o++);continue}n.format("%3d: %3d|%3d%n",o++,s.getRowNumber(),s.getValue())}}catch(l){e={error:l}}finally{try{u&&!u.done&&(r=a.return)&&r.call(a)}finally{if(e)throw e.error}}return n.toString()},t.MAX_NEARBY_DISTANCE=5,t}(),Xf=T$;var I$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},A$=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){u={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},S$=function(){function t(){this.values=new Map}return t.prototype.setValue=function(e){e=Math.trunc(e);var r=this.values.get(e);r==null&&(r=0),r++,this.values.set(e,r)},t.prototype.getValue=function(){var e,r,n=-1,o=new Array,a=function(f,d){var h={getKey:function(){return f},getValue:function(){return d}};h.getValue()>n?(n=h.getValue(),o=[],o.push(h.getKey())):h.getValue()===n&&o.push(h.getKey())};try{for(var u=I$(this.values.entries()),s=u.next();!s.done;s=u.next()){var l=A$(s.value,2),i=l[0],c=l[1];a(i,c)}}catch(f){e={error:f}}finally{try{s&&!s.done&&(r=u.return)&&r.call(u)}finally{if(e)throw e.error}}return Le.toIntArray(o)},t.prototype.getConfidence=function(e){return this.values.get(e)},t}(),Aa=S$;var D$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),kg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C$=function(t){D$(e,t);function e(r,n){var o=t.call(this,r)||this;return o._isLeft=n,o}return e.prototype.setRowNumbers=function(){var r,n;try{for(var o=kg(this.getCodewords()),a=o.next();!a.done;a=o.next()){var u=a.value;u?.setRowNumberAsRowIndicatorColumn()}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},e.prototype.adjustCompleteIndicatorColumnRowNumbers=function(r){var n=this.getCodewords();this.setRowNumbers(),this.removeIncorrectCodewords(n,r);for(var o=this.getBoundingBox(),a=this._isLeft?o.getTopLeft():o.getTopRight(),u=this._isLeft?o.getBottomLeft():o.getBottomRight(),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.imageRowToCodewordIndex(Math.trunc(u.getY())),i=-1,c=1,f=0,d=s;d<l;d++)if(n[d]!=null){var h=n[d],p=h.getRowNumber()-i;if(p===0)f++;else if(p===1)c=Math.max(c,f),f=1,i=h.getRowNumber();else if(p<0||h.getRowNumber()>=r.getRowCount()||p>d)n[d]=null;else{var m=void 0;c>2?m=(c-2)*p:m=p;for(var v=m>=d,x=1;x<=m&&!v;x++)v=n[d-x]!=null;v?n[d]=null:(i=h.getRowNumber(),f=1)}}},e.prototype.getRowHeights=function(){var r,n,o=this.getBarcodeMetadata();if(o==null)return null;this.adjustIncompleteIndicatorColumnRowNumbers(o);var a=new Int32Array(o.getRowCount());try{for(var u=kg(this.getCodewords()),s=u.next();!s.done;s=u.next()){var l=s.value;if(l!=null){var i=l.getRowNumber();if(i>=a.length)continue;a[i]++}}}catch(c){r={error:c}}finally{try{s&&!s.done&&(n=u.return)&&n.call(u)}finally{if(r)throw r.error}}return a},e.prototype.adjustIncompleteIndicatorColumnRowNumbers=function(r){for(var n=this.getBoundingBox(),o=this._isLeft?n.getTopLeft():n.getTopRight(),a=this._isLeft?n.getBottomLeft():n.getBottomRight(),u=this.imageRowToCodewordIndex(Math.trunc(o.getY())),s=this.imageRowToCodewordIndex(Math.trunc(a.getY())),l=this.getCodewords(),i=-1,c=1,f=0,d=u;d<s;d++)if(l[d]!=null){var h=l[d];h.setRowNumberAsRowIndicatorColumn();var p=h.getRowNumber()-i;p===0?f++:p===1?(c=Math.max(c,f),f=1,i=h.getRowNumber()):h.getRowNumber()>=r.getRowCount()?l[d]=null:(i=h.getRowNumber(),f=1)}},e.prototype.getBarcodeMetadata=function(){var r,n,o=this.getCodewords(),a=new Aa,u=new Aa,s=new Aa,l=new Aa;try{for(var i=kg(o),c=i.next();!c.done;c=i.next()){var f=c.value;if(f!=null){f.setRowNumberAsRowIndicatorColumn();var d=f.getValue()%30,h=f.getRowNumber();switch(this._isLeft||(h+=2),h%3){case 0:u.setValue(d*3+1);break;case 1:l.setValue(d/3),s.setValue(d%3);break;case 2:a.setValue(d+1);break}}}}catch(m){r={error:m}}finally{try{c&&!c.done&&(n=i.return)&&n.call(i)}finally{if(r)throw r.error}}if(a.getValue().length===0||u.getValue().length===0||s.getValue().length===0||l.getValue().length===0||a.getValue()[0]<1||u.getValue()[0]+s.getValue()[0]<Le.MIN_ROWS_IN_BARCODE||u.getValue()[0]+s.getValue()[0]>Le.MAX_ROWS_IN_BARCODE)return null;var p=new qx(a.getValue()[0],u.getValue()[0],s.getValue()[0],l.getValue()[0]);return this.removeIncorrectCodewords(o,p),p},e.prototype.removeIncorrectCodewords=function(r,n){for(var o=0;o<r.length;o++){var a=r[o];if(r[o]!=null){var u=a.getValue()%30,s=a.getRowNumber();if(s>n.getRowCount()){r[o]=null;continue}switch(this._isLeft||(s+=2),s%3){case 0:u*3+1!==n.getRowCountUpperPart()&&(r[o]=null);break;case 1:(Math.trunc(u/3)!==n.getErrorCorrectionLevel()||u%3!==n.getRowCountLowerPart())&&(r[o]=null);break;case 2:u+1!==n.getColumnCount()&&(r[o]=null);break}}}},e.prototype.isLeft=function(){return this._isLeft},e.prototype.toString=function(){return"IsLeft: "+this._isLeft+`
`+t.prototype.toString.call(this)},e}(Xf),Lg=C$;var O$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},P$=function(){function t(e,r){this.ADJUST_ROW_NUMBER_SKIP=2,this.barcodeMetadata=e,this.barcodeColumnCount=e.getColumnCount(),this.boundingBox=r,this.detectionResultColumns=new Array(this.barcodeColumnCount+2)}return t.prototype.getDetectionResultColumns=function(){this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[0]),this.adjustIndicatorColumnRowNumbers(this.detectionResultColumns[this.barcodeColumnCount+1]);var e=Le.MAX_CODEWORDS_IN_BARCODE,r;do r=e,e=this.adjustRowNumbersAndGetCount();while(e>0&&e<r);return this.detectionResultColumns},t.prototype.adjustIndicatorColumnRowNumbers=function(e){e?.adjustCompleteIndicatorColumnRowNumbers(this.barcodeMetadata)},t.prototype.adjustRowNumbersAndGetCount=function(){var e=this.adjustRowNumbersByRow();if(e===0)return 0;for(var r=1;r<this.barcodeColumnCount+1;r++)for(var n=this.detectionResultColumns[r].getCodewords(),o=0;o<n.length;o++)n[o]!=null&&(n[o].hasValidRowNumber()||this.adjustRowNumbers(r,o,n));return e},t.prototype.adjustRowNumbersByRow=function(){this.adjustRowNumbersFromBothRI();var e=this.adjustRowNumbersFromLRI();return e+this.adjustRowNumbersFromRRI()},t.prototype.adjustRowNumbersFromBothRI=function(){if(!(this.detectionResultColumns[0]==null||this.detectionResultColumns[this.barcodeColumnCount+1]==null)){for(var e=this.detectionResultColumns[0].getCodewords(),r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<e.length;n++)if(e[n]!=null&&r[n]!=null&&e[n].getRowNumber()===r[n].getRowNumber())for(var o=1;o<=this.barcodeColumnCount;o++){var a=this.detectionResultColumns[o].getCodewords()[n];a!=null&&(a.setRowNumber(e[n].getRowNumber()),a.hasValidRowNumber()||(this.detectionResultColumns[o].getCodewords()[n]=null))}}},t.prototype.adjustRowNumbersFromRRI=function(){if(this.detectionResultColumns[this.barcodeColumnCount+1]==null)return 0;for(var e=0,r=this.detectionResultColumns[this.barcodeColumnCount+1].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var o=r[n].getRowNumber(),a=0,u=this.barcodeColumnCount+1;u>0&&a<this.ADJUST_ROW_NUMBER_SKIP;u--){var s=this.detectionResultColumns[u].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||e++)}return e},t.prototype.adjustRowNumbersFromLRI=function(){if(this.detectionResultColumns[0]==null)return 0;for(var e=0,r=this.detectionResultColumns[0].getCodewords(),n=0;n<r.length;n++)if(r[n]!=null)for(var o=r[n].getRowNumber(),a=0,u=1;u<this.barcodeColumnCount+1&&a<this.ADJUST_ROW_NUMBER_SKIP;u++){var s=this.detectionResultColumns[u].getCodewords()[n];s!=null&&(a=t.adjustRowNumberIfValid(o,a,s),s.hasValidRowNumber()||e++)}return e},t.adjustRowNumberIfValid=function(e,r,n){return n==null||n.hasValidRowNumber()||(n.isValidRowNumber(e)?(n.setRowNumber(e),r=0):++r),r},t.prototype.adjustRowNumbers=function(e,r,n){var o,a;if(this.detectionResultColumns[e-1]!=null){var u=n[r],s=this.detectionResultColumns[e-1].getCodewords(),l=s;this.detectionResultColumns[e+1]!=null&&(l=this.detectionResultColumns[e+1].getCodewords());var i=new Array(14);i[2]=s[r],i[3]=l[r],r>0&&(i[0]=n[r-1],i[4]=s[r-1],i[5]=l[r-1]),r>1&&(i[8]=n[r-2],i[10]=s[r-2],i[11]=l[r-2]),r<n.length-1&&(i[1]=n[r+1],i[6]=s[r+1],i[7]=l[r+1]),r<n.length-2&&(i[9]=n[r+2],i[12]=s[r+2],i[13]=l[r+2]);try{for(var c=O$(i),f=c.next();!f.done;f=c.next()){var d=f.value;if(t.adjustRowNumber(u,d))return}}catch(h){o={error:h}}finally{try{f&&!f.done&&(a=c.return)&&a.call(c)}finally{if(o)throw o.error}}}},t.adjustRowNumber=function(e,r){return r==null?!1:r.hasValidRowNumber()&&r.getBucket()===e.getBucket()?(e.setRowNumber(r.getRowNumber()),!0):!1},t.prototype.getBarcodeColumnCount=function(){return this.barcodeColumnCount},t.prototype.getBarcodeRowCount=function(){return this.barcodeMetadata.getRowCount()},t.prototype.getBarcodeECLevel=function(){return this.barcodeMetadata.getErrorCorrectionLevel()},t.prototype.setBoundingBox=function(e){this.boundingBox=e},t.prototype.getBoundingBox=function(){return this.boundingBox},t.prototype.setDetectionResultColumn=function(e,r){this.detectionResultColumns[e]=r},t.prototype.getDetectionResultColumn=function(e){return this.detectionResultColumns[e]},t.prototype.toString=function(){var e=this.detectionResultColumns[0];e==null&&(e=this.detectionResultColumns[this.barcodeColumnCount+1]);for(var r=new Is,n=0;n<e.getCodewords().length;n++){r.format("CW %3d:",n);for(var o=0;o<this.barcodeColumnCount+2;o++){if(this.detectionResultColumns[o]==null){r.format("    |   ");continue}var a=this.detectionResultColumns[o].getCodewords()[n];if(a==null){r.format("    |   ");continue}r.format(" %3d|%3d",a.getRowNumber(),a.getValue())}r.format("%n")}return r.toString()},t}(),Xx=P$;var M$=function(){function t(e,r,n,o){this.rowNumber=t.BARCODE_ROW_UNKNOWN,this.startX=Math.trunc(e),this.endX=Math.trunc(r),this.bucket=Math.trunc(n),this.value=Math.trunc(o)}return t.prototype.hasValidRowNumber=function(){return this.isValidRowNumber(this.rowNumber)},t.prototype.isValidRowNumber=function(e){return e!==t.BARCODE_ROW_UNKNOWN&&this.bucket===e%3*3},t.prototype.setRowNumberAsRowIndicatorColumn=function(){this.rowNumber=Math.trunc(Math.trunc(this.value/30)*3+Math.trunc(this.bucket/3))},t.prototype.getWidth=function(){return this.endX-this.startX},t.prototype.getStartX=function(){return this.startX},t.prototype.getEndX=function(){return this.endX},t.prototype.getBucket=function(){return this.bucket},t.prototype.getValue=function(){return this.value},t.prototype.getRowNumber=function(){return this.rowNumber},t.prototype.setRowNumber=function(e){this.rowNumber=e},t.prototype.toString=function(){return this.rowNumber+"|"+this.value},t.BARCODE_ROW_UNKNOWN=-1,t}(),Yx=M$;var N$=function(){function t(){}return t.initialize=function(){for(var e=0;e<Le.SYMBOL_TABLE.length;e++)for(var r=Le.SYMBOL_TABLE[e],n=r&1,o=0;o<Le.BARS_IN_MODULE;o++){for(var a=0;(r&1)===n;)a+=1,r>>=1;n=r&1,t.RATIOS_TABLE[e]||(t.RATIOS_TABLE[e]=new Array(Le.BARS_IN_MODULE)),t.RATIOS_TABLE[e][Le.BARS_IN_MODULE-o-1]=Math.fround(a/Le.MODULES_IN_CODEWORD)}this.bSymbolTableReady=!0},t.getDecodedValue=function(e){var r=t.getDecodedCodewordValue(t.sampleBitCounts(e));return r!==-1?r:t.getClosestDecodedValue(e)},t.sampleBitCounts=function(e){for(var r=Ne.sum(e),n=new Int32Array(Le.BARS_IN_MODULE),o=0,a=0,u=0;u<Le.MODULES_IN_CODEWORD;u++){var s=r/(2*Le.MODULES_IN_CODEWORD)+u*r/Le.MODULES_IN_CODEWORD;a+e[o]<=s&&(a+=e[o],o++),n[o]++}return n},t.getDecodedCodewordValue=function(e){var r=t.getBitValue(e);return Le.getCodeword(r)===-1?-1:r},t.getBitValue=function(e){for(var r=0,n=0;n<e.length;n++)for(var o=0;o<e[n];o++)r=r<<1|(n%2===0?1:0);return Math.trunc(r)},t.getClosestDecodedValue=function(e){var r=Ne.sum(e),n=new Array(Le.BARS_IN_MODULE);if(r>1)for(var o=0;o<n.length;o++)n[o]=Math.fround(e[o]/r);var a=pl.MAX_VALUE,u=-1;this.bSymbolTableReady||t.initialize();for(var s=0;s<t.RATIOS_TABLE.length;s++){for(var l=0,i=t.RATIOS_TABLE[s],c=0;c<Le.BARS_IN_MODULE;c++){var f=Math.fround(i[c]-n[c]);if(l+=Math.fround(f*f),l>=a)break}l<a&&(a=l,u=Le.SYMBOL_TABLE[s])}return u},t.bSymbolTableReady=!1,t.RATIOS_TABLE=new Array(Le.SYMBOL_TABLE.length).map(function(e){return e=new Array(Le.BARS_IN_MODULE)}),t}(),Zx=N$;var R$=function(){function t(){this.segmentCount=-1,this.fileSize=-1,this.timestamp=-1,this.checksum=-1}return t.prototype.getSegmentIndex=function(){return this.segmentIndex},t.prototype.setSegmentIndex=function(e){this.segmentIndex=e},t.prototype.getFileId=function(){return this.fileId},t.prototype.setFileId=function(e){this.fileId=e},t.prototype.getOptionalData=function(){return this.optionalData},t.prototype.setOptionalData=function(e){this.optionalData=e},t.prototype.isLastSegment=function(){return this.lastSegment},t.prototype.setLastSegment=function(e){this.lastSegment=e},t.prototype.getSegmentCount=function(){return this.segmentCount},t.prototype.setSegmentCount=function(e){this.segmentCount=e},t.prototype.getSender=function(){return this.sender||null},t.prototype.setSender=function(e){this.sender=e},t.prototype.getAddressee=function(){return this.addressee||null},t.prototype.setAddressee=function(e){this.addressee=e},t.prototype.getFileName=function(){return this.fileName},t.prototype.setFileName=function(e){this.fileName=e},t.prototype.getFileSize=function(){return this.fileSize},t.prototype.setFileSize=function(e){this.fileSize=e},t.prototype.getChecksum=function(){return this.checksum},t.prototype.setChecksum=function(e){this.checksum=e},t.prototype.getTimestamp=function(){return this.timestamp},t.prototype.setTimestamp=function(e){this.timestamp=e},t}(),Bg=R$;var F$=function(){function t(){}return t.parseLong=function(e,r){return r===void 0&&(r=void 0),parseInt(e,r)},t}(),$g=F$;var k$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),L$=function(t){k$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="NullPointerException",e}(Tt),Kx=L$;var B$=function(){function t(){}return t.prototype.writeBytes=function(e){this.writeBytesOffset(e,0,e.length)},t.prototype.writeBytesOffset=function(e,r,n){if(e==null)throw new Kx;if(r<0||r>e.length||n<0||r+n>e.length||r+n<0)throw new vs;if(n===0)return;for(var o=0;o<n;o++)this.write(e[r+o])},t.prototype.flush=function(){},t.prototype.close=function(){},t}(),Qx=B$;var $$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V$=function(t){$$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e}(Tt),Jx=V$;var j$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),U$=function(t){j$(e,t);function e(r){r===void 0&&(r=32);var n=t.call(this)||this;if(n.count=0,r<0)throw new re("Negative initial size: "+r);return n.buf=new Uint8Array(r),n}return e.prototype.ensureCapacity=function(r){r-this.buf.length>0&&this.grow(r)},e.prototype.grow=function(r){var n=this.buf.length,o=n<<1;if(o-r<0&&(o=r),o<0){if(r<0)throw new Jx;o=ge.MAX_VALUE}this.buf=it.copyOfUint8Array(this.buf,o)},e.prototype.write=function(r){this.ensureCapacity(this.count+1),this.buf[this.count]=r,this.count+=1},e.prototype.writeBytesOffset=function(r,n,o){if(n<0||n>r.length||o<0||n+o-r.length>0)throw new vs;this.ensureCapacity(this.count+o),Pe.arraycopy(r,n,this.buf,this.count,o),this.count+=o},e.prototype.writeTo=function(r){r.writeBytesOffset(this.buf,0,this.count)},e.prototype.reset=function(){this.count=0},e.prototype.toByteArray=function(){return it.copyOfUint8Array(this.buf,this.count)},e.prototype.size=function(){return this.count},e.prototype.toString=function(r){return r?typeof r=="string"?this.toString_string(r):this.toString_number(r):this.toString_void()},e.prototype.toString_void=function(){return new String(this.buf).toString()},e.prototype.toString_string=function(r){return new String(this.buf).toString()},e.prototype.toString_number=function(r){return new String(this.buf).toString()},e.prototype.close=function(){},e}(Qx),e2=U$;var Rt=function(t){return t[t.ALPHA=0]="ALPHA",t[t.LOWER=1]="LOWER",t[t.MIXED=2]="MIXED",t[t.PUNCT=3]="PUNCT",t[t.ALPHA_SHIFT=4]="ALPHA_SHIFT",t[t.PUNCT_SHIFT=5]="PUNCT_SHIFT",t}(Rt||{});function t2(){if(typeof window<"u")return window.BigInt||null;if(typeof global<"u")return global.BigInt||null;if(typeof self<"u")return self.BigInt||null;throw new Error("Can't search globals for BigInt!")}var Yf;function Po(t){if(typeof Yf>"u"&&(Yf=t2()),Yf===null)throw new Error("BigInt is not supported!");return Yf(t)}function H$(){var t=[];t[0]=Po(1);var e=Po(900);t[1]=e;for(var r=2;r<16;r++)t[r]=t[r-1]*e;return t}var z$=function(){function t(){}return t.decode=function(e,r){var n=new de(""),o=Mt.ISO8859_1;n.enableDecoding(o);for(var a=1,u=e[a++],s=new Bg;a<e[0];){switch(u){case t.TEXT_COMPACTION_MODE_LATCH:a=t.textCompaction(e,a,n);break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:a=t.byteCompaction(u,e,o,a,n);break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:n.append(e[a++]);break;case t.NUMERIC_COMPACTION_MODE_LATCH:a=t.numericCompaction(e,a,n);break;case t.ECI_CHARSET:var l=Mt.getCharacterSetECIByValue(e[a++]);break;case t.ECI_GENERAL_PURPOSE:a+=2;break;case t.ECI_USER_DEFINED:a++;break;case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:a=t.decodeMacroBlock(e,a,s);break;case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:throw new K;default:a--,a=t.textCompaction(e,a,n);break}if(a<e.length)u=e[a++];else throw K.getFormatInstance()}if(n.length()===0)throw K.getFormatInstance();var i=new no(null,n.toString(),null,r);return i.setOther(s),i},t.decodeMacroBlock=function(e,r,n){if(r+t.NUMBER_OF_SEQUENCE_CODEWORDS>e[0])throw K.getFormatInstance();for(var o=new Int32Array(t.NUMBER_OF_SEQUENCE_CODEWORDS),a=0;a<t.NUMBER_OF_SEQUENCE_CODEWORDS;a++,r++)o[a]=e[r];n.setSegmentIndex(ge.parseInt(t.decodeBase900toBase10(o,t.NUMBER_OF_SEQUENCE_CODEWORDS)));var u=new de;r=t.textCompaction(e,r,u),n.setFileId(u.toString());var s=-1;for(e[r]===t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD&&(s=r+1);r<e[0];)switch(e[r]){case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:switch(r++,e[r]){case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME:var l=new de;r=t.textCompaction(e,r+1,l),n.setFileName(l.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SENDER:var i=new de;r=t.textCompaction(e,r+1,i),n.setSender(i.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE:var c=new de;r=t.textCompaction(e,r+1,c),n.setAddressee(c.toString());break;case t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT:var f=new de;r=t.numericCompaction(e,r+1,f),n.setSegmentCount(ge.parseInt(f.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP:var d=new de;r=t.numericCompaction(e,r+1,d),n.setTimestamp($g.parseLong(d.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM:var h=new de;r=t.numericCompaction(e,r+1,h),n.setChecksum(ge.parseInt(h.toString()));break;case t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE:var p=new de;r=t.numericCompaction(e,r+1,p),n.setFileSize($g.parseLong(p.toString()));break;default:throw K.getFormatInstance()}break;case t.MACRO_PDF417_TERMINATOR:r++,n.setLastSegment(!0);break;default:throw K.getFormatInstance()}if(s!==-1){var m=r-s;n.isLastSegment()&&m--,n.setOptionalData(it.copyOfRange(e,s,s+m))}return r},t.textCompaction=function(e,r,n){for(var o=new Int32Array((e[0]-r)*2),a=new Int32Array((e[0]-r)*2),u=0,s=!1;r<e[0]&&!s;){var l=e[r++];if(l<t.TEXT_COMPACTION_MODE_LATCH)o[u]=l/30,o[u+1]=l%30,u+=2;else switch(l){case t.TEXT_COMPACTION_MODE_LATCH:o[u++]=t.TEXT_COMPACTION_MODE_LATCH;break;case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,s=!0;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o[u]=t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE,l=e[r++],a[u]=l,u++;break}}return t.decodeTextCompaction(o,a,u,n),r},t.decodeTextCompaction=function(e,r,n,o){for(var a=Rt.ALPHA,u=Rt.ALPHA,s=0;s<n;){var l=e[s],i="";switch(a){case Rt.ALPHA:if(l<26)i=String.fromCharCode(65+l);else switch(l){case 26:i=" ";break;case t.LL:a=Rt.LOWER;break;case t.ML:a=Rt.MIXED;break;case t.PS:u=a,a=Rt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break;case Rt.LOWER:if(l<26)i=String.fromCharCode(97+l);else switch(l){case 26:i=" ";break;case t.AS:u=a,a=Rt.ALPHA_SHIFT;break;case t.ML:a=Rt.MIXED;break;case t.PS:u=a,a=Rt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break;case Rt.MIXED:if(l<t.PL)i=t.MIXED_CHARS[l];else switch(l){case t.PL:a=Rt.PUNCT;break;case 26:i=" ";break;case t.LL:a=Rt.LOWER;break;case t.AL:a=Rt.ALPHA;break;case t.PS:u=a,a=Rt.PUNCT_SHIFT;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break;case Rt.PUNCT:if(l<t.PAL)i=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=Rt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break;case Rt.ALPHA_SHIFT:if(a=u,l<26)i=String.fromCharCode(65+l);else switch(l){case 26:i=" ";break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break;case Rt.PUNCT_SHIFT:if(a=u,l<t.PAL)i=t.PUNCT_CHARS[l];else switch(l){case t.PAL:a=Rt.ALPHA;break;case t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE:o.append(r[s]);break;case t.TEXT_COMPACTION_MODE_LATCH:a=Rt.ALPHA;break}break}i!==""&&o.append(i),s++}},t.byteCompaction=function(e,r,n,o,a){var u=new e2,s=0,l=0,i=!1;switch(e){case t.BYTE_COMPACTION_MODE_LATCH:for(var c=new Int32Array(6),f=r[o++];o<r[0]&&!i;)switch(c[s++]=f,l=900*l+f,f=r[o++],f){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,i=!0;break;default:if(s%5===0&&s>0){for(var d=0;d<6;++d)u.write(Number(Po(l)>>Po(8*(5-d))));l=0,s=0}break}o===r[0]&&f<t.TEXT_COMPACTION_MODE_LATCH&&(c[s++]=f);for(var h=0;h<s;h++)u.write(c[h]);break;case t.BYTE_COMPACTION_MODE_LATCH_6:for(;o<r[0]&&!i;){var p=r[o++];if(p<t.TEXT_COMPACTION_MODE_LATCH)s++,l=900*l+p;else switch(p){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.NUMERIC_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:o--,i=!0;break}if(s%5===0&&s>0){for(var d=0;d<6;++d)u.write(Number(Po(l)>>Po(8*(5-d))));l=0,s=0}}break}return a.append(Sr.decode(u.toByteArray(),n)),o},t.numericCompaction=function(e,r,n){for(var o=0,a=!1,u=new Int32Array(t.MAX_NUMERIC_CODEWORDS);r<e[0]&&!a;){var s=e[r++];if(r===e[0]&&(a=!0),s<t.TEXT_COMPACTION_MODE_LATCH)u[o]=s,o++;else switch(s){case t.TEXT_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH:case t.BYTE_COMPACTION_MODE_LATCH_6:case t.BEGIN_MACRO_PDF417_CONTROL_BLOCK:case t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD:case t.MACRO_PDF417_TERMINATOR:r--,a=!0;break}(o%t.MAX_NUMERIC_CODEWORDS===0||s===t.NUMERIC_COMPACTION_MODE_LATCH||a)&&o>0&&(n.append(t.decodeBase900toBase10(u,o)),o=0)}return r},t.decodeBase900toBase10=function(e,r){for(var n=Po(0),o=0;o<r;o++)n+=t.EXP900[r-o-1]*Po(e[o]);var a=n.toString();if(a.charAt(0)!=="1")throw new K;return a.substring(1)},t.TEXT_COMPACTION_MODE_LATCH=900,t.BYTE_COMPACTION_MODE_LATCH=901,t.NUMERIC_COMPACTION_MODE_LATCH=902,t.BYTE_COMPACTION_MODE_LATCH_6=924,t.ECI_USER_DEFINED=925,t.ECI_GENERAL_PURPOSE=926,t.ECI_CHARSET=927,t.BEGIN_MACRO_PDF417_CONTROL_BLOCK=928,t.BEGIN_MACRO_PDF417_OPTIONAL_FIELD=923,t.MACRO_PDF417_TERMINATOR=922,t.MODE_SHIFT_TO_BYTE_COMPACTION_MODE=913,t.MAX_NUMERIC_CODEWORDS=15,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_NAME=0,t.MACRO_PDF417_OPTIONAL_FIELD_SEGMENT_COUNT=1,t.MACRO_PDF417_OPTIONAL_FIELD_TIME_STAMP=2,t.MACRO_PDF417_OPTIONAL_FIELD_SENDER=3,t.MACRO_PDF417_OPTIONAL_FIELD_ADDRESSEE=4,t.MACRO_PDF417_OPTIONAL_FIELD_FILE_SIZE=5,t.MACRO_PDF417_OPTIONAL_FIELD_CHECKSUM=6,t.PL=25,t.LL=27,t.AS=27,t.ML=28,t.AL=28,t.PS=29,t.PAL=29,t.PUNCT_CHARS=`;<>@[\\]_\`~!\r	,:
-.$/"|*()?{}'`,t.MIXED_CHARS="0123456789&\r	,:#-.$/+%*=^",t.EXP900=t2()?H$():[],t.NUMBER_OF_SEQUENCE_CODEWORDS=2,t}(),Vg=z$;var _l=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},G$=function(){function t(){}return t.decode=function(e,r,n,o,a,u,s){for(var l=new xl(e,r,n,o,a),i=null,c=null,f,d=!0;;d=!1){if(r!=null&&(i=t.getRowIndicatorColumn(e,l,r,!0,u,s)),o!=null&&(c=t.getRowIndicatorColumn(e,l,o,!1,u,s)),f=t.merge(i,c),f==null)throw L.getNotFoundInstance();var h=f.getBoundingBox();if(d&&h!=null&&(h.getMinY()<l.getMinY()||h.getMaxY()>l.getMaxY()))l=h;else break}f.setBoundingBox(l);var p=f.getBarcodeColumnCount()+1;f.setDetectionResultColumn(0,i),f.setDetectionResultColumn(p,c);for(var m=i!=null,v=1;v<=p;v++){var x=m?v:p-v;if(f.getDetectionResultColumn(x)===void 0){var y=void 0;x===0||x===p?y=new Lg(l,x===0):y=new Xf(l),f.setDetectionResultColumn(x,y);for(var _=-1,I=_,C=l.getMinY();C<=l.getMaxY();C++){if(_=t.getStartColumn(f,x,C,m),_<0||_>l.getMaxX()){if(I===-1)continue;_=I}var V=t.detectCodeword(e,l.getMinX(),l.getMaxX(),m,_,C,u,s);V!=null&&(y.setCodeword(C,V),I=_,u=Math.min(u,V.getWidth()),s=Math.max(s,V.getWidth()))}}}return t.createDecoderResult(f)},t.merge=function(e,r){if(e==null&&r==null)return null;var n=t.getBarcodeMetadata(e,r);if(n==null)return null;var o=xl.merge(t.adjustBoundingBox(e),t.adjustBoundingBox(r));return new Xx(n,o)},t.adjustBoundingBox=function(e){var r,n;if(e==null)return null;var o=e.getRowHeights();if(o==null)return null;var a=t.getMax(o),u=0;try{for(var s=_l(o),l=s.next();!l.done;l=s.next()){var i=l.value;if(u+=a-i,i>0)break}}catch(h){r={error:h}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}for(var c=e.getCodewords(),f=0;u>0&&c[f]==null;f++)u--;for(var d=0,f=o.length-1;f>=0&&(d+=a-o[f],!(o[f]>0));f--);for(var f=c.length-1;d>0&&c[f]==null;f--)d--;return e.getBoundingBox().addMissingRows(u,d,e.isLeft())},t.getMax=function(e){var r,n,o=-1;try{for(var a=_l(e),u=a.next();!u.done;u=a.next()){var s=u.value;o=Math.max(o,s)}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return o},t.getBarcodeMetadata=function(e,r){var n;if(e==null||(n=e.getBarcodeMetadata())==null)return r==null?null:r.getBarcodeMetadata();var o;return r==null||(o=r.getBarcodeMetadata())==null?n:n.getColumnCount()!==o.getColumnCount()&&n.getErrorCorrectionLevel()!==o.getErrorCorrectionLevel()&&n.getRowCount()!==o.getRowCount()?null:n},t.getRowIndicatorColumn=function(e,r,n,o,a,u){for(var s=new Lg(r,o),l=0;l<2;l++)for(var i=l===0?1:-1,c=Math.trunc(Math.trunc(n.getX())),f=Math.trunc(Math.trunc(n.getY()));f<=r.getMaxY()&&f>=r.getMinY();f+=i){var d=t.detectCodeword(e,0,e.getWidth(),o,c,f,a,u);d!=null&&(s.setCodeword(f,d),o?c=d.getStartX():c=d.getEndX())}return s},t.adjustCodewordCount=function(e,r){var n=r[0][1],o=n.getValue(),a=e.getBarcodeColumnCount()*e.getBarcodeRowCount()-t.getNumberOfECCodeWords(e.getBarcodeECLevel());if(o.length===0){if(a<1||a>Le.MAX_CODEWORDS_IN_BARCODE)throw L.getNotFoundInstance();n.setValue(a)}else o[0]!==a&&n.setValue(a)},t.createDecoderResult=function(e){var r=t.createBarcodeMatrix(e);t.adjustCodewordCount(e,r);for(var n=new Array,o=new Int32Array(e.getBarcodeRowCount()*e.getBarcodeColumnCount()),a=[],u=new Array,s=0;s<e.getBarcodeRowCount();s++)for(var l=0;l<e.getBarcodeColumnCount();l++){var i=r[s][l+1].getValue(),c=s*e.getBarcodeColumnCount()+l;i.length===0?n.push(c):i.length===1?o[c]=i[0]:(u.push(c),a.push(i))}for(var f=new Array(a.length),d=0;d<f.length;d++)f[d]=a[d];return t.createDecoderResultFromAmbiguousValues(e.getBarcodeECLevel(),o,Le.toIntArray(n),Le.toIntArray(u),f)},t.createDecoderResultFromAmbiguousValues=function(e,r,n,o,a){for(var u=new Int32Array(o.length),s=100;s-- >0;){for(var l=0;l<u.length;l++)r[o[l]]=a[l][u[l]];try{return t.decodeCodewords(r,e,n)}catch(c){var i=c instanceof nt;if(!i)throw c}if(u.length===0)throw nt.getChecksumInstance();for(var l=0;l<u.length;l++)if(u[l]<a[l].length-1){u[l]++;break}else if(u[l]=0,l===u.length-1)throw nt.getChecksumInstance()}throw nt.getChecksumInstance()},t.createBarcodeMatrix=function(e){for(var r,n,o,a,u=Array.from({length:e.getBarcodeRowCount()},function(){return new Array(e.getBarcodeColumnCount()+2)}),s=0;s<u.length;s++)for(var l=0;l<u[s].length;l++)u[s][l]=new Aa;var i=0;try{for(var c=_l(e.getDetectionResultColumns()),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)try{for(var h=(o=void 0,_l(d.getCodewords())),p=h.next();!p.done;p=h.next()){var m=p.value;if(m!=null){var v=m.getRowNumber();if(v>=0){if(v>=u.length)continue;u[v][i].setValue(m.getValue())}}}}catch(x){o={error:x}}finally{try{p&&!p.done&&(a=h.return)&&a.call(h)}finally{if(o)throw o.error}}i++}}catch(x){r={error:x}}finally{try{f&&!f.done&&(n=c.return)&&n.call(c)}finally{if(r)throw r.error}}return u},t.isValidBarcodeColumn=function(e,r){return r>=0&&r<=e.getBarcodeColumnCount()+1},t.getStartColumn=function(e,r,n,o){var a,u,s=o?1:-1,l=null;if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodeword(n)),l!=null)return o?l.getEndX():l.getStartX();if(l=e.getDetectionResultColumn(r).getCodewordNearby(n),l!=null)return o?l.getStartX():l.getEndX();if(t.isValidBarcodeColumn(e,r-s)&&(l=e.getDetectionResultColumn(r-s).getCodewordNearby(n)),l!=null)return o?l.getEndX():l.getStartX();for(var i=0;t.isValidBarcodeColumn(e,r-s);){r-=s;try{for(var c=(a=void 0,_l(e.getDetectionResultColumn(r).getCodewords())),f=c.next();!f.done;f=c.next()){var d=f.value;if(d!=null)return(o?d.getEndX():d.getStartX())+s*i*(d.getEndX()-d.getStartX())}}catch(h){a={error:h}}finally{try{f&&!f.done&&(u=c.return)&&u.call(c)}finally{if(a)throw a.error}}i++}return o?e.getBoundingBox().getMinX():e.getBoundingBox().getMaxX()},t.detectCodeword=function(e,r,n,o,a,u,s,l){a=t.adjustCodewordStartColumn(e,r,n,o,a,u);var i=t.getModuleBitCount(e,r,n,o,a,u);if(i==null)return null;var c,f=Ne.sum(i);if(o)c=a+f;else{for(var d=0;d<i.length/2;d++){var h=i[d];i[d]=i[i.length-1-d],i[i.length-1-d]=h}c=a,a=c-f}if(!t.checkCodewordSkew(f,s,l))return null;var p=Zx.getDecodedValue(i),m=Le.getCodeword(p);return m===-1?null:new Yx(a,c,t.getCodewordBucketNumber(p),m)},t.getModuleBitCount=function(e,r,n,o,a,u){for(var s=a,l=new Int32Array(8),i=0,c=o?1:-1,f=o;(o?s<n:s>=r)&&i<l.length;)e.get(s,u)===f?(l[i]++,s+=c):(i++,f=!f);return i===l.length||s===(o?n:r)&&i===l.length-1?l:null},t.getNumberOfECCodeWords=function(e){return 2<<e},t.adjustCodewordStartColumn=function(e,r,n,o,a,u){for(var s=a,l=o?-1:1,i=0;i<2;i++){for(;(o?s>=r:s<n)&&o===e.get(s,u);){if(Math.abs(a-s)>t.CODEWORD_SKEW_SIZE)return a;s+=l}l=-l,o=!o}return s},t.checkCodewordSkew=function(e,r,n){return r-t.CODEWORD_SKEW_SIZE<=e&&e<=n+t.CODEWORD_SKEW_SIZE},t.decodeCodewords=function(e,r,n){if(e.length===0)throw K.getFormatInstance();var o=1<<r+1,a=t.correctErrors(e,n,o);t.verifyCodewordCount(e,o);var u=Vg.decode(e,""+r);return u.setErrorsCorrected(a),u.setErasures(n.length),u},t.correctErrors=function(e,r,n){if(r!=null&&r.length>n/2+t.MAX_ERRORS||n<0||n>t.MAX_EC_CODEWORDS)throw nt.getChecksumInstance();return t.errorCorrection.decode(e,n,r)},t.verifyCodewordCount=function(e,r){if(e.length<4)throw K.getFormatInstance();var n=e[0];if(n>e.length)throw K.getFormatInstance();if(n===0)if(r<e.length)e[0]=e.length-r;else throw K.getFormatInstance()},t.getBitCountForCodeword=function(e){for(var r=new Int32Array(8),n=0,o=r.length-1;!((e&1)!==n&&(n=e&1,o--,o<0));)r[o]++,e>>=1;return r},t.getCodewordBucketNumber=function(e){return e instanceof Int32Array?this.getCodewordBucketNumber_Int32Array(e):this.getCodewordBucketNumber_number(e)},t.getCodewordBucketNumber_number=function(e){return t.getCodewordBucketNumber(t.getBitCountForCodeword(e))},t.getCodewordBucketNumber_Int32Array=function(e){return(e[0]-e[2]+e[4]-e[6]+9)%9},t.toString=function(e){for(var r=new Is,n=0;n<e.length;n++){r.format("Row %2d: ",n);for(var o=0;o<e[n].length;o++){var a=e[n][o];a.getValue().length===0?r.format("        ",null):r.format("%4d(%2d)",a.getValue()[0],a.getConfidence(a.getValue()[0]))}r.format("%n")}return r.toString()},t.CODEWORD_SKEW_SIZE=2,t.MAX_ERRORS=3,t.MAX_EC_CODEWORDS=512,t.errorCorrection=new Fg,t}(),r2=G$;var W$=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},q$=function(){function t(){}return t.prototype.decode=function(e,r){r===void 0&&(r=null);var n=t.decode(e,r,!1);if(n==null||n.length===0||n[0]==null)throw L.getNotFoundInstance();return n[0]},t.prototype.decodeMultiple=function(e,r){r===void 0&&(r=null);try{return t.decode(e,r,!0)}catch(n){throw n instanceof K||n instanceof nt?L.getNotFoundInstance():n}},t.decode=function(e,r,n){var o,a,u=new Array,s=zx.detectMultiple(e,r,n);try{for(var l=W$(s.getPoints()),i=l.next();!i.done;i=l.next()){var c=i.value,f=r2.decode(s.getBits(),c[4],c[5],c[6],c[7],t.getMinCodewordWidth(c),t.getMaxCodewordWidth(c)),d=new rt(f.getText(),f.getRawBytes(),void 0,c,ae.PDF_417);d.putMetadata(Lt.ERROR_CORRECTION_LEVEL,f.getECLevel());var h=f.getOther();h!=null&&d.putMetadata(Lt.PDF417_EXTRA_METADATA,h),u.push(d)}}catch(p){o={error:p}}finally{try{i&&!i.done&&(a=l.return)&&a.call(l)}finally{if(o)throw o.error}}return u.map(function(p){return p})},t.getMaxWidth=function(e,r){return e==null||r==null?0:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMinWidth=function(e,r){return e==null||r==null?ge.MAX_VALUE:Math.trunc(Math.abs(e.getX()-r.getX()))},t.getMaxCodewordWidth=function(e){return Math.floor(Math.max(Math.max(t.getMaxWidth(e[0],e[4]),t.getMaxWidth(e[6],e[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.max(t.getMaxWidth(e[1],e[5]),t.getMaxWidth(e[7],e[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))},t.getMinCodewordWidth=function(e){return Math.floor(Math.min(Math.min(t.getMinWidth(e[0],e[4]),t.getMinWidth(e[6],e[2])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN),Math.min(t.getMinWidth(e[1],e[5]),t.getMinWidth(e[7],e[3])*Le.MODULES_IN_CODEWORD/Le.MODULES_IN_STOP_PATTERN)))},t.prototype.reset=function(){},t}(),Mo=q$;var X$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Y$=function(t){X$(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="ReaderException",e}(Tt),Zf=Y$;var n2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Z$=function(){function t(){}return t.prototype.decode=function(e,r){return this.setHints(r),this.decodeInternal(e)},t.prototype.decodeWithState=function(e){return(this.readers===null||this.readers===void 0)&&this.setHints(null),this.decodeInternal(e)},t.prototype.setHints=function(e){this.hints=e;var r=e!=null&&e.get(Me.TRY_HARDER)!==void 0,n=e==null?null:e.get(Me.POSSIBLE_FORMATS),o=new Array;if(n!=null){var a=n.some(function(u){return u===ae.UPC_A||u===ae.UPC_E||u===ae.EAN_13||u===ae.EAN_8||u===ae.CODABAR||u===ae.CODE_39||u===ae.CODE_93||u===ae.CODE_128||u===ae.ITF||u===ae.RSS_14||u===ae.RSS_EXPANDED});a&&!r&&o.push(new Pi(e)),n.includes(ae.QR_CODE)&&o.push(new Oo),n.includes(ae.DATA_MATRIX)&&o.push(new Co),n.includes(ae.AZTEC)&&o.push(new To),n.includes(ae.PDF_417)&&o.push(new Mo),a&&r&&o.push(new Pi(e))}o.length===0&&(r||o.push(new Pi(e)),o.push(new Oo),o.push(new Co),o.push(new To),o.push(new Mo),r&&o.push(new Pi(e))),this.readers=o},t.prototype.reset=function(){var e,r;if(this.readers!==null)try{for(var n=n2(this.readers),o=n.next();!o.done;o=n.next()){var a=o.value;a.reset()}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}},t.prototype.decodeInternal=function(e){var r,n;if(this.readers===null)throw new Zf("No readers where selected, nothing can be read.");try{for(var o=n2(this.readers),a=o.next();!a.done;a=o.next()){var u=a.value;try{return u.decode(e,this.hints)}catch(s){if(s instanceof Zf)continue}}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}throw new L("No MultiFormat Readers were able to detect the code.")},t}(),El=Z$;var K$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Nae=function(t){K$(e,t);function e(r,n){r===void 0&&(r=null),n===void 0&&(n=500);var o=this,a=new El;return a.setHints(r),o=t.call(this,a,n)||this,o}return e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e}(Rn);var Q$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Lae=function(t){Q$(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Mo,r)||this}return e}(Rn);var J$=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),jae=function(t){J$(e,t);function e(r){return r===void 0&&(r=500),t.call(this,new Oo,r)||this}return e}(Rn);var i2=function(t){return t[t.ERROR_CORRECTION=0]="ERROR_CORRECTION",t[t.CHARACTER_SET=1]="CHARACTER_SET",t[t.DATA_MATRIX_SHAPE=2]="DATA_MATRIX_SHAPE",t[t.DATA_MATRIX_COMPACT=3]="DATA_MATRIX_COMPACT",t[t.MIN_SIZE=4]="MIN_SIZE",t[t.MAX_SIZE=5]="MAX_SIZE",t[t.MARGIN=6]="MARGIN",t[t.PDF417_COMPACT=7]="PDF417_COMPACT",t[t.PDF417_COMPACTION=8]="PDF417_COMPACTION",t[t.PDF417_DIMENSIONS=9]="PDF417_DIMENSIONS",t[t.AZTEC_LAYERS=10]="AZTEC_LAYERS",t[t.QR_VERSION=11]="QR_VERSION",t[t.GS1_FORMAT=12]="GS1_FORMAT",t[t.FORCE_C40=13]="FORCE_C40",t}(i2||{}),Oe=i2;var e7=function(){function t(e){this.field=e,this.cachedGenerators=[],this.cachedGenerators.push(new Fn(e,Int32Array.from([1])))}return t.prototype.buildGenerator=function(e){var r=this.cachedGenerators;if(e>=r.length)for(var n=r[r.length-1],o=this.field,a=r.length;a<=e;a++){var u=n.multiply(new Fn(o,Int32Array.from([1,o.exp(a-1+o.getGeneratorBase())])));r.push(u),n=u}return r[e]},t.prototype.encode=function(e,r){if(r===0)throw new re("No error correction bytes");var n=e.length-r;if(n<=0)throw new re("No data bytes provided");var o=this.buildGenerator(r),a=new Int32Array(n);Pe.arraycopy(e,0,a,0,n);var u=new Fn(this.field,a);u=u.multiplyByMonomial(r,1);for(var s=u.divide(o)[1],l=s.getCoefficients(),i=r-l.length,c=0;c<i;c++)e[n+c]=0;Pe.arraycopy(l,0,e,n+i,l.length)},t}(),Tl=e7;var t7=function(){function t(){}return t.applyMaskPenaltyRule1=function(e){return t.applyMaskPenaltyRule1Internal(e,!0)+t.applyMaskPenaltyRule1Internal(e,!1)},t.applyMaskPenaltyRule2=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),u=0;u<a-1;u++)for(var s=n[u],l=0;l<o-1;l++){var i=s[l];i===s[l+1]&&i===n[u+1][l]&&i===n[u+1][l+1]&&r++}return t.N2*r},t.applyMaskPenaltyRule3=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var s=0;s<o;s++){var l=n[u];s+6<o&&l[s]===1&&l[s+1]===0&&l[s+2]===1&&l[s+3]===1&&l[s+4]===1&&l[s+5]===0&&l[s+6]===1&&(t.isWhiteHorizontal(l,s-4,s)||t.isWhiteHorizontal(l,s+7,s+11))&&r++,u+6<a&&n[u][s]===1&&n[u+1][s]===0&&n[u+2][s]===1&&n[u+3][s]===1&&n[u+4][s]===1&&n[u+5][s]===0&&n[u+6][s]===1&&(t.isWhiteVertical(n,s,u-4,u)||t.isWhiteVertical(n,s,u+7,u+11))&&r++}return r*t.N3},t.isWhiteHorizontal=function(e,r,n){r=Math.max(r,0),n=Math.min(n,e.length);for(var o=r;o<n;o++)if(e[o]===1)return!1;return!0},t.isWhiteVertical=function(e,r,n,o){n=Math.max(n,0),o=Math.min(o,e.length);for(var a=n;a<o;a++)if(e[a][r]===1)return!1;return!0},t.applyMaskPenaltyRule4=function(e){for(var r=0,n=e.getArray(),o=e.getWidth(),a=e.getHeight(),u=0;u<a;u++)for(var s=n[u],l=0;l<o;l++)s[l]===1&&r++;var i=e.getHeight()*e.getWidth(),c=Math.floor(Math.abs(r*2-i)*10/i);return c*t.N4},t.getDataMaskBit=function(e,r,n){var o,a;switch(e){case 0:o=n+r&1;break;case 1:o=n&1;break;case 2:o=r%3;break;case 3:o=(n+r)%3;break;case 4:o=Math.floor(n/2)+Math.floor(r/3)&1;break;case 5:a=n*r,o=(a&1)+a%3;break;case 6:a=n*r,o=(a&1)+a%3&1;break;case 7:a=n*r,o=a%3+(n+r&1)&1;break;default:throw new re("Invalid mask pattern: "+e)}return o===0},t.applyMaskPenaltyRule1Internal=function(e,r){for(var n=0,o=r?e.getHeight():e.getWidth(),a=r?e.getWidth():e.getHeight(),u=e.getArray(),s=0;s<o;s++){for(var l=0,i=-1,c=0;c<a;c++){var f=r?u[s][c]:u[c][s];f===i?l++:(l>=5&&(n+=t.N1+(l-5)),l=1,i=f)}l>=5&&(n+=t.N1+(l-5))}return n},t.N1=3,t.N2=3,t.N3=40,t.N4=10,t}(),No=t7;var r7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},n7=function(){function t(e,r){this.width=e,this.height=r;for(var n=new Array(r),o=0;o!==r;o++)n[o]=new Uint8Array(e);this.bytes=n}return t.prototype.getHeight=function(){return this.height},t.prototype.getWidth=function(){return this.width},t.prototype.get=function(e,r){return this.bytes[r][e]},t.prototype.getArray=function(){return this.bytes},t.prototype.setNumber=function(e,r,n){this.bytes[r][e]=n},t.prototype.setBoolean=function(e,r,n){this.bytes[r][e]=n?1:0},t.prototype.clear=function(e){var r,n;try{for(var o=r7(this.bytes),a=o.next();!a.done;a=o.next()){var u=a.value;it.fill(u,e)}}catch(s){r={error:s}}finally{try{a&&!a.done&&(n=o.return)&&n.call(o)}finally{if(r)throw r.error}}},t.prototype.equals=function(e){if(!(e instanceof t))return!1;var r=e;if(this.width!==r.width||this.height!==r.height)return!1;for(var n=0,o=this.height;n<o;++n)for(var a=this.bytes[n],u=r.bytes[n],s=0,l=this.width;s<l;++s)if(a[s]!==u[s])return!1;return!0},t.prototype.toString=function(){for(var e=new de,r=0,n=this.height;r<n;++r){for(var o=this.bytes[r],a=0,u=this.width;a<u;++a)switch(o[a]){case 0:e.append(" 0");break;case 1:e.append(" 1");break;default:e.append("  ");break}e.append(`
`)}return e.toString()},t}(),Il=n7;var i7=function(){function t(){this.maskPattern=-1}return t.prototype.getMode=function(){return this.mode},t.prototype.getECLevel=function(){return this.ecLevel},t.prototype.getVersion=function(){return this.version},t.prototype.getMaskPattern=function(){return this.maskPattern},t.prototype.getMatrix=function(){return this.matrix},t.prototype.toString=function(){var e=new de;return e.append(`<<
`),e.append(" mode: "),e.append(this.mode?this.mode.toString():"null"),e.append(`
 ecLevel: `),e.append(this.ecLevel?this.ecLevel.toString():"null"),e.append(`
 version: `),e.append(this.version?this.version.toString():"null"),e.append(`
 maskPattern: `),e.append(this.maskPattern.toString()),this.matrix?(e.append(`
 matrix:
`),e.append(this.matrix.toString())):e.append(`
 matrix: null
`),e.append(`>>
`),e.toString()},t.prototype.setMode=function(e){this.mode=e},t.prototype.setECLevel=function(e){this.ecLevel=e},t.prototype.setVersion=function(e){this.version=e},t.prototype.setMaskPattern=function(e){this.maskPattern=e},t.prototype.setMatrix=function(e){this.matrix=e},t.isValidMaskPattern=function(e){return e>=0&&e<t.NUM_MASK_PATTERNS},t.NUM_MASK_PATTERNS=8,t}(),As=i7;var o7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),a7=function(t){o7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.kind="WriterException",e}(Tt),Dt=a7;var s7=function(){function t(){}return t.clearMatrix=function(e){e.clear(255)},t.buildMatrix=function(e,r,n,o,a){t.clearMatrix(a),t.embedBasicPatterns(n,a),t.embedTypeInfo(r,o,a),t.maybeEmbedVersionInfo(n,a),t.embedDataBits(e,o,a)},t.embedBasicPatterns=function(e,r){t.embedPositionDetectionPatternsAndSeparators(r),t.embedDarkDotAtLeftBottomCorner(r),t.maybeEmbedPositionAdjustmentPatterns(e,r),t.embedTimingPatterns(r)},t.embedTypeInfo=function(e,r,n){var o=new Pt;t.makeTypeInfoBits(e,r,o);for(var a=0,u=o.getSize();a<u;++a){var s=o.get(o.getSize()-1-a),l=t.TYPE_INFO_COORDINATES[a],i=l[0],c=l[1];if(n.setBoolean(i,c,s),a<8){var f=n.getWidth()-a-1,d=8;n.setBoolean(f,d,s)}else{var f=8,d=n.getHeight()-7+(a-8);n.setBoolean(f,d,s)}}},t.maybeEmbedVersionInfo=function(e,r){if(!(e.getVersionNumber()<7)){var n=new Pt;t.makeVersionInfoBits(e,n);for(var o=6*3-1,a=0;a<6;++a)for(var u=0;u<3;++u){var s=n.get(o);o--,r.setBoolean(a,r.getHeight()-11+u,s),r.setBoolean(r.getHeight()-11+u,a,s)}}},t.embedDataBits=function(e,r,n){for(var o=0,a=-1,u=n.getWidth()-1,s=n.getHeight()-1;u>0;){for(u===6&&(u-=1);s>=0&&s<n.getHeight();){for(var l=0;l<2;++l){var i=u-l;if(t.isEmpty(n.get(i,s))){var c=void 0;o<e.getSize()?(c=e.get(o),++o):c=!1,r!==255&&No.getDataMaskBit(r,i,s)&&(c=!c),n.setBoolean(i,s,c)}}s+=a}a=-a,s+=a,u-=2}if(o!==e.getSize())throw new Dt("Not all bits consumed: "+o+"/"+e.getSize())},t.findMSBSet=function(e){return 32-ge.numberOfLeadingZeros(e)},t.calculateBCHCode=function(e,r){if(r===0)throw new re("0 polynomial");var n=t.findMSBSet(r);for(e<<=n-1;t.findMSBSet(e)>=n;)e^=r<<t.findMSBSet(e)-n;return e},t.makeTypeInfoBits=function(e,r,n){if(!As.isValidMaskPattern(r))throw new Dt("Invalid mask pattern");var o=e.getBits()<<3|r;n.appendBits(o,5);var a=t.calculateBCHCode(o,t.TYPE_INFO_POLY);n.appendBits(a,10);var u=new Pt;if(u.appendBits(t.TYPE_INFO_MASK_PATTERN,15),n.xor(u),n.getSize()!==15)throw new Dt("should not happen but we got: "+n.getSize())},t.makeVersionInfoBits=function(e,r){r.appendBits(e.getVersionNumber(),6);var n=t.calculateBCHCode(e.getVersionNumber(),t.VERSION_INFO_POLY);if(r.appendBits(n,12),r.getSize()!==18)throw new Dt("should not happen but we got: "+r.getSize())},t.isEmpty=function(e){return e===255},t.embedTimingPatterns=function(e){for(var r=8;r<e.getWidth()-8;++r){var n=(r+1)%2;t.isEmpty(e.get(r,6))&&e.setNumber(r,6,n),t.isEmpty(e.get(6,r))&&e.setNumber(6,r,n)}},t.embedDarkDotAtLeftBottomCorner=function(e){if(e.get(8,e.getHeight()-8)===0)throw new Dt;e.setNumber(8,e.getHeight()-8,1)},t.embedHorizontalSeparationPattern=function(e,r,n){for(var o=0;o<8;++o){if(!t.isEmpty(n.get(e+o,r)))throw new Dt;n.setNumber(e+o,r,0)}},t.embedVerticalSeparationPattern=function(e,r,n){for(var o=0;o<7;++o){if(!t.isEmpty(n.get(e,r+o)))throw new Dt;n.setNumber(e,r+o,0)}},t.embedPositionAdjustmentPattern=function(e,r,n){for(var o=0;o<5;++o)for(var a=t.POSITION_ADJUSTMENT_PATTERN[o],u=0;u<5;++u)n.setNumber(e+u,r+o,a[u])},t.embedPositionDetectionPattern=function(e,r,n){for(var o=0;o<7;++o)for(var a=t.POSITION_DETECTION_PATTERN[o],u=0;u<7;++u)n.setNumber(e+u,r+o,a[u])},t.embedPositionDetectionPatternsAndSeparators=function(e){var r=t.POSITION_DETECTION_PATTERN[0].length;t.embedPositionDetectionPattern(0,0,e),t.embedPositionDetectionPattern(e.getWidth()-r,0,e),t.embedPositionDetectionPattern(0,e.getWidth()-r,e);var n=8;t.embedHorizontalSeparationPattern(0,n-1,e),t.embedHorizontalSeparationPattern(e.getWidth()-n,n-1,e),t.embedHorizontalSeparationPattern(0,e.getWidth()-n,e);var o=7;t.embedVerticalSeparationPattern(o,0,e),t.embedVerticalSeparationPattern(e.getHeight()-o-1,0,e),t.embedVerticalSeparationPattern(o,e.getHeight()-o,e)},t.maybeEmbedPositionAdjustmentPatterns=function(e,r){if(!(e.getVersionNumber()<2))for(var n=e.getVersionNumber()-1,o=t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE[n],a=0,u=o.length;a!==u;a++){var s=o[a];if(s>=0)for(var l=0;l!==u;l++){var i=o[l];i>=0&&t.isEmpty(r.get(i,s))&&t.embedPositionAdjustmentPattern(i-2,s-2,r)}}},t.POSITION_DETECTION_PATTERN=Array.from([Int32Array.from([1,1,1,1,1,1,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,1,1,1,0,1]),Int32Array.from([1,0,0,0,0,0,1]),Int32Array.from([1,1,1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN=Array.from([Int32Array.from([1,1,1,1,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,0,1,0,1]),Int32Array.from([1,0,0,0,1]),Int32Array.from([1,1,1,1,1])]),t.POSITION_ADJUSTMENT_PATTERN_COORDINATE_TABLE=Array.from([Int32Array.from([-1,-1,-1,-1,-1,-1,-1]),Int32Array.from([6,18,-1,-1,-1,-1,-1]),Int32Array.from([6,22,-1,-1,-1,-1,-1]),Int32Array.from([6,26,-1,-1,-1,-1,-1]),Int32Array.from([6,30,-1,-1,-1,-1,-1]),Int32Array.from([6,34,-1,-1,-1,-1,-1]),Int32Array.from([6,22,38,-1,-1,-1,-1]),Int32Array.from([6,24,42,-1,-1,-1,-1]),Int32Array.from([6,26,46,-1,-1,-1,-1]),Int32Array.from([6,28,50,-1,-1,-1,-1]),Int32Array.from([6,30,54,-1,-1,-1,-1]),Int32Array.from([6,32,58,-1,-1,-1,-1]),Int32Array.from([6,34,62,-1,-1,-1,-1]),Int32Array.from([6,26,46,66,-1,-1,-1]),Int32Array.from([6,26,48,70,-1,-1,-1]),Int32Array.from([6,26,50,74,-1,-1,-1]),Int32Array.from([6,30,54,78,-1,-1,-1]),Int32Array.from([6,30,56,82,-1,-1,-1]),Int32Array.from([6,30,58,86,-1,-1,-1]),Int32Array.from([6,34,62,90,-1,-1,-1]),Int32Array.from([6,28,50,72,94,-1,-1]),Int32Array.from([6,26,50,74,98,-1,-1]),Int32Array.from([6,30,54,78,102,-1,-1]),Int32Array.from([6,28,54,80,106,-1,-1]),Int32Array.from([6,32,58,84,110,-1,-1]),Int32Array.from([6,30,58,86,114,-1,-1]),Int32Array.from([6,34,62,90,118,-1,-1]),Int32Array.from([6,26,50,74,98,122,-1]),Int32Array.from([6,30,54,78,102,126,-1]),Int32Array.from([6,26,52,78,104,130,-1]),Int32Array.from([6,30,56,82,108,134,-1]),Int32Array.from([6,34,60,86,112,138,-1]),Int32Array.from([6,30,58,86,114,142,-1]),Int32Array.from([6,34,62,90,118,146,-1]),Int32Array.from([6,30,54,78,102,126,150]),Int32Array.from([6,24,50,76,102,128,154]),Int32Array.from([6,28,54,80,106,132,158]),Int32Array.from([6,32,58,84,110,136,162]),Int32Array.from([6,26,54,82,110,138,166]),Int32Array.from([6,30,58,86,114,142,170])]),t.TYPE_INFO_COORDINATES=Array.from([Int32Array.from([8,0]),Int32Array.from([8,1]),Int32Array.from([8,2]),Int32Array.from([8,3]),Int32Array.from([8,4]),Int32Array.from([8,5]),Int32Array.from([8,7]),Int32Array.from([8,8]),Int32Array.from([7,8]),Int32Array.from([5,8]),Int32Array.from([4,8]),Int32Array.from([3,8]),Int32Array.from([2,8]),Int32Array.from([1,8]),Int32Array.from([0,8])]),t.VERSION_INFO_POLY=7973,t.TYPE_INFO_POLY=1335,t.TYPE_INFO_MASK_PATTERN=21522,t}(),Kf=s7;var u7=function(){function t(e,r){this.dataBytes=e,this.errorCorrectionBytes=r}return t.prototype.getDataBytes=function(){return this.dataBytes},t.prototype.getErrorCorrectionBytes=function(){return this.errorCorrectionBytes},t}(),o2=u7;var a2=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},l7=function(){function t(){}return t.calculateMaskPenalty=function(e){return No.applyMaskPenaltyRule1(e)+No.applyMaskPenaltyRule2(e)+No.applyMaskPenaltyRule3(e)+No.applyMaskPenaltyRule4(e)},t.encode=function(e,r,n){n===void 0&&(n=null);var o=t.DEFAULT_BYTE_MODE_ENCODING,a=n!==null&&n.get(Oe.CHARACTER_SET)!==void 0;a&&(o=n.get(Oe.CHARACTER_SET).toString());var u=this.chooseMode(e,o),s=new Pt;if(u===St.BYTE&&(a||t.DEFAULT_BYTE_MODE_ENCODING!==o)){var l=Mt.getCharacterSetECIByName(o);l!==void 0&&this.appendECI(l,s)}this.appendModeInfo(u,s);var i=new Pt;this.appendBytes(e,u,i,o);var c;if(n!==null&&n.get(Oe.QR_VERSION)!==void 0){var f=Number.parseInt(n.get(Oe.QR_VERSION).toString(),10);c=di.getVersionForNumber(f);var d=this.calculateBitsNeeded(u,s,i,c);if(!this.willFit(d,c,r))throw new Dt("Data too big for requested version")}else c=this.recommendVersion(r,u,s,i);var h=new Pt;h.appendBitArray(s);var p=u===St.BYTE?i.getSizeInBytes():e.length;this.appendLengthInfo(p,c,u,h),h.appendBitArray(i);var m=c.getECBlocksForLevel(r),v=c.getTotalCodewords()-m.getTotalECCodewords();this.terminateBits(v,h);var x=this.interleaveWithECBytes(h,c.getTotalCodewords(),v,m.getNumBlocks()),y=new As;y.setECLevel(r),y.setMode(u),y.setVersion(c);var _=c.getDimensionForVersion(),I=new Il(_,_),C=this.chooseMaskPattern(x,r,c,I);return y.setMaskPattern(C),Kf.buildMatrix(x,r,c,C,I),y.setMatrix(I),y},t.recommendVersion=function(e,r,n,o){var a=this.calculateBitsNeeded(r,n,o,di.getVersionForNumber(1)),u=this.chooseVersion(a,e),s=this.calculateBitsNeeded(r,n,o,u);return this.chooseVersion(s,e)},t.calculateBitsNeeded=function(e,r,n,o){return r.getSize()+e.getCharacterCountBits(o)+n.getSize()},t.getAlphanumericCode=function(e){return e<t.ALPHANUMERIC_TABLE.length?t.ALPHANUMERIC_TABLE[e]:-1},t.chooseMode=function(e,r){if(r===void 0&&(r=null),Mt.SJIS.getName()===r&&this.isOnlyDoubleByteKanji(e))return St.KANJI;for(var n=!1,o=!1,a=0,u=e.length;a<u;++a){var s=e.charAt(a);if(t.isDigit(s))n=!0;else if(this.getAlphanumericCode(s.charCodeAt(0))!==-1)o=!0;else return St.BYTE}return o?St.ALPHANUMERIC:n?St.NUMERIC:St.BYTE},t.isOnlyDoubleByteKanji=function(e){var r;try{r=Sr.encode(e,Mt.SJIS)}catch{return!1}var n=r.length;if(n%2!==0)return!1;for(var o=0;o<n;o+=2){var a=r[o]&255;if((a<129||a>159)&&(a<224||a>235))return!1}return!0},t.chooseMaskPattern=function(e,r,n,o){for(var a=Number.MAX_SAFE_INTEGER,u=-1,s=0;s<As.NUM_MASK_PATTERNS;s++){Kf.buildMatrix(e,r,n,s,o);var l=this.calculateMaskPenalty(o);l<a&&(a=l,u=s)}return u},t.chooseVersion=function(e,r){for(var n=1;n<=40;n++){var o=di.getVersionForNumber(n);if(t.willFit(e,o,r))return o}throw new Dt("Data too big")},t.willFit=function(e,r,n){var o=r.getTotalCodewords(),a=r.getECBlocksForLevel(n),u=a.getTotalECCodewords(),s=o-u,l=(e+7)/8;return s>=l},t.terminateBits=function(e,r){var n=e*8;if(r.getSize()>n)throw new Dt("data bits cannot fit in the QR Code"+r.getSize()+" > "+n);for(var o=0;o<4&&r.getSize()<n;++o)r.appendBit(!1);var a=r.getSize()&7;if(a>0)for(var o=a;o<8;o++)r.appendBit(!1);for(var u=e-r.getSizeInBytes(),o=0;o<u;++o)r.appendBits(o&1?17:236,8);if(r.getSize()!==n)throw new Dt("Bits size does not equal capacity")},t.getNumDataBytesAndNumECBytesForBlockID=function(e,r,n,o,a,u){if(o>=n)throw new Dt("Block ID too large");var s=e%n,l=n-s,i=Math.floor(e/n),c=i+1,f=Math.floor(r/n),d=f+1,h=i-f,p=c-d;if(h!==p)throw new Dt("EC bytes mismatch");if(n!==l+s)throw new Dt("RS blocks mismatch");if(e!==(f+h)*l+(d+p)*s)throw new Dt("Total bytes mismatch");o<l?(a[0]=f,u[0]=h):(a[0]=d,u[0]=p)},t.interleaveWithECBytes=function(e,r,n,o){var a,u,s,l;if(e.getSizeInBytes()!==n)throw new Dt("Number of bits and data bytes does not match");for(var i=0,c=0,f=0,d=new Array,h=0;h<o;++h){var p=new Int32Array(1),m=new Int32Array(1);t.getNumDataBytesAndNumECBytesForBlockID(r,n,o,h,p,m);var v=p[0],x=new Uint8Array(v);e.toBytes(8*i,x,0,v);var y=t.generateECBytes(x,m[0]);d.push(new o2(x,y)),c=Math.max(c,v),f=Math.max(f,y.length),i+=p[0]}if(n!==i)throw new Dt("Data bytes does not match offset");for(var _=new Pt,h=0;h<c;++h)try{for(var I=(a=void 0,a2(d)),C=I.next();!C.done;C=I.next()){var V=C.value,x=V.getDataBytes();h<x.length&&_.appendBits(x[h],8)}}catch(X){a={error:X}}finally{try{C&&!C.done&&(u=I.return)&&u.call(I)}finally{if(a)throw a.error}}for(var h=0;h<f;++h)try{for(var z=(s=void 0,a2(d)),W=z.next();!W.done;W=z.next()){var V=W.value,y=V.getErrorCorrectionBytes();h<y.length&&_.appendBits(y[h],8)}}catch(X){s={error:X}}finally{try{W&&!W.done&&(l=z.return)&&l.call(z)}finally{if(s)throw s.error}}if(r!==_.getSizeInBytes())throw new Dt("Interleaving error: "+r+" and "+_.getSizeInBytes()+" differ.");return _},t.generateECBytes=function(e,r){for(var n=e.length,o=new Int32Array(n+r),a=0;a<n;a++)o[a]=e[a]&255;new Tl(nr.QR_CODE_FIELD_256).encode(o,r);for(var u=new Uint8Array(r),a=0;a<r;a++)u[a]=o[n+a];return u},t.appendModeInfo=function(e,r){r.appendBits(e.getBits(),4)},t.appendLengthInfo=function(e,r,n,o){var a=n.getCharacterCountBits(r);if(e>=1<<a)throw new Dt(e+" is bigger than "+((1<<a)-1));o.appendBits(e,a)},t.appendBytes=function(e,r,n,o){switch(r){case St.NUMERIC:t.appendNumericBytes(e,n);break;case St.ALPHANUMERIC:t.appendAlphanumericBytes(e,n);break;case St.BYTE:t.append8BitBytes(e,n,o);break;case St.KANJI:t.appendKanjiBytes(e,n);break;default:throw new Dt("Invalid mode: "+r)}},t.getDigit=function(e){return e.charCodeAt(0)-48},t.isDigit=function(e){var r=t.getDigit(e);return r>=0&&r<=9},t.appendNumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var a=t.getDigit(e.charAt(o));if(o+2<n){var u=t.getDigit(e.charAt(o+1)),s=t.getDigit(e.charAt(o+2));r.appendBits(a*100+u*10+s,10),o+=3}else if(o+1<n){var u=t.getDigit(e.charAt(o+1));r.appendBits(a*10+u,7),o+=2}else r.appendBits(a,4),o++}},t.appendAlphanumericBytes=function(e,r){for(var n=e.length,o=0;o<n;){var a=t.getAlphanumericCode(e.charCodeAt(o));if(a===-1)throw new Dt;if(o+1<n){var u=t.getAlphanumericCode(e.charCodeAt(o+1));if(u===-1)throw new Dt;r.appendBits(a*45+u,11),o+=2}else r.appendBits(a,6),o++}},t.append8BitBytes=function(e,r,n){var o;try{o=Sr.encode(e,n)}catch(l){throw new Dt(l)}for(var a=0,u=o.length;a!==u;a++){var s=o[a];r.appendBits(s,8)}},t.appendKanjiBytes=function(e,r){var n;try{n=Sr.encode(e,Mt.SJIS)}catch(f){throw new Dt(f)}for(var o=n.length,a=0;a<o;a+=2){var u=n[a]&255,s=n[a+1]&255,l=u<<8&4294967295|s,i=-1;if(l>=33088&&l<=40956?i=l-33088:l>=57408&&l<=60351&&(i=l-49472),i===-1)throw new Dt("Invalid byte sequence");var c=(i>>8)*192+(i&255);r.appendBits(c,13)}},t.appendECI=function(e,r){r.appendBits(St.ECI.getBits(),4),r.appendBits(e.getValue(),8)},t.ALPHANUMERIC_TABLE=Int32Array.from([-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,-1,36,-1,-1,-1,37,38,-1,-1,-1,-1,39,40,-1,41,42,43,0,1,2,3,4,5,6,7,8,9,44,-1,-1,-1,-1,-1,-1,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,-1,-1,-1,-1,-1]),t.DEFAULT_BYTE_MODE_ENCODING=Mt.UTF8.getName(),t}(),uo=l7;var Pse=function(){function t(){}return t.prototype.write=function(e,r,n,o){if(o===void 0&&(o=null),e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=on.L,u=t.QUIET_ZONE_SIZE;o!==null&&(o.get(Oe.ERROR_CORRECTION)!==void 0&&(a=on.fromString(o.get(Oe.ERROR_CORRECTION).toString())),o.get(Oe.MARGIN)!==void 0&&(u=Number.parseInt(o.get(Oe.MARGIN).toString(),10)));var s=uo.encode(e,a,o);return this.renderResult(s,r,n,u)},t.prototype.writeToDom=function(e,r,n,o,a){a===void 0&&(a=null),typeof e=="string"&&(e=document.querySelector(e));var u=this.write(r,n,o,a);e&&e.appendChild(u)},t.prototype.renderResult=function(e,r,n,o){var a=e.getMatrix();if(a===null)throw new hr;for(var u=a.getWidth(),s=a.getHeight(),l=u+o*2,i=s+o*2,c=Math.max(r,l),f=Math.max(n,i),d=Math.min(Math.floor(c/l),Math.floor(f/i)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)if(a.get(y,v)===1){var I=this.createSvgRectElement(_,x,d,d);m.appendChild(I)}return m},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"svg");return n.setAttributeNS(null,"height",e.toString()),n.setAttributeNS(null,"width",r.toString()),n},t.prototype.createSvgRectElement=function(e,r,n,o){var a=document.createElementNS(t.SVG_NS,"rect");return a.setAttributeNS(null,"x",e.toString()),a.setAttributeNS(null,"y",r.toString()),a.setAttributeNS(null,"height",n.toString()),a.setAttributeNS(null,"width",o.toString()),a.setAttributeNS(null,"fill","#000000"),a},t.QUIET_ZONE_SIZE=4,t.SVG_NS="http://www.w3.org/2000/svg",t}();var c7=function(){function t(){}return t.prototype.encode=function(e,r,n,o,a){if(e.length===0)throw new re("Found empty contents");if(r!==ae.QR_CODE)throw new re("Can only encode QR_CODE, but got "+r);if(n<0||o<0)throw new re("Requested dimensions are too small: "+n+"x"+o);var u=on.L,s=t.QUIET_ZONE_SIZE;a!==null&&(a.get(Oe.ERROR_CORRECTION)!==void 0&&(u=on.fromString(a.get(Oe.ERROR_CORRECTION).toString())),a.get(Oe.MARGIN)!==void 0&&(s=Number.parseInt(a.get(Oe.MARGIN).toString(),10)));var l=uo.encode(e,u,a);return t.renderResult(l,n,o,s)},t.renderResult=function(e,r,n,o){var a=e.getMatrix();if(a===null)throw new hr;for(var u=a.getWidth(),s=a.getHeight(),l=u+o*2,i=s+o*2,c=Math.max(r,l),f=Math.max(n,i),d=Math.min(Math.floor(c/l),Math.floor(f/i)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=new Nt(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)a.get(y,v)===1&&m.setRegion(_,x,d,d);return m},t.QUIET_ZONE_SIZE=4,t}(),jg=c7;var nue=function(){function t(){}return t.prototype.encode=function(e,r,n,o,a){var u;switch(r){case ae.QR_CODE:u=new jg;break;default:throw new re("No encoder available for format "+r)}return u.encode(e,r,n,o,a)},t}();var f7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),lue=function(t){f7(e,t);function e(r,n,o,a,u,s,l,i){var c=t.call(this,s,l)||this;if(c.yuvData=r,c.dataWidth=n,c.dataHeight=o,c.left=a,c.top=u,a+s>n||u+l>o)throw new re("Crop rectangle does not fit within image data.");return i&&c.reverseHorizontal(s,l),c}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var o=this.getWidth();(n==null||n.length<o)&&(n=new Uint8ClampedArray(o));var a=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.yuvData,a,n,0,o),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.yuvData;var o=r*n,a=new Uint8ClampedArray(o),u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.yuvData,u,a,0,o),a;for(var s=0;s<n;s++){var l=s*r;Pe.arraycopy(this.yuvData,u,a,l,r),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return new e(this.yuvData,this.dataWidth,this.dataHeight,this.left+r,this.top+n,o,a,!1)},e.prototype.renderThumbnail=function(){for(var r=this.getWidth()/e.THUMBNAIL_SCALE_FACTOR,n=this.getHeight()/e.THUMBNAIL_SCALE_FACTOR,o=new Int32Array(r*n),a=this.yuvData,u=this.top*this.dataWidth+this.left,s=0;s<n;s++){for(var l=s*r,i=0;i<r;i++){var c=a[u+i*e.THUMBNAIL_SCALE_FACTOR]&255;o[l+i]=4278190080|c*65793}u+=this.dataWidth*e.THUMBNAIL_SCALE_FACTOR}return o},e.prototype.getThumbnailWidth=function(){return this.getWidth()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.getThumbnailHeight=function(){return this.getHeight()/e.THUMBNAIL_SCALE_FACTOR},e.prototype.reverseHorizontal=function(r,n){for(var o=this.yuvData,a=0,u=this.top*this.dataWidth+this.left;a<n;a++,u+=this.dataWidth)for(var s=u+r/2,l=u,i=u+r-1;l<s;l++,i--){var c=o[l];o[l]=o[i],o[i]=c}},e.prototype.invert=function(){return new ro(this)},e.THUMBNAIL_SCALE_FACTOR=2,e}(fi);var d7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),mue=function(t){d7(e,t);function e(r,n,o,a,u,s,l){var i=t.call(this,n,o)||this;if(i.dataWidth=a,i.dataHeight=u,i.left=s,i.top=l,r.BYTES_PER_ELEMENT===4){for(var c=n*o,f=new Uint8ClampedArray(c),d=0;d<c;d++){var h=r[d],p=h>>16&255,m=h>>7&510,v=h&255;f[d]=(p+m+v)/4&255}i.luminances=f}else i.luminances=r;if(a===void 0&&(i.dataWidth=n),u===void 0&&(i.dataHeight=o),s===void 0&&(i.left=0),l===void 0&&(i.top=0),i.left+n>i.dataWidth||i.top+o>i.dataHeight)throw new re("Crop rectangle does not fit within image data.");return i}return e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var o=this.getWidth();(n==null||n.length<o)&&(n=new Uint8ClampedArray(o));var a=(r+this.top)*this.dataWidth+this.left;return Pe.arraycopy(this.luminances,a,n,0,o),n},e.prototype.getMatrix=function(){var r=this.getWidth(),n=this.getHeight();if(r===this.dataWidth&&n===this.dataHeight)return this.luminances;var o=r*n,a=new Uint8ClampedArray(o),u=this.top*this.dataWidth+this.left;if(r===this.dataWidth)return Pe.arraycopy(this.luminances,u,a,0,o),a;for(var s=0;s<n;s++){var l=s*r;Pe.arraycopy(this.luminances,u,a,l,r),u+=this.dataWidth}return a},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return new e(this.luminances,o,a,this.dataWidth,this.dataHeight,this.left+r,this.top+n)},e.prototype.invert=function(){return new ro(this)},e}(fi);var h7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),p7=function(t){h7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.forName=function(r){return this.getCharacterSetECIByName(r)},e}(Mt),Sa=p7;var g7=function(){function t(){}return t.ISO_8859_1=Mt.ISO8859_1,t}(),Al=g7;var m7=function(){function t(e,r,n){this.codewords=e,this.numcols=r,this.numrows=n,this.bits=new Uint8Array(r*n),it.fill(this.bits,2)}return t.prototype.getNumrows=function(){return this.numrows},t.prototype.getNumcols=function(){return this.numcols},t.prototype.getBits=function(){return this.bits},t.prototype.getBit=function(e,r){return this.bits[r*this.numcols+e]===1},t.prototype.setBit=function(e,r,n){this.bits[r*this.numcols+e]=n?1:0},t.prototype.noBit=function(e,r){return this.bits[r*this.numcols+e]===2},t.prototype.place=function(){var e=0,r=4,n=0;do{r===this.numrows&&n===0&&this.corner1(e++),r===this.numrows-2&&n===0&&this.numcols%4!==0&&this.corner2(e++),r===this.numrows-2&&n===0&&this.numcols%8===4&&this.corner3(e++),r===this.numrows+4&&n===2&&this.numcols%8===0&&this.corner4(e++);do r<this.numrows&&n>=0&&this.noBit(n,r)&&this.utah(r,n,e++),r-=2,n+=2;while(r>=0&&n<this.numcols);r++,n+=3;do r>=0&&n<this.numcols&&this.noBit(n,r)&&this.utah(r,n,e++),r+=2,n-=2;while(r<this.numrows&&n>=0);r+=3,n++}while(r<this.numrows||n<this.numcols);this.noBit(this.numcols-1,this.numrows-1)&&(this.setBit(this.numcols-1,this.numrows-1,!0),this.setBit(this.numcols-2,this.numrows-2,!0))},t.prototype.module=function(e,r,n,o){e<0&&(e+=this.numrows,r+=4-(this.numrows+4)%8),r<0&&(r+=this.numcols,e+=4-(this.numcols+4)%8);var a=this.codewords.charCodeAt(n);a&=1<<8-o,this.setBit(r,e,a!==0)},t.prototype.utah=function(e,r,n){this.module(e-2,r-2,n,1),this.module(e-2,r-1,n,2),this.module(e-1,r-2,n,3),this.module(e-1,r-1,n,4),this.module(e-1,r,n,5),this.module(e,r-2,n,6),this.module(e,r-1,n,7),this.module(e,r,n,8)},t.prototype.corner1=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,1,e,2),this.module(this.numrows-1,2,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},t.prototype.corner2=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-4,e,4),this.module(0,this.numcols-3,e,5),this.module(0,this.numcols-2,e,6),this.module(0,this.numcols-1,e,7),this.module(1,this.numcols-1,e,8)},t.prototype.corner3=function(e){this.module(this.numrows-3,0,e,1),this.module(this.numrows-2,0,e,2),this.module(this.numrows-1,0,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-1,e,6),this.module(2,this.numcols-1,e,7),this.module(3,this.numcols-1,e,8)},t.prototype.corner4=function(e){this.module(this.numrows-1,0,e,1),this.module(this.numrows-1,this.numcols-1,e,2),this.module(0,this.numcols-3,e,3),this.module(0,this.numcols-2,e,4),this.module(0,this.numcols-1,e,5),this.module(1,this.numcols-3,e,6),this.module(1,this.numcols-2,e,7),this.module(1,this.numcols-1,e,8)},t}(),Qf=m7;var Ug,Hg=[5,7,10,11,12,14,18,20,24,28,36,42,48,56,62,68],s2=[[228,48,15,111,62],[23,68,144,134,240,92,254],[28,24,185,166,223,248,116,255,110,61],[175,138,205,12,194,168,39,245,60,97,120],[41,153,158,91,61,42,142,213,97,178,100,242],[156,97,192,252,95,9,157,119,138,45,18,186,83,185],[83,195,100,39,188,75,66,61,241,213,109,129,94,254,225,48,90,188],[15,195,244,9,233,71,168,2,188,160,153,145,253,79,108,82,27,174,186,172],[52,190,88,205,109,39,176,21,155,197,251,223,155,21,5,172,254,124,12,181,184,96,50,193],[211,231,43,97,71,96,103,174,37,151,170,53,75,34,249,121,17,138,110,213,141,136,120,151,233,168,93,255],[245,127,242,218,130,250,162,181,102,120,84,179,220,251,80,182,229,18,2,4,68,33,101,137,95,119,115,44,175,184,59,25,225,98,81,112],[77,193,137,31,19,38,22,153,247,105,122,2,245,133,242,8,175,95,100,9,167,105,214,111,57,121,21,1,253,57,54,101,248,202,69,50,150,177,226,5,9,5],[245,132,172,223,96,32,117,22,238,133,238,231,205,188,237,87,191,106,16,147,118,23,37,90,170,205,131,88,120,100,66,138,186,240,82,44,176,87,187,147,160,175,69,213,92,253,225,19],[175,9,223,238,12,17,220,208,100,29,175,170,230,192,215,235,150,159,36,223,38,200,132,54,228,146,218,234,117,203,29,232,144,238,22,150,201,117,62,207,164,13,137,245,127,67,247,28,155,43,203,107,233,53,143,46],[242,93,169,50,144,210,39,118,202,188,201,189,143,108,196,37,185,112,134,230,245,63,197,190,250,106,185,221,175,64,114,71,161,44,147,6,27,218,51,63,87,10,40,130,188,17,163,31,176,170,4,107,232,7,94,166,224,124,86,47,11,204],[220,228,173,89,251,149,159,56,89,33,147,244,154,36,73,127,213,136,248,180,234,197,158,177,68,122,93,213,15,160,227,236,66,139,153,185,202,167,179,25,220,232,96,210,231,136,223,239,181,241,59,52,172,25,49,232,211,189,64,54,108,153,132,63,96,103,82,186]],y7=301,v7=function(t,e){for(var r=1,n=0;n<255;n++)e[n]=r,t[r]=n,r*=2,r>=256&&(r^=y7);return{LOG:t,ALOG:e}},Sl=(Ug=v7([],[]),Ug.LOG),zg=Ug.ALOG;var Gg=129,Jf=230,u2=231,l2=235,c2=236,f2=237,d2=238,h2=239,p2=240,ed=254,g2=254,Ss="[)>05",Ds="[)>06",Cs="",Ke=0,mr=1,Nr=2,ir=3,pr=4,Dr=5;var b7=function(){function t(){}return t.encodeECC200=function(e,r){if(e.length!==r.getDataCapacity())throw new Error("The number of codewords does not match the selected symbol");var n=new de;n.append(e);var o=r.getInterleavedBlockCount();if(o===1){var a=this.createECCBlock(e,r.getErrorCodewords());n.append(a)}else{for(var u=[],s=[],l=0;l<o;l++)u[l]=r.getDataLengthForInterleavedBlock(l+1),s[l]=r.getErrorLengthForInterleavedBlock(l+1);for(var i=0;i<o;i++){for(var c=new de,f=i;f<r.getDataCapacity();f+=o)c.append(e.charAt(f));for(var a=this.createECCBlock(c.toString(),s[i]),d=0,h=i;h<s[i]*o;h+=o)n.setCharAt(r.getDataCapacity()+h,a.charAt(d++))}}return n.toString()},t.createECCBlock=function(e,r){for(var n=-1,o=0;o<Hg.length;o++)if(Hg[o]===r){n=o;break}if(n<0)throw new Error("Illegal number of error correction codewords specified: "+r);for(var a=s2[n],u=[],o=0;o<r;o++)u[o]=0;for(var o=0;o<e.length;o++){for(var s=u[r-1]^e.charAt(o).charCodeAt(0),l=r-1;l>0;l--)s!==0&&a[l]!==0?u[l]=u[l-1]^zg[(Sl[s]+Sl[a[l]])%255]:u[l]=u[l-1];s!==0&&a[0]!==0?u[0]=zg[(Sl[s]+Sl[a[0]])%255]:u[0]=0}for(var i=[],o=0;o<r;o++)i[o]=u[r-o-1];return i.map(function(c){return String.fromCharCode(c)}).join("")},t}(),td=b7;var Wg=function(){function t(){}return t.prototype.getEncodingMode=function(){return Ke},t.prototype.encode=function(e){var r=Ie.determineConsecutiveDigitCount(e.getMessage(),e.pos);if(r>=2)e.writeCodeword(this.encodeASCIIDigits(e.getMessage().charCodeAt(e.pos),e.getMessage().charCodeAt(e.pos+1))),e.pos+=2;else{var n=e.getCurrentChar(),o=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode())switch(o){case Dr:e.writeCodeword(u2),e.signalEncoderChange(Dr);return;case mr:e.writeCodeword(Jf),e.signalEncoderChange(mr);return;case ir:e.writeCodeword(d2),e.signalEncoderChange(ir);break;case Nr:e.writeCodeword(h2),e.signalEncoderChange(Nr);break;case pr:e.writeCodeword(p2),e.signalEncoderChange(pr);break;default:throw new Error("Illegal mode: "+o)}else Ie.isExtendedASCII(n)?(e.writeCodeword(l2),e.writeCodeword(n-128+1),e.pos++):(e.writeCodeword(n+1),e.pos++)}},t.prototype.encodeASCIIDigits=function(e,r){if(Ie.isDigit(e)&&Ie.isDigit(r)){var n=(e-48)*10+(r-48);return n+130}throw new Error("not digits: "+e+r)},t}();var qg=function(){function t(){}return t.prototype.getEncodingMode=function(){return Dr},t.prototype.encode=function(e){var r=new de;for(r.append(0);e.hasMoreCharacters();){var n=e.getCurrentChar();r.append(n),e.pos++;var o=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(o!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}var a=r.length()-1,u=1,s=e.getCodewordCount()+a+u;e.updateSymbolInfo(s);var l=e.getSymbolInfo().getDataCapacity()-s>0;if(e.hasMoreCharacters()||l)if(a<=249)r.setCharAt(0,_e.getCharAt(a));else if(a<=1555)r.setCharAt(0,_e.getCharAt(Math.floor(a/250)+249)),r.insert(1,_e.getCharAt(a%250));else throw new Error("Message length not in valid ranges: "+a);for(var i=0,n=r.length();i<n;i++)e.writeCodeword(this.randomize255State(r.charAt(i).charCodeAt(0),e.getCodewordCount()+1))},t.prototype.randomize255State=function(e,r){var n=149*r%255+1,o=e+n;return o<=255?o:o-256},t}();var Da=function(){function t(){}return t.prototype.getEncodingMode=function(){return mr},t.prototype.encodeMaximal=function(e){for(var r=new de,n=0,o=e.pos,a=0;e.hasMoreCharacters();){var u=e.getCurrentChar();e.pos++,n=this.encodeChar(u,r),r.length()%3===0&&(o=e.pos,a=r.length())}if(a!==r.length()){var s=Math.floor(r.length()/3*2),l=Math.floor(e.getCodewordCount()+s+1);e.updateSymbolInfo(l);var i=e.getSymbolInfo().getDataCapacity()-l,c=Math.floor(r.length()%3);(c===2&&i!==2||c===1&&(n>3||i!==1))&&(e.pos=o)}r.length()>0&&e.writeCodeword(Jf),this.handleEOD(e,r)},t.prototype.encode=function(e){for(var r=new de;e.hasMoreCharacters();){var n=e.getCurrentChar();e.pos++;var o=this.encodeChar(n,r),a=Math.floor(r.length()/3)*2,u=e.getCodewordCount()+a;e.updateSymbolInfo(u);var s=e.getSymbolInfo().getDataCapacity()-u;if(!e.hasMoreCharacters()){var l=new de;for(r.length()%3===2&&s!==2&&(o=this.backtrackOneCharacter(e,r,l,o));r.length()%3===1&&(o>3||s!==1);)o=this.backtrackOneCharacter(e,r,l,o);break}var i=r.length();if(i%3===0){var c=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(c!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}}this.handleEOD(e,r)},t.prototype.backtrackOneCharacter=function(e,r,n,o){var a=r.length(),u=r.toString().substring(0,a-o);r.setLengthToZero(),r.append(u),e.pos--;var s=e.getCurrentChar();return o=this.encodeChar(s,n),e.resetSymbolInfo(),o},t.prototype.writeNextTriplet=function(e,r){e.writeCodewords(this.encodeToCodewords(r.toString()));var n=r.toString().substring(3);r.setLengthToZero(),r.append(n)},t.prototype.handleEOD=function(e,r){var n=Math.floor(r.length()/3*2),o=r.length()%3,a=e.getCodewordCount()+n;e.updateSymbolInfo(a);var u=e.getSymbolInfo().getDataCapacity()-a;if(o===2){for(r.append("\0");r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(ed)}else if(u===1&&o===1){for(;r.length()>=3;)this.writeNextTriplet(e,r);e.hasMoreCharacters()&&e.writeCodeword(ed),e.pos--}else if(o===0){for(;r.length()>=3;)this.writeNextTriplet(e,r);(u>0||e.hasMoreCharacters())&&e.writeCodeword(ed)}else throw new Error("Unexpected case. Please report!");e.signalEncoderChange(Ke)},t.prototype.encodeChar=function(e,r){if(e===32)return r.append(3),1;if(e>=48&&e<=57)return r.append(e-48+4),1;if(e>=65&&e<=90)return r.append(e-65+14),1;if(e<32)return r.append(0),r.append(e),2;if(e<=47)return r.append(1),r.append(e-33),2;if(e<=64)return r.append(1),r.append(e-58+15),2;if(e<=95)return r.append(1),r.append(e-91+22),2;if(e<=127)return r.append(2),r.append(e-96),2;r.append("1");var n=2;return n+=this.encodeChar(e-128,r),n},t.prototype.encodeToCodewords=function(e){var r=1600*e.charCodeAt(0)+40*e.charCodeAt(1)+e.charCodeAt(2)+1,n=r/256,o=r%256,a=new de;return a.append(n),a.append(o),a.toString()},t}();var Xg=function(){function t(){}return t.prototype.getEncodingMode=function(){return pr},t.prototype.encode=function(e){for(var r=new de;e.hasMoreCharacters();){var n=e.getCurrentChar();this.encodeChar(n,r),e.pos++;var o=r.length();if(o>=4){e.writeCodewords(this.encodeToCodewords(r.toString()));var a=r.toString().substring(4);r.setLengthToZero(),r.append(a);var u=Ie.lookAheadTest(e.getMessage(),e.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){e.signalEncoderChange(Ke);break}}}r.append(_e.getCharAt(31)),this.handleEOD(e,r)},t.prototype.handleEOD=function(e,r){try{var n=r.length();if(n===0)return;if(n===1){e.updateSymbolInfo();var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount(),a=e.getRemainingCharacters();if(a>o&&(e.updateSymbolInfo(e.getCodewordCount()+1),o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount()),a<=o&&o<=2)return}if(n>4)throw new Error("Count must not exceed 4");var u=n-1,s=this.encodeToCodewords(r.toString()),l=!e.hasMoreCharacters(),i=l&&u<=2;if(u<=2){e.updateSymbolInfo(e.getCodewordCount()+u);var o=e.getSymbolInfo().getDataCapacity()-e.getCodewordCount();o>=3&&(i=!1,e.updateSymbolInfo(e.getCodewordCount()+s.length))}i?(e.resetSymbolInfo(),e.pos-=u):e.writeCodewords(s)}finally{e.signalEncoderChange(Ke)}},t.prototype.encodeChar=function(e,r){e>=32&&e<=63?r.append(e):e>=64&&e<=94?r.append(_e.getCharAt(e-64)):Ie.illegalCharacter(_e.getCharAt(e))},t.prototype.encodeToCodewords=function(e){var r=e.length;if(r===0)throw new Error("StringBuilder must not be empty");var n=e.charAt(0).charCodeAt(0),o=r>=2?e.charAt(1).charCodeAt(0):0,a=r>=3?e.charAt(2).charCodeAt(0):0,u=r>=4?e.charAt(3).charCodeAt(0):0,s=(n<<18)+(o<<12)+(a<<6)+u,l=s>>16&255,i=s>>8&255,c=s&255,f=new de;return f.append(l),r>=2&&f.append(i),r>=3&&f.append(c),f.toString()},t}();var w7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),x7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ft=function(){function t(e,r,n,o,a,u,s,l){s===void 0&&(s=0),l===void 0&&(l=0),this.rectangular=e,this.dataCapacity=r,this.errorCodewords=n,this.matrixWidth=o,this.matrixHeight=a,this.dataRegions=u,this.rsBlockData=s,this.rsBlockError=l}return t.lookup=function(e,r,n,o,a){var u,s;r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=null),a===void 0&&(a=!0);try{for(var l=x7(E7),i=l.next();!i.done;i=l.next()){var c=i.value;if(!(r===1&&c.rectangular)&&!(r===2&&!c.rectangular)&&!(n!=null&&(c.getSymbolWidth()<n.getWidth()||c.getSymbolHeight()<n.getHeight()))&&!(o!=null&&(c.getSymbolWidth()>o.getWidth()||c.getSymbolHeight()>o.getHeight()))&&e<=c.dataCapacity)return c}}catch(f){u={error:f}}finally{try{i&&!i.done&&(s=l.return)&&s.call(l)}finally{if(u)throw u.error}}if(a)throw new Error("Can't find a symbol arrangement that matches the message. Data codewords: "+e);return null},t.prototype.getHorizontalDataRegions=function(){switch(this.dataRegions){case 1:return 1;case 2:case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getVerticalDataRegions=function(){switch(this.dataRegions){case 1:case 2:return 1;case 4:return 2;case 16:return 4;case 36:return 6;default:throw new Error("Cannot handle this number of data regions")}},t.prototype.getSymbolDataWidth=function(){return this.getHorizontalDataRegions()*this.matrixWidth},t.prototype.getSymbolDataHeight=function(){return this.getVerticalDataRegions()*this.matrixHeight},t.prototype.getSymbolWidth=function(){return this.getSymbolDataWidth()+this.getHorizontalDataRegions()*2},t.prototype.getSymbolHeight=function(){return this.getSymbolDataHeight()+this.getVerticalDataRegions()*2},t.prototype.getCodewordCount=function(){return this.dataCapacity+this.errorCodewords},t.prototype.getInterleavedBlockCount=function(){return this.rsBlockData?this.dataCapacity/this.rsBlockData:1},t.prototype.getDataCapacity=function(){return this.dataCapacity},t.prototype.getErrorCodewords=function(){return this.errorCodewords},t.prototype.getDataLengthForInterleavedBlock=function(e){return this.rsBlockData},t.prototype.getErrorLengthForInterleavedBlock=function(e){return this.rsBlockError},t}(),Os=ft,_7=function(t){w7(e,t);function e(){return t.call(this,!1,1558,620,22,22,36,-1,62)||this}return e.prototype.getInterleavedBlockCount=function(){return 10},e.prototype.getDataLengthForInterleavedBlock=function(r){return r<=8?156:155},e}(ft),E7=[new ft(!1,3,5,8,8,1),new ft(!1,5,7,10,10,1),new ft(!0,5,7,16,6,1),new ft(!1,8,10,12,12,1),new ft(!0,10,11,14,6,2),new ft(!1,12,12,14,14,1),new ft(!0,16,14,24,10,1),new ft(!1,18,14,16,16,1),new ft(!1,22,18,18,18,1),new ft(!0,22,18,16,10,2),new ft(!1,30,20,20,20,1),new ft(!0,32,24,16,14,2),new ft(!1,36,24,22,22,1),new ft(!1,44,28,24,24,1),new ft(!0,49,28,22,14,2),new ft(!1,62,36,14,14,4),new ft(!1,86,42,16,16,4),new ft(!1,114,48,18,18,4),new ft(!1,144,56,20,20,4),new ft(!1,174,68,22,22,4),new ft(!1,204,84,24,24,4,102,42),new ft(!1,280,112,14,14,16,140,56),new ft(!1,368,144,16,16,16,92,36),new ft(!1,456,192,18,18,16,114,48),new ft(!1,576,224,20,20,16,144,56),new ft(!1,696,272,22,22,16,174,68),new ft(!1,816,336,24,24,16,136,56),new ft(!1,1050,408,18,18,36,175,68),new ft(!1,1304,496,20,20,36,163,62),new _7];var Yg=function(){function t(e){this.msg=e,this.pos=0,this.skipAtEnd=0;for(var r=e.split("").map(function(s){return s.charCodeAt(0)}),n=new de,o=0,a=r.length;o<a;o++){var u=String.fromCharCode(r[o]&255);if(u==="?"&&e.charAt(o)!=="?")throw new Error("Message contains characters outside ISO-8859-1 encoding.");n.append(u)}this.msg=n.toString(),this.shape=0,this.codewords=new de,this.newEncoding=-1}return t.prototype.setSymbolShape=function(e){this.shape=e},t.prototype.setSizeConstraints=function(e,r){this.minSize=e,this.maxSize=r},t.prototype.getMessage=function(){return this.msg},t.prototype.setSkipAtEnd=function(e){this.skipAtEnd=e},t.prototype.getCurrentChar=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCurrent=function(){return this.msg.charCodeAt(this.pos)},t.prototype.getCodewords=function(){return this.codewords},t.prototype.writeCodewords=function(e){this.codewords.append(e)},t.prototype.writeCodeword=function(e){this.codewords.append(e)},t.prototype.getCodewordCount=function(){return this.codewords.length()},t.prototype.getNewEncoding=function(){return this.newEncoding},t.prototype.signalEncoderChange=function(e){this.newEncoding=e},t.prototype.resetEncoderSignal=function(){this.newEncoding=-1},t.prototype.hasMoreCharacters=function(){return this.pos<this.getTotalMessageCharCount()},t.prototype.getTotalMessageCharCount=function(){return this.msg.length-this.skipAtEnd},t.prototype.getRemainingCharacters=function(){return this.getTotalMessageCharCount()-this.pos},t.prototype.getSymbolInfo=function(){return this.symbolInfo},t.prototype.updateSymbolInfo=function(e){e===void 0&&(e=this.getCodewordCount()),(this.symbolInfo==null||e>this.symbolInfo.getDataCapacity())&&(this.symbolInfo=Os.lookup(e,this.shape,this.minSize,this.maxSize,!0))},t.prototype.resetSymbolInfo=function(){this.symbolInfo=null},t}();var T7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zg=function(t){T7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return ir},e.prototype.encode=function(r){for(var n=new de;r.hasMoreCharacters();){var o=r.getCurrentChar();r.pos++,this.encodeChar(o,n);var a=n.length();if(a%3===0){this.writeNextTriplet(r,n);var u=Ie.lookAheadTest(r.getMessage(),r.pos,this.getEncodingMode());if(u!==this.getEncodingMode()){r.signalEncoderChange(Ke);break}}}this.handleEOD(r,n)},e.prototype.encodeChar=function(r,n){switch(r){case 13:n.append(0);break;case 42:n.append(1);break;case 62:n.append(2);break;case 32:n.append(3);break;default:r>=48&&r<=57?n.append(r-48+4):r>=65&&r<=90?n.append(r-65+14):Ie.illegalCharacter(_e.getCharAt(r));break}return 1},e.prototype.handleEOD=function(r,n){r.updateSymbolInfo();var o=r.getSymbolInfo().getDataCapacity()-r.getCodewordCount(),a=n.length();r.pos-=a,(r.getRemainingCharacters()>1||o>1||r.getRemainingCharacters()!==o)&&r.writeCodeword(g2),r.getNewEncoding()<0&&r.signalEncoderChange(Ke)},e}(Da);var I7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Kg=function(t){I7(e,t);function e(){return t!==null&&t.apply(this,arguments)||this}return e.prototype.getEncodingMode=function(){return Nr},e.prototype.encodeChar=function(r,n){if(r===32)return n.append(3),1;if(r>=48&&r<=57)return n.append(r-48+4),1;if(r>=97&&r<=122)return n.append(r-97+14),1;if(r<32)return n.append(0),n.append(r),2;if(r<=47)return n.append(1),n.append(r-33),2;if(r<=64)return n.append(1),n.append(r-58+15),2;if(r>=91&&r<=95)return n.append(1),n.append(r-91+22),2;if(r===96)return n.append(2),n.append(0),2;if(r<=90)return n.append(2),n.append(r-65+1),2;if(r<=127)return n.append(2),n.append(r-123+27),2;n.append("1");var o=2;return o+=this.encodeChar(r-128,n),o},e}(Da);var A7=function(){function t(){}return t.randomize253State=function(e){var r=149*e%253+1,n=Gg+r;return n<=254?n:n-254},t.encodeHighLevel=function(e,r,n,o,a){r===void 0&&(r=0),n===void 0&&(n=null),o===void 0&&(o=null),a===void 0&&(a=!1);var u=new Da,s=[new Wg,u,new Kg,new Zg,new Xg,new qg],l=new Yg(e);l.setSymbolShape(r),l.setSizeConstraints(n,o),e.startsWith(Ss)&&e.endsWith(Cs)?(l.writeCodeword(c2),l.setSkipAtEnd(2),l.pos+=Ss.length):e.startsWith(Ds)&&e.endsWith(Cs)&&(l.writeCodeword(f2),l.setSkipAtEnd(2),l.pos+=Ds.length);var i=Ke;for(a&&(u.encodeMaximal(l),i=l.getNewEncoding(),l.resetEncoderSignal());l.hasMoreCharacters();)s[i].encode(l),l.getNewEncoding()>=0&&(i=l.getNewEncoding(),l.resetEncoderSignal());var c=l.getCodewordCount();l.updateSymbolInfo();var f=l.getSymbolInfo().getDataCapacity();c<f&&i!==Ke&&i!==Dr&&i!==pr&&l.writeCodeword("\xFE");var d=l.getCodewords();for(d.length()<f&&d.append(Gg);d.length()<f;)d.append(this.randomize253State(d.length()+1));return l.getCodewords().toString()},t.lookAheadTest=function(e,r,n){var o=this.lookAheadTestIntern(e,r,n);if(n===ir&&o===ir){for(var a=Math.min(r+3,e.length),u=r;u<a;u++)if(!this.isNativeX12(e.charCodeAt(u)))return Ke}else if(n===pr&&o===pr){for(var a=Math.min(r+4,e.length),u=r;u<a;u++)if(!this.isNativeEDIFACT(e.charCodeAt(u)))return Ke}return o},t.lookAheadTestIntern=function(e,r,n){if(r>=e.length)return n;var o;n===Ke?o=[0,1,1,1,1,1.25]:(o=[1,2,2,2,2,2.25],o[n]=0);for(var a=0,u=new Uint8Array(6),s=[];;){if(r+a===e.length){it.fill(u,0),it.fill(s,0);var l=this.findMinimums(o,s,ge.MAX_VALUE,u),i=this.getMinimumCount(u);if(s[Ke]===l)return Ke;if(i===1){if(u[Dr]>0)return Dr;if(u[pr]>0)return pr;if(u[Nr]>0)return Nr;if(u[ir]>0)return ir}return mr}var c=e.charCodeAt(r+a);if(a++,this.isDigit(c)?o[Ke]+=.5:this.isExtendedASCII(c)?(o[Ke]=Math.ceil(o[Ke]),o[Ke]+=2):(o[Ke]=Math.ceil(o[Ke]),o[Ke]++),this.isNativeC40(c)?o[mr]+=2/3:this.isExtendedASCII(c)?o[mr]+=8/3:o[mr]+=4/3,this.isNativeText(c)?o[Nr]+=2/3:this.isExtendedASCII(c)?o[Nr]+=8/3:o[Nr]+=4/3,this.isNativeX12(c)?o[ir]+=2/3:this.isExtendedASCII(c)?o[ir]+=13/3:o[ir]+=10/3,this.isNativeEDIFACT(c)?o[pr]+=3/4:this.isExtendedASCII(c)?o[pr]+=17/4:o[pr]+=13/4,this.isSpecialB256(c)?o[Dr]+=4:o[Dr]++,a>=4){if(it.fill(u,0),it.fill(s,0),this.findMinimums(o,s,ge.MAX_VALUE,u),s[Ke]<this.min(s[Dr],s[mr],s[Nr],s[ir],s[pr]))return Ke;if(s[Dr]<s[Ke]||s[Dr]+1<this.min(s[mr],s[Nr],s[ir],s[pr]))return Dr;if(s[pr]+1<this.min(s[Dr],s[mr],s[Nr],s[ir],s[Ke]))return pr;if(s[Nr]+1<this.min(s[Dr],s[mr],s[pr],s[ir],s[Ke]))return Nr;if(s[ir]+1<this.min(s[Dr],s[mr],s[pr],s[Nr],s[Ke]))return ir;if(s[mr]+1<this.min(s[Ke],s[Dr],s[pr],s[Nr])){if(s[mr]<s[ir])return mr;if(s[mr]===s[ir]){for(var f=r+a+1;f<e.length;){var d=e.charCodeAt(f);if(this.isX12TermSep(d))return ir;if(!this.isNativeX12(d))break;f++}return mr}}}}},t.min=function(e,r,n,o,a){var u=Math.min(e,Math.min(r,Math.min(n,o)));return a===void 0?u:Math.min(u,a)},t.findMinimums=function(e,r,n,o){for(var a=0;a<6;a++){var u=r[a]=Math.ceil(e[a]);n>u&&(n=u,it.fill(o,0)),n===u&&(o[a]=o[a]+1)}return n},t.getMinimumCount=function(e){for(var r=0,n=0;n<6;n++)r+=e[n];return r||0},t.isDigit=function(e){return e>=48&&e<=57},t.isExtendedASCII=function(e){return e>=128&&e<=255},t.isNativeC40=function(e){return e===32||e>=48&&e<=57||e>=65&&e<=90},t.isNativeText=function(e){return e===32||e>=48&&e<=57||e>=97&&e<=122},t.isNativeX12=function(e){return this.isX12TermSep(e)||e===32||e>=48&&e<=57||e>=65&&e<=90},t.isX12TermSep=function(e){return e===13||e===42||e===62},t.isNativeEDIFACT=function(e){return e>=32&&e<=94},t.isSpecialB256=function(e){return!1},t.determineConsecutiveDigitCount=function(e,r){r===void 0&&(r=0);for(var n=e.length,o=r;o<n&&this.isDigit(e.charCodeAt(o));)o++;return o-r},t.illegalCharacter=function(e){var r=ge.toHexString(e.charCodeAt(0));throw r="0000".substring(0,4-r.length)+r,new Error("Illegal character: "+e+" (0x"+r+")")},t}(),Ie=A7;var Qg=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},m2=function(){function t(e){this.charset=e,this.name=e.name}return t.prototype.canEncode=function(e){try{return Sr.encode(e,this.charset)!=null}catch{return!1}},t}(),y2=function(){function t(e,r,n){var o,a,u,s,l,i;this.ENCODERS=["IBM437","ISO-8859-2","ISO-8859-3","ISO-8859-4","ISO-8859-5","ISO-8859-6","ISO-8859-7","ISO-8859-8","ISO-8859-9","ISO-8859-10","ISO-8859-11","ISO-8859-13","ISO-8859-14","ISO-8859-15","ISO-8859-16","windows-1250","windows-1251","windows-1252","windows-1256","Shift_JIS"].map(function(k){return new m2(Sa.forName(k))}),this.encoders=[];var c=[];c.push(new m2(Al.ISO_8859_1));for(var f=r!=null&&r.name.startsWith("UTF"),d=0;d<e.length;d++){var h=!1;try{for(var p=(o=void 0,Qg(c)),m=p.next();!m.done;m=p.next()){var v=m.value,x=e.charAt(d),y=x.charCodeAt(0);if(y===n||v.canEncode(x)){h=!0;break}}}catch(k){o={error:k}}finally{try{m&&!m.done&&(a=p.return)&&a.call(p)}finally{if(o)throw o.error}}if(!h)try{for(var _=(u=void 0,Qg(this.ENCODERS)),I=_.next();!I.done;I=_.next()){var v=I.value;if(v.canEncode(e.charAt(d))){c.push(v),h=!0;break}}}catch(k){u={error:k}}finally{try{I&&!I.done&&(s=_.return)&&s.call(_)}finally{if(u)throw u.error}}h||(f=!0)}if(c.length===1&&!f)this.encoders=[c[0]];else{this.encoders=[];var C=0;try{for(var V=Qg(c),z=V.next();!z.done;z=V.next()){var v=z.value;this.encoders[C++]=v}}catch(k){l={error:k}}finally{try{z&&!z.done&&(i=V.return)&&i.call(V)}finally{if(l)throw l.error}}}var W=-1;if(r!=null){for(var d=0;d<this.encoders.length;d++)if(this.encoders[d]!=null&&r.name===this.encoders[d].name){W=d;break}}this.priorityEncoderIndex=W}return t.prototype.length=function(){return this.encoders.length},t.prototype.getCharsetName=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].name},t.prototype.getCharset=function(e){if(!(e<this.length()))throw new Error("index must be less than length");return this.encoders[e].charset},t.prototype.getECIValue=function(e){return this.encoders[e].charset.getValueIdentifier()},t.prototype.getPriorityEncoderIndex=function(){return this.priorityEncoderIndex},t.prototype.canEncode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return!0},t.prototype.encode=function(e,r){if(!(r<this.length()))throw new Error("index must be less than length");return Sr.encode(_e.getCharAt(e),this.encoders[r].name)},t}();var S7=3,b2=function(){function t(e,r,n){this.fnc1=n;var o=new y2(e,r,n);if(o.length()===1)for(var a=0;a<this.bytes.length;a++){var u=e.charAt(a).charCodeAt(0);this.bytes[a]=u===n?1e3:u}else this.bytes=this.encodeMinimally(e,o,n)}return t.prototype.getFNC1Character=function(){return this.fnc1},t.prototype.length=function(){return this.bytes.length},t.prototype.haveNCharacters=function(e,r){if(e+r-1>=this.bytes.length)return!1;for(var n=0;n<r;n++)if(this.isECI(e+n))return!1;return!0},t.prototype.charAt=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(this.isECI(e))throw new Error("value at "+e+" is not a character but an ECI");return this.isFNC1(e)?this.fnc1:this.bytes[e]},t.prototype.subSequence=function(e,r){if(e<0||e>r||r>this.length())throw new Error(""+e);for(var n=new de,o=e;o<r;o++){if(this.isECI(o))throw new Error("value at "+o+" is not a character but an ECI");n.append(this.charAt(o))}return n.toString()},t.prototype.isECI=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]>255&&this.bytes[e]<=999},t.prototype.isFNC1=function(e){if(e<0||e>=this.length())throw new Error(""+e);return this.bytes[e]===1e3},t.prototype.getECIValue=function(e){if(e<0||e>=this.length())throw new Error(""+e);if(!this.isECI(e))throw new Error("value at "+e+" is not an ECI but a character");return this.bytes[e]-256},t.prototype.addEdge=function(e,r,n){(e[r][n.encoderIndex]==null||e[r][n.encoderIndex].cachedTotalSize>n.cachedTotalSize)&&(e[r][n.encoderIndex]=n)},t.prototype.addEdges=function(e,r,n,o,a,u){var s=e.charAt(o).charCodeAt(0),l=0,i=r.length();r.getPriorityEncoderIndex()>=0&&(s===u||r.canEncode(s,r.getPriorityEncoderIndex()))&&(l=r.getPriorityEncoderIndex(),i=l+1);for(var c=l;c<i;c++)(s===u||r.canEncode(s,c))&&this.addEdge(n,o+1,new v2(s,r,c,a,u))},t.prototype.encodeMinimally=function(e,r,n){var o=e.length,a=new v2[o+1][r.length()];this.addEdges(e,r,a,0,null,n);for(var u=1;u<=o;u++){for(var s=0;s<r.length();s++)a[u][s]!=null&&u<o&&this.addEdges(e,r,a,u,a[u][s],n);for(var s=0;s<r.length();s++)a[u-1][s]=null}for(var l=-1,i=ge.MAX_VALUE,s=0;s<r.length();s++)if(a[o][s]!=null){var c=a[o][s];c.cachedTotalSize<i&&(i=c.cachedTotalSize,l=s)}if(l<0)throw new Error('Failed to encode "'+e+'"');for(var f=[],d=a[o][l];d!=null;){if(d.isFNC1())f.unshift(1e3);else for(var h=r.encode(d.c,d.encoderIndex),u=h.length-1;u>=0;u--)f.unshift(h[u]&255);var p=d.previous===null?0:d.previous.encoderIndex;p!==d.encoderIndex&&f.unshift(256+r.getECIValue(d.encoderIndex)),d=d.previous}for(var m=[],u=0;u<m.length;u++)m[u]=f[u];return m},t}();var v2=function(){function t(e,r,n,o,a){this.c=e,this.encoderSet=r,this.encoderIndex=n,this.previous=o,this.fnc1=a,this.c=e===a?1e3:e;var u=this.isFNC1()?1:r.encode(e,n).length,s=o===null?0:o.encoderIndex;s!==n&&(u+=S7),o!=null&&(u+=o.cachedTotalSize),this.cachedTotalSize=u}return t.prototype.isFNC1=function(){return this.c===1e3},t}();var D7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Dl=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},C7=function(t,e){var r=typeof Symbol=="function"&&t[Symbol.iterator];if(!r)return t;var n=r.call(t),o,a=[],u;try{for(;(e===void 0||e-- >0)&&!(o=n.next()).done;)a.push(o.value)}catch(s){u={error:s}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(u)throw u.error}}return a},O7=function(){for(var t=[],e=0;e<arguments.length;e++)t=t.concat(C7(arguments[e]));return t},ue=function(t){return t[t.ASCII=0]="ASCII",t[t.C40=1]="C40",t[t.TEXT=2]="TEXT",t[t.X12=3]="X12",t[t.EDF=4]="EDF",t[t.B256=5]="B256",t}(ue||{}),P7=["!",'"',"#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","@","[","\\","]","^","_"],Wr=function(){function t(){}return t.isExtendedASCII=function(e,r){return e!==r&&e>=128&&e<=255},t.isInC40Shift1Set=function(e){return e<=31},t.isInC40Shift2Set=function(e,r){var n,o;try{for(var a=Dl(P7),u=a.next();!u.done;u=a.next()){var s=u.value;if(s.charCodeAt(0)===e)return!0}}catch(l){n={error:l}}finally{try{u&&!u.done&&(o=a.return)&&o.call(a)}finally{if(n)throw n.error}}return e===r},t.isInTextShift1Set=function(e){return this.isInC40Shift1Set(e)},t.isInTextShift2Set=function(e,r){return this.isInC40Shift2Set(e,r)},t.encodeHighLevel=function(e,r,n,o){r===void 0&&(r=null),n===void 0&&(n=-1),o===void 0&&(o=0);var a=0;return e.startsWith(Ss)&&e.endsWith(Cs)?(a=5,e=e.substring(Ss.length,e.length-2)):e.startsWith(Ds)&&e.endsWith(Cs)&&(a=6,e=e.substring(Ds.length,e.length-2)),decodeURIComponent(escape(String.fromCharCode.apply(String,O7(this.encode(e,r,n,o,a)))))},t.encode=function(e,r,n,o,a){return this.encodeMinimally(new N7(e,r,n,o,a)).getBytes()},t.addEdge=function(e,r){var n=r.fromPosition+r.characterLength;(e[n][r.getEndMode()]===null||e[n][r.getEndMode()].cachedTotalSize>r.cachedTotalSize)&&(e[n][r.getEndMode()]=r)},t.getNumberOfC40Words=function(e,r,n,o){for(var a=0,u=r;u<e.length();u++){if(e.isECI(u))return o[0]=0,0;var s=e.charAt(u);if(n&&Ie.isNativeC40(s)||!n&&Ie.isNativeText(s))a++;else if(!t.isExtendedASCII(s,e.getFNC1Character()))a+=2;else{var l=s&255;l>=128&&(n&&Ie.isNativeC40(l-128)||!n&&Ie.isNativeText(l-128))?a+=3:a+=4}if(a%3===0||(a-2)%3===0&&u+1===e.length())return o[0]=u-r+1,Math.ceil(a/3)}return o[0]=0,0},t.addEdges=function(e,r,n,o){var a,u;if(e.isECI(n)){this.addEdge(r,new Ln(e,ue.ASCII,n,1,o));return}var s=e.charAt(n);if(o===null||o.getEndMode()!==ue.EDF){Ie.isDigit(s)&&e.haveNCharacters(n,2)&&Ie.isDigit(e.charAt(n+1))?this.addEdge(r,new Ln(e,ue.ASCII,n,2,o)):this.addEdge(r,new Ln(e,ue.ASCII,n,1,o));var l=[ue.C40,ue.TEXT];try{for(var i=Dl(l),c=i.next();!c.done;c=i.next()){var f=c.value,d=[];t.getNumberOfC40Words(e,n,f===ue.C40,d)>0&&this.addEdge(r,new Ln(e,f,n,d[0],o))}}catch(m){a={error:m}}finally{try{c&&!c.done&&(u=i.return)&&u.call(i)}finally{if(a)throw a.error}}e.haveNCharacters(n,3)&&Ie.isNativeX12(e.charAt(n))&&Ie.isNativeX12(e.charAt(n+1))&&Ie.isNativeX12(e.charAt(n+2))&&this.addEdge(r,new Ln(e,ue.X12,n,3,o)),this.addEdge(r,new Ln(e,ue.B256,n,1,o))}var h;for(h=0;h<3;h++){var p=n+h;if(e.haveNCharacters(p,1)&&Ie.isNativeEDIFACT(e.charAt(p)))this.addEdge(r,new Ln(e,ue.EDF,n,h+1,o));else break}h===3&&e.haveNCharacters(n,4)&&Ie.isNativeEDIFACT(e.charAt(n+3))&&this.addEdge(r,new Ln(e,ue.EDF,n,4,o))},t.encodeMinimally=function(e){var r=e.length(),n=Array(r+1).fill(null).map(function(){return Array(6).fill(0)});this.addEdges(e,n,0,null);for(var o=1;o<=r;o++){for(var a=0;a<6;a++)n[o][a]!==null&&o<r&&this.addEdges(e,n,o,n[o][a]);for(var a=0;a<6;a++)n[o-1][a]=null}for(var u=-1,s=ge.MAX_VALUE,a=0;a<6;a++)if(n[r][a]!==null){var l=n[r][a],i=a>=1&&a<=3?l.cachedTotalSize+1:l.cachedTotalSize;i<s&&(s=i,u=a)}if(u<0)throw new Error('Failed to encode "'+e+'"');return new M7(n[r][u])},t}();var M7=function(){function t(e){var r=e.input,n=0,o=[],a=[],u=[];(e.mode===ue.C40||e.mode===ue.TEXT||e.mode===ue.X12)&&e.getEndMode()!==ue.ASCII&&(n+=this.prepend(Ln.getBytes(254),o));for(var s=e;s!==null;)n+=this.prepend(s.getDataBytes(),o),(s.previous===null||s.getPreviousStartMode()!==s.getMode())&&(s.getMode()===ue.B256&&(n<=249?(o.unshift(n),n++):(o.unshift(n%250),o.unshift(n/250+249),n+=2),a.push(o.length),u.push(n)),this.prepend(s.getLatchBytes(),o),n=0),s=s.previous;r.getMacroId()===5?n+=this.prepend(Ln.getBytes(236),o):r.getMacroId()===6&&(n+=this.prepend(Ln.getBytes(237),o)),r.getFNC1Character()>0&&(n+=this.prepend(Ln.getBytes(232),o));for(var l=0;l<a.length;l++)this.applyRandomPattern(o,o.length-a[l],u[l]);var i=e.getMinSymbolSize(o.length);for(o.length<i&&o.push(129);o.length<i;)o.push(this.randomize253State(o.length+1));this.bytes=new Uint8Array(o.length);for(var l=0;l<this.bytes.length;l++)this.bytes[l]=o[l]}return t.prototype.prepend=function(e,r){for(var n=e.length-1;n>=0;n--)r.unshift(e[n]);return e.length},t.prototype.randomize253State=function(e){var r=149*e%253+1,n=129+r;return n<=254?n:n-254},t.prototype.applyRandomPattern=function(e,r,n){for(var o=0;o<n;o++){var a=r+o,u=e[a]&255,s=149*(a+1)%255+1,l=u+s;e[a]=l<=255?l:l-256}},t.prototype.getBytes=function(){return this.bytes},t}(),Ln=function(){function t(e,r,n,o,a){if(this.input=e,this.mode=r,this.fromPosition=n,this.characterLength=o,this.previous=a,this.allCodewordCapacities=[3,5,8,10,12,16,18,22,30,32,36,44,49,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.squareCodewordCapacities=[3,5,8,12,18,22,30,36,44,62,86,114,144,174,204,280,368,456,576,696,816,1050,1304,1558],this.rectangularCodewordCapacities=[5,10,16,33,32,49],!(n+o<=e.length()))throw new Error("Invalid edge");var u=a!==null?a.cachedTotalSize:0,s=this.getPreviousMode();switch(r){case ue.ASCII:u++,(e.isECI(n)||Wr.isExtendedASCII(e.charAt(n),e.getFNC1Character()))&&u++,(s===ue.C40||s===ue.TEXT||s===ue.X12)&&u++;break;case ue.B256:u++,(s!==ue.B256||this.getB256Size()===250)&&u++,s===ue.ASCII?u++:(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break;case ue.C40:case ue.TEXT:case ue.X12:if(r===ue.X12)u+=2;else{var l=[];u+=Wr.getNumberOfC40Words(e,n,r===ue.C40,l)*2}s===ue.ASCII||s===ue.B256?u++:s!==r&&(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break;case ue.EDF:u+=3,s===ue.ASCII||s===ue.B256?u++:(s===ue.C40||s===ue.TEXT||s===ue.X12)&&(u+=2);break}this.cachedTotalSize=u}return t.prototype.getB256Size=function(){for(var e=0,r=this;r!==null&&r.mode===ue.B256&&e<=250;)e++,r=r.previous;return e},t.prototype.getPreviousStartMode=function(){return this.previous===null?ue.ASCII:this.previous.mode},t.prototype.getPreviousMode=function(){return this.previous===null?ue.ASCII:this.previous.getEndMode()},t.prototype.getEndMode=function(){if(this.mode===ue.EDF){if(this.characterLength<4)return ue.ASCII;var e=this.getLastASCII();if(e>0&&this.getCodewordsRemaining(this.cachedTotalSize+e)<=2-e)return ue.ASCII}if(this.mode===ue.C40||this.mode===ue.TEXT||this.mode===ue.X12){if(this.fromPosition+this.characterLength>=this.input.length()&&this.getCodewordsRemaining(this.cachedTotalSize)===0)return ue.ASCII;var e=this.getLastASCII();if(e===1&&this.getCodewordsRemaining(this.cachedTotalSize+1)===0)return ue.ASCII}return this.mode},t.prototype.getMode=function(){return this.mode},t.prototype.getLastASCII=function(){var e=this.input.length(),r=this.fromPosition+this.characterLength;return e-r>4||r>=e?0:e-r===1?Wr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())?0:1:e-r===2?Wr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())||Wr.isExtendedASCII(this.input.charAt(r+1),this.input.getFNC1Character())?0:Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))?1:2:e-r===3?Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))&&!Wr.isExtendedASCII(this.input.charAt(r+2),this.input.getFNC1Character())||Ie.isDigit(this.input.charAt(r+1))&&Ie.isDigit(this.input.charAt(r+2))&&!Wr.isExtendedASCII(this.input.charAt(r),this.input.getFNC1Character())?2:0:Ie.isDigit(this.input.charAt(r))&&Ie.isDigit(this.input.charAt(r+1))&&Ie.isDigit(this.input.charAt(r+2))&&Ie.isDigit(this.input.charAt(r+3))?2:0},t.prototype.getMinSymbolSize=function(e){var r,n,o,a,u,s;switch(this.input.getShapeHint()){case 1:try{for(var l=Dl(this.squareCodewordCapacities),i=l.next();!i.done;i=l.next()){var c=i.value;if(c>=e)return c}}catch(m){r={error:m}}finally{try{i&&!i.done&&(n=l.return)&&n.call(l)}finally{if(r)throw r.error}}break;case 2:try{for(var f=Dl(this.rectangularCodewordCapacities),d=f.next();!d.done;d=f.next()){var c=d.value;if(c>=e)return c}}catch(m){o={error:m}}finally{try{d&&!d.done&&(a=f.return)&&a.call(f)}finally{if(o)throw o.error}}break}try{for(var h=Dl(this.allCodewordCapacities),p=h.next();!p.done;p=h.next()){var c=p.value;if(c>=e)return c}}catch(m){u={error:m}}finally{try{p&&!p.done&&(s=h.return)&&s.call(h)}finally{if(u)throw u.error}}return this.allCodewordCapacities[this.allCodewordCapacities.length-1]},t.prototype.getCodewordsRemaining=function(e){return this.getMinSymbolSize(e)-e},t.getBytes=function(e,r){var n=new Uint8Array(r?2:1);return n[0]=e,r&&(n[1]=r),n},t.prototype.setC40Word=function(e,r,n,o,a){var u=1600*(n&255)+40*(o&255)+(a&255)+1;e[r]=u/256,e[r+1]=u%256},t.prototype.getX12Value=function(e){return e===13?0:e===42?1:e===62?2:e===32?3:e>=48&&e<=57?e-44:e>=65&&e<=90?e-51:e},t.prototype.getX12Words=function(){if(this.characterLength%3!==0)throw new Error("X12 words must be a multiple of 3");for(var e=new Uint8Array(this.characterLength/3*2),r=0;r<e.length;r+=2)this.setC40Word(e,r,this.getX12Value(this.input.charAt(this.fromPosition+r/2*3)),this.getX12Value(this.input.charAt(this.fromPosition+r/2*3+1)),this.getX12Value(this.input.charAt(this.fromPosition+r/2*3+2)));return e},t.prototype.getShiftValue=function(e,r,n){return r&&Wr.isInC40Shift1Set(e)||!r&&Wr.isInTextShift1Set(e)?0:r&&Wr.isInC40Shift2Set(e,n)||!r&&Wr.isInTextShift2Set(e,n)?1:2},t.prototype.getC40Value=function(e,r,n,o){if(n===o){if(r!==2)throw new Error("FNC1 cannot be used in C40 shift 2");return 27}return e?n<=31?n:n===32?3:n<=47?n-33:n<=57?n-44:n<=64?n-43:n<=90?n-51:n<=95?n-69:n<=127?n-96:n:n===0?0:r===0&&n<=3?n-1:r===1&&n<=31?n:n===32?3:n>=33&&n<=47?n-33:n>=48&&n<=57?n-44:n>=58&&n<=64?n-43:n>=65&&n<=90?n-64:n>=91&&n<=95?n-69:n===96?0:n>=97&&n<=122?n-83:n>=123&&n<=127?n-96:n},t.prototype.getC40Words=function(e,r){for(var n=[],o=0;o<this.characterLength;o++){var a=this.input.charAt(this.fromPosition+o);if(e&&Ie.isNativeC40(a)||!e&&Ie.isNativeText(a))n.push(this.getC40Value(e,0,a,r));else if(Wr.isExtendedASCII(a,r)){var s=(a&255)-128;if(e&&Ie.isNativeC40(s)||!e&&Ie.isNativeText(s))n.push(1),n.push(30),n.push(this.getC40Value(e,0,s,r));else{n.push(1),n.push(30);var u=this.getShiftValue(s,e,r);n.push(u),n.push(this.getC40Value(e,u,s,r))}}else{var u=this.getShiftValue(a,e,r);n.push(u),n.push(this.getC40Value(e,u,a,r))}}if(n.length%3!==0){if(!((n.length-2)%3===0&&this.fromPosition+this.characterLength===this.input.length()))throw new Error("C40 words must be a multiple of 3");n.push(0)}for(var l=new Uint8Array(n.length/3*2),i=0,o=0;o<n.length;o+=3)this.setC40Word(l,i,n[o]&255,n[o+1]&255,n[o+2]&255),i+=2;return l},t.prototype.getEDFBytes=function(){for(var e=Math.ceil(this.characterLength/4),r=new Uint8Array(e*3),n=this.fromPosition,o=Math.min(this.fromPosition+this.characterLength-1,this.input.length()-1),a=0;a<e;a+=3){for(var u=[],s=0;s<4;s++)n<=o?u[s]=this.input.charAt(n++)&63:u[s]=n===o+1?31:0;var l=u[0]<<18;l|=u[1]<<12,l|=u[2]<<6,l|=u[3],r[a]=l>>16&255,r[a+1]=l>>8&255,r[a+2]=l&255}return r},t.prototype.getLatchBytes=function(){switch(this.getPreviousMode()){case ue.ASCII:case ue.B256:switch(this.mode){case ue.B256:return t.getBytes(231);case ue.C40:return t.getBytes(230);case ue.TEXT:return t.getBytes(239);case ue.X12:return t.getBytes(238);case ue.EDF:return t.getBytes(240)}break;case ue.C40:case ue.TEXT:case ue.X12:if(this.mode!==this.getPreviousMode())switch(this.mode){case ue.ASCII:return t.getBytes(254);case ue.B256:return t.getBytes(254,231);case ue.C40:return t.getBytes(254,230);case ue.TEXT:return t.getBytes(254,239);case ue.X12:return t.getBytes(254,238);case ue.EDF:return t.getBytes(254,240)}break;case ue.EDF:if(this.mode!==ue.EDF)throw new Error("Cannot switch from EDF to "+this.mode);break}return new Uint8Array(0)},t.prototype.getDataBytes=function(){switch(this.mode){case ue.ASCII:return this.input.isECI(this.fromPosition)?t.getBytes(241,this.input.getECIValue(this.fromPosition)+1):Wr.isExtendedASCII(this.input.charAt(this.fromPosition),this.input.getFNC1Character())?t.getBytes(235,this.input.charAt(this.fromPosition)-127):this.characterLength===2?t.getBytes(this.input.charAt(this.fromPosition)*10+this.input.charAt(this.fromPosition+1)+130):this.input.isFNC1(this.fromPosition)?t.getBytes(232):t.getBytes(this.input.charAt(this.fromPosition)+1);case ue.B256:return t.getBytes(this.input.charAt(this.fromPosition));case ue.C40:return this.getC40Words(!0,this.input.getFNC1Character());case ue.TEXT:return this.getC40Words(!1,this.input.getFNC1Character());case ue.X12:return this.getX12Words();case ue.EDF:return this.getEDFBytes()}},t}(),N7=function(t){D7(e,t);function e(r,n,o,a,u){var s=t.call(this,r,n,o)||this;return s.shape=a,s.macroId=u,s}return e.prototype.getMacroId=function(){return this.macroId},e.prototype.getShapeHint=function(){return this.shape},e}(b2);var Xle=function(){function t(){}return t.prototype.encode=function(e,r,n,o,a){if(a===void 0&&(a=null),e.trim()==="")throw new Error("Found empty contents");if(r!==ae.DATA_MATRIX)throw new Error("Can only encode DATA_MATRIX, but got "+r);if(n<0||o<0)throw new Error("Requested dimensions can't be negative: "+n+"x"+o);var u=0,s=null,l=null;if(a!=null){var i=a.get(Oe.DATA_MATRIX_SHAPE);i!=null&&(u=i);var c=a.get(Oe.MIN_SIZE);c!=null&&(s=c);var f=a.get(Oe.MAX_SIZE);f!=null&&(l=f)}var d,h=a!=null&&a.has(Oe.DATA_MATRIX_COMPACT)&&!!a.get(Oe.DATA_MATRIX_COMPACT).toString();if(h){var p=a.has(Oe.GS1_FORMAT)&&!!a.get(Oe.GS1_FORMAT).toString(),m=null,v=a.has(Oe.CHARACTER_SET);v&&(m=Sa.forName(a.get(Oe.CHARACTER_SET).toString())),d=Wr.encodeHighLevel(e,m,p?29:-1,u)}else{var x=a!=null&&a.has(Oe.FORCE_C40)&&!!a.get(Oe.FORCE_C40).toString();d=Ie.encodeHighLevel(e,u,s,l,x)}var y=Os.lookup(d.length,u,s,l,!0),_=td.encodeECC200(d,y),I=new Qf(_,y.getSymbolDataWidth(),y.getSymbolDataHeight());return I.place(),this.encodeLowLevel(I,y,n,o)},t.prototype.encodeLowLevel=function(e,r,n,o){for(var a=r.getSymbolDataWidth(),u=r.getSymbolDataHeight(),s=new Il(r.getSymbolWidth(),r.getSymbolHeight()),l=0,i=0;i<u;i++){var c=void 0;if(i%r.matrixHeight===0){c=0;for(var f=0;f<r.getSymbolWidth();f++)s.setBoolean(c,l,f%2===0),c++;l++}c=0;for(var f=0;f<a;f++)f%r.matrixWidth===0&&(s.setBoolean(c,l,!0),c++),s.setBoolean(c,l,e.getBit(f,i)),c++,f%r.matrixWidth===r.matrixWidth-1&&(s.setBoolean(c,l,i%2===0),c++);if(l++,i%r.matrixHeight===r.matrixHeight-1){c=0;for(var f=0;f<r.getSymbolWidth();f++)s.setBoolean(c,l,!0),c++;l++}}return this.convertByteMatrixToBitMatrix(s,n,o)},t.prototype.convertByteMatrixToBitMatrix=function(e,r,n){var o=e.getWidth(),a=e.getHeight(),u=Math.max(r,o),s=Math.max(n,a),l=Math.min(u/o,s/a),i=(u-o*l)/2,c=(s-a*l)/2,f;n<a||r<o?(i=0,c=0,f=new Nt(o,a)):f=new Nt(r,n),f.clear();for(var d=0,h=c;d<a;d++,h+=l)for(var p=0,m=i;p<o;p++,m+=l)e.get(p,d)===1&&f.setRegion(m,h,l,l);return f},t}();var R7=function(){function t(){}return t.prototype.isCompact=function(){return this.compact},t.prototype.setCompact=function(e){this.compact=e},t.prototype.getSize=function(){return this.size},t.prototype.setSize=function(e){this.size=e},t.prototype.getLayers=function(){return this.layers},t.prototype.setLayers=function(e){this.layers=e},t.prototype.getCodeWords=function(){return this.codeWords},t.prototype.setCodeWords=function(e){this.codeWords=e},t.prototype.getMatrix=function(){return this.matrix},t.prototype.setMatrix=function(e){this.matrix=e},t}(),Jg=R7;var F7=function(){function t(){}return t.singletonList=function(e){return[e]},t.min=function(e,r){return e.sort(r)[0]},t}(),e0=F7;var k7=function(){function t(e){this.previous=e}return t.prototype.getPrevious=function(){return this.previous},t}(),w2=k7;var L7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),B7=function(t){L7(e,t);function e(r,n,o){var a=t.call(this,r)||this;return a.value=n,a.bitCount=o,a}return e.prototype.appendTo=function(r,n){r.appendBits(this.value,this.bitCount)},e.prototype.add=function(r,n){return new e(this,r,n)},e.prototype.addBinaryShift=function(r,n){return console.warn("addBinaryShift on SimpleToken, this simply returns a copy of this token"),new e(this,r,n)},e.prototype.toString=function(){var r=this.value&(1<<this.bitCount)-1;return r|=1<<this.bitCount,"<"+ge.toBinaryString(r|1<<this.bitCount).substring(1)+">"},e}(w2),Ps=B7;var $7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)o.hasOwnProperty(a)&&(n[a]=o[a])},t(e,r)};return function(e,r){t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),V7=function(t){$7(e,t);function e(r,n,o){var a=t.call(this,r,0,0)||this;return a.binaryShiftStart=n,a.binaryShiftByteCount=o,a}return e.prototype.appendTo=function(r,n){for(var o=0;o<this.binaryShiftByteCount;o++)(o===0||o===31&&this.binaryShiftByteCount<=62)&&(r.appendBits(31,5),this.binaryShiftByteCount>62?r.appendBits(this.binaryShiftByteCount-31,16):o===0?r.appendBits(Math.min(this.binaryShiftByteCount,31),5):r.appendBits(this.binaryShiftByteCount-31,5)),r.appendBits(n[this.binaryShiftStart+o],8)},e.prototype.addBinaryShift=function(r,n){return new e(this,r,n)},e.prototype.toString=function(){return"<"+this.binaryShiftStart+"::"+(this.binaryShiftStart+this.binaryShiftByteCount-1)+">"},e}(Ps),x2=V7;function _2(t,e,r){return new x2(t,e,r)}function Ms(t,e,r){return new Ps(t,e,r)}var E2=["UPPER","LOWER","DIGIT","MIXED","PUNCT"],pi=0,Ns=1,qr=2,rd=3,cn=4,T2=new Ps(null,0,0);var id=[Int32Array.from([0,327708,327710,327709,656318]),Int32Array.from([590318,0,327710,327709,656318]),Int32Array.from([262158,590300,0,590301,932798]),Int32Array.from([327709,327708,656318,0,327710]),Int32Array.from([327711,656380,656382,656381,0])];var H7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")};function z7(t){var e,r;try{for(var n=H7(t),o=n.next();!o.done;o=n.next()){var a=o.value;it.fill(a,-1)}}catch(u){e={error:u}}finally{try{o&&!o.done&&(r=n.return)&&r.call(n)}finally{if(e)throw e.error}}return t[pi][cn]=0,t[Ns][cn]=0,t[Ns][pi]=28,t[rd][cn]=0,t[qr][cn]=0,t[qr][pi]=15,t}var od=z7(it.createInt32Array(6,6));var G7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},W7=function(){function t(e,r,n,o){this.token=e,this.mode=r,this.binaryShiftByteCount=n,this.bitCount=o}return t.prototype.getMode=function(){return this.mode},t.prototype.getToken=function(){return this.token},t.prototype.getBinaryShiftByteCount=function(){return this.binaryShiftByteCount},t.prototype.getBitCount=function(){return this.bitCount},t.prototype.latchAndAppend=function(e,r){var n=this.bitCount,o=this.token;if(e!==this.mode){var a=id[this.mode][e];o=Ms(o,a&65535,a>>16),n+=a>>16}var u=e===qr?4:5;return o=Ms(o,r,u),new t(o,e,0,n+u)},t.prototype.shiftAndAppend=function(e,r){var n=this.token,o=this.mode===qr?4:5;return n=Ms(n,od[this.mode][e],o),n=Ms(n,r,5),new t(n,this.mode,0,this.bitCount+o+5)},t.prototype.addBinaryShiftChar=function(e){var r=this.token,n=this.mode,o=this.bitCount;if(this.mode===cn||this.mode===qr){var a=id[n][pi];r=Ms(r,a&65535,a>>16),o+=a>>16,n=pi}var u=this.binaryShiftByteCount===0||this.binaryShiftByteCount===31?18:this.binaryShiftByteCount===62?9:8,s=new t(r,n,this.binaryShiftByteCount+1,o+u);return s.binaryShiftByteCount===2078&&(s=s.endBinaryShift(e+1)),s},t.prototype.endBinaryShift=function(e){if(this.binaryShiftByteCount===0)return this;var r=this.token;return r=_2(r,e-this.binaryShiftByteCount,this.binaryShiftByteCount),new t(r,this.mode,0,this.bitCount)},t.prototype.isBetterThanOrEqualTo=function(e){var r=this.bitCount+(id[this.mode][e.mode]>>16);return this.binaryShiftByteCount<e.binaryShiftByteCount?r+=t.calculateBinaryShiftCost(e)-t.calculateBinaryShiftCost(this):this.binaryShiftByteCount>e.binaryShiftByteCount&&e.binaryShiftByteCount>0&&(r+=10),r<=e.bitCount},t.prototype.toBitArray=function(e){for(var r,n,o=[],a=this.endBinaryShift(e.length).token;a!==null;a=a.getPrevious())o.unshift(a);var u=new Pt;try{for(var s=G7(o),l=s.next();!l.done;l=s.next()){var i=l.value;i.appendTo(u,e)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return u},t.prototype.toString=function(){return _e.format("%s bits=%d bytes=%d",E2[this.mode],this.bitCount,this.binaryShiftByteCount)},t.calculateBinaryShiftCost=function(e){return e.binaryShiftByteCount>62?21:e.binaryShiftByteCount>31?20:e.binaryShiftByteCount>0?10:0},t.INITIAL_STATE=new t(T2,pi,0,0),t}(),A2=W7;function q7(t){var e=_e.getCharCode(" "),r=_e.getCharCode("."),n=_e.getCharCode(",");t[pi][e]=1;for(var o=_e.getCharCode("Z"),a=_e.getCharCode("A"),u=a;u<=o;u++)t[pi][u]=u-a+2;t[Ns][e]=1;for(var s=_e.getCharCode("z"),l=_e.getCharCode("a"),u=l;u<=s;u++)t[Ns][u]=u-l+2;t[qr][e]=1;for(var i=_e.getCharCode("9"),c=_e.getCharCode("0"),u=c;u<=i;u++)t[qr][u]=u-c+2;t[qr][n]=12,t[qr][r]=13;for(var f=["\0"," ","","","","","","","\x07","\b","	",`
`,"\v","\f","\r","\x1B","","","","","@","\\","^","_","`","|","~","\x7F"],d=0;d<f.length;d++)t[rd][_e.getCharCode(f[d])]=d;for(var h=["\0","\r","\0","\0","\0","\0","!","'","#","$","%","&","'","(",")","*","+",",","-",".","/",":",";","<","=",">","?","[","]","{","}"],d=0;d<h.length;d++)_e.getCharCode(h[d])>0&&(t[cn][_e.getCharCode(h[d])]=d);return t}var ad=q7(it.createInt32Array(5,256));var sd=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Y7=function(){function t(e){this.text=e}return t.prototype.encode=function(){for(var e=_e.getCharCode(" "),r=_e.getCharCode(`
`),n=e0.singletonList(A2.INITIAL_STATE),o=0;o<this.text.length;o++){var a=void 0,u=o+1<this.text.length?this.text[o+1]:0;switch(this.text[o]){case _e.getCharCode("\r"):a=u===r?2:0;break;case _e.getCharCode("."):a=u===e?3:0;break;case _e.getCharCode(","):a=u===e?4:0;break;case _e.getCharCode(":"):a=u===e?5:0;break;default:a=0}a>0?(n=t.updateStateListForPair(n,o,a),o++):n=this.updateStateListForChar(n,o)}var s=e0.min(n,function(l,i){return l.getBitCount()-i.getBitCount()});return s.toBitArray(this.text)},t.prototype.updateStateListForChar=function(e,r){var n,o,a=[];try{for(var u=sd(e),s=u.next();!s.done;s=u.next()){var l=s.value;this.updateStateForChar(l,r,a)}}catch(i){n={error:i}}finally{try{s&&!s.done&&(o=u.return)&&o.call(u)}finally{if(n)throw n.error}}return t.simplifyStates(a)},t.prototype.updateStateForChar=function(e,r,n){for(var o=this.text[r]&255,a=ad[e.getMode()][o]>0,u=null,s=0;s<=cn;s++){var l=ad[s][o];if(l>0){if(u==null&&(u=e.endBinaryShift(r)),!a||s===e.getMode()||s===qr){var i=u.latchAndAppend(s,l);n.push(i)}if(!a&&od[e.getMode()][s]>=0){var c=u.shiftAndAppend(s,l);n.push(c)}}}if(e.getBinaryShiftByteCount()>0||ad[e.getMode()][o]===0){var f=e.addBinaryShiftChar(r);n.push(f)}},t.updateStateListForPair=function(e,r,n){var o,a,u=[];try{for(var s=sd(e),l=s.next();!l.done;l=s.next()){var i=l.value;this.updateStateForPair(i,r,n,u)}}catch(c){o={error:c}}finally{try{l&&!l.done&&(a=s.return)&&a.call(s)}finally{if(o)throw o.error}}return this.simplifyStates(u)},t.updateStateForPair=function(e,r,n,o){var a=e.endBinaryShift(r);if(o.push(a.latchAndAppend(cn,n)),e.getMode()!==cn&&o.push(a.shiftAndAppend(cn,n)),n===3||n===4){var u=a.latchAndAppend(qr,16-n).latchAndAppend(qr,1);o.push(u)}if(e.getBinaryShiftByteCount()>0){var s=e.addBinaryShiftChar(r).addBinaryShiftChar(r+1);o.push(s)}},t.simplifyStates=function(e){var r,n,o,a,u=[];try{for(var s=sd(e),l=s.next();!l.done;l=s.next()){var i=l.value,c=!0,f=function(v){if(v.isBetterThanOrEqualTo(i))return c=!1,"break";i.isBetterThanOrEqualTo(v)&&(u=u.filter(function(x){return x!==v}))};try{for(var d=(o=void 0,sd(u)),h=d.next();!h.done;h=d.next()){var p=h.value,m=f(p);if(m==="break")break}}catch(v){o={error:v}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}c&&u.push(i)}}catch(v){r={error:v}}finally{try{l&&!l.done&&(n=s.return)&&n.call(s)}finally{if(r)throw r.error}}return u},t}(),t0=Y7;var Z7=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},K7=function(){function t(){}return t.encodeBytes=function(e){return t.encode(e,t.DEFAULT_EC_PERCENT,t.DEFAULT_AZTEC_LAYERS)},t.encode=function(e,r,n){var o=new t0(e).encode(),a=ge.truncDivision(o.getSize()*r,100)+11,u=o.getSize()+a,s,l,i,c,f;if(n!==t.DEFAULT_AZTEC_LAYERS){if(s=n<0,l=Math.abs(n),l>(s?t.MAX_NB_BITS_COMPACT:t.MAX_NB_BITS))throw new re(_e.format("Illegal value %s for layers",n));i=t.totalBitsInLayer(l,s),c=t.WORD_SIZE[l];var d=i-i%c;if(f=t.stuffBits(o,c),f.getSize()+a>d)throw new re("Data to large for user specified layer");if(s&&f.getSize()>c*64)throw new re("Data to large for user specified layer")}else{c=0,f=null;for(var h=0;;h++){if(h>t.MAX_NB_BITS)throw new re("Data too large for an Aztec code");if(s=h<=3,l=s?h+1:h,i=t.totalBitsInLayer(l,s),!(u>i)){(f==null||c!==t.WORD_SIZE[l])&&(c=t.WORD_SIZE[l],f=t.stuffBits(o,c));var d=i-i%c;if(!(s&&f.getSize()>c*64)&&f.getSize()+a<=d)break}}}var p=t.generateCheckWords(f,i,c),m=f.getSize()/c,v=t.generateModeMessage(s,l,m),x=(s?11:14)+l*4,y=new Int32Array(x),_;if(s){_=x;for(var h=0;h<y.length;h++)y[h]=h}else{_=x+1+2*ge.truncDivision(ge.truncDivision(x,2)-1,15);for(var I=ge.truncDivision(x,2),C=ge.truncDivision(_,2),h=0;h<I;h++){var V=h+ge.truncDivision(h,15);y[I-h-1]=C-V-1,y[I+h]=C+V+1}}for(var z=new Nt(_),h=0,W=0;h<l;h++){for(var k=(l-h)*4+(s?9:12),X=0;X<k;X++)for(var ke=X*2,me=0;me<2;me++)p.get(W+ke+me)&&z.set(y[h*2+me],y[h*2+X]),p.get(W+k*2+ke+me)&&z.set(y[h*2+X],y[x-1-h*2-me]),p.get(W+k*4+ke+me)&&z.set(y[x-1-h*2-me],y[x-1-h*2-X]),p.get(W+k*6+ke+me)&&z.set(y[x-1-h*2-X],y[h*2+me]);W+=k*8}if(t.drawModeMessage(z,s,_,v),s)t.drawBullsEye(z,ge.truncDivision(_,2),5);else{t.drawBullsEye(z,ge.truncDivision(_,2),7);for(var h=0,X=0;h<ge.truncDivision(x,2)-1;h+=15,X+=16)for(var me=ge.truncDivision(_,2)&1;me<_;me+=2)z.set(ge.truncDivision(_,2)-X,me),z.set(ge.truncDivision(_,2)+X,me),z.set(me,ge.truncDivision(_,2)-X),z.set(me,ge.truncDivision(_,2)+X)}var ye=new Jg;return ye.setCompact(s),ye.setSize(_),ye.setLayers(l),ye.setCodeWords(m),ye.setMatrix(z),ye},t.drawBullsEye=function(e,r,n){for(var o=0;o<n;o+=2)for(var a=r-o;a<=r+o;a++)e.set(a,r-o),e.set(a,r+o),e.set(r-o,a),e.set(r+o,a);e.set(r-n,r-n),e.set(r-n+1,r-n),e.set(r-n,r-n+1),e.set(r+n,r-n),e.set(r+n,r-n+1),e.set(r+n,r+n-1)},t.generateModeMessage=function(e,r,n){var o=new Pt;return e?(o.appendBits(r-1,2),o.appendBits(n-1,6),o=t.generateCheckWords(o,28,4)):(o.appendBits(r-1,5),o.appendBits(n-1,11),o=t.generateCheckWords(o,40,4)),o},t.drawModeMessage=function(e,r,n,o){var a=ge.truncDivision(n,2);if(r)for(var u=0;u<7;u++){var s=a-3+u;o.get(u)&&e.set(s,a-5),o.get(u+7)&&e.set(a+5,s),o.get(20-u)&&e.set(s,a+5),o.get(27-u)&&e.set(a-5,s)}else for(var u=0;u<10;u++){var s=a-5+u+ge.truncDivision(u,5);o.get(u)&&e.set(s,a-7),o.get(u+10)&&e.set(a+7,s),o.get(29-u)&&e.set(s,a+7),o.get(39-u)&&e.set(a-7,s)}},t.generateCheckWords=function(e,r,n){var o,a,u=e.getSize()/n,s=new Tl(t.getGF(n)),l=ge.truncDivision(r,n),i=t.bitsToWords(e,n,l);s.encode(i,l-u);var c=r%n,f=new Pt;f.appendBits(0,c);try{for(var d=Z7(Array.from(i)),h=d.next();!h.done;h=d.next()){var p=h.value;f.appendBits(p,n)}}catch(m){o={error:m}}finally{try{h&&!h.done&&(a=d.return)&&a.call(d)}finally{if(o)throw o.error}}return f},t.bitsToWords=function(e,r,n){var o=new Int32Array(n),a,u;for(a=0,u=e.getSize()/r;a<u;a++){for(var s=0,l=0;l<r;l++)s|=e.get(a*r+l)?1<<r-l-1:0;o[a]=s}return o},t.getGF=function(e){switch(e){case 4:return nr.AZTEC_PARAM;case 6:return nr.AZTEC_DATA_6;case 8:return nr.AZTEC_DATA_8;case 10:return nr.AZTEC_DATA_10;case 12:return nr.AZTEC_DATA_12;default:throw new re("Unsupported word size "+e)}},t.stuffBits=function(e,r){for(var n=new Pt,o=e.getSize(),a=(1<<r)-2,u=0;u<o;u+=r){for(var s=0,l=0;l<r;l++)(u+l>=o||e.get(u+l))&&(s|=1<<r-1-l);(s&a)===a?(n.appendBits(s&a,r),u--):s&a?n.appendBits(s,r):(n.appendBits(s|1,r),u--)}return n},t.totalBitsInLayer=function(e,r){return((r?88:112)+16*e)*e},t.DEFAULT_EC_PERCENT=33,t.DEFAULT_AZTEC_LAYERS=0,t.MAX_NB_BITS=32,t.MAX_NB_BITS_COMPACT=4,t.WORD_SIZE=Int32Array.from([4,6,6,8,8,8,8,8,8,10,10,10,10,10,10,10,10,10,10,10,10,10,10,12,12,12,12,12,12,12,12,12,12]),t}(),Cl=K7;var Lce=function(){function t(){}return t.prototype.encode=function(e,r,n,o){return this.encodeWithHints(e,r,n,o,null)},t.prototype.encodeWithHints=function(e,r,n,o,a){var u=Al.ISO_8859_1,s=Cl.DEFAULT_EC_PERCENT,l=Cl.DEFAULT_AZTEC_LAYERS;return a!=null&&(a.has(Oe.CHARACTER_SET)&&(u=Sa.forName(a.get(Oe.CHARACTER_SET).toString())),a.has(Oe.ERROR_CORRECTION)&&(s=ge.parseInt(a.get(Oe.ERROR_CORRECTION).toString())),a.has(Oe.AZTEC_LAYERS)&&(l=ge.parseInt(a.get(Oe.AZTEC_LAYERS).toString()))),t.encodeLayers(e,r,n,o,u,s,l)},t.encodeLayers=function(e,r,n,o,a,u,s){if(r!==ae.AZTEC)throw new re("Can only encode AZTEC, but got "+r);var l=Cl.encode(_e.getBytes(e,a),u,s);return t.renderResult(l,n,o)},t.renderResult=function(e,r,n){var o=e.getMatrix();if(o==null)throw new hr;for(var a=o.getWidth(),u=o.getHeight(),s=Math.max(r,a),l=Math.max(n,u),i=Math.min(s/a,l/u),c=(s-a*i)/2,f=(l-u*i)/2,d=new Nt(s,l),h=0,p=f;h<u;h++,p+=i)for(var m=0,v=c;m<a;m++,v+=i)o.get(m,h)&&d.setRegion(v,p,i,i);return d},t}();var Q7=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),S2=function(t){Q7(e,t);function e(r){var n=t.call(this,r.width,r.height)||this;return n.canvas=r,n.tempCanvasElement=null,n.buffer=e.makeBufferFromCanvasImageData(r),n}return e.makeBufferFromCanvasImageData=function(r){var n;try{n=r.getContext("2d",{willReadFrequently:!0})}catch{n=r.getContext("2d")}if(!n)throw new Error("Couldn't get canvas context.");var o=n.getImageData(0,0,r.width,r.height);return e.toGrayscaleBuffer(o.data,r.width,r.height)},e.toGrayscaleBuffer=function(r,n,o){for(var a=new Uint8ClampedArray(n*o),u=0,s=0,l=r.length;u<l;u+=4,s++){var i=void 0,c=r[u+3];if(c===0)i=255;else{var f=r[u],d=r[u+1],h=r[u+2];i=306*f+601*d+117*h+512>>10}a[s]=i}return a},e.prototype.getRow=function(r,n){if(r<0||r>=this.getHeight())throw new re("Requested row is outside the image: "+r);var o=this.getWidth(),a=r*o;return n===null?n=this.buffer.slice(a,a+o):(n.length<o&&(n=new Uint8ClampedArray(o)),n.set(this.buffer.slice(a,a+o))),n},e.prototype.getMatrix=function(){return this.buffer},e.prototype.isCropSupported=function(){return!0},e.prototype.crop=function(r,n,o,a){return t.prototype.crop.call(this,r,n,o,a),this},e.prototype.isRotateSupported=function(){return!0},e.prototype.rotateCounterClockwise=function(){return this.rotate(-90),this},e.prototype.rotateCounterClockwise45=function(){return this.rotate(-45),this},e.prototype.invert=function(){return new ro(this)},e.prototype.getTempCanvasElement=function(){if(this.tempCanvasElement===null){var r=this.canvas.ownerDocument.createElement("canvas");r.width=this.canvas.width,r.height=this.canvas.height,this.tempCanvasElement=r}return this.tempCanvasElement},e.prototype.rotate=function(r){var n=this.getTempCanvasElement();if(!n)throw new Error("Could not create a Canvas element.");var o=r*e.DEGREE_TO_RADIANS,a=this.canvas.width,u=this.canvas.height,s=Math.ceil(Math.abs(Math.cos(o))*a+Math.abs(Math.sin(o))*u),l=Math.ceil(Math.abs(Math.sin(o))*a+Math.abs(Math.cos(o))*u);n.width=s,n.height=l;var i=n.getContext("2d");if(!i)throw new Error("Could not create a Canvas Context element.");return i.translate(s/2,l/2),i.rotate(o),i.drawImage(this.canvas,a/-2,u/-2),this.buffer=e.makeBufferFromCanvasImageData(n),this},e.DEGREE_TO_RADIANS=Math.PI/180,e}(fi);function r0(){return typeof navigator<"u"}function J7(){return r0()&&!!navigator.mediaDevices}function D2(){return!!(J7()&&navigator.mediaDevices.enumerateDevices)}var Rs=function(){return Rs=Object.assign||function(t){for(var e,r=1,n=arguments.length;r<n;r++){e=arguments[r];for(var o in e)Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o])}return t},Rs.apply(this,arguments)},Jt=function(t,e,r,n){function o(a){return a instanceof r?a:new r(function(u){u(a)})}return new(r||(r=Promise))(function(a,u){function s(c){try{i(n.next(c))}catch(f){u(f)}}function l(c){try{i(n.throw(c))}catch(f){u(f)}}function i(c){c.done?a(c.value):o(c.value).then(s,l)}i((n=n.apply(t,e||[])).next())})},er=function(t,e){var r={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,o,a,u;return u={next:s(0),throw:s(1),return:s(2)},typeof Symbol=="function"&&(u[Symbol.iterator]=function(){return this}),u;function s(i){return function(c){return l([i,c])}}function l(i){if(n)throw new TypeError("Generator is already executing.");for(;r;)try{if(n=1,o&&(a=i[0]&2?o.return:i[0]?o.throw||((a=o.return)&&a.call(o),0):o.next)&&!(a=a.call(o,i[1])).done)return a;switch(o=0,a&&(i=[i[0]&2,a.value]),i[0]){case 0:case 1:a=i;break;case 4:return r.label++,{value:i[1],done:!1};case 5:r.label++,o=i[1],i=[0];continue;case 7:i=r.ops.pop(),r.trys.pop();continue;default:if(a=r.trys,!(a=a.length>0&&a[a.length-1])&&(i[0]===6||i[0]===2)){r=0;continue}if(i[0]===3&&(!a||i[1]>a[0]&&i[1]<a[3])){r.label=i[1];break}if(i[0]===6&&r.label<a[1]){r.label=a[1],a=i;break}if(a&&r.label<a[2]){r.label=a[2],r.ops.push(i);break}a[2]&&r.ops.pop(),r.trys.pop();continue}i=e.call(t,r)}catch(c){i=[6,c],o=0}finally{n=a=0}if(i[0]&5)throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}},n0=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,r=e&&t[e],n=0;if(r)return r.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&n>=t.length&&(t=void 0),{value:t&&t[n++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},eV={delayBetweenScanAttempts:500,delayBetweenScanSuccess:500,tryPlayVideoTimeout:5e3},Bn=function(){function t(e,r,n){r===void 0&&(r=new Map),n===void 0&&(n={}),this.reader=e,this.hints=r,this.options=Rs(Rs({},eV),n)}return Object.defineProperty(t.prototype,"possibleFormats",{set:function(e){this.hints.set(Me.POSSIBLE_FORMATS,e)},enumerable:!1,configurable:!0}),t.addVideoSource=function(e,r){try{e.srcObject=r}catch{console.error("got interrupted by new loading request")}},t.mediaStreamSetTorch=function(e,r){return Jt(this,void 0,void 0,function(){return er(this,function(n){switch(n.label){case 0:return[4,e.applyConstraints({advanced:[{fillLightMode:r?"flash":"off",torch:!!r}]})];case 1:return n.sent(),[2]}})})},t.mediaStreamIsTorchCompatible=function(e){var r,n,o=e.getVideoTracks();try{for(var a=n0(o),u=a.next();!u.done;u=a.next()){var s=u.value;if(t.mediaStreamIsTorchCompatibleTrack(s))return!0}}catch(l){r={error:l}}finally{try{u&&!u.done&&(n=a.return)&&n.call(a)}finally{if(r)throw r.error}}return!1},t.mediaStreamIsTorchCompatibleTrack=function(e){try{var r=e.getCapabilities();return"torch"in r}catch(n){return console.error(n),console.warn("Your browser may be not fully compatible with WebRTC and/or ImageCapture specs. Torch will not be available."),!1}},t.isVideoPlaying=function(e){return e.currentTime>0&&!e.paused&&e.readyState>2},t.getMediaElement=function(e,r){var n=document.getElementById(e);if(!n)throw new Xt("element with id '".concat(e,"' not found"));if(n.nodeName.toLowerCase()!==r.toLowerCase())throw new Xt("element with id '".concat(e,"' must be an ").concat(r," element"));return n},t.createVideoElement=function(e){if(e instanceof HTMLVideoElement)return e;if(typeof e=="string")return t.getMediaElement(e,"video");if(!e&&typeof document<"u"){var r=document.createElement("video");return r.width=200,r.height=200,r}throw new Error("Couldn't get videoElement from videoSource!")},t.prepareImageElement=function(e){if(e instanceof HTMLImageElement)return e;if(typeof e=="string")return t.getMediaElement(e,"img");if(typeof e>"u"){var r=document.createElement("img");return r.width=200,r.height=200,r}throw new Error("Couldn't get imageElement from imageSource!")},t.prepareVideoElement=function(e){var r=t.createVideoElement(e);return r.setAttribute("autoplay","true"),r.setAttribute("muted","true"),r.setAttribute("playsinline","true"),r},t.isImageLoaded=function(e){return!(!e.complete||e.naturalWidth===0)},t.createBinaryBitmapFromCanvas=function(e){var r=new S2(e),n=new dl(r);return new fl(n)},t.drawImageOnCanvas=function(e,r){e.drawImage(r,0,0)},t.getMediaElementDimensions=function(e){if(e instanceof HTMLVideoElement)return{height:e.videoHeight,width:e.videoWidth};if(e instanceof HTMLImageElement)return{height:e.naturalHeight||e.height,width:e.naturalWidth||e.width};throw new Error("Couldn't find the Source's dimensions!")},t.createCaptureCanvas=function(e){if(!e)throw new Xt("Cannot create a capture canvas without a media element.");if(typeof document>"u")throw new Error(`The page "Document" is undefined, make sure you're running in a browser.`);var r=document.createElement("canvas"),n=t.getMediaElementDimensions(e),o=n.width,a=n.height;return r.style.width=o+"px",r.style.height=a+"px",r.width=o,r.height=a,r},t.tryPlayVideo=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:if(e?.ended)return console.error("Trying to play video that has ended."),[2,!1];if(t.isVideoPlaying(e))return console.warn("Trying to play video that is already playing."),[2,!0];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,e.play()];case 2:return n.sent(),[2,!0];case 3:return r=n.sent(),console.warn("It was not possible to play the video.",r),[2,!1];case 4:return[2]}})})},t.createCanvasFromMediaElement=function(e){var r=t.createCaptureCanvas(e),n=r.getContext("2d");if(!n)throw new Error("Couldn't find Canvas 2D Context.");return t.drawImageOnCanvas(n,e),r},t.createBinaryBitmapFromMediaElem=function(e){var r=t.createCanvasFromMediaElement(e);return t.createBinaryBitmapFromCanvas(r)},t.destroyImageElement=function(e){e.src="",e.removeAttribute("src"),e=void 0},t.listVideoInputDevices=function(){return Jt(this,void 0,void 0,function(){var e,r,n,o,a,u,s,l,i,c,f,d;return er(this,function(h){switch(h.label){case 0:if(!r0())throw new Error("Can't enumerate devices, navigator is not present.");if(!D2())throw new Error("Can't enumerate devices, method not supported.");return[4,navigator.mediaDevices.enumerateDevices()];case 1:e=h.sent(),r=[];try{for(n=n0(e),o=n.next();!o.done;o=n.next())a=o.value,u=a.kind==="video"?"videoinput":a.kind,u==="videoinput"&&(s=a.deviceId||a.id,l=a.label||"Video device ".concat(r.length+1),i=a.groupId,c={deviceId:s,label:l,kind:u,groupId:i},r.push(c))}catch(p){f={error:p}}finally{try{o&&!o.done&&(d=n.return)&&d.call(n)}finally{if(f)throw f.error}}return[2,r]}})})},t.findDeviceById=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:return[4,t.listVideoInputDevices()];case 1:return r=n.sent(),r?[2,r.find(function(o){return o.deviceId===e})]:[2]}})})},t.cleanVideoSource=function(e){if(e){try{e.srcObject=null}catch{e.src=""}e&&e.removeAttribute("src")}},t.releaseAllStreams=function(){t.streamTracker.length!==0&&t.streamTracker.forEach(function(e){e.getTracks().forEach(function(r){return r.stop()})}),t.streamTracker=[]},t.playVideoOnLoadAsync=function(e,r){return Jt(this,void 0,void 0,function(){var n;return er(this,function(o){switch(o.label){case 0:return[4,t.tryPlayVideo(e)];case 1:return n=o.sent(),n?[2,!0]:[2,new Promise(function(a,u){var s=setTimeout(function(){t.isVideoPlaying(e)||(u(!1),e.removeEventListener("canplay",l))},r),l=function(){t.tryPlayVideo(e).then(function(i){clearTimeout(s),e.removeEventListener("canplay",l),a(i)})};e.addEventListener("canplay",l)})]}})})},t.attachStreamToVideo=function(e,r,n){return n===void 0&&(n=5e3),Jt(this,void 0,void 0,function(){var o;return er(this,function(a){switch(a.label){case 0:return o=t.prepareVideoElement(r),t.addVideoSource(o,e),[4,t.playVideoOnLoadAsync(o,n)];case 1:return a.sent(),[2,o]}})})},t._waitImageLoad=function(e){return new Promise(function(r,n){var o=1e4,a=setTimeout(function(){t.isImageLoaded(e)||(e.removeEventListener("load",u),n())},o),u=function(){clearTimeout(a),e.removeEventListener("load",u),r()};e.addEventListener("load",u)})},t.checkCallbackFnOrThrow=function(e){if(!e)throw new Xt("`callbackFn` is a required parameter, you cannot capture results without it.")},t.disposeMediaStream=function(e){e.getVideoTracks().forEach(function(r){return r.stop()}),e=void 0},t.prototype.decode=function(e){var r=t.createCanvasFromMediaElement(e);return this.decodeFromCanvas(r)},t.prototype.decodeBitmap=function(e){return this.reader.decode(e,this.hints)},t.prototype.decodeFromCanvas=function(e){var r=t.createBinaryBitmapFromCanvas(e);return this.decodeBitmap(r)},t.prototype.decodeFromImageElement=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:if(!e)throw new Xt("An image element must be provided.");return r=t.prepareImageElement(e),[4,this._decodeOnLoadImage(r)];case 1:return[2,n.sent()]}})})},t.prototype.decodeFromImageUrl=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:if(!e)throw new Xt("An URL must be provided.");r=t.prepareImageElement(),r.src=e,n.label=1;case 1:return n.trys.push([1,,3,4]),[4,this.decodeFromImageElement(r)];case 2:return[2,n.sent()];case 3:return t.destroyImageElement(r),[7];case 4:return[2]}})})},t.prototype.decodeFromConstraints=function(e,r,n){return Jt(this,void 0,void 0,function(){var o,a;return er(this,function(u){switch(u.label){case 0:return t.checkCallbackFnOrThrow(n),[4,this.getUserMedia(e)];case 1:o=u.sent(),u.label=2;case 2:return u.trys.push([2,4,,5]),[4,this.decodeFromStream(o,r,n)];case 3:return[2,u.sent()];case 4:throw a=u.sent(),t.disposeMediaStream(o),a;case 5:return[2]}})})},t.prototype.decodeFromStream=function(e,r,n){return Jt(this,void 0,void 0,function(){var o,a,u,s,l,i,c,f,d,h=this;return er(this,function(p){switch(p.label){case 0:return t.checkCallbackFnOrThrow(n),o=this.options.tryPlayVideoTimeout,[4,t.attachStreamToVideo(e,r,o)];case 1:return a=p.sent(),u=function(){t.disposeMediaStream(e),t.cleanVideoSource(a)},s=this.scan(a,n,u),l=e.getVideoTracks(),i=Rs(Rs({},s),{stop:function(){s.stop()},streamVideoConstraintsApply:function(m,v){return Jt(this,void 0,void 0,function(){var x,y,_,I,C,V,z;return er(this,function(W){switch(W.label){case 0:x=v?l.filter(v):l,W.label=1;case 1:W.trys.push([1,6,7,8]),y=n0(x),_=y.next(),W.label=2;case 2:return _.done?[3,5]:(I=_.value,[4,I.applyConstraints(m)]);case 3:W.sent(),W.label=4;case 4:return _=y.next(),[3,2];case 5:return[3,8];case 6:return C=W.sent(),V={error:C},[3,8];case 7:try{_&&!_.done&&(z=y.return)&&z.call(y)}finally{if(V)throw V.error}return[7];case 8:return[2]}})})},streamVideoConstraintsGet:function(m){return l.find(m).getConstraints()},streamVideoSettingsGet:function(m){return l.find(m).getSettings()},streamVideoCapabilitiesGet:function(m){return l.find(m).getCapabilities()}}),c=t.mediaStreamIsTorchCompatible(e),c&&(f=l?.find(function(m){return t.mediaStreamIsTorchCompatibleTrack(m)}),d=function(m){return Jt(h,void 0,void 0,function(){return er(this,function(v){switch(v.label){case 0:return[4,t.mediaStreamSetTorch(f,m)];case 1:return v.sent(),[2]}})})},i.switchTorch=d,i.stop=function(){return Jt(h,void 0,void 0,function(){return er(this,function(m){switch(m.label){case 0:return s.stop(),[4,d(!1)];case 1:return m.sent(),[2]}})})}),[2,i]}})})},t.prototype.decodeFromVideoDevice=function(e,r,n){return Jt(this,void 0,void 0,function(){var o,a;return er(this,function(u){switch(u.label){case 0:return t.checkCallbackFnOrThrow(n),e?o={deviceId:{exact:e}}:o={facingMode:"environment"},a={video:o},[4,this.decodeFromConstraints(a,r,n)];case 1:return[2,u.sent()]}})})},t.prototype.decodeFromVideoElement=function(e,r){return Jt(this,void 0,void 0,function(){var n,o;return er(this,function(a){switch(a.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Xt("A video element must be provided.");return n=t.prepareVideoElement(e),o=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,o)];case 1:return a.sent(),[2,this.scan(n,r)]}})})},t.prototype.decodeFromVideoUrl=function(e,r){return Jt(this,void 0,void 0,function(){var n,o,a,u;return er(this,function(s){switch(s.label){case 0:if(t.checkCallbackFnOrThrow(r),!e)throw new Xt("An URL must be provided.");return n=t.prepareVideoElement(),n.src=e,o=function(){t.cleanVideoSource(n)},a=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(n,a)];case 1:return s.sent(),u=this.scan(n,r,o),[2,u]}})})},t.prototype.decodeOnceFromConstraints=function(e,r){return Jt(this,void 0,void 0,function(){var n;return er(this,function(o){switch(o.label){case 0:return[4,this.getUserMedia(e)];case 1:return n=o.sent(),[4,this.decodeOnceFromStream(n,r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeOnceFromStream=function(e,r){return Jt(this,void 0,void 0,function(){var n,o,a;return er(this,function(u){switch(u.label){case 0:return n=!!r,[4,t.attachStreamToVideo(e,r)];case 1:o=u.sent(),u.label=2;case 2:return u.trys.push([2,,4,5]),[4,this.scanOneResult(o)];case 3:return a=u.sent(),[2,a];case 4:return n||t.cleanVideoSource(o),[7];case 5:return[2]}})})},t.prototype.decodeOnceFromVideoDevice=function(e,r){return Jt(this,void 0,void 0,function(){var n,o;return er(this,function(a){switch(a.label){case 0:return e?n={deviceId:{exact:e}}:n={facingMode:"environment"},o={video:n},[4,this.decodeOnceFromConstraints(o,r)];case 1:return[2,a.sent()]}})})},t.prototype.decodeOnceFromVideoElement=function(e){return Jt(this,void 0,void 0,function(){var r,n;return er(this,function(o){switch(o.label){case 0:if(!e)throw new Xt("A video element must be provided.");return r=t.prepareVideoElement(e),n=this.options.tryPlayVideoTimeout,[4,t.playVideoOnLoadAsync(r,n)];case 1:return o.sent(),[4,this.scanOneResult(r)];case 2:return[2,o.sent()]}})})},t.prototype.decodeOnceFromVideoUrl=function(e){return Jt(this,void 0,void 0,function(){var r,n;return er(this,function(o){switch(o.label){case 0:if(!e)throw new Xt("An URL must be provided.");r=t.prepareVideoElement(),r.src=e,n=this.decodeOnceFromVideoElement(r),o.label=1;case 1:return o.trys.push([1,,3,4]),[4,n];case 2:return[2,o.sent()];case 3:return t.cleanVideoSource(r),[7];case 4:return[2]}})})},t.prototype.scanOneResult=function(e,r,n,o){var a=this;return r===void 0&&(r=!0),n===void 0&&(n=!0),o===void 0&&(o=!0),new Promise(function(u,s){a.scan(e,function(l,i,c){if(l){u(l),c.stop();return}if(i){if(i instanceof L&&r||i instanceof nt&&n||i instanceof K&&o)return;c.stop(),s(i)}})})},t.prototype.scan=function(e,r,n){var o=this;t.checkCallbackFnOrThrow(r);var a=t.createCaptureCanvas(e),u;try{u=a.getContext("2d",{willReadFrequently:!0})}catch{u=a.getContext("2d")}if(!u)throw new Error("Couldn't create canvas for visual element scan.");var s=function(){u=void 0,a=void 0},l=!1,i,c=function(){l=!0,clearTimeout(i),s(),n&&n()},f={stop:c},d=function(){if(!l)try{t.drawImageOnCanvas(u,e);var h=o.decodeFromCanvas(a);r(h,void 0,f),i=setTimeout(d,o.options.delayBetweenScanSuccess)}catch(x){r(void 0,x,f);var p=x instanceof nt,m=x instanceof K,v=x instanceof L;if(p||m||v){i=setTimeout(d,o.options.delayBetweenScanAttempts);return}s(),n&&n(x)}};return d(),f},t.prototype._decodeOnLoadImage=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:return r=t.isImageLoaded(e),r?[3,2]:[4,t._waitImageLoad(e)];case 1:n.sent(),n.label=2;case 2:return[2,this.decode(e)]}})})},t.prototype.getUserMedia=function(e){return Jt(this,void 0,void 0,function(){var r;return er(this,function(n){switch(n.label){case 0:return[4,navigator.mediaDevices.getUserMedia(e)];case 1:return r=n.sent(),t.streamTracker.push(r),[2,r]}})})},t.streamTracker=[],t}();var tV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Wde=function(t){tV(e,t);function e(r,n){return t.call(this,new To,r,n)||this}return e}(Bn);var rV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),Zde=function(t){rV(e,t);function e(r,n){return t.call(this,new Pi(r),r,n)||this}return e}(Bn);var nV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),ehe=function(t){nV(e,t);function e(r,n){return t.call(this,new Co,r,n)||this}return e}(Bn);var iV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),C2=function(t){iV(e,t);function e(r,n){var o=this,a=new El;return a.setHints(r),o=t.call(this,a,r,n)||this,o.reader=a,o}return Object.defineProperty(e.prototype,"possibleFormats",{set:function(r){this.hints.set(Me.POSSIBLE_FORMATS,r),this.reader.setHints(this.hints)},enumerable:!1,configurable:!0}),e.prototype.decodeBitmap=function(r){return this.reader.decodeWithState(r)},e.prototype.setHints=function(r){this.hints=r,this.reader.setHints(this.hints)},e}(Bn);var oV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),she=function(t){oV(e,t);function e(r,n){return t.call(this,new Mo,r,n)||this}return e}(Bn);var aV=function(){var t=function(e,r){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,o){n.__proto__=o}||function(n,o){for(var a in o)Object.prototype.hasOwnProperty.call(o,a)&&(n[a]=o[a])},t(e,r)};return function(e,r){if(typeof r!="function"&&r!==null)throw new TypeError("Class extends value "+String(r)+" is not a constructor or null");t(e,r);function n(){this.constructor=e}e.prototype=r===null?Object.create(r):(n.prototype=r.prototype,new n)}}(),fhe=function(t){aV(e,t);function e(r,n){return t.call(this,new Oo,r,n)||this}return e}(Bn);var lo="http://www.w3.org/2000/svg",phe=function(){function t(e){if(typeof e=="string"){var r=document.getElementById(e);if(!r)throw new Error("Could not find a Container element with '".concat(e,"'."));this.containerElement=r}else this.containerElement=e}return t.prototype.write=function(e,r,n,o){if(e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=o&&o.get(Oe.MARGIN)!==void 0?Number.parseInt(o.get(Oe.MARGIN).toString(),10):t.QUIET_ZONE_SIZE,u=this.encode(o,e);return this.renderResult(u,r,n,a)},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"svg");return n.setAttributeNS(lo,"width",r.toString()),n.setAttributeNS(lo,"height",e.toString()),n},t.prototype.createSvgPathPlaceholderElement=function(e,r){var n=document.createElementNS(t.SVG_NS,"path");return n.setAttributeNS(lo,"d","M0 0h".concat(e,"v").concat(r,"H0z")),n.setAttributeNS(lo,"fill","none"),n},t.prototype.createSvgRectElement=function(e,r,n,o){var a=document.createElementNS(t.SVG_NS,"rect");return a.setAttributeNS(lo,"x",e.toString()),a.setAttributeNS(lo,"y",r.toString()),a.setAttributeNS(lo,"height",n.toString()),a.setAttributeNS(lo,"width",o.toString()),a.setAttributeNS(lo,"fill","#000000"),a},t.prototype.encode=function(e,r){var n=on.L;if(e&&e.get(Oe.ERROR_CORRECTION)!==void 0){var o=e.get(Oe.ERROR_CORRECTION).toString();n=on.fromString(o)}var a=uo.encode(r,n,e);return a},t.prototype.renderResult=function(e,r,n,o){var a=e.getMatrix();if(a===null)throw new hr;var u=a.getWidth(),s=a.getHeight(),l=u+o*2,i=s+o*2,c=Math.max(r,l),f=Math.max(n,i),d=Math.min(Math.floor(c/l),Math.floor(f/i)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=this.createSvgPathPlaceholderElement(r,n);m.appendChild(v),this.containerElement.appendChild(m);for(var x=0,y=p;x<s;x++,y+=d)for(var _=0,I=h;_<u;_++,I+=d)if(a.get(_,x)===1){var C=this.createSvgRectElement(I,y,d,d);m.appendChild(C)}return m},t.QUIET_ZONE_SIZE=4,t.SVG_NS="http://www.w3.org/2000/svg",t}();var O2="http://www.w3.org/2000/svg",yhe=function(){function t(){}return t.prototype.write=function(e,r,n,o){if(e.length===0)throw new re("Found empty contents");if(r<0||n<0)throw new re("Requested dimensions are too small: "+r+"x"+n);var a=on.L,u=t.QUIET_ZONE_SIZE;if(o){if(o.get(Oe.ERROR_CORRECTION)!==void 0){var s=o.get(Oe.ERROR_CORRECTION).toString();a=on.fromString(s)}o.get(Oe.MARGIN)!==void 0&&(u=Number.parseInt(o.get(Oe.MARGIN).toString(),10))}var l=uo.encode(e,a,o);return this.renderResult(l,r,n,u)},t.prototype.writeToDom=function(e,r,n,o,a){if(typeof e=="string"){var u=document.querySelector(e);if(!u)throw new Error("Could no find the target HTML element.");e=u}var s=this.write(r,n,o,a);e instanceof HTMLElement&&e.appendChild(s)},t.prototype.renderResult=function(e,r,n,o){var a=e.getMatrix();if(a===null)throw new hr;for(var u=a.getWidth(),s=a.getHeight(),l=u+o*2,i=s+o*2,c=Math.max(r,l),f=Math.max(n,i),d=Math.min(Math.floor(c/l),Math.floor(f/i)),h=Math.floor((c-u*d)/2),p=Math.floor((f-s*d)/2),m=this.createSVGElement(c,f),v=0,x=p;v<s;v++,x+=d)for(var y=0,_=h;y<u;y++,_+=d)if(a.get(y,v)===1){var I=this.createSvgRectElement(_,x,d,d);m.appendChild(I)}return m},t.prototype.createSVGElement=function(e,r){var n=document.createElementNS(O2,"svg"),o=e.toString(),a=r.toString();return n.setAttribute("height",a),n.setAttribute("width",o),n.setAttribute("viewBox","0 0 "+o+" "+a),n},t.prototype.createSvgRectElement=function(e,r,n,o){var a=document.createElementNS(O2,"rect");return a.setAttribute("x",e.toString()),a.setAttribute("y",r.toString()),a.setAttribute("height",n.toString()),a.setAttribute("width",o.toString()),a.setAttribute("fill","#000000"),a},t.QUIET_ZONE_SIZE=4,t}();var sV=Object.create,Td=Object.defineProperty,uV=Object.getOwnPropertyDescriptor,lV=Object.getOwnPropertyNames,cV=Object.getPrototypeOf,fV=Object.prototype.hasOwnProperty,Y=(t,e)=>()=>(t&&(e=t(t=0)),e),jt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),zs=(t,e)=>{for(var r in e)Td(t,r,{get:e[r],enumerable:!0})},lT=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of lV(e))!fV.call(t,o)&&o!==r&&Td(t,o,{get:()=>e[o],enumerable:!(n=uV(e,o))||n.enumerable});return t},Vs=(t,e,r)=>(r=t!=null?sV(cV(t)):{},lT(e||!t||!t.__esModule?Td(r,"default",{value:t,enumerable:!0}):r,t)),ka=t=>lT(Td({},"__esModule",{value:!0}),t),Ol,Ro,Bs,Im,Am=Y(()=>{"use strict";Ol=new Map,Ro=[],Bs=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=Ol.get(t);if(n===void 0)Ol.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let o=Ro.indexOf(t);o!==-1&&Ro.splice(o,1);for(let a=0;a<Ro.length;a++)if(Ol.get(Ro[a]).priority<=r){Ro.splice(a,0,t);return}Ro.push(t)}return}throw new TypeError("not a valid backend")},Im=t=>U(void 0,null,function*(){let e=t.length===0?Ro:t,r=[];for(let n of e){let o=Ol.get(n);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let a=!!o.initPromise;try{return a||(o.initPromise=o.backend.init(n)),yield o.initPromise,o.initialized=!0,o.backend}catch(u){a||r.push({name:n,err:u}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),dV=Y(()=>{"use strict";Am()}),cT,hV=Y(()=>{"use strict";cT="1.17.1"}),i0,$s,fT=Y(()=>{"use strict";hV(),i0="warning",$s={wasm:{},webgl:{},webgpu:{},versions:{common:cT},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);i0=t}},get logLevel(){return i0}},Object.defineProperty($s,"logLevel",{enumerable:!0})}),we,pV=Y(()=>{"use strict";fT(),we=$s}),dT,hT,gV=Y(()=>{"use strict";dT=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let o,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,i;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?i=[0,0,0,0]:typeof s.bias=="number"?i=[s.bias,s.bias,s.bias,s.bias]:(i=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(i[3]=s.bias[3]));let c=a*o,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<o;v++){let x=(t.data[f++]-i[0])*l[0],y=(t.data[d++]-i[1])*l[1],_=(t.data[h++]-i[2])*l[2],I=p===-1?255:(t.data[p++]-i[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},hT=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let o,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[1],u=t.dims[3]):(o=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,i,c;l===void 0||l.mean===void 0?i=[255,255,255,255]:typeof l.mean=="number"?i=[l.mean,l.mean,l.mean,l.mean]:(i=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(i[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*o;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(o,a);for(let C=0;C<a*o;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*i[0],n.data[p]=(t.data[y++]-c[1])*i[1],n.data[m]=(t.data[_++]-c[2])*i[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*i[3]}else throw new Error("Can not access image data");return n}}),ud,pT,gT,mT,yT,mV=Y(()=>{"use strict";Sm(),ud=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,o=e.norm??{mean:255,bias:0},a,u;typeof o.mean=="number"?a=[o.mean,o.mean,o.mean,o.mean]:a=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?u=[o.bias,o.bias,o.bias,o.bias]:u=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",i=r*n,c=l==="RGBA"?new Float32Array(i*4):new Float32Array(i*3),f=4,d=0,h=1,p=2,m=3,v=0,x=i,y=i*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=i*3:l==="RBG"?(v=0,y=i,x=i*2):l==="BGR"&&(y=0,x=i,v=i*2);for(let I=0;I<i;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new mi("float32",c,[1,4,r,n]):new mi("float32",c,[1,3,r,n])},pT=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},i=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=i(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,ud(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=i(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(ud(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return ud(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),gT=(t,e)=>{let{width:r,height:n,download:o,dispose:a}=e,u=[1,n,r,4];return new mi({location:"texture",type:"float32",texture:t,dims:u,download:o,dispose:a})},mT=(t,e)=>{let{dataType:r,dims:n,download:o,dispose:a}=e;return new mi({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:o,dispose:a})},yT=(t,e,r)=>new mi({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),Xl,gd,o0,vT,yV=Y(()=>{"use strict";Xl=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),gd=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),o0=!1,vT=()=>{if(!o0){o0=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(Xl.set("int64",BigInt64Array),gd.set(BigInt64Array,"int64")),e&&(Xl.set("uint64",BigUint64Array),gd.set(BigUint64Array,"uint64"))}}}),bT,wT,vV=Y(()=>{"use strict";Sm(),bT=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},wT=(t,e)=>{switch(t.location){case"cpu":return new mi(t.type,t.data,e);case"cpu-pinned":return new mi({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new mi({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new mi({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),mi,Sm=Y(()=>{"use strict";gV(),mV(),yV(),vV(),mi=class{constructor(t,e,r){vT();let n,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,o=t.dims,t.location){case"cpu-pinned":{let u=Xl.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=Xl.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=gd.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");o=s,this.cpuData=u,this.dataLocation="cpu"}let a=bT(o);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=a}static fromImage(t,e){return U(this,null,function*(){return pT(t,e)})}static fromTexture(t,e){return gT(t,e)}static fromGpuBuffer(t,e){return mT(t,e)}static fromPinnedBuffer(t,e,r){return yT(t,e,r)}toDataURL(t){return dT(this,t)}toImageData(t){return hT(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return wT(this,t)}}}),Ur,Dm=Y(()=>{"use strict";Sm(),Ur=mi}),U0,a0,js,Us,xT=Y(()=>{"use strict";fT(),U0=(t,e)=>{$s.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},a0=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[o].trim().split(" ")[1]}`;e&&(a+=`::${e}`),U0("CPU",a);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},js=t=>{$s.wasm.trace&&a0("BEGIN",t)},Us=t=>{$s.wasm.trace&&a0("END",t)}}),_T,bV=Y(()=>{"use strict";Am(),Dm(),xT(),_T=class ET{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){js();let o={},a={};if(typeof e!="object"||e===null||e instanceof Ur||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Ur)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let i of r){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);o[i]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof Ur)&&(i=!0,u=!1,o[f]=d)}if(i){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of this.inputNames)if(typeof e[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(u)for(let i of this.outputNames)o[i]=null;let s=yield this.handler.run(e,o,a),l={};for(let i in s)if(Object.hasOwnProperty.call(s,i)){let c=s[i];c instanceof Ur?l[i]=c:l[i]=new Ur(c.type,c.data,c.dims)}return Us(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,o){return U(this,null,function*(){js();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let i=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=i.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${i.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>i.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${i.byteLength-c}].`);if(typeof o=="object"&&o!==null)u=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(i,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(i=>typeof i=="string"?i:i.name),l=yield(yield Im(s)).createInferenceSessionHandler(a,u);return Us(),new ET(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),fo,wV=Y(()=>{"use strict";bV(),fo=_T}),xV=Y(()=>{"use strict"}),P2,TT,_V=Y(()=>{"use strict";Am(),Dm(),P2="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",TT=class IT{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",o=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield Im(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,o,a);return new IT(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(P2)})}typeNarrowingForRunStep(e,r,n,o,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof Ur||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof Ur)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let i of o){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);u[i]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(o);for(let f of r)if(c.indexOf(f)!==-1){let d=o[f];(d===null||d instanceof Ur)&&(i=!0,l=!1,u[f]=d)}if(i){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of e)if(typeof n[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(l)for(let i of r)u[i]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let o=e[n];o instanceof Ur?r[n]=o:r[n]=new Ur(o.type,o.data,o.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[o,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[o,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),AT,EV=Y(()=>{"use strict";_V(),AT=TT}),ST={};zs(ST,{InferenceSession:()=>fo,TRACE:()=>U0,TRACE_FUNC_BEGIN:()=>js,TRACE_FUNC_END:()=>Us,Tensor:()=>Ur,TrainingSession:()=>AT,env:()=>we,registerBackend:()=>Bs});var Fi=Y(()=>{"use strict";dV(),pV(),wV(),Dm(),xT(),xV(),EV()});function Ra(t,e,r,n){if(e===void 0)return TV(t);if(r===void 0)ld(t,e,1);else if(typeof r=="number"&&n===void 0)ld(t,e,r);else if(typeof r=="string"&&n===void 0)ld(t,r,1,e);else if(typeof r=="string"&&typeof n=="number")ld(t,r,n,e);else throw new TypeError("input is valid")}function TV(t){return{verbose:Ra.verbose.bind(null,t),info:Ra.info.bind(null,t),warning:Ra.warning.bind(null,t),error:Ra.error.bind(null,t),fatal:Ra.fatal.bind(null,t)}}function ld(t,e,r,n){let o=Ls[n||""]||Ls[""];H0[t]<H0[o.minimalSeverity]||(o.logDateTime&&(e=`${new Date().toISOString()}|${e}`),o.logSourceLocation,DT[o.provider].log(t,e,n))}var M2,N2,H0,DT,s0,Ls,ar,u0,l0,CT,Pl,yi=Y(()=>{"use strict";M2=class{log(t,e,r){}},N2=class{log(t,e,r){console.log(`${this.color(t)} ${r?"\x1B[35m"+r+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},H0={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},DT={none:new M2,console:new N2},s0={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},Ls={"":s0},(t=>{function e(i,c){t("verbose",i,c)}t.verbose=e;function r(i,c){t("info",i,c)}t.info=r;function n(i,c){t("warning",i,c)}t.warning=n;function o(i,c){t("error",i,c)}t.error=o;function a(i,c){t("fatal",i,c)}t.fatal=a;function u(i){Ls={},s("",i||{})}t.reset=u;function s(i,c){if(i==="*")u(c);else{let f=Ls[i]||s0;Ls[i]={provider:c.provider||f.provider,minimalSeverity:c.minimalSeverity||f.minimalSeverity,logDateTime:c.logDateTime===void 0?f.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?f.logSourceLocation:c.logSourceLocation}}}t.set=s;function l(i){let c={};i.logLevel&&(c.minimalSeverity=i.logLevel),s("",c)}t.setWithEnv=l})(Ra||={}),ar=Ra,u0=class{constructor(t,e,r,n,o,a){this.category=t,this.name=e,this.startTime=r,this.endCallback=n,this.timer=o,this.ctx=a}end(){return U(this,null,function*(){return this.endCallback(this)})}checkTimer(){return U(this,null,function*(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)})}},l0=class{constructor(t,e,r,n){this.category=t,this.name=e,this.startTime=r,this.endTime=n}},CT=class{constructor(t,e,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=r===void 0?5e3:r}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=Pl(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,r,n){let o=this._started?this.begin(t,e,n):void 0,a=!1,u=r();if(u&&typeof u.then=="function")return a=!0,new Promise((s,l)=>{u.then(i=>U(this,null,function*(){o&&(yield o.end()),s(i)}),i=>U(this,null,function*(){o&&(yield o.end()),l(i)}))});if(!a&&o){let s=o.end();if(s&&typeof s.then=="function")return new Promise((l,i)=>{s.then(()=>{l(u)},c=>{i(c)})})}return u}begin(t,e,r){if(!this._started)throw new Error("profiler is not started yet");if(r===void 0){let n=Pl();return this.flush(n),new u0(t,e,n,o=>this.endSync(o))}else{let n=r.beginTimer();return new u0(t,e,0,o=>U(this,null,function*(){return this.end(o)}),n,r)}}end(t){return U(this,null,function*(){let e=yield t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new l0(t.category,t.name,t.startTime,e)),this.flush(e))})}endSync(t){let e=Pl();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new l0(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){ar.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=Pl()}}get started(){return this._started}},Pl=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function IV(t,e,r){for(let n of r){let o=n[0],a=n[1],u=n[2],s=n[3],l=n[4];if(t.opType===o){for(let i of e)if((i.domain===a||i.domain==="ai.onnx"&&a==="")&&AV(i.version,u))return{opImpl:s,opInit:l}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(n=>`${n.domain||"ai.onnx"} v${n.version}`).join(", ")}`)}function AV(t,e){if(e.endsWith("+")){let r=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(r)&&r<=t}else if(e.split("-").length===2){let r=e.split("-"),n=Number.parseInt(r[0],10),o=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(o)&&n<=t&&t<=o}else return Number.parseInt(e,10)===t}var SV=Y(()=>{"use strict"}),DV=jt(t=>{"use strict";t.__esModule=!0;var e=function(){function r(n){if(!n)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,n&&r.isGuid(n)&&(this.value=n)}return r.isGuid=function(n){var o=n.toString();return n&&(n instanceof r||r.validator.test(o))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(n){return new r(n)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(n){for(var o="",a=0;a<n;a++)o+=((1+Math.random())*65536|0).toString(16).substring(1);return o},r.prototype.equals=function(n){return r.isGuid(n)&&this.value===n.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();t.Guid=e});function $t(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}function Xr(t){return(t&&t.__isLong__)===!0}function R2(t){var e=Math.clz32(t&-t);return t?31-e:e}function Ca(t,e){var r,n,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(n=G0[t],n)?n:(r=ot(t,0,!0),o&&(G0[t]=r),r)):(t|=0,(o=-128<=t&&t<128)&&(n=z0[t],n)?n:(r=ot(t,t<0?-1:0,!1),o&&(z0[t]=r),r))}function jn(t,e){if(isNaN(t))return e?Mi:Vn;if(e){if(t<0)return Mi;if(t>=W0)return Y0}else{if(t<=-q0)return an;if(t+1>=q0)return X0}return t<0?jn(-t,e).neg():ot(t%Fa|0,t/Fa|0,e)}function ot(t,e,r){return new $t(t,e,r)}function Cm(t,e,r){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?Mi:Vn;if(r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return Cm(t.substring(1),e,r).neg();for(var o=jn(Yl(r,8)),a=Vn,u=0;u<t.length;u+=8){var s=Math.min(8,t.length-u),l=parseInt(t.substring(u,u+s),r);if(s<8){var i=jn(Yl(r,s));a=a.mul(i).add(jn(l))}else a=a.mul(o),a=a.add(jn(l))}return a.unsigned=e,a}function gi(t,e){return typeof t=="number"?jn(t,e):typeof t=="string"?Cm(t,e):ot(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var En,z0,G0,Yl,c0,F2,Fa,W0,q0,f0,Vn,Mi,Oa,d0,cd,X0,Y0,an,ne,$o,OT=Y(()=>{En=null;try{En=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}$t.prototype.__isLong__,Object.defineProperty($t.prototype,"__isLong__",{value:!0}),$t.isLong=Xr,z0={},G0={},$t.fromInt=Ca,$t.fromNumber=jn,$t.fromBits=ot,Yl=Math.pow,$t.fromString=Cm,$t.fromValue=gi,c0=65536,F2=1<<24,Fa=c0*c0,W0=Fa*Fa,q0=W0/2,f0=Ca(F2),Vn=Ca(0),$t.ZERO=Vn,Mi=Ca(0,!0),$t.UZERO=Mi,Oa=Ca(1),$t.ONE=Oa,d0=Ca(1,!0),$t.UONE=d0,cd=Ca(-1),$t.NEG_ONE=cd,X0=ot(-1,2147483647,!1),$t.MAX_VALUE=X0,Y0=ot(-1,-1,!0),$t.MAX_UNSIGNED_VALUE=Y0,an=ot(0,-2147483648,!1),$t.MIN_VALUE=an,ne=$t.prototype,ne.toInt=function(){return this.unsigned?this.low>>>0:this.low},ne.toNumber=function(){return this.unsigned?(this.high>>>0)*Fa+(this.low>>>0):this.high*Fa+(this.low>>>0)},ne.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(an)){var e=jn(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=jn(Yl(t,6),this.unsigned),a=this,u="";;){var s=a.div(o),l=a.sub(s.mul(o)).toInt()>>>0,i=l.toString(t);if(a=s,a.isZero())return i+u;for(;i.length<6;)i="0"+i;u=""+i+u}},ne.getHighBits=function(){return this.high},ne.getHighBitsUnsigned=function(){return this.high>>>0},ne.getLowBits=function(){return this.low},ne.getLowBitsUnsigned=function(){return this.low>>>0},ne.getNumBitsAbs=function(){if(this.isNegative())return this.eq(an)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},ne.isZero=function(){return this.high===0&&this.low===0},ne.eqz=ne.isZero,ne.isNegative=function(){return!this.unsigned&&this.high<0},ne.isPositive=function(){return this.unsigned||this.high>=0},ne.isOdd=function(){return(this.low&1)===1},ne.isEven=function(){return(this.low&1)===0},ne.equals=function(t){return Xr(t)||(t=gi(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},ne.eq=ne.equals,ne.notEquals=function(t){return!this.eq(t)},ne.neq=ne.notEquals,ne.ne=ne.notEquals,ne.lessThan=function(t){return this.comp(t)<0},ne.lt=ne.lessThan,ne.lessThanOrEqual=function(t){return this.comp(t)<=0},ne.lte=ne.lessThanOrEqual,ne.le=ne.lessThanOrEqual,ne.greaterThan=function(t){return this.comp(t)>0},ne.gt=ne.greaterThan,ne.greaterThanOrEqual=function(t){return this.comp(t)>=0},ne.gte=ne.greaterThanOrEqual,ne.ge=ne.greaterThanOrEqual,ne.compare=function(t){if(Xr(t)||(t=gi(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},ne.comp=ne.compare,ne.negate=function(){return!this.unsigned&&this.eq(an)?an:this.not().add(Oa)},ne.neg=ne.negate,ne.add=function(t){Xr(t)||(t=gi(t));var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,o=this.low&65535,a=t.high>>>16,u=t.high&65535,s=t.low>>>16,l=t.low&65535,i=0,c=0,f=0,d=0;return d+=o+l,f+=d>>>16,d&=65535,f+=n+s,c+=f>>>16,f&=65535,c+=r+u,i+=c>>>16,c&=65535,i+=e+a,i&=65535,ot(f<<16|d,i<<16|c,this.unsigned)},ne.subtract=function(t){return Xr(t)||(t=gi(t)),this.add(t.neg())},ne.sub=ne.subtract,ne.multiply=function(t){if(this.isZero())return this;if(Xr(t)||(t=gi(t)),En){var e=En.mul(this.low,this.high,t.low,t.high);return ot(e,En.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?Mi:Vn;if(this.eq(an))return t.isOdd()?an:Vn;if(t.eq(an))return this.isOdd()?an:Vn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(f0)&&t.lt(f0))return jn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=this.high&65535,o=this.low>>>16,a=this.low&65535,u=t.high>>>16,s=t.high&65535,l=t.low>>>16,i=t.low&65535,c=0,f=0,d=0,h=0;return h+=a*i,d+=h>>>16,h&=65535,d+=o*i,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=n*i,c+=f>>>16,f&=65535,f+=o*l,c+=f>>>16,f&=65535,f+=a*s,c+=f>>>16,f&=65535,c+=r*i+n*l+o*s+a*u,c&=65535,ot(d<<16|h,c<<16|f,this.unsigned)},ne.mul=ne.multiply,ne.divide=function(t){if(Xr(t)||(t=gi(t)),t.isZero())throw Error("division by zero");if(En){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?En.div_u:En.div_s)(this.low,this.high,t.low,t.high);return ot(e,En.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?Mi:Vn;var r,n,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return Mi;if(t.gt(this.shru(1)))return d0;o=Mi}else{if(this.eq(an)){if(t.eq(Oa)||t.eq(cd))return an;if(t.eq(an))return Oa;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(Vn)?t.isNegative()?Oa:cd:(n=this.sub(t.mul(r)),o=r.add(n.div(t)),o)}else if(t.eq(an))return this.unsigned?Mi:Vn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=Vn}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),s=u<=48?1:Yl(2,u-48),l=jn(r),i=l.mul(t);i.isNegative()||i.gt(n);)r-=s,l=jn(r,this.unsigned),i=l.mul(t);l.isZero()&&(l=Oa),o=o.add(l),n=n.sub(i)}return o},ne.div=ne.divide,ne.modulo=function(t){if(Xr(t)||(t=gi(t)),En){var e=(this.unsigned?En.rem_u:En.rem_s)(this.low,this.high,t.low,t.high);return ot(e,En.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},ne.mod=ne.modulo,ne.rem=ne.modulo,ne.not=function(){return ot(~this.low,~this.high,this.unsigned)},ne.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},ne.clz=ne.countLeadingZeros,ne.countTrailingZeros=function(){return this.low?R2(this.low):R2(this.high)+32},ne.ctz=ne.countTrailingZeros,ne.and=function(t){return Xr(t)||(t=gi(t)),ot(this.low&t.low,this.high&t.high,this.unsigned)},ne.or=function(t){return Xr(t)||(t=gi(t)),ot(this.low|t.low,this.high|t.high,this.unsigned)},ne.xor=function(t){return Xr(t)||(t=gi(t)),ot(this.low^t.low,this.high^t.high,this.unsigned)},ne.shiftLeft=function(t){return Xr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ot(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):ot(0,this.low<<t-32,this.unsigned)},ne.shl=ne.shiftLeft,ne.shiftRight=function(t){return Xr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ot(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):ot(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},ne.shr=ne.shiftRight,ne.shiftRightUnsigned=function(t){return Xr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?ot(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?ot(this.high,0,this.unsigned):ot(this.high>>>t-32,0,this.unsigned)},ne.shru=ne.shiftRightUnsigned,ne.shr_u=ne.shiftRightUnsigned,ne.rotateLeft=function(t){var e;return Xr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?ot(this.high,this.low,this.unsigned):t<32?(e=32-t,ot(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,ot(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},ne.rotl=ne.rotateLeft,ne.rotateRight=function(t){var e;return Xr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?ot(this.high,this.low,this.unsigned):t<32?(e=32-t,ot(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,ot(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},ne.rotr=ne.rotateRight,ne.toSigned=function(){return this.unsigned?ot(this.low,this.high,!1):this},ne.toUnsigned=function(){return this.unsigned?this:ot(this.low,this.high,!0)},ne.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},ne.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},ne.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},$t.fromBytes=function(t,e,r){return r?$t.fromBytesLE(t,e):$t.fromBytesBE(t,e)},$t.fromBytesLE=function(t,e){return new $t(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},$t.fromBytesBE=function(t,e){return new $t(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},$o=$t}),B,Om=Y(()=>{B={},B.Offset,B.Table,B.SIZEOF_SHORT=2,B.SIZEOF_INT=4,B.FILE_IDENTIFIER_LENGTH=4,B.SIZE_PREFIX_LENGTH=4,B.Encoding={UTF8_BYTES:1,UTF16_STRING:2},B.int32=new Int32Array(2),B.float32=new Float32Array(B.int32.buffer),B.float64=new Float64Array(B.int32.buffer),B.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,B.Long=function(t,e){this.low=t|0,this.high=e|0},B.Long.create=function(t,e){return t==0&&e==0?B.Long.ZERO:new B.Long(t,e)},B.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},B.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},B.Long.ZERO=new B.Long(0,0),B.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=B.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},B.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},B.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},B.Builder.prototype.dataBuffer=function(){return this.bb},B.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},B.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<r+t+e;){var n=this.bb.capacity();this.bb=B.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(r)},B.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},B.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},B.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},B.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},B.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},B.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},B.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},B.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},B.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},B.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},B.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},B.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},B.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},B.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},B.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},B.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},B.Builder.prototype.addFieldInt64=function(t,e,r){(this.force_defaults||!e.equals(r))&&(this.addInt64(e),this.slot(t))},B.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},B.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},B.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},B.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},B.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},B.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},B.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},B.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},B.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,n=B.ByteBuffer.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n},B.Builder.prototype.addOffset=function(t){this.prep(B.SIZEOF_INT,0),this.writeInt32(this.offset()-t+B.SIZEOF_INT)},B.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},B.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var r=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var n=2;this.addInt16(t-this.object_start);var o=(r+n)*B.SIZEOF_SHORT;this.addInt16(o);var a=0,u=this.space;e:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(s)){for(var l=B.SIZEOF_SHORT;l<o;l+=B.SIZEOF_SHORT)if(this.bb.readInt16(u+l)!=this.bb.readInt16(s+l))continue e;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},B.Builder.prototype.finish=function(t,e,r){var n=r?B.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,B.SIZEOF_INT+B.FILE_IDENTIFIER_LENGTH+n),o.length!=B.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+B.FILE_IDENTIFIER_LENGTH);for(var a=B.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(o.charCodeAt(a))}this.prep(this.minalign,B.SIZEOF_INT+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},B.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},B.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,n=r-this.bb.readInt32(r),o=this.bb.readInt16(n+e)!=0;if(!o)throw new Error("FlatBuffers: field "+e+" must be set")},B.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep(B.SIZEOF_INT,t*e),this.prep(r,t*e)},B.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},B.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],r=0;r<t.length;){var n,o=t.charCodeAt(r++);if(o<55296||o>=56320)n=o;else{var a=t.charCodeAt(r++);n=(o<<10)+a+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(n&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var r=0,u=this.space,s=this.bb.bytes();r<e.length;r++)s[u++]=e[r];return this.endVector()},B.Builder.prototype.createLong=function(t,e){return B.Long.create(t,e)},B.ByteBuffer=function(t){this.bytes_=t,this.position_=0},B.ByteBuffer.allocate=function(t){return new B.ByteBuffer(new Uint8Array(t))},B.ByteBuffer.prototype.clear=function(){this.position_=0},B.ByteBuffer.prototype.bytes=function(){return this.bytes_},B.ByteBuffer.prototype.position=function(){return this.position_},B.ByteBuffer.prototype.setPosition=function(t){this.position_=t},B.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},B.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},B.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},B.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},B.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},B.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},B.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},B.ByteBuffer.prototype.readInt64=function(t){return new B.Long(this.readInt32(t),this.readInt32(t+4))},B.ByteBuffer.prototype.readUint64=function(t){return new B.Long(this.readUint32(t),this.readUint32(t+4))},B.ByteBuffer.prototype.readFloat32=function(t){return B.int32[0]=this.readInt32(t),B.float32[0]},B.ByteBuffer.prototype.readFloat64=function(t){return B.int32[B.isLittleEndian?0:1]=this.readInt32(t),B.int32[B.isLittleEndian?1:0]=this.readInt32(t+4),B.float64[0]},B.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},B.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},B.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},B.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},B.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},B.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},B.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},B.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},B.ByteBuffer.prototype.writeFloat32=function(t,e){B.float32[0]=e,this.writeInt32(t,B.int32[0])},B.ByteBuffer.prototype.writeFloat64=function(t,e){B.float64[0]=e,this.writeInt32(t,B.int32[B.isLittleEndian?0:1]),this.writeInt32(t+4,B.int32[B.isLittleEndian?1:0])},B.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+B.SIZEOF_INT+B.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<B.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+B.SIZEOF_INT+e));return t},B.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},B.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},B.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",o=0;if(t+=B.SIZEOF_INT,e===B.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var a,u=this.readUint8(t+o++);if(u<192)a=u;else{var s=this.readUint8(t+o++);if(u<224)a=(u&31)<<6|s&63;else{var l=this.readUint8(t+o++);if(u<240)a=(u&15)<<12|(s&63)<<6|l&63;else{var i=this.readUint8(t+o++);a=(u&7)<<18|(s&63)<<12|(l&63)<<6|i&63}}}a<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode((a>>10)+55296,(a&1023)+56320))}return n},B.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},B.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+B.SIZEOF_INT},B.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},B.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=B.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+B.FILE_IDENTIFIER_LENGTH);for(var e=0;e<B.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+B.SIZEOF_INT+e))return!1;return!0},B.ByteBuffer.prototype.createLong=function(t,e){return B.Long.create(t,e)}}),vt,Id=Y(()=>{"use strict";Om(),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.INT=2]="INT",u[u.STRING=3]="STRING",u[u.TENSOR=4]="TENSOR",u[u.GRAPH=5]="GRAPH",u[u.FLOATS=6]="FLOATS",u[u.INTS=7]="INTS",u[u.STRINGS=8]="STRINGS",u[u.TENSORS=9]="TENSORS",u[u.GRAPHS=10]="GRAPHS",u[u.SPARSE_TENSOR=11]="SPARSE_TENSOR",u[u.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a=o.AttributeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNKNOWN=0]="UNKNOWN",u[u.VALUE=1]="VALUE",u[u.PARAM=2]="PARAM"))(a=o.DimensionValueType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.UINT8=2]="UINT8",u[u.INT8=3]="INT8",u[u.UINT16=4]="UINT16",u[u.INT16=5]="INT16",u[u.INT32=6]="INT32",u[u.INT64=7]="INT64",u[u.STRING=8]="STRING",u[u.BOOL=9]="BOOL",u[u.FLOAT16=10]="FLOAT16",u[u.DOUBLE=11]="DOUBLE",u[u.UINT32=12]="UINT32",u[u.UINT64=13]="UINT64",u[u.COMPLEX64=14]="COMPLEX64",u[u.COMPLEX128=15]="COMPLEX128",u[u.BFLOAT16=16]="BFLOAT16",u[u.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",u[u.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",u[u.FLOAT8E5M2=19]="FLOAT8E5M2",u[u.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a=o.TensorDataType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(a=o.NodeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.NONE=0]="NONE",u[u.tensor_type=1]="tensor_type",u[u.sequence_type=2]="sequence_type",u[u.map_type=3]="map_type"))(a=o.TypeInfoValue||={})})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsShape(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dim(s,l){let i=this.bb.__offset(this.bb_pos,4);return i?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}dimLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}static startShape(s){s.startObject(1)}static addDim(s,l){s.addFieldOffset(0,l,0)}static createDimVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startDimVector(s,l){s.startVector(4,l,4)}static endShape(s){return s.endObject()}static createShape(s,l){return a.startShape(s),a.addDim(s,l),a.endShape(s)}}o.Shape=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimension(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimension(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}value(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimension(s){s.startObject(2)}static addValue(s,l){s.addFieldOffset(0,l,0)}static addDenotation(s,l){s.addFieldOffset(1,l,0)}static endDimension(s){return s.endObject()}static createDimension(s,l,i){return a.startDimension(s),a.addValue(s,l),a.addDenotation(s,i),a.endDimension(s)}}o.Dimension=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimensionValue(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimensionValue(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dimType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):0}dimValue(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}dimParam(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimensionValue(s){s.startObject(3)}static addDimType(s,l){s.addFieldInt8(0,l,0)}static addDimValue(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static addDimParam(s,l){s.addFieldOffset(2,l,0)}static endDimensionValue(s){return s.endObject()}static createDimensionValue(s,l,i,c){return a.startDimensionValue(s),a.addDimType(s,l),a.addDimValue(s,i),a.addDimParam(s,c),a.endDimensionValue(s)}}o.DimensionValue=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensorTypeAndShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorTypeAndShape(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}shape(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(s){s.startObject(2)}static addElemType(s,l){s.addFieldInt32(0,l,0)}static addShape(s,l){s.addFieldOffset(1,l,0)}static endTensorTypeAndShape(s){return s.endObject()}static createTensorTypeAndShape(s,l,i){return a.startTensorTypeAndShape(s),a.addElemType(s,l),a.addShape(s,i),a.endTensorTypeAndShape(s)}}o.TensorTypeAndShape=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsMapType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMapType(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}keyType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}valueType(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(s){s.startObject(2)}static addKeyType(s,l){s.addFieldInt32(0,l,0)}static addValueType(s,l){s.addFieldOffset(1,l,0)}static endMapType(s){return s.endObject()}static createMapType(s,l,i){return a.startMapType(s),a.addKeyType(s,l),a.addValueType(s,i),a.endMapType(s)}}o.MapType=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSequenceType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSequenceType(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(s){s.startObject(1)}static addElemType(s,l){s.addFieldOffset(0,l,0)}static endSequenceType(s){return s.endObject()}static createSequenceType(s,l){return a.startSequenceType(s),a.addElemType(s,l),a.endSequenceType(s)}}o.SequenceType=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(s,l,i,c){return s.prep(4,12),s.writeInt32(c),s.writeInt32(i),s.writeInt32(l),s.offset()}}o.EdgeEnd=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNodeEdge(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNodeEdge(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndex(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readUint32(this.bb_pos+s):0}inputEdges(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+s*12,this.bb):null}inputEdgesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}outputEdges(s,l){let i=this.bb.__offset(this.bb_pos,8);return i?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+s*12,this.bb):null}outputEdgesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNodeEdge(s){s.startObject(3)}static addNodeIndex(s,l){s.addFieldInt32(0,l,0)}static addInputEdges(s,l){s.addFieldOffset(1,l,0)}static startInputEdgesVector(s,l){s.startVector(12,l,4)}static addOutputEdges(s,l){s.addFieldOffset(2,l,0)}static startOutputEdgesVector(s,l){s.startVector(12,l,4)}static endNodeEdge(s){return s.endObject()}static createNodeEdge(s,l,i,c){return a.startNodeEdge(s),a.addNodeIndex(s,l),a.addInputEdges(s,i),a.addOutputEdges(s,c),a.endNodeEdge(s)}}o.NodeEdge=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNode(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNode(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}sinceVersion(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}index(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readUint32(this.bb_pos+s):0}opType(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.readInt32(this.bb_pos+s):0}executionProviderType(s){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,s):null}inputs(s,l){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}attributes(s,l){let i=this.bb.__offset(this.bb_pos,24);return i?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}attributesLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCounts(s){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+s*4):0}inputArgCountsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCountsArray(){let s=this.bb.__offset(this.bb_pos,26);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}implicitInputs(s,l){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}implicitInputsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNode(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDomain(s,l){s.addFieldOffset(2,l,0)}static addSinceVersion(s,l){s.addFieldInt32(3,l,0)}static addIndex(s,l){s.addFieldInt32(4,l,0)}static addOpType(s,l){s.addFieldOffset(5,l,0)}static addType(s,l){s.addFieldInt32(6,l,0)}static addExecutionProviderType(s,l){s.addFieldOffset(7,l,0)}static addInputs(s,l){s.addFieldOffset(8,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(9,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addAttributes(s,l){s.addFieldOffset(10,l,0)}static createAttributesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startAttributesVector(s,l){s.startVector(4,l,4)}static addInputArgCounts(s,l){s.addFieldOffset(11,l,0)}static createInputArgCountsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addInt32(l[i]);return s.endVector()}static startInputArgCountsVector(s,l){s.startVector(4,l,4)}static addImplicitInputs(s,l){s.addFieldOffset(12,l,0)}static createImplicitInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startImplicitInputsVector(s,l){s.startVector(4,l,4)}static endNode(s){return s.endObject()}static createNode(s,l,i,c,f,d,h,p,m,v,x,y,_,I){return a.startNode(s),a.addName(s,l),a.addDocString(s,i),a.addDomain(s,c),a.addSinceVersion(s,f),a.addIndex(s,d),a.addOpType(s,h),a.addType(s,p),a.addExecutionProviderType(s,m),a.addInputs(s,v),a.addOutputs(s,x),a.addAttributes(s,y),a.addInputArgCounts(s,_),a.addImplicitInputs(s,I),a.endNode(s)}}o.Node=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsValueInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsValueInfo(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(s){s.startObject(3)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldOffset(2,l,0)}static endValueInfo(s){return s.endObject()}static createValueInfo(s,l,i,c){return a.startValueInfo(s),a.addName(s,l),a.addDocString(s,i),a.addType(s,c),a.endValueInfo(s)}}o.ValueInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTypeInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTypeInfo(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}denotation(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}valueType(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readUint8(this.bb_pos+s):0}value(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(s,this.bb_pos+l):null}static startTypeInfo(s){s.startObject(3)}static addDenotation(s,l){s.addFieldOffset(0,l,0)}static addValueType(s,l){s.addFieldInt8(1,l,0)}static addValue(s,l){s.addFieldOffset(2,l,0)}static endTypeInfo(s){return s.endObject()}static createTypeInfo(s,l,i,c){return a.startTypeInfo(s),a.addDenotation(s,l),a.addValueType(s,i),a.addValue(s,c),a.endTypeInfo(s)}}o.TypeInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsOperatorSetId(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsOperatorSetId(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}domain(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}version(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}static startOperatorSetId(s){s.startObject(2)}static addDomain(s,l){s.addFieldOffset(0,l,0)}static addVersion(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static endOperatorSetId(s){return s.endObject()}static createOperatorSetId(s,l,i){return a.startOperatorSetId(s),a.addDomain(s,l),a.addVersion(s,i),a.endOperatorSetId(s)}}o.OperatorSetId=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensor(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}dataType(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}rawData(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+s):0}rawDataLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}rawDataArray(){let s=this.bb.__offset(this.bb_pos,12);return s?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}stringData(s,l){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}stringDataLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}static startTensor(s){s.startObject(6)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static addDataType(s,l){s.addFieldInt32(3,l,0)}static addRawData(s,l){s.addFieldOffset(4,l,0)}static createRawDataVector(s,l){s.startVector(1,l.length,1);for(let i=l.length-1;i>=0;i--)s.addInt8(l[i]);return s.endVector()}static startRawDataVector(s,l){s.startVector(1,l,1)}static addStringData(s,l){s.addFieldOffset(5,l,0)}static createStringDataVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startStringDataVector(s,l){s.startVector(4,l,4)}static endTensor(s){return s.endObject()}static createTensor(s,l,i,c,f,d,h){return a.startTensor(s),a.addName(s,l),a.addDocString(s,i),a.addDims(s,c),a.addDataType(s,f),a.addRawData(s,d),a.addStringData(s,h),a.endTensor(s)}}o.Tensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSparseTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensor(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}values(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSparseTensor(s){s.startObject(3)}static addValues(s,l){s.addFieldOffset(0,l,0)}static addIndices(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static endSparseTensor(s){return s.endObject()}static createSparseTensor(s,l,i,c){return a.startSparseTensor(s),a.addValues(s,l),a.addIndices(s,i),a.addDims(s,c),a.endSparseTensor(s)}}o.SparseTensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsAttribute(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsAttribute(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):0}f(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readFloat32(this.bb_pos+s):0}i(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}s(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}t(s){let l=this.bb.__offset(this.bb_pos,16);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+s*4):0}floatsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}floatsArray(){let s=this.bb.__offset(this.bb_pos,20);return s?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}ints(s){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}intsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}strings(s,l){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}stringsLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}tensors(s,l){let i=this.bb.__offset(this.bb_pos,26);return i?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}tensorsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}graphs(s,l){let i=this.bb.__offset(this.bb_pos,28);return i?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}graphsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startAttribute(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldInt32(2,l,0)}static addF(s,l){s.addFieldFloat32(3,l,0)}static addI(s,l){s.addFieldInt64(4,l,s.createLong(0,0))}static addS(s,l){s.addFieldOffset(5,l,0)}static addT(s,l){s.addFieldOffset(6,l,0)}static addG(s,l){s.addFieldOffset(7,l,0)}static addFloats(s,l){s.addFieldOffset(8,l,0)}static createFloatsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addFloat32(l[i]);return s.endVector()}static startFloatsVector(s,l){s.startVector(4,l,4)}static addInts(s,l){s.addFieldOffset(9,l,0)}static createIntsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startIntsVector(s,l){s.startVector(8,l,8)}static addStrings(s,l){s.addFieldOffset(10,l,0)}static createStringsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startStringsVector(s,l){s.startVector(4,l,4)}static addTensors(s,l){s.addFieldOffset(11,l,0)}static createTensorsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startTensorsVector(s,l){s.startVector(4,l,4)}static addGraphs(s,l){s.addFieldOffset(12,l,0)}static createGraphsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startGraphsVector(s,l){s.startVector(4,l,4)}static endAttribute(s){return s.endObject()}static createAttribute(s,l,i,c,f,d,h,p,m,v,x,y,_,I){return a.startAttribute(s),a.addName(s,l),a.addDocString(s,i),a.addType(s,c),a.addF(s,f),a.addI(s,d),a.addS(s,h),a.addT(s,p),a.addG(s,m),a.addFloats(s,v),a.addInts(s,x),a.addStrings(s,y),a.addTensors(s,_),a.addGraphs(s,I),a.endAttribute(s)}}o.Attribute=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsGraph(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsGraph(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}initializers(s,l){let i=this.bb.__offset(this.bb_pos,4);return i?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}initializersLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeArgs(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodeArgsLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}nodes(s,l){let i=this.bb.__offset(this.bb_pos,8);return i?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}maxNodeIndex(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readUint32(this.bb_pos+s):0}nodeEdges(s,l){let i=this.bb.__offset(this.bb_pos,12);return i?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodeEdgesLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}inputs(s,l){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__vector_len(this.bb_pos+s):0}sparseInitializers(s,l){let i=this.bb.__offset(this.bb_pos,18);return i?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}sparseInitializersLength(){let s=this.bb.__offset(this.bb_pos,18);return s?this.bb.__vector_len(this.bb_pos+s):0}static startGraph(s){s.startObject(8)}static addInitializers(s,l){s.addFieldOffset(0,l,0)}static createInitializersVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInitializersVector(s,l){s.startVector(4,l,4)}static addNodeArgs(s,l){s.addFieldOffset(1,l,0)}static createNodeArgsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodeArgsVector(s,l){s.startVector(4,l,4)}static addNodes(s,l){s.addFieldOffset(2,l,0)}static createNodesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodesVector(s,l){s.startVector(4,l,4)}static addMaxNodeIndex(s,l){s.addFieldInt32(3,l,0)}static addNodeEdges(s,l){s.addFieldOffset(4,l,0)}static createNodeEdgesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodeEdgesVector(s,l){s.startVector(4,l,4)}static addInputs(s,l){s.addFieldOffset(5,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(6,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addSparseInitializers(s,l){s.addFieldOffset(7,l,0)}static createSparseInitializersVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startSparseInitializersVector(s,l){s.startVector(4,l,4)}static endGraph(s){return s.endObject()}static createGraph(s,l,i,c,f,d,h,p,m){return a.startGraph(s),a.addInitializers(s,l),a.addNodeArgs(s,i),a.addNodes(s,c),a.addMaxNodeIndex(s,f),a.addNodeEdges(s,d),a.addInputs(s,h),a.addOutputs(s,p),a.addSparseInitializers(s,m),a.endGraph(s)}}o.Graph=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsModel(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsModel(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}irVersion(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}opsetImport(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}opsetImportLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}producerName(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}producerVersion(s){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,s):null}modelVersion(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}docString(s){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,s):null}graph(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,s):null}static startModel(s){s.startObject(9)}static addIrVersion(s,l){s.addFieldInt64(0,l,s.createLong(0,0))}static addOpsetImport(s,l){s.addFieldOffset(1,l,0)}static createOpsetImportVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOpsetImportVector(s,l){s.startVector(4,l,4)}static addProducerName(s,l){s.addFieldOffset(2,l,0)}static addProducerVersion(s,l){s.addFieldOffset(3,l,0)}static addDomain(s,l){s.addFieldOffset(4,l,0)}static addModelVersion(s,l){s.addFieldInt64(5,l,s.createLong(0,0))}static addDocString(s,l){s.addFieldOffset(6,l,0)}static addGraph(s,l){s.addFieldOffset(7,l,0)}static addGraphDocString(s,l){s.addFieldOffset(8,l,0)}static endModel(s){return s.endObject()}static createModel(s,l,i,c,f,d,h,p,m,v){return a.startModel(s),a.addIrVersion(s,l),a.addOpsetImport(s,i),a.addProducerName(s,c),a.addProducerVersion(s,f),a.addDomain(s,d),a.addModelVersion(s,h),a.addDocString(s,p),a.addGraph(s,m),a.addGraphDocString(s,v),a.endModel(s)}}o.Model=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsKernelCreateInfos(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKernelCreateInfos(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndices(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+s*4):0}nodeIndicesLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeIndicesArray(){let s=this.bb.__offset(this.bb_pos,4);return s?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}kernelDefHashes(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startKernelCreateInfos(s){s.startObject(2)}static addNodeIndices(s,l){s.addFieldOffset(0,l,0)}static createNodeIndicesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addInt32(l[i]);return s.endVector()}static startNodeIndicesVector(s,l){s.startVector(4,l,4)}static addKernelDefHashes(s,l){s.addFieldOffset(1,l,0)}static createKernelDefHashesVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startKernelDefHashesVector(s,l){s.startVector(8,l,8)}static endKernelCreateInfos(s){return s.endObject()}static createKernelCreateInfos(s,l,i){return a.startKernelCreateInfos(s),a.addNodeIndices(s,l),a.addKernelDefHashes(s,i),a.endKernelCreateInfos(s)}}o.KernelCreateInfos=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSubGraphSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSubGraphSessionState(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}graphId(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(s){s.startObject(2)}static addGraphId(s,l){s.addFieldOffset(0,l,0)}static addSessionState(s,l){s.addFieldOffset(1,l,0)}static endSubGraphSessionState(s){let l=s.endObject();return s.requiredField(l,4),l}static createSubGraphSessionState(s,l,i){return a.startSubGraphSessionState(s),a.addGraphId(s,l),a.addSessionState(s,i),a.endSubGraphSessionState(s)}}o.SubGraphSessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSessionState(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}kernels(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}subGraphSessionStatesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSessionState(s){s.startObject(2)}static addKernels(s,l){s.addFieldOffset(0,l,0)}static addSubGraphSessionStates(s,l){s.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startSubGraphSessionStatesVector(s,l){s.startVector(4,l,4)}static endSessionState(s){return s.endObject()}static createSessionState(s,l,i){return a.startSessionState(s),a.addKernels(s,l),a.addSubGraphSessionStates(s,i),a.endSessionState(s)}}o.SessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsInferenceSession(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInferenceSession(s,l){return s.setPosition(s.position()+B.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static bufferHasIdentifier(s){return s.__has_identifier("ORTM")}ortVersion(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}model(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(s){s.startObject(3)}static addOrtVersion(s,l){s.addFieldOffset(0,l,0)}static addModel(s,l){s.addFieldOffset(1,l,0)}static addSessionState(s,l){s.addFieldOffset(2,l,0)}static endInferenceSession(s){return s.endObject()}static finishInferenceSessionBuffer(s,l){s.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(s,l){s.finish(l,"ORTM",!0)}static createInferenceSession(s,l,i,c){return a.startInferenceSession(s),a.addOrtVersion(s,l),a.addModel(s,i),a.addSessionState(s,c),a.endInferenceSession(s)}}o.InferenceSession=a})(n=r.fbs||={})})(e=t.experimental||={})})(vt||={})}),CV=jt((t,e)=>{"use strict";e.exports=r;function r(n,o){for(var a=new Array(arguments.length-1),u=0,s=2,l=!0;s<arguments.length;)a[u++]=arguments[s++];return new Promise(function(i,c){a[u]=function(f){if(l)if(l=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];i.apply(null,d)}};try{n.apply(o||null,a)}catch(f){l&&(l=!1,c(f))}})}}),OV=jt(t=>{"use strict";var e=t;e.length=function(u){var s=u.length;if(!s)return 0;for(var l=0;--s%4>1&&u.charAt(s)==="=";)++l;return Math.ceil(u.length*3)/4-l};var r=new Array(64),n=new Array(123);for(o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;var o;e.encode=function(u,s,l){for(var i=null,c=[],f=0,d=0,h;s<l;){var p=u[s++];switch(d){case 0:c[f++]=r[p>>2],h=(p&3)<<4,d=1;break;case 1:c[f++]=r[h|p>>4],h=(p&15)<<2,d=2;break;case 2:c[f++]=r[h|p>>6],c[f++]=r[p&63],d=0;break}f>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,c)),f=0)}return d&&(c[f++]=r[h],c[f++]=61,d===1&&(c[f++]=61)),i?(f&&i.push(String.fromCharCode.apply(String,c.slice(0,f))),i.join("")):String.fromCharCode.apply(String,c.slice(0,f))};var a="invalid encoding";e.decode=function(u,s,l){for(var i=l,c=0,f,d=0;d<u.length;){var h=u.charCodeAt(d++);if(h===61&&c>1)break;if((h=n[h])===void 0)throw Error(a);switch(c){case 0:f=h,c=1;break;case 1:s[l++]=f<<2|(h&48)>>4,f=h,c=2;break;case 2:s[l++]=(f&15)<<4|(h&60)>>2,f=h,c=3;break;case 3:s[l++]=(f&3)<<6|h,c=0;break}}if(c===1)throw Error(a);return l-i},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}),PV=jt((t,e)=>{"use strict";e.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,o,a){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:o,ctx:a||this}),this},r.prototype.off=function(n,o){if(n===void 0)this._listeners={};else if(o===void 0)this._listeners[n]=[];else for(var a=this._listeners[n],u=0;u<a.length;)a[u].fn===o?a.splice(u,1):++u;return this},r.prototype.emit=function(n){var o=this._listeners[n];if(o){for(var a=[],u=1;u<arguments.length;)a.push(arguments[u++]);for(u=0;u<o.length;)o[u].fn.apply(o[u++].ctx,a)}return this}}),MV=jt((t,e)=>{"use strict";e.exports=r(r);function r(s){return typeof Float32Array<"u"?function(){var l=new Float32Array([-0]),i=new Uint8Array(l.buffer),c=i[3]===128;function f(m,v,x){l[0]=m,v[x]=i[0],v[x+1]=i[1],v[x+2]=i[2],v[x+3]=i[3]}function d(m,v,x){l[0]=m,v[x]=i[3],v[x+1]=i[2],v[x+2]=i[1],v[x+3]=i[0]}s.writeFloatLE=c?f:d,s.writeFloatBE=c?d:f;function h(m,v){return i[0]=m[v],i[1]=m[v+1],i[2]=m[v+2],i[3]=m[v+3],l[0]}function p(m,v){return i[3]=m[v],i[2]=m[v+1],i[1]=m[v+2],i[0]=m[v+3],l[0]}s.readFloatLE=c?h:p,s.readFloatBE=c?p:h}():function(){function l(c,f,d,h){var p=f<0?1:0;if(p&&(f=-f),f===0)c(1/f>0?0:2147483648,d,h);else if(isNaN(f))c(2143289344,d,h);else if(f>34028234663852886e22)c((p<<31|2139095040)>>>0,d,h);else if(f<11754943508222875e-54)c((p<<31|Math.round(f/1401298464324817e-60))>>>0,d,h);else{var m=Math.floor(Math.log(f)/Math.LN2),v=Math.round(f*Math.pow(2,-m)*8388608)&8388607;c((p<<31|m+127<<23|v)>>>0,d,h)}}s.writeFloatLE=l.bind(null,n),s.writeFloatBE=l.bind(null,o);function i(c,f,d){var h=c(f,d),p=(h>>31)*2+1,m=h>>>23&255,v=h&8388607;return m===255?v?NaN:p*(1/0):m===0?p*1401298464324817e-60*v:p*Math.pow(2,m-150)*(v+8388608)}s.readFloatLE=i.bind(null,a),s.readFloatBE=i.bind(null,u)}(),typeof Float64Array<"u"?function(){var l=new Float64Array([-0]),i=new Uint8Array(l.buffer),c=i[7]===128;function f(m,v,x){l[0]=m,v[x]=i[0],v[x+1]=i[1],v[x+2]=i[2],v[x+3]=i[3],v[x+4]=i[4],v[x+5]=i[5],v[x+6]=i[6],v[x+7]=i[7]}function d(m,v,x){l[0]=m,v[x]=i[7],v[x+1]=i[6],v[x+2]=i[5],v[x+3]=i[4],v[x+4]=i[3],v[x+5]=i[2],v[x+6]=i[1],v[x+7]=i[0]}s.writeDoubleLE=c?f:d,s.writeDoubleBE=c?d:f;function h(m,v){return i[0]=m[v],i[1]=m[v+1],i[2]=m[v+2],i[3]=m[v+3],i[4]=m[v+4],i[5]=m[v+5],i[6]=m[v+6],i[7]=m[v+7],l[0]}function p(m,v){return i[7]=m[v],i[6]=m[v+1],i[5]=m[v+2],i[4]=m[v+3],i[3]=m[v+4],i[2]=m[v+5],i[1]=m[v+6],i[0]=m[v+7],l[0]}s.readDoubleLE=c?h:p,s.readDoubleBE=c?p:h}():function(){function l(c,f,d,h,p,m){var v=h<0?1:0;if(v&&(h=-h),h===0)c(0,p,m+f),c(1/h>0?0:2147483648,p,m+d);else if(isNaN(h))c(0,p,m+f),c(2146959360,p,m+d);else if(h>17976931348623157e292)c(0,p,m+f),c((v<<31|2146435072)>>>0,p,m+d);else{var x;if(h<22250738585072014e-324)x=h/5e-324,c(x>>>0,p,m+f),c((v<<31|x/4294967296)>>>0,p,m+d);else{var y=Math.floor(Math.log(h)/Math.LN2);y===1024&&(y=1023),x=h*Math.pow(2,-y),c(x*4503599627370496>>>0,p,m+f),c((v<<31|y+1023<<20|x*1048576&1048575)>>>0,p,m+d)}}}s.writeDoubleLE=l.bind(null,n,0,4),s.writeDoubleBE=l.bind(null,o,4,0);function i(c,f,d,h,p){var m=c(h,p+f),v=c(h,p+d),x=(v>>31)*2+1,y=v>>>20&2047,_=4294967296*(v&1048575)+m;return y===2047?_?NaN:x*(1/0):y===0?x*5e-324*_:x*Math.pow(2,y-1075)*(_+4503599627370496)}s.readDoubleLE=i.bind(null,a,0,4),s.readDoubleBE=i.bind(null,u,4,0)}(),s}function n(s,l,i){l[i]=s&255,l[i+1]=s>>>8&255,l[i+2]=s>>>16&255,l[i+3]=s>>>24}function o(s,l,i){l[i]=s>>>24,l[i+1]=s>>>16&255,l[i+2]=s>>>8&255,l[i+3]=s&255}function a(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16|s[l+3]<<24)>>>0}function u(s,l){return(s[l]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3])>>>0}}),NV=jt((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),RV=jt(t=>{"use strict";var e=t;e.length=function(r){for(var n=0,o=0,a=0;a<r.length;++a)o=r.charCodeAt(a),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(r.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},e.read=function(r,n,o){var a=o-n;if(a<1)return"";for(var u=null,s=[],l=0,i;n<o;)i=r[n++],i<128?s[l++]=i:i>191&&i<224?s[l++]=(i&31)<<6|r[n++]&63:i>239&&i<365?(i=((i&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,s[l++]=55296+(i>>10),s[l++]=56320+(i&1023)):s[l++]=(i&15)<<12|(r[n++]&63)<<6|r[n++]&63,l>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),l=0);return u?(l&&u.push(String.fromCharCode.apply(String,s.slice(0,l))),u.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(r,n,o){for(var a=o,u,s,l=0;l<r.length;++l)u=r.charCodeAt(l),u<128?n[o++]=u:u<2048?(n[o++]=u>>6|192,n[o++]=u&63|128):(u&64512)===55296&&((s=r.charCodeAt(l+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++l,n[o++]=u>>18|240,n[o++]=u>>12&63|128,n[o++]=u>>6&63|128,n[o++]=u&63|128):(n[o++]=u>>12|224,n[o++]=u>>6&63|128,n[o++]=u&63|128);return o-a}}),FV=jt((t,e)=>{"use strict";e.exports=r;function r(n,o,a){var u=a||8192,s=u>>>1,l=null,i=u;return function(c){if(c<1||c>s)return n(c);i+c>u&&(l=n(u),i=0);var f=o.call(l,i,i+=c);return i&7&&(i=(i|7)+1),f}}}),kV=jt((t,e)=>{"use strict";e.exports=n;var r=La();function n(s,l){this.lo=s>>>0,this.hi=l>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return o;var l=s<0;l&&(s=-s);var i=s>>>0,c=(s-i)/4294967296>>>0;return l&&(c=~c>>>0,i=~i>>>0,++i>4294967295&&(i=0,++c>4294967295&&(c=0))),new n(i,c)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):o},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var l=~this.lo+1>>>0,i=~this.hi>>>0;return l||(i=i+1>>>0),-(l+i*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var u=String.prototype.charCodeAt;n.fromHash=function(s){return s===a?o:new n((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?l===0?s<16384?s<128?1:2:s<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:i<128?9:10}}),La=jt(t=>{"use strict";var e=t;e.asPromise=CV(),e.base64=OV(),e.EventEmitter=PV(),e.float=MV(),e.inquire=NV(),e.utf8=RV(),e.pool=FV(),e.LongBits=kV(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},e.isString=function(o){return typeof o=="string"||o instanceof String},e.isObject=function(o){return o&&typeof o=="object"},e.isset=e.isSet=function(o,a){var u=o[a];return u!=null&&o.hasOwnProperty(a)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(o){return typeof o=="number"?e.Buffer?e._Buffer_allocUnsafe(o):new e.Array(o):e.Buffer?e._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(o){return o?e.LongBits.from(o).toHash():e.LongBits.zeroHash},e.longFromHash=function(o,a){var u=e.LongBits.fromHash(o);return e.Long?e.Long.fromBits(u.lo,u.hi,a):u.toNumber(!!a)};function r(o,a,u){for(var s=Object.keys(a),l=0;l<s.length;++l)(o[s[l]]===void 0||!u)&&(o[s[l]]=a[s[l]]);return o}e.merge=r,e.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(o){function a(u,s){if(!(this instanceof a))return new a(u,s);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&r(this,s)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(o){for(var a={},u=0;u<o.length;++u)a[o[u]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(a[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(o){return function(a){for(var u=0;u<o.length;++u)o[u]!==a&&delete this[o[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(a,u){return new o(a,u)},e._Buffer_allocUnsafe=o.allocUnsafe||function(a){return new o(a)}}}),PT=jt((t,e)=>{"use strict";e.exports=c;var r=La(),n,o=r.LongBits,a=r.base64,u=r.utf8;function s(y,_,I){this.fn=y,this.len=_,this.next=void 0,this.val=I}function l(){}function i(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var f=function(){return r.Buffer?function(){return(c.create=function(){return new n})()}:function(){return new c}};c.create=f(),c.alloc=function(y){return new r.Array(y)},r.Array!==Array&&(c.alloc=r.pool(c.alloc,r.Array.prototype.subarray)),c.prototype._push=function(y,_,I){return this.tail=this.tail.next=new s(y,_,I),this.len+=_,this};function d(y,_,I){_[I]=y&255}function h(y,_,I){for(;y>127;)_[I++]=y&127|128,y>>>=7;_[I]=y}function p(y,_){this.len=y,this.next=void 0,this.val=_}p.prototype=Object.create(s.prototype),p.prototype.fn=h,c.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new p((y=y>>>0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},c.prototype.int32=function(y){return y<0?this._push(m,10,o.fromNumber(y)):this.uint32(y)},c.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)};function m(y,_,I){for(;y.hi;)_[I++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[I++]=y.lo&127|128,y.lo=y.lo>>>7;_[I++]=y.lo}c.prototype.uint64=function(y){var _=o.from(y);return this._push(m,_.length(),_)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(y){var _=o.from(y).zzEncode();return this._push(m,_.length(),_)},c.prototype.bool=function(y){return this._push(d,1,y?1:0)};function v(y,_,I){_[I]=y&255,_[I+1]=y>>>8&255,_[I+2]=y>>>16&255,_[I+3]=y>>>24}c.prototype.fixed32=function(y){return this._push(v,4,y>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(y){var _=o.from(y);return this._push(v,4,_.lo)._push(v,4,_.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(y){return this._push(r.float.writeFloatLE,4,y)},c.prototype.double=function(y){return this._push(r.float.writeDoubleLE,8,y)};var x=r.Array.prototype.set?function(y,_,I){_.set(y,I)}:function(y,_,I){for(var C=0;C<y.length;++C)_[I+C]=y[C]};c.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(d,1,0);if(r.isString(y)){var I=c.alloc(_=a.length(y));a.decode(y,I,0),y=I}return this.uint32(_)._push(x,_,y)},c.prototype.string=function(y){var _=u.length(y);return _?this.uint32(_)._push(u.write,_,y):this._push(d,1,0)},c.prototype.fork=function(){return this.states=new i(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var y=this.head,_=this.tail,I=this.len;return this.reset().uint32(I),I&&(this.tail.next=y.next,this.tail=_,this.len+=I),this},c.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),I=0;y;)y.fn(y.val,_,I),I+=y.len,y=y.next;return _},c._configure=function(y){n=y,c.create=f(),n._configure()}}),LV=jt((t,e)=>{"use strict";e.exports=o;var r=PT();(o.prototype=Object.create(r.prototype)).constructor=o;var n=La();function o(){r.call(this)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(u,s,l){s.set(u,l)}:function(u,s,l){if(u.copy)u.copy(s,l,0,u.length);else for(var i=0;i<u.length;)s[l++]=u[i++]}},o.prototype.bytes=function(u){n.isString(u)&&(u=n._Buffer_from(u,"base64"));var s=u.length>>>0;return this.uint32(s),s&&this._push(o.writeBytesBuffer,s,u),this};function a(u,s,l){u.length<40?n.utf8.write(u,s,l):s.utf8Write?s.utf8Write(u,l):s.write(u,l)}o.prototype.string=function(u){var s=n.Buffer.byteLength(u);return this.uint32(s),s&&this._push(a,s,u),this},o._configure()}),MT=jt((t,e)=>{"use strict";e.exports=s;var r=La(),n,o=r.LongBits,a=r.utf8;function u(h,p){return RangeError("index out of range: "+h.pos+" + "+(p||1)+" > "+h.len)}function s(h){this.buf=h,this.pos=0,this.len=h.length}var l=typeof Uint8Array<"u"?function(h){if(h instanceof Uint8Array||Array.isArray(h))return new s(h);throw Error("illegal buffer")}:function(h){if(Array.isArray(h))return new s(h);throw Error("illegal buffer")},i=function(){return r.Buffer?function(h){return(s.create=function(p){return r.Buffer.isBuffer(p)?new n(p):l(p)})(h)}:l};s.create=i(),s.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,s.prototype.uint32=function(){var h=4294967295;return function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return h}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var h=this.uint32();return h>>>1^-(h&1)|0};function c(){var h=new o(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw u(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,h}if(this.len-this.pos>4){for(;p<5;++p)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;p<5;++p){if(this.pos>=this.len)throw u(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function f(h,p){return(h[p-4]|h[p-3]<<8|h[p-2]<<16|h[p-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw u(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var h=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var h=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},s.prototype.bytes=function(){var h=this.uint32(),p=this.pos,m=this.pos+h;if(m>this.len)throw u(this,h);return this.pos+=h,Array.isArray(this.buf)?this.buf.slice(p,m):p===m?new this.buf.constructor(0):this._slice.call(this.buf,p,m)},s.prototype.string=function(){var h=this.bytes();return a.read(h,0,h.length)},s.prototype.skip=function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw u(this,h);this.pos+=h}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},s._configure=function(h){n=h,s.create=i(),n._configure();var p=r.Long?"toLong":"toNumber";r.merge(s.prototype,{int64:function(){return c.call(this)[p](!1)},uint64:function(){return c.call(this)[p](!0)},sint64:function(){return c.call(this).zzDecode()[p](!1)},fixed64:function(){return d.call(this)[p](!0)},sfixed64:function(){return d.call(this)[p](!1)}})}}),BV=jt((t,e)=>{"use strict";e.exports=o;var r=MT();(o.prototype=Object.create(r.prototype)).constructor=o;var n=La();function o(a){r.call(this,a)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},o._configure()}),$V=jt((t,e)=>{"use strict";e.exports=n;var r=La();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(o,a,u){if(typeof o!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!a,this.responseDelimited=!!u}n.prototype.rpcCall=function o(a,u,s,l,i){if(!l)throw TypeError("request must be specified");var c=this;if(!i)return r.asPromise(o,c,a,u,s,l);if(!c.rpcImpl){setTimeout(function(){i(Error("already ended"))},0);return}try{return c.rpcImpl(a,u[c.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(f,d){if(f)return c.emit("error",f,a),i(f);if(d===null){c.end(!0);return}if(!(d instanceof s))try{d=s[c.responseDelimited?"decodeDelimited":"decode"](d)}catch(h){return c.emit("error",h,a),i(h)}return c.emit("data",d,a),i(null,d)})}catch(f){c.emit("error",f,a),setTimeout(function(){i(f)},0);return}},n.prototype.end=function(o){return this.rpcImpl&&(o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),VV=jt(t=>{"use strict";var e=t;e.Service=$V()}),jV=jt((t,e)=>{"use strict";e.exports={}}),UV=jt(t=>{"use strict";var e=t;e.build="minimal",e.Writer=PT(),e.BufferWriter=LV(),e.Reader=MT(),e.BufferReader=BV(),e.util=La(),e.rpc=VV(),e.roots=jV(),e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()}),HV=jt((t,e)=>{"use strict";e.exports=UV()}),rc=jt((t,e)=>{"use strict";var r=HV(),n=r.Reader,o=r.Writer,a=r.util,u=r.roots.default||(r.roots.default={});u.onnx=function(){var s={};return s.Version=function(){var l={},i=Object.create(l);return i[l[0]="_START_VERSION"]=0,i[l[1]="IR_VERSION_2017_10_10"]=1,i[l[2]="IR_VERSION_2017_10_30"]=2,i[l[3]="IR_VERSION_2017_11_3"]=3,i[l[4]="IR_VERSION_2019_1_22"]=4,i[l[5]="IR_VERSION_2019_3_18"]=5,i[l[6]="IR_VERSION_2019_9_19"]=6,i[l[7]="IR_VERSION_2020_5_8"]=7,i[l[8]="IR_VERSION_2021_7_30"]=8,i[l[9]="IR_VERSION"]=9,i}(),s.AttributeProto=function(){function l(i){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.refAttrName="",l.prototype.docString="",l.prototype.type=0,l.prototype.f=0,l.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.s=a.newBuffer([]),l.prototype.t=null,l.prototype.g=null,l.prototype.sparseTensor=null,l.prototype.tp=null,l.prototype.floats=a.emptyArray,l.prototype.ints=a.emptyArray,l.prototype.strings=a.emptyArray,l.prototype.tensors=a.emptyArray,l.prototype.graphs=a.emptyArray,l.prototype.sparseTensors=a.emptyArray,l.prototype.typeProtos=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.f!=null&&Object.hasOwnProperty.call(i,"f")&&c.uint32(21).float(i.f),i.i!=null&&Object.hasOwnProperty.call(i,"i")&&c.uint32(24).int64(i.i),i.s!=null&&Object.hasOwnProperty.call(i,"s")&&c.uint32(34).bytes(i.s),i.t!=null&&Object.hasOwnProperty.call(i,"t")&&u.onnx.TensorProto.encode(i.t,c.uint32(42).fork()).ldelim(),i.g!=null&&Object.hasOwnProperty.call(i,"g")&&u.onnx.GraphProto.encode(i.g,c.uint32(50).fork()).ldelim(),i.floats!=null&&i.floats.length){c.uint32(58).fork();for(var f=0;f<i.floats.length;++f)c.float(i.floats[f]);c.ldelim()}if(i.ints!=null&&i.ints.length){c.uint32(66).fork();for(var f=0;f<i.ints.length;++f)c.int64(i.ints[f]);c.ldelim()}if(i.strings!=null&&i.strings.length)for(var f=0;f<i.strings.length;++f)c.uint32(74).bytes(i.strings[f]);if(i.tensors!=null&&i.tensors.length)for(var f=0;f<i.tensors.length;++f)u.onnx.TensorProto.encode(i.tensors[f],c.uint32(82).fork()).ldelim();if(i.graphs!=null&&i.graphs.length)for(var f=0;f<i.graphs.length;++f)u.onnx.GraphProto.encode(i.graphs[f],c.uint32(90).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(106).string(i.docString),i.tp!=null&&Object.hasOwnProperty.call(i,"tp")&&u.onnx.TypeProto.encode(i.tp,c.uint32(114).fork()).ldelim(),i.typeProtos!=null&&i.typeProtos.length)for(var f=0;f<i.typeProtos.length;++f)u.onnx.TypeProto.encode(i.typeProtos[f],c.uint32(122).fork()).ldelim();if(i.type!=null&&Object.hasOwnProperty.call(i,"type")&&c.uint32(160).int32(i.type),i.refAttrName!=null&&Object.hasOwnProperty.call(i,"refAttrName")&&c.uint32(170).string(i.refAttrName),i.sparseTensor!=null&&Object.hasOwnProperty.call(i,"sparseTensor")&&u.onnx.SparseTensorProto.encode(i.sparseTensor,c.uint32(178).fork()).ldelim(),i.sparseTensors!=null&&i.sparseTensors.length)for(var f=0;f<i.sparseTensors.length;++f)u.onnx.SparseTensorProto.encode(i.sparseTensors[f],c.uint32(186).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.AttributeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 21:{d.refAttrName=i.string();break}case 13:{d.docString=i.string();break}case 20:{d.type=i.int32();break}case 2:{d.f=i.float();break}case 3:{d.i=i.int64();break}case 4:{d.s=i.bytes();break}case 5:{d.t=u.onnx.TensorProto.decode(i,i.uint32());break}case 6:{d.g=u.onnx.GraphProto.decode(i,i.uint32());break}case 22:{d.sparseTensor=u.onnx.SparseTensorProto.decode(i,i.uint32());break}case 14:{d.tp=u.onnx.TypeProto.decode(i,i.uint32());break}case 7:{if(d.floats&&d.floats.length||(d.floats=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.floats.push(i.float());else d.floats.push(i.float());break}case 8:{if(d.ints&&d.ints.length||(d.ints=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.ints.push(i.int64());else d.ints.push(i.int64());break}case 9:{d.strings&&d.strings.length||(d.strings=[]),d.strings.push(i.bytes());break}case 10:{d.tensors&&d.tensors.length||(d.tensors=[]),d.tensors.push(u.onnx.TensorProto.decode(i,i.uint32()));break}case 11:{d.graphs&&d.graphs.length||(d.graphs=[]),d.graphs.push(u.onnx.GraphProto.decode(i,i.uint32()));break}case 23:{d.sparseTensors&&d.sparseTensors.length||(d.sparseTensors=[]),d.sparseTensors.push(u.onnx.SparseTensorProto.decode(i,i.uint32()));break}case 15:{d.typeProtos&&d.typeProtos.length||(d.typeProtos=[]),d.typeProtos.push(u.onnx.TypeProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&!a.isString(i.refAttrName))return"refAttrName: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.type!=null&&i.hasOwnProperty("type"))switch(i.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(i.f!=null&&i.hasOwnProperty("f")&&typeof i.f!="number")return"f: number expected";if(i.i!=null&&i.hasOwnProperty("i")&&!a.isInteger(i.i)&&!(i.i&&a.isInteger(i.i.low)&&a.isInteger(i.i.high)))return"i: integer|Long expected";if(i.s!=null&&i.hasOwnProperty("s")&&!(i.s&&typeof i.s.length=="number"||a.isString(i.s)))return"s: buffer expected";if(i.t!=null&&i.hasOwnProperty("t")){var c=u.onnx.TensorProto.verify(i.t);if(c)return"t."+c}if(i.g!=null&&i.hasOwnProperty("g")){var c=u.onnx.GraphProto.verify(i.g);if(c)return"g."+c}if(i.sparseTensor!=null&&i.hasOwnProperty("sparseTensor")){var c=u.onnx.SparseTensorProto.verify(i.sparseTensor);if(c)return"sparseTensor."+c}if(i.tp!=null&&i.hasOwnProperty("tp")){var c=u.onnx.TypeProto.verify(i.tp);if(c)return"tp."+c}if(i.floats!=null&&i.hasOwnProperty("floats")){if(!Array.isArray(i.floats))return"floats: array expected";for(var f=0;f<i.floats.length;++f)if(typeof i.floats[f]!="number")return"floats: number[] expected"}if(i.ints!=null&&i.hasOwnProperty("ints")){if(!Array.isArray(i.ints))return"ints: array expected";for(var f=0;f<i.ints.length;++f)if(!a.isInteger(i.ints[f])&&!(i.ints[f]&&a.isInteger(i.ints[f].low)&&a.isInteger(i.ints[f].high)))return"ints: integer|Long[] expected"}if(i.strings!=null&&i.hasOwnProperty("strings")){if(!Array.isArray(i.strings))return"strings: array expected";for(var f=0;f<i.strings.length;++f)if(!(i.strings[f]&&typeof i.strings[f].length=="number"||a.isString(i.strings[f])))return"strings: buffer[] expected"}if(i.tensors!=null&&i.hasOwnProperty("tensors")){if(!Array.isArray(i.tensors))return"tensors: array expected";for(var f=0;f<i.tensors.length;++f){var c=u.onnx.TensorProto.verify(i.tensors[f]);if(c)return"tensors."+c}}if(i.graphs!=null&&i.hasOwnProperty("graphs")){if(!Array.isArray(i.graphs))return"graphs: array expected";for(var f=0;f<i.graphs.length;++f){var c=u.onnx.GraphProto.verify(i.graphs[f]);if(c)return"graphs."+c}}if(i.sparseTensors!=null&&i.hasOwnProperty("sparseTensors")){if(!Array.isArray(i.sparseTensors))return"sparseTensors: array expected";for(var f=0;f<i.sparseTensors.length;++f){var c=u.onnx.SparseTensorProto.verify(i.sparseTensors[f]);if(c)return"sparseTensors."+c}}if(i.typeProtos!=null&&i.hasOwnProperty("typeProtos")){if(!Array.isArray(i.typeProtos))return"typeProtos: array expected";for(var f=0;f<i.typeProtos.length;++f){var c=u.onnx.TypeProto.verify(i.typeProtos[f]);if(c)return"typeProtos."+c}}return null},l.fromObject=function(i){if(i instanceof u.onnx.AttributeProto)return i;var c=new u.onnx.AttributeProto;switch(i.name!=null&&(c.name=String(i.name)),i.refAttrName!=null&&(c.refAttrName=String(i.refAttrName)),i.docString!=null&&(c.docString=String(i.docString)),i.type){default:if(typeof i.type=="number"){c.type=i.type;break}break;case"UNDEFINED":case 0:c.type=0;break;case"FLOAT":case 1:c.type=1;break;case"INT":case 2:c.type=2;break;case"STRING":case 3:c.type=3;break;case"TENSOR":case 4:c.type=4;break;case"GRAPH":case 5:c.type=5;break;case"SPARSE_TENSOR":case 11:c.type=11;break;case"TYPE_PROTO":case 13:c.type=13;break;case"FLOATS":case 6:c.type=6;break;case"INTS":case 7:c.type=7;break;case"STRINGS":case 8:c.type=8;break;case"TENSORS":case 9:c.type=9;break;case"GRAPHS":case 10:c.type=10;break;case"SPARSE_TENSORS":case 12:c.type=12;break;case"TYPE_PROTOS":case 14:c.type=14;break}if(i.f!=null&&(c.f=Number(i.f)),i.i!=null&&(a.Long?(c.i=a.Long.fromValue(i.i)).unsigned=!1:typeof i.i=="string"?c.i=parseInt(i.i,10):typeof i.i=="number"?c.i=i.i:typeof i.i=="object"&&(c.i=new a.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber())),i.s!=null&&(typeof i.s=="string"?a.base64.decode(i.s,c.s=a.newBuffer(a.base64.length(i.s)),0):i.s.length>=0&&(c.s=i.s)),i.t!=null){if(typeof i.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");c.t=u.onnx.TensorProto.fromObject(i.t)}if(i.g!=null){if(typeof i.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");c.g=u.onnx.GraphProto.fromObject(i.g)}if(i.sparseTensor!=null){if(typeof i.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");c.sparseTensor=u.onnx.SparseTensorProto.fromObject(i.sparseTensor)}if(i.tp!=null){if(typeof i.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");c.tp=u.onnx.TypeProto.fromObject(i.tp)}if(i.floats){if(!Array.isArray(i.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");c.floats=[];for(var f=0;f<i.floats.length;++f)c.floats[f]=Number(i.floats[f])}if(i.ints){if(!Array.isArray(i.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");c.ints=[];for(var f=0;f<i.ints.length;++f)a.Long?(c.ints[f]=a.Long.fromValue(i.ints[f])).unsigned=!1:typeof i.ints[f]=="string"?c.ints[f]=parseInt(i.ints[f],10):typeof i.ints[f]=="number"?c.ints[f]=i.ints[f]:typeof i.ints[f]=="object"&&(c.ints[f]=new a.LongBits(i.ints[f].low>>>0,i.ints[f].high>>>0).toNumber())}if(i.strings){if(!Array.isArray(i.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");c.strings=[];for(var f=0;f<i.strings.length;++f)typeof i.strings[f]=="string"?a.base64.decode(i.strings[f],c.strings[f]=a.newBuffer(a.base64.length(i.strings[f])),0):i.strings[f].length>=0&&(c.strings[f]=i.strings[f])}if(i.tensors){if(!Array.isArray(i.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");c.tensors=[];for(var f=0;f<i.tensors.length;++f){if(typeof i.tensors[f]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");c.tensors[f]=u.onnx.TensorProto.fromObject(i.tensors[f])}}if(i.graphs){if(!Array.isArray(i.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");c.graphs=[];for(var f=0;f<i.graphs.length;++f){if(typeof i.graphs[f]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");c.graphs[f]=u.onnx.GraphProto.fromObject(i.graphs[f])}}if(i.sparseTensors){if(!Array.isArray(i.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");c.sparseTensors=[];for(var f=0;f<i.sparseTensors.length;++f){if(typeof i.sparseTensors[f]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");c.sparseTensors[f]=u.onnx.SparseTensorProto.fromObject(i.sparseTensors[f])}}if(i.typeProtos){if(!Array.isArray(i.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");c.typeProtos=[];for(var f=0;f<i.typeProtos.length;++f){if(typeof i.typeProtos[f]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");c.typeProtos[f]=u.onnx.TypeProto.fromObject(i.typeProtos[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[],f.typeProtos=[],f.sparseTensors=[]),c.defaults){if(f.name="",f.f=0,a.Long){var d=new a.Long(0,0,!1);f.i=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.i=c.longs===String?"0":0;c.bytes===String?f.s="":(f.s=[],c.bytes!==Array&&(f.s=a.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.tp=null,f.type=c.enums===String?"UNDEFINED":0,f.refAttrName="",f.sparseTensor=null}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.f!=null&&i.hasOwnProperty("f")&&(f.f=c.json&&!isFinite(i.f)?String(i.f):i.f),i.i!=null&&i.hasOwnProperty("i")&&(typeof i.i=="number"?f.i=c.longs===String?String(i.i):i.i:f.i=c.longs===String?a.Long.prototype.toString.call(i.i):c.longs===Number?new a.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber():i.i),i.s!=null&&i.hasOwnProperty("s")&&(f.s=c.bytes===String?a.base64.encode(i.s,0,i.s.length):c.bytes===Array?Array.prototype.slice.call(i.s):i.s),i.t!=null&&i.hasOwnProperty("t")&&(f.t=u.onnx.TensorProto.toObject(i.t,c)),i.g!=null&&i.hasOwnProperty("g")&&(f.g=u.onnx.GraphProto.toObject(i.g,c)),i.floats&&i.floats.length){f.floats=[];for(var h=0;h<i.floats.length;++h)f.floats[h]=c.json&&!isFinite(i.floats[h])?String(i.floats[h]):i.floats[h]}if(i.ints&&i.ints.length){f.ints=[];for(var h=0;h<i.ints.length;++h)typeof i.ints[h]=="number"?f.ints[h]=c.longs===String?String(i.ints[h]):i.ints[h]:f.ints[h]=c.longs===String?a.Long.prototype.toString.call(i.ints[h]):c.longs===Number?new a.LongBits(i.ints[h].low>>>0,i.ints[h].high>>>0).toNumber():i.ints[h]}if(i.strings&&i.strings.length){f.strings=[];for(var h=0;h<i.strings.length;++h)f.strings[h]=c.bytes===String?a.base64.encode(i.strings[h],0,i.strings[h].length):c.bytes===Array?Array.prototype.slice.call(i.strings[h]):i.strings[h]}if(i.tensors&&i.tensors.length){f.tensors=[];for(var h=0;h<i.tensors.length;++h)f.tensors[h]=u.onnx.TensorProto.toObject(i.tensors[h],c)}if(i.graphs&&i.graphs.length){f.graphs=[];for(var h=0;h<i.graphs.length;++h)f.graphs[h]=u.onnx.GraphProto.toObject(i.graphs[h],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.tp!=null&&i.hasOwnProperty("tp")&&(f.tp=u.onnx.TypeProto.toObject(i.tp,c)),i.typeProtos&&i.typeProtos.length){f.typeProtos=[];for(var h=0;h<i.typeProtos.length;++h)f.typeProtos[h]=u.onnx.TypeProto.toObject(i.typeProtos[h],c)}if(i.type!=null&&i.hasOwnProperty("type")&&(f.type=c.enums===String?u.onnx.AttributeProto.AttributeType[i.type]===void 0?i.type:u.onnx.AttributeProto.AttributeType[i.type]:i.type),i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&(f.refAttrName=i.refAttrName),i.sparseTensor!=null&&i.hasOwnProperty("sparseTensor")&&(f.sparseTensor=u.onnx.SparseTensorProto.toObject(i.sparseTensor,c)),i.sparseTensors&&i.sparseTensors.length){f.sparseTensors=[];for(var h=0;h<i.sparseTensors.length;++h)f.sparseTensors[h]=u.onnx.SparseTensorProto.toObject(i.sparseTensors[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.AttributeProto"},l.AttributeType=function(){var i={},c=Object.create(i);return c[i[0]="UNDEFINED"]=0,c[i[1]="FLOAT"]=1,c[i[2]="INT"]=2,c[i[3]="STRING"]=3,c[i[4]="TENSOR"]=4,c[i[5]="GRAPH"]=5,c[i[11]="SPARSE_TENSOR"]=11,c[i[13]="TYPE_PROTO"]=13,c[i[6]="FLOATS"]=6,c[i[7]="INTS"]=7,c[i[8]="STRINGS"]=8,c[i[9]="TENSORS"]=9,c[i[10]="GRAPHS"]=10,c[i[12]="SPARSE_TENSORS"]=12,c[i[14]="TYPE_PROTOS"]=14,c}(),l}(),s.ValueInfoProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.type=null,l.prototype.docString="",l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&u.onnx.TypeProto.encode(i.type,c.uint32(18).fork()).ldelim(),i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(26).string(i.docString),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.ValueInfoProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 2:{d.type=u.onnx.TypeProto.decode(i,i.uint32());break}case 3:{d.docString=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.type!=null&&i.hasOwnProperty("type")){var c=u.onnx.TypeProto.verify(i.type);if(c)return"type."+c}return i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString)?"docString: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.ValueInfoProto)return i;var c=new u.onnx.ValueInfoProto;if(i.name!=null&&(c.name=String(i.name)),i.type!=null){if(typeof i.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");c.type=u.onnx.TypeProto.fromObject(i.type)}return i.docString!=null&&(c.docString=String(i.docString)),c},l.toObject=function(i,c){c||(c={});var f={};return c.defaults&&(f.name="",f.type=null,f.docString=""),i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.type!=null&&i.hasOwnProperty("type")&&(f.type=u.onnx.TypeProto.toObject(i.type,c)),i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.ValueInfoProto"},l}(),s.NodeProto=function(){function l(i){if(this.input=[],this.output=[],this.attribute=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.name="",l.prototype.opType="",l.prototype.domain="",l.prototype.attribute=a.emptyArray,l.prototype.docString="",l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)c.uint32(10).string(i.input[f]);if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)c.uint32(18).string(i.output[f]);if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(26).string(i.name),i.opType!=null&&Object.hasOwnProperty.call(i,"opType")&&c.uint32(34).string(i.opType),i.attribute!=null&&i.attribute.length)for(var f=0;f<i.attribute.length;++f)u.onnx.AttributeProto.encode(i.attribute[f],c.uint32(42).fork()).ldelim();return i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(50).string(i.docString),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(58).string(i.domain),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.NodeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.input&&d.input.length||(d.input=[]),d.input.push(i.string());break}case 2:{d.output&&d.output.length||(d.output=[]),d.output.push(i.string());break}case 3:{d.name=i.string();break}case 4:{d.opType=i.string();break}case 7:{d.domain=i.string();break}case 5:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(u.onnx.AttributeProto.decode(i,i.uint32()));break}case 6:{d.docString=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c)if(!a.isString(i.input[c]))return"input: string[] expected"}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c)if(!a.isString(i.output[c]))return"output: string[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.opType!=null&&i.hasOwnProperty("opType")&&!a.isString(i.opType))return"opType: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain))return"domain: string expected";if(i.attribute!=null&&i.hasOwnProperty("attribute")){if(!Array.isArray(i.attribute))return"attribute: array expected";for(var c=0;c<i.attribute.length;++c){var f=u.onnx.AttributeProto.verify(i.attribute[c]);if(f)return"attribute."+f}}return i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString)?"docString: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.NodeProto)return i;var c=new u.onnx.NodeProto;if(i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.NodeProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f)c.input[f]=String(i.input[f])}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.NodeProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f)c.output[f]=String(i.output[f])}if(i.name!=null&&(c.name=String(i.name)),i.opType!=null&&(c.opType=String(i.opType)),i.domain!=null&&(c.domain=String(i.domain)),i.attribute){if(!Array.isArray(i.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");c.attribute=[];for(var f=0;f<i.attribute.length;++f){if(typeof i.attribute[f]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");c.attribute[f]=u.onnx.AttributeProto.fromObject(i.attribute[f])}}return i.docString!=null&&(c.docString=String(i.docString)),c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[]),c.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=i.input[d]}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=i.output[d]}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.opType!=null&&i.hasOwnProperty("opType")&&(f.opType=i.opType),i.attribute&&i.attribute.length){f.attribute=[];for(var d=0;d<i.attribute.length;++d)f.attribute[d]=u.onnx.AttributeProto.toObject(i.attribute[d],c)}return i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.NodeProto"},l}(),s.TrainingInfoProto=function(){function l(i){if(this.initializationBinding=[],this.updateBinding=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.initialization=null,l.prototype.algorithm=null,l.prototype.initializationBinding=a.emptyArray,l.prototype.updateBinding=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.initialization!=null&&Object.hasOwnProperty.call(i,"initialization")&&u.onnx.GraphProto.encode(i.initialization,c.uint32(10).fork()).ldelim(),i.algorithm!=null&&Object.hasOwnProperty.call(i,"algorithm")&&u.onnx.GraphProto.encode(i.algorithm,c.uint32(18).fork()).ldelim(),i.initializationBinding!=null&&i.initializationBinding.length)for(var f=0;f<i.initializationBinding.length;++f)u.onnx.StringStringEntryProto.encode(i.initializationBinding[f],c.uint32(26).fork()).ldelim();if(i.updateBinding!=null&&i.updateBinding.length)for(var f=0;f<i.updateBinding.length;++f)u.onnx.StringStringEntryProto.encode(i.updateBinding[f],c.uint32(34).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TrainingInfoProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.initialization=u.onnx.GraphProto.decode(i,i.uint32());break}case 2:{d.algorithm=u.onnx.GraphProto.decode(i,i.uint32());break}case 3:{d.initializationBinding&&d.initializationBinding.length||(d.initializationBinding=[]),d.initializationBinding.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 4:{d.updateBinding&&d.updateBinding.length||(d.updateBinding=[]),d.updateBinding.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.initialization!=null&&i.hasOwnProperty("initialization")){var c=u.onnx.GraphProto.verify(i.initialization);if(c)return"initialization."+c}if(i.algorithm!=null&&i.hasOwnProperty("algorithm")){var c=u.onnx.GraphProto.verify(i.algorithm);if(c)return"algorithm."+c}if(i.initializationBinding!=null&&i.hasOwnProperty("initializationBinding")){if(!Array.isArray(i.initializationBinding))return"initializationBinding: array expected";for(var f=0;f<i.initializationBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(i.initializationBinding[f]);if(c)return"initializationBinding."+c}}if(i.updateBinding!=null&&i.hasOwnProperty("updateBinding")){if(!Array.isArray(i.updateBinding))return"updateBinding: array expected";for(var f=0;f<i.updateBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(i.updateBinding[f]);if(c)return"updateBinding."+c}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TrainingInfoProto)return i;var c=new u.onnx.TrainingInfoProto;if(i.initialization!=null){if(typeof i.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");c.initialization=u.onnx.GraphProto.fromObject(i.initialization)}if(i.algorithm!=null){if(typeof i.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");c.algorithm=u.onnx.GraphProto.fromObject(i.algorithm)}if(i.initializationBinding){if(!Array.isArray(i.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");c.initializationBinding=[];for(var f=0;f<i.initializationBinding.length;++f){if(typeof i.initializationBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");c.initializationBinding[f]=u.onnx.StringStringEntryProto.fromObject(i.initializationBinding[f])}}if(i.updateBinding){if(!Array.isArray(i.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");c.updateBinding=[];for(var f=0;f<i.updateBinding.length;++f){if(typeof i.updateBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");c.updateBinding[f]=u.onnx.StringStringEntryProto.fromObject(i.updateBinding[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.initializationBinding=[],f.updateBinding=[]),c.defaults&&(f.initialization=null,f.algorithm=null),i.initialization!=null&&i.hasOwnProperty("initialization")&&(f.initialization=u.onnx.GraphProto.toObject(i.initialization,c)),i.algorithm!=null&&i.hasOwnProperty("algorithm")&&(f.algorithm=u.onnx.GraphProto.toObject(i.algorithm,c)),i.initializationBinding&&i.initializationBinding.length){f.initializationBinding=[];for(var d=0;d<i.initializationBinding.length;++d)f.initializationBinding[d]=u.onnx.StringStringEntryProto.toObject(i.initializationBinding[d],c)}if(i.updateBinding&&i.updateBinding.length){f.updateBinding=[];for(var d=0;d<i.updateBinding.length;++d)f.updateBinding[d]=u.onnx.StringStringEntryProto.toObject(i.updateBinding[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TrainingInfoProto"},l}(),s.ModelProto=function(){function l(i){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.opsetImport=a.emptyArray,l.prototype.producerName="",l.prototype.producerVersion="",l.prototype.domain="",l.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.docString="",l.prototype.graph=null,l.prototype.metadataProps=a.emptyArray,l.prototype.trainingInfo=a.emptyArray,l.prototype.functions=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.irVersion!=null&&Object.hasOwnProperty.call(i,"irVersion")&&c.uint32(8).int64(i.irVersion),i.producerName!=null&&Object.hasOwnProperty.call(i,"producerName")&&c.uint32(18).string(i.producerName),i.producerVersion!=null&&Object.hasOwnProperty.call(i,"producerVersion")&&c.uint32(26).string(i.producerVersion),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(34).string(i.domain),i.modelVersion!=null&&Object.hasOwnProperty.call(i,"modelVersion")&&c.uint32(40).int64(i.modelVersion),i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(50).string(i.docString),i.graph!=null&&Object.hasOwnProperty.call(i,"graph")&&u.onnx.GraphProto.encode(i.graph,c.uint32(58).fork()).ldelim(),i.opsetImport!=null&&i.opsetImport.length)for(var f=0;f<i.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(i.opsetImport[f],c.uint32(66).fork()).ldelim();if(i.metadataProps!=null&&i.metadataProps.length)for(var f=0;f<i.metadataProps.length;++f)u.onnx.StringStringEntryProto.encode(i.metadataProps[f],c.uint32(114).fork()).ldelim();if(i.trainingInfo!=null&&i.trainingInfo.length)for(var f=0;f<i.trainingInfo.length;++f)u.onnx.TrainingInfoProto.encode(i.trainingInfo[f],c.uint32(162).fork()).ldelim();if(i.functions!=null&&i.functions.length)for(var f=0;f<i.functions.length;++f)u.onnx.FunctionProto.encode(i.functions[f],c.uint32(202).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.ModelProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.irVersion=i.int64();break}case 8:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(i,i.uint32()));break}case 2:{d.producerName=i.string();break}case 3:{d.producerVersion=i.string();break}case 4:{d.domain=i.string();break}case 5:{d.modelVersion=i.int64();break}case 6:{d.docString=i.string();break}case 7:{d.graph=u.onnx.GraphProto.decode(i,i.uint32());break}case 14:{d.metadataProps&&d.metadataProps.length||(d.metadataProps=[]),d.metadataProps.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 20:{d.trainingInfo&&d.trainingInfo.length||(d.trainingInfo=[]),d.trainingInfo.push(u.onnx.TrainingInfoProto.decode(i,i.uint32()));break}case 25:{d.functions&&d.functions.length||(d.functions=[]),d.functions.push(u.onnx.FunctionProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&!a.isInteger(i.irVersion)&&!(i.irVersion&&a.isInteger(i.irVersion.low)&&a.isInteger(i.irVersion.high)))return"irVersion: integer|Long expected";if(i.opsetImport!=null&&i.hasOwnProperty("opsetImport")){if(!Array.isArray(i.opsetImport))return"opsetImport: array expected";for(var c=0;c<i.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(i.opsetImport[c]);if(f)return"opsetImport."+f}}if(i.producerName!=null&&i.hasOwnProperty("producerName")&&!a.isString(i.producerName))return"producerName: string expected";if(i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&!a.isString(i.producerVersion))return"producerVersion: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain))return"domain: string expected";if(i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&!a.isInteger(i.modelVersion)&&!(i.modelVersion&&a.isInteger(i.modelVersion.low)&&a.isInteger(i.modelVersion.high)))return"modelVersion: integer|Long expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.graph!=null&&i.hasOwnProperty("graph")){var f=u.onnx.GraphProto.verify(i.graph);if(f)return"graph."+f}if(i.metadataProps!=null&&i.hasOwnProperty("metadataProps")){if(!Array.isArray(i.metadataProps))return"metadataProps: array expected";for(var c=0;c<i.metadataProps.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.metadataProps[c]);if(f)return"metadataProps."+f}}if(i.trainingInfo!=null&&i.hasOwnProperty("trainingInfo")){if(!Array.isArray(i.trainingInfo))return"trainingInfo: array expected";for(var c=0;c<i.trainingInfo.length;++c){var f=u.onnx.TrainingInfoProto.verify(i.trainingInfo[c]);if(f)return"trainingInfo."+f}}if(i.functions!=null&&i.hasOwnProperty("functions")){if(!Array.isArray(i.functions))return"functions: array expected";for(var c=0;c<i.functions.length;++c){var f=u.onnx.FunctionProto.verify(i.functions[c]);if(f)return"functions."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.ModelProto)return i;var c=new u.onnx.ModelProto;if(i.irVersion!=null&&(a.Long?(c.irVersion=a.Long.fromValue(i.irVersion)).unsigned=!1:typeof i.irVersion=="string"?c.irVersion=parseInt(i.irVersion,10):typeof i.irVersion=="number"?c.irVersion=i.irVersion:typeof i.irVersion=="object"&&(c.irVersion=new a.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber())),i.opsetImport){if(!Array.isArray(i.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<i.opsetImport.length;++f){if(typeof i.opsetImport[f]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(i.opsetImport[f])}}if(i.producerName!=null&&(c.producerName=String(i.producerName)),i.producerVersion!=null&&(c.producerVersion=String(i.producerVersion)),i.domain!=null&&(c.domain=String(i.domain)),i.modelVersion!=null&&(a.Long?(c.modelVersion=a.Long.fromValue(i.modelVersion)).unsigned=!1:typeof i.modelVersion=="string"?c.modelVersion=parseInt(i.modelVersion,10):typeof i.modelVersion=="number"?c.modelVersion=i.modelVersion:typeof i.modelVersion=="object"&&(c.modelVersion=new a.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber())),i.docString!=null&&(c.docString=String(i.docString)),i.graph!=null){if(typeof i.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");c.graph=u.onnx.GraphProto.fromObject(i.graph)}if(i.metadataProps){if(!Array.isArray(i.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");c.metadataProps=[];for(var f=0;f<i.metadataProps.length;++f){if(typeof i.metadataProps[f]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");c.metadataProps[f]=u.onnx.StringStringEntryProto.fromObject(i.metadataProps[f])}}if(i.trainingInfo){if(!Array.isArray(i.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");c.trainingInfo=[];for(var f=0;f<i.trainingInfo.length;++f){if(typeof i.trainingInfo[f]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");c.trainingInfo[f]=u.onnx.TrainingInfoProto.fromObject(i.trainingInfo[f])}}if(i.functions){if(!Array.isArray(i.functions))throw TypeError(".onnx.ModelProto.functions: array expected");c.functions=[];for(var f=0;f<i.functions.length;++f){if(typeof i.functions[f]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");c.functions[f]=u.onnx.FunctionProto.fromObject(i.functions[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.opsetImport=[],f.metadataProps=[],f.trainingInfo=[],f.functions=[]),c.defaults){if(a.Long){var d=new a.Long(0,0,!1);f.irVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.irVersion=c.longs===String?"0":0;if(f.producerName="",f.producerVersion="",f.domain="",a.Long){var d=new a.Long(0,0,!1);f.modelVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.modelVersion=c.longs===String?"0":0;f.docString="",f.graph=null}if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&(typeof i.irVersion=="number"?f.irVersion=c.longs===String?String(i.irVersion):i.irVersion:f.irVersion=c.longs===String?a.Long.prototype.toString.call(i.irVersion):c.longs===Number?new a.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber():i.irVersion),i.producerName!=null&&i.hasOwnProperty("producerName")&&(f.producerName=i.producerName),i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&(f.producerVersion=i.producerVersion),i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&(typeof i.modelVersion=="number"?f.modelVersion=c.longs===String?String(i.modelVersion):i.modelVersion:f.modelVersion=c.longs===String?a.Long.prototype.toString.call(i.modelVersion):c.longs===Number?new a.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber():i.modelVersion),i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.graph!=null&&i.hasOwnProperty("graph")&&(f.graph=u.onnx.GraphProto.toObject(i.graph,c)),i.opsetImport&&i.opsetImport.length){f.opsetImport=[];for(var h=0;h<i.opsetImport.length;++h)f.opsetImport[h]=u.onnx.OperatorSetIdProto.toObject(i.opsetImport[h],c)}if(i.metadataProps&&i.metadataProps.length){f.metadataProps=[];for(var h=0;h<i.metadataProps.length;++h)f.metadataProps[h]=u.onnx.StringStringEntryProto.toObject(i.metadataProps[h],c)}if(i.trainingInfo&&i.trainingInfo.length){f.trainingInfo=[];for(var h=0;h<i.trainingInfo.length;++h)f.trainingInfo[h]=u.onnx.TrainingInfoProto.toObject(i.trainingInfo[h],c)}if(i.functions&&i.functions.length){f.functions=[];for(var h=0;h<i.functions.length;++h)f.functions[h]=u.onnx.FunctionProto.toObject(i.functions[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.ModelProto"},l}(),s.StringStringEntryProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.key="",l.prototype.value="",l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&c.uint32(10).string(i.key),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&c.uint32(18).string(i.value),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.StringStringEntryProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.key=i.string();break}case 2:{d.value=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){return typeof i!="object"||i===null?"object expected":i.key!=null&&i.hasOwnProperty("key")&&!a.isString(i.key)?"key: string expected":i.value!=null&&i.hasOwnProperty("value")&&!a.isString(i.value)?"value: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.StringStringEntryProto)return i;var c=new u.onnx.StringStringEntryProto;return i.key!=null&&(c.key=String(i.key)),i.value!=null&&(c.value=String(i.value)),c},l.toObject=function(i,c){c||(c={});var f={};return c.defaults&&(f.key="",f.value=""),i.key!=null&&i.hasOwnProperty("key")&&(f.key=i.key),i.value!=null&&i.hasOwnProperty("value")&&(f.value=i.value),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.StringStringEntryProto"},l}(),s.TensorAnnotation=function(){function l(i){if(this.quantParameterTensorNames=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.tensorName="",l.prototype.quantParameterTensorNames=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.tensorName!=null&&Object.hasOwnProperty.call(i,"tensorName")&&c.uint32(10).string(i.tensorName),i.quantParameterTensorNames!=null&&i.quantParameterTensorNames.length)for(var f=0;f<i.quantParameterTensorNames.length;++f)u.onnx.StringStringEntryProto.encode(i.quantParameterTensorNames[f],c.uint32(18).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorAnnotation;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.tensorName=i.string();break}case 2:{d.quantParameterTensorNames&&d.quantParameterTensorNames.length||(d.quantParameterTensorNames=[]),d.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.tensorName!=null&&i.hasOwnProperty("tensorName")&&!a.isString(i.tensorName))return"tensorName: string expected";if(i.quantParameterTensorNames!=null&&i.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(i.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var c=0;c<i.quantParameterTensorNames.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.quantParameterTensorNames[c]);if(f)return"quantParameterTensorNames."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorAnnotation)return i;var c=new u.onnx.TensorAnnotation;if(i.tensorName!=null&&(c.tensorName=String(i.tensorName)),i.quantParameterTensorNames){if(!Array.isArray(i.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");c.quantParameterTensorNames=[];for(var f=0;f<i.quantParameterTensorNames.length;++f){if(typeof i.quantParameterTensorNames[f]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");c.quantParameterTensorNames[f]=u.onnx.StringStringEntryProto.fromObject(i.quantParameterTensorNames[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.quantParameterTensorNames=[]),c.defaults&&(f.tensorName=""),i.tensorName!=null&&i.hasOwnProperty("tensorName")&&(f.tensorName=i.tensorName),i.quantParameterTensorNames&&i.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var d=0;d<i.quantParameterTensorNames.length;++d)f.quantParameterTensorNames[d]=u.onnx.StringStringEntryProto.toObject(i.quantParameterTensorNames[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorAnnotation"},l}(),s.GraphProto=function(){function l(i){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.node=a.emptyArray,l.prototype.name="",l.prototype.initializer=a.emptyArray,l.prototype.sparseInitializer=a.emptyArray,l.prototype.docString="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.valueInfo=a.emptyArray,l.prototype.quantizationAnnotation=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.node!=null&&i.node.length)for(var f=0;f<i.node.length;++f)u.onnx.NodeProto.encode(i.node[f],c.uint32(10).fork()).ldelim();if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(18).string(i.name),i.initializer!=null&&i.initializer.length)for(var f=0;f<i.initializer.length;++f)u.onnx.TensorProto.encode(i.initializer[f],c.uint32(42).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(82).string(i.docString),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)u.onnx.ValueInfoProto.encode(i.input[f],c.uint32(90).fork()).ldelim();if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)u.onnx.ValueInfoProto.encode(i.output[f],c.uint32(98).fork()).ldelim();if(i.valueInfo!=null&&i.valueInfo.length)for(var f=0;f<i.valueInfo.length;++f)u.onnx.ValueInfoProto.encode(i.valueInfo[f],c.uint32(106).fork()).ldelim();if(i.quantizationAnnotation!=null&&i.quantizationAnnotation.length)for(var f=0;f<i.quantizationAnnotation.length;++f)u.onnx.TensorAnnotation.encode(i.quantizationAnnotation[f],c.uint32(114).fork()).ldelim();if(i.sparseInitializer!=null&&i.sparseInitializer.length)for(var f=0;f<i.sparseInitializer.length;++f)u.onnx.SparseTensorProto.encode(i.sparseInitializer[f],c.uint32(122).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.GraphProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(i,i.uint32()));break}case 2:{d.name=i.string();break}case 5:{d.initializer&&d.initializer.length||(d.initializer=[]),d.initializer.push(u.onnx.TensorProto.decode(i,i.uint32()));break}case 15:{d.sparseInitializer&&d.sparseInitializer.length||(d.sparseInitializer=[]),d.sparseInitializer.push(u.onnx.SparseTensorProto.decode(i,i.uint32()));break}case 10:{d.docString=i.string();break}case 11:{d.input&&d.input.length||(d.input=[]),d.input.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 12:{d.output&&d.output.length||(d.output=[]),d.output.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 13:{d.valueInfo&&d.valueInfo.length||(d.valueInfo=[]),d.valueInfo.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 14:{d.quantizationAnnotation&&d.quantizationAnnotation.length||(d.quantizationAnnotation=[]),d.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.node!=null&&i.hasOwnProperty("node")){if(!Array.isArray(i.node))return"node: array expected";for(var c=0;c<i.node.length;++c){var f=u.onnx.NodeProto.verify(i.node[c]);if(f)return"node."+f}}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.initializer!=null&&i.hasOwnProperty("initializer")){if(!Array.isArray(i.initializer))return"initializer: array expected";for(var c=0;c<i.initializer.length;++c){var f=u.onnx.TensorProto.verify(i.initializer[c]);if(f)return"initializer."+f}}if(i.sparseInitializer!=null&&i.hasOwnProperty("sparseInitializer")){if(!Array.isArray(i.sparseInitializer))return"sparseInitializer: array expected";for(var c=0;c<i.sparseInitializer.length;++c){var f=u.onnx.SparseTensorProto.verify(i.sparseInitializer[c]);if(f)return"sparseInitializer."+f}}if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c){var f=u.onnx.ValueInfoProto.verify(i.input[c]);if(f)return"input."+f}}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c){var f=u.onnx.ValueInfoProto.verify(i.output[c]);if(f)return"output."+f}}if(i.valueInfo!=null&&i.hasOwnProperty("valueInfo")){if(!Array.isArray(i.valueInfo))return"valueInfo: array expected";for(var c=0;c<i.valueInfo.length;++c){var f=u.onnx.ValueInfoProto.verify(i.valueInfo[c]);if(f)return"valueInfo."+f}}if(i.quantizationAnnotation!=null&&i.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(i.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var c=0;c<i.quantizationAnnotation.length;++c){var f=u.onnx.TensorAnnotation.verify(i.quantizationAnnotation[c]);if(f)return"quantizationAnnotation."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.GraphProto)return i;var c=new u.onnx.GraphProto;if(i.node){if(!Array.isArray(i.node))throw TypeError(".onnx.GraphProto.node: array expected");c.node=[];for(var f=0;f<i.node.length;++f){if(typeof i.node[f]!="object")throw TypeError(".onnx.GraphProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(i.node[f])}}if(i.name!=null&&(c.name=String(i.name)),i.initializer){if(!Array.isArray(i.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");c.initializer=[];for(var f=0;f<i.initializer.length;++f){if(typeof i.initializer[f]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");c.initializer[f]=u.onnx.TensorProto.fromObject(i.initializer[f])}}if(i.sparseInitializer){if(!Array.isArray(i.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");c.sparseInitializer=[];for(var f=0;f<i.sparseInitializer.length;++f){if(typeof i.sparseInitializer[f]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");c.sparseInitializer[f]=u.onnx.SparseTensorProto.fromObject(i.sparseInitializer[f])}}if(i.docString!=null&&(c.docString=String(i.docString)),i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.GraphProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f){if(typeof i.input[f]!="object")throw TypeError(".onnx.GraphProto.input: object expected");c.input[f]=u.onnx.ValueInfoProto.fromObject(i.input[f])}}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.GraphProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f){if(typeof i.output[f]!="object")throw TypeError(".onnx.GraphProto.output: object expected");c.output[f]=u.onnx.ValueInfoProto.fromObject(i.output[f])}}if(i.valueInfo){if(!Array.isArray(i.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");c.valueInfo=[];for(var f=0;f<i.valueInfo.length;++f){if(typeof i.valueInfo[f]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");c.valueInfo[f]=u.onnx.ValueInfoProto.fromObject(i.valueInfo[f])}}if(i.quantizationAnnotation){if(!Array.isArray(i.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");c.quantizationAnnotation=[];for(var f=0;f<i.quantizationAnnotation.length;++f){if(typeof i.quantizationAnnotation[f]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");c.quantizationAnnotation[f]=u.onnx.TensorAnnotation.fromObject(i.quantizationAnnotation[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[],f.sparseInitializer=[]),c.defaults&&(f.name="",f.docString=""),i.node&&i.node.length){f.node=[];for(var d=0;d<i.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(i.node[d],c)}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.initializer&&i.initializer.length){f.initializer=[];for(var d=0;d<i.initializer.length;++d)f.initializer[d]=u.onnx.TensorProto.toObject(i.initializer[d],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=u.onnx.ValueInfoProto.toObject(i.input[d],c)}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=u.onnx.ValueInfoProto.toObject(i.output[d],c)}if(i.valueInfo&&i.valueInfo.length){f.valueInfo=[];for(var d=0;d<i.valueInfo.length;++d)f.valueInfo[d]=u.onnx.ValueInfoProto.toObject(i.valueInfo[d],c)}if(i.quantizationAnnotation&&i.quantizationAnnotation.length){f.quantizationAnnotation=[];for(var d=0;d<i.quantizationAnnotation.length;++d)f.quantizationAnnotation[d]=u.onnx.TensorAnnotation.toObject(i.quantizationAnnotation[d],c)}if(i.sparseInitializer&&i.sparseInitializer.length){f.sparseInitializer=[];for(var d=0;d<i.sparseInitializer.length;++d)f.sparseInitializer[d]=u.onnx.SparseTensorProto.toObject(i.sparseInitializer[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.GraphProto"},l}(),s.TensorProto=function(){function l(i){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.dims=a.emptyArray,l.prototype.dataType=0,l.prototype.segment=null,l.prototype.floatData=a.emptyArray,l.prototype.int32Data=a.emptyArray,l.prototype.stringData=a.emptyArray,l.prototype.int64Data=a.emptyArray,l.prototype.name="",l.prototype.docString="",l.prototype.rawData=a.newBuffer([]),l.prototype.externalData=a.emptyArray,l.prototype.dataLocation=0,l.prototype.doubleData=a.emptyArray,l.prototype.uint64Data=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.dims!=null&&i.dims.length){c.uint32(10).fork();for(var f=0;f<i.dims.length;++f)c.int64(i.dims[f]);c.ldelim()}if(i.dataType!=null&&Object.hasOwnProperty.call(i,"dataType")&&c.uint32(16).int32(i.dataType),i.segment!=null&&Object.hasOwnProperty.call(i,"segment")&&u.onnx.TensorProto.Segment.encode(i.segment,c.uint32(26).fork()).ldelim(),i.floatData!=null&&i.floatData.length){c.uint32(34).fork();for(var f=0;f<i.floatData.length;++f)c.float(i.floatData[f]);c.ldelim()}if(i.int32Data!=null&&i.int32Data.length){c.uint32(42).fork();for(var f=0;f<i.int32Data.length;++f)c.int32(i.int32Data[f]);c.ldelim()}if(i.stringData!=null&&i.stringData.length)for(var f=0;f<i.stringData.length;++f)c.uint32(50).bytes(i.stringData[f]);if(i.int64Data!=null&&i.int64Data.length){c.uint32(58).fork();for(var f=0;f<i.int64Data.length;++f)c.int64(i.int64Data[f]);c.ldelim()}if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(66).string(i.name),i.rawData!=null&&Object.hasOwnProperty.call(i,"rawData")&&c.uint32(74).bytes(i.rawData),i.doubleData!=null&&i.doubleData.length){c.uint32(82).fork();for(var f=0;f<i.doubleData.length;++f)c.double(i.doubleData[f]);c.ldelim()}if(i.uint64Data!=null&&i.uint64Data.length){c.uint32(90).fork();for(var f=0;f<i.uint64Data.length;++f)c.uint64(i.uint64Data[f]);c.ldelim()}if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(98).string(i.docString),i.externalData!=null&&i.externalData.length)for(var f=0;f<i.externalData.length;++f)u.onnx.StringStringEntryProto.encode(i.externalData[f],c.uint32(106).fork()).ldelim();return i.dataLocation!=null&&Object.hasOwnProperty.call(i,"dataLocation")&&c.uint32(112).int32(i.dataLocation),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.dims.push(i.int64());else d.dims.push(i.int64());break}case 2:{d.dataType=i.int32();break}case 3:{d.segment=u.onnx.TensorProto.Segment.decode(i,i.uint32());break}case 4:{if(d.floatData&&d.floatData.length||(d.floatData=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.floatData.push(i.float());else d.floatData.push(i.float());break}case 5:{if(d.int32Data&&d.int32Data.length||(d.int32Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.int32Data.push(i.int32());else d.int32Data.push(i.int32());break}case 6:{d.stringData&&d.stringData.length||(d.stringData=[]),d.stringData.push(i.bytes());break}case 7:{if(d.int64Data&&d.int64Data.length||(d.int64Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.int64Data.push(i.int64());else d.int64Data.push(i.int64());break}case 8:{d.name=i.string();break}case 12:{d.docString=i.string();break}case 9:{d.rawData=i.bytes();break}case 13:{d.externalData&&d.externalData.length||(d.externalData=[]),d.externalData.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 14:{d.dataLocation=i.int32();break}case 10:{if(d.doubleData&&d.doubleData.length||(d.doubleData=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.doubleData.push(i.double());else d.doubleData.push(i.double());break}case 11:{if(d.uint64Data&&d.uint64Data.length||(d.uint64Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.uint64Data.push(i.uint64());else d.uint64Data.push(i.uint64());break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dims!=null&&i.hasOwnProperty("dims")){if(!Array.isArray(i.dims))return"dims: array expected";for(var c=0;c<i.dims.length;++c)if(!a.isInteger(i.dims[c])&&!(i.dims[c]&&a.isInteger(i.dims[c].low)&&a.isInteger(i.dims[c].high)))return"dims: integer|Long[] expected"}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&!a.isInteger(i.dataType))return"dataType: integer expected";if(i.segment!=null&&i.hasOwnProperty("segment")){var f=u.onnx.TensorProto.Segment.verify(i.segment);if(f)return"segment."+f}if(i.floatData!=null&&i.hasOwnProperty("floatData")){if(!Array.isArray(i.floatData))return"floatData: array expected";for(var c=0;c<i.floatData.length;++c)if(typeof i.floatData[c]!="number")return"floatData: number[] expected"}if(i.int32Data!=null&&i.hasOwnProperty("int32Data")){if(!Array.isArray(i.int32Data))return"int32Data: array expected";for(var c=0;c<i.int32Data.length;++c)if(!a.isInteger(i.int32Data[c]))return"int32Data: integer[] expected"}if(i.stringData!=null&&i.hasOwnProperty("stringData")){if(!Array.isArray(i.stringData))return"stringData: array expected";for(var c=0;c<i.stringData.length;++c)if(!(i.stringData[c]&&typeof i.stringData[c].length=="number"||a.isString(i.stringData[c])))return"stringData: buffer[] expected"}if(i.int64Data!=null&&i.hasOwnProperty("int64Data")){if(!Array.isArray(i.int64Data))return"int64Data: array expected";for(var c=0;c<i.int64Data.length;++c)if(!a.isInteger(i.int64Data[c])&&!(i.int64Data[c]&&a.isInteger(i.int64Data[c].low)&&a.isInteger(i.int64Data[c].high)))return"int64Data: integer|Long[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.rawData!=null&&i.hasOwnProperty("rawData")&&!(i.rawData&&typeof i.rawData.length=="number"||a.isString(i.rawData)))return"rawData: buffer expected";if(i.externalData!=null&&i.hasOwnProperty("externalData")){if(!Array.isArray(i.externalData))return"externalData: array expected";for(var c=0;c<i.externalData.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.externalData[c]);if(f)return"externalData."+f}}if(i.dataLocation!=null&&i.hasOwnProperty("dataLocation"))switch(i.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(i.doubleData!=null&&i.hasOwnProperty("doubleData")){if(!Array.isArray(i.doubleData))return"doubleData: array expected";for(var c=0;c<i.doubleData.length;++c)if(typeof i.doubleData[c]!="number")return"doubleData: number[] expected"}if(i.uint64Data!=null&&i.hasOwnProperty("uint64Data")){if(!Array.isArray(i.uint64Data))return"uint64Data: array expected";for(var c=0;c<i.uint64Data.length;++c)if(!a.isInteger(i.uint64Data[c])&&!(i.uint64Data[c]&&a.isInteger(i.uint64Data[c].low)&&a.isInteger(i.uint64Data[c].high)))return"uint64Data: integer|Long[] expected"}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorProto)return i;var c=new u.onnx.TensorProto;if(i.dims){if(!Array.isArray(i.dims))throw TypeError(".onnx.TensorProto.dims: array expected");c.dims=[];for(var f=0;f<i.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(i.dims[f])).unsigned=!1:typeof i.dims[f]=="string"?c.dims[f]=parseInt(i.dims[f],10):typeof i.dims[f]=="number"?c.dims[f]=i.dims[f]:typeof i.dims[f]=="object"&&(c.dims[f]=new a.LongBits(i.dims[f].low>>>0,i.dims[f].high>>>0).toNumber())}if(i.dataType!=null&&(c.dataType=i.dataType|0),i.segment!=null){if(typeof i.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");c.segment=u.onnx.TensorProto.Segment.fromObject(i.segment)}if(i.floatData){if(!Array.isArray(i.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");c.floatData=[];for(var f=0;f<i.floatData.length;++f)c.floatData[f]=Number(i.floatData[f])}if(i.int32Data){if(!Array.isArray(i.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");c.int32Data=[];for(var f=0;f<i.int32Data.length;++f)c.int32Data[f]=i.int32Data[f]|0}if(i.stringData){if(!Array.isArray(i.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");c.stringData=[];for(var f=0;f<i.stringData.length;++f)typeof i.stringData[f]=="string"?a.base64.decode(i.stringData[f],c.stringData[f]=a.newBuffer(a.base64.length(i.stringData[f])),0):i.stringData[f].length>=0&&(c.stringData[f]=i.stringData[f])}if(i.int64Data){if(!Array.isArray(i.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");c.int64Data=[];for(var f=0;f<i.int64Data.length;++f)a.Long?(c.int64Data[f]=a.Long.fromValue(i.int64Data[f])).unsigned=!1:typeof i.int64Data[f]=="string"?c.int64Data[f]=parseInt(i.int64Data[f],10):typeof i.int64Data[f]=="number"?c.int64Data[f]=i.int64Data[f]:typeof i.int64Data[f]=="object"&&(c.int64Data[f]=new a.LongBits(i.int64Data[f].low>>>0,i.int64Data[f].high>>>0).toNumber())}if(i.name!=null&&(c.name=String(i.name)),i.docString!=null&&(c.docString=String(i.docString)),i.rawData!=null&&(typeof i.rawData=="string"?a.base64.decode(i.rawData,c.rawData=a.newBuffer(a.base64.length(i.rawData)),0):i.rawData.length>=0&&(c.rawData=i.rawData)),i.externalData){if(!Array.isArray(i.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");c.externalData=[];for(var f=0;f<i.externalData.length;++f){if(typeof i.externalData[f]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");c.externalData[f]=u.onnx.StringStringEntryProto.fromObject(i.externalData[f])}}switch(i.dataLocation){default:if(typeof i.dataLocation=="number"){c.dataLocation=i.dataLocation;break}break;case"DEFAULT":case 0:c.dataLocation=0;break;case"EXTERNAL":case 1:c.dataLocation=1;break}if(i.doubleData){if(!Array.isArray(i.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");c.doubleData=[];for(var f=0;f<i.doubleData.length;++f)c.doubleData[f]=Number(i.doubleData[f])}if(i.uint64Data){if(!Array.isArray(i.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");c.uint64Data=[];for(var f=0;f<i.uint64Data.length;++f)a.Long?(c.uint64Data[f]=a.Long.fromValue(i.uint64Data[f])).unsigned=!0:typeof i.uint64Data[f]=="string"?c.uint64Data[f]=parseInt(i.uint64Data[f],10):typeof i.uint64Data[f]=="number"?c.uint64Data[f]=i.uint64Data[f]:typeof i.uint64Data[f]=="object"&&(c.uint64Data[f]=new a.LongBits(i.uint64Data[f].low>>>0,i.uint64Data[f].high>>>0).toNumber(!0))}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),c.defaults&&(f.dataType=0,f.segment=null,f.name="",c.bytes===String?f.rawData="":(f.rawData=[],c.bytes!==Array&&(f.rawData=a.newBuffer(f.rawData))),f.docString="",f.dataLocation=c.enums===String?"DEFAULT":0),i.dims&&i.dims.length){f.dims=[];for(var d=0;d<i.dims.length;++d)typeof i.dims[d]=="number"?f.dims[d]=c.longs===String?String(i.dims[d]):i.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(i.dims[d]):c.longs===Number?new a.LongBits(i.dims[d].low>>>0,i.dims[d].high>>>0).toNumber():i.dims[d]}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&(f.dataType=i.dataType),i.segment!=null&&i.hasOwnProperty("segment")&&(f.segment=u.onnx.TensorProto.Segment.toObject(i.segment,c)),i.floatData&&i.floatData.length){f.floatData=[];for(var d=0;d<i.floatData.length;++d)f.floatData[d]=c.json&&!isFinite(i.floatData[d])?String(i.floatData[d]):i.floatData[d]}if(i.int32Data&&i.int32Data.length){f.int32Data=[];for(var d=0;d<i.int32Data.length;++d)f.int32Data[d]=i.int32Data[d]}if(i.stringData&&i.stringData.length){f.stringData=[];for(var d=0;d<i.stringData.length;++d)f.stringData[d]=c.bytes===String?a.base64.encode(i.stringData[d],0,i.stringData[d].length):c.bytes===Array?Array.prototype.slice.call(i.stringData[d]):i.stringData[d]}if(i.int64Data&&i.int64Data.length){f.int64Data=[];for(var d=0;d<i.int64Data.length;++d)typeof i.int64Data[d]=="number"?f.int64Data[d]=c.longs===String?String(i.int64Data[d]):i.int64Data[d]:f.int64Data[d]=c.longs===String?a.Long.prototype.toString.call(i.int64Data[d]):c.longs===Number?new a.LongBits(i.int64Data[d].low>>>0,i.int64Data[d].high>>>0).toNumber():i.int64Data[d]}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.rawData!=null&&i.hasOwnProperty("rawData")&&(f.rawData=c.bytes===String?a.base64.encode(i.rawData,0,i.rawData.length):c.bytes===Array?Array.prototype.slice.call(i.rawData):i.rawData),i.doubleData&&i.doubleData.length){f.doubleData=[];for(var d=0;d<i.doubleData.length;++d)f.doubleData[d]=c.json&&!isFinite(i.doubleData[d])?String(i.doubleData[d]):i.doubleData[d]}if(i.uint64Data&&i.uint64Data.length){f.uint64Data=[];for(var d=0;d<i.uint64Data.length;++d)typeof i.uint64Data[d]=="number"?f.uint64Data[d]=c.longs===String?String(i.uint64Data[d]):i.uint64Data[d]:f.uint64Data[d]=c.longs===String?a.Long.prototype.toString.call(i.uint64Data[d]):c.longs===Number?new a.LongBits(i.uint64Data[d].low>>>0,i.uint64Data[d].high>>>0).toNumber(!0):i.uint64Data[d]}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.externalData&&i.externalData.length){f.externalData=[];for(var d=0;d<i.externalData.length;++d)f.externalData[d]=u.onnx.StringStringEntryProto.toObject(i.externalData[d],c)}return i.dataLocation!=null&&i.hasOwnProperty("dataLocation")&&(f.dataLocation=c.enums===String?u.onnx.TensorProto.DataLocation[i.dataLocation]===void 0?i.dataLocation:u.onnx.TensorProto.DataLocation[i.dataLocation]:i.dataLocation),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorProto"},l.DataType=function(){var i={},c=Object.create(i);return c[i[0]="UNDEFINED"]=0,c[i[1]="FLOAT"]=1,c[i[2]="UINT8"]=2,c[i[3]="INT8"]=3,c[i[4]="UINT16"]=4,c[i[5]="INT16"]=5,c[i[6]="INT32"]=6,c[i[7]="INT64"]=7,c[i[8]="STRING"]=8,c[i[9]="BOOL"]=9,c[i[10]="FLOAT16"]=10,c[i[11]="DOUBLE"]=11,c[i[12]="UINT32"]=12,c[i[13]="UINT64"]=13,c[i[14]="COMPLEX64"]=14,c[i[15]="COMPLEX128"]=15,c[i[16]="BFLOAT16"]=16,c[i[17]="FLOAT8E4M3FN"]=17,c[i[18]="FLOAT8E4M3FNUZ"]=18,c[i[19]="FLOAT8E5M2"]=19,c[i[20]="FLOAT8E5M2FNUZ"]=20,c}(),l.Segment=function(){function i(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}return i.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,i.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,i.create=function(c){return new i(c)},i.encode=function(c,f){return f||(f=o.create()),c.begin!=null&&Object.hasOwnProperty.call(c,"begin")&&f.uint32(8).int64(c.begin),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&f.uint32(16).int64(c.end),f},i.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},i.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TensorProto.Segment;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.begin=c.int64();break}case 2:{h.end=c.int64();break}default:c.skipType(p&7);break}}return h},i.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},i.verify=function(c){return typeof c!="object"||c===null?"object expected":c.begin!=null&&c.hasOwnProperty("begin")&&!a.isInteger(c.begin)&&!(c.begin&&a.isInteger(c.begin.low)&&a.isInteger(c.begin.high))?"begin: integer|Long expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)&&!(c.end&&a.isInteger(c.end.low)&&a.isInteger(c.end.high))?"end: integer|Long expected":null},i.fromObject=function(c){if(c instanceof u.onnx.TensorProto.Segment)return c;var f=new u.onnx.TensorProto.Segment;return c.begin!=null&&(a.Long?(f.begin=a.Long.fromValue(c.begin)).unsigned=!1:typeof c.begin=="string"?f.begin=parseInt(c.begin,10):typeof c.begin=="number"?f.begin=c.begin:typeof c.begin=="object"&&(f.begin=new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber())),c.end!=null&&(a.Long?(f.end=a.Long.fromValue(c.end)).unsigned=!1:typeof c.end=="string"?f.end=parseInt(c.end,10):typeof c.end=="number"?f.end=c.end:typeof c.end=="object"&&(f.end=new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber())),f},i.toObject=function(c,f){f||(f={});var d={};if(f.defaults){if(a.Long){var h=new a.Long(0,0,!1);d.begin=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.begin=f.longs===String?"0":0;if(a.Long){var h=new a.Long(0,0,!1);d.end=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.end=f.longs===String?"0":0}return c.begin!=null&&c.hasOwnProperty("begin")&&(typeof c.begin=="number"?d.begin=f.longs===String?String(c.begin):c.begin:d.begin=f.longs===String?a.Long.prototype.toString.call(c.begin):f.longs===Number?new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber():c.begin),c.end!=null&&c.hasOwnProperty("end")&&(typeof c.end=="number"?d.end=f.longs===String?String(c.end):c.end:d.end=f.longs===String?a.Long.prototype.toString.call(c.end):f.longs===Number?new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber():c.end),d},i.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},i.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TensorProto.Segment"},i}(),l.DataLocation=function(){var i={},c=Object.create(i);return c[i[0]="DEFAULT"]=0,c[i[1]="EXTERNAL"]=1,c}(),l}(),s.SparseTensorProto=function(){function l(i){if(this.dims=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.values=null,l.prototype.indices=null,l.prototype.dims=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.values!=null&&Object.hasOwnProperty.call(i,"values")&&u.onnx.TensorProto.encode(i.values,c.uint32(10).fork()).ldelim(),i.indices!=null&&Object.hasOwnProperty.call(i,"indices")&&u.onnx.TensorProto.encode(i.indices,c.uint32(18).fork()).ldelim(),i.dims!=null&&i.dims.length){c.uint32(26).fork();for(var f=0;f<i.dims.length;++f)c.int64(i.dims[f]);c.ldelim()}return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.SparseTensorProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.values=u.onnx.TensorProto.decode(i,i.uint32());break}case 2:{d.indices=u.onnx.TensorProto.decode(i,i.uint32());break}case 3:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.dims.push(i.int64());else d.dims.push(i.int64());break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.values!=null&&i.hasOwnProperty("values")){var c=u.onnx.TensorProto.verify(i.values);if(c)return"values."+c}if(i.indices!=null&&i.hasOwnProperty("indices")){var c=u.onnx.TensorProto.verify(i.indices);if(c)return"indices."+c}if(i.dims!=null&&i.hasOwnProperty("dims")){if(!Array.isArray(i.dims))return"dims: array expected";for(var f=0;f<i.dims.length;++f)if(!a.isInteger(i.dims[f])&&!(i.dims[f]&&a.isInteger(i.dims[f].low)&&a.isInteger(i.dims[f].high)))return"dims: integer|Long[] expected"}return null},l.fromObject=function(i){if(i instanceof u.onnx.SparseTensorProto)return i;var c=new u.onnx.SparseTensorProto;if(i.values!=null){if(typeof i.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");c.values=u.onnx.TensorProto.fromObject(i.values)}if(i.indices!=null){if(typeof i.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");c.indices=u.onnx.TensorProto.fromObject(i.indices)}if(i.dims){if(!Array.isArray(i.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");c.dims=[];for(var f=0;f<i.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(i.dims[f])).unsigned=!1:typeof i.dims[f]=="string"?c.dims[f]=parseInt(i.dims[f],10):typeof i.dims[f]=="number"?c.dims[f]=i.dims[f]:typeof i.dims[f]=="object"&&(c.dims[f]=new a.LongBits(i.dims[f].low>>>0,i.dims[f].high>>>0).toNumber())}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[]),c.defaults&&(f.values=null,f.indices=null),i.values!=null&&i.hasOwnProperty("values")&&(f.values=u.onnx.TensorProto.toObject(i.values,c)),i.indices!=null&&i.hasOwnProperty("indices")&&(f.indices=u.onnx.TensorProto.toObject(i.indices,c)),i.dims&&i.dims.length){f.dims=[];for(var d=0;d<i.dims.length;++d)typeof i.dims[d]=="number"?f.dims[d]=c.longs===String?String(i.dims[d]):i.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(i.dims[d]):c.longs===Number?new a.LongBits(i.dims[d].low>>>0,i.dims[d].high>>>0).toNumber():i.dims[d]}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.SparseTensorProto"},l}(),s.TensorShapeProto=function(){function l(i){if(this.dim=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.dim=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.dim!=null&&i.dim.length)for(var f=0;f<i.dim.length;++f)u.onnx.TensorShapeProto.Dimension.encode(i.dim[f],c.uint32(10).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorShapeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.dim&&d.dim.length||(d.dim=[]),d.dim.push(u.onnx.TensorShapeProto.Dimension.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dim!=null&&i.hasOwnProperty("dim")){if(!Array.isArray(i.dim))return"dim: array expected";for(var c=0;c<i.dim.length;++c){var f=u.onnx.TensorShapeProto.Dimension.verify(i.dim[c]);if(f)return"dim."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorShapeProto)return i;var c=new u.onnx.TensorShapeProto;if(i.dim){if(!Array.isArray(i.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");c.dim=[];for(var f=0;f<i.dim.length;++f){if(typeof i.dim[f]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");c.dim[f]=u.onnx.TensorShapeProto.Dimension.fromObject(i.dim[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dim=[]),i.dim&&i.dim.length){f.dim=[];for(var d=0;d<i.dim.length;++d)f.dim[d]=u.onnx.TensorShapeProto.Dimension.toObject(i.dim[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorShapeProto"},l.Dimension=function(){function i(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}i.prototype.dimValue=null,i.prototype.dimParam=null,i.prototype.denotation="";var c;return Object.defineProperty(i.prototype,"value",{get:a.oneOfGetter(c=["dimValue","dimParam"]),set:a.oneOfSetter(c)}),i.create=function(f){return new i(f)},i.encode=function(f,d){return d||(d=o.create()),f.dimValue!=null&&Object.hasOwnProperty.call(f,"dimValue")&&d.uint32(8).int64(f.dimValue),f.dimParam!=null&&Object.hasOwnProperty.call(f,"dimParam")&&d.uint32(18).string(f.dimParam),f.denotation!=null&&Object.hasOwnProperty.call(f,"denotation")&&d.uint32(26).string(f.denotation),d},i.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},i.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TensorShapeProto.Dimension;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.dimValue=f.int64();break}case 2:{p.dimParam=f.string();break}case 3:{p.denotation=f.string();break}default:f.skipType(m&7);break}}return p},i.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},i.verify=function(f){if(typeof f!="object"||f===null)return"object expected";var d={};if(f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(d.value=1,!a.isInteger(f.dimValue)&&!(f.dimValue&&a.isInteger(f.dimValue.low)&&a.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(f.dimParam!=null&&f.hasOwnProperty("dimParam")){if(d.value===1)return"value: multiple values";if(d.value=1,!a.isString(f.dimParam))return"dimParam: string expected"}return f.denotation!=null&&f.hasOwnProperty("denotation")&&!a.isString(f.denotation)?"denotation: string expected":null},i.fromObject=function(f){if(f instanceof u.onnx.TensorShapeProto.Dimension)return f;var d=new u.onnx.TensorShapeProto.Dimension;return f.dimValue!=null&&(a.Long?(d.dimValue=a.Long.fromValue(f.dimValue)).unsigned=!1:typeof f.dimValue=="string"?d.dimValue=parseInt(f.dimValue,10):typeof f.dimValue=="number"?d.dimValue=f.dimValue:typeof f.dimValue=="object"&&(d.dimValue=new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),f.dimParam!=null&&(d.dimParam=String(f.dimParam)),f.denotation!=null&&(d.denotation=String(f.denotation)),d},i.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.denotation=""),f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(typeof f.dimValue=="number"?h.dimValue=d.longs===String?String(f.dimValue):f.dimValue:h.dimValue=d.longs===String?a.Long.prototype.toString.call(f.dimValue):d.longs===Number?new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,d.oneofs&&(h.value="dimValue")),f.dimParam!=null&&f.hasOwnProperty("dimParam")&&(h.dimParam=f.dimParam,d.oneofs&&(h.value="dimParam")),f.denotation!=null&&f.hasOwnProperty("denotation")&&(h.denotation=f.denotation),h},i.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},i.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TensorShapeProto.Dimension"},i}(),l}(),s.TypeProto=function(){function l(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}l.prototype.tensorType=null,l.prototype.sequenceType=null,l.prototype.mapType=null,l.prototype.optionalType=null,l.prototype.sparseTensorType=null,l.prototype.denotation="";var i;return Object.defineProperty(l.prototype,"value",{get:a.oneOfGetter(i=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:a.oneOfSetter(i)}),l.create=function(c){return new l(c)},l.encode=function(c,f){return f||(f=o.create()),c.tensorType!=null&&Object.hasOwnProperty.call(c,"tensorType")&&u.onnx.TypeProto.Tensor.encode(c.tensorType,f.uint32(10).fork()).ldelim(),c.sequenceType!=null&&Object.hasOwnProperty.call(c,"sequenceType")&&u.onnx.TypeProto.Sequence.encode(c.sequenceType,f.uint32(34).fork()).ldelim(),c.mapType!=null&&Object.hasOwnProperty.call(c,"mapType")&&u.onnx.TypeProto.Map.encode(c.mapType,f.uint32(42).fork()).ldelim(),c.denotation!=null&&Object.hasOwnProperty.call(c,"denotation")&&f.uint32(50).string(c.denotation),c.sparseTensorType!=null&&Object.hasOwnProperty.call(c,"sparseTensorType")&&u.onnx.TypeProto.SparseTensor.encode(c.sparseTensorType,f.uint32(66).fork()).ldelim(),c.optionalType!=null&&Object.hasOwnProperty.call(c,"optionalType")&&u.onnx.TypeProto.Optional.encode(c.optionalType,f.uint32(74).fork()).ldelim(),f},l.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},l.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TypeProto;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.tensorType=u.onnx.TypeProto.Tensor.decode(c,c.uint32());break}case 4:{h.sequenceType=u.onnx.TypeProto.Sequence.decode(c,c.uint32());break}case 5:{h.mapType=u.onnx.TypeProto.Map.decode(c,c.uint32());break}case 9:{h.optionalType=u.onnx.TypeProto.Optional.decode(c,c.uint32());break}case 8:{h.sparseTensorType=u.onnx.TypeProto.SparseTensor.decode(c,c.uint32());break}case 6:{h.denotation=c.string();break}default:c.skipType(p&7);break}}return h},l.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},l.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var f={};if(c.tensorType!=null&&c.hasOwnProperty("tensorType")){f.value=1;{var d=u.onnx.TypeProto.Tensor.verify(c.tensorType);if(d)return"tensorType."+d}}if(c.sequenceType!=null&&c.hasOwnProperty("sequenceType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Sequence.verify(c.sequenceType);if(d)return"sequenceType."+d}}if(c.mapType!=null&&c.hasOwnProperty("mapType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Map.verify(c.mapType);if(d)return"mapType."+d}}if(c.optionalType!=null&&c.hasOwnProperty("optionalType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Optional.verify(c.optionalType);if(d)return"optionalType."+d}}if(c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.SparseTensor.verify(c.sparseTensorType);if(d)return"sparseTensorType."+d}}return c.denotation!=null&&c.hasOwnProperty("denotation")&&!a.isString(c.denotation)?"denotation: string expected":null},l.fromObject=function(c){if(c instanceof u.onnx.TypeProto)return c;var f=new u.onnx.TypeProto;if(c.tensorType!=null){if(typeof c.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=u.onnx.TypeProto.Tensor.fromObject(c.tensorType)}if(c.sequenceType!=null){if(typeof c.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");f.sequenceType=u.onnx.TypeProto.Sequence.fromObject(c.sequenceType)}if(c.mapType!=null){if(typeof c.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");f.mapType=u.onnx.TypeProto.Map.fromObject(c.mapType)}if(c.optionalType!=null){if(typeof c.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");f.optionalType=u.onnx.TypeProto.Optional.fromObject(c.optionalType)}if(c.sparseTensorType!=null){if(typeof c.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");f.sparseTensorType=u.onnx.TypeProto.SparseTensor.fromObject(c.sparseTensorType)}return c.denotation!=null&&(f.denotation=String(c.denotation)),f},l.toObject=function(c,f){f||(f={});var d={};return f.defaults&&(d.denotation=""),c.tensorType!=null&&c.hasOwnProperty("tensorType")&&(d.tensorType=u.onnx.TypeProto.Tensor.toObject(c.tensorType,f),f.oneofs&&(d.value="tensorType")),c.sequenceType!=null&&c.hasOwnProperty("sequenceType")&&(d.sequenceType=u.onnx.TypeProto.Sequence.toObject(c.sequenceType,f),f.oneofs&&(d.value="sequenceType")),c.mapType!=null&&c.hasOwnProperty("mapType")&&(d.mapType=u.onnx.TypeProto.Map.toObject(c.mapType,f),f.oneofs&&(d.value="mapType")),c.denotation!=null&&c.hasOwnProperty("denotation")&&(d.denotation=c.denotation),c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")&&(d.sparseTensorType=u.onnx.TypeProto.SparseTensor.toObject(c.sparseTensorType,f),f.oneofs&&(d.value="sparseTensorType")),c.optionalType!=null&&c.hasOwnProperty("optionalType")&&(d.optionalType=u.onnx.TypeProto.Optional.toObject(c.optionalType,f),f.oneofs&&(d.value="optionalType")),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TypeProto"},l.Tensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Tensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Tensor)return f;var d=new u.onnx.TypeProto.Tensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Tensor"},c}(),l.Sequence=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Sequence;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Sequence)return f;var d=new u.onnx.TypeProto.Sequence;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Sequence"},c}(),l.Map=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.keyType=0,c.prototype.valueType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.keyType!=null&&Object.hasOwnProperty.call(f,"keyType")&&d.uint32(8).int32(f.keyType),f.valueType!=null&&Object.hasOwnProperty.call(f,"valueType")&&u.onnx.TypeProto.encode(f.valueType,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Map;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.keyType=f.int32();break}case 2:{p.valueType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.keyType!=null&&f.hasOwnProperty("keyType")&&!a.isInteger(f.keyType))return"keyType: integer expected";if(f.valueType!=null&&f.hasOwnProperty("valueType")){var d=u.onnx.TypeProto.verify(f.valueType);if(d)return"valueType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Map)return f;var d=new u.onnx.TypeProto.Map;if(f.keyType!=null&&(d.keyType=f.keyType|0),f.valueType!=null){if(typeof f.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");d.valueType=u.onnx.TypeProto.fromObject(f.valueType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.keyType=0,h.valueType=null),f.keyType!=null&&f.hasOwnProperty("keyType")&&(h.keyType=f.keyType),f.valueType!=null&&f.hasOwnProperty("valueType")&&(h.valueType=u.onnx.TypeProto.toObject(f.valueType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Map"},c}(),l.Optional=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Optional;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Optional)return f;var d=new u.onnx.TypeProto.Optional;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Optional"},c}(),l.SparseTensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.SparseTensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.SparseTensor)return f;var d=new u.onnx.TypeProto.SparseTensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.SparseTensor"},c}(),l}(),s.OperatorSetIdProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.domain="",l.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(10).string(i.domain),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&c.uint32(16).int64(i.version),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.OperatorSetIdProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.domain=i.string();break}case 2:{d.version=i.int64();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){return typeof i!="object"||i===null?"object expected":i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain)?"domain: string expected":i.version!=null&&i.hasOwnProperty("version")&&!a.isInteger(i.version)&&!(i.version&&a.isInteger(i.version.low)&&a.isInteger(i.version.high))?"version: integer|Long expected":null},l.fromObject=function(i){if(i instanceof u.onnx.OperatorSetIdProto)return i;var c=new u.onnx.OperatorSetIdProto;return i.domain!=null&&(c.domain=String(i.domain)),i.version!=null&&(a.Long?(c.version=a.Long.fromValue(i.version)).unsigned=!1:typeof i.version=="string"?c.version=parseInt(i.version,10):typeof i.version=="number"?c.version=i.version:typeof i.version=="object"&&(c.version=new a.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber())),c},l.toObject=function(i,c){c||(c={});var f={};if(c.defaults)if(f.domain="",a.Long){var d=new a.Long(0,0,!1);f.version=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.version=c.longs===String?"0":0;return i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.version!=null&&i.hasOwnProperty("version")&&(typeof i.version=="number"?f.version=c.longs===String?String(i.version):i.version:f.version=c.longs===String?a.Long.prototype.toString.call(i.version):c.longs===Number?new a.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber():i.version),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.OperatorSetIdProto"},l}(),s.OperatorStatus=function(){var l={},i=Object.create(l);return i[l[0]="EXPERIMENTAL"]=0,i[l[1]="STABLE"]=1,i}(),s.FunctionProto=function(){function l(i){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.attribute=a.emptyArray,l.prototype.attributeProto=a.emptyArray,l.prototype.node=a.emptyArray,l.prototype.docString="",l.prototype.opsetImport=a.emptyArray,l.prototype.domain="",l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)c.uint32(34).string(i.input[f]);if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)c.uint32(42).string(i.output[f]);if(i.attribute!=null&&i.attribute.length)for(var f=0;f<i.attribute.length;++f)c.uint32(50).string(i.attribute[f]);if(i.node!=null&&i.node.length)for(var f=0;f<i.node.length;++f)u.onnx.NodeProto.encode(i.node[f],c.uint32(58).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(66).string(i.docString),i.opsetImport!=null&&i.opsetImport.length)for(var f=0;f<i.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(i.opsetImport[f],c.uint32(74).fork()).ldelim();if(i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(82).string(i.domain),i.attributeProto!=null&&i.attributeProto.length)for(var f=0;f<i.attributeProto.length;++f)u.onnx.AttributeProto.encode(i.attributeProto[f],c.uint32(90).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.FunctionProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 4:{d.input&&d.input.length||(d.input=[]),d.input.push(i.string());break}case 5:{d.output&&d.output.length||(d.output=[]),d.output.push(i.string());break}case 6:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(i.string());break}case 11:{d.attributeProto&&d.attributeProto.length||(d.attributeProto=[]),d.attributeProto.push(u.onnx.AttributeProto.decode(i,i.uint32()));break}case 7:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(i,i.uint32()));break}case 8:{d.docString=i.string();break}case 9:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(i,i.uint32()));break}case 10:{d.domain=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c)if(!a.isString(i.input[c]))return"input: string[] expected"}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c)if(!a.isString(i.output[c]))return"output: string[] expected"}if(i.attribute!=null&&i.hasOwnProperty("attribute")){if(!Array.isArray(i.attribute))return"attribute: array expected";for(var c=0;c<i.attribute.length;++c)if(!a.isString(i.attribute[c]))return"attribute: string[] expected"}if(i.attributeProto!=null&&i.hasOwnProperty("attributeProto")){if(!Array.isArray(i.attributeProto))return"attributeProto: array expected";for(var c=0;c<i.attributeProto.length;++c){var f=u.onnx.AttributeProto.verify(i.attributeProto[c]);if(f)return"attributeProto."+f}}if(i.node!=null&&i.hasOwnProperty("node")){if(!Array.isArray(i.node))return"node: array expected";for(var c=0;c<i.node.length;++c){var f=u.onnx.NodeProto.verify(i.node[c]);if(f)return"node."+f}}if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.opsetImport!=null&&i.hasOwnProperty("opsetImport")){if(!Array.isArray(i.opsetImport))return"opsetImport: array expected";for(var c=0;c<i.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(i.opsetImport[c]);if(f)return"opsetImport."+f}}return i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain)?"domain: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.FunctionProto)return i;var c=new u.onnx.FunctionProto;if(i.name!=null&&(c.name=String(i.name)),i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.FunctionProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f)c.input[f]=String(i.input[f])}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.FunctionProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f)c.output[f]=String(i.output[f])}if(i.attribute){if(!Array.isArray(i.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");c.attribute=[];for(var f=0;f<i.attribute.length;++f)c.attribute[f]=String(i.attribute[f])}if(i.attributeProto){if(!Array.isArray(i.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");c.attributeProto=[];for(var f=0;f<i.attributeProto.length;++f){if(typeof i.attributeProto[f]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");c.attributeProto[f]=u.onnx.AttributeProto.fromObject(i.attributeProto[f])}}if(i.node){if(!Array.isArray(i.node))throw TypeError(".onnx.FunctionProto.node: array expected");c.node=[];for(var f=0;f<i.node.length;++f){if(typeof i.node[f]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(i.node[f])}}if(i.docString!=null&&(c.docString=String(i.docString)),i.opsetImport){if(!Array.isArray(i.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<i.opsetImport.length;++f){if(typeof i.opsetImport[f]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(i.opsetImport[f])}}return i.domain!=null&&(c.domain=String(i.domain)),c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[],f.node=[],f.opsetImport=[],f.attributeProto=[]),c.defaults&&(f.name="",f.docString="",f.domain=""),i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=i.input[d]}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=i.output[d]}if(i.attribute&&i.attribute.length){f.attribute=[];for(var d=0;d<i.attribute.length;++d)f.attribute[d]=i.attribute[d]}if(i.node&&i.node.length){f.node=[];for(var d=0;d<i.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(i.node[d],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.opsetImport&&i.opsetImport.length){f.opsetImport=[];for(var d=0;d<i.opsetImport.length;++d)f.opsetImport[d]=u.onnx.OperatorSetIdProto.toObject(i.opsetImport[d],c)}if(i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.attributeProto&&i.attributeProto.length){f.attributeProto=[];for(var d=0;d<i.attributeProto.length;++d)f.attributeProto[d]=u.onnx.AttributeProto.toObject(i.attributeProto[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.FunctionProto"},l}(),s}(),e.exports=u});function vd(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function Z0(t){return new TextDecoder().decode(t)}var Bt,Ul,k2,Ri,NT,An,Ni,Re,K0,bd,Jl,ec,dt=Y(()=>{"use strict";Om(),OT(),Bt=Vs(rc()),Gs(),Ul=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},k2=class{static preprocessInputShapes(t,e){let r=t.length===1?[1,t[0]]:t,n=e.length===1?[e[0],1]:e;return[r,n]}static postprocessOutputShape(t,e,r){e===1&&t.splice(t.length-2,1),r===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},Ri=class Hl{static calcShape(e,r,n=!1){let o=e.length,a=r.length;if(o===0)return r;if(a===0)return e;let u=Math.max(e.length,r.length),s=new Array(u);if(n){if(o<2||a<2)return;let l=k2.calcMatMulShape([e[o-2],e[o-1]],[r[a-2],r[a-1]]);if(l===void 0)return;[s[u-2],s[u-1]]=l}for(let l=n?3:1;l<=u;l++){let i=o-l<0?1:e[o-l],c=a-l<0?1:r[a-l];if(i!==c&&i>1&&c>1)return;s[u-l]=Math.max(i,c)}return s}static index(e,r){let n=new Array(r.length);return Hl.fillIndex(e,r,n),n}static fillIndex(e,r,n){let o=e.length-r.length;for(let a=0;a<r.length;a++)n[a]=e[o+a]%r[a]}static calc(e,r,n,o,a){let u=Hl.calcShape(e.dims,r.dims);if(u){if(o&&!Re.areEqual(u,e.dims))return;let s=Re.size(u),l=o?e:new Sn(u,a||e.type);if(u.length===0)l.set([],n(e.get([]),r.get([])));else{let i=new Array(u.length),c=new Array(e.dims.length),f=new Array(r.dims.length),d=0,h=0,p=!1,m=!1;e.dims.length===0&&(d=e.get([]),p=!0),r.dims.length===0&&(h=r.get([]),m=!0);let v;for(let x=0;x<s;x++){v=x;for(let y=u.length-1;y>=0;y--)i[y]=v%u[y],v=Math.floor(v/u[y]);p||(Hl.fillIndex(i,e.dims,c),d=e.get(c)),m||(Hl.fillIndex(i,r.dims,f),h=r.get(f)),l.set(i,n(d,h))}}return l}}static isValidBroadcast(e,r){let n=e.length,o=r.length;if(n>o)return!1;for(let a=1;a<=n;a++)if(e[n-a]!==1&&e[n-a]!==r[o-a])return!1;return!0}static getBroadcastDims(e,r){let n=e.length,o=[];for(let a=0;a<n;a++){let u=n-1-a,s=e[u]||1;(r[r.length-1-a]||1)>1&&s===1&&o.unshift(u)}return o}},NT=class{static getShapeOfGemmResult(t,e,r,n,o){if(t.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let a,u,s;e?(a=t[1],u=t[0]):(a=t[0],u=t[1]);let l=-1;if(n?(s=r[0],l=1):(s=r[1],l=0),r[l]!==u)throw new Error("dimension mismatch");if(a<=0||s<=0||u<=0)throw new Error("invalid shape specified");if(o&&!Ri.isValidBroadcast(o,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,u]}},An=class Q0{static tensorDataTypeFromProto(e){switch(e){case Bt.onnx.TensorProto.DataType.INT8:return"int8";case Bt.onnx.TensorProto.DataType.UINT8:return"uint8";case Bt.onnx.TensorProto.DataType.BOOL:return"bool";case Bt.onnx.TensorProto.DataType.INT16:return"int16";case Bt.onnx.TensorProto.DataType.UINT16:return"uint16";case Bt.onnx.TensorProto.DataType.INT32:return"int32";case Bt.onnx.TensorProto.DataType.UINT32:return"uint32";case Bt.onnx.TensorProto.DataType.FLOAT:return"float32";case Bt.onnx.TensorProto.DataType.DOUBLE:return"float64";case Bt.onnx.TensorProto.DataType.STRING:return"string";case Bt.onnx.TensorProto.DataType.INT64:return"int32";case Bt.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Bt.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return Bt.onnx.TensorProto.DataType.INT8;case"uint8":return Bt.onnx.TensorProto.DataType.UINT8;case"bool":return Bt.onnx.TensorProto.DataType.BOOL;case"int16":return Bt.onnx.TensorProto.DataType.INT16;case"uint16":return Bt.onnx.TensorProto.DataType.UINT16;case"int32":return Bt.onnx.TensorProto.DataType.INT32;case"uint32":return Bt.onnx.TensorProto.DataType.UINT32;case"float32":return Bt.onnx.TensorProto.DataType.FLOAT;case"float64":return Bt.onnx.TensorProto.DataType.DOUBLE;case"string":return Bt.onnx.TensorProto.DataType.STRING;case"int64":return Bt.onnx.TensorProto.DataType.INT64;case"uint64":return Bt.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(r=>$o.isLong(r)?r.toNumber():r)}static tensorValueTypeFromProto(e){return{tensorType:Q0.tensorDataTypeFromProto(e.elemType),shape:{dims:Q0.tensorDimsFromProto(e.shape.dim.map(r=>r.dimValue))}}}static tensorDimsFromORTFormat(e){let r=[];for(let n=0;n<e.dimsLength();n++)r.push(Ni.longToNumber(e.dims(n)));return r}static tensorAttributesFromORTFormat(e){let r=[];for(let n=0;n<e.attributesLength();n++)r.push(e.attributes(n));return r}},Ni=class{static longToNumber(t,e){return $o.isLong(t)?t.toNumber():t instanceof B.Long?$o.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return $o.isLong(t)||t instanceof B.Long}},Re=class Lo{static size(e){return Lo.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return Lo.getSizeFromDimensionRange(e,r,e.length)}static sizeToDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${e.length} dimensions.`);return Lo.getSizeFromDimensionRange(e,0,r)}static getSizeFromDimensionRange(e,r,n){let o=1;for(let a=r;a<n;a++){if(e[a]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");o*=e[a]}return o}static computeStrides(e){let r=e.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=e[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*e[o+1];return n}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,r,n){n===void 0&&(n=e.length);let o=0;for(let a=0;a<n;++a)o+=r[a]*e[a];return o}static offsetToIndices(e,r){let n=r.length;if(n===0)return[];if(n===1)return[e*r[0]];let o=new Array(r.length);for(let a=0;a<o.length-1;++a)o[a]=Math.floor(e/r[a]),e-=o[a]*r[a];return o[o.length-1]=e,o}static normalizeAxis(e,r){if(e<-r&&e>=r)throw new Error("unsupported axis for this operation.");return e<0?e+r:e}static normalizeAxes(e,r){return e.map(n=>this.normalizeAxis(n,r))}static incrementIndex(e,r,n){if(r.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(n===void 0)n=r.length;else if(n<=0||n>r.length)throw new Error("Incorrect axis to increment on");for(let o=n-1;o>=0&&(e[o]++,!(e[o]<r[o]));--o)e[o]=0}static calculateReshapedDims(e,r){if(r.length===0){if(e.length===0||Lo.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let n=r.length,o=new Array(n),a=-1,u=1;for(let l=0;l<n;l++){if(r[l]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(r[l]===-1){if(a!==-1)throw new Error("at most one dimension in shape hints can be -1");a=l}else{if(r[l]===0){if(l>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[l]=e[l]}else o[l]=r[l];u*=o[l]}}let s=Lo.size(e);if(a!==-1){if(s%u!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${r}]`);o[a]=s/u}else if(u!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return o}static sortBasedOnPerm(e,r){return r?r.map(n=>e[n]):e.slice().reverse()}static padShape(e,r){let n=e.length;return e.map((o,a)=>o+r[a]+r[a+n])}static areEqual(e,r){return e.length!==r.length?!1:e.every((n,o)=>n===r[o])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let r=1;for(let n of e){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);r*=n}return r}static flattenShape(e,r){r<0&&(r+=e.length);let n=e.reduce((a,u)=>a*u,1),o=e.slice(r).reduce((a,u)=>a*u,1);return[n/o,o]}static squeezeShape(e,r){let n=new Array;r=Lo.normalizeAxes(r,e.length);for(let o=0;o<e.length;o++){let a=r.indexOf(o)>=0;if(a&&e[o]!==1)throw new Error("squeeze an axis of size different than 1");(r.length===0&&e[o]>1||r.length>0&&!a)&&n.push(e[o])}return n}static unsqueezeShape(e,r){let n=new Array(e.length+r.length);n.fill(0);for(let a=0;a<r.length;a++){let u=Lo.normalizeAxis(r[a],n.length);if(u>=n.length)throw new Error("'axes' has an out of range axis");if(n[u]!==0)throw new Error("'axes' has a duplicate axis");n[u]=1}let o=0;for(let a=0;a<n.length;a++)n[a]===0&&(n[a]=e[o++]);if(o!==e.length)throw new Error("the unsqueezed dimension could not be established");return n}},K0=class RT{static splitShape(e,r,n,o){if(n.length===0){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");RT.determineSplit(e[r],o,n)}let a=[],u=[0];for(let s=0;s<n.length;++s){s!==0&&u.push(u[s-1]+n[s-1]);let l=e.slice();l[r]=n[s],a.push(l)}return[a,u]}static determineSplit(e,r,n){if(e%r!==0)throw new Error("cannot split tensor to equal sized parts");for(let o=0;o<r;++o)n.push(e/r)}},bd=class zl{static adjustPoolAttributes(e,r,n,o,a,u){if(!e&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let s=0;s<r.length-2;s++)s>=n.length?n.push(r[s+2]):n[s]=r[s+2];for(let s=0;s<n.length;s++)if(s<o.length){if(o[s]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let s=0;s<n.length;s++)if(s<a.length){if(a[s]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let s=0;s<n.length*2;s++)if(s<u.length){if(u[s]<0)throw new Error("pad should be greater than or equal to 1")}else u.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(u[s]>=n[s]||u[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,r,n,o,a,u){if(u){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<e.length-2;s++)zl.adjustPadAndReturnShape(e[s+2],r[s],n[s],o[s],a,s,s+e.length-2,u)}}static computePoolOutputShape(e,r,n,o,a,u,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return zl.computeShapeHelper(e,r,l,n,o,a,u,s),l}static computeConvOutputShape(e,r,n,o,a,u,s){if(e.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[e[0],r[0]];return zl.computeShapeHelper(!1,e,l,n,o,a,u,s),l}static computeShapeHelper(e,r,n,o,a,u,s,l){if(e)for(let i=0;i<r.length-2;i++)n.push(1);else for(let i=0;i<r.length-2;i++)n.push(zl.adjustPadAndReturnShape(r[i+2],o[i],a[i],u[i],s,i,i+r.length-2,l))}static adjustPadAndReturnShape(e,r,n,o,a,u,s,l){let i=n*(o-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return a[u]=0,a[s]=0,Math.floor((e-i)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let c=((e+r-1)/r-1)*r+o-e;return a[u]=Math.floor(l==="SAME_LOWER"?(c+1)/2:c/2),a[s]=c-a[u],Math.floor((e+c-o)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[u]+a[s]-i)/r+1)}},Jl=-34028234663852886e22,ec=34028234663852886e22});function zV(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function L2(t){switch(t){case Be.onnx.TensorProto.DataType.UINT8:case Be.onnx.TensorProto.DataType.INT8:case Be.onnx.TensorProto.DataType.BOOL:return 1;case Be.onnx.TensorProto.DataType.UINT16:case Be.onnx.TensorProto.DataType.INT16:return 2;case Be.onnx.TensorProto.DataType.FLOAT:case Be.onnx.TensorProto.DataType.INT32:case Be.onnx.TensorProto.DataType.UINT32:return 4;case Be.onnx.TensorProto.DataType.INT64:case Be.onnx.TensorProto.DataType.DOUBLE:case Be.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${Be.onnx.TensorProto.DataType[t]}`)}}function GV(t,e){return new(FT(e))(t)}function FT(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function J0(t,e){if(e===Be.onnx.TensorProto.DataType.INT64||e===md.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===Be.onnx.TensorProto.DataType.UINT32||e===md.TensorDataType.UINT32||e===Be.onnx.TensorProto.DataType.UINT64||e===md.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${Be.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function B2(t,e,r){switch(e){case Be.onnx.TensorProto.DataType.BOOL:case Be.onnx.TensorProto.DataType.UINT8:return t.getUint8(r);case Be.onnx.TensorProto.DataType.INT8:return t.getInt8(r);case Be.onnx.TensorProto.DataType.UINT16:return t.getUint16(r,!0);case Be.onnx.TensorProto.DataType.INT16:return t.getInt16(r,!0);case Be.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(r,!0);case Be.onnx.TensorProto.DataType.INT32:return t.getInt32(r,!0);case Be.onnx.TensorProto.DataType.UINT32:return t.getUint32(r,!0);case Be.onnx.TensorProto.DataType.INT64:return J0($o.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!1),e);case Be.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(r,!0);case Be.onnx.TensorProto.DataType.UINT64:return J0($o.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${Be.onnx.TensorProto.DataType[e]}`)}}var $2,Be,md,Sn,Gs=Y(()=>{"use strict";$2=Vs(DV()),OT(),Id(),Be=Vs(rc()),dt(),md=vt.experimental.fbs,Sn=class yd{constructor(e,r,n,o,a,u=$2.Guid.create()){this.dims=e,this.type=r,this.dataProvider=n,this.asyncDataProvider=o,this.cache=a,this.dataId=u,this.size=Re.validateDimsAndCalcSize(e);let s=this.size,l=n===void 0&&o===void 0&&a===void 0;if(a!==void 0&&a.length!==s)throw new RangeError("Input dims doesn't match data length.");if(r==="string"){if(a!==void 0&&(!Array.isArray(a)||!a.every(i=>typeof i=="string")))throw new TypeError("cache should be a string array");l&&(this.cache=new Array(s))}else{if(a!==void 0){let i=FT(r);if(!(a instanceof i))throw new TypeError(`cache should be type ${i.name}`)}if(l){let i=new ArrayBuffer(s*zV(r));this.cache=GV(i,r)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[Re.indicesToOffset(e,this.strides)]}set(e,r){this.data[Re.indicesToOffset(e,this.strides)]=r}getData(){return U(this,null,function*(){return this.cache===void 0&&(this.cache=yield this.asyncDataProvider(this.dataId)),this.cache})}get strides(){return this._strides||(this._strides=Re.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=An.tensorDataTypeFromProto(e.dataType),n=An.tensorDimsFromProto(e.dims),o=new yd(n,r);if(r==="string")e.stringData.forEach((a,u)=>{o.data[u]=Z0(a)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let a=o.data,u=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),s=L2(e.dataType),l=e.rawData.byteLength/s;if(e.rawData.byteLength%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let i=0;i<l;i++){let c=B2(u,e.dataType,i*s);a[i]=c}}else{let a;switch(e.dataType){case Be.onnx.TensorProto.DataType.FLOAT:a=e.floatData;break;case Be.onnx.TensorProto.DataType.INT32:case Be.onnx.TensorProto.DataType.INT16:case Be.onnx.TensorProto.DataType.UINT16:case Be.onnx.TensorProto.DataType.INT8:case Be.onnx.TensorProto.DataType.UINT8:case Be.onnx.TensorProto.DataType.BOOL:a=e.int32Data;break;case Be.onnx.TensorProto.DataType.INT64:a=e.int64Data;break;case Be.onnx.TensorProto.DataType.DOUBLE:a=e.doubleData;break;case Be.onnx.TensorProto.DataType.UINT32:case Be.onnx.TensorProto.DataType.UINT64:a=e.uint64Data;break;default:throw new Error("unspecific error")}if(a==null)throw new Error("failed to populate data from a tensorproto value");let u=o.data;if(u.length!==a.length)throw new Error("array length mismatch");for(let s=0;s<a.length;s++){let l=a[s];$o.isLong(l)?u[s]=J0(l,e.dataType):u[s]=l}}return o}static fromData(e,r,n){return new yd(r,n,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=An.tensorDimsFromORTFormat(e),n=An.tensorDataTypeFromProto(e.dataType()),o=new yd(r,n);if(n==="string")for(let a=0;a<e.stringDataLength();a++)o.data[a]=e.stringData(a);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let a=o.data,u=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),s=L2(e.dataType()),l=e.rawDataLength()/s;if(e.rawDataLength()%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let i=0;i<l;i++){let c=B2(u,e.dataType(),i*s);a[i]=c}}return o}}});function Qe(t){return t===1?kT:LT}function WV(t){let e=Qe(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function qV(t){let e=Qe(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function XV(t,e){let r=Qe(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${r.output} = result;
  }
  `}var kT,LT,tr=Y(()=>{"use strict";kT={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},LT={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),et=Y(()=>{"use strict"});function V2(t,e=n=>0,r){return U(this,null,function*(){return new Promise((n,o)=>{let a=0,u=()=>{if(t()){n();return}a++;let s=e(a);if(r!=null&&a>=r){o();return}setTimeout(u,s)};u()})})}function h0(t){return vd(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function YV(t){return vd(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function Ml(t,e){let r=JSON.parse(JSON.stringify(t));return r=e,r}function Nl(t,e){return e.map(r=>t[r]).join(", ")}function Vo(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Hs(t=6){return["x","y","z","w","u","v"].slice(0,t)}var ho=Y(()=>{"use strict";dt()});function ZV(t,e){return Hs(e).map(r=>`${t}.${r}`)}function Pm(t,e){return e===1?[t]:ZV(t,e)}function nc(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var Ws=Y(()=>{"use strict";ho()});function KV(t,e,r){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let n="";for(let o=t-2;o<t;o++)n+=`${r[o]} >= ${e[o-t+2]}`,o<t-1&&(n+="||");return n}function QV(t,e){let r=t.length;if(r===0)return"getA(), 0, 0, 0";if(r===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="r, c",o="r, cp1",a="rp1, c",u="rp1, cp1",s="";if(r>2)for(let l=0;l<r-2;++l)s=s+`${e[l]},`;return`getA(${s}${n}),
          rEdge ? 0. : getA(${s}${a}),
          cEdge ? 0. : getA(${s}${o}),
          rEdge || cEdge ? 0. : getA(${s}${u})`}function JV(t,e,r,n){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${n};
    bool cEdge = cp1 >= ${r};
    `}var p0,j2,BT,e9=Y(()=>{"use strict";tr(),et(),ho(),Ws(),p0={name:"pack",inputNames:["A"],inputTypes:[1]},j2=(t,e)=>{let r=Qe(t.session.backend.glContext.version),n=e.dims,o=n.length,a=e.dims.length,u=Vo(a),s=Pm("rc",a),l=JV(a,s,n[n.length-2],n[n.length-1]),i;o===0?i=[1,1]:o===1?i=[n[0],1]:i=[n[a-1],n[a-2]];let c=KV(a,i,s),f=QV(n,s),d=`
        void main() {
          ${u} rc = getOutputCoords();

          if(${c}) {
            ${r.output} = vec4(0);
          } else {
            ${l}

            ${r.output} = vec4(${f});
          }
        }
      `;return j(N({},p0),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:d})},BT=(t,e)=>j(N({},p0),{get:()=>j2(t,e)})});function U2(t){if(t.length===0)return[1,1,1];let e=1;for(let r=0;r<t.length-2;++r)e*=t[r];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function t9(t,e){let r=!1;return t.length===0||e.length===0?r=!0:t.length<2||e.length<2?r=t[t.length-1]===e[e.length-1]:r=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],r}function r9(t){let e=Re.computeStrides(t),r=["b","r","c"],n="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((o,a)=>{let u=`int ${r[a]} = ${n} / ${o}`,s=a===e.length-1?`int ${r[a+1]} = ${n} - ${r[a]} * ${o}`:`index -= ${r[a]} * ${o}`;return`${u}; ${s};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function n9(t){let e=Re.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var H2,z2,$T,i9=Y(()=>{"use strict";dt(),tr(),et(),Ws(),H2=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),z2=(t,e,r,n)=>{let o=e.dims,a=n,u="";for(let i=0;i<4;i++){let c="";switch(i){case 0:c="outputCoords = rc;";break;case 1:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:c="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}u+=`
        ${c}
        ${i>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${i>0?"}":""}
      `}let s=Qe(t.session.backend.glContext.version),l=`
      ${r9(o)}
      ${n9(a)}
      ${nc()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${a[2]};
        int cols = ${a[1]};

        ${u}
        ${s.output} = result;
      }
    `;return j(N({},r),{output:{dims:a,type:e.type,textureType:2},shaderSource:l,hasMain:!0})},$T=(t,e,r)=>{let n=H2(r);return j(N({},n),{get:()=>z2(t,e,n,r)})}}),em,o9=Y(()=>{"use strict";tr(),et(),em=(t,e)=>{let r=e.shape,n=Qe(t.session.backend.glContext.version),o=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${n.texture2D}(X,TexCoords).r;
      ${n.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:e.tensor.type,textureType:3},shaderSource:o,hasMain:!0};return t.executeProgram(a,[e.tensor])}});function a9(t,e){if(t===1)return"rc";let r="";for(let n=0;n<t;n++)r+=e[n],n<t-1&&(r+=",");return r}var g0,G2,VT,s9=Y(()=>{"use strict";tr(),et(),ho(),Ws(),g0={name:"unpack",inputNames:["A"],inputTypes:[2]},G2=(t,e)=>{let r=e.dims.length,n=Pm("rc",r),o=n.slice(-2),a=Vo(r),u=nc(),s=e.dims.length===0?"":a9(r,n),l=r<=1?"rc":`vec2(${o.join(",")})`,i=Qe(t.session.backend.glContext.version),c=`
    ${u}
    void main() {
      ${a} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${s});

       ${i.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return j(N({},g0),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:c})},VT=(t,e)=>j(N({},g0),{get:()=>G2(t,e)})}),jT,tm,UT,wd=Y(()=>{"use strict";yi(),jT=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let r,n;return t.constructor!==Float32Array&&(ar.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(t)),e*this.channelSize>t.length?(ar.warning("Encoder","Source data too small. Allocating larger array"),n=t,r=this.allocate(e*this.channelSize),n.forEach((o,a)=>r[a]=o)):(n=t,r=n),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},tm=class{constructor(t,e=1,r){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=r||t.FLOAT}encode(t,e){let r=t;return this.channelSize===1&&(ar.verbose("Encoder","Exploding into a larger array"),r=this.allocate(e),t.forEach((n,o)=>r[o*4]=n)),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},UT=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),Zl,HT,rm,u9=Y(()=>{"use strict";dt(),et(),Zl=(t,e,r)=>{let n=r===0||r===1?1:4,o=r===2,a=r===1||r===2,u=r===4?e.length-1:void 0,s=r===4?e.map((l,i)=>i===e.length-1?l*4:l):void 0;return rm(t,e,n,s,{isPacked:o,reverseWH:a,breakAxis:u})},HT=(t,e,r)=>{let n=Zl(t,e,r);return[n.width,n.height]},rm=(t,e,r=1,n,o)=>{let a=!!(o&&o.isPacked),[u,s]=t.computeTextureWH(a&&n||e,o),l=e.length,i=e.slice(0);if(l===0&&(i=[1]),r===1)n=e;else if(a){if(r!==4)throw new Error("a packed texture must be 4-channel");n=e,l>0&&(i[l-1]=Math.ceil(i[l-1]/2)),l>1&&(i[l-2]=Math.ceil(i[l-2]/2))}else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:s,channels:r,isPacked:a,shape:i,strides:Re.computeStrides(i),unpackedShape:n,reversedWH:o&&o.reverseWH}}}),W2,zT,l9=Y(()=>{"use strict";yi(),Gs(),dt(),e9(),i9(),o9(),s9(),wd(),u9(),et(),W2=(t,e)=>{let r=e.map(o=>`${o.unpackedShape.join(",")};${o.width}x${o.height}`).join("_"),n=t.name;return t.cacheHint&&(n+="["+t.cacheHint+"]"),n+=":"+r,n},zT=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return HT(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let l=0;l<t.inputNames.length;++l)r[l]=this.getOrCreateTextureData(e[l],t.inputTypes[l]);let n=W2(t,r),o=this.session.programManager.getArtifact(n),a=o?o.programInfo:typeof t.get=="function"?t.get():t,u=Zl(this.session.layoutStrategy,a.output.dims,a.output.textureType),s=this.createTextureData(u,a.output.type);return o||(o=this.session.programManager.build(a,r,s),this.session.programManager.setArtifact(n,o)),this.runProgram(o,r,s),s}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,r){for(let n=0;n<e.length;++n)if(!!e[n].isPacked!=(t.programInfo.inputTypes[n]===2))throw new Error(`input[${n}] property packed inconsistent`);if(!!r.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,r)}getOrCreateTextureData(t,e){let r=this.getTextureData(t.dataId,e===2);if(!r&&(r=this.getTextureData(t.dataId,e!==2),r))return e===2?this.pack(r):this.unpack(r);if(!r){let n=Zl(this.session.layoutStrategy,t.dims,e);if(e===4){let o=t.dims;if(o.length===4){let a=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],u=Zl(this.session.layoutStrategy,a,e),s=t.numberData;if(o[1]*o[2]*o[3]%4!==0){let l=o[0],i=o[1]*o[2]*o[3],c=Math.ceil(i*1/4)*4,f=l*c;s=new Float32Array(f);for(let d=0;d<l;++d){let h=d*i,p=d*c+d%1*i;s.set(t.numberData.subarray(h,h+i),p)}}return this.createTextureData(u,t.type,s,t,1)}}if(e===2){let o=rm(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),a=this.createTextureData(o,t.type,t.numberData,t,1);r=this.pack(a)}else r=this.createTextureData(n,t.type,t.numberData,t,1)}return r}createTextureDataFromLayoutBindTensor(t,e,r,n){return this.createTextureData(t,e,r,n,1)}createTextureData(t,e,r,n,o){ar.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let a=this.session.textureManager.createTextureFromLayout(e,t,r,o);return this.createTextureDataFromTexture(t,e,a,n)}reshapeUnpacked(t,e){let r=this.getOrCreateTextureData(t,0),n={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Re.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}reshapePacked(t,e){let r=this.getOrCreateTextureData(t,2);if(t9(t.dims,e)){let s={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Re.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(s,t.type,r.texture).tensor}let n=U2(t.dims),o=U2(e),a=this.reshapePacked(t,n),u=this.run($T(this,a,o),[a]);return this.reshapePacked(u,e)}cast(t,e){let r=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(r,e,r.texture).tensor}createTextureDataFromTexture(t,e,r,n,o){let a=j(N({},t),{tensor:n||new Sn(t.unpackedShape,e,u=>this.readTexture(a),u=>U(this,null,function*(){return this.readTextureAsync(a)}),void 0,o),texture:r});return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(em(this,t))}readTextureAsync(t){return U(this,null,function*(){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(em(this,t))})}pack(t){return this.executeProgram(BT(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(VT(this,t.tensor),[t.tensor])}}}),q2,Vt,Hr=Y(()=>{"use strict";q2=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},Vt=t=>new q2(t)}),m0,GT,WT,X2,Y2,c9=Y(()=>{"use strict";Hr(),tr(),et(),m0={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},GT=(t,e,r)=>(Y2(e),[t.run(j(N({},m0),{cacheHint:r.cacheKey,get:()=>X2(t,e,r)}),e)]),WT=t=>{let e=t.attributes.getFloat("epsilon",1e-5),r=t.attributes.getFloat("momentum",.9),n=t.attributes.getInt("spatial",1);return Vt({epsilon:e,momentum:r,spatial:n})},X2=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),o=e[0].dims.length,[a,u]=t.calculateTextureWidthAndHeight(e[1].dims,0),s=`
  float process(int[${o}] indices) {
    vec2 position = offsetToCoords(indices[1], ${a}, ${u});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return j(N({},m0),{output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:s})},Y2=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],r=t[1],n=t[2],o=t[3],a=t[4];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1||o.dims.length!==1||a.dims.length!==1)throw new Error("invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||a.type!=="float32"&&a.type!=="float64")throw new Error("invalid input tensor types.")}}),qT,qs,ce,nm,XT,jo=Y(()=>{"use strict";qT=class{constructor(t,e,r,n){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=r,this.outputTextureLayout=n}},qs=class{constructor(t){this.context=t}},ce=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},nm=class{constructor(t,e,r){this.name=t,r?this.dependencies=r:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},XT=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,r=new Set,n=new Array;return this.createOrderedNodes(t,e,r,n),n}static createOrderedNodes(t,e,r,n){for(let o=0;o<t.length;++o)this.dfsTraverse(t[o],e,r,n)}static dfsTraverse(t,e,r,n){if(!t||r.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let o=t.dependencies;if(o&&o.length>0)for(let a=0;a<o.length;++a)this.dfsTraverse(o[a],e,r,n);n.push(t),r.add(t.name),e.delete(t.name)}}});function f9(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function d9(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function h9(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function p9(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function g9(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function m9(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function y9(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function v9(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function b9(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function w9(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function x9(){return E9("pow")}function _9(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function E9(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var Tn,Z2,YT,ZT,KT,QT,JT,eI,tI,rI,nI,iI,oI,aI,T9=Y(()=>{"use strict";dt(),jo(),tr(),et(),Tn=(t,e,r,n=e[0].type,o)=>{let a=t.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:o,get:()=>Z2(t,e,r,n)}},Z2=(t,e,r,n=e[0].type)=>{let o=t.session.pack?2:0,a=!Re.areEqual(e[0].dims,e[1].dims),u=e[0].dims,s=t.session.pack;if(a){let c=Ri.calcShape(e[0].dims,e[1].dims,!1);if(!c)throw new Error("Can't perform binary op on the given tensors");u=c;let f=u.length,d=e[0].dims.length!==0?e[0].dims.length:1,h=e[1].dims.length!==0?e[1].dims.length:1,p=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",m=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v=Qe(t.session.backend.glContext.version),x=s?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${v.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${f}]) {
        int aindices[${d}];
        int bindices[${h}];
        ${p}
        ${m}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:u,type:n,textureType:o},shaderSource:x,hasMain:s}}let l=Qe(t.session.backend.glContext.version),i=`
    ${r.body}
    void main() {
      vec4 v1 = ${l.texture2D}(A, TexCoords);
      vec4 v2 = ${l.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${l.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:e[0].dims,type:n,textureType:o},shaderSource:i,hasMain:!0}},YT=(t,e)=>[t.run(Tn(t,e,f9()),e)],ZT=(t,e)=>[t.run(Tn(t,e,v9(),"bool"),e)],KT=(t,e)=>[t.run(Tn(t,e,d9()),e)],QT=(t,e)=>[t.run(Tn(t,e,g9(),"bool"),e)],JT=(t,e)=>[t.run(Tn(t,e,m9(),"bool"),e)],eI=(t,e)=>[t.run(Tn(t,e,y9(),"bool"),e)],tI=(t,e)=>[t.run(Tn(t,e,h9()),e)],rI=(t,e)=>[t.run(Tn(t,e,b9(),"bool"),e)],nI=(t,e)=>[t.run(Tn(t,e,x9()),e)],iI=(t,e)=>[t.run(Tn(t,e,_9()),e)],oI=(t,e)=>[t.run(Tn(t,e,p9()),e)],aI=(t,e)=>[t.run(Tn(t,e,w9(),"bool"),e)]}),sI,uI,K2,I9=Y(()=>{"use strict";dt(),sI=(t,e,r)=>(K2(e),[t.cast(e[0],r)]),uI=t=>An.tensorDataTypeFromProto(t.attributes.getInt("to")),K2=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),Q2,J2,lI,Rl,A9=Y(()=>{"use strict";tr(),et(),ho(),Ws(),Q2=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(2),cacheHint:e}),J2=(t,e,r,n)=>{let o=r[0].dims.slice();if(n>=o.length||n<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=o.length+n);let a=o.slice(0);for(let C=1;C<r.length;C++){let V=r[C].dims.slice();for(let z=0;z<o.length;z++)if(z===n)a[n]+=V[z];else if(o[z]!==V[z])throw new Error("non concat dimensions must match")}let u=a.length,s=Pm("coords",u),l=Vo(u),i=nc(),c=r.map(C=>C.dims),f=Hs(u),d=new Array(c.length-1);d[0]=c[0][n];for(let C=1;C<d.length;C++)d[C]=d[C-1]+c[C][n];let h=f[n],p=f.slice(-2),m=f.join(),v=`if (${h} < ${d[0]}) {
        return getChannel(
            getX0(${m}), vec2(${p.join()}));
        }`;for(let C=1;C<d.length;C++){let V=d[C-1];v+=`
            if (${h} < ${d[C]}  && ${h} >= ${d[C-1]}) {
              return getChannel(
                getX${C}(${Rl(f,h,V)}),
                vec2(${Rl(p,h,V)}));
            }`}let x=d.length,y=d[d.length-1];v+=`
            return getChannel(
              getX${x}(${Rl(f,h,y)}),
              vec2(${Rl(p,h,y)}));`;let _=Qe(t.session.backend.glContext.version),I=`
          ${i}
          float getValue(${f.map(C=>"int "+C)}) {
            ${v}
          }

          void main() {
            ${l} coords = getOutputCoords();
            int lastDim = coords.${f[u-1]};
            coords.${f[u-1]} = coords.${f[u-2]};
            coords.${f[u-2]} = lastDim;

            vec4 result = vec4(getValue(${s}), 0., 0., 0.);

            ${s[u-1]} = ${s[u-1]} + 1;
            if (${s[u-1]} < ${a[u-1]}) {
              result.g = getValue(${s});
            }

            ${s[u-2]} = ${s[u-2]} + 1;
            if (${s[u-2]} < ${a[u-2]}) {
              result.a = getValue(${s});
            }

            ${s[u-1]} = ${s[u-1]} - 1;
            if (${s[u-2]} < ${a[u-2]} &&
                ${s[u-1]} < ${a[u-1]}) {
              result.b = getValue(${s});
            }
            ${_.output} = result;
          }
        `;return j(N({},e),{output:{dims:a,type:r[0].type,textureType:2},shaderSource:I,hasMain:!0})},lI=(t,e,r)=>{let n=Q2(e.length,r.cacheKey);return j(N({},n),{get:()=>J2(t,n,e,r.axis)})},Rl=(t,e,r)=>{let n=t.indexOf(e);return t.map((o,a)=>a===n?`${o} - ${r}`:o).join()}}),cI,e_,t_,r_,y0,n_,i_,o_,fI,a_,S9=Y(()=>{"use strict";Hr(),et(),A9(),cI=(t,e,r)=>(a_(e),t.session.pack&&e[0].dims.length>1?[t.run(lI(t,e,r),e)]:[t.run(r_(t,e,r),e)]),e_=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(0),cacheHint:e}),t_=(t,e,r,n)=>{let o=r[0].dims.slice();if(n>=o.length||n<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=o.length+n);let a=o.slice(0);for(let h=1;h<r.length;h++){let p=r[h].dims.slice();for(let m=0;m<o.length;m++)if(m===n)a[n]+=p[m];else if(o[m]!==p[m])throw new Error("non concat dimensions must match")}let u=a.length,s=new Array(r.length),l=0;for(let h=0;h<s.length;++h)l+=r[h].dims[n],s[h]=l;let i="";r.length<5?i=y0(s):i=n_(s);let c=i_(r.length,u),f=o_(s),d=`
        ${c}
        ${f}
        ${i}
        float process(int indices[${u}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return j(N({},e),{output:{dims:a,type:r[0].type,textureType:0},shaderSource:d})},r_=(t,e,r)=>{let n=e_(e.length,r.cacheKey);return j(N({},n),{get:()=>t_(t,n,e,r.axis)})},y0=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,r)=>`if(index<${e}) {return ${r};}
`).join("")}
    }`,n_=t=>y0(t),i_=(t,e)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let n=0;n<t;++n)n===0?r.push(`	if (textureIndex == ${n}) { return _X${n}(indices); }`):n===t-1?r.push(`	else { return _X${n}(indices); }`):r.push(`	else if (textureIndex == ${n}) { return _X${n}(indices); }`);return r.push("	}"),r.join(`
`)},o_=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<t.length;++r)r===0?e.push(`	if (index == ${r}) { return ${t[r]}; }`):r===t.length-1?e.push(`	else { return ${t[r]}; }`):e.push(`	else if (index == ${r}) { return ${t[r]}; }`);return e.push("	}"),e.join(`
`)},fI=t=>Vt({axis:t.attributes.getInt("axis")}),a_=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,r=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let n of t){if(n.type!==e)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape")}}});function D9(){return Un("abs")}function C9(){return Un("acos")}function O9(){return Un("asin")}function P9(){return Un("atan")}function M9(){return Un("ceil")}function N9(){return Un("cos")}function R9(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function F9(){return Un("exp")}function k9(){return Un("floor")}function dI(t,e){let r="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:0}}function L9(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function B9(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function $9(){return Un("log")}function V9(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function j9(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function U9(){return Un("sin")}function hI(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function pI(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function H9(){return Un("sqrt")}function z9(){return Un("tan")}function G9(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function Un(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var s_,or,gI,mI,yI,vI,im,bI,wI,u_,xI,_I,EI,TI,II,AI,om,SI,DI,CI,OI,PI,MI,NI,RI,FI,kI,LI,BI=Y(()=>{"use strict";Hr(),dt(),jo(),tr(),et(),s_=(t,e,r,n)=>{let o=t.session.pack?2:0,a=Qe(t.session.backend.glContext.version);return j(N({},e),{output:{dims:r.dims,type:r.type,textureType:o},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${a.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${a.output} = v;
     }
     `,hasMain:!0})},or=(t,e,r,n)=>{let o=t.session.pack?2:0,a={name:r.name,inputTypes:[o],inputNames:["A"],cacheHint:n};return j(N({},a),{get:()=>s_(t,a,e,r)})},gI=(t,e)=>[t.run(or(t,e[0],D9()),e)],mI=(t,e)=>[t.run(or(t,e[0],C9()),e)],yI=(t,e)=>[t.run(or(t,e[0],O9()),e)],vI=(t,e)=>[t.run(or(t,e[0],P9()),e)],im=(t,e,r)=>[t.run(or(t,e[0],dI(r.min,r.max),r.cacheKey),e)],bI=t=>Vt({min:t.attributes.getFloat("min",Jl),max:t.attributes.getFloat("max",ec)}),wI=(t,e)=>{let r=u_(t,e);return im(t,[e[0]],r)},u_=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let r=e.length>=3?e[1].numberData[0]:Jl,n=e.length>=3?e[2].numberData[0]:ec;return Vt({min:r,max:n})},xI=(t,e)=>[t.run(or(t,e[0],M9()),e)],_I=(t,e)=>[t.run(or(t,e[0],N9()),e)],EI=(t,e,r)=>[t.run(or(t,e[0],R9(r.alpha),r.cacheKey),e)],TI=t=>Vt({alpha:t.attributes.getFloat("alpha",1)}),II=(t,e)=>[t.run(or(t,e[0],F9()),e)],AI=(t,e)=>[t.run(or(t,e[0],k9()),e)],om=(t,e)=>[t.run(or(t,e[0],L9()),e)],SI=(t,e,r)=>[t.run(or(t,e[0],B9(r.alpha),r.cacheKey),e)],DI=t=>Vt({alpha:t.attributes.getFloat("alpha",.01)}),CI=(t,e)=>[t.run(or(t,e[0],$9()),e)],OI=(t,e)=>[t.run(or(t,e[0],V9()),e)],PI=(t,e)=>[t.run(or(t,e[0],j9()),e)],MI=(t,e)=>[t.run(or(t,e[0],hI()),e)],NI=(t,e)=>[t.run(or(t,e[0],pI()),e)],RI=(t,e)=>[t.run(or(t,e[0],U9()),e)],FI=(t,e)=>[t.run(or(t,e[0],H9()),e)],kI=(t,e)=>[t.run(or(t,e[0],z9()),e)],LI=(t,e)=>[t.run(or(t,e[0],G9()),e)]});function ic(t){let e;switch(t.activation){case"Relu":e=hI();break;case"Sigmoid":e=pI();break;case"Clip":e=dI(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=e.name,n=e.body,o=`value = ${r}_(value);`;return{activationFunction:n,applyActivation:o}}var Ad,Xs=Y(()=>{"use strict";dt(),BI(),Ad=t=>{let e=t.getString("activation","");if(e==="Clip"){let[r,n]=t.getFloats("activation_params",[Jl,ec]);return{activation:e,clipMax:n,clipMin:r,activationCacheKey:`${e}:${r},${n}`}}return{activation:e,activationCacheKey:e}}}),l_,c_,$I,W9=Y(()=>{"use strict";yi(),tr(),et(),Rm(),Xs(),l_=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),c_=(t,e,r,n)=>{let o=e.length>2?"value += getBias(output_channel);":"",a=e[0].dims.slice(),u=e[1].dims.slice(),s=u[0]/n.group;ar.verbose("GroupedConv",`autpPad:${n.autoPad}, dilations:${n.dilations}, group:${n.group}, kernelShape:${n.kernelShape}, pads:${n.pads}, strides:${n.strides}`);let l=Kl(a,u,n.dilations,n.pads,n.strides),i=Qe(t.session.backend.glContext.version),{activationFunction:c,applyActivation:f}=ic(n),d=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${c}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${s};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${u[1]}; wInChannel++) {
      int input_channel = group_id * ${u[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${u[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${n.dilations[0]};

        if (xHeight < 0 || xHeight >= ${a[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${u[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${n.dilations[1]};
          if (xWidth < 0 || xWidth >= ${a[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${o}
    ${f}
    ${i.output} = vec4(value, .0, .0, .0);
  }
`;return j(N({},r),{output:{dims:l,type:e[0].type,textureType:0},shaderSource:d,hasMain:!0})},$I=(t,e,r)=>{let n=l_(e.length>2,r.cacheKey);return j(N({},n),{get:()=>c_(t,e,n,r)})}}),f_,d_,VI,q9=Y(()=>{"use strict";tr(),et(),Ws(),f_=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),d_=(t,e,r,n,o,a)=>{let u=r.dims,s=n.dims,l=2,i=3,c=o.length,f=[s[1]*s[2]*s[3],o[2]*o[3]],d=s[2]*s[3],h=nc(),p=Qe(t.session.backend.glContext.version),m="";for(let x=0;x<=1;x++)for(let y=0;y<=1;y++)m+=`
            blockIndex = rc.x + ${y};
            pos = rc.y + ${x};

            if(blockIndex < ${f[1]} && pos < ${f[0]}) {
              offsetY = int(blockIndex / (${o[c-1]})) * ${a.strides[0]} -
                ${a.pads[0]};
              d0 = offsetY + ${a.dilations[0]} * (imod(pos, ${d}) / ${s[2]});

              if(d0 < ${u[l]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${o[c-1]}) * ${a.strides[1]} -
                  ${a.pads[1]};
                d1 = offsetX + ${a.dilations[1]} * imod(imod(pos, ${d}), ${s[2]});

                if(d1 < ${u[i]} && d1 >= 0) {

                  ch = int(float(pos)/ ${d}.);
                    innerDims = vec2(d0, d1);
                    result[${x*2+y}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v=`
      ${h}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${m}
          ${p.output} = result;
      }
            `;return j(N({},e),{output:{dims:f,type:r.type,textureType:2},shaderSource:v,hasMain:!0})},VI=(t,e,r,n,o)=>{let a=f_(o.cacheKey);return j(N({},a),{get:()=>d_(t,a,e,r,n,o)})}});function X9(t,e,r){let n=e[0].dims,o=e[1].dims,a=Ri.calcShape(n,o,!0);if(!a)throw new Error("Can't use matmul on the given tensors");let u=Vo(a.length),s=Hs(),{activationFunction:l,applyActivation:i}=ic(r),c=e.length>2,f=c?"value += getBiasForMatmul();":"",d=c?`${UI(u,s,e[2].dims,a,!1)}`:"",h=a.length,p=n.length,m=o.length,v=n[n.length-1],x=`
    ${l}
    ${d}
    float process(int indices[${h}]) {
        int a[${p}];
        int b[${m}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v}; ++k) {
            a[${p-1}] = k;
            b[${m-2}] = k;
            value += _A(a) * _B(b);
        }
        ${f}
        ${i}
        return value;
    }`;return j(N({},t),{output:{dims:a,type:e[0].type,textureType:0},shaderSource:x})}function jI(t,e){let r=GI(t.length>2,e.activationCacheKey);return j(N({},r),{get:()=>X9(r,t,e)})}function UI(t,e,r,n,o){let a="",u=r.length,s=n.length,l=s-u;s<2&&u>0?a="coords":a=r.map((d,h)=>`coords.${e[h+l]}`).join(", ");let i=Ri.getBroadcastDims(r,n).map(d=>`coords.${e[d+l]} = 0;`).join(`
`),c=Re.size(r)===1,f="vec4(outputValue.xx, outputValue.yy)";return c&&(f="vec4(outputValue.x)"),o?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${i}
  vec4 outputValue = getBias(${a});
  return ${f};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${i}
  return getBias(coords.x);
}`}var HI,zI,GI,h_,Mm=Y(()=>{"use strict";dt(),et(),ho(),Xs(),WI(),HI=(t,e,r)=>(h_(e),t.session.pack?[t.run(Nm(t,e,r),e)]:[t.run(jI(e,r),e)]),zI=t=>Ad(t.attributes),GI=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),h_=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function Y9(t,e,r,n){let o=[],a=[],u=r[0].dims,s=r[1].dims,l=u.length,i=s.length,c=n.length,f=c-l,d=c-i;o=u.map((y,_)=>`coords.${e[_+f]}`),o[l-1]="i*2",o.join(", "),a=s.map((y,_)=>`coords.${e[_+d]}`),a[i-2]="i*2",a.join(", ");let h=Ri.getBroadcastDims(u,n),p=Ri.getBroadcastDims(s,n),m=h.map(y=>`coords.${e[y+f]} = 0;`).join(`
`),v=p.map(y=>`coords.${e[y+d]} = 0;`).join(`
`),x=`int lastDim = coords.${e[c-1]};
  coords.${e[c-1]} = coords.${e[c-2]};
  coords.${e[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${m}
  vec4 outputValue = getA(${o});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${v}
  vec4 outputValue = getB(${a});
  return outputValue;
}`}function Z9(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`rc.${t[e-2]}, i*2`,r}function K9(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`i*2, rc.${t[e-1]}`,r}var p_,g_,Nm,WI=Y(()=>{"use strict";dt(),tr(),et(),ho(),Xs(),Mm(),p_=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),g_=(t,e,r,n)=>{let o=r.length>2,a=o?"value += getBiasForMatmul();":"",u=r[0].dims,s=r[1].dims,l=Ri.calcShape(u,s,!0),i=!Re.areEqual(r[0].dims,r[1].dims);if(!l)throw new Error("Can't use matmul on the given tensors");let c=u[u.length-1],f=Math.ceil(c/2),d=u.length,h=s.length,p=Qe(t.session.backend.glContext.version),m=Vo(l.length),v=l.length,x=Hs(),{activationFunction:y,applyActivation:_}=ic(n),I=o?`${UI(m,x,r[2].dims,l,!0)}`:"",C=i?`${Y9(m,x,r,l)}`:"",V=i?"getAAtOutCoordsMatmul(i)":`getA(${Z9(x,d)})`,z=i?"getBAtOutCoordsMatmul(i)":`getB(${K9(x,h)})`,W=i?"":`${m} rc =
          getOutputCoords(); int lastDim = rc.${x[v-1]}; rc.${x[v-1]} =
          rc.${x[v-2]}; rc.${x[v-2]} = lastDim;
      `,k=`
            ${C}
            ${I}
            ${y}
            void main() {
              ${W}

              vec4 value = vec4(0);
              for (int i = 0; i < ${f}; i++) {
                vec4 a = ${V};
                vec4 b = ${z};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${a}
              ${_}
              ${p.output} = value;
            }`;return j(N({},e),{output:{dims:l,type:r[0].type,textureType:2},shaderSource:k,hasMain:!0})},Nm=(t,e,r)=>{let n=p_(e.length>2,r.activationCacheKey);return j(N({},n),{get:()=>g_(t,n,e,r)})}}),qI,Q9=Y(()=>{"use strict";Rm(),q9(),WI(),qI=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Kl(n,o,r.dilations,r.pads,r.strides),u=t.run(VI(t,e[0],e[1],a,r),[e[0]]),s=t.reshapePacked(e[1],[o[0],o[1]*o[2]*o[3]]),l=e.length===3?[s,u,e[2]]:[s,u],i=t.run(Nm(t,l,r),l);return t.reshapePacked(i,a)}}),m_,y_,XI,am,YI=Y(()=>{"use strict";et(),m_=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),y_=(t,e,r,n,o,a)=>{let u=r.dims,s=n.dims,l=o.length,i=am(u,s,o,4),c=`
        const int XC = ${u[1]};
        const int XH = ${u[2]};
        const int XW = ${u[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${l}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${u.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return j(N({},e),{output:{dims:i,type:r.type,textureType:4},shaderSource:c})},XI=(t,e,r,n,o)=>{let a=m_(o.cacheKey);return j(N({},a),{get:()=>y_(t,a,e,r,n,o)})},am=(t,e,r,n=4)=>[r[0],r[2],r[3],Math.ceil(t[1]*e[2]*e[3]/n)]}),v_,b_,ZI,J9=Y(()=>{"use strict";dt(),tr(),et(),Xs(),YI(),v_=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),b_=(t,e,r,n,o)=>{let a=r[0].dims,u=r[1].dims,s=[u[0],Math.ceil(a[1]*u[2]*u[3]/4)],l=am(a,u,n),[i,c]=t.calculateTextureWidthAndHeight(s,4),f=Re.computeStrides(l),[d,h]=t.calculateTextureWidthAndHeight(l,4),p=n.length,m=r.length<3?"0.0":"_B(b)",v=Math.ceil(a[1]*u[2]*u[3]/4),{activationFunction:x,applyActivation:y}=ic(o),_=Qe(t.session.backend.glContext.version),I=`
${x}
float process(int indices[${p}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${f[0]} + im2col[1] * ${f[1]} + im2col[2] * ${f[2]};
  int kernelOffset = indices[1] * ${s[1]};
  float value = ${m};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${d}, ${h});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${i}, ${c});
    value += dot(${_.texture2D}(Im2Col, im2colCoords), ${_.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y}
  return value;
}`;return j(N({},e),{output:{dims:n,type:r[0].type,textureType:0},shaderSource:I})},ZI=(t,e,r,n)=>{let o=v_(e.length>2,n);return j(N({},o),{get:()=>b_(t,o,e,r,n)})}}),Kl,sm,w_,x_,__,E_,um,T_,Rm=Y(()=>{"use strict";Hr(),dt(),W9(),Q9(),J9(),Xs(),YI(),Mm(),Kl=(t,e,r,n,o)=>{let a=t[0],u=t.slice(2),s=u.length,l=e[0],i=e.slice(2).map((f,d)=>f+(f-1)*(r[d]-1)),c=u.map((f,d)=>f+n[d]+n[d+s]).map((f,d)=>Math.floor((f-i[d]+o[d])/o[d]));return[a,l].concat(...c)},sm=(t,e,r)=>(T_(e,r),w_(t,e,r)),w_=(t,e,r)=>{let n=E_(r,e),o=t.session.pack,a=n.kernelShape[0]===1&&n.kernelShape[1]===1;return n.group>1?[t.run($I(t,e,n),e)]:a&&o?[x_(t,e,n)]:o&&e[0].dims.length===4&&e[0].dims[0]===1&&!a?[qI(t,e,n)]:[__(t,e,n)]},x_=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Kl(n,o,r.dilations,r.pads,r.strides),u=t.reshapeUnpacked(e[0],[n[1],n[2]*n[3]]),s=t.reshapeUnpacked(e[1],[o[0],o[1]]),l=e.length>2?[s,u,e[2]]:[s,u],i=t.run(jI(l,r),l);return t.reshapeUnpacked(i,a)},__=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Kl(n,o,r.dilations,r.pads,r.strides),u=t.run(XI(t,e[0],e[1],a,r),[e[0]]),s=e.length===3?[u,e[1],e[2]]:[u,e[1]];return t.run(ZI(t,e,a,r),s)},E_=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let a=2;a<e[1].dims.length;++a)r.push(e[1].dims[a]);let n=t.pads.slice();bd.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,r,n,t.autoPad);let o=Object.assign({},t);return Object.assign(o,{kernelShape:r,pads:n,cacheKey:t.cacheKey}),o},um=t=>{let e=t.attributes,r=Ad(e),n=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return Vt(N({autoPad:n,dilations:o,group:a,kernelShape:u,pads:s,strides:l},r))},T_=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[1]*e.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let o=t[0].dims.length-2;if(e.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(e.strides.length!==o)throw new Error(`strides should be ${o}D`);if(e.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),I_,A_,S_,KI,D_,C_,O_,P_,M_,N_,QI,R_,ej=Y(()=>{"use strict";Hr(),tr(),et(),Xs(),I_=(t,e,r,n,o,a)=>(t-1)*e+r+(n-1)*o+1-a,A_=(t,e,r,n,o)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(r[n]=a,r[o]=t-a):e==="SAME_LOWER"&&(r[n]=t-a,r[o]=a)},S_=(t,e,r,n,o,a,u,s)=>{let l=t.length-2,i=s.length===0;for(let c=0;c<l;++c){let f=i?t[c+2]*a[c]:s[c],d=I_(t[c+2],a[c],o[c],e[c],r[c],f);A_(d,n,o,c,c+l),i&&s.push(a[c]*(t[c+2]-1)+u[c]+(e[c]-1)*r[c]+1-o[c]-o[c+l])}},KI=(t,e,r)=>(R_(e,r),D_(t,e,r)),D_=(t,e,r)=>{let n=N_(r,e);return[M_(t,e,n)]},C_=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),O_=(t,e,r,n)=>{let o=e.length>2?"getB(output_channel)":"0.0",a=e[0].dims,u=e[1].dims,s=u[1],l=u[0]/n.group,i=[e[0].dims[0],e[1].dims[1]*n.group,...n.outputShape],c=Qe(t.session.backend.glContext.version),{activationFunction:f,applyActivation:d}=ic(n),h=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${s};
    int wOutChannel = output_channel - group_id * ${s};

    float value = ${o};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${u[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${u[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${a[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${a[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${d}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return j(N({},r),{output:{dims:i,type:e[0].type,textureType:0},shaderSource:h,hasMain:!0})},P_=(t,e,r)=>{let n=C_(e.length>2,r.cacheKey);return j(N({},n),{get:()=>O_(t,e,n,r)})},M_=(t,e,r)=>t.run(P_(t,e,r),e),N_=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let s=2;s<e[1].dims.length;++s)r.push(e[1].dims[s]);let n=t.pads.slice(),o=t.outputShape.slice(),a=e[0].dims;S_(a,r,t.dilations,t.autoPad,n,t.strides,t.outputPadding,o);let u=Object.assign({},t);return Object.assign(u,{kernelShape:r,pads:n,outputShape:o,cacheKey:t.cacheKey}),u},QI=t=>{let e=t.attributes,r=Ad(e),n=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),i=e.getInts("pads",[0,0,0,0]),c=e.getInts("strides",[1,1]);return Vt(N({autoPad:n,dilations:o,group:a,kernelShape:u,outputPadding:s,outputShape:l,pads:i,strides:c},r))},R_=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==o))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),v0,tc,JI,F_,b0,k_,L_,B_,Fm=Y(()=>{"use strict";Hr(),dt(),et(),v0={name:"Transpose",inputNames:["A"],inputTypes:[0]},tc=(t,e,r)=>(B_(e),[t.run(j(N({},v0),{cacheHint:r.cacheKey,get:()=>F_(t,e[0],r.perm)}),e)]),JI=t=>Vt({perm:t.attributes.getInts("perm",[])}),F_=(t,e,r)=>{let n=e.dims;r=b0(n,r);let o=k_(n,r),a=n.length,u=`
      ${L_("perm",r,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return j(N({},v0),{output:{dims:o,type:e.type,textureType:0},shaderSource:u})},b0=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),k_=(t,e)=>(e=b0(t,e),Re.sortBasedOnPerm(t,e)),L_=(t,e,r)=>{let n=[];n.push(`void ${t}(out int a[${r}], int src[${r}]) {`);for(let o=0;o<r;++o)n.push(`	a[${e[o]}]=src[${o}];`);return n.push("	}"),n.join(`
`)},B_=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),eA,tA,$_,tj=Y(()=>{"use strict";Fm(),eA=(t,e,r)=>{$_(e);let n=r.blocksize,o=n*n,a=r.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],u=r.mode==="DCR"?[e[0].dims[0],n,n,e[0].dims[1]/o,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/o,n,n,e[0].dims[2],e[0].dims[3]],s=t.reshapeUnpacked(e[0],u),l={perm:a,cacheKey:`${a}`},[i]=tc(t,[s],l),c=[e[0].dims[0],e[0].dims[1]/o,e[0].dims[2]*n,e[0].dims[3]*n];return[t.reshapeUnpacked(i,c)]},tA=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let r=t.attributes.getString("mode","DCR");if(r!=="DCR"&&r!=="CRD")throw new Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:e}},$_=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),rA,nA,V_,rj=Y(()=>{"use strict";dt(),rA=(t,e,r)=>{V_(e,r);let n=Re.flattenShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},nA=t=>t.attributes.getInt("axis",1),V_=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let r=t[0].dims.length;if(r===0)throw new Error("scalar tensor is not supported.");if(e<-r||e>r)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),oc,Sd=Y(()=>{"use strict";oc=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),iA,oA,j_,U_,H_,z_,nj=Y(()=>{"use strict";Hr(),Sd(),dt(),et(),iA=(t,e,r)=>(z_(e,r.axis),[t.run(H_(t,e,r),e)]),oA=t=>Vt({axis:t.attributes.getInt("axis",0)}),j_={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},U_=(t,e,r,n)=>{let o=r[0].dims.slice(),a=r[1].dims.slice(),u=new Array(o.length+a.length-1);n=Re.normalizeAxis(n,o.length);let s=[];for(let d=0;d<u.length;d++)d<n?(u[d]=o[d],s.push(`inputIdx[${d}] = outputIdx[${d}];`)):d<n+a.length?(u[d]=a[d-n],s.push(`indexDataIdx[${d-n}] = outputIdx[${d}];`)):(u[d]=o[d-a.length+1],s.push(`inputIdx[${d-a.length+1}] = outputIdx[${d}];`));let l=u.length||1,i=o.length,c=a.length||1,f=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${i}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${s.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${o[n]} : idx;
        return _A(inputIdx);
      }`;return j(N({},e),{output:{dims:u,type:r[0].type,textureType:0},shaderSource:f})},H_=(t,e,r)=>{let n=j(N({},j_),{cacheHint:r.cacheKey});return j(N({},n),{get:()=>U_(t,n,e,r.axis)})},z_=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let r=t[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(e<-r||e>r-1)throw new Error("Invalid axis.");if(oc.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),lm,w0,aA,sA,G_,W_,q_,ij=Y(()=>{"use strict";Hr(),dt(),et(),lm=(t,e,r)=>(q_(e,r),[t.run(G_(e,r),e)]),w0=(t,e)=>{let r=t.attributes.getInt("transA",0)!==0,n=t.attributes.getInt("transB",0)!==0,o=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return Vt({transA:r,transB:n,alpha:o,beta:a,isOptionalC:e})},aA=t=>w0(t,!1),sA=t=>w0(t,!0),G_=(t,e)=>{let r={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return j(N({},r),{get:()=>W_(r,t,e)})},W_=(t,e,r)=>{let n=e[0].dims.slice(),o=e[1].dims.slice(),[a,u]=NT.getShapeOfGemmResult(n,r.transA,o,r.transB,e.length===3?e[2].dims:void 0),s=[a,u];if(!s)throw new Error("Can't use gemm on the given tensors");let l=n[n.length-1],i="";r.transA&&(l=n[0]),r.transA&&r.transB?i="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?i="value += _A_T(a) * _B(b);":!r.transA&&r.transB?i="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(i="value += _A(a) * _B(b);");let c=s.length,f=e.length===3?`int c[${e[2].dims.length}];`:"",d=e.length===3?"bcastIndices_C(indices, c);":"",h=e.length===3?"value += beta * _C(c);":"",p=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${f}

          copyVec(indices, a);
          copyVec(indices, b);
          ${d}

          float value = 0.0;
          for (int k=0; k<${l}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${i}
          }

          value = value * alpha;
          ${h}
          return value;
      }`;return j(N({},t),{output:{dims:s,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p})},q_=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),uA,lA,X_,Y_,Z_,K_,Q_,oj=Y(()=>{"use strict";Hr(),et(),uA=(t,e,r)=>(Q_(e),[t.run(Z_(t,e,r),e)]),lA=t=>{let e=t.attributes.getFloat("scale"),r=t.attributes.getFloats("bias");return Vt({scale:e,bias:r})},X_={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},Y_=(t,e,r,n)=>{let o=r[0].dims.slice(),a=o.length,u=`
      ${K_(n.bias.length)}
      float process(int indices[${a}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return j(N({},e),{output:{dims:o,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:u})},Z_=(t,e,r)=>{let n=j(N({},X_),{cacheHint:r.cacheKey});return j(N({},n),{get:()=>Y_(t,n,e,r)})},K_=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let r=0;r<t;++r)r===0?e.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===t-1?e.push(`	else { return bias[${r}]; }`):e.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return e.push("	}"),e.join(`
`)},Q_=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),cA,fA,x0,J_,eE,tE,rE,nE,iE,aj=Y(()=>{"use strict";tr(),et(),cA=(t,e,r)=>{iE(e);let n=t.run(eE(e[0]),e);return[t.run(nE(t,e[0],r,n.dims),[e[0],n,e[1],e[2]])]},fA=t=>t.attributes.getFloat("epsilon",1e-5),x0={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},J_=(t,e)=>{let r=e.dims.slice(),n=r[1],o=r[2]*r[3],a=[r[0],n],u=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${o});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${o});

        return v;
      }`;return j(N({},t),{output:{dims:a,type:e.type,textureType:4},shaderSource:u})},eE=t=>j(N({},x0),{get:()=>J_(x0,t)}),tE={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},rE=(t,e,r,n,o)=>{let a=Qe(t.session.backend.glContext.version),[u,s]=t.calculateTextureWidthAndHeight(o,4),[l,i]=[u/4,s],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${l}, ${i});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return j(N({},e),{output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:c})},nE=(t,e,r,n)=>{let o=j(N({},tE),{cacheHint:`${r}`});return j(N({},o),{get:()=>rE(t,o,e,r,n)})},iE=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],r=t[1],n=t[2];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1)throw new Error("Invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function sj(t,e){let r=t[0].dims[1],n=t[0].dims.length,o=-Math.floor((e.size-1)/2),a=Math.ceil((e.size-1)/2),u=`float(${e.alpha}) / float(${e.size})`,s=`float(${e.bias})`,l=`float(${e.beta})`,i=`
    float process(int indices[${n}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${o}; i <= ${a}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${r}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${s} + ${u} * square_sum, ${l});
    }`;return j(N({},km),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:i})}function uj(t,e){return j(N({},km),{cacheHint:e.cacheKey,get:()=>sj(t,e)})}var dA,hA,km,oE,lj=Y(()=>{"use strict";Hr(),et(),dA=(t,e,r)=>(oE(e),[t.run(uj(e,r),e)]),hA=t=>{let e=t.attributes.getFloat("alpha",1e-4),r=t.attributes.getFloat("beta",.75),n=t.attributes.getFloat("bias",1),o=t.attributes.getInt("size");return Vt({alpha:e,beta:r,bias:n,size:o})},km={name:"LRN",inputNames:["X"],inputTypes:[0]},oE=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),aE,cm,pA,gA,mA,sE,uE,lE,cE,fE,dE,hE,pE,cj=Y(()=>{"use strict";Hr(),dt(),tr(),et(),aE={name:"Pad",inputNames:["A"],inputTypes:[0]},cm=(t,e,r)=>(lE(e),[t.run(j(N({},aE),{cacheHint:r.cacheKey,get:()=>uE(t,e[0],r)}),e)]),pA=t=>{let e=t.attributes.getString("mode","constant"),r=t.attributes.getFloat("value",0),n=t.attributes.getInts("pads");return Vt({mode:e,value:r,pads:n})},gA=(t,e,r)=>{cE(e);let n=sE(t,e,r);return cm(t,[e[0]],n)},mA=t=>t.attributes.getString("mode","constant"),sE=(t,e,r)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let n=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return Vt({mode:r,pads:n,value:o})},uE=(t,e,r)=>{let n=Re.padShape(e.dims.slice(),r.pads),o=n.length,a=`
      ${fE(t,e,r)}
      float process(int[${o}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:e.type,textureType:0},shaderSource:a}},lE=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},cE=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},fE=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=Re.computeStrides(e.dims);switch(r.mode){case"constant":return dE(n,e.dims,u,o,a,r.pads,r.value);case"reflect":return hE(n,e.dims,u,o,a,r.pads);case"edge":return pE(n,e.dims,u,o,a,r.pads);default:throw new Error("Invalid mode")}},dE=(t,e,r,n,o,a,u)=>{let s=e.length,l="";for(let i=s-1;i>=0;--i)l+=`
        k = m[${i}] - ${a[i]};
        if (k < 0)  return constant;
        if (k >= ${e[i]}) return constant;
        offset += k * ${r[i]};
        `;return`
      float padA(int m[${s}]) {
        const float constant = float(${u});
        int offset = 0;
        int k = 0;
        ${l}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},hE=(t,e,r,n,o,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[l]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[l]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[l]};
        `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},pE=(t,e,r,n,o,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0)  k = 0;
        if (k >= ${e[l]}) k = ${e[l]-1};
        offset += k * ${r[l]};
      `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),yA,vA,_0,bA,wA,xA,_A,E0,T0,gE,I0,EA,Fl,A0,kl,mE,fj=Y(()=>{"use strict";Hr(),dt(),et(),yA=(t,e,r)=>{Fl(e);let n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(j(N({},n),{get:()=>_0(e,n,!1,r)}),e)]},vA=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInt("count_include_pad",0)!==0,o=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),u=t.attributes.getInts("pads",[]);if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return Vt({autoPad:e,ceilMode:r,countIncludePad:n,kernelShape:o,strides:a,pads:u})},_0=(t,e,r,n)=>{let[o,a]=T0(t,n,r),u=Re.size(o.kernelShape),s="value += _X(x);",l="";o.countIncludePad?l+=`value /= float(${u});`:l+=`value /= float(${u} - pad);`;let i=`
        ${A0(t[0].dims,o,s,l,"0.0")}
      `;return j(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:i})},bA=(t,e,r)=>{Fl(e);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[t.run(j(N({},n),{get:()=>_0(e,n,!0,r)}),e)]},wA=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return Vt({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},xA=(t,e,r)=>{Fl(e);let n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(j(N({},n),{get:()=>E0(e,n,!1,r)}),e)]},_A=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),u=t.attributes.getInt("storage_order",0),s=t.attributes.getInts("dilations",[]);if(u!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return Vt({autoPad:e,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:o,pads:a,storageOrder:u,dilations:s})},E0=(t,e,r,n)=>{let[o,a]=T0(t,n,r),u=`
      value = max(_X(x), value);
    `,s="",l=`
      ${A0(t[0].dims,o,u,s,"-1e5")}
    `;return j(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:l})},T0=(t,e,r)=>{let n=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),u=e.strides.slice(),s=o?e.dilations.slice():[],l=e.pads.slice();bd.adjustPoolAttributes(r,n,a,u,s,l);let i=bd.computePoolOutputShape(r,n,u,s,a,l,e.autoPad),c=Object.assign({},e);return o?Object.assign(c,{kernelShape:a,strides:u,pads:l,dilations:s,cacheKey:e.cacheKey}):Object.assign(c,{kernelShape:a,strides:u,pads:l,cacheKey:e.cacheKey}),[c,i]},gE={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},I0={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},EA=(t,e)=>(Fl(e),[t.run(j(N({},I0),{get:()=>E0(e,I0,!0,gE)}),e)]),Fl=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},A0=(t,e,r,n,o)=>{let a=t.length;if(e.kernelShape.length<=2){let u=e.kernelShape[e.kernelShape.length-1],s=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],i=e.pads[e.pads.length-1],c=t[a-1],f="",d="",h="";if(l+i!==0?f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            if (x[${a} - 1] < 0 || x[${a} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            ${r}
          }`,e.kernelShape.length===2){let p=e.kernelShape[e.kernelShape.length-2],m=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],x=e.pads[e.pads.length-2],y=t[a-2];v+x!==0?d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
              if (x[${a} - 2] < 0 || x[${a} - 2] >= ${y}) {
                pad+= ${u};
                continue;
              }
          `:d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
            `,h=`
          }
        `}return`
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);

          float value = ${o};
          int pad = 0;
          ${d}
          ${f}
          ${h}
          ${n}
          return value;
        }
      `}else{let u=Re.size(e.kernelShape),s=Re.computeStrides(e.kernelShape),l=s.length,i=e.pads.length,c=mE(l),f=kl(t,"inputDims"),d=kl(e.pads,"pads"),h=kl(s,"kernelStrides"),p=kl(e.strides,"strides"),m=e.pads.reduce((x,y)=>x+y),v="";return m?v=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:v=`
          }
          ${r}
        `,`
        ${c}
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);
          int offset[${l}];
          int pads[${i}];
          int inputDims[${a}];
          int kernelStrides[${l}];
          int strides[${l}];
          ${d}
          ${f}
          ${p}
          ${h}

          float value = ${o};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${u}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${a} - ${l}; j < ${a}; j++) {
              x[j] = indices[j] * strides[j - ${a} + ${l}]
                + offset[j - ${a} + ${l}] - pads[j - 2];
              ${v}
          }
          ${n}

          return value;
        }
      `}},kl=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=`
      ${e}[${n}] = ${t[n]};
    `;return r},mE=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),Fo,Bo,yE,vE,TA,IA,AA,SA,DA,CA,OA,dj=Y(()=>{"use strict";Hr(),Sd(),dt(),et(),Fo=(t,e,r,n,o)=>{vE(e);let a={name:n,inputNames:["A"],inputTypes:[0]};return[t.run(j(N({},a),{cacheHint:r.cacheKey,get:()=>yE(t,e,r,n,o,a)}),e)]},Bo=t=>{let e=t.attributes.getInts("axes",[]),r=t.attributes.getInt("keepdims",1)===1;return Vt({axes:e,keepDims:r})},yE=(t,e,r,n,o,a)=>{let u=[],s=e[0].dims.length||1,l=[],i=Re.normalizeAxes(r.axes,e[0].dims.length),c=o(e,i),f=c[1];for(let h=0;h<e[0].dims.length;h++)i.indexOf(h)>=0||i.length===0?(r.keepDims&&u.push(1),f=`
          for(int j${h} = 0; j${h} < ${e[0].dims[h]}; j${h}++) {
            inputIdx[${h}] = j${h};
            ${f}
          }`):(l.push(`inputIdx[${h}] = outputIdx[${u.length}];`),u.push(e[0].dims[h]));let d=`
      float process(int outputIdx[${u.length||1}]) {
        float value;                 // final result
        int inputIdx[${s}];      // addressing input data
        ${l.join(`
`)}
        ${c[0]}       // init ops for reduce max/min
        ${f}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return j(N({},a),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:d})},vE=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(oc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},TA=(t,e,r)=>Fo(t,e,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),IA=(t,e,r)=>Fo(t,e,r,"ReduceMean",(n,o)=>{let a=1;for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&(a*=n[0].dims[u]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${a}.;`]}),AA=(t,e,r)=>Fo(t,e,r,"ReduceMax",(n,o)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),SA=(t,e,r)=>Fo(t,e,r,"ReduceMin",(n,o)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),DA=(t,e,r)=>Fo(t,e,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),CA=(t,e,r)=>Fo(t,e,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),OA=(t,e,r)=>Fo(t,e,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),PA,hj=Y(()=>{"use strict";dt(),PA=(t,e)=>{let r=Re.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],r)]:[t.reshapeUnpacked(e[0],r)]}}),S0,fm,MA,NA,Ql,bE,dm,xd,RA=Y(()=>{"use strict";Hr(),tr(),et(),S0={name:"Upsample",inputNames:["X"],inputTypes:[0]},fm=(t,e,r)=>(dm(e,r),[t.run(j(N({},S0),{cacheHint:r.cacheKey,get:()=>bE(t,e,r)}),e)]),MA=t=>Ql(t,7),NA=t=>Ql(t,9),Ql=(t,e)=>{let r=e>=10,n=t.attributes.getString("mode","nearest");if(n!=="nearest"&&n!=="linear"&&(e<11||n!=="cubic"))throw new Error(`unrecognized mode: ${n}`);let o=[];e<9&&(o=t.attributes.getFloats("scales"),xd(o,n,r));let a=t.attributes.getFloat("extrapolation_value",0),u=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u)===-1)throw new Error(`coordinate_transform_mode '${u}' is not supported`);let s=u==="tf_crop_and_resize",l=s,i=n==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(i)===-1)throw new Error(`nearest_mode '${i}' is not supported`);let c=t.attributes.getFloat("cubic_coeff_a",-.75),f=t.attributes.getInt("exclude_outside",0)!==0;if(f&&n!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let d=e<11?!0:n==="nearest"&&u==="asymmetric"&&i==="floor",h=0,p=0,m=0;return e>10?t.inputs.length>2?(h=1,p=2,m=3):(p=1,m=2):e===9&&(p=1),Vt({opset:e,isResize:r,mode:n,scales:o,extrapolationValue:a,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:s,nearestMode:i,cubicCoefficientA:c,excludeOutside:f,useNearest2xOptimization:d,roiInputIdx:h,scalesInputIdx:p,sizesInputIdx:m})},bE=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e[0].dims,0),u=e[0].dims.map((m,v)=>Math.floor(m*r.scales[v])),[s,l]=t.calculateTextureWidthAndHeight(u,0),i=u.length,c=new Array(i),f=new Array(i),d=`
      int output_pitches[${i}];
      int input_pitches[${i}];
      `;for(let m=i-1;m>=0;m--)c[m]=m===i-1?1:c[m+1]*u[m+1],f[m]=m===i-1?1:f[m+1]*e[0].dims[m+1],d+=`
        output_pitches[${m}] = ${c[m]};
        input_pitches[${m}] = ${f[m]};
        `;let h=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${o}, ${a});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,p=r.mode==="nearest"?`
    ${h}
    float process(int indices[${i}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int d, m;
      for (int dim = 0; dim < ${i}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:i===4?`
    ${h}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return j(N({},S0),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:p,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(m=>Math.ceil(m))}]})},dm=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},xd=(t,e,r)=>{if(r){for(let n of t)if(n<=0)throw new Error("Scale value should be greater than 0.")}else for(let n of t)if(n<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}),fd,hm,FA,kA,wE,xE,_E,EE,pj=Y(()=>{"use strict";tr(),et(),ho(),Ws(),RA(),fd={name:"Resize",inputNames:["A"],inputTypes:[2]},hm=(t,e,r)=>(dm(e,r),[t.run(j(N({},fd),{cacheHint:r.cacheKey,get:()=>wE(t,e,r)}),e)]),FA=t=>Ql(t,10),kA=t=>Ql(t,11),wE=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),[o,a]=xE(e,r);if(o.every(y=>y===1)&&r.coordinateTransformMode!=="tf_crop_and_resize")return j(N({},fd),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${n.texture2D}(X, TexCoords);
                    ${n.output} = v;
                }`});let u=a.length;if(u<2)throw new Error(`output dimension should be at least 2, but got ${u}`);let s=a[u-2],l=a[u-1],i=e[0].dims;if(u!==i.length)throw new Error(`output dimension should match input ${i.length}, but got ${u}`);let c=i[u-2],f=i[u-1],d=o[u-2],h=o[u-1],p="";if(r.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${s}.0 - 1.0, ${l}.0 - 1.0,
                            ${s}.0 - 1.0);
                        vec4 original = vec4(${f}.0 - 1.0, ${c}.0 - 1.0, ${f}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let m=Vo(u),v=nc(),x=`
            const vec2 inputWH = vec2(${c}.0, ${f}.0);
            const vec4 scaleWHWH = vec4(float(${d}), float(${h}), float(${d}), float(${h}));
            ${v}
            ${p}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${m} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${s-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${n.output} = vec4(newValue);
            }
        `;return j(N({},fd),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:x})},xE=(t,e)=>{let r=t[0].dims,n=e.scales,o;if(n.length===0){let u=t[e.scalesInputIdx];if(u&&u.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");n=_E(u,e.mode,e.isResize)}else{let s=t[e.sizesInputIdx];if(!s||s.size===0)throw new Error("Either scales or sizes MUST be provided as input.");o=Array.from(s.integerData),n=EE(o,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let a=o||r.map((u,s)=>Math.floor(u*n[s]));return[n,a]},_E=(t,e,r)=>{let n=Array.from(t.floatData);return xd(n,e,r),n},EE=(t,e,r,n)=>{let o=e.length,a=new Array(o);for(let u=0,s=o;u<s;u++)if(e[u]===0){if(t[u]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");a[u]=1}else a[u]=t[u]/e[u];return xd(a,r,n),a}}),LA,TE,gj=Y(()=>{"use strict";Gs(),LA=(t,e)=>(TE(e),[new Sn([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),TE=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),dd,BA,$A,D0,IE,VA,AE,SE,mj=Y(()=>{"use strict";Hr(),Sd(),dt(),et(),dd={name:"Slice",inputNames:["A"],inputTypes:[0]},BA=(t,e,r)=>(IE(e),[t.run(j(N({},dd),{cacheHint:r.cacheKey,get:()=>D0(t,e[0],r)}),e)]),$A=t=>{let e=t.attributes.getInts("starts"),r=t.attributes.getInts("ends"),n=t.attributes.getInts("axes",[]);return Vt({starts:e,ends:r,axes:n})},D0=(t,e,r)=>{let n=r.axes.length===0?e.dims.slice(0).map((c,f)=>f):r.axes,o=Re.normalizeAxes(n,e.dims.length),a=r.starts.map((c,f)=>c>e.dims[o[f]]-1?e.dims[o[f]]:Re.normalizeAxis(c,e.dims[o[f]])),u=r.ends.map((c,f)=>c>e.dims[o[f]]-1?e.dims[o[f]]:Re.normalizeAxis(c,e.dims[o[f]])),s=e.dims.slice(),l=[];for(let c=0;c<o.length;c++)s[o[c]]=u[c]-a[c],a[c]>0&&l.push(`outputIdx[${o[c]}] += ${a[c]};`);let i=`
      float process(int outputIdx[${s.length}]) {
        ${l.join(`
      `)}
        return _A(outputIdx);
      }`;return j(N({},dd),{output:{dims:s,type:e.type,textureType:0},shaderSource:i})},IE=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(oc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},VA=(t,e)=>{SE(e);let r=AE(t,e);return[t.run(j(N({},dd),{cacheHint:r.cacheKey,get:()=>D0(t,e[0],r)}),[e[0]])]},AE=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(u=>u!==1))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(e[1].integerData),n=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[],a=`${o};${r};${n}`;return{starts:r,ends:n,axes:o,cacheKey:a}},SE=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),C0,O0,P0,jA,UA,HA,zA,M0,DE,CE,OE,N0,yj=Y(()=>{"use strict";Hr(),dt(),tr(),et(),Fm(),C0={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},O0={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},P0={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},jA=(t,e,r)=>{N0(e);let n=e[0].dims.slice(),o=Re.normalizeAxis(r.axis,n.length),a=Re.sizeToDimension(n,o),u=Re.sizeFromDimension(n,o);return M0(t,e,r,a,u)},UA=t=>Vt({axis:t.attributes.getInt("axis",1)}),HA=t=>Vt({axis:t.attributes.getInt("axis",-1)}),zA=(t,e,r)=>{N0(e);let n=e[0].dims.slice(),o=Re.normalizeAxis(r.axis,n.length),a=n.length,u=o!==a-1,s=[],l=[],i=[],c;u&&(l=Array.from({length:a}).map((p,m)=>m),l[o]=a-1,l[a-1]=o,l.map(p=>s.push(n[p])),c=Vt({perm:l}),i=tc(t,e,c));let f=u?Re.sizeToDimension(s,a-1):Re.sizeToDimension(n,a-1),d=u?Re.sizeFromDimension(s,a-1):Re.sizeFromDimension(n,a-1),h=M0(t,u?i:e,r,f,d);return u?tc(t,h,c):h},M0=(t,e,r,n,o)=>{let a=DE(t,e[0],n,o,[n]),u=t.run(j(N({},C0),{cacheHint:r.cacheKey,get:()=>a}),e),s=CE(t,e[0],n,o,a.output.dims,[n]),l=t.run(j(N({},O0),{cacheHint:r.cacheKey,get:()=>s}),[e[0],u]),i=OE(t,e[0],n,o,a.output.dims,s.output.dims);return[t.run(j(N({},P0),{cacheHint:r.cacheKey,get:()=>i}),[e[0],u,l])]},DE=(t,e,r,n,o)=>{let[a,u]=t.calculateTextureWidthAndHeight(e.dims,0),s=o.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1)throw new Error("Dimensionality of the output should be 1");if(o[0]!==r)throw new Error("Shape of the output should be equal to logical row count");let l=Qe(t.session.backend.glContext.version),i=`
      float process(int[${s}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${u} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${u})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return j(N({},C0),{output:{dims:o,type:e.type,textureType:0},shaderSource:i})},CE=(t,e,r,n,o,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=a.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(o.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let i=Qe(t.session.backend.glContext.version),c=`
      float process(int[${l}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${i.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${u}, ${s}))) - max);
        }

        return norm_factor;
      }`;return j(N({},O0),{output:{dims:a,type:e.type,textureType:0},shaderSource:c})},OE=(t,e,r,n,o,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=e.dims.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1||a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==r||a[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let i=`
      float process(int[${l}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${u}, ${s});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return j(N({},P0),{output:{dims:e.dims,type:e.type,textureType:0},shaderSource:i})},N0=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),R0,GA,WA,PE,ME,NE,vj=Y(()=>{"use strict";Hr(),dt(),et(),R0={name:"Split",inputNames:["A"],inputTypes:[0]},GA=(t,e,r)=>{NE(e);let n=Re.normalizeAxis(r.axis,e[0].dims.length),o=PE(t,e,n,r),a=[];for(let u=0;u<o;++u)a.push(t.run(j(N({},R0),{cacheHint:`${r.cacheKey};${u}`,get:()=>ME(t,e[0],r,n,u)}),e));return a},WA=t=>{let e=t.attributes.getInt("axis",0),r=t.attributes.getInts("split",[]),n=t.outputs.length;return Vt({axis:e,split:r,numOutputs:n})},PE=(t,e,r,n)=>{let[,o]=K0.splitShape(e[0].dims,r,n.split,n.numOutputs);return o.length},ME=(t,e,r,n,o)=>{let[a,u]=K0.splitShape(e.dims,n,r.split,r.numOutputs),s=u[o],l=a[o],i=`
      float process(int indices[${l.length}]) {
        indices[${n}] += ${s};
        return _A(indices);
      }
    `;return j(N({},R0),{cacheHint:`${r.cacheKey}:${o}`,output:{dims:l,type:e.type,textureType:0},shaderSource:i})},NE=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),pm,qA,XA,RE,FE,bj=Y(()=>{"use strict";dt(),pm=(t,e,r)=>{RE(e);let n=Re.squeezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},qA=(t,e)=>(FE(e),pm(t,[e[0]],Array.from(e[1].integerData))),XA=t=>t.attributes.getInts("axes"),RE=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},FE=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),YA,kE,LE,wj=Y(()=>{"use strict";tr(),et(),YA=(t,e)=>{LE(e);let r={name:"Sum",inputNames:e.map((n,o)=>`X${o}`),inputTypes:new Array(e.length).fill(0)};return[t.run(j(N({},r),{get:()=>kE(t,e,r)}),e)]},kE=(t,e,r)=>{let n=Qe(t.session.backend.glContext.version),o=e[0].dims.slice(),a=`
      void main() {
        vec4 result = ${e.map((u,s)=>`${n.texture2D}(X${s},TexCoords)`).join(" + ")};
        ${n.output} = result;
      }
    `;return j(N({},r),{output:{dims:o,type:e[0].type,textureType:0},hasMain:!0,shaderSource:a})},LE=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let r=1;r<t.length;r++){if(e!==t[r].dims.length)throw new Error("Input shapes are mismatched.");for(let n=0;n<e;n++)if(t[0].dims[n]!==t[r].dims[n])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let r=1;r<t.length;r++)if(t[0].type!==t[r].type)throw new Error("Input types are not matched.")}}),ZA,BE,$E,xj=Y(()=>{"use strict";Sd(),et(),ZA=(t,e)=>{$E(e);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run(j(N({},r),{get:()=>BE(t,e,r)}),e)]},BE=(t,e,r)=>{let n=e[0].dims.slice(),o=new Array(n.length),a=[];for(let l=0;l<n.length;l++)o[l]=n[l]*e[1].numberData[l],a.push(`inputIdx[${l}] = int(mod(float(outputIdx[${l}]), ${n[l]}.));`);let u=o.length,s=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${u}];
        ${a.join(`
`)}
        return _A(inputIdx);
      }
    `;return j(N({},r),{output:{dims:o,type:e[0].type,textureType:0},shaderSource:s})},$E=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(oc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),gm,KA,QA,VE,jE,_j=Y(()=>{"use strict";dt(),gm=(t,e,r)=>{VE(e);let n=Re.unsqueezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},KA=(t,e)=>(jE(e),gm(t,[e[0]],Array.from(e[1].integerData))),QA=t=>t.attributes.getInts("axes"),VE=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},jE=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),JA,Ej=Y(()=>{"use strict";c9(),T9(),I9(),S9(),Rm(),ej(),tj(),rj(),nj(),ij(),oj(),aj(),lj(),Mm(),cj(),fj(),dj(),hj(),pj(),gj(),mj(),yj(),vj(),bj(),wj(),xj(),Fm(),BI(),_j(),RA(),JA=[["Abs","","6+",gI],["Acos","","7+",mI],["Add","","7+",YT],["And","","7+",ZT],["Asin","","7+",yI],["Atan","","7+",vI],["AveragePool","","7+",yA,vA],["BatchNormalization","","7+",GT,WT],["Cast","","6+",sI,uI],["Ceil","","6+",xI],["Clip","","6-10",im,bI],["Clip","","11+",wI],["Concat","","4+",cI,fI],["Conv","","1+",sm,um],["ConvTranspose","","1+",KI,QI],["Cos","","7+",_I],["Div","","7+",KT],["Dropout","","7+",om],["DepthToSpace","","1+",eA,tA],["Equal","","7+",QT],["Elu","","6+",EI,TI],["Exp","","6+",II],["Flatten","","1+",rA,nA],["Floor","","6+",AI],["FusedConv","com.microsoft","1+",sm,um],["Gather","","1+",iA,oA],["Gemm","","7-10",lm,aA],["Gemm","","11+",lm,sA],["GlobalAveragePool","","1+",bA,wA],["GlobalMaxPool","","1+",EA],["Greater","","7+",JT],["Identity","","1+",om],["ImageScaler","","1+",uA,lA],["InstanceNormalization","","6+",cA,fA],["LeakyRelu","","6+",SI,DI],["Less","","7+",eI],["LRN","","1+",dA,hA],["Log","","6+",CI],["MatMul","","1+",HI,zI],["MaxPool","","1+",xA,_A],["Mul","","7+",tI],["Neg","","6+",OI],["Not","","1+",PI],["Or","","7+",rI],["Pad","","2-10",cm,pA],["Pad","","11+",gA,mA],["Pow","","7+",nI],["PRelu","","7+",iI],["ReduceLogSum","","1+",CA,Bo],["ReduceMax","","1+",AA,Bo],["ReduceMean","","1+",IA,Bo],["ReduceMin","","1+",SA,Bo],["ReduceProd","","1+",DA,Bo],["ReduceSum","","1-12",TA,Bo],["ReduceSumSquare","","1+",OA,Bo],["Relu","","6+",MI],["Reshape","","5+",PA],["Resize","","10",hm,FA],["Resize","","11+",hm,kA],["Shape","","1+",LA],["Sigmoid","","6+",NI],["Sin","","7+",RI],["Slice","","10+",VA],["Slice","","1-9",BA,$A],["Softmax","","1-12",jA,UA],["Softmax","","13+",zA,HA],["Split","","2-12",GA,WA],["Sqrt","","6+",FI],["Squeeze","","1-12",pm,XA],["Squeeze","","13+",qA],["Sub","","7+",oI],["Sum","","6+",YA],["Tan","","7+",kI],["Tanh","","6+",LI],["Tile","","6+",ZA],["Transpose","","1+",tc,JI],["Upsample","","7-8",fm,MA],["Upsample","","9",fm,NA],["Unsqueeze","","1-12",gm,QA],["Unsqueeze","","13+",KA],["Xor","","7+",aI]]});function Tj(t){let e={},r;for(;(r=mm.exec(t))!==null;){let n=r[3].split(",").map(o=>{let a=o.trim().split(" ");return a&&a.length===2?{type:a[0],name:a[1]}:null}).filter(o=>o!==null);e[r[2]]={params:n,body:r[4]}}for(let n in e){let o=eS.replace("__FUNC__",n),a=new RegExp(o,"gm");for(;(r=a.exec(t))!==null;){let u=r[1],s=r[2],l=r[3].split(","),i=u?`${u} ${s};`:"",c=e[n].body,f="";e[n].params.forEach((h,p)=>{h&&(f+=`${h.type} ${h.name} = ${l[p]};
`)}),c=`${f}
 ${c}`,c=c.replace("return",`${s} = `);let d=`
      ${i}
      {
        ${c}
      }
      `;t=t.replace(r[0],d)}}return t=t.replace(mm,""),t}var mm,eS,Ij=Y(()=>{"use strict";mm=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,eS="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function Gl(t,e){let r=[],n=[],o=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||o?null:Aj(e,t).sort(),u=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[u]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[u]==null||a[u]>s)&&t[s]===1&&(r.push(t[s]),n.push(s)),a[u]<=s&&u++}t[s]!==1&&(r.push(t[s]),n.push(s))}return{newShape:r,keptDims:n}}function Aj(t,e){let r=e.length;return t=t==null?e.map((n,o)=>o):[].concat(t),vd(t.every(n=>n>=-r&&n<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),vd(t.every(Sj),()=>`All values in axis param must be integers but got axis ${t}`),t.map(n=>n<0?r+n:n)}function Sj(t){return t%1===0}function Dj(t){if(t.length===0)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function UE(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var tS,rS=Y(()=>{"use strict";yi(),dt(),tS=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let r=this.computeTexture(t,e);return e&&e.isPacked&&(r[0]/=2,r[1]/=2),e&&e.reverseWH?[r[1],r[0]]:r}computeTexture(t,e){let r=e&&e.isPacked;if(t.length===0)return r?[2,2]:[1,1];let n=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let u=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((l,i)=>l*i),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((l,i)=>l*i);if(u>n||s>n)ar.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[u,s]}let o=t.slice(0);r&&(n=n*2,o=o.map((u,s)=>s>=o.length-2?o[s]%2===0?o[s]:o[s]+1:o[s]),o.length===1&&(o=[2,o[0]])),o.length!==2&&(o=Gl(o).newShape);let a=Dj(o);return o.length<=1&&a<=n?[1,a]:o.length===2&&o[0]<=n&&o[1]<=n?o:o.length===3&&o[0]*o[1]<=n&&o[2]<=n?[o[0]*o[1],o[2]]:o.length===3&&o[0]<=n&&o[1]*o[2]<=n?[o[0],o[1]*o[2]]:o.length===4&&o[0]*o[1]*o[2]<=n&&o[3]<=n?[o[0]*o[1]*o[2],o[3]]:o.length===4&&o[0]<=n&&o[1]*o[2]*o[3]<=n?[o[0],o[1]*o[2]*o[3]]:r?UE(a/4).map(u=>u*2):UE(a)}}}),nS,Cj=Y(()=>{"use strict";dt(),jo(),tr(),rS(),ho(),nS=class extends qs{constructor(t){super(t)}getFunctions(){return N(N(N(N(N(N(N({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new ce(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new ce(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},o="getOutputCoords";switch(e.length){case 0:n[o]=this.getOutputScalarCoords();break;case 1:n[o]=this.getOutputPacked1DCoords(e,r);break;case 2:n[o]=this.getOutputPacked2DCoords(e,r);break;case 3:n[o]=this.getOutputPacked3DCoords(e,r);break;default:n[o]=this.getOutputPackedNDCoords(e,r)}let a=`
      void setOutput(vec4 val) {
        ${Qe(this.context.glContext.version).output} = val;
      }
    `,u="floatTextureSetRGBA";return n[u]=new ce(a),n}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},o="getOutputCoords";switch(e.length){case 0:n[o]=this.getOutputScalarCoords();break;case 1:n[o]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[o]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[o]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[o]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[o]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[o]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let a=`
        void setOutput(float val) {
          ${Qe(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,u="floatTextureSetR";return n[u]=new ce(a),n}getOutputScalarCoords(){return new ce(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new ce(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new ce(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new ce(n))}getOutputPacked2DCoords(t,e){let r="";if(Ul.arraysEqual(t,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new ce(r);let n=e,o=Math.ceil(t[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec2(r, c);
        }
      `,new ce(r)}getOutputPacked3DCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[2]/2),o=n*Math.ceil(t[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${o};
          index -= b * ${o};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new ce(a)}getOutputPackedNDCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[t.length-1]/2),o=n*Math.ceil(t[t.length-2]/2),a=o,u="",s="b, r, c";for(let i=2;i<t.length-1;i++)a*=t[t.length-i-1],u=`
      int b${i} = index / ${a};
      index -= b${i} * ${a};
    `+u,s=`b${i}, `+s;let l=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${o};
        index -= b * ${o};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${t.length}(${s});
      }
    `;return new ce(l)}getOutputUnpacked1DCoords(t,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new ce(r)}getOutputUnpacked2DCoords(t,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new ce(r)}getOutputUnpacked3DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new ce(r)}getOutputUnpacked4DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new ce(r)}getOutputUnpacked5DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2","d3"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new ce(r)}getOutputUnpacked6DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2","d3","d4"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new ce(r)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new ce(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new ce(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new ce(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new ce(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=Qe(this.context.glContext.version);return t[e]=new ce(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n],a=h0(r);o.isPacked?t[a]=this.getPackedSamplerFromInput(a,r,o):t[a]=this.getUnpackedSamplerFromInput(a,r,o);let u=YV(r);o.unpackedShape.length<=e.unpackedShape.length&&(o.isPacked?t[u]=this.getPackedSamplerAtOutputCoords(u,o,e,r):t[u]=this.getUnpackedSamplerAtOutputCoords(u,o,e,r))}),t}getPackedSamplerAtOutputCoords(t,e,r,n){let o=e.unpackedShape,a=r.unpackedShape,u=h0(n),s=o.length,l=a.length,i=Ri.getBroadcastDims(o,a),c=Vo(l),f=l-s,d,h=Hs();s===0?d="":l<2&&i.length>=1?d="coords = 0;":d=i.map(I=>`coords.${h[I+f]} = 0;`).join(`
`);let p="";l<2&&s>0?p="coords":p=o.map((I,C)=>`coords.${h[C+f]}`).join(", ");let m="return outputValue;",v=Re.size(o)===1,x=Re.size(a)===1;if(s===1&&!v&&!x)m=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v&&!x)l===1?m=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:m=`
          return vec4(outputValue.x);
        `;else if(i.length){let I=s-2,C=s-1;i.indexOf(I)>-1&&i.indexOf(C)>-1?m="return vec4(outputValue.x);":i.indexOf(I)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(C)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}let y=`
        int lastDim = coords.${h[l-1]};
        coords.${h[l-1]} = coords.${h[l-2]};
        coords.${h[l-2]} = lastDim;
      `,_=`
      vec4 ${t}() {
        ${c} coords = getOutputCoords();
        ${y}
        ${d}
        vec4 outputValue = ${u}(${p});
        ${m}
      }
    `;return new ce(_,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,r,n){let o=[r.width,r.height],a=[e.width,e.height],u=e.unpackedShape.length,s=r.unpackedShape.length,l=e.unpackedShape,i=r.unpackedShape,c=h0(n);if(u===s&&Ul.arraysEqual(a,o)){let y=`
          float ${t}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new ce(y,["coordinates.sampleTexture"])}let f=Vo(s),d=Ri.getBroadcastDims(l,i),h=s-u,p,m=Hs();u===0?p="":s<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${m[y+h]} = 0;`).join(`
`);let v="";s<2&&u>0?v="coords":v=e.unpackedShape.map((y,_)=>`coords.${m[_+h]}`).join(", ");let x=`
        float ${t}() {
          ${f} coords = getOutputCoords();
          ${p}
          return ${c}(${v});
        }
      `;return new ce(x,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,r);case 2:return this.getPackedSampler2D(t,e,r);case 3:return this.getPackedSampler3D(t,e,r);default:return this.getPackedSamplerND(t,e,r)}}getUnpackedSamplerFromInput(t,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(t,e,r);case 1:return this.getUnpackedSampler1D(t,e,r);case 2:return this.getUnpackedSampler2D(t,e,r);case 3:return this.getUnpackedSampler3D(t,e,r);case 4:return this.getUnpackedSampler4D(t,e,r);case 5:return this.getUnpackedSampler5D(t,e,r);case 6:return this.getUnpackedSampler6D(t,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(t,e){let r=Qe(this.context.glContext.version),n=`
          vec4 ${t}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new ce(n)}getPackedSampler1D(t,e,r){let n=[r.width,r.height],o=[n[1],n[0]],a=Qe(this.context.glContext.version),u=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new ce(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,r){let n=r.unpackedShape,o=[r.width,r.height],a=Qe(this.context.glContext.version),u=o[0],s=o[1];if(o!=null&&Ul.arraysEqual(n,o)){let f=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${u}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new ce(f)}let l=o,i=Math.ceil(n[1]/2),c=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l[1]}, ${l[0]}, ${i}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new ce(c,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,r){let n=r.unpackedShape,o=[r.width,r.height],a=[o[0],o[1]],u=Qe(this.context.glContext.version);if(n[0]===1){let d=n.slice(1),h=[1,2],p=Ml(n,d),m=["b","row","col"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=this.getPackedSamplerFromInput(t,e,v),y=`${x.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${Nl(m,h)});
      } `;return new ce(y,x.dependencies)}let s=a[0],l=a[1],i=Math.ceil(n[2]/2),c=i*Math.ceil(n[1]/2),f=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${s}, ${c}, ${i}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new ce(f,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,r){let n=r.unpackedShape,o=n.length,a=[r.width,r.height],u=Qe(this.context.glContext.version),s=[a[0],a[1]],l=s[1],i=s[0],c=Math.ceil(n[o-1]/2),f=c*Math.ceil(n[o-2]/2),d="int b, int row, int col",h=`b * ${f} + (row / 2) * ${c} + (col / 2)`;for(let m=2;m<o-1;m++)d=`int b${m}, `+d,f*=n[o-m-1],h=`b${m} * ${f} + `+h;let p=`vec4 ${t}(${d}) {
      int index = ${h};
      int texR = index / ${i};
      int texC = index - texR * ${i};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}, ${l});
      return ${u.texture2D}(${e}, uv);
    }`;return new ce(p)}getUnpackedSamplerScalar(t,e,r){let[n,o]=[r.width,r.height];if(n===1&&o===1){let u=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}let a=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${o});
          vec2 uv = uvFromFlat(${n}, ${o}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new ce(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,r){let n=r.width,o=r.height;if(o===1&&n===1){let u=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new ce(u,["coordinates.sampleTexture"])}if(o===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${o}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(u,["coordinates.sampleTexture"])}let a=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${n}, ${o}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,r){let n=r.unpackedShape,o=[r.height,r.width];if(o!=null&&Ul.arraysEqual(n,o)){let f=o[1],d=o[0],h=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f}.0, ${d}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(h,["coordinates.sampleTexture"])}let{newShape:a,keptDims:u}=Gl(n),s=a;if(s.length<n.length){let f=Ml(n,s),d=JSON.parse(JSON.stringify(r));d.unpackedShape=f;let h=["col","row"],p=`
          ${this.getUnpackedSamplerFromInput(t,e,d).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${Nl(h,u)});
          }
        `;return new ce(p,["coordinates.sampleTexture"])}let l=o[1],i=o[0];if(i===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${i});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(l===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${i});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${i}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let c=`
        float ${t}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${l}, ${i}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,r){let n=r.unpackedShape,o=n[1]*n[2],a=n[2],{newShape:u,keptDims:s}=Gl(n),l=u;if(l.length<n.length){let d=Ml(n,l),h=["batch","col","row"],p=JSON.parse(JSON.stringify(r));p.unpackedShape=d;let m=this.getUnpackedSamplerFromInput(t,e,p),v=s.reverse(),x=`
          ${m.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${Nl(h,v)});
          }
        `;return new ce(x,m.dependencies)}let i=r.width,c=r.height,f=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${o} + col * ${a} + row;
            vec2 uv = uvFromFlat(${i}, ${c}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new ce(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,r){let n=r.unpackedShape,o=n[3],a=n[2]*o,u=n[1]*a,s=r.width,l=r.height,i=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${a} +
              depth2 * ${o} + depth;
          vec2 uv = uvFromFlat(${s}, ${l}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(i,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,r){let n=r.unpackedShape,o=n[4],a=n[3]*o,u=n[2]*a,s=n[1]*u,{newShape:l,keptDims:i}=Gl(n);if(l.length<n.length){let h=Ml(n,l),p=["row","col","depth","depth2","depth3"],m=JSON.parse(JSON.stringify(r));m.unpackedShape=h;let v=`
          ${this.getUnpackedSamplerFromInput(t,e,m).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${Nl(p,i)});
          }
        `;return new ce(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c=r.width,f=r.height,d=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${s} + col * ${u} + depth * ${a} +
          depth3 * ${o} + depth2;
          vec2 uv = uvFromFlat(${c}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new ce(d,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,r){let n=r.unpackedShape,o=n[5],a=n[4]*o,u=n[3]*a,s=n[2]*u,l=n[1]*s,{newShape:i,keptDims:c}=Gl(n);if(i.length<n.length){let p=Ml(n,i),m=["row","col","depth","depth2","depth3","depth4"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=`
            ${this.getUnpackedSamplerFromInput(t,e,v).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${Nl(m,c)});
            }
          `;return new ce(x,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=r.width,d=r.height,h=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${l} + col * ${s} + depth * ${u} +
            depth2 * ${a} + depth3 * ${o} + depth4;
            vec2 uv = uvFromFlat(${f}, ${d}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new ce(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,r=t.strides,n=t.width,o=t.height,a=[];for(let s=0;s<e-1;++s)a.push(`
        c[${s}] = offset / ${r[s]};`),a.push(`
        offset -= c[${s}] * ${r[s]};`);a.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${o});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new ce(u,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],o=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,a=`_${e}`;t[a]=new ce(this.getValueFromSingle(e,o,n.width,n.height,!1),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a=a+"_T",t[a]=new ce(this.getValueFromSingle(e,o,n.width,n.height,!0),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,r,n,o){let a=`_${t}`;o&&(a=a+"_T");let u=Qe(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,r,n,o){let a=`_${t}_Pack`;o&&(a=a+"_T");let u=Qe(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${t}, coords);
        }
        `}}}),iS,Oj=Y(()=>{"use strict";jo(),iS=class ym extends qs{constructor(e){super(e)}getFunctions(){return N(N({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new ce(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new ce(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=ym.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new ce(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=ym.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new ce(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),r=new Uint32Array(e),n=new Uint8Array(e);if(r[0]=3735928559,n[0]===239)return!0;if(n[0]===222)return!1;throw new Error("unknown endianness")}}}),oS,Pj=Y(()=>{"use strict";jo(),tr(),oS=class extends qs{constructor(t){super(t)}getFunctions(){return N(N({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let t=Qe(this.context.glContext.version);return{setFragColor:new ce(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new ce(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),aS,Mj=Y(()=>{"use strict";jo(),aS=class Wl extends qs{constructor(e){super(e)}getFunctions(){return N(N(N(N(N({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,o)=>{let a=this.context.inputTextureLayouts[o].unpackedShape;if(a.length<=e){let u=a.length,s=e-u,l=`bcastIndices_${n}`,i="";for(let f=0;f<u;++f)i+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l} (int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${i}
        }
        `;r[l]=new ce(c)}}),r}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,o)=>{let a=this.context.inputTextureLayouts[o].shape;if(!(a.length<2||a.length>e)){let u=a.length,s=e-u,l=`bcastMatmulIndices_${n}`,i="";for(let f=0;f<u-2;++f)i+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l}(int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${i}
          realIndices[${u-1}] = bcastedIndices[${e-1}];
          realIndices[${u-2}] = bcastedIndices[${e-2}];
        }
        `;r[l]=new ce(c)}}),r}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=o.length,s=`indicesToOffset_${r}`;e[s]=new ce(Wl.indexToOffsetSingle(s,u,a)),s=`indicesToOffset_${r}_T`,e[s]=new ce(Wl.indexToOffsetSingle(s,u,a.slice().reverse()))}),e}static indexToOffsetSingle(e,r,n){let o="";for(let a=r-1;a>=0;--a)o+=`
        offset += indices[${a}] * ${n[a]};
        `;return`
      int ${e}(int indices[${r}]) {
        int offset = 0;
        ${o}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=o.length,s=`offsetToIndices_${r}`;e[s]=new ce(Wl.offsetToIndicesSingle(s,u,a)),s=`offsetToIndices_${r}_T`,e[s]=new ce(Wl.offsetToIndicesSingle(s,u,a.slice().reverse()))}),e}static offsetToIndicesSingle(e,r,n){let o=[];for(let a=0;a<r-1;++a)o.push(`
      indices[${a}] = offset / ${n[a]};`),o.push(`
        offset -= indices[${a}] * ${n[a]};`);return o.push(`
      indices[${r-1}] = offset;`),`
      void ${e}(int offset, out int indices[${r}]) {
        ${o.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=o.length,u=`incrementIndices_${r}`,s="";for(let i=0;i<a;++i)s+=`
        shape[${i}] = ${o[i]};`;let l=`
        void ${u}(int axis, out int indices[${a}]) {
          int shape[${a}];
          ${s};
          for(int i = ${a} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[u]=new ce(l)}),e}}}),sS,Nj=Y(()=>{"use strict";jo(),sS=class extends qs{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return N(N(N(N({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let o=`${n}Vec`,a="";for(let s=0;s<t;++s)a+=`
          dest[${s}] ${e[n]} src[${s}];
          `;let u=`
        void ${o}(int src[${t}], out int dest[${t}]) {
          ${a}
        }
        `;r[o]=new ce(u)}return r}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<t;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new ce(r)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let r=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new ce(r)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${t-1}];
        `;let r=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new ce(r)}}}}),vm,Rj=Y(()=>{"use strict";Cj(),Oj(),Pj(),Mj(),Nj(),vm={encoding:iS,fragcolor:oS,vec:sS,shapeUtils:aS,coordinates:nS}}),uS,Fj=Y(()=>{"use strict";jo(),Ij(),Rj(),tr(),uS=class{constructor(t,e,r,n){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new qT(t,e,r,n),Object.keys(vm).forEach(a=>{let u=new vm[a](this.context);this.libs[a]=u});let o=this.glslLibRoutineDependencyGraph;for(let a in this.libs){let u=this.libs[a].getFunctions();for(let s in u){let l=a+"."+s,i;o[l]?(i=o[l],i.routineBody=u[s].routineBody):(i=new nm(l,u[s].routineBody),o[l]=i);let c=u[s].dependencies;if(c)for(let f=0;f<c.length;++f)if(o[c[f]])i.addDependency(o[c[f]]);else{let d=new nm(c[f]);o[c[f]]=d,i.addDependency(d)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${XV(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Tj(e),`${qV(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let r="";for(let n=0;n<e.length;++n)if(e[n].routineBody)r+=e[n].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[n].name}`);return r}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];t.indexOf(n)!==-1&&e.push(this.glslLibRoutineDependencyGraph[r])}),XT.returnOrderedNodes(e)}getUniforms(t,e){let r=[];if(t)for(let n of t)r.push(`uniform sampler2D ${n};`);if(e)for(let n of e)r.push(`uniform ${n.type} ${n.name}${n.arrayLength?`[${n.arrayLength}]`:""};`);return r.join(`
`)}}}),lS,kj=Y(()=>{"use strict";Fi(),yi(),Fj(),tr(),lS=class{constructor(t,e,r){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,r){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let n=this.glContext.gl,o=t.program;n.useProgram(o);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(a){throw ar.error("ProgramManager",t.programInfo.shaderSource),a}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new uS(this.glContext,t,e,r),o=n.preprocess(),a=this.compile(o);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}})}compile(t){if(!this.vertexShader){ar.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let n=WV(this.glContext.version);this.vertexShader=this.glContext.compileShader(n,this.glContext.gl.VERTEX_SHADER)}we.debug&&ar.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),r}bindOutput(t){let e=t.width,r=t.height;ar.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${r}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,r)}bindAttributes(t){let e=t.position,r=t.textureCoord;this.glContext.setVertexAttributes(e,r),this.attributesBound=!0}bindUniforms(t,e,r){let n=this.glContext.gl,o=0;for(let{name:a,type:u,location:s,arrayLength:l}of t){let i=e.find(c=>c.name===a)?.data;if(u!=="sampler2D"&&!i)throw new Error(`variable '${a}' does not have data defined in program info`);switch(u){case"sampler2D":this.bindTexture(r[o],s,o),o++;break;case"float":l?n.uniform1fv(s,i):n.uniform1f(s,i);break;case"int":l?n.uniform1iv(s,i):n.uniform1i(s,i);break;default:throw new Error(`Uniform not implemented: ${u}`)}}}bindTexture(t,e,r){this.glContext.bindTextureToUniform(t.texture,r,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,r){let n=[];if(e)for(let o of e)n.push({name:o,type:"sampler2D",location:this.getUniformLocation(t,o)});if(r)for(let o of r)n.push(j(N({},o),{location:this.getUniformLocation(t,o.name)}));return n}getUniformLocation(t,e){let r=this.glContext.gl.getUniformLocation(t,e);if(r===null)throw new Error(`Uniform ${e} not found.`);return r}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),cS,Lj=Y(()=>{"use strict";yi(),wd(),cS=class{constructor(t,e,r,n){this.glContext=t,this.layoutStrategy=e,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,r,n){let o=this.toEncoderType(t),a=this.glContext.getEncoder(o,e.channels||1,n);if(e.isPacked&&n===1)throw new Error("not implemented");let u=e.width,s=e.height,l,i;if(this.config.reuseTextures){l=`${u}x${s}_${a.format}_${a.internalFormat}_${a.textureType}`,i=this.inUseTextures.get(l),i||(i=[],this.inUseTextures.set(l,i));let f=this.idleTextures.get(l);if(f&&f.length>0){let d=f.pop();return i.push(d),n===1&&this.glContext.updateTexture(d,u,s,a,this.toTextureData(t,r)),d}}ar.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let c=this.glContext.allocateTexture(u,s,a,this.toTextureData(t,r));return this.config.reuseTextures&&(i.push(c),this.textureLookup.set(c,l)),c}readTexture(t,e,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=t.shape.reduce((a,u)=>a*u)*r,o=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(e),r);return this.toTensorData(e,o)})}readTextureAsync(t,e,r){return U(this,null,function*(){let n=t.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let o=this.pendingRead.get(n);return new Promise(a=>o?.push(a))}return this.profiler.event("backend","TextureManager.readTextureAsync",()=>U(this,null,function*(){this.pendingRead.set(n,[]);let o=t.shape.reduce((l,i)=>l*i)*r;yield this.glContext.createAndWaitForFence();let a=this.glContext.readTexture(t.texture,t.width,t.height,o,this.toEncoderType(e),r),u=this.toTensorData(e,a),s=this.pendingRead.get(n);return this.pendingRead.delete(n),s?.forEach(l=>l(u)),u}))})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((n,o)=>n*o),r=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(r.buffer,r.byteOffset,e)})}releaseTexture(t,e){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(t.texture),r)){e&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let o=n.indexOf(t.texture);if(o!==-1){n.splice(o,1);let a=this.idleTextures.get(r);a||(a=[],this.idleTextures.set(r,a)),a.push(t.texture)}}}(!r||e)&&(ar.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),fS,Bj=Y(()=>{"use strict";yi(),SV(),l9(),Ej(),kj(),rS(),Lj(),fS=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new tS(t.glContext.maxTextureSize),this.programManager=new lS(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new cS(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new zT(this)}onGraphInitialized(t){let e=t.getValues().filter(r=>r.from===-1&&r.tensor).map(r=>r.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){ar.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,r){let n=IV(t,e,JA);return{impl:n.opImpl,context:n.opInit?n.opInit(t,r):t}}}});function $j(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var bm,Vj=Y(()=>{"use strict";Fi(),wd(),wd(),ho(),bm=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,r,n){let o=this.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let u=n?r.encode(n,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,r.internalFormat,t,e,0,r.format,r.textureType,u),this.checkError(),a}updateTexture(t,e,r,n,o){let a=this.gl;a.bindTexture(a.TEXTURE_2D,t);let u=n.encode(o,e*r);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,r,n.format,n.textureType,u),this.checkError()}attachFramebuffer(t,e,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.checkError(),n.viewport(0,0,e,r),n.scissor(0,0,e,r)}readTexture(t,e,r,n,o,a){let u=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,r);let s=this.getEncoder(o,a),l=s.allocate(e*r);return u.bindTexture(u.TEXTURE_2D,t),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),u.readPixels(0,0,e,r,u.RGBA,s.textureType,l),this.checkError(),s.decode(l,n)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let r=this.gl;r.vertexAttribPointer(t,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(t),e!==-1&&(r.vertexAttribPointer(e,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let r=this.gl,n=r.createProgram();return r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),n}compileShader(t,e){let r=this.gl,n=r.createShader(e);if(!n)throw new Error(`createShader() returned null with type ${e}`);if(r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${t}`);return n}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,r){let n=this.gl;n.activeTexture(n.TEXTURE0+e),this.checkError(),n.bindTexture(n.TEXTURE_2D,t),this.checkError(),n.uniform1i(r,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(we.debug){let t=this.gl,e=t.getError(),r="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:r="INVALID_ENUM";break;case t.INVALID_VALUE:r="INVALID_VALUE";break;case t.INVALID_OPERATION:r="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(r)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,r=0){if(this.version===2)return new jT(this.gl,e);switch(t){case"float":return r===1||this.isRenderFloat32Supported?new tm(this.gl,e):new tm(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new UT(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let r=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let r=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,t.RGBA,t.FLOAT,null);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(n),o}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,r,n,o,a;try{e=t.createTexture(),r=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let u=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,u,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),n=t.createShader(t.VERTEX_SHADER),!n||(t.shaderSource(n,"void main(){}"),t.compileShader(n),o=t.createShader(t.FRAGMENT_SHADER),!o)||(t.shaderSource(o,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(o),a=t.createProgram(),!a)?!1:(t.attachShader(a,n),t.attachShader(a,o),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),n&&t.deleteShader(n),o&&t.deleteShader(o),r&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(r)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,r=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let n=this.gl,o=this.disjointTimerQueryWebgl2Extension;e=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(o.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!r}getTimerResult(t){let e=0;if(this.version===2){let r=this.gl;e=r.getQueryParameter(t,r.QUERY_RESULT),r.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}waitForQueryAndGetTime(t){return U(this,null,function*(){return yield V2(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)})}createAndWaitForFence(){return U(this,null,function*(){let t=this.createFence(this.gl);return this.pollFence(t)})}createFence(t){let e,r=t,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),n===null?e=()=>!0:e=()=>{let o=r.clientWaitSync(n,0,0);return o===r.ALREADY_SIGNALED||o===r.CONDITION_SATISFIED},{query:n,isFencePassed:e}}pollFence(t){return U(this,null,function*(){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})})}pollItems(){let t=$j(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){return U(this,null,function*(){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&(yield V2(()=>(this.pollItems(),this.itemsToPoll.length===0)))})}}});function dS(t){let e;if((!t||t==="webgl2")&&"webgl2"in Na?e=Na.webgl2:(!t||t==="webgl")&&"webgl"in Na&&(e=Na.webgl),!e)try{let n=Uj();e=HE(n,t)}catch{let n=jj();e=HE(n,t)}t=t||e.version===1?"webgl":"webgl2";let r=e.gl;return Na[t]=e,r.isContextLost()?(delete Na[t],dS(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),e)}function HE(t,e){let r={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},n,o=r;if((!e||e==="webgl2")&&(n=t.getContext("webgl2",o),n))try{return new bm(n,2)}catch(a){ar.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${a}`)}if((!e||e==="webgl")&&(n=t.getContext("webgl",o)||t.getContext("experimental-webgl",o),n))try{return new bm(n,1)}catch(a){ar.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${a}`)}throw new Error("WebGL is not supported")}function jj(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function Uj(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Na,Hj=Y(()=>{"use strict";yi(),Vj(),Na={}}),hS,zj=Y(()=>{"use strict";Fi(),yi(),Bj(),Hj(),hS=class{get contextId(){return we.webgl.contextId}set contextId(t){we.webgl.contextId=t}get matmulMaxBatchSize(){return we.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){we.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return we.webgl.textureCacheMode}set textureCacheMode(t){we.webgl.textureCacheMode=t}get pack(){return we.webgl.pack}set pack(t){we.webgl.pack=t}get async(){return we.webgl.async}set async(t){we.webgl.async=t}initialize(){try{return this.glContext=dS(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ar.setWithEnv(we),we.webgl.context||Object.defineProperty(we.webgl,"context",{value:this.glContext.gl}),ar.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return ar.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new fS(this,t)}dispose(){this.glContext.dispose()}}});function pS(t){return U(this,null,function*(){if(t){let e=typeof t=="string"?[t]:t;for(let r of e){let n=Lm.get(r);if(n)return n;let o=yield Gj(r);if(o)return o}}else return pS(["webgl"]);throw new Error("no available backend to use")})}function Gj(t){return U(this,null,function*(){let e=gS;if(typeof e[t]<"u"&&Wj(e[t])){let r=e[t],n=r.initialize();if(typeof n=="object"&&"then"in n&&(n=yield n),n)return Lm.set(t,r),r}})}function Wj(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var Lm,gS,qj=Y(()=>{"use strict";zj(),Lm=new Map,gS={webgl:new hS}}),zE,mS,Xj=Y(()=>{"use strict";yi(),zE=class{constructor(t,e){this.op=t,this.node=e}},mS=class{constructor(t,e,r){this.graph=t,this.profiler=r,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((r,n)=>new zE(r,e[n])),this.reset(),this._starter=[],this._ops.forEach((r,n)=>{let o=!0;for(let a of r.node.inputs)if(!this._values[a]&&this.graph.getInputIndices().indexOf(a)===-1){o=!1;break}o&&this._starter.push(n)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}execute(t,e){return U(this,null,function*(){return this.profiler.event("session","ExecutionPlan.execute",()=>U(this,null,function*(){this.reset();let r=t.createInferenceHandler(),n=this.graph.getInputIndices();if(e.length!==n.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${n.length}`);e.forEach((i,c)=>{let f=n[c];this._values[f]=i});let o=this._starter.slice(0),a=this.graph.getValues(),u=this.graph.getNodes(),s=0;for(;s<o.length;){let i=o[s++],c=this._ops[i],f=c.node.inputs.map(m=>this._values[m]);if(f.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${c.node}`);let d=f;ar.verbose("ExecPlan",`Runing op:${c.node.name} (${d.map((m,v)=>`'${c.node.inputs[v]}': ${m.type}[${m.dims.join(",")}]`).join(", ")})`);let h=yield this.profiler.event("node",c.node.name,()=>U(this,null,function*(){return c.op.impl(r,d,c.op.context)}));if(h.length!==c.node.outputs.length)throw new Error("the size of output does not match model definition.");h.forEach((m,v)=>{let x=c.node.outputs[v];if(this._values[x])throw new Error(`output [${x}] already has value: op:${c.node.name}`);this._values[x]=m});let p=new Set;h.forEach((m,v)=>{let x=c.node.outputs[v];for(let y of a[x].to){let _=u[y],I=!0;for(let C of _.inputs)if(!this._values[C]){I=!1;break}I&&p.add(y)}}),o.push(...p)}let l=[];for(let i=0;i<this.graph.getOutputIndices().length;i++){let c=this.graph.getOutputIndices()[i],f=this._values[c];if(f===void 0)throw new Error(`required output [${c}] does not have value`);c===0?yield f.getData():f.data,l.push(f)}return ar.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),l}))})}}}),Ge,In,wm,Yj=Y(()=>{"use strict";Id(),Ge=Vs(rc()),Gs(),dt(),In=vt.experimental.fbs,wm=class ql{constructor(e){if(this._attributes=new Map,e!=null){for(let r of e)r instanceof Ge.onnx.AttributeProto?this._attributes.set(r.name,[ql.getValue(r),ql.getType(r)]):r instanceof In.Attribute&&this._attributes.set(r.name(),[ql.getValue(r),ql.getType(r)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,r,n){this._attributes.set(e,[n,r])}delete(e){this._attributes.delete(e)}getFloat(e,r){return this.get(e,"float",r)}getInt(e,r){return this.get(e,"int",r)}getString(e,r){return this.get(e,"string",r)}getTensor(e,r){return this.get(e,"tensor",r)}getFloats(e,r){return this.get(e,"floats",r)}getInts(e,r){return this.get(e,"ints",r)}getStrings(e,r){return this.get(e,"strings",r)}getTensors(e,r){return this.get(e,"tensors",r)}get(e,r,n){let o=this._attributes.get(e);if(o===void 0){if(n!==void 0)return n;throw new Error(`required attribute not found: ${e}`)}if(o[1]!==r)throw new Error(`type mismatch: expected ${r} but got ${o[1]}`);return o[0]}static getType(e){let r=e instanceof Ge.onnx.AttributeProto?e.type:e.type();switch(r){case Ge.onnx.AttributeProto.AttributeType.FLOAT:return"float";case Ge.onnx.AttributeProto.AttributeType.INT:return"int";case Ge.onnx.AttributeProto.AttributeType.STRING:return"string";case Ge.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case Ge.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case Ge.onnx.AttributeProto.AttributeType.INTS:return"ints";case Ge.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case Ge.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${Ge.onnx.AttributeProto.AttributeType[r]}`)}}static getValue(e){let r=e instanceof Ge.onnx.AttributeProto?e.type:e.type();if(r===Ge.onnx.AttributeProto.AttributeType.GRAPH||r===Ge.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let n=this.getValueNoCheck(e);if(r===Ge.onnx.AttributeProto.AttributeType.INT&&Ni.isLong(n))return Ni.longToNumber(n);if(r===Ge.onnx.AttributeProto.AttributeType.INTS){let o=n,a=new Array(o.length);for(let u=0;u<o.length;u++){let s=o[u];a[u]=Ni.longToNumber(s)}return a}if(r===Ge.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof Ge.onnx.AttributeProto?Sn.fromProto(n):Sn.fromOrtTensor(n);if(r===Ge.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof Ge.onnx.AttributeProto)return n.map(o=>Sn.fromProto(o));if(e instanceof In.Attribute)return n.map(o=>Sn.fromOrtTensor(o))}return r===Ge.onnx.AttributeProto.AttributeType.STRING&&e instanceof Ge.onnx.AttributeProto?Z0(n):r===Ge.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof Ge.onnx.AttributeProto?n.map(Z0):n}static getValueNoCheck(e){return e instanceof Ge.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case Ge.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case Ge.onnx.AttributeProto.AttributeType.INT:return e.i;case Ge.onnx.AttributeProto.AttributeType.STRING:return e.s;case Ge.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case Ge.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case Ge.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case Ge.onnx.AttributeProto.AttributeType.INTS:return e.ints;case Ge.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case Ge.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case Ge.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${Ge.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case In.AttributeType.FLOAT:return e.f();case In.AttributeType.INT:return e.i();case In.AttributeType.STRING:return e.s();case In.AttributeType.TENSOR:return e.t();case In.AttributeType.GRAPH:return e.g();case In.AttributeType.FLOATS:return e.floatsArray();case In.AttributeType.INTS:{let r=[];for(let n=0;n<e.intsLength();n++)r.push(e.ints(n));return r}case In.AttributeType.STRINGS:{let r=[];for(let n=0;n<e.stringsLength();n++)r.push(e.strings(n));return r}case In.AttributeType.TENSORS:{let r=[];for(let n=0;n<e.tensorsLength();n++)r.push(e.tensors(n));return r}default:throw new Error(`unsupported attribute type: ${In.AttributeType[e.type()]}`)}}}}),F0,Ll,xm,co,k0,GE,Zj=Y(()=>{"use strict";Yj(),Id(),F0=Vs(rc()),Gs(),dt(),Ll=vt.experimental.fbs,xm={from:(t,e)=>new GE(t,e)},co=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=An.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},k0=class{constructor(t,e){t instanceof F0.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new wm(t.attribute)):t instanceof Ll.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new wm(An.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},GE=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof F0.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof Ll.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!t.input)throw new Error("missing information in graph: input");let n=[];for(let o of t.input){if(e.has(o.name))throw new Error(`duplicated input name: ${o.name}`);let a=this._allData.push(new co(o))-1;e.set(o.name,a),n.push(o.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let o of t.initializer){let a=e.get(o.name);if(a===void 0){let u=new co;u.type={shape:{dims:An.tensorDimsFromProto(o.dims)},tensorType:An.tensorDataTypeFromProto(o.dataType)},a=this._allData.push(u)-1,e.set(o.name,a)}this._allData[a]._from=-1,this._allData[a].tensor=Sn.fromProto(o)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(n[o]));if(!t.output)throw new Error("missing information in graph: output");for(let o of t.output){if(e.has(o.name))throw new Error(`duplicated output name: ${o.name}`);let a=this._allData.push(new co(o))-1;e.set(o.name,a),this._allOutputIndices.push(a),this._allOutputNames.push(o.name)}if(!t.node)throw new Error("missing information in graph: node");for(let o of t.node){if(!o.name)for(let u=0;;u++){let s=`unnamed_${o.opType}_${u}`;if(!r.has(s)){o.name=s;break}}if(r.has(o.name))throw new Error(`duplicated node name: ${o.name}`);let a=this._nodes.push(new k0(o))-1;r.set(o.name,a)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.node[o];if(!u.output)throw new Error(`missing output for node: ${u.name}`);for(let s of u.output){let l=e.get(s);if(typeof l>"u"&&(l=this._allData.push(new co)-1,e.set(s,l)),a.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=o,u.opType==="Constant"){if(!u.attribute||u.attribute.length!==1||!u.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!u.output||u.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=Sn.fromProto(u.attribute[0].t)}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.node[o];if(!u.input)throw new Error(`missing input for node: ${u.name}`);for(let s of u.input){let l=e.get(s);if(typeof l>"u"){if(s===""&&(u.input.length===3||u.input.length===4)&&u.opType==="Resize")continue;throw new Error(`unrecognized input '${s}' for node: ${u.name}`)}a.inputs.push(l),this._allData[l]._to.push(o)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,n=[];for(let o=0;o<t.inputsLength();o++){let a=t.inputs(o);if(e.has(a))throw new Error(`duplicated input name: ${a}`);for(let u=0;u<t.nodeArgsLength();u++)if(t.nodeArgs(u)?.name()===a){let s=new co;if(t.nodeArgs(u)?.type()?.valueType()!==Ll.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let l=t.nodeArgs(u).type().value(new Ll.TensorTypeAndShape),i=An.tensorDataTypeFromProto(l.elemType()),c=l.shape(),f=[];for(let h=0;h<c.dimLength();h++)f.push(Ni.longToNumber(c.dim(h).value().dimValue()));s.type={shape:{dims:f},tensorType:i};let d=this._allData.push(s)-1;e.set(a,d),n.push(a)}}for(let o=0;o<t.initializersLength();o++){let a=t.initializers(o),u=e.get(a.name());if(u===void 0){let s=new co,l=An.tensorDimsFromORTFormat(a),i=An.tensorDataTypeFromProto(a.dataType());s.type={shape:{dims:l},tensorType:i},u=this._allData.push(s)-1,e.set(a.name(),u)}this._allData[u]._from=-1,this._allData[u].tensor=Sn.fromOrtTensor(a)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(n[o]));for(let o=0;o<t.outputsLength();o++){let a=t.outputs(o);if(e.has(a))throw new Error(`duplicated output name: ${a}`);let u=this._allData.push(new co)-1;e.set(a,u),this._allOutputIndices.push(u),this._allOutputNames.push(a)}if(!t.nodes)throw new Error("missing information in graph: node");for(let o=0;o<t.nodesLength();o++){let a=t.nodes(o),u=a.name();if(!u)for(let l=0;u=`unnamed_${a.opType()}_${l}`,!!r.has(u);l++);if(r.has(u))throw new Error(`duplicated node name: ${u}`);let s=this._nodes.push(new k0(a,u))-1;r.set(u,s)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.nodes(o);if(u==null)throw new Error(`No node exists at index ${o}`);if(u?.outputsLength()===0)throw new Error(`missing output for node: ${u.name}`);for(let s=0;s<u?.outputsLength();s++){let l=u?.outputs(s),i=e.get(l);if(typeof i>"u"&&(i=this._allData.push(new co)-1,e.set(l,i)),a.outputs.push(i),this._allData[i]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${i}`);if(this._allData[i]._from=o,u.opType()==="Constant"){if(u.attributesLength()!==1||!u.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(u.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[i]._from=-1,this._allData[i].tensor=Sn.fromOrtTensor(u.attributes(0).t())}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.nodes(o);if(u.inputsLength()===0)throw new Error(`missing input for node: ${u.name}`);for(let s=0;s<u.inputsLength();s++){let l=u.inputs(s),i=e.get(l);if(typeof i>"u")throw new Error(`unrecognized input '${l}' for node: ${u.name()}`);a.inputs.push(i),this._allData[i]._to.push(o)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(n=>{this._allData[n]._to.forEach(o=>{t.add(o)})});let e=Array.from(t),r=new Array(this._nodes.length).fill("white");for(;e.length>0;){let n=e.pop();r[n]==="gray"?r[n]="black":(e.push(n),r[n]="gray",this._nodes[n].outputs.forEach(o=>{let a=this._allData[o];if(typeof a.tensor<"u")throw new Error("node outputs should not be initialized");if(a._from!==n)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach(u=>{if(r[u]==="gray")throw new Error("model graph is cyclic");r[u]==="white"&&e.push(u)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),r=0;for(let n=0;n<this._nodes.length;n++)e[n]=r,this._nodes[n].executeNode?(r!==n&&(this._nodes[r]=this._nodes[n]),r++):this._nodes[n].outputs.forEach(o=>{this._allData[o]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let n=0;n<this._allData.length;n++){let o=this._allData[n];o._from!==void 0&&o._from!==-1&&o._from!==-2&&(o._from=e[o._from]);for(let a=0;a<o._to.length;a++)if(o._to[a]>=0)o._to[a]=e[o._to[a]];else throw new Error("Trying to update a removed node")}t=0;for(let n=0;n<this._allData.length;n++){if(this._allData[n].from===-2&&this._allOutputIndices.indexOf(n+t)===-1){t++,this._allData.splice(n,1),n--;continue}if(t>0){let o=-1;this._allData[n].from!==void 0&&this._allData[n].from!==-1?(o=this._nodes[this._allData[n].from].outputs.indexOf(n+t),o!==-1&&(this._nodes[this._allData[n].from].outputs[o]=n)):(o=this._allInputIndices.indexOf(n+t),o!==-1&&(this._allInputIndices[o]=n)),this._allData[n].to.forEach(a=>{o=this._nodes[a].inputs.indexOf(n+t),o!==-1&&(this._nodes[a].inputs[o]=n)}),this._allData[n].to.length===0&&(o=this._allOutputIndices.indexOf(n+t),o!==-1&&(this._allOutputIndices[o]=n))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let u=1;u<e.outputs.length;u++)if(this._allData[e.outputs[u]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let r=e.inputs[0],n=e.outputs[0],o=this._allData[n].to;for(let u=0;u<e.inputs.length;u++){let s=this._allData[e.inputs[u]].to.indexOf(t);if(s===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[u]].to.splice(s,1)}this._allData[n]._to=[];let a=this._allOutputIndices.indexOf(n);if(a!==-1&&(this._allOutputIndices[a]=r),o&&o.length>0)for(let u of o){let s=this._nodes[u].inputs.indexOf(n);if(s===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[u].inputs[s]=r,this._allData[r].to.push(u)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let r=this._nodes[e[0]];if(r.opType==="Clip")if(r.inputs.length===1)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[Jl,ec])}else if(r.inputs.length>=3&&this._allData[r.inputs[1]].tensor!==void 0&&this._allData[r.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",r.opType),this.deleteNode(e[0])}}}}}),WE,qE,yS,Kj=Y(()=>{"use strict";Om(),Zj(),Id(),WE=Vs(rc()),dt(),qE=vt.experimental.fbs,yS=class{constructor(){}load(t,e,r){if(!r)try{this.loadFromOnnxFormat(t,e);return}catch(n){if(r!==void 0)throw n}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){let r=WE.onnx.ModelProto.decode(t);if(Ni.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(n=>({domain:n.domain,version:Ni.longToNumber(n.version)})),this._graph=xm.from(r.graph,e)}loadFromOrtFormat(t,e){let r=new B.ByteBuffer(t),n=qE.InferenceSession.getRootAsInferenceSession(r).model();if(Ni.longToNumber(n.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let o=0;o<n.opsetImportLength();o++){let a=n.opsetImport(o);this._opsets.push({domain:a?.domain(),version:Ni.longToNumber(a.version())})}this._graph=xm.from(n.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),vS,Qj=Y(()=>{"use strict";qj(),Xj(),yi(),Kj(),vS=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=CT.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(t,e,r){return U(this,null,function*(){yield this.profiler.event("session","Session.loadModel",()=>U(this,null,function*(){let n=yield pS(this.backendHint);if(this.sessionHandler=n.createSessionHandler(this.context),this._model=new yS,typeof t=="string"){let o=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let a=yield(void 0)(t);this.initialize(a,o)}else{let a=yield(yield fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),o)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let o=new Uint8Array(t,e||0,r||t.byteLength);this.initialize(o)}}))})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,r,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new mS(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(t){return U(this,null,function*(){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",()=>U(this,null,function*(){let e=this.normalizeAndValidateInputs(t),r=yield this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(r)}))})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let r=new Array(t.size),n=0;for(let o=0;o<e.length;++o){let a=t.get(e[o]);if(!a)throw new Error(`missing input tensor for: '${name}'`);r[n++]=a}t=r}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let r=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),o=new Array(r.length);for(let a=0;a<r.length;++a){let u=n[r[a]];o[a]=u.type.shape.dims,this.context.graphInputTypes.push(u.type.tensorType),this.context.graphInputDims.push(t[a].dims)}this.validateInputTensorDims(o,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let r=0;r<e.length;r++){let n=t[r],o=e[r].type;if(n!==o)throw new Error(`input tensor[${r}] check failed: expected type '${n}' but got ${o}`)}}validateInputTensorDims(t,e,r){for(let n=0;n<e.length;n++){let o=t[n],a=e[n].dims;if(!this.compareTensorDims(o,a,r))throw new Error(`input tensor[${n}] check failed: expected shape '[${o.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]&&(!r||t[n]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<e.length;++n)r.set(e[n],t[n]);return r}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let r=0;r<e.length;r++)this._ops[r]=this.sessionHandler.resolve(e[r],this._model.opsets,t)}}}),bS,Jj=Y(()=>{"use strict";Fi(),Gs(),bS=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return U(this,null,function*(){})}run(t,e,r){return U(this,null,function*(){let n=new Map;for(let u in t)if(Object.hasOwnProperty.call(t,u)){let s=t[u];n.set(u,new Sn(s.dims,s.type,void 0,void 0,s.data))}let o=yield this.session.run(n),a={};return o.forEach((u,s)=>{a[s]=new Ur(u.type,u.data,u.dims)}),a})}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),wS={};zs(wS,{onnxjsBackend:()=>xS});var XE,xS,eU=Y(()=>{"use strict";Qj(),Jj(),XE=class{init(){return U(this,null,function*(){})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new vS(e);return typeof t=="string"?yield r.loadModel(t):yield r.loadModel(t),new bS(r)})}},xS=new XE}),Bm={};zs(Bm,{createReadStream:()=>TS,readFile:()=>_S,readFileSync:()=>ES});var _S,ES,TS,IS=Y(()=>{_S=void 0,ES=void 0,TS=void 0}),$m={};zs($m,{join:()=>AS});var AS,SS=Y(()=>{AS=void 0}),tU=jt((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(o={}){var a=o,u,s;a.ready=new Promise((w,T)=>{u=w,s=T});var l=Object.assign({},a),i="./this.program",c=typeof window=="object",f=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",p,m,v;if(d){var x=(IS(),ka(Bm)),y=(SS(),ka($m));h=f?y.dirname(h)+"/":__dirname+"/",p=(w,T)=>(w=xt(w)?new URL(w):y.normalize(w),x.readFileSync(w,T?void 0:"utf8")),v=w=>(w=p(w,!0),w.buffer||(w=new Uint8Array(w)),w),m=(w,T,A,M=!0)=>{w=xt(w)?new URL(w):y.normalize(w),x.readFile(w,M?void 0:"utf8",(G,Q)=>{G?A(G):T(M?Q.buffer:Q)})},!a.thisProgram&&1<process.argv.length&&(i=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(c||f)&&(f?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",p=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.send(null),T.responseText},f&&(v=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),m=(w,T,A)=>{var M=new XMLHttpRequest;M.open("GET",w,!0),M.responseType="arraybuffer",M.onload=()=>{M.status==200||M.status==0&&M.response?T(M.response):A()},M.onerror=A,M.send(null)});var _=console.log.bind(console),I=console.error.bind(console);Object.assign(a,l),l=null,typeof WebAssembly!="object"&&Ee("no native wasm support detected");var C,V=!1,z,W,k,X,ke;function me(){var w=C.buffer;a.HEAP8=z=new Int8Array(w),a.HEAP16=new Int16Array(w),a.HEAPU8=W=new Uint8Array(w),a.HEAPU16=new Uint16Array(w),a.HEAP32=k=new Int32Array(w),a.HEAPU32=X=new Uint32Array(w),a.HEAPF32=new Float32Array(w),a.HEAPF64=ke=new Float64Array(w)}var ye=[],Z=[],he=[],pt=0,qe=null,Ue=null;function Ee(w){throw w="Aborted("+w+")",I(w),V=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),s(w),w}var wt=w=>w.startsWith("data:application/octet-stream;base64,"),xt=w=>w.startsWith("file://"),Ct;if(Ct="ort-wasm.wasm",!wt(Ct)){var gr=Ct;Ct=a.locateFile?a.locateFile(gr,h):h+gr}function It(w){if(v)return v(w);throw"both async and sync fetching of the wasm failed"}function lr(w){if(c||f){if(typeof fetch=="function"&&!xt(w))return fetch(w,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+w+"'";return T.arrayBuffer()}).catch(()=>It(w));if(m)return new Promise((T,A)=>{m(w,M=>T(new Uint8Array(M)),A)})}return Promise.resolve().then(()=>It(w))}function Gt(w,T,A){return lr(w).then(M=>WebAssembly.instantiate(M,T)).then(M=>M).then(A,M=>{I(`failed to asynchronously prepare wasm: ${M}`),Ee(M)})}function Lr(w,T){var A=Ct;return typeof WebAssembly.instantiateStreaming!="function"||wt(A)||xt(A)||d||typeof fetch!="function"?Gt(A,w,T):fetch(A,{credentials:"same-origin"}).then(M=>WebAssembly.instantiateStreaming(M,w).then(T,function(G){return I(`wasm streaming compile failed: ${G}`),I("falling back to ArrayBuffer instantiation"),Gt(A,w,T)}))}var Ae,Se={919888:(w,T,A,M)=>{if(typeof a>"u"||!a.za)return 1;if(w=xr(w>>>0),w.startsWith("./")&&(w=w.substring(2)),w=a.za.get(w),!w)return 2;if(T>>>=0,A>>>=0,T+A>w.byteLength)return 3;try{return W.set(w.subarray(T,T+A),M>>>0>>>0),0}catch{return 4}}};function wr(w){this.xa=w-24,this.Ha=function(T){X[this.xa+4>>>2>>>0]=T},this.Ga=function(T){X[this.xa+8>>>2>>>0]=T},this.Aa=function(T,A){this.Fa(),this.Ha(T),this.Ga(A)},this.Fa=function(){X[this.xa+16>>>2>>>0]=0}}var Kt=0,dn=0,hn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qn=(w,T,A)=>{T>>>=0;var M=T+A;for(A=T;w[A]&&!(A>=M);)++A;if(16<A-T&&w.buffer&&hn)return hn.decode(w.subarray(T,A));for(M="";T<A;){var G=w[T++];if(G&128){var Q=w[T++]&63;if((G&224)==192)M+=String.fromCharCode((G&31)<<6|Q);else{var le=w[T++]&63;G=(G&240)==224?(G&15)<<12|Q<<6|le:(G&7)<<18|Q<<12|le<<6|w[T++]&63,65536>G?M+=String.fromCharCode(G):(G-=65536,M+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else M+=String.fromCharCode(G)}return M},xr=(w,T)=>(w>>>=0)?qn(W,w,T):"",_r=w=>{for(var T=0,A=0;A<w.length;++A){var M=w.charCodeAt(A);127>=M?T++:2047>=M?T+=2:55296<=M&&57343>=M?(T+=4,++A):T+=3}return T},pn=(w,T,A,M)=>{if(A>>>=0,!(0<M))return 0;var G=A;M=A+M-1;for(var Q=0;Q<w.length;++Q){var le=w.charCodeAt(Q);if(55296<=le&&57343>=le){var Ve=w.charCodeAt(++Q);le=65536+((le&1023)<<10)|Ve&1023}if(127>=le){if(A>=M)break;T[A++>>>0]=le}else{if(2047>=le){if(A+1>=M)break;T[A++>>>0]=192|le>>6}else{if(65535>=le){if(A+2>=M)break;T[A++>>>0]=224|le>>12}else{if(A+3>=M)break;T[A++>>>0]=240|le>>18,T[A++>>>0]=128|le>>12&63}T[A++>>>0]=128|le>>6&63}T[A++>>>0]=128|le&63}}return T[A>>>0]=0,A-G},Br=w=>w%4===0&&(w%100!==0||w%400===0),Xn=[0,31,60,91,121,152,182,213,244,274,305,335],$i=[0,31,59,90,120,151,181,212,243,273,304,334],Er=w=>{var T=_r(w)+1,A=ji(T);return A&&pn(w,W,A,T),A},gn=[],$r={},mn=()=>{if(!yn){var w={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:i||"./this.program"},T;for(T in $r)$r[T]===void 0?delete w[T]:w[T]=$r[T];var A=[];for(T in w)A.push(`${T}=${w[T]}`);yn=A}return yn},yn,Zr=[null,[],[]],Yn=[31,29,31,30,31,30,31,31,30,31,30,31],Zn=[31,28,31,30,31,30,31,31,30,31,30,31];function vn(w){var T=Array(_r(w)+1);return pn(w,T,0,T.length),T}function Vi(w,T,A,M){function G(O,pe,xe){for(O=typeof O=="number"?O.toString():O||"";O.length<pe;)O=xe[0]+O;return O}function Q(O,pe){return G(O,pe,"0")}function le(O,pe){function xe(ti){return 0>ti?-1:0<ti?1:0}var cr;return(cr=xe(O.getFullYear()-pe.getFullYear()))===0&&(cr=xe(O.getMonth()-pe.getMonth()))===0&&(cr=xe(O.getDate()-pe.getDate())),cr}function Ve(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function ut(O){var pe=O.ta;for(O=new Date(new Date(O.ua+1900,0,1).getTime());0<pe;){var xe=O.getMonth(),cr=(Br(O.getFullYear())?Yn:Zn)[xe];if(pe>cr-O.getDate())pe-=cr-O.getDate()+1,O.setDate(1),11>xe?O.setMonth(xe+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else{O.setDate(O.getDate()+pe);break}}return xe=new Date(O.getFullYear()+1,0,4),pe=Ve(new Date(O.getFullYear(),0,4)),xe=Ve(xe),0>=le(pe,O)?0>=le(xe,O)?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}w>>>=0,T>>>=0,A>>>=0,M>>>=0;var Xe=X[M+40>>>2>>>0];M={Da:k[M>>>2>>>0],Ca:k[M+4>>>2>>>0],va:k[M+8>>>2>>>0],ya:k[M+12>>>2>>>0],wa:k[M+16>>>2>>>0],ua:k[M+20>>>2>>>0],oa:k[M+24>>>2>>>0],ta:k[M+28>>>2>>>0],Ia:k[M+32>>>2>>>0],Ba:k[M+36>>>2>>>0],Ea:Xe?xr(Xe):""},A=xr(A),Xe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ye in Xe)A=A.replace(new RegExp(Ye,"g"),Xe[Ye]);var Jn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ei="January February March April May June July August September October November December".split(" ");Xe={"%a":O=>Jn[O.oa].substring(0,3),"%A":O=>Jn[O.oa],"%b":O=>ei[O.wa].substring(0,3),"%B":O=>ei[O.wa],"%C":O=>Q((O.ua+1900)/100|0,2),"%d":O=>Q(O.ya,2),"%e":O=>G(O.ya,2," "),"%g":O=>ut(O).toString().substring(2),"%G":O=>ut(O),"%H":O=>Q(O.va,2),"%I":O=>(O=O.va,O==0?O=12:12<O&&(O-=12),Q(O,2)),"%j":O=>{for(var pe=0,xe=0;xe<=O.wa-1;pe+=(Br(O.ua+1900)?Yn:Zn)[xe++]);return Q(O.ya+pe,3)},"%m":O=>Q(O.wa+1,2),"%M":O=>Q(O.Ca,2),"%n":()=>`
`,"%p":O=>0<=O.va&&12>O.va?"AM":"PM","%S":O=>Q(O.Da,2),"%t":()=>"	","%u":O=>O.oa||7,"%U":O=>Q(Math.floor((O.ta+7-O.oa)/7),2),"%V":O=>{var pe=Math.floor((O.ta+7-(O.oa+6)%7)/7);if(2>=(O.oa+371-O.ta-2)%7&&pe++,pe)pe==53&&(xe=(O.oa+371-O.ta)%7,xe==4||xe==3&&Br(O.ua)||(pe=1));else{pe=52;var xe=(O.oa+7-O.ta-1)%7;(xe==4||xe==5&&Br(O.ua%400-1))&&pe++}return Q(pe,2)},"%w":O=>O.oa,"%W":O=>Q(Math.floor((O.ta+7-(O.oa+6)%7)/7),2),"%y":O=>(O.ua+1900).toString().substring(2),"%Y":O=>O.ua+1900,"%z":O=>{O=O.Ba;var pe=0<=O;return O=Math.abs(O)/60,(pe?"+":"-")+("0000"+(O/60*100+O%60)).slice(-4)},"%Z":O=>O.Ea,"%%":()=>"%"},A=A.replace(/%%/g,"\0\0");for(Ye in Xe)A.includes(Ye)&&(A=A.replace(new RegExp(Ye,"g"),Xe[Ye](M)));return A=A.replace(/\0\0/g,"%"),Ye=vn(A),Ye.length>T?0:(z.set(Ye,w>>>0),Ye.length-1)}var be={a:function(w,T,A){throw w>>>=0,new wr(w).Aa(T>>>0,A>>>0),Kt=w,dn++,Kt},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getUTCSeconds(),k[A+4>>>2>>>0]=w.getUTCMinutes(),k[A+8>>>2>>>0]=w.getUTCHours(),k[A+12>>>2>>>0]=w.getUTCDate(),k[A+16>>>2>>>0]=w.getUTCMonth(),k[A+20>>>2>>>0]=w.getUTCFullYear()-1900,k[A+24>>>2>>>0]=w.getUTCDay(),k[A+28>>>2>>>0]=(w.getTime()-Date.UTC(w.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getSeconds(),k[A+4>>>2>>>0]=w.getMinutes(),k[A+8>>>2>>>0]=w.getHours(),k[A+12>>>2>>>0]=w.getDate(),k[A+16>>>2>>>0]=w.getMonth(),k[A+20>>>2>>>0]=w.getFullYear()-1900,k[A+24>>>2>>>0]=w.getDay(),k[A+28>>>2>>>0]=(Br(w.getFullYear())?Xn:$i)[w.getMonth()]+w.getDate()-1|0,k[A+36>>>2>>>0]=-(60*w.getTimezoneOffset()),T=new Date(w.getFullYear(),6,1).getTimezoneOffset();var M=new Date(w.getFullYear(),0,1).getTimezoneOffset();k[A+32>>>2>>>0]=(T!=M&&w.getTimezoneOffset()==Math.min(M,T))|0},p:function(w){w>>>=0;var T=new Date(k[w+20>>>2>>>0]+1900,k[w+16>>>2>>>0],k[w+12>>>2>>>0],k[w+8>>>2>>>0],k[w+4>>>2>>>0],k[w>>>2>>>0],0),A=k[w+32>>>2>>>0],M=T.getTimezoneOffset(),G=new Date(T.getFullYear(),6,1).getTimezoneOffset(),Q=new Date(T.getFullYear(),0,1).getTimezoneOffset(),le=Math.min(Q,G);return 0>A?k[w+32>>>2>>>0]=+(G!=Q&&le==M):0<A!=(le==M)&&(G=Math.max(Q,G),T.setTime(T.getTime()+6e4*((0<A?le:G)-M))),k[w+24>>>2>>>0]=T.getDay(),k[w+28>>>2>>>0]=(Br(T.getFullYear())?Xn:$i)[T.getMonth()]+T.getDate()-1|0,k[w>>>2>>>0]=T.getSeconds(),k[w+4>>>2>>>0]=T.getMinutes(),k[w+8>>>2>>>0]=T.getHours(),k[w+12>>>2>>>0]=T.getDate(),k[w+16>>>2>>>0]=T.getMonth(),k[w+20>>>2>>>0]=T.getYear(),w=T.getTime(),isNaN(w)?(k[bn()>>>2>>>0]=61,w=-1):w/=1e3,Kn((Ae=w,1<=+Math.abs(Ae)?0<Ae?+Math.floor(Ae/4294967296)>>>0:~~+Math.ceil((Ae-+(~~Ae>>>0))/4294967296)>>>0:0)),w>>>0},l:function(){return-52},m:function(){},t:function(w,T,A){function M(ut){return(ut=ut.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ut[1]:"GMT"}A>>>=0;var G=new Date().getFullYear(),Q=new Date(G,0,1),le=new Date(G,6,1);G=Q.getTimezoneOffset();var Ve=le.getTimezoneOffset();X[w>>>0>>>2>>>0]=60*Math.max(G,Ve),k[T>>>0>>>2>>>0]=+(G!=Ve),w=M(Q),T=M(le),w=Er(w),T=Er(T),Ve<G?(X[A>>>2>>>0]=w,X[A+4>>>2>>>0]=T):(X[A>>>2>>>0]=T,X[A+4>>>2>>>0]=w)},d:()=>{Ee("")},B:function(w,T,A){w>>>=0,T>>>=0,A>>>=0,gn.length=0;for(var M;M=W[T++>>>0];){var G=M!=105;G&=M!=112,A+=G&&A%8?4:0,gn.push(M==112?X[A>>>2>>>0]:M==105?k[A>>>2>>>0]:ke[A>>>3>>>0]),A+=G?8:4}return Se[w].apply(null,gn)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(w,T,A){return T>>>=0,W.copyWithin(w>>>0>>>0,T>>>0,T+(A>>>0)>>>0)},s:function(w){w>>>=0;var T=W.length;if(4294901760<w)return!1;for(var A=1;4>=A;A*=2){var M=T*(1+.2/A);M=Math.min(M,w+100663296);var G=Math;M=Math.max(w,M);e:{G=(G.min.call(G,4294901760,M+(65536-M%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(G),me();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},C:function(w,T){w>>>=0,T>>>=0;var A=0;return mn().forEach((M,G)=>{var Q=T+A;for(G=X[w+4*G>>>2>>>0]=Q,Q=0;Q<M.length;++Q)z[G++>>>0>>>0]=M.charCodeAt(Q);z[G>>>0>>>0]=0,A+=M.length+1}),0},D:function(w,T){w>>>=0,T>>>=0;var A=mn();X[w>>>2>>>0]=A.length;var M=0;return A.forEach(G=>M+=G.length+1),X[T>>>2>>>0]=M,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(w,T,A,M){T>>>=0,A>>>=0,M>>>=0;for(var G=0,Q=0;Q<A;Q++){var le=X[T>>>2>>>0],Ve=X[T+4>>>2>>>0];T+=8;for(var ut=0;ut<Ve;ut++){var Xe=W[le+ut>>>0],Ye=Zr[w];Xe===0||Xe===10?((w===1?_:I)(qn(Ye,0)),Ye.length=0):Ye.push(Xe)}G+=Ve}return X[M>>>2>>>0]=G,0},r:Vi,c:function(w,T,A,M){return Vi(w>>>0,T>>>0,A>>>0,M>>>0)}},oe=function(){function w(A){return oe=A.exports,oe=Hi(),C=oe.K,me(),Z.unshift(oe.L),pt--,pt==0&&(qe!==null&&(clearInterval(qe),qe=null),Ue&&(A=Ue,Ue=null,A())),oe}var T={a:be};if(pt++,a.instantiateWasm)try{return a.instantiateWasm(T,w)}catch(A){I(`Module.instantiateWasm callback failed with error: ${A}`),s(A)}return Lr(T,function(A){w(A.instance)}).catch(s),{}}();a._OrtInit=(w,T)=>(a._OrtInit=oe.M)(w,T),a._OrtGetLastError=(w,T)=>(a._OrtGetLastError=oe.N)(w,T),a._OrtCreateSessionOptions=(w,T,A,M,G,Q,le,Ve,ut,Xe)=>(a._OrtCreateSessionOptions=oe.O)(w,T,A,M,G,Q,le,Ve,ut,Xe),a._OrtAppendExecutionProvider=(w,T)=>(a._OrtAppendExecutionProvider=oe.P)(w,T),a._OrtAddFreeDimensionOverride=(w,T,A)=>(a._OrtAddFreeDimensionOverride=oe.Q)(w,T,A),a._OrtAddSessionConfigEntry=(w,T,A)=>(a._OrtAddSessionConfigEntry=oe.R)(w,T,A),a._OrtReleaseSessionOptions=w=>(a._OrtReleaseSessionOptions=oe.S)(w),a._OrtCreateSession=(w,T,A)=>(a._OrtCreateSession=oe.T)(w,T,A),a._OrtReleaseSession=w=>(a._OrtReleaseSession=oe.U)(w),a._OrtGetInputOutputCount=(w,T,A)=>(a._OrtGetInputOutputCount=oe.V)(w,T,A),a._OrtGetInputName=(w,T)=>(a._OrtGetInputName=oe.W)(w,T),a._OrtGetOutputName=(w,T)=>(a._OrtGetOutputName=oe.X)(w,T),a._OrtFree=w=>(a._OrtFree=oe.Y)(w),a._OrtCreateTensor=(w,T,A,M,G,Q)=>(a._OrtCreateTensor=oe.Z)(w,T,A,M,G,Q),a._OrtGetTensorData=(w,T,A,M,G)=>(a._OrtGetTensorData=oe._)(w,T,A,M,G),a._OrtReleaseTensor=w=>(a._OrtReleaseTensor=oe.$)(w),a._OrtCreateRunOptions=(w,T,A,M)=>(a._OrtCreateRunOptions=oe.aa)(w,T,A,M),a._OrtAddRunConfigEntry=(w,T,A)=>(a._OrtAddRunConfigEntry=oe.ba)(w,T,A),a._OrtReleaseRunOptions=w=>(a._OrtReleaseRunOptions=oe.ca)(w),a._OrtCreateBinding=w=>(a._OrtCreateBinding=oe.da)(w),a._OrtBindInput=(w,T,A)=>(a._OrtBindInput=oe.ea)(w,T,A),a._OrtBindOutput=(w,T,A,M)=>(a._OrtBindOutput=oe.fa)(w,T,A,M),a._OrtClearBoundOutputs=w=>(a._OrtClearBoundOutputs=oe.ga)(w),a._OrtReleaseBinding=w=>(a._OrtReleaseBinding=oe.ha)(w),a._OrtRunWithBinding=(w,T,A,M,G)=>(a._OrtRunWithBinding=oe.ia)(w,T,A,M,G),a._OrtRun=(w,T,A,M,G,Q,le,Ve)=>(a._OrtRun=oe.ja)(w,T,A,M,G,Q,le,Ve),a._OrtEndProfiling=w=>(a._OrtEndProfiling=oe.ka)(w);var bn=()=>(bn=oe.la)(),ji=a._malloc=w=>(ji=a._malloc=oe.ma)(w);a._free=w=>(a._free=oe.na)(w);var Kn=w=>(Kn=oe.pa)(w),Ui=()=>(Ui=oe.qa)(),te=w=>(te=oe.ra)(w),Kr=w=>(Kr=oe.sa)(w);function Hi(){var w=oe;w=Object.assign({},w);var T=M=>()=>M()>>>0,A=M=>G=>M(G)>>>0;return w.la=T(w.la),w.ma=A(w.ma),w.qa=T(w.qa),w.sa=A(w.sa),w}a.stackAlloc=Kr,a.stackSave=Ui,a.stackRestore=te,a.UTF8ToString=xr,a.stringToUTF8=(w,T,A)=>pn(w,W,T,A),a.lengthBytesUTF8=_r;var Tr;Ue=function w(){Tr||Qn(),Tr||(Ue=w)};function Qn(){if(!(0<pt)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var w=a.preRun.shift();ye.unshift(w)}for(;0<ye.length;)ye.shift()(a);if(!(0<pt||Tr||(Tr=!0,a.calledRun=!0,V))){for(;0<Z.length;)Z.shift()(a);for(u(a);0<he.length;)he.shift()(a)}}}return Qn(),o.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),rU=jt(()=>{}),nU=jt(()=>{}),DS={};zs(DS,{cpus:()=>CS});var CS,iU=Y(()=>{CS=void 0}),oU=jt((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(o={}){function a(){return he.buffer!=Ee.buffer&&It(),Ee}function u(){return he.buffer!=Ee.buffer&&It(),wt}function s(){return he.buffer!=Ee.buffer&&It(),xt}function l(){return he.buffer!=Ee.buffer&&It(),Ct}function i(){return he.buffer!=Ee.buffer&&It(),gr}var c=o,f,d;c.ready=new Promise((g,b)=>{f=g,d=b});var h=Object.assign({},c),p="./this.program",m=(g,b)=>{throw b},v=typeof window=="object",x=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=c.ENVIRONMENT_IS_PTHREAD||!1,I="";function C(g){return c.locateFile?c.locateFile(g,I):I+g}var V,z,W;if(y){var k=(IS(),ka(Bm)),X=(SS(),ka($m));I=x?X.dirname(I)+"/":__dirname+"/",V=(b,E)=>(b=xr(b)?new URL(b):X.normalize(b),k.readFileSync(b,E?void 0:"utf8")),W=b=>(b=V(b,!0),b.buffer||(b=new Uint8Array(b)),b),z=(b,E,S,R=!0)=>{b=xr(b)?new URL(b):X.normalize(b),k.readFile(b,R?void 0:"utf8",(F,q)=>{F?S(F):E(R?q.buffer:q)})},!c.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(b,E)=>{throw process.exitCode=b,E},c.inspect=()=>"[Emscripten Module object]";let g;try{g=rU()}catch(b){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),b}global.Worker=g.Worker}else(v||x)&&(x?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),typeof n<"u"&&n&&(I=n),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",y||(V=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.send(null),b.responseText},x&&(W=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),z=(g,b,E)=>{var S=new XMLHttpRequest;S.open("GET",g,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?b(S.response):E()},S.onerror=E,S.send(null)}));y&&typeof performance>"u"&&(global.performance=nU().performance);var ke=console.log.bind(console),me=console.error.bind(console);y&&(ke=(...g)=>k.writeSync(1,g.join(" ")+`
`),me=(...g)=>k.writeSync(2,g.join(" ")+`
`));var ye=ke,Z=me;Object.assign(c,h),h=null,typeof WebAssembly!="object"&&hn("no native wasm support detected");var he,pt,qe=!1,Ue,Ee,wt,xt,Ct,gr;function It(){var g=he.buffer;c.HEAP8=Ee=new Int8Array(g),c.HEAP16=new Int16Array(g),c.HEAPU8=wt=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAP32=xt=new Int32Array(g),c.HEAPU32=Ct=new Uint32Array(g),c.HEAPF32=new Float32Array(g),c.HEAPF64=gr=new Float64Array(g)}var lr=16777216;if(_)he=c.wasmMemory;else if(c.wasmMemory)he=c.wasmMemory;else if(he=new WebAssembly.Memory({initial:lr/65536,maximum:65536,shared:!0}),!(he.buffer instanceof SharedArrayBuffer))throw Z("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&Z("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");It(),lr=he.buffer.byteLength;var Gt=[],Lr=[],Ae=[],Se=0,wr=null,Kt=null;function dn(){if(Se--,Se==0&&(wr!==null&&(clearInterval(wr),wr=null),Kt)){var g=Kt;Kt=null,g()}}function hn(g){throw g="Aborted("+g+")",Z(g),qe=!0,Ue=1,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),d(g),g}var qn=g=>g.startsWith("data:application/octet-stream;base64,"),xr=g=>g.startsWith("file://"),_r;_r="ort-wasm-threaded.wasm",qn(_r)||(_r=C(_r));function pn(g){if(W)return W(g);throw"both async and sync fetching of the wasm failed"}function Br(g){if(v||x){if(typeof fetch=="function"&&!xr(g))return fetch(g,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+g+"'";return b.arrayBuffer()}).catch(()=>pn(g));if(z)return new Promise((b,E)=>{z(g,S=>b(new Uint8Array(S)),E)})}return Promise.resolve().then(()=>pn(g))}function Xn(g,b,E){return Br(g).then(S=>WebAssembly.instantiate(S,b)).then(S=>S).then(E,S=>{Z(`failed to asynchronously prepare wasm: ${S}`),hn(S)})}function $i(g,b){var E=_r;return typeof WebAssembly.instantiateStreaming!="function"||qn(E)||xr(E)||y||typeof fetch!="function"?Xn(E,g,b):fetch(E,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,g).then(b,function(R){return Z(`wasm streaming compile failed: ${R}`),Z("falling back to ArrayBuffer instantiation"),Xn(E,g,b)}))}var Er,gn={921276:(g,b,E,S)=>{if(typeof c>"u"||!c.cb)return 1;if(g=vn(g>>>0),g.startsWith("./")&&(g=g.substring(2)),g=c.cb.get(g),!g)return 2;if(b>>>=0,E>>>=0,S>>>=0,b+E>g.byteLength)return 3;try{return u().set(g.subarray(b,b+E),S>>>0),0}catch{return 4}}};function $r(g){this.name="ExitStatus",this.message=`Program terminated with exit(${g})`,this.status=g}var mn=g=>{g.terminate(),g.onmessage=()=>{}},yn=g=>{te.Pa.length==0&&(Kn(),te.Ya(te.Pa[0]));var b=te.Pa.pop();if(!b)return 6;te.Qa.push(b),te.Ma[g.Oa]=b,b.Oa=g.Oa;var E={cmd:"run",start_routine:g.kb,arg:g.hb,pthread_ptr:g.Oa};return y&&b.unref(),b.postMessage(E,g.qb),0},Zr=0,Yn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Zn=(g,b,E)=>{b>>>=0;var S=b+E;for(E=b;g[E]&&!(E>=S);)++E;if(16<E-b&&g.buffer&&Yn)return Yn.decode(g.buffer instanceof SharedArrayBuffer?g.slice(b,E):g.subarray(b,E));for(S="";b<E;){var R=g[b++];if(R&128){var F=g[b++]&63;if((R&224)==192)S+=String.fromCharCode((R&31)<<6|F);else{var q=g[b++]&63;R=(R&240)==224?(R&15)<<12|F<<6|q:(R&7)<<18|F<<12|q<<6|g[b++]&63,65536>R?S+=String.fromCharCode(R):(R-=65536,S+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else S+=String.fromCharCode(R)}return S},vn=(g,b)=>(g>>>=0)?Zn(u(),g,b):"",Vi=g=>{var b=ia();return g=g(),Wi(b),g};function be(g,b){var E=arguments.length-2,S=arguments;return Vi(()=>{for(var R=oa(8*E),F=R>>>3,q=0;q<E;q++){var De=S[2+q];i()[F+q>>>0]=De}return Mu(g,E,R,b)})}function oe(g){if(_)return be(0,1,g);Ue=g,0<Zr||(te.lb(),c.onExit?.(g),qe=!0),m(g,new $r(g))}var bn=g=>{if(Ue=g,_)throw Hi(g),"unwind";oe(g)};function ji(){for(var g=c.numThreads;g--;)Kn();Gt.unshift(()=>{Se++,Ui(()=>dn())})}function Kn(){var g=C("ort-wasm-threaded.worker.js");g=new Worker(g),te.Pa.push(g)}function Ui(g){_?g():Promise.all(te.Pa.map(te.Ya)).then(g)}var te={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(te.receiveObjectTransfer=te.jb,te.threadInitTLS=te.ab,te.setExitStatus=te.$a):ji()},$a:g=>Ue=g,tb:["$terminateWorker"],lb:()=>{for(var g of te.Qa)mn(g);for(g of te.Pa)mn(g);te.Pa=[],te.Qa=[],te.Ma=[]},Za:g=>{var b=g.Oa;delete te.Ma[b],te.Pa.push(g),te.Qa.splice(te.Qa.indexOf(g),1),g.Oa=0,ra(b)},jb(){},ab(){te.bb.forEach(g=>g())},Ya:g=>new Promise(b=>{g.onmessage=F=>{F=F.data;var q=F.cmd;if(F.targetThread&&F.targetThread!=Gi()){var De=te.Ma[F.targetThread];De?De.postMessage(F,F.transferList):Z(`Internal error! Worker sent a message "${q}" to target pthread ${F.targetThread}, but that thread no longer exists!`)}else q==="checkMailbox"?zi():q==="spawnThread"?yn(F):q==="cleanupThread"?te.Za(te.Ma[F.thread]):q==="killThread"?(F=F.thread,q=te.Ma[F],delete te.Ma[F],mn(q),ra(F),te.Qa.splice(te.Qa.indexOf(q),1),q.Oa=0):q==="cancelThread"?te.Ma[F.thread].postMessage({cmd:"cancel"}):q==="loaded"?(g.loaded=!0,y&&!g.Oa&&g.unref(),b(g)):q==="alert"?alert(`Thread ${F.threadId}: ${F.text}`):F.target==="setimmediate"?g.postMessage(F):q==="callHandler"?c[F.handler](...F.args):q&&Z(`worker sent an unknown command ${q}`)},g.onerror=F=>{throw Z(`worker sent an error! ${F.filename}:${F.lineno}: ${F.message}`),F},y&&(g.on("message",F=>g.onmessage({data:F})),g.on("error",F=>g.onerror(F)));var E=[],S=["onExit"],R;for(R of S)c.hasOwnProperty(R)&&E.push(R);g.postMessage({cmd:"load",handlers:E,urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:he,wasmModule:pt})})};c.PThread=te;var Kr=g=>{for(;0<g.length;)g.shift()(c)};c.establishStackSpace=()=>{var g=Gi(),b=l()[g+52>>>2>>>0];g=l()[g+56>>>2>>>0],Fu(b,b-g),Wi(b)};function Hi(g){if(_)return be(1,0,g);bn(g)}var Tr=[],Qn;c.invokeEntryPoint=(g,b)=>{var E=Tr[g];E||(g>=Tr.length&&(Tr.length=g+1),Tr[g]=E=Qn.get(g)),g=E(b),0<Zr?te.$a(g):na(g)};function w(g){this.Va=g-24,this.gb=function(b){l()[this.Va+4>>>2>>>0]=b},this.fb=function(b){l()[this.Va+8>>>2>>>0]=b},this.Wa=function(b,E){this.eb(),this.gb(b),this.fb(E)},this.eb=function(){l()[this.Va+16>>>2>>>0]=0}}var T=0,A=0;function M(g,b,E,S){return _?be(2,1,g,b,E,S):G(g,b,E,S)}function G(g,b,E,S){if(g>>>=0,b>>>=0,E>>>=0,S>>>=0,typeof SharedArrayBuffer>"u")return Z("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var R=[];return _&&R.length===0?M(g,b,E,S):(g={kb:E,Oa:g,hb:S,qb:R},_?(g.sb="spawnThread",postMessage(g,R),0):yn(g))}function Q(g,b,E){return _?be(3,1,g,b,E):0}function le(g,b){if(_)return be(4,1,g,b)}var Ve=g=>{for(var b=0,E=0;E<g.length;++E){var S=g.charCodeAt(E);127>=S?b++:2047>=S?b+=2:55296<=S&&57343>=S?(b+=4,++E):b+=3}return b},ut=(g,b,E,S)=>{if(E>>>=0,!(0<S))return 0;var R=E;S=E+S-1;for(var F=0;F<g.length;++F){var q=g.charCodeAt(F);if(55296<=q&&57343>=q){var De=g.charCodeAt(++F);q=65536+((q&1023)<<10)|De&1023}if(127>=q){if(E>=S)break;b[E++>>>0]=q}else{if(2047>=q){if(E+1>=S)break;b[E++>>>0]=192|q>>6}else{if(65535>=q){if(E+2>=S)break;b[E++>>>0]=224|q>>12}else{if(E+3>=S)break;b[E++>>>0]=240|q>>18,b[E++>>>0]=128|q>>12&63}b[E++>>>0]=128|q>>6&63}b[E++>>>0]=128|q&63}}return b[E>>>0]=0,E-R},Xe=(g,b,E)=>ut(g,u(),b,E);function Ye(g,b){if(_)return be(5,1,g,b)}function Jn(g,b,E){if(_)return be(6,1,g,b,E)}function ei(g,b,E){return _?be(7,1,g,b,E):0}function O(g,b){if(_)return be(8,1,g,b)}function pe(g,b,E){if(_)return be(9,1,g,b,E)}function xe(g,b,E,S){if(_)return be(10,1,g,b,E,S)}function cr(g,b,E,S){if(_)return be(11,1,g,b,E,S)}function ti(g,b,E,S){if(_)return be(12,1,g,b,E,S)}function fu(g){if(_)return be(13,1,g)}function du(g,b){if(_)return be(14,1,g,b)}function hu(g,b,E){if(_)return be(15,1,g,b,E)}function Ko(g){g>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(s(),g>>>2,g).value.then(zi),g+=128,Atomics.store(s(),g>>>2,1))}c.__emscripten_thread_mailbox_await=Ko;var zi=()=>{var g=Gi();if(g&&(Ko(g),g=Nu,!qe))try{if(g(),!(0<Zr))try{_?na(Ue):bn(Ue)}catch(b){b instanceof $r||b=="unwind"||m(1,b)}}catch(b){b instanceof $r||b=="unwind"||m(1,b)}};c.checkMailbox=zi;var Qo=[],wn=g=>g%4===0&&(g%100!==0||g%400===0),pu=[0,31,60,91,121,152,182,213,244,274,305,335],gu=[0,31,59,90,120,151,181,212,243,273,304,334];function mu(g,b,E,S,R,F,q,De){return _?be(16,1,g,b,E,S,R,F,q,De):-52}function yu(g,b,E,S,R,F,q){if(_)return be(17,1,g,b,E,S,R,F,q)}var vu=g=>{var b=Ve(g)+1,E=Ou(b);return E&&Xe(g,E,b),E},Jo=[],ea={},bu=()=>{if(!ta){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},b;for(b in ea)ea[b]===void 0?delete g[b]:g[b]=ea[b];var E=[];for(b in g)E.push(`${b}=${g[b]}`);ta=E}return ta},ta;function wu(g,b){if(_)return be(18,1,g,b);g>>>=0,b>>>=0;var E=0;return bu().forEach((S,R)=>{var F=b+E;for(R=l()[g+4*R>>>2>>>0]=F,F=0;F<S.length;++F)a()[R++>>>0>>>0]=S.charCodeAt(F);a()[R>>>0>>>0]=0,E+=S.length+1}),0}function xu(g,b){if(_)return be(19,1,g,b);g>>>=0,b>>>=0;var E=bu();l()[g>>>2>>>0]=E.length;var S=0;return E.forEach(R=>S+=R.length+1),l()[b>>>2>>>0]=S,0}function _u(g){return _?be(20,1,g):52}function Eu(g,b,E,S){return _?be(21,1,g,b,E,S):52}function Tu(g,b,E,S,R){return _?be(22,1,g,b,E,S,R):70}var Qd=[null,[],[]];function Iu(g,b,E,S){if(_)return be(23,1,g,b,E,S);b>>>=0,E>>>=0,S>>>=0;for(var R=0,F=0;F<E;F++){var q=l()[b>>>2>>>0],De=l()[b+4>>>2>>>0];b+=8;for(var fr=0;fr<De;fr++){var He=u()[q+fr>>>0],_t=Qd[g];He===0||He===10?((g===1?ye:Z)(Zn(_t,0)),_t.length=0):_t.push(He)}R+=De}return l()[S>>>2>>>0]=R,0}var Au=[31,29,31,30,31,30,31,31,30,31,30,31],Su=[31,28,31,30,31,30,31,31,30,31,30,31];function Jd(g){var b=Array(Ve(g)+1);return ut(g,b,0,b.length),b}var eh=(g,b)=>{a().set(g,b>>>0)};function Du(g,b,E,S){function R(P,ve,Ce){for(P=typeof P=="number"?P.toString():P||"";P.length<ve;)P=Ce[0]+P;return P}function F(P,ve){return R(P,ve,"0")}function q(P,ve){function Ce($u){return 0>$u?-1:0<$u?1:0}var Qr;return(Qr=Ce(P.getFullYear()-ve.getFullYear()))===0&&(Qr=Ce(P.getMonth()-ve.getMonth()))===0&&(Qr=Ce(P.getDate()-ve.getDate())),Qr}function De(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function fr(P){var ve=P.Ra;for(P=new Date(new Date(P.Sa+1900,0,1).getTime());0<ve;){var Ce=P.getMonth(),Qr=(wn(P.getFullYear())?Au:Su)[Ce];if(ve>Qr-P.getDate())ve-=Qr-P.getDate()+1,P.setDate(1),11>Ce?P.setMonth(Ce+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ve);break}}return Ce=new Date(P.getFullYear()+1,0,4),ve=De(new Date(P.getFullYear(),0,4)),Ce=De(Ce),0>=q(ve,P)?0>=q(Ce,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}g>>>=0,b>>>=0,E>>>=0,S>>>=0;var He=l()[S+40>>>2>>>0];S={ob:s()[S>>>2>>>0],nb:s()[S+4>>>2>>>0],Ta:s()[S+8>>>2>>>0],Xa:s()[S+12>>>2>>>0],Ua:s()[S+16>>>2>>>0],Sa:s()[S+20>>>2>>>0],Na:s()[S+24>>>2>>>0],Ra:s()[S+28>>>2>>>0],ub:s()[S+32>>>2>>>0],mb:s()[S+36>>>2>>>0],pb:He?vn(He):""},E=vn(E),He={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var _t in He)E=E.replace(new RegExp(_t,"g"),He[_t]);var Lu="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Bu="January February March April May June July August September October November December".split(" ");He={"%a":P=>Lu[P.Na].substring(0,3),"%A":P=>Lu[P.Na],"%b":P=>Bu[P.Ua].substring(0,3),"%B":P=>Bu[P.Ua],"%C":P=>F((P.Sa+1900)/100|0,2),"%d":P=>F(P.Xa,2),"%e":P=>R(P.Xa,2," "),"%g":P=>fr(P).toString().substring(2),"%G":P=>fr(P),"%H":P=>F(P.Ta,2),"%I":P=>(P=P.Ta,P==0?P=12:12<P&&(P-=12),F(P,2)),"%j":P=>{for(var ve=0,Ce=0;Ce<=P.Ua-1;ve+=(wn(P.Sa+1900)?Au:Su)[Ce++]);return F(P.Xa+ve,3)},"%m":P=>F(P.Ua+1,2),"%M":P=>F(P.nb,2),"%n":()=>`
`,"%p":P=>0<=P.Ta&&12>P.Ta?"AM":"PM","%S":P=>F(P.ob,2),"%t":()=>"	","%u":P=>P.Na||7,"%U":P=>F(Math.floor((P.Ra+7-P.Na)/7),2),"%V":P=>{var ve=Math.floor((P.Ra+7-(P.Na+6)%7)/7);if(2>=(P.Na+371-P.Ra-2)%7&&ve++,ve)ve==53&&(Ce=(P.Na+371-P.Ra)%7,Ce==4||Ce==3&&wn(P.Sa)||(ve=1));else{ve=52;var Ce=(P.Na+7-P.Ra-1)%7;(Ce==4||Ce==5&&wn(P.Sa%400-1))&&ve++}return F(ve,2)},"%w":P=>P.Na,"%W":P=>F(Math.floor((P.Ra+7-(P.Na+6)%7)/7),2),"%y":P=>(P.Sa+1900).toString().substring(2),"%Y":P=>P.Sa+1900,"%z":P=>{P=P.mb;var ve=0<=P;return P=Math.abs(P)/60,(ve?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.pb,"%%":()=>"%"},E=E.replace(/%%/g,"\0\0");for(_t in He)E.includes(_t)&&(E=E.replace(new RegExp(_t,"g"),He[_t](S)));return E=E.replace(/\0\0/g,"%"),_t=Jd(E),_t.length>b?0:(eh(_t,g),_t.length-1)}te.Wa();var th=[oe,Hi,M,Q,le,Ye,Jn,ei,O,pe,xe,cr,ti,fu,du,hu,mu,yu,wu,xu,_u,Eu,Tu,Iu],rh={b:function(g,b,E){throw g>>>=0,new w(g).Wa(b>>>0,E>>>0),T=g,A++,T},L:function(g){Pu(g>>>0,!x,1,!v,131072,!1),te.ab()},j:function(g){g>>>=0,_?postMessage({cmd:"cleanupThread",thread:g}):te.Za(te.Ma[g])},H:G,h:Q,S:le,D:Ye,F:Jn,T:ei,Q:O,J:pe,P:xe,n:cr,E:ti,B:fu,R:du,C:hu,p:()=>1,z:function(g,b){g>>>=0,g==b>>>0?setTimeout(()=>zi()):_?postMessage({targetThread:g,cmd:"checkMailbox"}):(g=te.Ma[g])&&g.postMessage({cmd:"checkMailbox"})},I:function(g,b,E,S){b>>>=0,Qo.length=E,S=S>>>0>>>3;for(var R=0;R<E;R++)Qo[R]=i()[S+R>>>0];return g=0>g?gn[-g-1]:th[g],te.ib=b,b=g.apply(null,Qo),te.ib=0,b},K:Ko,o:function(g){y&&te.Ma[g>>>0].ref()},s:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getUTCSeconds(),s()[E+4>>>2>>>0]=g.getUTCMinutes(),s()[E+8>>>2>>>0]=g.getUTCHours(),s()[E+12>>>2>>>0]=g.getUTCDate(),s()[E+16>>>2>>>0]=g.getUTCMonth(),s()[E+20>>>2>>>0]=g.getUTCFullYear()-1900,s()[E+24>>>2>>>0]=g.getUTCDay(),g=(g.getTime()-Date.UTC(g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[E+28>>>2>>>0]=g},t:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getSeconds(),s()[E+4>>>2>>>0]=g.getMinutes(),s()[E+8>>>2>>>0]=g.getHours(),s()[E+12>>>2>>>0]=g.getDate(),s()[E+16>>>2>>>0]=g.getMonth(),s()[E+20>>>2>>>0]=g.getFullYear()-1900,s()[E+24>>>2>>>0]=g.getDay(),b=(wn(g.getFullYear())?pu:gu)[g.getMonth()]+g.getDate()-1|0,s()[E+28>>>2>>>0]=b,s()[E+36>>>2>>>0]=-(60*g.getTimezoneOffset()),b=new Date(g.getFullYear(),6,1).getTimezoneOffset();var S=new Date(g.getFullYear(),0,1).getTimezoneOffset();g=(b!=S&&g.getTimezoneOffset()==Math.min(S,b))|0,s()[E+32>>>2>>>0]=g},u:function(g){g>>>=0;var b=new Date(s()[g+20>>>2>>>0]+1900,s()[g+16>>>2>>>0],s()[g+12>>>2>>>0],s()[g+8>>>2>>>0],s()[g+4>>>2>>>0],s()[g>>>2>>>0],0),E=s()[g+32>>>2>>>0],S=b.getTimezoneOffset(),R=new Date(b.getFullYear(),6,1).getTimezoneOffset(),F=new Date(b.getFullYear(),0,1).getTimezoneOffset(),q=Math.min(F,R);return 0>E?s()[g+32>>>2>>>0]=+(R!=F&&q==S):0<E!=(q==S)&&(R=Math.max(F,R),b.setTime(b.getTime()+6e4*((0<E?q:R)-S))),s()[g+24>>>2>>>0]=b.getDay(),E=(wn(b.getFullYear())?pu:gu)[b.getMonth()]+b.getDate()-1|0,s()[g+28>>>2>>>0]=E,s()[g>>>2>>>0]=b.getSeconds(),s()[g+4>>>2>>>0]=b.getMinutes(),s()[g+8>>>2>>>0]=b.getHours(),s()[g+12>>>2>>>0]=b.getDate(),s()[g+16>>>2>>>0]=b.getMonth(),s()[g+20>>>2>>>0]=b.getYear(),g=b.getTime(),isNaN(g)?(s()[Cu()>>>2>>>0]=61,g=-1):g/=1e3,Ru((Er=g,1<=+Math.abs(Er)?0<Er?+Math.floor(Er/4294967296)>>>0:~~+Math.ceil((Er-+(~~Er>>>0))/4294967296)>>>0:0)),g>>>0},q:mu,r:yu,y:function(g,b,E){function S(He){return(He=He.toTimeString().match(/\(([A-Za-z ]+)\)$/))?He[1]:"GMT"}g>>>=0,b>>>=0,E>>>=0;var R=new Date().getFullYear(),F=new Date(R,0,1),q=new Date(R,6,1);R=F.getTimezoneOffset();var De=q.getTimezoneOffset(),fr=Math.max(R,De);l()[g>>>2>>>0]=60*fr,s()[b>>>2>>>0]=+(R!=De),g=S(F),b=S(q),g=vu(g),b=vu(b),De<R?(l()[E>>>2>>>0]=g,l()[E+4>>>2>>>0]=b):(l()[E>>>2>>>0]=b,l()[E+4>>>2>>>0]=g)},c:()=>{hn("")},O:function(g,b,E){g>>>=0,b>>>=0,E>>>=0,Jo.length=0;for(var S;S=u()[b++>>>0];){var R=S!=105;R&=S!=112,E+=R&&E%8?4:0,Jo.push(S==112?l()[E>>>2>>>0]:S==105?s()[E>>>2>>>0]:i()[E>>>3>>>0]),E+=R?8:4}return gn[g].apply(null,Jo)},k:()=>{},i:()=>Date.now(),U:()=>{throw Zr+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>y?(iU(),ka(DS)).cpus().length:navigator.hardwareConcurrency,x:function(g){g>>>=0;var b=u().length;if(g<=b||4294901760<g)return!1;for(var E=1;4>=E;E*=2){var S=b*(1+.2/E);S=Math.min(S,g+100663296);var R=Math;S=Math.max(g,S);e:{R=(R.min.call(R,4294901760,S+(65536-S%65536)%65536)-he.buffer.byteLength+65535)/65536;try{he.grow(R),It();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},M:wu,N:xu,G:bn,g:_u,m:Eu,v:Tu,l:Iu,a:he||c.wasmMemory,w:Du,d:function(g,b,E,S){return Du(g>>>0,b>>>0,E>>>0,S>>>0)}},J=function(){function g(E,S){return J=E.exports,J=nh(),te.bb.push(J.za),Qn=J.Aa,Lr.unshift(J.V),pt=S,dn(),J}var b={a:rh};if(Se++,c.instantiateWasm)try{return c.instantiateWasm(b,g)}catch(E){Z(`Module.instantiateWasm callback failed with error: ${E}`),d(E)}return $i(b,function(E){g(E.instance,E.module)}).catch(d),{}}();c._OrtInit=(g,b)=>(c._OrtInit=J.W)(g,b),c._OrtGetLastError=(g,b)=>(c._OrtGetLastError=J.X)(g,b),c._OrtCreateSessionOptions=(g,b,E,S,R,F,q,De,fr,He)=>(c._OrtCreateSessionOptions=J.Y)(g,b,E,S,R,F,q,De,fr,He),c._OrtAppendExecutionProvider=(g,b)=>(c._OrtAppendExecutionProvider=J.Z)(g,b),c._OrtAddFreeDimensionOverride=(g,b,E)=>(c._OrtAddFreeDimensionOverride=J._)(g,b,E),c._OrtAddSessionConfigEntry=(g,b,E)=>(c._OrtAddSessionConfigEntry=J.$)(g,b,E),c._OrtReleaseSessionOptions=g=>(c._OrtReleaseSessionOptions=J.aa)(g),c._OrtCreateSession=(g,b,E)=>(c._OrtCreateSession=J.ba)(g,b,E),c._OrtReleaseSession=g=>(c._OrtReleaseSession=J.ca)(g),c._OrtGetInputOutputCount=(g,b,E)=>(c._OrtGetInputOutputCount=J.da)(g,b,E),c._OrtGetInputName=(g,b)=>(c._OrtGetInputName=J.ea)(g,b),c._OrtGetOutputName=(g,b)=>(c._OrtGetOutputName=J.fa)(g,b),c._OrtFree=g=>(c._OrtFree=J.ga)(g),c._OrtCreateTensor=(g,b,E,S,R,F)=>(c._OrtCreateTensor=J.ha)(g,b,E,S,R,F),c._OrtGetTensorData=(g,b,E,S,R)=>(c._OrtGetTensorData=J.ia)(g,b,E,S,R),c._OrtReleaseTensor=g=>(c._OrtReleaseTensor=J.ja)(g),c._OrtCreateRunOptions=(g,b,E,S)=>(c._OrtCreateRunOptions=J.ka)(g,b,E,S),c._OrtAddRunConfigEntry=(g,b,E)=>(c._OrtAddRunConfigEntry=J.la)(g,b,E),c._OrtReleaseRunOptions=g=>(c._OrtReleaseRunOptions=J.ma)(g),c._OrtCreateBinding=g=>(c._OrtCreateBinding=J.na)(g),c._OrtBindInput=(g,b,E)=>(c._OrtBindInput=J.oa)(g,b,E),c._OrtBindOutput=(g,b,E,S)=>(c._OrtBindOutput=J.pa)(g,b,E,S),c._OrtClearBoundOutputs=g=>(c._OrtClearBoundOutputs=J.qa)(g),c._OrtReleaseBinding=g=>(c._OrtReleaseBinding=J.ra)(g),c._OrtRunWithBinding=(g,b,E,S,R)=>(c._OrtRunWithBinding=J.sa)(g,b,E,S,R),c._OrtRun=(g,b,E,S,R,F,q,De)=>(c._OrtRun=J.ta)(g,b,E,S,R,F,q,De),c._OrtEndProfiling=g=>(c._OrtEndProfiling=J.ua)(g);var Cu=()=>(Cu=J.va)(),Gi=c._pthread_self=()=>(Gi=c._pthread_self=J.wa)(),Ou=c._malloc=g=>(Ou=c._malloc=J.xa)(g);c._free=g=>(c._free=J.ya)(g),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=J.za)();var Pu=c.__emscripten_thread_init=(g,b,E,S,R,F)=>(Pu=c.__emscripten_thread_init=J.Ba)(g,b,E,S,R,F);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=J.Ca)();var Mu=(g,b,E,S)=>(Mu=J.Da)(g,b,E,S),ra=g=>(ra=J.Ea)(g),na=c.__emscripten_thread_exit=g=>(na=c.__emscripten_thread_exit=J.Fa)(g),Nu=()=>(Nu=J.Ga)(),Ru=g=>(Ru=J.Ha)(g),Fu=(g,b)=>(Fu=J.Ia)(g,b),ia=()=>(ia=J.Ja)(),Wi=g=>(Wi=J.Ka)(g),oa=g=>(oa=J.La)(g);function nh(){var g=J;g=Object.assign({},g);var b=S=>()=>S()>>>0,E=S=>R=>S(R)>>>0;return g.va=b(g.va),g.wa=b(g.wa),g.xa=E(g.xa),g.emscripten_main_runtime_thread_id=b(g.emscripten_main_runtime_thread_id),g.Ja=b(g.Ja),g.La=E(g.La),g}c.wasmMemory=he,c.stackAlloc=oa,c.stackSave=ia,c.stackRestore=Wi,c.keepRuntimeAlive=()=>0<Zr,c.UTF8ToString=vn,c.stringToUTF8=Xe,c.lengthBytesUTF8=Ve,c.ExitStatus=$r,c.PThread=te;var qi;Kt=function g(){qi||ku(),qi||(Kt=g)};function ku(){if(!(0<Se))if(_)f(c),_||Kr(Lr),startWorker(c);else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Gt.unshift(c.preRun.shift());Kr(Gt),0<Se||qi||(qi=!0,c.calledRun=!0,qe||(_||Kr(Lr),f(c),_||Kr(Ae)))}}return ku(),o.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),aU=jt((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),YE,ZE,L0,hd,Bl,B0,KE,QE,JE,OS,Rr,ac=Y(()=>{"use strict";YE=tU(),ZE=oU(),hd=!1,Bl=!1,B0=!1,KE=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},QE=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},JE=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",OS=t=>U(void 0,null,function*(){if(hd)return Promise.resolve();if(Bl)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(B0)throw new Error("previous call to 'initializeWebAssembly()' failed.");Bl=!0;let e=t.initTimeout,r=t.numThreads,n=t.simd,o=KE(r),a=n&&QE(),u=t.wasmPaths,s=typeof u=="string"?u:void 0,l=JE(a,o),i=typeof u=="object"?u[l]:void 0,c=!1,f=[];if(e>0&&f.push(new Promise(d=>{setTimeout(()=>{c=!0,d()},e)})),f.push(new Promise((d,h)=>{let p=o?ZE:YE,m={locateFile:(v,x)=>o&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([aU()],{type:"text/javascript"})):v.endsWith(".wasm")?i||(s??x)+l:x+v};if(o)if(m.numThreads=r,typeof Blob>"u")m.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${p.toString()};`;m.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}p(m).then(v=>{Bl=!1,hd=!0,L0=v,d()},v=>{Bl=!1,B0=!0,h(v)})})),yield Promise.race(f),c)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)}),Rr=()=>{if(hd&&L0)return L0;throw new Error("WebAssembly is not initialized yet.")}}),Cr,_d,yr,Vm=Y(()=>{"use strict";ac(),Cr=(t,e)=>{let r=Rr(),n=r.lengthBytesUTF8(t)+1,o=r._malloc(n);return r.stringToUTF8(t,o,n),e.push(o),o},_d=(t,e,r,n)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([o,a])=>{let u=e?e+o:o;if(typeof a=="object")_d(a,u+".",r,n);else if(typeof a=="string"||typeof a=="number")n(u,a.toString());else if(typeof a=="boolean")n(u,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},yr=t=>{let e=Rr(),r=e.stackSave();try{let n=e.stackAlloc(8);e._OrtGetLastError(n,n+4);let o=e.HEAP32[n/4],a=e.HEAPU32[n/4+1],u=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}}),PS,sU=Y(()=>{"use strict";ac(),Vm(),PS=t=>{let e=Rr(),r=0,n=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let a=0;return t?.tag!==void 0&&(a=Cr(t.tag,n)),r=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,a),r===0&&yr("Can't create run options."),t?.extra!==void 0&&_d(t.extra,"",new WeakSet,(u,s)=>{let l=Cr(u,n),i=Cr(s,n);e._OrtAddRunConfigEntry(r,l,i)!==0&&yr(`Can't set a run config entry: ${u} - ${s}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseRunOptions(r),n.forEach(u=>e._free(u)),a}}}),eT,tT,rT,nT,MS,uU=Y(()=>{"use strict";ac(),Vm(),eT=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},tT=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},rT=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},nT=(t,e,r)=>{for(let n of e){let o=typeof n=="string"?n:n.name;switch(o){case"webnn":if(o="WEBNN",typeof n!="string"){let u=n;if(u?.deviceType){let s=Cr("deviceType",r),l=Cr(u.deviceType,r);Rr()._OrtAddSessionConfigEntry(t,s,l)!==0&&yr(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let s=u.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let l=Cr("numThreads",r),i=Cr(s.toString(),r);Rr()._OrtAddSessionConfigEntry(t,l,i)!==0&&yr(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let s=Cr("powerPreference",r),l=Cr(u.powerPreference,r);Rr()._OrtAddSessionConfigEntry(t,s,l)!==0&&yr(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof n!="string"){let u=n;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let s=Cr("preferredLayout",r),l=Cr(u.preferredLayout,r);Rr()._OrtAddSessionConfigEntry(t,s,l)!==0&&yr(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let a=Cr(o,r);Rr()._OrtAppendExecutionProvider(t,a)!==0&&yr(`Can't append execution provider: ${o}.`)}},MS=t=>{let e=Rr(),r=0,n=[],o=t||{};rT(o);try{let a=eT(o.graphOptimizationLevel??"all"),u=tT(o.executionMode??"sequential"),s=typeof o.logId=="string"?Cr(o.logId,n):0,l=o.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let i=o.logVerbosityLevel??0;if(!Number.isInteger(i)||i<0||i>4)throw new Error(`log verbosity level is not valid: ${i}`);let c=typeof o.optimizedModelFilePath=="string"?Cr(o.optimizedModelFilePath,n):0;if(r=e._OrtCreateSessionOptions(a,!!o.enableCpuMemArena,!!o.enableMemPattern,u,!!o.enableProfiling,0,s,l,i,c),r===0&&yr("Can't create session options."),o.executionProviders&&nT(r,o.executionProviders,n),o.freeDimensionOverrides)for(let[f,d]of Object.entries(o.freeDimensionOverrides)){if(typeof f!="string")throw new Error(`free dimension override name must be a string: ${f}`);if(typeof d!="number"||!Number.isInteger(d)||d<0)throw new Error(`free dimension override value must be a non-negative integer: ${d}`);let h=Cr(f,n);e._OrtAddFreeDimensionOverride(r,h,d)!==0&&yr(`Can't set a free dimension override: ${f} - ${d}.`)}return o.extra!==void 0&&_d(o.extra,"",new WeakSet,(f,d)=>{let h=Cr(f,n),p=Cr(d,n);e._OrtAddSessionConfigEntry(r,h,p)!==0&&yr(`Can't set a session config entry: ${f} - ${d}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseSessionOptions(r),n.forEach(u=>e._free(u)),a}}}),_m,NS,Em,RS,FS,jm,kS,LS=Y(()=>{"use strict";_m=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},NS=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},Em=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],RS=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},FS=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},jm=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",kS=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),Ed,BS=Y(()=>{"use strict";Ed=t=>U(void 0,null,function*(){if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(yield(void 0)(t))}catch(a){if(a.code==="ERR_FS_FILE_TOO_LARGE"){let u=(void 0)(t),s=[];try{for(var e=Uc(u),r,n,o;r=!(n=yield e.next()).done;r=!1){let l=n.value;s.push(l)}}catch{o=[n]}finally{try{r&&(n=e.return)&&(yield n.call(e))}finally{if(o)throw o[0]}}return new Uint8Array(Buffer.concat(s))}throw a}else{let a=yield fetch(t);if(!a.ok)throw new Error(`failed to load external data file: ${t}`);let u=a.headers.get("Content-Length"),s=u?parseInt(u,10):0;if(s<1073741824)return new Uint8Array(yield a.arrayBuffer());{if(!a.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let l=a.body.getReader(),i;try{i=new ArrayBuffer(s)}catch(f){if(f instanceof RangeError){let d=Math.ceil(s/65536);i=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw f}let c=0;for(;;){let{done:f,value:d}=yield l.read();if(f)break;let h=d.byteLength;new Uint8Array(i,c,h).set(d),c+=h}return new Uint8Array(i,0,s)}}else return t instanceof Blob?new Uint8Array(yield t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)})}),iT,$S,VS,Fs,oT,Tm,jS,US,$0,HS,zS,GS,lU=Y(()=>{"use strict";sU(),uU(),LS(),ac(),Vm(),BS(),iT=(t,e)=>{Rr()._OrtInit(t,e)!==0&&yr("Can't initialize onnxruntime.")},$S=t=>U(void 0,null,function*(){iT(t.wasm.numThreads,FS(t.logLevel))}),VS=(t,e)=>U(void 0,null,function*(){}),Fs=new Map,oT=t=>{let e=Rr(),r=e.stackSave();try{let n=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,n,n+4)!==0&&yr("Can't get session input/output count."),[e.HEAP32[n/4],e.HEAP32[n/4+1]]}finally{e.stackRestore(r)}},Tm=t=>{let e=Rr(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},jS=(t,e)=>U(void 0,null,function*(){let r,n,o=Rr();Array.isArray(t)?[r,n]=t:t.buffer===o.HEAPU8.buffer?[r,n]=[t.byteOffset,t.byteLength]:[r,n]=Tm(t);let a=0,u=0,s=0,l=[],i=[],c=[];try{if([u,l]=MS(e),e?.externalData&&o.mountExternalData){let x=[];for(let y of e.externalData){let _=typeof y=="string"?y:y.path;x.push(Ed(typeof y=="string"?y:y.data).then(I=>{o.mountExternalData(_,I)}))}yield Promise.all(x)}a=o._OrtCreateSession(r,n,u),a===0&&yr("Can't create a session.");let[f,d]=oT(a),h=[],p=[],m=[];for(let x=0;x<f;x++){let y=o._OrtGetInputName(a,x);y===0&&yr("Can't get an input name."),i.push(y),h.push(o.UTF8ToString(y))}for(let x=0;x<d;x++){let y=o._OrtGetOutputName(a,x);y===0&&yr("Can't get an output name."),c.push(y);let _=o.UTF8ToString(y);p.push(_)}return Fs.set(a,[a,i,c,null]),[a,h,p]}catch(f){throw i.forEach(d=>o._OrtFree(d)),c.forEach(d=>o._OrtFree(d)),s!==0&&o._OrtReleaseBinding(s),a!==0&&o._OrtReleaseSession(a),f}finally{o._free(r),u!==0&&o._OrtReleaseSessionOptions(u),l.forEach(f=>o._free(f)),o.unmountExternalData?.()}}),US=t=>{let e=Rr(),r=Fs.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[n,o,a,u]=r;u&&e._OrtReleaseBinding(u.handle),e.jsepUnregisterBuffers?.(t),o.forEach(s=>e._OrtFree(s)),a.forEach(s=>e._OrtFree(s)),e._OrtReleaseSession(n),Fs.delete(t)},$0=(t,e,r,n,o)=>{if(!t){e.push(0);return}let a=Rr(),u=t[0],s=t[1],l=t[3],i,c;if(u==="string"&&l==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(l==="gpu-buffer"){let h=t[2].gpuBuffer,p=Em(_m(u));c=s.reduce((m,v)=>m*v,1)*p,i=a.jsepRegisterBuffer(n,o,h,c)}else{let h=t[2];if(Array.isArray(h)){c=4*h.length,i=a._malloc(c),r.push(i);let p=i/4;for(let m=0;m<h.length;m++){if(typeof h[m]!="string")throw new TypeError(`tensor data at index ${m} is not a string`);a.HEAPU32[p++]=Cr(h[m],r)}}else c=h.byteLength,i=a._malloc(c),r.push(i),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,c),i)}let f=a.stackSave(),d=a.stackAlloc(4*s.length);try{let h=d/4;s.forEach(m=>a.HEAP32[h++]=m);let p=a._OrtCreateTensor(_m(u),i,c,d,s.length,kS(l));p===0&&yr(`Can't create tensor for input/output. session=${n}, index=${o}.`),e.push(p)}finally{a.stackRestore(f)}},HS=(t,e,r,n,o,a)=>U(void 0,null,function*(){let u=Rr(),s=Fs.get(t);if(!s)throw new Error(`cannot run inference. invalid session id: ${t}`);let[l,i,c,f]=s,d=e.length,h=n.length,p=0,m=[],v=[],x=[],y=[],_=u.stackSave(),I=u.stackAlloc(d*4),C=u.stackAlloc(d*4),V=u.stackAlloc(h*4),z=u.stackAlloc(h*4);try{[p,m]=PS(a);for(let Z=0;Z<d;Z++)$0(r[Z],v,y,t,e[Z]);for(let Z=0;Z<h;Z++)$0(o[Z],x,y,t,d+n[Z]);let W=I/4,k=C/4,X=V/4,ke=z/4;for(let Z=0;Z<d;Z++)u.HEAPU32[W++]=v[Z],u.HEAPU32[k++]=i[e[Z]];for(let Z=0;Z<h;Z++)u.HEAPU32[X++]=x[Z],u.HEAPU32[ke++]=c[n[Z]];let me;me=yield u._OrtRun(l,C,I,d,z,h,V,p),me!==0&&yr("failed to call OrtRun().");let ye=[];for(let Z=0;Z<h;Z++){let he=u.HEAPU32[V/4+Z];if(he===x[Z]){ye.push(o[Z]);continue}let pt=u.stackSave(),qe=u.stackAlloc(4*4),Ue=!1,Ee,wt=0;try{u._OrtGetTensorData(he,qe,qe+4,qe+8,qe+12)!==0&&yr(`Can't access output tensor data on index ${Z}.`);let xt=qe/4,Ct=u.HEAPU32[xt++];wt=u.HEAPU32[xt++];let gr=u.HEAPU32[xt++],It=u.HEAPU32[xt++],lr=[];for(let Ae=0;Ae<It;Ae++)lr.push(u.HEAPU32[gr/4+Ae]);u._OrtFree(gr);let Gt=lr.reduce((Ae,Se)=>Ae*Se,1);Ee=NS(Ct);let Lr=f?.outputPreferredLocations[n[Z]];if(Ee==="string"){if(Lr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ae=[],Se=wt/4;for(let wr=0;wr<Gt;wr++){let Kt=u.HEAPU32[Se++],dn=wr===Gt-1?void 0:u.HEAPU32[Se]-Kt;Ae.push(u.UTF8ToString(Kt,dn))}ye.push([Ee,lr,Ae,"cpu"])}else if(Lr==="gpu-buffer"&&Gt>0){let Ae=u.jsepGetBuffer(wt),Se=Em(Ct);if(Se===void 0||!jm(Ee))throw new Error(`Unsupported data type: ${Ee}`);Ue=!0,ye.push([Ee,lr,{gpuBuffer:Ae,download:u.jsepCreateDownloader(Ae,Gt*Se,Ee),dispose:()=>{u._OrtReleaseTensor(he)}},"gpu-buffer"])}else{let Ae=RS(Ee),Se=new Ae(Gt);new Uint8Array(Se.buffer,Se.byteOffset,Se.byteLength).set(u.HEAPU8.subarray(wt,wt+Se.byteLength)),ye.push([Ee,lr,Se,"cpu"])}}finally{u.stackRestore(pt),Ee==="string"&&wt&&u._free(wt),Ue||u._OrtReleaseTensor(he)}}return f&&u._OrtClearBoundOutputs(f.handle),ye}finally{u.stackRestore(_),v.forEach(W=>u._OrtReleaseTensor(W)),x.forEach(W=>u._OrtReleaseTensor(W)),y.forEach(W=>u._free(W)),p!==0&&u._OrtReleaseRunOptions(p),m.forEach(W=>u._free(W))}}),zS=t=>{let e=Rr(),r=Fs.get(t);if(!r)throw new Error("invalid session id");let n=r[0],o=e._OrtEndProfiling(n);o===0&&yr("Can't get an profile file name."),e._OrtFree(o)},GS=t=>{let e=[];for(let r of t){let n=r[2];!Array.isArray(n)&&"buffer"in n&&e.push(n.buffer)}return e}}),cU=jt((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.17.1\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var et=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of Xr(d))!Qr.call(u,l)&&l!==a&&Et(u,l,{get:()=>d[l],enumerable:!(h=Jr(d,l))||h.enumerable});return u};var tt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=et((mr,xt)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,l;a.ready=new Promise((r,o)=>{h=r,l=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",A=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="",B,F,U;if(D){var k=(Mt(),tt(At)),L=(Dt(),tt(Ct));I=A?L.dirname(I)+"/":__dirname+"/",B=(r,o)=>(r=ye(r)?new URL(r):L.normalize(r),k.readFileSync(r,o?void 0:"utf8")),U=r=>(r=B(r,!0),r.buffer||(r=new Uint8Array(r)),r),F=(r,o,s,m=!0)=>{r=ye(r)?new URL(r):L.normalize(r),k.readFile(r,m?void 0:"utf8",(O,S)=>{O?s(O):o(m?S.buffer:S)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||A)&&(A?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),u&&(I=u),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",B=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},A&&(U=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),F=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var _=console.log.bind(console),x=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var N,he=!1,ie,ae,E,Y,ue;function Re(){var r=N.buffer;a.HEAP8=ie=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ae=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=E=new Int32Array(r),a.HEAPU32=Y=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=ue=new Float64Array(r)}var Ie=[],ee=[],j=[],ce=0,P=null,te=null;function de(r){throw r="Aborted("+r+")",x(r),he=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var ge=r=>r.startsWith("data:application/octet-stream;base64,"),ye=r=>r.startsWith("file://"),J;if(J="ort-wasm.wasm",!ge(J)){var fe=J;J=a.locateFile?a.locateFile(fe,I):I+fe}function we(r){if(U)return U(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(i||A){if(typeof fetch=="function"&&!ye(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>we(r));if(F)return new Promise((o,s)=>{F(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>we(r))}function Me(r,o,s){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{x(`failed to asynchronously prepare wasm: ${m}`),de(m)})}function Fe(r,o){var s=J;return typeof WebAssembly.instantiateStreaming!="function"||ge(s)||ye(s)||D||typeof fetch!="function"?Me(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return x(`wasm streaming compile failed: ${O}`),x("falling back to ArrayBuffer instantiation"),Me(s,r,o)}))}var Ee,pe={919888:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=be(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ae.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Oe(r){this.xa=r-24,this.Ha=function(o){Y[this.xa+4>>>2>>>0]=o},this.Ga=function(o){Y[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){Y[this.xa+16>>>2>>>0]=0}}var ve=0,re=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&Z)return Z.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var S=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|S);else{var R=r[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|R:(O&7)<<18|S<<12|R<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},be=(r,o)=>(r>>>=0)?Ce(ae,r,o):"",_e=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},ke=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var S=0;S<r.length;++S){var R=r.charCodeAt(S);if(55296<=R&&57343>=R){var K=r.charCodeAt(++S);R=65536+((R&1023)<<10)|K&1023}if(127>=R){if(s>=m)break;o[s++>>>0]=R}else{if(2047>=R){if(s+1>=m)break;o[s++>>>0]=192|R>>6}else{if(65535>=R){if(s+2>=m)break;o[s++>>>0]=224|R>>12}else{if(s+3>=m)break;o[s++>>>0]=240|R>>18,o[s++>>>0]=128|R>>12&63}o[s++>>>0]=128|R>>6&63}o[s++>>>0]=128|R&63}}return o[s>>>0]=0,s-O},Ue=r=>r%4===0&&(r%100!==0||r%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],De=r=>{var o=_e(r)+1,s=st(o);return s&&ke(r,ae,s,o),s},Ne=[],Pe={},He=()=>{if(!$e){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete r[o]:r[o]=Pe[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);$e=s}return $e},$e,Le=[null,[],[]],qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(r){var o=Array(_e(r)+1);return ke(r,o,0,o.length),o}function ot(r,o,s,m){function O(c,W,G){for(c=typeof c=="number"?c.toString():c||"";c.length<W;)c=G[0]+c;return c}function S(c,W){return O(c,W,"0")}function R(c,W){function G(Ke){return 0>Ke?-1:0<Ke?1:0}var Se;return(Se=G(c.getFullYear()-W.getFullYear()))===0&&(Se=G(c.getMonth()-W.getMonth()))===0&&(Se=G(c.getDate()-W.getDate())),Se}function K(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function le(c){var W=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<W;){var G=c.getMonth(),Se=(Ue(c.getFullYear())?qe:Ve)[G];if(W>Se-c.getDate())W-=Se-c.getDate()+1,c.setDate(1),11>G?c.setMonth(G+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+W);break}}return G=new Date(c.getFullYear()+1,0,4),W=K(new Date(c.getFullYear(),0,4)),G=K(G),0>=R(W,c)?0>=R(G,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var oe=Y[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:oe?be(oe):""},s=be(s),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)s=s.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ze="January February March April May June July August September October November December".split(" ");oe={"%a":c=>Qe[c.oa].substring(0,3),"%A":c=>Qe[c.oa],"%b":c=>Ze[c.wa].substring(0,3),"%B":c=>Ze[c.wa],"%C":c=>S((c.ua+1900)/100|0,2),"%d":c=>S(c.ya,2),"%e":c=>O(c.ya,2," "),"%g":c=>le(c).toString().substring(2),"%G":c=>le(c),"%H":c=>S(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var W=0,G=0;G<=c.wa-1;W+=(Ue(c.ua+1900)?qe:Ve)[G++]);return S(c.ya+W,3)},"%m":c=>S(c.wa+1,2),"%M":c=>S(c.Ca,2),"%n":()=>`\n`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>S(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>S(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var W=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&W++,W)W==53&&(G=(c.oa+371-c.ta)%7,G==4||G==3&&Ue(c.ua)||(W=1));else{W=52;var G=(c.oa+7-c.ta-1)%7;(G==4||G==5&&Ue(c.ua%400-1))&&W++}return S(W,2)},"%w":c=>c.oa,"%W":c=>S(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var W=0<=c;return c=Math.abs(c)/60,(W?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in oe)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),oe[se](m)));return s=s.replace(/\\0\\0/g,"%"),se=Ge(s),se.length>o?0:(ie.set(se,r>>>0),se.length-1)}var $={a:function(r,o,s){throw r>>>=0,new Oe(r).Aa(o>>>0,s>>>0),ve=r,re++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getUTCSeconds(),E[s+4>>>2>>>0]=r.getUTCMinutes(),E[s+8>>>2>>>0]=r.getUTCHours(),E[s+12>>>2>>>0]=r.getUTCDate(),E[s+16>>>2>>>0]=r.getUTCMonth(),E[s+20>>>2>>>0]=r.getUTCFullYear()-1900,E[s+24>>>2>>>0]=r.getUTCDay(),E[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getSeconds(),E[s+4>>>2>>>0]=r.getMinutes(),E[s+8>>>2>>>0]=r.getHours(),E[s+12>>>2>>>0]=r.getDate(),E[s+16>>>2>>>0]=r.getMonth(),E[s+20>>>2>>>0]=r.getFullYear()-1900,E[s+24>>>2>>>0]=r.getDay(),E[s+28>>>2>>>0]=(Ue(r.getFullYear())?ze:at)[r.getMonth()]+r.getDate()-1|0,E[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(E[r+20>>>2>>>0]+1900,E[r+16>>>2>>>0],E[r+12>>>2>>>0],E[r+8>>>2>>>0],E[r+4>>>2>>>0],E[r>>>2>>>0],0),s=E[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(S,O);return 0>s?E[r+32>>>2>>>0]=+(O!=S&&R==m):0<s!=(R==m)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?R:O)-m))),E[r+24>>>2>>>0]=o.getDay(),E[r+28>>>2>>>0]=(Ue(o.getFullYear())?ze:at)[o.getMonth()]+o.getDate()-1|0,E[r>>>2>>>0]=o.getSeconds(),E[r+4>>>2>>>0]=o.getMinutes(),E[r+8>>>2>>>0]=o.getHours(),E[r+12>>>2>>>0]=o.getDate(),E[r+16>>>2>>>0]=o.getMonth(),E[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(E[Ye()>>>2>>>0]=61,r=-1):r/=1e3,Je((Ee=r,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),R=new Date(O,6,1);O=S.getTimezoneOffset();var K=R.getTimezoneOffset();Y[r>>>0>>>2>>>0]=60*Math.max(O,K),E[o>>>0>>>2>>>0]=+(O!=K),r=m(S),o=m(R),r=De(r),o=De(o),K<O?(Y[s>>>2>>>0]=r,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=r)},d:()=>{de("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ae[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?Y[s>>>2>>>0]:m==105?E[s>>>2>>>0]:ue[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ae.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ae.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(O),Re();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var S=o+s;for(O=Y[r+4*O>>>2>>>0]=S,S=0;S<m.length;++S)ie[O++>>>0>>>0]=m.charCodeAt(S);ie[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();Y[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),Y[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,S=0;S<s;S++){var R=Y[o>>>2>>>0],K=Y[o+4>>>2>>>0];o+=8;for(var le=0;le<K;le++){var oe=ae[R+le>>>0],se=Le[r];oe===0||oe===10?((r===1?_:x)(Ce(se,0)),se.length=0):se.push(oe)}O+=K}return Y[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),N=C.K,Re(),ee.unshift(C.L),ce--,ce==0&&(P!==null&&(clearInterval(P),P=null),te&&(s=te,te=null,s())),C}var o={a:$};if(ce++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){x(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Fe(o,function(s){r(s.instance)}).catch(l),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,S,R,K,le,oe)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,S,R,K,le,oe),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,S)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,S),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,S,R,K)=>(a._OrtRun=C.ja)(r,o,s,m,O,S,R,K),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var Ye=()=>(Ye=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Je=r=>(Je=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),Be=r=>(Be=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=Be,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=be,a.stringToUTF8=(r,o,s)=>ke(r,ae,o,s),a.lengthBytesUTF8=_e;var xe;te=function r(){xe||Xe(),xe||(te=r)};function Xe(){if(!(0<ce)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();Ie.unshift(r)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<ce||xe||(xe=!0,a.calledRun=!0,he))){for(;0<ee.length;)ee.shift()(a);for(h(a);0<j.length;)j.shift()(a)}}}return Xe(),d.ready}})();typeof mr=="object"&&typeof xt=="object"?xt.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=et(()=>{});var yr=et(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=et((vr,Ft)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return j.buffer!=de.buffer&&we(),de}function h(){return j.buffer!=de.buffer&&we(),ge}function l(){return j.buffer!=de.buffer&&we(),ye}function w(){return j.buffer!=de.buffer&&we(),J}function g(){return j.buffer!=de.buffer&&we(),fe}var i=d,A,D;i.ready=new Promise((e,t)=>{A=e,D=t});var I=Object.assign({},i),B="./this.program",F=(e,t)=>{throw t},U=typeof window=="object",k=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,x="";function N(e){return i.locateFile?i.locateFile(e,x):x+e}var he,ie,ae;if(L){var E=(Mt(),tt(At)),Y=(Dt(),tt(Ct));x=k?Y.dirname(x)+"/":__dirname+"/",he=(t,n)=>(t=be(t)?new URL(t):Y.normalize(t),E.readFileSync(t,n?void 0:"utf8")),ae=t=>(t=he(t,!0),t.buffer||(t=new Uint8Array(t)),t),ie=(t,n,f,y=!0)=>{t=be(t)?new URL(t):Y.normalize(t),E.readFile(t,y?void 0:"utf8",(b,v)=>{b?f(b):n(y?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),F=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(U||k)&&(k?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof u<"u"&&u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",L||(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(ae=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=(e,t,n)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?t(f.response):n()},f.onerror=n,f.send(null)}));L&&typeof performance>"u"&&(global.performance=yr().performance);var ue=console.log.bind(console),Re=console.error.bind(console);L&&(ue=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=ue,ee=Re;Object.assign(i,I),I=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var j,ce,P=!1,te,de,ge,ye,J,fe;function we(){var e=j.buffer;i.HEAP8=de=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ge=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ye=new Int32Array(e),i.HEAPU32=J=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=fe=new Float64Array(e)}var Ae=16777216;if(_)j=i.wasmMemory;else if(i.wasmMemory)j=i.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");we(),Ae=j.buffer.byteLength;var Me=[],Fe=[],Ee=[],pe=0,Oe=null,ve=null;function re(){if(pe--,pe==0&&(Oe!==null&&(clearInterval(Oe),Oe=null),ve)){var e=ve;ve=null,e()}}function Z(e){throw e="Aborted("+e+")",ee(e),P=!0,te=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Ce=e=>e.startsWith("data:application/octet-stream;base64,"),be=e=>e.startsWith("file://"),_e;_e="ort-wasm-threaded.wasm",Ce(_e)||(_e=N(_e));function ke(e){if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function Ue(e){if(U||k){if(typeof fetch=="function"&&!be(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ke(e));if(ie)return new Promise((t,n)=>{ie(e,f=>t(new Uint8Array(f)),n)})}return Promise.resolve().then(()=>ke(e))}function ze(e,t,n){return Ue(e).then(f=>WebAssembly.instantiate(f,t)).then(f=>f).then(n,f=>{ee(`failed to asynchronously prepare wasm: ${f}`),Z(f)})}function at(e,t){var n=_e;return typeof WebAssembly.instantiateStreaming!="function"||Ce(n)||be(n)||L||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,e).then(t,function(y){return ee(`wasm streaming compile failed: ${y}`),ee("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var De,Ne={921276:(e,t,n,f)=>{if(typeof i>"u"||!i.cb)return 1;if(e=Ge(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,f>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),f>>>0),0}catch{return 4}}};function Pe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},$e=e=>{M.Pa.length==0&&(Je(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return L&&t.unref(),t.postMessage(n,e.qb),0},Le=0,qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ve=(e,t,n)=>{t>>>=0;var f=t+n;for(n=t;e[n]&&!(n>=f);)++n;if(16<n-t&&e.buffer&&qe)return qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(f="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var v=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[t++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},Ge=(e,t)=>(e>>>=0)?Ve(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function $(e,t){var n=arguments.length-2,f=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,v=0;v<n;v++){var z=f[2+v];g()[b+v>>>0]=z}return ar(e,n,y,t)})}function C(e){if(_)return $(0,1,e);te=e,0<Le||(M.lb(),i.onExit?.(e),P=!0),F(e,new Pe(e))}var Ye=e=>{if(te=e,_)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Je();Me.unshift(()=>{pe++,it(()=>re())})}function Je(){var e=N("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){_?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>te=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var z=M.Ma[b.targetThread];z?z.postMessage(b,b.transferList):ee(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ft():v==="spawnThread"?$e(b):v==="cleanupThread"?M.Za(M.Ma[b.thread]):v==="killThread"?(b=b.thread,v=M.Ma[b],delete M.Ma[b],He(v),wt(b),M.Qa.splice(M.Qa.indexOf(v),1),v.Oa=0):v==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,L&&!e.Oa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?i[b.handler](...b.args):v&&ee(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ee(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},L&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],f=["onExit"],y;for(y of f)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:j,wasmModule:ce})})};i.PThread=M;var Be=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(_)return $(1,0,e);Ye(e)}var xe=[],Xe;i.invokeEntryPoint=(e,t)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Xe.get(e)),e=n(t),0<Le?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,f){return _?$(2,1,e,t,n,f):O(e,t,n,f)}function O(e,t,n,f){if(e>>>=0,t>>>=0,n>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return _&&y.length===0?m(e,t,n,f):(e={kb:n,Oa:e,hb:f,qb:y},_?(e.sb="spawnThread",postMessage(e,y),0):$e(e))}function S(e,t,n){return _?$(3,1,e,t,n):0}function R(e,t){if(_)return $(4,1,e,t)}var K=e=>{for(var t=0,n=0;n<e.length;++n){var f=e.charCodeAt(n);127>=f?t++:2047>=f?t+=2:55296<=f&&57343>=f?(t+=4,++n):t+=3}return t},le=(e,t,n,f)=>{if(n>>>=0,!(0<f))return 0;var y=n;f=n+f-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=f)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=f)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=f)break;t[n++>>>0]=224|v>>12}else{if(n+3>=f)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-y},oe=(e,t,n)=>le(e,h(),t,n);function se(e,t){if(_)return $(5,1,e,t)}function Qe(e,t,n){if(_)return $(6,1,e,t,n)}function Ze(e,t,n){return _?$(7,1,e,t,n):0}function c(e,t){if(_)return $(8,1,e,t)}function W(e,t,n){if(_)return $(9,1,e,t,n)}function G(e,t,n,f){if(_)return $(10,1,e,t,n,f)}function Se(e,t,n,f){if(_)return $(11,1,e,t,n,f)}function Ke(e,t,n,f){if(_)return $(12,1,e,t,n,f)}function Bt(e){if(_)return $(13,1,e)}function Wt(e,t){if(_)return $(14,1,e,t)}function kt(e,t,n){if(_)return $(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(l(),e>>>2,e).value.then(ft),e+=128,Atomics.store(l(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!P))try{if(e(),!(0<Le))try{_?Ot(te):Ye(te)}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}};i.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,t,n,f,y,b,v,z){return _?$(16,1,e,t,n,f,y,b,v,z):-52}function Gt(e,t,n,f,y,b,v){if(_)return $(17,1,e,t,n,f,y,b,v)}var Yt=e=>{var t=K(e)+1,n=rr(t);return n&&oe(e,n,t),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(_)return $(18,1,e,t);e>>>=0,t>>>=0;var n=0;return jt().forEach((f,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<f.length;++b)a()[y++>>>0>>>0]=f.charCodeAt(b);a()[y>>>0>>>0]=0,n+=f.length+1}),0}function qt(e,t){if(_)return $(19,1,e,t);e>>>=0,t>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var f=0;return n.forEach(y=>f+=y.length+1),w()[t>>>2>>>0]=f,0}function Vt(e){return _?$(20,1,e):52}function Jt(e,t,n,f){return _?$(21,1,e,t,n,f):52}function Xt(e,t,n,f,y){return _?$(22,1,e,t,n,f,y):70}var Gr=[null,[],[]];function Qt(e,t,n,f){if(_)return $(23,1,e,t,n,f);t>>>=0,n>>>=0,f>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[t>>>2>>>0],z=w()[t+4>>>2>>>0];t+=8;for(var Te=0;Te<z;Te++){var ne=h()[v+Te>>>0],me=Gr[e];ne===0||ne===10?((e===1?Ie:ee)(Ve(me,0)),me.length=0):me.push(ne)}y+=z}return w()[f>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(e){var t=Array(K(e)+1);return le(e,t,0,t.length),t}var jr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,f){function y(p,H,q){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=q[0]+p;return p}function b(p,H){return y(p,H,"0")}function v(p,H){function q(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=q(p.getFullYear()-H.getFullYear()))===0&&(We=q(p.getMonth()-H.getMonth()))===0&&(We=q(p.getDate()-H.getDate())),We}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Te(p){var H=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<H;){var q=p.getMonth(),We=(je(p.getFullYear())?Zt:Kt)[q];if(H>We-p.getDate())H-=We-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return q=new Date(p.getFullYear()+1,0,4),H=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(H,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,f>>>=0;var ne=w()[f+40>>>2>>>0];f={ob:l()[f>>>2>>>0],nb:l()[f+4>>>2>>>0],Ta:l()[f+8>>>2>>>0],Xa:l()[f+12>>>2>>>0],Ua:l()[f+16>>>2>>>0],Sa:l()[f+20>>>2>>>0],Na:l()[f+24>>>2>>>0],Ra:l()[f+28>>>2>>>0],ub:l()[f+32>>>2>>>0],mb:l()[f+36>>>2>>>0],pb:ne?Ge(ne):""},n=Ge(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)n=n.replace(new RegExp(me,"g"),ne[me]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");ne={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Te(p).toString().substring(2),"%G":p=>Te(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var H=0,q=0;q<=p.Ua-1;H+=(je(p.Sa+1900)?Zt:Kt)[q++]);return b(p.Xa+H,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var H=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&H++,H)H==53&&(q=(p.Na+371-p.Ra)%7,q==4||q==3&&je(p.Sa)||(H=1));else{H=52;var q=(p.Na+7-p.Ra-1)%7;(q==4||q==5&&je(p.Sa%400-1))&&H++}return b(H,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(me in ne)n.includes(me)&&(n=n.replace(new RegExp(me,"g"),ne[me](f)));return n=n.replace(/\\0\\0/g,"%"),me=Yr(n),me.length>t?0:(jr(me,e),me.length-1)}M.Wa();var zr=[C,ut,m,S,R,se,Qe,Ze,c,W,G,Se,Ke,Bt,Wt,kt,$t,Gt,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!k,1,!U,131072,!1),M.ab()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:S,S:R,D:se,F:Qe,T:Ze,Q:c,J:W,P:G,n:Se,E:Ke,B:Bt,R:Wt,C:kt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,f){t>>>=0,gt.length=n,f=f>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[f+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){L&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var f=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=f&&e.getTimezoneOffset()==Math.min(f,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],f=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?l()[e+32>>>2>>>0]=+(y!=b&&v==f):0<n!=(v==f)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?v:y)-f))),l()[e+24>>>2>>>0]=t.getDay(),n=(je(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((De=e,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Gt,y:function(e,t,n){function f(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Te=Math.max(y,z);w()[e>>>2>>>0]=60*Te,l()[t>>>2>>>0]=+(y!=z),e=f(b),t=f(v),e=Yt(e),t=Yt(t),z<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{Z("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var f;f=h()[t++>>>0];){var y=f!=105;y&=f!=112,n+=y&&n%8?4:0,ht.push(f==112?w()[n>>>2>>>0]:f==105?l()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>L?(wr(),tt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var f=t*(1+.2/n);f=Math.min(f,e+100663296);var y=Math;f=Math.max(e,f);e:{y=(y.min.call(y,4294901760,f+(65536-f%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(y),we();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ye,g:Vt,m:Jt,v:Xt,l:Qt,a:j||i.wasmMemory,w:er,d:function(e,t,n,f){return er(e>>>0,t>>>0,n>>>0,f>>>0)}},T=function(){function e(n,f){return T=n.exports,T=Vr(),M.bb.push(T.za),Xe=T.Aa,Fe.unshift(T.V),ce=f,re(),T}var t={a:qr};if(pe++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ee(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return at(t,function(n){e(n.instance,n.module)}).catch(D),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,f,y,b,v,z,Te,ne)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,f,y,b,v,z,Te,ne),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,f,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,f,y,b),i._OrtGetTensorData=(e,t,n,f,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,f,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,f)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,f),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,f)=>(i._OrtBindOutput=T.pa)(e,t,n,f),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,f,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,f,y),i._OrtRun=(e,t,n,f,y,b,v,z)=>(i._OrtRun=T.ta)(e,t,n,f,y,b,v,z),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,f,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,f,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,f)=>(ar=T.Da)(e,t,n,f),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=f=>()=>f()>>>0,n=f=>y=>f(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=j,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Le,i.UTF8ToString=Ge,i.stringToUTF8=oe,i.lengthBytesUTF8=K,i.ExitStatus=Pe,i.PThread=M;var dt;ve=function e(){dt||ur(),dt||(ve=e)};function ur(){if(!(0<pe))if(_)A(i),_||Be(Fe),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Me.unshift(i.preRun.shift());Be(Me),0<pe||dt||(dt=!0,i.calledRun=!0,P||(_||Be(Fe),A(i),_||Be(Ee)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Ft=="object"?Ft.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=et((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),Ut,Pt=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Pt)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,l=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,A=un(w,l),D=typeof g=="object"?g[A]:void 0,I=!1,B=[];if(d>0&&B.push(new Promise(F=>{setTimeout(()=>{I=!0,F()},d)})),B.push(new Promise((F,U)=>{let k=l?an:Tr,L={locateFile:(_,x)=>l&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):_.endsWith(".wasm")?D||(i??x)+A:x+_};if(l)if(L.numThreads=a,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;L.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(L).then(_=>{pt=!1,Pt=!0,Ut=_,F()},_=>{pt=!1,Sr=!0,U(_)})})),await Promise.race(B),I)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},X=()=>{if(Pt&&Ut)return Ut;throw new Error("WebAssembly is not initialized yet.")};var Q=(u,d)=>{let a=X(),h=a.lengthBytesUTF8(u)+1,l=a._malloc(h);return a.stringToUTF8(u,l,h),d.push(l),l},rt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([l,w])=>{let g=d?d+l:l;if(typeof w=="object")rt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let l=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${l}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=X(),a=0,h=[],l=u||{};try{if(u?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(l.terminate=!1);let w=0;return u?.tag!==void 0&&(w=Q(u.tag,h)),a=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&rt(u.extra,"",new WeakSet,(g,i)=>{let A=Q(g,h),D=Q(i,h);d._OrtAddRunConfigEntry(a,A,D)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let l=typeof h=="string"?h:h.name;switch(l){case"webnn":if(l="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=Q("deviceType",a),A=Q(g.deviceType,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let A=Q("numThreads",a),D=Q(i.toString(),a);X()._OrtAddSessionConfigEntry(u,A,D)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=Q("powerPreference",a),A=Q(g.powerPreference,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=Q("preferredLayout",a),A=Q(g.preferredLayout,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let w=Q(l,a);X()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${l}.`)}},Cr=u=>{let d=X(),a=0,h=[],l=u||{};cn(l);try{let w=fn(l.graphOptimizationLevel??"all"),g=ln(l.executionMode??"sequential"),i=typeof l.logId=="string"?Q(l.logId,h):0,A=l.logSeverityLevel??2;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log serverity level is not valid: ${A}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let I=typeof l.optimizedModelFilePath=="string"?Q(l.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!l.enableCpuMemArena,!!l.enableMemPattern,g,!!l.enableProfiling,0,i,A,D,I),a===0&&V("Can\'t create session options."),l.executionProviders&&dn(a,l.executionProviders,h),l.freeDimensionOverrides)for(let[B,F]of Object.entries(l.freeDimensionOverrides)){if(typeof B!="string")throw new Error(`free dimension override name must be a string: ${B}`);if(typeof F!="number"||!Number.isInteger(F)||F<0)throw new Error(`free dimension override value must be a non-negative integer: ${F}`);let U=Q(B,h);d._OrtAddFreeDimensionOverride(a,U,F)!==0&&V(`Can\'t set a free dimension override: ${B} - ${F}.`)}return l.extra!==void 0&&rt(l.extra,"",new WeakSet,(B,F)=>{let U=Q(B,h),k=Q(F,h);d._OrtAddSessionConfigEntry(a,U,k)!==0&&V(`Can\'t set a session config entry: ${B} - ${F}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],xr=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Ur=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let l of a)h.push(l);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let l=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let A=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:A,maximum:A}).buffer}else throw i}let g=0;for(;;){let{done:i,value:A}=await l.read();if(i)break;let D=A.byteLength;new Uint8Array(w,g,D).set(A),g+=D}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{X()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,Fr(u.logLevel))},Br=async(u,d)=>{},nt=new Map,mn=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=X(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Wr=async(u,d)=>{let a,h,l=X();Array.isArray(u)?[a,h]=u:u.buffer===l.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,A=[],D=[],I=[];try{if([g,A]=Cr(d),d?.externalData&&l.mountExternalData){let x=[];for(let N of d.externalData){let he=typeof N=="string"?N:N.path;x.push(Rr(typeof N=="string"?N:N.data).then(ie=>{l.mountExternalData(he,ie)}))}await Promise.all(x)}w=l._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[B,F]=mn(w),U=[],k=[],L=[];for(let x=0;x<B;x++){let N=l._OrtGetInputName(w,x);N===0&&V("Can\'t get an input name."),D.push(N),U.push(l.UTF8ToString(N))}for(let x=0;x<F;x++){let N=l._OrtGetOutputName(w,x);N===0&&V("Can\'t get an output name."),I.push(N);let he=l.UTF8ToString(N);k.push(he)}let _=null;return nt.set(w,[w,D,I,_]),[w,U,k]}catch(B){throw D.forEach(F=>l._OrtFree(F)),I.forEach(F=>l._OrtFree(F)),i!==0&&l._OrtReleaseBinding(i),w!==0&&l._OrtReleaseSession(w),B}finally{l._free(a),g!==0&&l._OrtReleaseSessionOptions(g),A.forEach(B=>l._free(B)),l.unmountExternalData?.()}},kr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,l,w,g]=a;g&&d._OrtReleaseBinding(g.handle),d.jsepUnregisterBuffers?.(u),l.forEach(i=>d._OrtFree(i)),w.forEach(i=>d._OrtFree(i)),d._OrtReleaseSession(h),nt.delete(u)},Ir=(u,d,a,h,l)=>{if(!u){d.push(0);return}let w=X(),g=u[0],i=u[1],A=u[3],D,I;if(g==="string"&&A==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(A==="gpu-buffer"){let U=u[2].gpuBuffer,k=It(Rt(g));I=i.reduce((L,_)=>L*_,1)*k,D=w.jsepRegisterBuffer(h,l,U,I)}else{let U=u[2];if(Array.isArray(U)){I=4*U.length,D=w._malloc(I),a.push(D);let k=D/4;for(let L=0;L<U.length;L++){if(typeof U[L]!="string")throw new TypeError(`tensor data at index ${L} is not a string`);w.HEAPU32[k++]=Q(U[L],a)}}else I=U.byteLength,D=w._malloc(I),a.push(D),w.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,I),D)}let B=w.stackSave(),F=w.stackAlloc(4*i.length);try{let U=F/4;i.forEach(L=>w.HEAP32[U++]=L);let k=w._OrtCreateTensor(Rt(g),D,I,F,i.length,Pr(A));k===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${l}.`),d.push(k)}finally{w.stackRestore(B)}},Nr=async(u,d,a,h,l,w)=>{let g=X(),i=nt.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[A,D,I,B]=i,F=d.length,U=h.length,k=0,L=[],_=[],x=[],N=[],he=g.stackSave(),ie=g.stackAlloc(F*4),ae=g.stackAlloc(F*4),E=g.stackAlloc(U*4),Y=g.stackAlloc(U*4);try{[k,L]=Mr(w);for(let P=0;P<F;P++)Ir(a[P],_,N,u,d[P]);for(let P=0;P<U;P++)Ir(l[P],x,N,u,F+h[P]);let ue=ie/4,Re=ae/4,Ie=E/4,ee=Y/4;for(let P=0;P<F;P++)g.HEAPU32[ue++]=_[P],g.HEAPU32[Re++]=D[d[P]];for(let P=0;P<U;P++)g.HEAPU32[Ie++]=x[P],g.HEAPU32[ee++]=I[h[P]];let j;j=await g._OrtRun(A,ae,ie,F,Y,U,E,k),j!==0&&V("failed to call OrtRun().");let ce=[];for(let P=0;P<U;P++){let te=g.HEAPU32[E/4+P];if(te===x[P]){ce.push(l[P]);continue}let de=g.stackSave(),ge=g.stackAlloc(4*4),ye=!1,J,fe=0;try{g._OrtGetTensorData(te,ge,ge+4,ge+8,ge+12)!==0&&V(`Can\'t access output tensor data on index ${P}.`);let Ae=ge/4,Me=g.HEAPU32[Ae++];fe=g.HEAPU32[Ae++];let Fe=g.HEAPU32[Ae++],Ee=g.HEAPU32[Ae++],pe=[];for(let re=0;re<Ee;re++)pe.push(g.HEAPU32[Fe/4+re]);g._OrtFree(Fe);let Oe=pe.reduce((re,Z)=>re*Z,1);J=Dr(Me);let ve=B?.outputPreferredLocations[h[P]];if(J==="string"){if(ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Z=fe/4;for(let Ce=0;Ce<Oe;Ce++){let be=g.HEAPU32[Z++],_e=Ce===Oe-1?void 0:g.HEAPU32[Z]-be;re.push(g.UTF8ToString(be,_e))}ce.push([J,pe,re,"cpu"])}else if(ve==="gpu-buffer"&&Oe>0){let re=g.jsepGetBuffer(fe),Z=It(Me);if(Z===void 0||!Ur(J))throw new Error(`Unsupported data type: ${J}`);ye=!0,ce.push([J,pe,{gpuBuffer:re,download:g.jsepCreateDownloader(re,Oe*Z,J),dispose:()=>{g._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let re=xr(J),Z=new re(Oe);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(fe,fe+Z.byteLength)),ce.push([J,pe,Z,"cpu"])}}finally{g.stackRestore(de),J==="string"&&fe&&g._free(fe),ye||g._OrtReleaseTensor(te)}}return B&&g._OrtClearBoundOutputs(B.handle),ce}finally{g.stackRestore(he),_.forEach(ue=>g._OrtReleaseTensor(ue)),x.forEach(ue=>g._OrtReleaseTensor(ue)),N.forEach(ue=>g._free(ue)),k!==0&&g._OrtReleaseRunOptions(k),L.forEach(ue=>g._free(ue))}},Hr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error("invalid session id");let h=a[0],l=d._OrtEndProfiling(h);l===0&&V("Can\'t get an profile file name."),d._OrtFree(l)},$r=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:l}=a;Br(l,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,l=Lt(h);postMessage({type:d,out:l});break}case"create":{let{model:h,options:l}=a;Wr(h,l).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":kr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:l,inputs:w,outputIndices:g,options:i}=a;Nr(h,l,w,g,new Array(g.length).fill(null),i).then(A=>{A.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:A},$r(A))},A=>{postMessage({type:d,err:A})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'}),ko,$n,ks,$l,Vl,V0,pd,Pa,Ma,aT,jl,WS,qS,XS,YS,ZS,KS,QS,JS=Y(()=>{"use strict";Fi(),lU(),ac(),ko=()=>!!we.wasm.proxy&&typeof document<"u",ks=!1,$l=!1,Vl=!1,pd=new Map,Pa=(t,e)=>{let r=pd.get(t);r?r.push(e):pd.set(t,[e])},Ma=()=>{if(ks||!$l||Vl||!$n)throw new Error("worker not ready")},aT=t=>{switch(t.data.type){case"init-wasm":ks=!1,t.data.err?(Vl=!0,V0[1](t.data.err)):($l=!0,V0[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=pd.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}default:}},jl=typeof document<"u"?document?.currentScript?.src:void 0,WS=()=>U(void 0,null,function*(){if(!$l){if(ks)throw new Error("multiple calls to 'initWasm()' detected.");if(Vl)throw new Error("previous call to 'initWasm()' failed.");if(ks=!0,ko())return we.wasm.wasmPaths===void 0&&jl&&jl.indexOf("blob:")!==0&&(we.wasm.wasmPaths=jl.substr(0,+jl.lastIndexOf("/")+1)),new Promise((t,e)=>{$n?.terminate();let r=URL.createObjectURL(new Blob([cU()],{type:"text/javascript"}));$n=new Worker(r,{name:"ort-wasm-proxy-worker"}),$n.onerror=o=>e(o),$n.onmessage=aT,URL.revokeObjectURL(r),V0=[t,e];let n={type:"init-wasm",in:we};$n.postMessage(n)});try{yield OS(we.wasm),yield $S(we),$l=!0}catch(t){throw Vl=!0,t}finally{ks=!1}}}),qS=t=>U(void 0,null,function*(){if(ko())return Ma(),new Promise((e,r)=>{Pa("init-ep",[e,r]);let n={type:"init-ep",in:{epName:t,env:we}};$n.postMessage(n)});yield VS(we,t)}),XS=t=>U(void 0,null,function*(){return ko()?(Ma(),new Promise((e,r)=>{Pa("copy-from",[e,r]);let n={type:"copy-from",in:{buffer:t}};$n.postMessage(n,[t.buffer])})):Tm(t)}),YS=(t,e)=>U(void 0,null,function*(){if(ko()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Ma(),new Promise((r,n)=>{Pa("create",[r,n]);let o={type:"create",in:{model:t,options:e}},a=[];t instanceof Uint8Array&&a.push(t.buffer),$n.postMessage(o,a)})}else return jS(t,e)}),ZS=t=>U(void 0,null,function*(){if(ko())return Ma(),new Promise((e,r)=>{Pa("release",[e,r]);let n={type:"release",in:t};$n.postMessage(n)});US(t)}),KS=(t,e,r,n,o,a)=>U(void 0,null,function*(){if(ko()){if(r.some(u=>u[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(u=>u))throw new Error("pre-allocated output tensor is not supported for proxy.");return Ma(),new Promise((u,s)=>{Pa("run",[u,s]);let l=r,i={type:"run",in:{sessionId:t,inputIndices:e,inputs:l,outputIndices:n,options:a}};$n.postMessage(i,GS(l))})}else return HS(t,e,r,n,o,a)}),QS=t=>U(void 0,null,function*(){if(ko())return Ma(),new Promise((e,r)=>{Pa("end-profiling",[e,r]);let n={type:"end-profiling",in:t};$n.postMessage(n)});zS(t)})}),j0,sT,eD,fU=Y(()=>{"use strict";Fi(),JS(),LS(),BS(),j0=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},sT=t=>{switch(t[3]){case"cpu":return new Ur(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!jm(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:o}=t[2];return Ur.fromGpuBuffer(r,{dataType:e,dims:t[1],download:n,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},eD=class{fetchModelAndCopyToWasmMemory(t){return U(this,null,function*(){return XS(yield Ed(t))})}loadModel(t,e){return U(this,null,function*(){js();let r;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?r=yield Ed(t):r=yield this.fetchModelAndCopyToWasmMemory(t):r=t,[this.sessionId,this.inputNames,this.outputNames]=yield YS(r,e),Us()})}dispose(){return U(this,null,function*(){return ZS(this.sessionId)})}run(t,e,r){return U(this,null,function*(){js();let n=[],o=[];Object.entries(t).forEach(f=>{let d=f[0],h=f[1],p=this.inputNames.indexOf(d);if(p===-1)throw new Error(`invalid input '${d}'`);n.push(h),o.push(p)});let a=[],u=[];Object.entries(e).forEach(f=>{let d=f[0],h=f[1],p=this.outputNames.indexOf(d);if(p===-1)throw new Error(`invalid output '${d}'`);a.push(h),u.push(p)});let s=n.map((f,d)=>j0(f,()=>`input "${this.inputNames[o[d]]}"`)),l=a.map((f,d)=>f?j0(f,()=>`output "${this.outputNames[u[d]]}"`):null),i=yield KS(this.sessionId,o,s,u,l,r),c={};for(let f=0;f<i.length;f++)c[this.outputNames[u[f]]]=a[f]??sT(i[f]);return Us(),c})}startProfiling(){}endProfiling(){QS(this.sessionId)}}}),uT,tD,dU=Y(()=>{"use strict";Fi(),JS(),fU(),uT=()=>{if((typeof we.wasm.initTimeout!="number"||we.wasm.initTimeout<0)&&(we.wasm.initTimeout=0),typeof we.wasm.simd!="boolean"&&(we.wasm.simd=!0),typeof we.wasm.proxy!="boolean"&&(we.wasm.proxy=!1),typeof we.wasm.trace!="boolean"&&(we.wasm.trace=!1),typeof we.wasm.numThreads!="number"||!Number.isInteger(we.wasm.numThreads)||we.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(we.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;we.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},tD=class{init(t){return U(this,null,function*(){uT(),yield WS(),yield qS(t)})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new eD;return yield r.loadModel(t,e),Promise.resolve(r)})}}}),rD={};zs(rD,{wasmBackend:()=>nD});var nD,hU=Y(()=>{"use strict";dU(),nD=new tD});Fi();Fi();Fi();var pU="1.17.1",Rhe=ST;{let t=(eU(),ka(wS)).onnxjsBackend;Bs("webgl",t,-10)}{let t=(hU(),ka(rD)).wasmBackend;Bs("cpu",t,10),Bs("wasm",t,10),Bs("webnn",t,9)}Object.defineProperty(we.versions,"web",{value:pU,enumerable:!0});var mU=Object.create,Ud=Object.defineProperty,yU=Object.getOwnPropertyDescriptor,vU=Object.getOwnPropertyNames,bU=Object.getPrototypeOf,wU=Object.prototype.hasOwnProperty,ee=(t,e)=>()=>(t&&(e=t(t=0)),e),vr=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),_O=(t,e)=>{for(var r in e)Ud(t,r,{get:e[r],enumerable:!0})},EO=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of vU(e))!wU.call(t,o)&&o!==r&&Ud(t,o,{get:()=>e[o],enumerable:!(n=yU(e,o))||n.enumerable});return t},Ks=(t,e,r)=>(r=t!=null?mU(bU(t)):{},EO(e||!t||!t.__esModule?Ud(r,"default",{value:t,enumerable:!0}):r,t)),xU=t=>EO(Ud({},"__esModule",{value:!0}),t),sc,Uo,ty,ry,ny=ee(()=>{"use strict";sc=new Map,Uo=[],ty=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=sc.get(t);if(n===void 0)sc.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let o=Uo.indexOf(t);o!==-1&&Uo.splice(o,1);for(let a=0;a<Uo.length;a++)if(sc.get(Uo[a]).priority<=r){Uo.splice(a,0,t);return}Uo.push(t)}return}throw new TypeError("not a valid backend")},ry=t=>U(void 0,null,function*(){let e=t.length===0?Uo:t,r=[];for(let n of e){let o=sc.get(n);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let a=!!o.initPromise;try{return a||(o.initPromise=o.backend.init(n)),yield o.initPromise,o.initialized=!0,o.backend}catch(u){a||r.push({name:n,err:u}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),_U=ee(()=>{"use strict";ny()}),TO,EU=ee(()=>{"use strict";TO="1.17.1"}),Um,Zs,IO=ee(()=>{"use strict";EU(),Um="warning",Zs={wasm:{},webgl:{},webgpu:{},versions:{common:TO},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);Um=t}},get logLevel(){return Um}},Object.defineProperty(Zs,"logLevel",{enumerable:!0})}),Fr,TU=ee(()=>{"use strict";IO(),Fr=Zs}),AO,SO,IU=ee(()=>{"use strict";AO=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let o,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,i;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?i=[0,0,0,0]:typeof s.bias=="number"?i=[s.bias,s.bias,s.bias,s.bias]:(i=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(i[3]=s.bias[3]));let c=a*o,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<o;v++){let x=(t.data[f++]-i[0])*l[0],y=(t.data[d++]-i[1])*l[1],_=(t.data[h++]-i[2])*l[2],I=p===-1?255:(t.data[p++]-i[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},SO=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let o,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[1],u=t.dims[3]):(o=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,i,c;l===void 0||l.mean===void 0?i=[255,255,255,255]:typeof l.mean=="number"?i=[l.mean,l.mean,l.mean,l.mean]:(i=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(i[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*o;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(o,a);for(let C=0;C<a*o;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*i[0],n.data[p]=(t.data[y++]-c[1])*i[1],n.data[m]=(t.data[_++]-c[2])*i[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*i[3]}else throw new Error("Can not access image data");return n}}),Dd,DO,CO,OO,PO,AU=ee(()=>{"use strict";iy(),Dd=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,o=e.norm??{mean:255,bias:0},a,u;typeof o.mean=="number"?a=[o.mean,o.mean,o.mean,o.mean]:a=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?u=[o.bias,o.bias,o.bias,o.bias]:u=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",i=r*n,c=l==="RGBA"?new Float32Array(i*4):new Float32Array(i*3),f=4,d=0,h=1,p=2,m=3,v=0,x=i,y=i*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=i*3:l==="RBG"?(v=0,y=i,x=i*2):l==="BGR"&&(y=0,x=i,v=i*2);for(let I=0;I<i;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new bi("float32",c,[1,4,r,n]):new bi("float32",c,[1,3,r,n])},DO=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},i=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=i(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,Dd(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=i(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(Dd(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Dd(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),CO=(t,e)=>{let{width:r,height:n,download:o,dispose:a}=e,u=[1,n,r,4];return new bi({location:"texture",type:"float32",texture:t,dims:u,download:o,dispose:a})},OO=(t,e)=>{let{dataType:r,dims:n,download:o,dispose:a}=e;return new bi({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:o,dispose:a})},PO=(t,e,r)=>new bi({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),xc,Nd,Hm,MO,SU=ee(()=>{"use strict";xc=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Nd=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),Hm=!1,MO=()=>{if(!Hm){Hm=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&(xc.set("int64",BigInt64Array),Nd.set(BigInt64Array,"int64")),e&&(xc.set("uint64",BigUint64Array),Nd.set(BigUint64Array,"uint64"))}}}),NO,RO,DU=ee(()=>{"use strict";iy(),NO=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},RO=(t,e)=>{switch(t.location){case"cpu":return new bi(t.type,t.data,e);case"cpu-pinned":return new bi({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new bi({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new bi({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),bi,iy=ee(()=>{"use strict";IU(),AU(),SU(),DU(),bi=class{constructor(t,e,r){MO();let n,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,o=t.dims,t.location){case"cpu-pinned":{let u=xc.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=xc.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Nd.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");o=s,this.cpuData=u,this.dataLocation="cpu"}let a=NO(o);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=a}static fromImage(t,e){return U(this,null,function*(){return DO(t,e)})}static fromTexture(t,e){return CO(t,e)}static fromGpuBuffer(t,e){return OO(t,e)}static fromPinnedBuffer(t,e,r){return PO(t,e,r)}toDataURL(t){return AO(this,t)}toImageData(t){return SO(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return RO(this,t)}}}),Mn,oy=ee(()=>{"use strict";iy(),Mn=bi}),x1,zm,kd,Ld,FO=ee(()=>{"use strict";IO(),x1=(t,e)=>{Zs.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},zm=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[o].trim().split(" ")[1]}`;e&&(a+=`::${e}`),x1("CPU",a);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},kd=t=>{Zs.wasm.trace&&zm("BEGIN",t)},Ld=t=>{Zs.wasm.trace&&zm("END",t)}}),kO,CU=ee(()=>{"use strict";ny(),oy(),FO(),kO=class LO{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){kd();let o={},a={};if(typeof e!="object"||e===null||e instanceof Mn||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof Mn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let i of r){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);o[i]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof Mn)&&(i=!0,u=!1,o[f]=d)}if(i){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of this.inputNames)if(typeof e[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(u)for(let i of this.outputNames)o[i]=null;let s=yield this.handler.run(e,o,a),l={};for(let i in s)if(Object.hasOwnProperty.call(s,i)){let c=s[i];c instanceof Mn?l[i]=c:l[i]=new Mn(c.type,c.data,c.dims)}return Ld(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,o){return U(this,null,function*(){kd();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let i=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=i.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${i.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>i.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${i.byteLength-c}].`);if(typeof o=="object"&&o!==null)u=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(i,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(i=>typeof i=="string"?i:i.name),l=yield(yield ry(s)).createInferenceSessionHandler(a,u);return Ld(),new LO(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),BO,OU=ee(()=>{"use strict";CU(),BO=kO}),PU=ee(()=>{"use strict"}),iD,$O,MU=ee(()=>{"use strict";ny(),oy(),iD="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",$O=class VO{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",o=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield ry(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,o,a);return new VO(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(iD)})}typeNarrowingForRunStep(e,r,n,o,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof Mn||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof Mn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let i of o){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);u[i]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(o);for(let f of r)if(c.indexOf(f)!==-1){let d=o[f];(d===null||d instanceof Mn)&&(i=!0,l=!1,u[f]=d)}if(i){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of e)if(typeof n[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(l)for(let i of r)u[i]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let o=e[n];o instanceof Mn?r[n]=o:r[n]=new Mn(o.type,o.data,o.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[o,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[o,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),jO,NU=ee(()=>{"use strict";MU(),jO=$O}),UO={};_O(UO,{InferenceSession:()=>BO,TRACE:()=>x1,TRACE_FUNC_BEGIN:()=>kd,TRACE_FUNC_END:()=>Ld,Tensor:()=>Mn,TrainingSession:()=>jO,env:()=>Fr,registerBackend:()=>ty});var Ha=ee(()=>{"use strict";_U(),TU(),OU(),oy(),FO(),PU(),NU()});function ja(t,e,r,n){if(e===void 0)return RU(t);if(r===void 0)Cd(t,e,1);else if(typeof r=="number"&&n===void 0)Cd(t,e,r);else if(typeof r=="string"&&n===void 0)Cd(t,r,1,e);else if(typeof r=="string"&&typeof n=="number")Cd(t,r,n,e);else throw new TypeError("input is valid")}function RU(t){return{verbose:ja.verbose.bind(null,t),info:ja.info.bind(null,t),warning:ja.warning.bind(null,t),error:ja.error.bind(null,t),fatal:ja.fatal.bind(null,t)}}function Cd(t,e,r,n){let o=Ys[n||""]||Ys[""];_1[t]<_1[o.minimalSeverity]||(o.logDateTime&&(e=`${new Date().toISOString()}|${e}`),o.logSourceLocation,HO[o.provider].log(t,e,n))}var oD,aD,_1,HO,Gm,Ys,ur,Wm,qm,zO,uc,wi=ee(()=>{"use strict";oD=class{log(t,e,r){}},aD=class{log(t,e,r){console.log(`${this.color(t)} ${r?"\x1B[35m"+r+"\x1B[0m ":""}${e}`)}color(t){switch(t){case"verbose":return"\x1B[34;40mv\x1B[0m";case"info":return"\x1B[32mi\x1B[0m";case"warning":return"\x1B[30;43mw\x1B[0m";case"error":return"\x1B[31;40me\x1B[0m";case"fatal":return"\x1B[101mf\x1B[0m";default:throw new Error(`unsupported severity: ${t}`)}}},_1={verbose:1e3,info:2e3,warning:4e3,error:5e3,fatal:6e3},HO={none:new oD,console:new aD},Gm={provider:"console",minimalSeverity:"warning",logDateTime:!0,logSourceLocation:!1},Ys={"":Gm},(t=>{function e(i,c){t("verbose",i,c)}t.verbose=e;function r(i,c){t("info",i,c)}t.info=r;function n(i,c){t("warning",i,c)}t.warning=n;function o(i,c){t("error",i,c)}t.error=o;function a(i,c){t("fatal",i,c)}t.fatal=a;function u(i){Ys={},s("",i||{})}t.reset=u;function s(i,c){if(i==="*")u(c);else{let f=Ys[i]||Gm;Ys[i]={provider:c.provider||f.provider,minimalSeverity:c.minimalSeverity||f.minimalSeverity,logDateTime:c.logDateTime===void 0?f.logDateTime:c.logDateTime,logSourceLocation:c.logSourceLocation===void 0?f.logSourceLocation:c.logSourceLocation}}}t.set=s;function l(i){let c={};i.logLevel&&(c.minimalSeverity=i.logLevel),s("",c)}t.setWithEnv=l})(ja||={}),ur=ja,Wm=class{constructor(t,e,r,n,o,a){this.category=t,this.name=e,this.startTime=r,this.endCallback=n,this.timer=o,this.ctx=a}end(){return U(this,null,function*(){return this.endCallback(this)})}checkTimer(){return U(this,null,function*(){if(this.ctx===void 0||this.timer===void 0)throw new Error("No webgl timer found");return this.ctx.endTimer(),this.ctx.waitForQueryAndGetTime(this.timer)})}},qm=class{constructor(t,e,r,n){this.category=t,this.name=e,this.startTime=r,this.endTime=n}},zO=class{constructor(t,e,r){this._started=!1,this._flushPointer=0,this._started=!1,this._maxNumberEvents=t===void 0?1e4:t,this._flushBatchSize=e===void 0?10:e,this._flushIntervalInMilliseconds=r===void 0?5e3:r}static create(t){return t===void 0?new this:new this(t.maxNumberEvents,t.flushBatchSize,t.flushIntervalInMilliseconds)}start(){this._started=!0,this._timingEvents=[],this._flushTime=uc(),this._flushPointer=0}stop(){for(this._started=!1;this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer])}event(t,e,r,n){let o=this._started?this.begin(t,e,n):void 0,a=!1,u=r();if(u&&typeof u.then=="function")return a=!0,new Promise((s,l)=>{u.then(i=>U(this,null,function*(){o&&(yield o.end()),s(i)}),i=>U(this,null,function*(){o&&(yield o.end()),l(i)}))});if(!a&&o){let s=o.end();if(s&&typeof s.then=="function")return new Promise((l,i)=>{s.then(()=>{l(u)},c=>{i(c)})})}return u}begin(t,e,r){if(!this._started)throw new Error("profiler is not started yet");if(r===void 0){let n=uc();return this.flush(n),new Wm(t,e,n,o=>this.endSync(o))}else{let n=r.beginTimer();return new Wm(t,e,0,o=>U(this,null,function*(){return this.end(o)}),n,r)}}end(t){return U(this,null,function*(){let e=yield t.checkTimer();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new qm(t.category,t.name,t.startTime,e)),this.flush(e))})}endSync(t){let e=uc();this._timingEvents.length<this._maxNumberEvents&&(this._timingEvents.push(new qm(t.category,t.name,t.startTime,e)),this.flush(e))}logOneEvent(t){ur.verbose(`Profiler.${t.category}`,`${(t.endTime-t.startTime).toFixed(2)}ms on event '${t.name}' at ${t.endTime.toFixed(2)}`)}flush(t){if(this._timingEvents.length-this._flushPointer>=this._flushBatchSize||t-this._flushTime>=this._flushIntervalInMilliseconds){for(let e=this._flushPointer;this._flushPointer<e+this._flushBatchSize&&this._flushPointer<this._timingEvents.length;this._flushPointer++)this.logOneEvent(this._timingEvents[this._flushPointer]);this._flushTime=uc()}}get started(){return this._started}},uc=typeof performance<"u"&&performance.now?()=>performance.now():Date.now});function FU(t,e,r){for(let n of r){let o=n[0],a=n[1],u=n[2],s=n[3],l=n[4];if(t.opType===o){for(let i of e)if((i.domain===a||i.domain==="ai.onnx"&&a==="")&&kU(i.version,u))return{opImpl:s,opInit:l}}}throw new TypeError(`cannot resolve operator '${t.opType}' with opsets: ${e.map(n=>`${n.domain||"ai.onnx"} v${n.version}`).join(", ")}`)}function kU(t,e){if(e.endsWith("+")){let r=Number.parseInt(e.substring(0,e.length-1),10);return!isNaN(r)&&r<=t}else if(e.split("-").length===2){let r=e.split("-"),n=Number.parseInt(r[0],10),o=Number.parseInt(r[1],10);return!isNaN(n)&&!isNaN(o)&&n<=t&&t<=o}else return Number.parseInt(e,10)===t}var LU=ee(()=>{"use strict"}),BU=vr(t=>{"use strict";t.__esModule=!0;var e=function(){function r(n){if(!n)throw new TypeError("Invalid argument; `value` has no value.");this.value=r.EMPTY,n&&r.isGuid(n)&&(this.value=n)}return r.isGuid=function(n){var o=n.toString();return n&&(n instanceof r||r.validator.test(o))},r.create=function(){return new r([r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-"))},r.createEmpty=function(){return new r("emptyguid")},r.parse=function(n){return new r(n)},r.raw=function(){return[r.gen(2),r.gen(1),r.gen(1),r.gen(1),r.gen(3)].join("-")},r.gen=function(n){for(var o="",a=0;a<n;a++)o+=((1+Math.random())*65536|0).toString(16).substring(1);return o},r.prototype.equals=function(n){return r.isGuid(n)&&this.value===n.toString()},r.prototype.isEmpty=function(){return this.value===r.EMPTY},r.prototype.toString=function(){return this.value},r.prototype.toJSON=function(){return{value:this.value}},r.validator=new RegExp("^[a-z0-9]{8}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{4}-[a-z0-9]{12}$","i"),r.EMPTY="00000000-0000-0000-0000-000000000000",r}();t.Guid=e});function Ht(t,e,r){this.low=t|0,this.high=e|0,this.unsigned=!!r}function Yr(t){return(t&&t.__isLong__)===!0}function sD(t){var e=Math.clz32(t&-t);return t?31-e:e}function Ba(t,e){var r,n,o;return e?(t>>>=0,(o=0<=t&&t<256)&&(n=T1[t],n)?n:(r=at(t,0,!0),o&&(T1[t]=r),r)):(t|=0,(o=-128<=t&&t<128)&&(n=E1[t],n)?n:(r=at(t,t<0?-1:0,!1),o&&(E1[t]=r),r))}function zn(t,e){if(isNaN(t))return e?ki:Hn;if(e){if(t<0)return ki;if(t>=I1)return D1}else{if(t<=-A1)return sn;if(t+1>=A1)return S1}return t<0?zn(-t,e).neg():at(t%Ua|0,t/Ua|0,e)}function at(t,e,r){return new Ht(t,e,r)}function ay(t,e,r){if(t.length===0)throw Error("empty string");if(typeof e=="number"?(r=e,e=!1):e=!!e,t==="NaN"||t==="Infinity"||t==="+Infinity"||t==="-Infinity")return e?ki:Hn;if(r=r||10,r<2||36<r)throw RangeError("radix");var n;if((n=t.indexOf("-"))>0)throw Error("interior hyphen");if(n===0)return ay(t.substring(1),e,r).neg();for(var o=zn(_c(r,8)),a=Hn,u=0;u<t.length;u+=8){var s=Math.min(8,t.length-u),l=parseInt(t.substring(u,u+s),r);if(s<8){var i=zn(_c(r,s));a=a.mul(i).add(zn(l))}else a=a.mul(o),a=a.add(zn(l))}return a.unsigned=e,a}function vi(t,e){return typeof t=="number"?zn(t,e):typeof t=="string"?ay(t,e):at(t.low,t.high,typeof e=="boolean"?e:t.unsigned)}var Dn,E1,T1,_c,Xm,uD,Ua,I1,A1,Ym,Hn,ki,$a,Zm,Od,S1,D1,sn,ie,Wo,GO=ee(()=>{Dn=null;try{Dn=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}Ht.prototype.__isLong__,Object.defineProperty(Ht.prototype,"__isLong__",{value:!0}),Ht.isLong=Yr,E1={},T1={},Ht.fromInt=Ba,Ht.fromNumber=zn,Ht.fromBits=at,_c=Math.pow,Ht.fromString=ay,Ht.fromValue=vi,Xm=65536,uD=1<<24,Ua=Xm*Xm,I1=Ua*Ua,A1=I1/2,Ym=Ba(uD),Hn=Ba(0),Ht.ZERO=Hn,ki=Ba(0,!0),Ht.UZERO=ki,$a=Ba(1),Ht.ONE=$a,Zm=Ba(1,!0),Ht.UONE=Zm,Od=Ba(-1),Ht.NEG_ONE=Od,S1=at(-1,2147483647,!1),Ht.MAX_VALUE=S1,D1=at(-1,-1,!0),Ht.MAX_UNSIGNED_VALUE=D1,sn=at(0,-2147483648,!1),Ht.MIN_VALUE=sn,ie=Ht.prototype,ie.toInt=function(){return this.unsigned?this.low>>>0:this.low},ie.toNumber=function(){return this.unsigned?(this.high>>>0)*Ua+(this.low>>>0):this.high*Ua+(this.low>>>0)},ie.toString=function(t){if(t=t||10,t<2||36<t)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(sn)){var e=zn(t),r=this.div(e),n=r.mul(e).sub(this);return r.toString(t)+n.toInt().toString(t)}else return"-"+this.neg().toString(t);for(var o=zn(_c(t,6),this.unsigned),a=this,u="";;){var s=a.div(o),l=a.sub(s.mul(o)).toInt()>>>0,i=l.toString(t);if(a=s,a.isZero())return i+u;for(;i.length<6;)i="0"+i;u=""+i+u}},ie.getHighBits=function(){return this.high},ie.getHighBitsUnsigned=function(){return this.high>>>0},ie.getLowBits=function(){return this.low},ie.getLowBitsUnsigned=function(){return this.low>>>0},ie.getNumBitsAbs=function(){if(this.isNegative())return this.eq(sn)?64:this.neg().getNumBitsAbs();for(var t=this.high!=0?this.high:this.low,e=31;e>0&&!(t&1<<e);e--);return this.high!=0?e+33:e+1},ie.isZero=function(){return this.high===0&&this.low===0},ie.eqz=ie.isZero,ie.isNegative=function(){return!this.unsigned&&this.high<0},ie.isPositive=function(){return this.unsigned||this.high>=0},ie.isOdd=function(){return(this.low&1)===1},ie.isEven=function(){return(this.low&1)===0},ie.equals=function(t){return Yr(t)||(t=vi(t)),this.unsigned!==t.unsigned&&this.high>>>31===1&&t.high>>>31===1?!1:this.high===t.high&&this.low===t.low},ie.eq=ie.equals,ie.notEquals=function(t){return!this.eq(t)},ie.neq=ie.notEquals,ie.ne=ie.notEquals,ie.lessThan=function(t){return this.comp(t)<0},ie.lt=ie.lessThan,ie.lessThanOrEqual=function(t){return this.comp(t)<=0},ie.lte=ie.lessThanOrEqual,ie.le=ie.lessThanOrEqual,ie.greaterThan=function(t){return this.comp(t)>0},ie.gt=ie.greaterThan,ie.greaterThanOrEqual=function(t){return this.comp(t)>=0},ie.gte=ie.greaterThanOrEqual,ie.ge=ie.greaterThanOrEqual,ie.compare=function(t){if(Yr(t)||(t=vi(t)),this.eq(t))return 0;var e=this.isNegative(),r=t.isNegative();return e&&!r?-1:!e&&r?1:this.unsigned?t.high>>>0>this.high>>>0||t.high===this.high&&t.low>>>0>this.low>>>0?-1:1:this.sub(t).isNegative()?-1:1},ie.comp=ie.compare,ie.negate=function(){return!this.unsigned&&this.eq(sn)?sn:this.not().add($a)},ie.neg=ie.negate,ie.add=function(t){Yr(t)||(t=vi(t));var e=this.high>>>16,r=this.high&65535,n=this.low>>>16,o=this.low&65535,a=t.high>>>16,u=t.high&65535,s=t.low>>>16,l=t.low&65535,i=0,c=0,f=0,d=0;return d+=o+l,f+=d>>>16,d&=65535,f+=n+s,c+=f>>>16,f&=65535,c+=r+u,i+=c>>>16,c&=65535,i+=e+a,i&=65535,at(f<<16|d,i<<16|c,this.unsigned)},ie.subtract=function(t){return Yr(t)||(t=vi(t)),this.add(t.neg())},ie.sub=ie.subtract,ie.multiply=function(t){if(this.isZero())return this;if(Yr(t)||(t=vi(t)),Dn){var e=Dn.mul(this.low,this.high,t.low,t.high);return at(e,Dn.get_high(),this.unsigned)}if(t.isZero())return this.unsigned?ki:Hn;if(this.eq(sn))return t.isOdd()?sn:Hn;if(t.eq(sn))return this.isOdd()?sn:Hn;if(this.isNegative())return t.isNegative()?this.neg().mul(t.neg()):this.neg().mul(t).neg();if(t.isNegative())return this.mul(t.neg()).neg();if(this.lt(Ym)&&t.lt(Ym))return zn(this.toNumber()*t.toNumber(),this.unsigned);var r=this.high>>>16,n=this.high&65535,o=this.low>>>16,a=this.low&65535,u=t.high>>>16,s=t.high&65535,l=t.low>>>16,i=t.low&65535,c=0,f=0,d=0,h=0;return h+=a*i,d+=h>>>16,h&=65535,d+=o*i,f+=d>>>16,d&=65535,d+=a*l,f+=d>>>16,d&=65535,f+=n*i,c+=f>>>16,f&=65535,f+=o*l,c+=f>>>16,f&=65535,f+=a*s,c+=f>>>16,f&=65535,c+=r*i+n*l+o*s+a*u,c&=65535,at(d<<16|h,c<<16|f,this.unsigned)},ie.mul=ie.multiply,ie.divide=function(t){if(Yr(t)||(t=vi(t)),t.isZero())throw Error("division by zero");if(Dn){if(!this.unsigned&&this.high===-2147483648&&t.low===-1&&t.high===-1)return this;var e=(this.unsigned?Dn.div_u:Dn.div_s)(this.low,this.high,t.low,t.high);return at(e,Dn.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?ki:Hn;var r,n,o;if(this.unsigned){if(t.unsigned||(t=t.toUnsigned()),t.gt(this))return ki;if(t.gt(this.shru(1)))return Zm;o=ki}else{if(this.eq(sn)){if(t.eq($a)||t.eq(Od))return sn;if(t.eq(sn))return $a;var a=this.shr(1);return r=a.div(t).shl(1),r.eq(Hn)?t.isNegative()?$a:Od:(n=this.sub(t.mul(r)),o=r.add(n.div(t)),o)}else if(t.eq(sn))return this.unsigned?ki:Hn;if(this.isNegative())return t.isNegative()?this.neg().div(t.neg()):this.neg().div(t).neg();if(t.isNegative())return this.div(t.neg()).neg();o=Hn}for(n=this;n.gte(t);){r=Math.max(1,Math.floor(n.toNumber()/t.toNumber()));for(var u=Math.ceil(Math.log(r)/Math.LN2),s=u<=48?1:_c(2,u-48),l=zn(r),i=l.mul(t);i.isNegative()||i.gt(n);)r-=s,l=zn(r,this.unsigned),i=l.mul(t);l.isZero()&&(l=$a),o=o.add(l),n=n.sub(i)}return o},ie.div=ie.divide,ie.modulo=function(t){if(Yr(t)||(t=vi(t)),Dn){var e=(this.unsigned?Dn.rem_u:Dn.rem_s)(this.low,this.high,t.low,t.high);return at(e,Dn.get_high(),this.unsigned)}return this.sub(this.div(t).mul(t))},ie.mod=ie.modulo,ie.rem=ie.modulo,ie.not=function(){return at(~this.low,~this.high,this.unsigned)},ie.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},ie.clz=ie.countLeadingZeros,ie.countTrailingZeros=function(){return this.low?sD(this.low):sD(this.high)+32},ie.ctz=ie.countTrailingZeros,ie.and=function(t){return Yr(t)||(t=vi(t)),at(this.low&t.low,this.high&t.high,this.unsigned)},ie.or=function(t){return Yr(t)||(t=vi(t)),at(this.low|t.low,this.high|t.high,this.unsigned)},ie.xor=function(t){return Yr(t)||(t=vi(t)),at(this.low^t.low,this.high^t.high,this.unsigned)},ie.shiftLeft=function(t){return Yr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?at(this.low<<t,this.high<<t|this.low>>>32-t,this.unsigned):at(0,this.low<<t-32,this.unsigned)},ie.shl=ie.shiftLeft,ie.shiftRight=function(t){return Yr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?at(this.low>>>t|this.high<<32-t,this.high>>t,this.unsigned):at(this.high>>t-32,this.high>=0?0:-1,this.unsigned)},ie.shr=ie.shiftRight,ie.shiftRightUnsigned=function(t){return Yr(t)&&(t=t.toInt()),(t&=63)===0?this:t<32?at(this.low>>>t|this.high<<32-t,this.high>>>t,this.unsigned):t===32?at(this.high,0,this.unsigned):at(this.high>>>t-32,0,this.unsigned)},ie.shru=ie.shiftRightUnsigned,ie.shr_u=ie.shiftRightUnsigned,ie.rotateLeft=function(t){var e;return Yr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?at(this.high,this.low,this.unsigned):t<32?(e=32-t,at(this.low<<t|this.high>>>e,this.high<<t|this.low>>>e,this.unsigned)):(t-=32,e=32-t,at(this.high<<t|this.low>>>e,this.low<<t|this.high>>>e,this.unsigned))},ie.rotl=ie.rotateLeft,ie.rotateRight=function(t){var e;return Yr(t)&&(t=t.toInt()),(t&=63)===0?this:t===32?at(this.high,this.low,this.unsigned):t<32?(e=32-t,at(this.high<<e|this.low>>>t,this.low<<e|this.high>>>t,this.unsigned)):(t-=32,e=32-t,at(this.low<<e|this.high>>>t,this.high<<e|this.low>>>t,this.unsigned))},ie.rotr=ie.rotateRight,ie.toSigned=function(){return this.unsigned?at(this.low,this.high,!1):this},ie.toUnsigned=function(){return this.unsigned?this:at(this.low,this.high,!0)},ie.toBytes=function(t){return t?this.toBytesLE():this.toBytesBE()},ie.toBytesLE=function(){var t=this.high,e=this.low;return[e&255,e>>>8&255,e>>>16&255,e>>>24,t&255,t>>>8&255,t>>>16&255,t>>>24]},ie.toBytesBE=function(){var t=this.high,e=this.low;return[t>>>24,t>>>16&255,t>>>8&255,t&255,e>>>24,e>>>16&255,e>>>8&255,e&255]},Ht.fromBytes=function(t,e,r){return r?Ht.fromBytesLE(t,e):Ht.fromBytesBE(t,e)},Ht.fromBytesLE=function(t,e){return new Ht(t[0]|t[1]<<8|t[2]<<16|t[3]<<24,t[4]|t[5]<<8|t[6]<<16|t[7]<<24,e)},Ht.fromBytesBE=function(t,e){return new Ht(t[4]<<24|t[5]<<16|t[6]<<8|t[7],t[0]<<24|t[1]<<16|t[2]<<8|t[3],e)},Wo=Ht}),$,sy=ee(()=>{$={},$.Offset,$.Table,$.SIZEOF_SHORT=2,$.SIZEOF_INT=4,$.FILE_IDENTIFIER_LENGTH=4,$.SIZE_PREFIX_LENGTH=4,$.Encoding={UTF8_BYTES:1,UTF16_STRING:2},$.int32=new Int32Array(2),$.float32=new Float32Array($.int32.buffer),$.float64=new Float64Array($.int32.buffer),$.isLittleEndian=new Uint16Array(new Uint8Array([1,0]).buffer)[0]===1,$.Long=function(t,e){this.low=t|0,this.high=e|0},$.Long.create=function(t,e){return t==0&&e==0?$.Long.ZERO:new $.Long(t,e)},$.Long.prototype.toFloat64=function(){return(this.low>>>0)+this.high*4294967296},$.Long.prototype.equals=function(t){return this.low==t.low&&this.high==t.high},$.Long.ZERO=new $.Long(0,0),$.Builder=function(t){if(t)var e=t;else var e=1024;this.bb=$.ByteBuffer.allocate(e),this.space=e,this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},$.Builder.prototype.clear=function(){this.bb.clear(),this.space=this.bb.capacity(),this.minalign=1,this.vtable=null,this.vtable_in_use=0,this.isNested=!1,this.object_start=0,this.vtables=[],this.vector_num_elems=0,this.force_defaults=!1},$.Builder.prototype.forceDefaults=function(t){this.force_defaults=t},$.Builder.prototype.dataBuffer=function(){return this.bb},$.Builder.prototype.asUint8Array=function(){return this.bb.bytes().subarray(this.bb.position(),this.bb.position()+this.offset())},$.Builder.prototype.prep=function(t,e){t>this.minalign&&(this.minalign=t);for(var r=~(this.bb.capacity()-this.space+e)+1&t-1;this.space<r+t+e;){var n=this.bb.capacity();this.bb=$.Builder.growByteBuffer(this.bb),this.space+=this.bb.capacity()-n}this.pad(r)},$.Builder.prototype.pad=function(t){for(var e=0;e<t;e++)this.bb.writeInt8(--this.space,0)},$.Builder.prototype.writeInt8=function(t){this.bb.writeInt8(this.space-=1,t)},$.Builder.prototype.writeInt16=function(t){this.bb.writeInt16(this.space-=2,t)},$.Builder.prototype.writeInt32=function(t){this.bb.writeInt32(this.space-=4,t)},$.Builder.prototype.writeInt64=function(t){this.bb.writeInt64(this.space-=8,t)},$.Builder.prototype.writeFloat32=function(t){this.bb.writeFloat32(this.space-=4,t)},$.Builder.prototype.writeFloat64=function(t){this.bb.writeFloat64(this.space-=8,t)},$.Builder.prototype.addInt8=function(t){this.prep(1,0),this.writeInt8(t)},$.Builder.prototype.addInt16=function(t){this.prep(2,0),this.writeInt16(t)},$.Builder.prototype.addInt32=function(t){this.prep(4,0),this.writeInt32(t)},$.Builder.prototype.addInt64=function(t){this.prep(8,0),this.writeInt64(t)},$.Builder.prototype.addFloat32=function(t){this.prep(4,0),this.writeFloat32(t)},$.Builder.prototype.addFloat64=function(t){this.prep(8,0),this.writeFloat64(t)},$.Builder.prototype.addFieldInt8=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt8(e),this.slot(t))},$.Builder.prototype.addFieldInt16=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt16(e),this.slot(t))},$.Builder.prototype.addFieldInt32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addInt32(e),this.slot(t))},$.Builder.prototype.addFieldInt64=function(t,e,r){(this.force_defaults||!e.equals(r))&&(this.addInt64(e),this.slot(t))},$.Builder.prototype.addFieldFloat32=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat32(e),this.slot(t))},$.Builder.prototype.addFieldFloat64=function(t,e,r){(this.force_defaults||e!=r)&&(this.addFloat64(e),this.slot(t))},$.Builder.prototype.addFieldOffset=function(t,e,r){(this.force_defaults||e!=r)&&(this.addOffset(e),this.slot(t))},$.Builder.prototype.addFieldStruct=function(t,e,r){e!=r&&(this.nested(e),this.slot(t))},$.Builder.prototype.nested=function(t){if(t!=this.offset())throw new Error("FlatBuffers: struct must be serialized inline.")},$.Builder.prototype.notNested=function(){if(this.isNested)throw new Error("FlatBuffers: object serialization must not be nested.")},$.Builder.prototype.slot=function(t){this.vtable[t]=this.offset()},$.Builder.prototype.offset=function(){return this.bb.capacity()-this.space},$.Builder.growByteBuffer=function(t){var e=t.capacity();if(e&3221225472)throw new Error("FlatBuffers: cannot grow buffer beyond 2 gigabytes.");var r=e<<1,n=$.ByteBuffer.allocate(r);return n.setPosition(r-e),n.bytes().set(t.bytes(),r-e),n},$.Builder.prototype.addOffset=function(t){this.prep($.SIZEOF_INT,0),this.writeInt32(this.offset()-t+$.SIZEOF_INT)},$.Builder.prototype.startObject=function(t){this.notNested(),this.vtable==null&&(this.vtable=[]),this.vtable_in_use=t;for(var e=0;e<t;e++)this.vtable[e]=0;this.isNested=!0,this.object_start=this.offset()},$.Builder.prototype.endObject=function(){if(this.vtable==null||!this.isNested)throw new Error("FlatBuffers: endObject called without startObject");this.addInt32(0);for(var t=this.offset(),e=this.vtable_in_use-1;e>=0&&this.vtable[e]==0;e--);for(var r=e+1;e>=0;e--)this.addInt16(this.vtable[e]!=0?t-this.vtable[e]:0);var n=2;this.addInt16(t-this.object_start);var o=(r+n)*$.SIZEOF_SHORT;this.addInt16(o);var a=0,u=this.space;e:for(e=0;e<this.vtables.length;e++){var s=this.bb.capacity()-this.vtables[e];if(o==this.bb.readInt16(s)){for(var l=$.SIZEOF_SHORT;l<o;l+=$.SIZEOF_SHORT)if(this.bb.readInt16(u+l)!=this.bb.readInt16(s+l))continue e;a=this.vtables[e];break}}return a?(this.space=this.bb.capacity()-t,this.bb.writeInt32(this.space,a-t)):(this.vtables.push(this.offset()),this.bb.writeInt32(this.bb.capacity()-t,this.offset()-t)),this.isNested=!1,t},$.Builder.prototype.finish=function(t,e,r){var n=r?$.SIZE_PREFIX_LENGTH:0;if(e){var o=e;if(this.prep(this.minalign,$.SIZEOF_INT+$.FILE_IDENTIFIER_LENGTH+n),o.length!=$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+$.FILE_IDENTIFIER_LENGTH);for(var a=$.FILE_IDENTIFIER_LENGTH-1;a>=0;a--)this.writeInt8(o.charCodeAt(a))}this.prep(this.minalign,$.SIZEOF_INT+n),this.addOffset(t),n&&this.addInt32(this.bb.capacity()-this.space),this.bb.setPosition(this.space)},$.Builder.prototype.finishSizePrefixed=function(t,e){this.finish(t,e,!0)},$.Builder.prototype.requiredField=function(t,e){var r=this.bb.capacity()-t,n=r-this.bb.readInt32(r),o=this.bb.readInt16(n+e)!=0;if(!o)throw new Error("FlatBuffers: field "+e+" must be set")},$.Builder.prototype.startVector=function(t,e,r){this.notNested(),this.vector_num_elems=e,this.prep($.SIZEOF_INT,t*e),this.prep(r,t*e)},$.Builder.prototype.endVector=function(){return this.writeInt32(this.vector_num_elems),this.offset()},$.Builder.prototype.createString=function(t){if(t instanceof Uint8Array)var e=t;else for(var e=[],r=0;r<t.length;){var n,o=t.charCodeAt(r++);if(o<55296||o>=56320)n=o;else{var a=t.charCodeAt(r++);n=(o<<10)+a+-56613888}n<128?e.push(n):(n<2048?e.push(n>>6&31|192):(n<65536?e.push(n>>12&15|224):e.push(n>>18&7|240,n>>12&63|128),e.push(n>>6&63|128)),e.push(n&63|128))}this.addInt8(0),this.startVector(1,e.length,1),this.bb.setPosition(this.space-=e.length);for(var r=0,u=this.space,s=this.bb.bytes();r<e.length;r++)s[u++]=e[r];return this.endVector()},$.Builder.prototype.createLong=function(t,e){return $.Long.create(t,e)},$.ByteBuffer=function(t){this.bytes_=t,this.position_=0},$.ByteBuffer.allocate=function(t){return new $.ByteBuffer(new Uint8Array(t))},$.ByteBuffer.prototype.clear=function(){this.position_=0},$.ByteBuffer.prototype.bytes=function(){return this.bytes_},$.ByteBuffer.prototype.position=function(){return this.position_},$.ByteBuffer.prototype.setPosition=function(t){this.position_=t},$.ByteBuffer.prototype.capacity=function(){return this.bytes_.length},$.ByteBuffer.prototype.readInt8=function(t){return this.readUint8(t)<<24>>24},$.ByteBuffer.prototype.readUint8=function(t){return this.bytes_[t]},$.ByteBuffer.prototype.readInt16=function(t){return this.readUint16(t)<<16>>16},$.ByteBuffer.prototype.readUint16=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8},$.ByteBuffer.prototype.readInt32=function(t){return this.bytes_[t]|this.bytes_[t+1]<<8|this.bytes_[t+2]<<16|this.bytes_[t+3]<<24},$.ByteBuffer.prototype.readUint32=function(t){return this.readInt32(t)>>>0},$.ByteBuffer.prototype.readInt64=function(t){return new $.Long(this.readInt32(t),this.readInt32(t+4))},$.ByteBuffer.prototype.readUint64=function(t){return new $.Long(this.readUint32(t),this.readUint32(t+4))},$.ByteBuffer.prototype.readFloat32=function(t){return $.int32[0]=this.readInt32(t),$.float32[0]},$.ByteBuffer.prototype.readFloat64=function(t){return $.int32[$.isLittleEndian?0:1]=this.readInt32(t),$.int32[$.isLittleEndian?1:0]=this.readInt32(t+4),$.float64[0]},$.ByteBuffer.prototype.writeInt8=function(t,e){this.bytes_[t]=e},$.ByteBuffer.prototype.writeUint8=function(t,e){this.bytes_[t]=e},$.ByteBuffer.prototype.writeInt16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},$.ByteBuffer.prototype.writeUint16=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8},$.ByteBuffer.prototype.writeInt32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},$.ByteBuffer.prototype.writeUint32=function(t,e){this.bytes_[t]=e,this.bytes_[t+1]=e>>8,this.bytes_[t+2]=e>>16,this.bytes_[t+3]=e>>24},$.ByteBuffer.prototype.writeInt64=function(t,e){this.writeInt32(t,e.low),this.writeInt32(t+4,e.high)},$.ByteBuffer.prototype.writeUint64=function(t,e){this.writeUint32(t,e.low),this.writeUint32(t+4,e.high)},$.ByteBuffer.prototype.writeFloat32=function(t,e){$.float32[0]=e,this.writeInt32(t,$.int32[0])},$.ByteBuffer.prototype.writeFloat64=function(t,e){$.float64[0]=e,this.writeInt32(t,$.int32[$.isLittleEndian?0:1]),this.writeInt32(t+4,$.int32[$.isLittleEndian?1:0])},$.ByteBuffer.prototype.getBufferIdentifier=function(){if(this.bytes_.length<this.position_+$.SIZEOF_INT+$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: ByteBuffer is too short to contain an identifier.");for(var t="",e=0;e<$.FILE_IDENTIFIER_LENGTH;e++)t+=String.fromCharCode(this.readInt8(this.position_+$.SIZEOF_INT+e));return t},$.ByteBuffer.prototype.__offset=function(t,e){var r=t-this.readInt32(t);return e<this.readInt16(r)?this.readInt16(r+e):0},$.ByteBuffer.prototype.__union=function(t,e){return t.bb_pos=e+this.readInt32(e),t.bb=this,t},$.ByteBuffer.prototype.__string=function(t,e){t+=this.readInt32(t);var r=this.readInt32(t),n="",o=0;if(t+=$.SIZEOF_INT,e===$.Encoding.UTF8_BYTES)return this.bytes_.subarray(t,t+r);for(;o<r;){var a,u=this.readUint8(t+o++);if(u<192)a=u;else{var s=this.readUint8(t+o++);if(u<224)a=(u&31)<<6|s&63;else{var l=this.readUint8(t+o++);if(u<240)a=(u&15)<<12|(s&63)<<6|l&63;else{var i=this.readUint8(t+o++);a=(u&7)<<18|(s&63)<<12|(l&63)<<6|i&63}}}a<65536?n+=String.fromCharCode(a):(a-=65536,n+=String.fromCharCode((a>>10)+55296,(a&1023)+56320))}return n},$.ByteBuffer.prototype.__indirect=function(t){return t+this.readInt32(t)},$.ByteBuffer.prototype.__vector=function(t){return t+this.readInt32(t)+$.SIZEOF_INT},$.ByteBuffer.prototype.__vector_len=function(t){return this.readInt32(t+this.readInt32(t))},$.ByteBuffer.prototype.__has_identifier=function(t){if(t.length!=$.FILE_IDENTIFIER_LENGTH)throw new Error("FlatBuffers: file identifier must be length "+$.FILE_IDENTIFIER_LENGTH);for(var e=0;e<$.FILE_IDENTIFIER_LENGTH;e++)if(t.charCodeAt(e)!=this.readInt8(this.position_+$.SIZEOF_INT+e))return!1;return!0},$.ByteBuffer.prototype.createLong=function(t,e){return $.Long.create(t,e)}}),bt,Hd=ee(()=>{"use strict";sy(),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.INT=2]="INT",u[u.STRING=3]="STRING",u[u.TENSOR=4]="TENSOR",u[u.GRAPH=5]="GRAPH",u[u.FLOATS=6]="FLOATS",u[u.INTS=7]="INTS",u[u.STRINGS=8]="STRINGS",u[u.TENSORS=9]="TENSORS",u[u.GRAPHS=10]="GRAPHS",u[u.SPARSE_TENSOR=11]="SPARSE_TENSOR",u[u.SPARSE_TENSORS=12]="SPARSE_TENSORS"))(a=o.AttributeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNKNOWN=0]="UNKNOWN",u[u.VALUE=1]="VALUE",u[u.PARAM=2]="PARAM"))(a=o.DimensionValueType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.UNDEFINED=0]="UNDEFINED",u[u.FLOAT=1]="FLOAT",u[u.UINT8=2]="UINT8",u[u.INT8=3]="INT8",u[u.UINT16=4]="UINT16",u[u.INT16=5]="INT16",u[u.INT32=6]="INT32",u[u.INT64=7]="INT64",u[u.STRING=8]="STRING",u[u.BOOL=9]="BOOL",u[u.FLOAT16=10]="FLOAT16",u[u.DOUBLE=11]="DOUBLE",u[u.UINT32=12]="UINT32",u[u.UINT64=13]="UINT64",u[u.COMPLEX64=14]="COMPLEX64",u[u.COMPLEX128=15]="COMPLEX128",u[u.BFLOAT16=16]="BFLOAT16",u[u.FLOAT8E4M3FN=17]="FLOAT8E4M3FN",u[u.FLOAT8E4M3FNUZ=18]="FLOAT8E4M3FNUZ",u[u.FLOAT8E5M2=19]="FLOAT8E5M2",u[u.FLOAT8E5M2FNUZ=20]="FLOAT8E5M2FNUZ"))(a=o.TensorDataType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.Primitive=0]="Primitive",u[u.Fused=1]="Fused"))(a=o.NodeType||={})})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{let a;(u=>(u[u.NONE=0]="NONE",u[u.tensor_type=1]="tensor_type",u[u.sequence_type=2]="sequence_type",u[u.map_type=3]="map_type"))(a=o.TypeInfoValue||={})})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsShape(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dim(s,l){let i=this.bb.__offset(this.bb_pos,4);return i?(l||new t.experimental.fbs.Dimension).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}dimLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}static startShape(s){s.startObject(1)}static addDim(s,l){s.addFieldOffset(0,l,0)}static createDimVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startDimVector(s,l){s.startVector(4,l,4)}static endShape(s){return s.endObject()}static createShape(s,l){return a.startShape(s),a.addDim(s,l),a.endShape(s)}}o.Shape=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimension(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimension(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}value(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.DimensionValue).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}denotation(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimension(s){s.startObject(2)}static addValue(s,l){s.addFieldOffset(0,l,0)}static addDenotation(s,l){s.addFieldOffset(1,l,0)}static endDimension(s){return s.endObject()}static createDimension(s,l,i){return a.startDimension(s),a.addValue(s,l),a.addDenotation(s,i),a.endDimension(s)}}o.Dimension=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsDimensionValue(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsDimensionValue(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}dimType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt8(this.bb_pos+s):0}dimValue(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}dimParam(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}static startDimensionValue(s){s.startObject(3)}static addDimType(s,l){s.addFieldInt8(0,l,0)}static addDimValue(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static addDimParam(s,l){s.addFieldOffset(2,l,0)}static endDimensionValue(s){return s.endObject()}static createDimensionValue(s,l,i,c){return a.startDimensionValue(s),a.addDimType(s,l),a.addDimValue(s,i),a.addDimParam(s,c),a.endDimensionValue(s)}}o.DimensionValue=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensorTypeAndShape(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensorTypeAndShape(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}shape(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Shape).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startTensorTypeAndShape(s){s.startObject(2)}static addElemType(s,l){s.addFieldInt32(0,l,0)}static addShape(s,l){s.addFieldOffset(1,l,0)}static endTensorTypeAndShape(s){return s.endObject()}static createTensorTypeAndShape(s,l,i){return a.startTensorTypeAndShape(s),a.addElemType(s,l),a.addShape(s,i),a.endTensorTypeAndShape(s)}}o.TensorTypeAndShape=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsMapType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsMapType(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}keyType(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt32(this.bb_pos+s):0}valueType(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startMapType(s){s.startObject(2)}static addKeyType(s,l){s.addFieldInt32(0,l,0)}static addValueType(s,l){s.addFieldOffset(1,l,0)}static endMapType(s){return s.endObject()}static createMapType(s,l,i){return a.startMapType(s),a.addKeyType(s,l),a.addValueType(s,i),a.endMapType(s)}}o.MapType=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSequenceType(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSequenceType(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}elemType(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSequenceType(s){s.startObject(1)}static addElemType(s,l){s.addFieldOffset(0,l,0)}static endSequenceType(s){return s.endObject()}static createSequenceType(s,l){return a.startSequenceType(s),a.addElemType(s,l),a.endSequenceType(s)}}o.SequenceType=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}nodeIndex(){return this.bb.readUint32(this.bb_pos)}srcArgIndex(){return this.bb.readInt32(this.bb_pos+4)}dstArgIndex(){return this.bb.readInt32(this.bb_pos+8)}static createEdgeEnd(s,l,i,c){return s.prep(4,12),s.writeInt32(c),s.writeInt32(i),s.writeInt32(l),s.offset()}}o.EdgeEnd=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNodeEdge(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNodeEdge(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndex(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readUint32(this.bb_pos+s):0}inputEdges(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+s*12,this.bb):null}inputEdgesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}outputEdges(s,l){let i=this.bb.__offset(this.bb_pos,8);return i?(l||new t.experimental.fbs.EdgeEnd).__init(this.bb.__vector(this.bb_pos+i)+s*12,this.bb):null}outputEdgesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNodeEdge(s){s.startObject(3)}static addNodeIndex(s,l){s.addFieldInt32(0,l,0)}static addInputEdges(s,l){s.addFieldOffset(1,l,0)}static startInputEdgesVector(s,l){s.startVector(12,l,4)}static addOutputEdges(s,l){s.addFieldOffset(2,l,0)}static startOutputEdgesVector(s,l){s.startVector(12,l,4)}static endNodeEdge(s){return s.endObject()}static createNodeEdge(s,l,i,c){return a.startNodeEdge(s),a.addNodeIndex(s,l),a.addInputEdges(s,i),a.addOutputEdges(s,c),a.endNodeEdge(s)}}o.NodeEdge=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsNode(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsNode(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}sinceVersion(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}index(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readUint32(this.bb_pos+s):0}opType(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.readInt32(this.bb_pos+s):0}executionProviderType(s){let l=this.bb.__offset(this.bb_pos,18);return l?this.bb.__string(this.bb_pos+l,s):null}inputs(s,l){let i=this.bb.__offset(this.bb_pos,20);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let i=this.bb.__offset(this.bb_pos,22);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}attributes(s,l){let i=this.bb.__offset(this.bb_pos,24);return i?(l||new t.experimental.fbs.Attribute).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}attributesLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCounts(s){let l=this.bb.__offset(this.bb_pos,26);return l?this.bb.readInt32(this.bb.__vector(this.bb_pos+l)+s*4):0}inputArgCountsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}inputArgCountsArray(){let s=this.bb.__offset(this.bb_pos,26);return s?new Int32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}implicitInputs(s,l){let i=this.bb.__offset(this.bb_pos,28);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}implicitInputsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startNode(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDomain(s,l){s.addFieldOffset(2,l,0)}static addSinceVersion(s,l){s.addFieldInt32(3,l,0)}static addIndex(s,l){s.addFieldInt32(4,l,0)}static addOpType(s,l){s.addFieldOffset(5,l,0)}static addType(s,l){s.addFieldInt32(6,l,0)}static addExecutionProviderType(s,l){s.addFieldOffset(7,l,0)}static addInputs(s,l){s.addFieldOffset(8,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(9,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addAttributes(s,l){s.addFieldOffset(10,l,0)}static createAttributesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startAttributesVector(s,l){s.startVector(4,l,4)}static addInputArgCounts(s,l){s.addFieldOffset(11,l,0)}static createInputArgCountsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addInt32(l[i]);return s.endVector()}static startInputArgCountsVector(s,l){s.startVector(4,l,4)}static addImplicitInputs(s,l){s.addFieldOffset(12,l,0)}static createImplicitInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startImplicitInputsVector(s,l){s.startVector(4,l,4)}static endNode(s){return s.endObject()}static createNode(s,l,i,c,f,d,h,p,m,v,x,y,_,I){return a.startNode(s),a.addName(s,l),a.addDocString(s,i),a.addDomain(s,c),a.addSinceVersion(s,f),a.addIndex(s,d),a.addOpType(s,h),a.addType(s,p),a.addExecutionProviderType(s,m),a.addInputs(s,v),a.addOutputs(s,x),a.addAttributes(s,y),a.addInputArgCounts(s,_),a.addImplicitInputs(s,I),a.endNode(s)}}o.Node=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsValueInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsValueInfo(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.TypeInfo).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startValueInfo(s){s.startObject(3)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldOffset(2,l,0)}static endValueInfo(s){return s.endObject()}static createValueInfo(s,l,i,c){return a.startValueInfo(s),a.addName(s,l),a.addDocString(s,i),a.addType(s,c),a.endValueInfo(s)}}o.ValueInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTypeInfo(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTypeInfo(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}denotation(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}valueType(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readUint8(this.bb_pos+s):0}value(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__union(s,this.bb_pos+l):null}static startTypeInfo(s){s.startObject(3)}static addDenotation(s,l){s.addFieldOffset(0,l,0)}static addValueType(s,l){s.addFieldInt8(1,l,0)}static addValue(s,l){s.addFieldOffset(2,l,0)}static endTypeInfo(s){return s.endObject()}static createTypeInfo(s,l,i,c){return a.startTypeInfo(s),a.addDenotation(s,l),a.addValueType(s,i),a.addValue(s,c),a.endTypeInfo(s)}}o.TypeInfo=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsOperatorSetId(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsOperatorSetId(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}domain(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}version(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}static startOperatorSetId(s){s.startObject(2)}static addDomain(s,l){s.addFieldOffset(0,l,0)}static addVersion(s,l){s.addFieldInt64(1,l,s.createLong(0,0))}static endOperatorSetId(s){return s.endObject()}static createOperatorSetId(s,l,i){return a.startOperatorSetId(s),a.addDomain(s,l),a.addVersion(s,i),a.endOperatorSetId(s)}}o.OperatorSetId=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsTensor(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}dataType(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readInt32(this.bb_pos+s):0}rawData(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.readUint8(this.bb.__vector(this.bb_pos+l)+s):0}rawDataLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}rawDataArray(){let s=this.bb.__offset(this.bb_pos,12);return s?new Uint8Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}stringData(s,l){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}stringDataLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}static startTensor(s){s.startObject(6)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static addDataType(s,l){s.addFieldInt32(3,l,0)}static addRawData(s,l){s.addFieldOffset(4,l,0)}static createRawDataVector(s,l){s.startVector(1,l.length,1);for(let i=l.length-1;i>=0;i--)s.addInt8(l[i]);return s.endVector()}static startRawDataVector(s,l){s.startVector(1,l,1)}static addStringData(s,l){s.addFieldOffset(5,l,0)}static createStringDataVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startStringDataVector(s,l){s.startVector(4,l,4)}static endTensor(s){return s.endObject()}static createTensor(s,l,i,c,f,d,h){return a.startTensor(s),a.addName(s,l),a.addDocString(s,i),a.addDims(s,c),a.addDataType(s,f),a.addRawData(s,d),a.addStringData(s,h),a.endTensor(s)}}o.Tensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSparseTensor(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSparseTensor(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}values(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}indices(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}dims(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}dimsLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSparseTensor(s){s.startObject(3)}static addValues(s,l){s.addFieldOffset(0,l,0)}static addIndices(s,l){s.addFieldOffset(1,l,0)}static addDims(s,l){s.addFieldOffset(2,l,0)}static createDimsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startDimsVector(s,l){s.startVector(8,l,8)}static endSparseTensor(s){return s.endObject()}static createSparseTensor(s,l,i,c){return a.startSparseTensor(s),a.addValues(s,l),a.addIndices(s,i),a.addDims(s,c),a.endSparseTensor(s)}}o.SparseTensor=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsAttribute(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsAttribute(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}name(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}docString(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.__string(this.bb_pos+l,s):null}type(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.readInt32(this.bb_pos+s):0}f(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readFloat32(this.bb_pos+s):0}i(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}s(s){let l=this.bb.__offset(this.bb_pos,14);return l?this.bb.__string(this.bb_pos+l,s):null}t(s){let l=this.bb.__offset(this.bb_pos,16);return l?(s||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}g(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}floats(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.readFloat32(this.bb.__vector(this.bb_pos+l)+s*4):0}floatsLength(){let s=this.bb.__offset(this.bb_pos,20);return s?this.bb.__vector_len(this.bb_pos+s):0}floatsArray(){let s=this.bb.__offset(this.bb_pos,20);return s?new Float32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}ints(s){let l=this.bb.__offset(this.bb_pos,22);return l?this.bb.readInt64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}intsLength(){let s=this.bb.__offset(this.bb_pos,22);return s?this.bb.__vector_len(this.bb_pos+s):0}strings(s,l){let i=this.bb.__offset(this.bb_pos,24);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}stringsLength(){let s=this.bb.__offset(this.bb_pos,24);return s?this.bb.__vector_len(this.bb_pos+s):0}tensors(s,l){let i=this.bb.__offset(this.bb_pos,26);return i?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}tensorsLength(){let s=this.bb.__offset(this.bb_pos,26);return s?this.bb.__vector_len(this.bb_pos+s):0}graphs(s,l){let i=this.bb.__offset(this.bb_pos,28);return i?(l||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}graphsLength(){let s=this.bb.__offset(this.bb_pos,28);return s?this.bb.__vector_len(this.bb_pos+s):0}static startAttribute(s){s.startObject(13)}static addName(s,l){s.addFieldOffset(0,l,0)}static addDocString(s,l){s.addFieldOffset(1,l,0)}static addType(s,l){s.addFieldInt32(2,l,0)}static addF(s,l){s.addFieldFloat32(3,l,0)}static addI(s,l){s.addFieldInt64(4,l,s.createLong(0,0))}static addS(s,l){s.addFieldOffset(5,l,0)}static addT(s,l){s.addFieldOffset(6,l,0)}static addG(s,l){s.addFieldOffset(7,l,0)}static addFloats(s,l){s.addFieldOffset(8,l,0)}static createFloatsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addFloat32(l[i]);return s.endVector()}static startFloatsVector(s,l){s.startVector(4,l,4)}static addInts(s,l){s.addFieldOffset(9,l,0)}static createIntsVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startIntsVector(s,l){s.startVector(8,l,8)}static addStrings(s,l){s.addFieldOffset(10,l,0)}static createStringsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startStringsVector(s,l){s.startVector(4,l,4)}static addTensors(s,l){s.addFieldOffset(11,l,0)}static createTensorsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startTensorsVector(s,l){s.startVector(4,l,4)}static addGraphs(s,l){s.addFieldOffset(12,l,0)}static createGraphsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startGraphsVector(s,l){s.startVector(4,l,4)}static endAttribute(s){return s.endObject()}static createAttribute(s,l,i,c,f,d,h,p,m,v,x,y,_,I){return a.startAttribute(s),a.addName(s,l),a.addDocString(s,i),a.addType(s,c),a.addF(s,f),a.addI(s,d),a.addS(s,h),a.addT(s,p),a.addG(s,m),a.addFloats(s,v),a.addInts(s,x),a.addStrings(s,y),a.addTensors(s,_),a.addGraphs(s,I),a.endAttribute(s)}}o.Attribute=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsGraph(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsGraph(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}initializers(s,l){let i=this.bb.__offset(this.bb_pos,4);return i?(l||new t.experimental.fbs.Tensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}initializersLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeArgs(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.ValueInfo).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodeArgsLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}nodes(s,l){let i=this.bb.__offset(this.bb_pos,8);return i?(l||new t.experimental.fbs.Node).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodesLength(){let s=this.bb.__offset(this.bb_pos,8);return s?this.bb.__vector_len(this.bb_pos+s):0}maxNodeIndex(){let s=this.bb.__offset(this.bb_pos,10);return s?this.bb.readUint32(this.bb_pos+s):0}nodeEdges(s,l){let i=this.bb.__offset(this.bb_pos,12);return i?(l||new t.experimental.fbs.NodeEdge).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}nodeEdgesLength(){let s=this.bb.__offset(this.bb_pos,12);return s?this.bb.__vector_len(this.bb_pos+s):0}inputs(s,l){let i=this.bb.__offset(this.bb_pos,14);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}inputsLength(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.__vector_len(this.bb_pos+s):0}outputs(s,l){let i=this.bb.__offset(this.bb_pos,16);return i?this.bb.__string(this.bb.__vector(this.bb_pos+i)+s*4,l):null}outputsLength(){let s=this.bb.__offset(this.bb_pos,16);return s?this.bb.__vector_len(this.bb_pos+s):0}sparseInitializers(s,l){let i=this.bb.__offset(this.bb_pos,18);return i?(l||new t.experimental.fbs.SparseTensor).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}sparseInitializersLength(){let s=this.bb.__offset(this.bb_pos,18);return s?this.bb.__vector_len(this.bb_pos+s):0}static startGraph(s){s.startObject(8)}static addInitializers(s,l){s.addFieldOffset(0,l,0)}static createInitializersVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInitializersVector(s,l){s.startVector(4,l,4)}static addNodeArgs(s,l){s.addFieldOffset(1,l,0)}static createNodeArgsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodeArgsVector(s,l){s.startVector(4,l,4)}static addNodes(s,l){s.addFieldOffset(2,l,0)}static createNodesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodesVector(s,l){s.startVector(4,l,4)}static addMaxNodeIndex(s,l){s.addFieldInt32(3,l,0)}static addNodeEdges(s,l){s.addFieldOffset(4,l,0)}static createNodeEdgesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startNodeEdgesVector(s,l){s.startVector(4,l,4)}static addInputs(s,l){s.addFieldOffset(5,l,0)}static createInputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startInputsVector(s,l){s.startVector(4,l,4)}static addOutputs(s,l){s.addFieldOffset(6,l,0)}static createOutputsVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOutputsVector(s,l){s.startVector(4,l,4)}static addSparseInitializers(s,l){s.addFieldOffset(7,l,0)}static createSparseInitializersVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startSparseInitializersVector(s,l){s.startVector(4,l,4)}static endGraph(s){return s.endObject()}static createGraph(s,l,i,c,f,d,h,p,m){return a.startGraph(s),a.addInitializers(s,l),a.addNodeArgs(s,i),a.addNodes(s,c),a.addMaxNodeIndex(s,f),a.addNodeEdges(s,d),a.addInputs(s,h),a.addOutputs(s,p),a.addSparseInitializers(s,m),a.endGraph(s)}}o.Graph=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsModel(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsModel(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}irVersion(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}opsetImport(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.OperatorSetId).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}opsetImportLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}producerName(s){let l=this.bb.__offset(this.bb_pos,8);return l?this.bb.__string(this.bb_pos+l,s):null}producerVersion(s){let l=this.bb.__offset(this.bb_pos,10);return l?this.bb.__string(this.bb_pos+l,s):null}domain(s){let l=this.bb.__offset(this.bb_pos,12);return l?this.bb.__string(this.bb_pos+l,s):null}modelVersion(){let s=this.bb.__offset(this.bb_pos,14);return s?this.bb.readInt64(this.bb_pos+s):this.bb.createLong(0,0)}docString(s){let l=this.bb.__offset(this.bb_pos,16);return l?this.bb.__string(this.bb_pos+l,s):null}graph(s){let l=this.bb.__offset(this.bb_pos,18);return l?(s||new t.experimental.fbs.Graph).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}graphDocString(s){let l=this.bb.__offset(this.bb_pos,20);return l?this.bb.__string(this.bb_pos+l,s):null}static startModel(s){s.startObject(9)}static addIrVersion(s,l){s.addFieldInt64(0,l,s.createLong(0,0))}static addOpsetImport(s,l){s.addFieldOffset(1,l,0)}static createOpsetImportVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startOpsetImportVector(s,l){s.startVector(4,l,4)}static addProducerName(s,l){s.addFieldOffset(2,l,0)}static addProducerVersion(s,l){s.addFieldOffset(3,l,0)}static addDomain(s,l){s.addFieldOffset(4,l,0)}static addModelVersion(s,l){s.addFieldInt64(5,l,s.createLong(0,0))}static addDocString(s,l){s.addFieldOffset(6,l,0)}static addGraph(s,l){s.addFieldOffset(7,l,0)}static addGraphDocString(s,l){s.addFieldOffset(8,l,0)}static endModel(s){return s.endObject()}static createModel(s,l,i,c,f,d,h,p,m,v){return a.startModel(s),a.addIrVersion(s,l),a.addOpsetImport(s,i),a.addProducerName(s,c),a.addProducerVersion(s,f),a.addDomain(s,d),a.addModelVersion(s,h),a.addDocString(s,p),a.addGraph(s,m),a.addGraphDocString(s,v),a.endModel(s)}}o.Model=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsKernelCreateInfos(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsKernelCreateInfos(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}nodeIndices(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.readUint32(this.bb.__vector(this.bb_pos+l)+s*4):0}nodeIndicesLength(){let s=this.bb.__offset(this.bb_pos,4);return s?this.bb.__vector_len(this.bb_pos+s):0}nodeIndicesArray(){let s=this.bb.__offset(this.bb_pos,4);return s?new Uint32Array(this.bb.bytes().buffer,this.bb.bytes().byteOffset+this.bb.__vector(this.bb_pos+s),this.bb.__vector_len(this.bb_pos+s)):null}kernelDefHashes(s){let l=this.bb.__offset(this.bb_pos,6);return l?this.bb.readUint64(this.bb.__vector(this.bb_pos+l)+s*8):this.bb.createLong(0,0)}kernelDefHashesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startKernelCreateInfos(s){s.startObject(2)}static addNodeIndices(s,l){s.addFieldOffset(0,l,0)}static createNodeIndicesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addInt32(l[i]);return s.endVector()}static startNodeIndicesVector(s,l){s.startVector(4,l,4)}static addKernelDefHashes(s,l){s.addFieldOffset(1,l,0)}static createKernelDefHashesVector(s,l){s.startVector(8,l.length,8);for(let i=l.length-1;i>=0;i--)s.addInt64(l[i]);return s.endVector()}static startKernelDefHashesVector(s,l){s.startVector(8,l,8)}static endKernelCreateInfos(s){return s.endObject()}static createKernelCreateInfos(s,l,i){return a.startKernelCreateInfos(s),a.addNodeIndices(s,l),a.addKernelDefHashes(s,i),a.endKernelCreateInfos(s)}}o.KernelCreateInfos=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSubGraphSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSubGraphSessionState(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}graphId(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startSubGraphSessionState(s){s.startObject(2)}static addGraphId(s,l){s.addFieldOffset(0,l,0)}static addSessionState(s,l){s.addFieldOffset(1,l,0)}static endSubGraphSessionState(s){let l=s.endObject();return s.requiredField(l,4),l}static createSubGraphSessionState(s,l,i){return a.startSubGraphSessionState(s),a.addGraphId(s,l),a.addSessionState(s,i),a.endSubGraphSessionState(s)}}o.SubGraphSessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsSessionState(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsSessionState(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}kernels(s){let l=this.bb.__offset(this.bb_pos,4);return l?(s||new t.experimental.fbs.KernelCreateInfos).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}subGraphSessionStates(s,l){let i=this.bb.__offset(this.bb_pos,6);return i?(l||new t.experimental.fbs.SubGraphSessionState).__init(this.bb.__indirect(this.bb.__vector(this.bb_pos+i)+s*4),this.bb):null}subGraphSessionStatesLength(){let s=this.bb.__offset(this.bb_pos,6);return s?this.bb.__vector_len(this.bb_pos+s):0}static startSessionState(s){s.startObject(2)}static addKernels(s,l){s.addFieldOffset(0,l,0)}static addSubGraphSessionStates(s,l){s.addFieldOffset(1,l,0)}static createSubGraphSessionStatesVector(s,l){s.startVector(4,l.length,4);for(let i=l.length-1;i>=0;i--)s.addOffset(l[i]);return s.endVector()}static startSubGraphSessionStatesVector(s,l){s.startVector(4,l,4)}static endSessionState(s){return s.endObject()}static createSessionState(s,l,i){return a.startSessionState(s),a.addKernels(s,l),a.addSubGraphSessionStates(s,i),a.endSessionState(s)}}o.SessionState=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={}),(t=>{let e;(r=>{let n;(o=>{class a{constructor(){this.bb=null,this.bb_pos=0}__init(s,l){return this.bb_pos=s,this.bb=l,this}static getRootAsInferenceSession(s,l){return(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static getSizePrefixedRootAsInferenceSession(s,l){return s.setPosition(s.position()+$.SIZE_PREFIX_LENGTH),(l||new a).__init(s.readInt32(s.position())+s.position(),s)}static bufferHasIdentifier(s){return s.__has_identifier("ORTM")}ortVersion(s){let l=this.bb.__offset(this.bb_pos,4);return l?this.bb.__string(this.bb_pos+l,s):null}model(s){let l=this.bb.__offset(this.bb_pos,6);return l?(s||new t.experimental.fbs.Model).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}sessionState(s){let l=this.bb.__offset(this.bb_pos,8);return l?(s||new t.experimental.fbs.SessionState).__init(this.bb.__indirect(this.bb_pos+l),this.bb):null}static startInferenceSession(s){s.startObject(3)}static addOrtVersion(s,l){s.addFieldOffset(0,l,0)}static addModel(s,l){s.addFieldOffset(1,l,0)}static addSessionState(s,l){s.addFieldOffset(2,l,0)}static endInferenceSession(s){return s.endObject()}static finishInferenceSessionBuffer(s,l){s.finish(l,"ORTM")}static finishSizePrefixedInferenceSessionBuffer(s,l){s.finish(l,"ORTM",!0)}static createInferenceSession(s,l,i,c){return a.startInferenceSession(s),a.addOrtVersion(s,l),a.addModel(s,i),a.addSessionState(s,c),a.endInferenceSession(s)}}o.InferenceSession=a})(n=r.fbs||={})})(e=t.experimental||={})})(bt||={})}),$U=vr((t,e)=>{"use strict";e.exports=r;function r(n,o){for(var a=new Array(arguments.length-1),u=0,s=2,l=!0;s<arguments.length;)a[u++]=arguments[s++];return new Promise(function(i,c){a[u]=function(f){if(l)if(l=!1,f)c(f);else{for(var d=new Array(arguments.length-1),h=0;h<d.length;)d[h++]=arguments[h];i.apply(null,d)}};try{n.apply(o||null,a)}catch(f){l&&(l=!1,c(f))}})}}),VU=vr(t=>{"use strict";var e=t;e.length=function(u){var s=u.length;if(!s)return 0;for(var l=0;--s%4>1&&u.charAt(s)==="=";)++l;return Math.ceil(u.length*3)/4-l};var r=new Array(64),n=new Array(123);for(o=0;o<64;)n[r[o]=o<26?o+65:o<52?o+71:o<62?o-4:o-59|43]=o++;var o;e.encode=function(u,s,l){for(var i=null,c=[],f=0,d=0,h;s<l;){var p=u[s++];switch(d){case 0:c[f++]=r[p>>2],h=(p&3)<<4,d=1;break;case 1:c[f++]=r[h|p>>4],h=(p&15)<<2,d=2;break;case 2:c[f++]=r[h|p>>6],c[f++]=r[p&63],d=0;break}f>8191&&((i||(i=[])).push(String.fromCharCode.apply(String,c)),f=0)}return d&&(c[f++]=r[h],c[f++]=61,d===1&&(c[f++]=61)),i?(f&&i.push(String.fromCharCode.apply(String,c.slice(0,f))),i.join("")):String.fromCharCode.apply(String,c.slice(0,f))};var a="invalid encoding";e.decode=function(u,s,l){for(var i=l,c=0,f,d=0;d<u.length;){var h=u.charCodeAt(d++);if(h===61&&c>1)break;if((h=n[h])===void 0)throw Error(a);switch(c){case 0:f=h,c=1;break;case 1:s[l++]=f<<2|(h&48)>>4,f=h,c=2;break;case 2:s[l++]=(f&15)<<4|(h&60)>>2,f=h,c=3;break;case 3:s[l++]=(f&3)<<6|h,c=0;break}}if(c===1)throw Error(a);return l-i},e.test=function(u){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(u)}}),jU=vr((t,e)=>{"use strict";e.exports=r;function r(){this._listeners={}}r.prototype.on=function(n,o,a){return(this._listeners[n]||(this._listeners[n]=[])).push({fn:o,ctx:a||this}),this},r.prototype.off=function(n,o){if(n===void 0)this._listeners={};else if(o===void 0)this._listeners[n]=[];else for(var a=this._listeners[n],u=0;u<a.length;)a[u].fn===o?a.splice(u,1):++u;return this},r.prototype.emit=function(n){var o=this._listeners[n];if(o){for(var a=[],u=1;u<arguments.length;)a.push(arguments[u++]);for(u=0;u<o.length;)o[u].fn.apply(o[u++].ctx,a)}return this}}),UU=vr((t,e)=>{"use strict";e.exports=r(r);function r(s){return typeof Float32Array<"u"?function(){var l=new Float32Array([-0]),i=new Uint8Array(l.buffer),c=i[3]===128;function f(m,v,x){l[0]=m,v[x]=i[0],v[x+1]=i[1],v[x+2]=i[2],v[x+3]=i[3]}function d(m,v,x){l[0]=m,v[x]=i[3],v[x+1]=i[2],v[x+2]=i[1],v[x+3]=i[0]}s.writeFloatLE=c?f:d,s.writeFloatBE=c?d:f;function h(m,v){return i[0]=m[v],i[1]=m[v+1],i[2]=m[v+2],i[3]=m[v+3],l[0]}function p(m,v){return i[3]=m[v],i[2]=m[v+1],i[1]=m[v+2],i[0]=m[v+3],l[0]}s.readFloatLE=c?h:p,s.readFloatBE=c?p:h}():function(){function l(c,f,d,h){var p=f<0?1:0;if(p&&(f=-f),f===0)c(1/f>0?0:2147483648,d,h);else if(isNaN(f))c(2143289344,d,h);else if(f>34028234663852886e22)c((p<<31|2139095040)>>>0,d,h);else if(f<11754943508222875e-54)c((p<<31|Math.round(f/1401298464324817e-60))>>>0,d,h);else{var m=Math.floor(Math.log(f)/Math.LN2),v=Math.round(f*Math.pow(2,-m)*8388608)&8388607;c((p<<31|m+127<<23|v)>>>0,d,h)}}s.writeFloatLE=l.bind(null,n),s.writeFloatBE=l.bind(null,o);function i(c,f,d){var h=c(f,d),p=(h>>31)*2+1,m=h>>>23&255,v=h&8388607;return m===255?v?NaN:p*(1/0):m===0?p*1401298464324817e-60*v:p*Math.pow(2,m-150)*(v+8388608)}s.readFloatLE=i.bind(null,a),s.readFloatBE=i.bind(null,u)}(),typeof Float64Array<"u"?function(){var l=new Float64Array([-0]),i=new Uint8Array(l.buffer),c=i[7]===128;function f(m,v,x){l[0]=m,v[x]=i[0],v[x+1]=i[1],v[x+2]=i[2],v[x+3]=i[3],v[x+4]=i[4],v[x+5]=i[5],v[x+6]=i[6],v[x+7]=i[7]}function d(m,v,x){l[0]=m,v[x]=i[7],v[x+1]=i[6],v[x+2]=i[5],v[x+3]=i[4],v[x+4]=i[3],v[x+5]=i[2],v[x+6]=i[1],v[x+7]=i[0]}s.writeDoubleLE=c?f:d,s.writeDoubleBE=c?d:f;function h(m,v){return i[0]=m[v],i[1]=m[v+1],i[2]=m[v+2],i[3]=m[v+3],i[4]=m[v+4],i[5]=m[v+5],i[6]=m[v+6],i[7]=m[v+7],l[0]}function p(m,v){return i[7]=m[v],i[6]=m[v+1],i[5]=m[v+2],i[4]=m[v+3],i[3]=m[v+4],i[2]=m[v+5],i[1]=m[v+6],i[0]=m[v+7],l[0]}s.readDoubleLE=c?h:p,s.readDoubleBE=c?p:h}():function(){function l(c,f,d,h,p,m){var v=h<0?1:0;if(v&&(h=-h),h===0)c(0,p,m+f),c(1/h>0?0:2147483648,p,m+d);else if(isNaN(h))c(0,p,m+f),c(2146959360,p,m+d);else if(h>17976931348623157e292)c(0,p,m+f),c((v<<31|2146435072)>>>0,p,m+d);else{var x;if(h<22250738585072014e-324)x=h/5e-324,c(x>>>0,p,m+f),c((v<<31|x/4294967296)>>>0,p,m+d);else{var y=Math.floor(Math.log(h)/Math.LN2);y===1024&&(y=1023),x=h*Math.pow(2,-y),c(x*4503599627370496>>>0,p,m+f),c((v<<31|y+1023<<20|x*1048576&1048575)>>>0,p,m+d)}}}s.writeDoubleLE=l.bind(null,n,0,4),s.writeDoubleBE=l.bind(null,o,4,0);function i(c,f,d,h,p){var m=c(h,p+f),v=c(h,p+d),x=(v>>31)*2+1,y=v>>>20&2047,_=4294967296*(v&1048575)+m;return y===2047?_?NaN:x*(1/0):y===0?x*5e-324*_:x*Math.pow(2,y-1075)*(_+4503599627370496)}s.readDoubleLE=i.bind(null,a,0,4),s.readDoubleBE=i.bind(null,u,4,0)}(),s}function n(s,l,i){l[i]=s&255,l[i+1]=s>>>8&255,l[i+2]=s>>>16&255,l[i+3]=s>>>24}function o(s,l,i){l[i]=s>>>24,l[i+1]=s>>>16&255,l[i+2]=s>>>8&255,l[i+3]=s&255}function a(s,l){return(s[l]|s[l+1]<<8|s[l+2]<<16|s[l+3]<<24)>>>0}function u(s,l){return(s[l]<<24|s[l+1]<<16|s[l+2]<<8|s[l+3])>>>0}}),HU=vr((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(t){}return null}}),zU=vr(t=>{"use strict";var e=t;e.length=function(r){for(var n=0,o=0,a=0;a<r.length;++a)o=r.charCodeAt(a),o<128?n+=1:o<2048?n+=2:(o&64512)===55296&&(r.charCodeAt(a+1)&64512)===56320?(++a,n+=4):n+=3;return n},e.read=function(r,n,o){var a=o-n;if(a<1)return"";for(var u=null,s=[],l=0,i;n<o;)i=r[n++],i<128?s[l++]=i:i>191&&i<224?s[l++]=(i&31)<<6|r[n++]&63:i>239&&i<365?(i=((i&7)<<18|(r[n++]&63)<<12|(r[n++]&63)<<6|r[n++]&63)-65536,s[l++]=55296+(i>>10),s[l++]=56320+(i&1023)):s[l++]=(i&15)<<12|(r[n++]&63)<<6|r[n++]&63,l>8191&&((u||(u=[])).push(String.fromCharCode.apply(String,s)),l=0);return u?(l&&u.push(String.fromCharCode.apply(String,s.slice(0,l))),u.join("")):String.fromCharCode.apply(String,s.slice(0,l))},e.write=function(r,n,o){for(var a=o,u,s,l=0;l<r.length;++l)u=r.charCodeAt(l),u<128?n[o++]=u:u<2048?(n[o++]=u>>6|192,n[o++]=u&63|128):(u&64512)===55296&&((s=r.charCodeAt(l+1))&64512)===56320?(u=65536+((u&1023)<<10)+(s&1023),++l,n[o++]=u>>18|240,n[o++]=u>>12&63|128,n[o++]=u>>6&63|128,n[o++]=u&63|128):(n[o++]=u>>12|224,n[o++]=u>>6&63|128,n[o++]=u&63|128);return o-a}}),GU=vr((t,e)=>{"use strict";e.exports=r;function r(n,o,a){var u=a||8192,s=u>>>1,l=null,i=u;return function(c){if(c<1||c>s)return n(c);i+c>u&&(l=n(u),i=0);var f=o.call(l,i,i+=c);return i&7&&(i=(i|7)+1),f}}}),WU=vr((t,e)=>{"use strict";e.exports=n;var r=za();function n(s,l){this.lo=s>>>0,this.hi=l>>>0}var o=n.zero=new n(0,0);o.toNumber=function(){return 0},o.zzEncode=o.zzDecode=function(){return this},o.length=function(){return 1};var a=n.zeroHash="\0\0\0\0\0\0\0\0";n.fromNumber=function(s){if(s===0)return o;var l=s<0;l&&(s=-s);var i=s>>>0,c=(s-i)/4294967296>>>0;return l&&(c=~c>>>0,i=~i>>>0,++i>4294967295&&(i=0,++c>4294967295&&(c=0))),new n(i,c)},n.from=function(s){if(typeof s=="number")return n.fromNumber(s);if(r.isString(s))if(r.Long)s=r.Long.fromString(s);else return n.fromNumber(parseInt(s,10));return s.low||s.high?new n(s.low>>>0,s.high>>>0):o},n.prototype.toNumber=function(s){if(!s&&this.hi>>>31){var l=~this.lo+1>>>0,i=~this.hi>>>0;return l||(i=i+1>>>0),-(l+i*4294967296)}return this.lo+this.hi*4294967296},n.prototype.toLong=function(s){return r.Long?new r.Long(this.lo|0,this.hi|0,!!s):{low:this.lo|0,high:this.hi|0,unsigned:!!s}};var u=String.prototype.charCodeAt;n.fromHash=function(s){return s===a?o:new n((u.call(s,0)|u.call(s,1)<<8|u.call(s,2)<<16|u.call(s,3)<<24)>>>0,(u.call(s,4)|u.call(s,5)<<8|u.call(s,6)<<16|u.call(s,7)<<24)>>>0)},n.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)},n.prototype.zzEncode=function(){var s=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^s)>>>0,this.lo=(this.lo<<1^s)>>>0,this},n.prototype.zzDecode=function(){var s=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^s)>>>0,this.hi=(this.hi>>>1^s)>>>0,this},n.prototype.length=function(){var s=this.lo,l=(this.lo>>>28|this.hi<<4)>>>0,i=this.hi>>>24;return i===0?l===0?s<16384?s<128?1:2:s<2097152?3:4:l<16384?l<128?5:6:l<2097152?7:8:i<128?9:10}}),za=vr(t=>{"use strict";var e=t;e.asPromise=$U(),e.base64=VU(),e.EventEmitter=jU(),e.float=UU(),e.inquire=HU(),e.utf8=zU(),e.pool=GU(),e.LongBits=WU(),e.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node),e.global=e.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||t,e.emptyArray=Object.freeze?Object.freeze([]):[],e.emptyObject=Object.freeze?Object.freeze({}):{},e.isInteger=Number.isInteger||function(o){return typeof o=="number"&&isFinite(o)&&Math.floor(o)===o},e.isString=function(o){return typeof o=="string"||o instanceof String},e.isObject=function(o){return o&&typeof o=="object"},e.isset=e.isSet=function(o,a){var u=o[a];return u!=null&&o.hasOwnProperty(a)?typeof u!="object"||(Array.isArray(u)?u.length:Object.keys(u).length)>0:!1},e.Buffer=function(){try{var o=e.inquire("buffer").Buffer;return o.prototype.utf8Write?o:null}catch{return null}}(),e._Buffer_from=null,e._Buffer_allocUnsafe=null,e.newBuffer=function(o){return typeof o=="number"?e.Buffer?e._Buffer_allocUnsafe(o):new e.Array(o):e.Buffer?e._Buffer_from(o):typeof Uint8Array>"u"?o:new Uint8Array(o)},e.Array=typeof Uint8Array<"u"?Uint8Array:Array,e.Long=e.global.dcodeIO&&e.global.dcodeIO.Long||e.global.Long||e.inquire("long"),e.key2Re=/^true|false|0|1$/,e.key32Re=/^-?(?:0|[1-9][0-9]*)$/,e.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/,e.longToHash=function(o){return o?e.LongBits.from(o).toHash():e.LongBits.zeroHash},e.longFromHash=function(o,a){var u=e.LongBits.fromHash(o);return e.Long?e.Long.fromBits(u.lo,u.hi,a):u.toNumber(!!a)};function r(o,a,u){for(var s=Object.keys(a),l=0;l<s.length;++l)(o[s[l]]===void 0||!u)&&(o[s[l]]=a[s[l]]);return o}e.merge=r,e.lcFirst=function(o){return o.charAt(0).toLowerCase()+o.substring(1)};function n(o){function a(u,s){if(!(this instanceof a))return new a(u,s);Object.defineProperty(this,"message",{get:function(){return u}}),Error.captureStackTrace?Error.captureStackTrace(this,a):Object.defineProperty(this,"stack",{value:new Error().stack||""}),s&&r(this,s)}return a.prototype=Object.create(Error.prototype,{constructor:{value:a,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return o},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),a}e.newError=n,e.ProtocolError=n("ProtocolError"),e.oneOfGetter=function(o){for(var a={},u=0;u<o.length;++u)a[o[u]]=1;return function(){for(var s=Object.keys(this),l=s.length-1;l>-1;--l)if(a[s[l]]===1&&this[s[l]]!==void 0&&this[s[l]]!==null)return s[l]}},e.oneOfSetter=function(o){return function(a){for(var u=0;u<o.length;++u)o[u]!==a&&delete this[o[u]]}},e.toJSONOptions={longs:String,enums:String,bytes:String,json:!0},e._configure=function(){var o=e.Buffer;if(!o){e._Buffer_from=e._Buffer_allocUnsafe=null;return}e._Buffer_from=o.from!==Uint8Array.from&&o.from||function(a,u){return new o(a,u)},e._Buffer_allocUnsafe=o.allocUnsafe||function(a){return new o(a)}}}),WO=vr((t,e)=>{"use strict";e.exports=c;var r=za(),n,o=r.LongBits,a=r.base64,u=r.utf8;function s(y,_,I){this.fn=y,this.len=_,this.next=void 0,this.val=I}function l(){}function i(y){this.head=y.head,this.tail=y.tail,this.len=y.len,this.next=y.states}function c(){this.len=0,this.head=new s(l,0,0),this.tail=this.head,this.states=null}var f=function(){return r.Buffer?function(){return(c.create=function(){return new n})()}:function(){return new c}};c.create=f(),c.alloc=function(y){return new r.Array(y)},r.Array!==Array&&(c.alloc=r.pool(c.alloc,r.Array.prototype.subarray)),c.prototype._push=function(y,_,I){return this.tail=this.tail.next=new s(y,_,I),this.len+=_,this};function d(y,_,I){_[I]=y&255}function h(y,_,I){for(;y>127;)_[I++]=y&127|128,y>>>=7;_[I]=y}function p(y,_){this.len=y,this.next=void 0,this.val=_}p.prototype=Object.create(s.prototype),p.prototype.fn=h,c.prototype.uint32=function(y){return this.len+=(this.tail=this.tail.next=new p((y=y>>>0)<128?1:y<16384?2:y<2097152?3:y<268435456?4:5,y)).len,this},c.prototype.int32=function(y){return y<0?this._push(m,10,o.fromNumber(y)):this.uint32(y)},c.prototype.sint32=function(y){return this.uint32((y<<1^y>>31)>>>0)};function m(y,_,I){for(;y.hi;)_[I++]=y.lo&127|128,y.lo=(y.lo>>>7|y.hi<<25)>>>0,y.hi>>>=7;for(;y.lo>127;)_[I++]=y.lo&127|128,y.lo=y.lo>>>7;_[I++]=y.lo}c.prototype.uint64=function(y){var _=o.from(y);return this._push(m,_.length(),_)},c.prototype.int64=c.prototype.uint64,c.prototype.sint64=function(y){var _=o.from(y).zzEncode();return this._push(m,_.length(),_)},c.prototype.bool=function(y){return this._push(d,1,y?1:0)};function v(y,_,I){_[I]=y&255,_[I+1]=y>>>8&255,_[I+2]=y>>>16&255,_[I+3]=y>>>24}c.prototype.fixed32=function(y){return this._push(v,4,y>>>0)},c.prototype.sfixed32=c.prototype.fixed32,c.prototype.fixed64=function(y){var _=o.from(y);return this._push(v,4,_.lo)._push(v,4,_.hi)},c.prototype.sfixed64=c.prototype.fixed64,c.prototype.float=function(y){return this._push(r.float.writeFloatLE,4,y)},c.prototype.double=function(y){return this._push(r.float.writeDoubleLE,8,y)};var x=r.Array.prototype.set?function(y,_,I){_.set(y,I)}:function(y,_,I){for(var C=0;C<y.length;++C)_[I+C]=y[C]};c.prototype.bytes=function(y){var _=y.length>>>0;if(!_)return this._push(d,1,0);if(r.isString(y)){var I=c.alloc(_=a.length(y));a.decode(y,I,0),y=I}return this.uint32(_)._push(x,_,y)},c.prototype.string=function(y){var _=u.length(y);return _?this.uint32(_)._push(u.write,_,y):this._push(d,1,0)},c.prototype.fork=function(){return this.states=new i(this),this.head=this.tail=new s(l,0,0),this.len=0,this},c.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new s(l,0,0),this.len=0),this},c.prototype.ldelim=function(){var y=this.head,_=this.tail,I=this.len;return this.reset().uint32(I),I&&(this.tail.next=y.next,this.tail=_,this.len+=I),this},c.prototype.finish=function(){for(var y=this.head.next,_=this.constructor.alloc(this.len),I=0;y;)y.fn(y.val,_,I),I+=y.len,y=y.next;return _},c._configure=function(y){n=y,c.create=f(),n._configure()}}),qU=vr((t,e)=>{"use strict";e.exports=o;var r=WO();(o.prototype=Object.create(r.prototype)).constructor=o;var n=za();function o(){r.call(this)}o._configure=function(){o.alloc=n._Buffer_allocUnsafe,o.writeBytesBuffer=n.Buffer&&n.Buffer.prototype instanceof Uint8Array&&n.Buffer.prototype.set.name==="set"?function(u,s,l){s.set(u,l)}:function(u,s,l){if(u.copy)u.copy(s,l,0,u.length);else for(var i=0;i<u.length;)s[l++]=u[i++]}},o.prototype.bytes=function(u){n.isString(u)&&(u=n._Buffer_from(u,"base64"));var s=u.length>>>0;return this.uint32(s),s&&this._push(o.writeBytesBuffer,s,u),this};function a(u,s,l){u.length<40?n.utf8.write(u,s,l):s.utf8Write?s.utf8Write(u,l):s.write(u,l)}o.prototype.string=function(u){var s=n.Buffer.byteLength(u);return this.uint32(s),s&&this._push(a,s,u),this},o._configure()}),qO=vr((t,e)=>{"use strict";e.exports=s;var r=za(),n,o=r.LongBits,a=r.utf8;function u(h,p){return RangeError("index out of range: "+h.pos+" + "+(p||1)+" > "+h.len)}function s(h){this.buf=h,this.pos=0,this.len=h.length}var l=typeof Uint8Array<"u"?function(h){if(h instanceof Uint8Array||Array.isArray(h))return new s(h);throw Error("illegal buffer")}:function(h){if(Array.isArray(h))return new s(h);throw Error("illegal buffer")},i=function(){return r.Buffer?function(h){return(s.create=function(p){return r.Buffer.isBuffer(p)?new n(p):l(p)})(h)}:l};s.create=i(),s.prototype._slice=r.Array.prototype.subarray||r.Array.prototype.slice,s.prototype.uint32=function(){var h=4294967295;return function(){if(h=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(h=(h|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(h=(h|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return h;if((this.pos+=5)>this.len)throw this.pos=this.len,u(this,10);return h}}(),s.prototype.int32=function(){return this.uint32()|0},s.prototype.sint32=function(){var h=this.uint32();return h>>>1^-(h&1)|0};function c(){var h=new o(0,0),p=0;if(this.len-this.pos>4){for(;p<4;++p)if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h;if(h.lo=(h.lo|(this.buf[this.pos]&127)<<28)>>>0,h.hi=(h.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return h;p=0}else{for(;p<3;++p){if(this.pos>=this.len)throw u(this);if(h.lo=(h.lo|(this.buf[this.pos]&127)<<p*7)>>>0,this.buf[this.pos++]<128)return h}return h.lo=(h.lo|(this.buf[this.pos++]&127)<<p*7)>>>0,h}if(this.len-this.pos>4){for(;p<5;++p)if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}else for(;p<5;++p){if(this.pos>=this.len)throw u(this);if(h.hi=(h.hi|(this.buf[this.pos]&127)<<p*7+3)>>>0,this.buf[this.pos++]<128)return h}throw Error("invalid varint encoding")}s.prototype.bool=function(){return this.uint32()!==0};function f(h,p){return(h[p-4]|h[p-3]<<8|h[p-2]<<16|h[p-1]<<24)>>>0}s.prototype.fixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)},s.prototype.sfixed32=function(){if(this.pos+4>this.len)throw u(this,4);return f(this.buf,this.pos+=4)|0};function d(){if(this.pos+8>this.len)throw u(this,8);return new o(f(this.buf,this.pos+=4),f(this.buf,this.pos+=4))}s.prototype.float=function(){if(this.pos+4>this.len)throw u(this,4);var h=r.float.readFloatLE(this.buf,this.pos);return this.pos+=4,h},s.prototype.double=function(){if(this.pos+8>this.len)throw u(this,4);var h=r.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,h},s.prototype.bytes=function(){var h=this.uint32(),p=this.pos,m=this.pos+h;if(m>this.len)throw u(this,h);return this.pos+=h,Array.isArray(this.buf)?this.buf.slice(p,m):p===m?new this.buf.constructor(0):this._slice.call(this.buf,p,m)},s.prototype.string=function(){var h=this.bytes();return a.read(h,0,h.length)},s.prototype.skip=function(h){if(typeof h=="number"){if(this.pos+h>this.len)throw u(this,h);this.pos+=h}else do if(this.pos>=this.len)throw u(this);while(this.buf[this.pos++]&128);return this},s.prototype.skipType=function(h){switch(h){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(h=this.uint32()&7)!==4;)this.skipType(h);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+h+" at offset "+this.pos)}return this},s._configure=function(h){n=h,s.create=i(),n._configure();var p=r.Long?"toLong":"toNumber";r.merge(s.prototype,{int64:function(){return c.call(this)[p](!1)},uint64:function(){return c.call(this)[p](!0)},sint64:function(){return c.call(this).zzDecode()[p](!1)},fixed64:function(){return d.call(this)[p](!0)},sfixed64:function(){return d.call(this)[p](!1)}})}}),XU=vr((t,e)=>{"use strict";e.exports=o;var r=qO();(o.prototype=Object.create(r.prototype)).constructor=o;var n=za();function o(a){r.call(this,a)}o._configure=function(){n.Buffer&&(o.prototype._slice=n.Buffer.prototype.slice)},o.prototype.string=function(){var a=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+a,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+a,this.len))},o._configure()}),YU=vr((t,e)=>{"use strict";e.exports=n;var r=za();(n.prototype=Object.create(r.EventEmitter.prototype)).constructor=n;function n(o,a,u){if(typeof o!="function")throw TypeError("rpcImpl must be a function");r.EventEmitter.call(this),this.rpcImpl=o,this.requestDelimited=!!a,this.responseDelimited=!!u}n.prototype.rpcCall=function o(a,u,s,l,i){if(!l)throw TypeError("request must be specified");var c=this;if(!i)return r.asPromise(o,c,a,u,s,l);if(!c.rpcImpl){setTimeout(function(){i(Error("already ended"))},0);return}try{return c.rpcImpl(a,u[c.requestDelimited?"encodeDelimited":"encode"](l).finish(),function(f,d){if(f)return c.emit("error",f,a),i(f);if(d===null){c.end(!0);return}if(!(d instanceof s))try{d=s[c.responseDelimited?"decodeDelimited":"decode"](d)}catch(h){return c.emit("error",h,a),i(h)}return c.emit("data",d,a),i(null,d)})}catch(f){c.emit("error",f,a),setTimeout(function(){i(f)},0);return}},n.prototype.end=function(o){return this.rpcImpl&&(o||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}}),ZU=vr(t=>{"use strict";var e=t;e.Service=YU()}),KU=vr((t,e)=>{"use strict";e.exports={}}),QU=vr(t=>{"use strict";var e=t;e.build="minimal",e.Writer=WO(),e.BufferWriter=qU(),e.Reader=qO(),e.BufferReader=XU(),e.util=za(),e.rpc=ZU(),e.roots=KU(),e.configure=r;function r(){e.util._configure(),e.Writer._configure(e.BufferWriter),e.Reader._configure(e.BufferReader)}r()}),JU=vr((t,e)=>{"use strict";e.exports=QU()}),Cc=vr((t,e)=>{"use strict";var r=JU(),n=r.Reader,o=r.Writer,a=r.util,u=r.roots.default||(r.roots.default={});u.onnx=function(){var s={};return s.Version=function(){var l={},i=Object.create(l);return i[l[0]="_START_VERSION"]=0,i[l[1]="IR_VERSION_2017_10_10"]=1,i[l[2]="IR_VERSION_2017_10_30"]=2,i[l[3]="IR_VERSION_2017_11_3"]=3,i[l[4]="IR_VERSION_2019_1_22"]=4,i[l[5]="IR_VERSION_2019_3_18"]=5,i[l[6]="IR_VERSION_2019_9_19"]=6,i[l[7]="IR_VERSION_2020_5_8"]=7,i[l[8]="IR_VERSION_2021_7_30"]=8,i[l[9]="IR_VERSION"]=9,i}(),s.AttributeProto=function(){function l(i){if(this.floats=[],this.ints=[],this.strings=[],this.tensors=[],this.graphs=[],this.sparseTensors=[],this.typeProtos=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.refAttrName="",l.prototype.docString="",l.prototype.type=0,l.prototype.f=0,l.prototype.i=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.s=a.newBuffer([]),l.prototype.t=null,l.prototype.g=null,l.prototype.sparseTensor=null,l.prototype.tp=null,l.prototype.floats=a.emptyArray,l.prototype.ints=a.emptyArray,l.prototype.strings=a.emptyArray,l.prototype.tensors=a.emptyArray,l.prototype.graphs=a.emptyArray,l.prototype.sparseTensors=a.emptyArray,l.prototype.typeProtos=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.f!=null&&Object.hasOwnProperty.call(i,"f")&&c.uint32(21).float(i.f),i.i!=null&&Object.hasOwnProperty.call(i,"i")&&c.uint32(24).int64(i.i),i.s!=null&&Object.hasOwnProperty.call(i,"s")&&c.uint32(34).bytes(i.s),i.t!=null&&Object.hasOwnProperty.call(i,"t")&&u.onnx.TensorProto.encode(i.t,c.uint32(42).fork()).ldelim(),i.g!=null&&Object.hasOwnProperty.call(i,"g")&&u.onnx.GraphProto.encode(i.g,c.uint32(50).fork()).ldelim(),i.floats!=null&&i.floats.length){c.uint32(58).fork();for(var f=0;f<i.floats.length;++f)c.float(i.floats[f]);c.ldelim()}if(i.ints!=null&&i.ints.length){c.uint32(66).fork();for(var f=0;f<i.ints.length;++f)c.int64(i.ints[f]);c.ldelim()}if(i.strings!=null&&i.strings.length)for(var f=0;f<i.strings.length;++f)c.uint32(74).bytes(i.strings[f]);if(i.tensors!=null&&i.tensors.length)for(var f=0;f<i.tensors.length;++f)u.onnx.TensorProto.encode(i.tensors[f],c.uint32(82).fork()).ldelim();if(i.graphs!=null&&i.graphs.length)for(var f=0;f<i.graphs.length;++f)u.onnx.GraphProto.encode(i.graphs[f],c.uint32(90).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(106).string(i.docString),i.tp!=null&&Object.hasOwnProperty.call(i,"tp")&&u.onnx.TypeProto.encode(i.tp,c.uint32(114).fork()).ldelim(),i.typeProtos!=null&&i.typeProtos.length)for(var f=0;f<i.typeProtos.length;++f)u.onnx.TypeProto.encode(i.typeProtos[f],c.uint32(122).fork()).ldelim();if(i.type!=null&&Object.hasOwnProperty.call(i,"type")&&c.uint32(160).int32(i.type),i.refAttrName!=null&&Object.hasOwnProperty.call(i,"refAttrName")&&c.uint32(170).string(i.refAttrName),i.sparseTensor!=null&&Object.hasOwnProperty.call(i,"sparseTensor")&&u.onnx.SparseTensorProto.encode(i.sparseTensor,c.uint32(178).fork()).ldelim(),i.sparseTensors!=null&&i.sparseTensors.length)for(var f=0;f<i.sparseTensors.length;++f)u.onnx.SparseTensorProto.encode(i.sparseTensors[f],c.uint32(186).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.AttributeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 21:{d.refAttrName=i.string();break}case 13:{d.docString=i.string();break}case 20:{d.type=i.int32();break}case 2:{d.f=i.float();break}case 3:{d.i=i.int64();break}case 4:{d.s=i.bytes();break}case 5:{d.t=u.onnx.TensorProto.decode(i,i.uint32());break}case 6:{d.g=u.onnx.GraphProto.decode(i,i.uint32());break}case 22:{d.sparseTensor=u.onnx.SparseTensorProto.decode(i,i.uint32());break}case 14:{d.tp=u.onnx.TypeProto.decode(i,i.uint32());break}case 7:{if(d.floats&&d.floats.length||(d.floats=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.floats.push(i.float());else d.floats.push(i.float());break}case 8:{if(d.ints&&d.ints.length||(d.ints=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.ints.push(i.int64());else d.ints.push(i.int64());break}case 9:{d.strings&&d.strings.length||(d.strings=[]),d.strings.push(i.bytes());break}case 10:{d.tensors&&d.tensors.length||(d.tensors=[]),d.tensors.push(u.onnx.TensorProto.decode(i,i.uint32()));break}case 11:{d.graphs&&d.graphs.length||(d.graphs=[]),d.graphs.push(u.onnx.GraphProto.decode(i,i.uint32()));break}case 23:{d.sparseTensors&&d.sparseTensors.length||(d.sparseTensors=[]),d.sparseTensors.push(u.onnx.SparseTensorProto.decode(i,i.uint32()));break}case 15:{d.typeProtos&&d.typeProtos.length||(d.typeProtos=[]),d.typeProtos.push(u.onnx.TypeProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&!a.isString(i.refAttrName))return"refAttrName: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.type!=null&&i.hasOwnProperty("type"))switch(i.type){default:return"type: enum value expected";case 0:case 1:case 2:case 3:case 4:case 5:case 11:case 13:case 6:case 7:case 8:case 9:case 10:case 12:case 14:break}if(i.f!=null&&i.hasOwnProperty("f")&&typeof i.f!="number")return"f: number expected";if(i.i!=null&&i.hasOwnProperty("i")&&!a.isInteger(i.i)&&!(i.i&&a.isInteger(i.i.low)&&a.isInteger(i.i.high)))return"i: integer|Long expected";if(i.s!=null&&i.hasOwnProperty("s")&&!(i.s&&typeof i.s.length=="number"||a.isString(i.s)))return"s: buffer expected";if(i.t!=null&&i.hasOwnProperty("t")){var c=u.onnx.TensorProto.verify(i.t);if(c)return"t."+c}if(i.g!=null&&i.hasOwnProperty("g")){var c=u.onnx.GraphProto.verify(i.g);if(c)return"g."+c}if(i.sparseTensor!=null&&i.hasOwnProperty("sparseTensor")){var c=u.onnx.SparseTensorProto.verify(i.sparseTensor);if(c)return"sparseTensor."+c}if(i.tp!=null&&i.hasOwnProperty("tp")){var c=u.onnx.TypeProto.verify(i.tp);if(c)return"tp."+c}if(i.floats!=null&&i.hasOwnProperty("floats")){if(!Array.isArray(i.floats))return"floats: array expected";for(var f=0;f<i.floats.length;++f)if(typeof i.floats[f]!="number")return"floats: number[] expected"}if(i.ints!=null&&i.hasOwnProperty("ints")){if(!Array.isArray(i.ints))return"ints: array expected";for(var f=0;f<i.ints.length;++f)if(!a.isInteger(i.ints[f])&&!(i.ints[f]&&a.isInteger(i.ints[f].low)&&a.isInteger(i.ints[f].high)))return"ints: integer|Long[] expected"}if(i.strings!=null&&i.hasOwnProperty("strings")){if(!Array.isArray(i.strings))return"strings: array expected";for(var f=0;f<i.strings.length;++f)if(!(i.strings[f]&&typeof i.strings[f].length=="number"||a.isString(i.strings[f])))return"strings: buffer[] expected"}if(i.tensors!=null&&i.hasOwnProperty("tensors")){if(!Array.isArray(i.tensors))return"tensors: array expected";for(var f=0;f<i.tensors.length;++f){var c=u.onnx.TensorProto.verify(i.tensors[f]);if(c)return"tensors."+c}}if(i.graphs!=null&&i.hasOwnProperty("graphs")){if(!Array.isArray(i.graphs))return"graphs: array expected";for(var f=0;f<i.graphs.length;++f){var c=u.onnx.GraphProto.verify(i.graphs[f]);if(c)return"graphs."+c}}if(i.sparseTensors!=null&&i.hasOwnProperty("sparseTensors")){if(!Array.isArray(i.sparseTensors))return"sparseTensors: array expected";for(var f=0;f<i.sparseTensors.length;++f){var c=u.onnx.SparseTensorProto.verify(i.sparseTensors[f]);if(c)return"sparseTensors."+c}}if(i.typeProtos!=null&&i.hasOwnProperty("typeProtos")){if(!Array.isArray(i.typeProtos))return"typeProtos: array expected";for(var f=0;f<i.typeProtos.length;++f){var c=u.onnx.TypeProto.verify(i.typeProtos[f]);if(c)return"typeProtos."+c}}return null},l.fromObject=function(i){if(i instanceof u.onnx.AttributeProto)return i;var c=new u.onnx.AttributeProto;switch(i.name!=null&&(c.name=String(i.name)),i.refAttrName!=null&&(c.refAttrName=String(i.refAttrName)),i.docString!=null&&(c.docString=String(i.docString)),i.type){default:if(typeof i.type=="number"){c.type=i.type;break}break;case"UNDEFINED":case 0:c.type=0;break;case"FLOAT":case 1:c.type=1;break;case"INT":case 2:c.type=2;break;case"STRING":case 3:c.type=3;break;case"TENSOR":case 4:c.type=4;break;case"GRAPH":case 5:c.type=5;break;case"SPARSE_TENSOR":case 11:c.type=11;break;case"TYPE_PROTO":case 13:c.type=13;break;case"FLOATS":case 6:c.type=6;break;case"INTS":case 7:c.type=7;break;case"STRINGS":case 8:c.type=8;break;case"TENSORS":case 9:c.type=9;break;case"GRAPHS":case 10:c.type=10;break;case"SPARSE_TENSORS":case 12:c.type=12;break;case"TYPE_PROTOS":case 14:c.type=14;break}if(i.f!=null&&(c.f=Number(i.f)),i.i!=null&&(a.Long?(c.i=a.Long.fromValue(i.i)).unsigned=!1:typeof i.i=="string"?c.i=parseInt(i.i,10):typeof i.i=="number"?c.i=i.i:typeof i.i=="object"&&(c.i=new a.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber())),i.s!=null&&(typeof i.s=="string"?a.base64.decode(i.s,c.s=a.newBuffer(a.base64.length(i.s)),0):i.s.length>=0&&(c.s=i.s)),i.t!=null){if(typeof i.t!="object")throw TypeError(".onnx.AttributeProto.t: object expected");c.t=u.onnx.TensorProto.fromObject(i.t)}if(i.g!=null){if(typeof i.g!="object")throw TypeError(".onnx.AttributeProto.g: object expected");c.g=u.onnx.GraphProto.fromObject(i.g)}if(i.sparseTensor!=null){if(typeof i.sparseTensor!="object")throw TypeError(".onnx.AttributeProto.sparseTensor: object expected");c.sparseTensor=u.onnx.SparseTensorProto.fromObject(i.sparseTensor)}if(i.tp!=null){if(typeof i.tp!="object")throw TypeError(".onnx.AttributeProto.tp: object expected");c.tp=u.onnx.TypeProto.fromObject(i.tp)}if(i.floats){if(!Array.isArray(i.floats))throw TypeError(".onnx.AttributeProto.floats: array expected");c.floats=[];for(var f=0;f<i.floats.length;++f)c.floats[f]=Number(i.floats[f])}if(i.ints){if(!Array.isArray(i.ints))throw TypeError(".onnx.AttributeProto.ints: array expected");c.ints=[];for(var f=0;f<i.ints.length;++f)a.Long?(c.ints[f]=a.Long.fromValue(i.ints[f])).unsigned=!1:typeof i.ints[f]=="string"?c.ints[f]=parseInt(i.ints[f],10):typeof i.ints[f]=="number"?c.ints[f]=i.ints[f]:typeof i.ints[f]=="object"&&(c.ints[f]=new a.LongBits(i.ints[f].low>>>0,i.ints[f].high>>>0).toNumber())}if(i.strings){if(!Array.isArray(i.strings))throw TypeError(".onnx.AttributeProto.strings: array expected");c.strings=[];for(var f=0;f<i.strings.length;++f)typeof i.strings[f]=="string"?a.base64.decode(i.strings[f],c.strings[f]=a.newBuffer(a.base64.length(i.strings[f])),0):i.strings[f].length>=0&&(c.strings[f]=i.strings[f])}if(i.tensors){if(!Array.isArray(i.tensors))throw TypeError(".onnx.AttributeProto.tensors: array expected");c.tensors=[];for(var f=0;f<i.tensors.length;++f){if(typeof i.tensors[f]!="object")throw TypeError(".onnx.AttributeProto.tensors: object expected");c.tensors[f]=u.onnx.TensorProto.fromObject(i.tensors[f])}}if(i.graphs){if(!Array.isArray(i.graphs))throw TypeError(".onnx.AttributeProto.graphs: array expected");c.graphs=[];for(var f=0;f<i.graphs.length;++f){if(typeof i.graphs[f]!="object")throw TypeError(".onnx.AttributeProto.graphs: object expected");c.graphs[f]=u.onnx.GraphProto.fromObject(i.graphs[f])}}if(i.sparseTensors){if(!Array.isArray(i.sparseTensors))throw TypeError(".onnx.AttributeProto.sparseTensors: array expected");c.sparseTensors=[];for(var f=0;f<i.sparseTensors.length;++f){if(typeof i.sparseTensors[f]!="object")throw TypeError(".onnx.AttributeProto.sparseTensors: object expected");c.sparseTensors[f]=u.onnx.SparseTensorProto.fromObject(i.sparseTensors[f])}}if(i.typeProtos){if(!Array.isArray(i.typeProtos))throw TypeError(".onnx.AttributeProto.typeProtos: array expected");c.typeProtos=[];for(var f=0;f<i.typeProtos.length;++f){if(typeof i.typeProtos[f]!="object")throw TypeError(".onnx.AttributeProto.typeProtos: object expected");c.typeProtos[f]=u.onnx.TypeProto.fromObject(i.typeProtos[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.floats=[],f.ints=[],f.strings=[],f.tensors=[],f.graphs=[],f.typeProtos=[],f.sparseTensors=[]),c.defaults){if(f.name="",f.f=0,a.Long){var d=new a.Long(0,0,!1);f.i=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.i=c.longs===String?"0":0;c.bytes===String?f.s="":(f.s=[],c.bytes!==Array&&(f.s=a.newBuffer(f.s))),f.t=null,f.g=null,f.docString="",f.tp=null,f.type=c.enums===String?"UNDEFINED":0,f.refAttrName="",f.sparseTensor=null}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.f!=null&&i.hasOwnProperty("f")&&(f.f=c.json&&!isFinite(i.f)?String(i.f):i.f),i.i!=null&&i.hasOwnProperty("i")&&(typeof i.i=="number"?f.i=c.longs===String?String(i.i):i.i:f.i=c.longs===String?a.Long.prototype.toString.call(i.i):c.longs===Number?new a.LongBits(i.i.low>>>0,i.i.high>>>0).toNumber():i.i),i.s!=null&&i.hasOwnProperty("s")&&(f.s=c.bytes===String?a.base64.encode(i.s,0,i.s.length):c.bytes===Array?Array.prototype.slice.call(i.s):i.s),i.t!=null&&i.hasOwnProperty("t")&&(f.t=u.onnx.TensorProto.toObject(i.t,c)),i.g!=null&&i.hasOwnProperty("g")&&(f.g=u.onnx.GraphProto.toObject(i.g,c)),i.floats&&i.floats.length){f.floats=[];for(var h=0;h<i.floats.length;++h)f.floats[h]=c.json&&!isFinite(i.floats[h])?String(i.floats[h]):i.floats[h]}if(i.ints&&i.ints.length){f.ints=[];for(var h=0;h<i.ints.length;++h)typeof i.ints[h]=="number"?f.ints[h]=c.longs===String?String(i.ints[h]):i.ints[h]:f.ints[h]=c.longs===String?a.Long.prototype.toString.call(i.ints[h]):c.longs===Number?new a.LongBits(i.ints[h].low>>>0,i.ints[h].high>>>0).toNumber():i.ints[h]}if(i.strings&&i.strings.length){f.strings=[];for(var h=0;h<i.strings.length;++h)f.strings[h]=c.bytes===String?a.base64.encode(i.strings[h],0,i.strings[h].length):c.bytes===Array?Array.prototype.slice.call(i.strings[h]):i.strings[h]}if(i.tensors&&i.tensors.length){f.tensors=[];for(var h=0;h<i.tensors.length;++h)f.tensors[h]=u.onnx.TensorProto.toObject(i.tensors[h],c)}if(i.graphs&&i.graphs.length){f.graphs=[];for(var h=0;h<i.graphs.length;++h)f.graphs[h]=u.onnx.GraphProto.toObject(i.graphs[h],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.tp!=null&&i.hasOwnProperty("tp")&&(f.tp=u.onnx.TypeProto.toObject(i.tp,c)),i.typeProtos&&i.typeProtos.length){f.typeProtos=[];for(var h=0;h<i.typeProtos.length;++h)f.typeProtos[h]=u.onnx.TypeProto.toObject(i.typeProtos[h],c)}if(i.type!=null&&i.hasOwnProperty("type")&&(f.type=c.enums===String?u.onnx.AttributeProto.AttributeType[i.type]===void 0?i.type:u.onnx.AttributeProto.AttributeType[i.type]:i.type),i.refAttrName!=null&&i.hasOwnProperty("refAttrName")&&(f.refAttrName=i.refAttrName),i.sparseTensor!=null&&i.hasOwnProperty("sparseTensor")&&(f.sparseTensor=u.onnx.SparseTensorProto.toObject(i.sparseTensor,c)),i.sparseTensors&&i.sparseTensors.length){f.sparseTensors=[];for(var h=0;h<i.sparseTensors.length;++h)f.sparseTensors[h]=u.onnx.SparseTensorProto.toObject(i.sparseTensors[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.AttributeProto"},l.AttributeType=function(){var i={},c=Object.create(i);return c[i[0]="UNDEFINED"]=0,c[i[1]="FLOAT"]=1,c[i[2]="INT"]=2,c[i[3]="STRING"]=3,c[i[4]="TENSOR"]=4,c[i[5]="GRAPH"]=5,c[i[11]="SPARSE_TENSOR"]=11,c[i[13]="TYPE_PROTO"]=13,c[i[6]="FLOATS"]=6,c[i[7]="INTS"]=7,c[i[8]="STRINGS"]=8,c[i[9]="TENSORS"]=9,c[i[10]="GRAPHS"]=10,c[i[12]="SPARSE_TENSORS"]=12,c[i[14]="TYPE_PROTOS"]=14,c}(),l}(),s.ValueInfoProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.type=null,l.prototype.docString="",l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.type!=null&&Object.hasOwnProperty.call(i,"type")&&u.onnx.TypeProto.encode(i.type,c.uint32(18).fork()).ldelim(),i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(26).string(i.docString),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.ValueInfoProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 2:{d.type=u.onnx.TypeProto.decode(i,i.uint32());break}case 3:{d.docString=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.type!=null&&i.hasOwnProperty("type")){var c=u.onnx.TypeProto.verify(i.type);if(c)return"type."+c}return i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString)?"docString: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.ValueInfoProto)return i;var c=new u.onnx.ValueInfoProto;if(i.name!=null&&(c.name=String(i.name)),i.type!=null){if(typeof i.type!="object")throw TypeError(".onnx.ValueInfoProto.type: object expected");c.type=u.onnx.TypeProto.fromObject(i.type)}return i.docString!=null&&(c.docString=String(i.docString)),c},l.toObject=function(i,c){c||(c={});var f={};return c.defaults&&(f.name="",f.type=null,f.docString=""),i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.type!=null&&i.hasOwnProperty("type")&&(f.type=u.onnx.TypeProto.toObject(i.type,c)),i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.ValueInfoProto"},l}(),s.NodeProto=function(){function l(i){if(this.input=[],this.output=[],this.attribute=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.name="",l.prototype.opType="",l.prototype.domain="",l.prototype.attribute=a.emptyArray,l.prototype.docString="",l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)c.uint32(10).string(i.input[f]);if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)c.uint32(18).string(i.output[f]);if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(26).string(i.name),i.opType!=null&&Object.hasOwnProperty.call(i,"opType")&&c.uint32(34).string(i.opType),i.attribute!=null&&i.attribute.length)for(var f=0;f<i.attribute.length;++f)u.onnx.AttributeProto.encode(i.attribute[f],c.uint32(42).fork()).ldelim();return i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(50).string(i.docString),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(58).string(i.domain),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.NodeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.input&&d.input.length||(d.input=[]),d.input.push(i.string());break}case 2:{d.output&&d.output.length||(d.output=[]),d.output.push(i.string());break}case 3:{d.name=i.string();break}case 4:{d.opType=i.string();break}case 7:{d.domain=i.string();break}case 5:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(u.onnx.AttributeProto.decode(i,i.uint32()));break}case 6:{d.docString=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c)if(!a.isString(i.input[c]))return"input: string[] expected"}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c)if(!a.isString(i.output[c]))return"output: string[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.opType!=null&&i.hasOwnProperty("opType")&&!a.isString(i.opType))return"opType: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain))return"domain: string expected";if(i.attribute!=null&&i.hasOwnProperty("attribute")){if(!Array.isArray(i.attribute))return"attribute: array expected";for(var c=0;c<i.attribute.length;++c){var f=u.onnx.AttributeProto.verify(i.attribute[c]);if(f)return"attribute."+f}}return i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString)?"docString: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.NodeProto)return i;var c=new u.onnx.NodeProto;if(i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.NodeProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f)c.input[f]=String(i.input[f])}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.NodeProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f)c.output[f]=String(i.output[f])}if(i.name!=null&&(c.name=String(i.name)),i.opType!=null&&(c.opType=String(i.opType)),i.domain!=null&&(c.domain=String(i.domain)),i.attribute){if(!Array.isArray(i.attribute))throw TypeError(".onnx.NodeProto.attribute: array expected");c.attribute=[];for(var f=0;f<i.attribute.length;++f){if(typeof i.attribute[f]!="object")throw TypeError(".onnx.NodeProto.attribute: object expected");c.attribute[f]=u.onnx.AttributeProto.fromObject(i.attribute[f])}}return i.docString!=null&&(c.docString=String(i.docString)),c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[]),c.defaults&&(f.name="",f.opType="",f.docString="",f.domain=""),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=i.input[d]}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=i.output[d]}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.opType!=null&&i.hasOwnProperty("opType")&&(f.opType=i.opType),i.attribute&&i.attribute.length){f.attribute=[];for(var d=0;d<i.attribute.length;++d)f.attribute[d]=u.onnx.AttributeProto.toObject(i.attribute[d],c)}return i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.NodeProto"},l}(),s.TrainingInfoProto=function(){function l(i){if(this.initializationBinding=[],this.updateBinding=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.initialization=null,l.prototype.algorithm=null,l.prototype.initializationBinding=a.emptyArray,l.prototype.updateBinding=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.initialization!=null&&Object.hasOwnProperty.call(i,"initialization")&&u.onnx.GraphProto.encode(i.initialization,c.uint32(10).fork()).ldelim(),i.algorithm!=null&&Object.hasOwnProperty.call(i,"algorithm")&&u.onnx.GraphProto.encode(i.algorithm,c.uint32(18).fork()).ldelim(),i.initializationBinding!=null&&i.initializationBinding.length)for(var f=0;f<i.initializationBinding.length;++f)u.onnx.StringStringEntryProto.encode(i.initializationBinding[f],c.uint32(26).fork()).ldelim();if(i.updateBinding!=null&&i.updateBinding.length)for(var f=0;f<i.updateBinding.length;++f)u.onnx.StringStringEntryProto.encode(i.updateBinding[f],c.uint32(34).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TrainingInfoProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.initialization=u.onnx.GraphProto.decode(i,i.uint32());break}case 2:{d.algorithm=u.onnx.GraphProto.decode(i,i.uint32());break}case 3:{d.initializationBinding&&d.initializationBinding.length||(d.initializationBinding=[]),d.initializationBinding.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 4:{d.updateBinding&&d.updateBinding.length||(d.updateBinding=[]),d.updateBinding.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.initialization!=null&&i.hasOwnProperty("initialization")){var c=u.onnx.GraphProto.verify(i.initialization);if(c)return"initialization."+c}if(i.algorithm!=null&&i.hasOwnProperty("algorithm")){var c=u.onnx.GraphProto.verify(i.algorithm);if(c)return"algorithm."+c}if(i.initializationBinding!=null&&i.hasOwnProperty("initializationBinding")){if(!Array.isArray(i.initializationBinding))return"initializationBinding: array expected";for(var f=0;f<i.initializationBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(i.initializationBinding[f]);if(c)return"initializationBinding."+c}}if(i.updateBinding!=null&&i.hasOwnProperty("updateBinding")){if(!Array.isArray(i.updateBinding))return"updateBinding: array expected";for(var f=0;f<i.updateBinding.length;++f){var c=u.onnx.StringStringEntryProto.verify(i.updateBinding[f]);if(c)return"updateBinding."+c}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TrainingInfoProto)return i;var c=new u.onnx.TrainingInfoProto;if(i.initialization!=null){if(typeof i.initialization!="object")throw TypeError(".onnx.TrainingInfoProto.initialization: object expected");c.initialization=u.onnx.GraphProto.fromObject(i.initialization)}if(i.algorithm!=null){if(typeof i.algorithm!="object")throw TypeError(".onnx.TrainingInfoProto.algorithm: object expected");c.algorithm=u.onnx.GraphProto.fromObject(i.algorithm)}if(i.initializationBinding){if(!Array.isArray(i.initializationBinding))throw TypeError(".onnx.TrainingInfoProto.initializationBinding: array expected");c.initializationBinding=[];for(var f=0;f<i.initializationBinding.length;++f){if(typeof i.initializationBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.initializationBinding: object expected");c.initializationBinding[f]=u.onnx.StringStringEntryProto.fromObject(i.initializationBinding[f])}}if(i.updateBinding){if(!Array.isArray(i.updateBinding))throw TypeError(".onnx.TrainingInfoProto.updateBinding: array expected");c.updateBinding=[];for(var f=0;f<i.updateBinding.length;++f){if(typeof i.updateBinding[f]!="object")throw TypeError(".onnx.TrainingInfoProto.updateBinding: object expected");c.updateBinding[f]=u.onnx.StringStringEntryProto.fromObject(i.updateBinding[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.initializationBinding=[],f.updateBinding=[]),c.defaults&&(f.initialization=null,f.algorithm=null),i.initialization!=null&&i.hasOwnProperty("initialization")&&(f.initialization=u.onnx.GraphProto.toObject(i.initialization,c)),i.algorithm!=null&&i.hasOwnProperty("algorithm")&&(f.algorithm=u.onnx.GraphProto.toObject(i.algorithm,c)),i.initializationBinding&&i.initializationBinding.length){f.initializationBinding=[];for(var d=0;d<i.initializationBinding.length;++d)f.initializationBinding[d]=u.onnx.StringStringEntryProto.toObject(i.initializationBinding[d],c)}if(i.updateBinding&&i.updateBinding.length){f.updateBinding=[];for(var d=0;d<i.updateBinding.length;++d)f.updateBinding[d]=u.onnx.StringStringEntryProto.toObject(i.updateBinding[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TrainingInfoProto"},l}(),s.ModelProto=function(){function l(i){if(this.opsetImport=[],this.metadataProps=[],this.trainingInfo=[],this.functions=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.irVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.opsetImport=a.emptyArray,l.prototype.producerName="",l.prototype.producerVersion="",l.prototype.domain="",l.prototype.modelVersion=a.Long?a.Long.fromBits(0,0,!1):0,l.prototype.docString="",l.prototype.graph=null,l.prototype.metadataProps=a.emptyArray,l.prototype.trainingInfo=a.emptyArray,l.prototype.functions=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.irVersion!=null&&Object.hasOwnProperty.call(i,"irVersion")&&c.uint32(8).int64(i.irVersion),i.producerName!=null&&Object.hasOwnProperty.call(i,"producerName")&&c.uint32(18).string(i.producerName),i.producerVersion!=null&&Object.hasOwnProperty.call(i,"producerVersion")&&c.uint32(26).string(i.producerVersion),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(34).string(i.domain),i.modelVersion!=null&&Object.hasOwnProperty.call(i,"modelVersion")&&c.uint32(40).int64(i.modelVersion),i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(50).string(i.docString),i.graph!=null&&Object.hasOwnProperty.call(i,"graph")&&u.onnx.GraphProto.encode(i.graph,c.uint32(58).fork()).ldelim(),i.opsetImport!=null&&i.opsetImport.length)for(var f=0;f<i.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(i.opsetImport[f],c.uint32(66).fork()).ldelim();if(i.metadataProps!=null&&i.metadataProps.length)for(var f=0;f<i.metadataProps.length;++f)u.onnx.StringStringEntryProto.encode(i.metadataProps[f],c.uint32(114).fork()).ldelim();if(i.trainingInfo!=null&&i.trainingInfo.length)for(var f=0;f<i.trainingInfo.length;++f)u.onnx.TrainingInfoProto.encode(i.trainingInfo[f],c.uint32(162).fork()).ldelim();if(i.functions!=null&&i.functions.length)for(var f=0;f<i.functions.length;++f)u.onnx.FunctionProto.encode(i.functions[f],c.uint32(202).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.ModelProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.irVersion=i.int64();break}case 8:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(i,i.uint32()));break}case 2:{d.producerName=i.string();break}case 3:{d.producerVersion=i.string();break}case 4:{d.domain=i.string();break}case 5:{d.modelVersion=i.int64();break}case 6:{d.docString=i.string();break}case 7:{d.graph=u.onnx.GraphProto.decode(i,i.uint32());break}case 14:{d.metadataProps&&d.metadataProps.length||(d.metadataProps=[]),d.metadataProps.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 20:{d.trainingInfo&&d.trainingInfo.length||(d.trainingInfo=[]),d.trainingInfo.push(u.onnx.TrainingInfoProto.decode(i,i.uint32()));break}case 25:{d.functions&&d.functions.length||(d.functions=[]),d.functions.push(u.onnx.FunctionProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&!a.isInteger(i.irVersion)&&!(i.irVersion&&a.isInteger(i.irVersion.low)&&a.isInteger(i.irVersion.high)))return"irVersion: integer|Long expected";if(i.opsetImport!=null&&i.hasOwnProperty("opsetImport")){if(!Array.isArray(i.opsetImport))return"opsetImport: array expected";for(var c=0;c<i.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(i.opsetImport[c]);if(f)return"opsetImport."+f}}if(i.producerName!=null&&i.hasOwnProperty("producerName")&&!a.isString(i.producerName))return"producerName: string expected";if(i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&!a.isString(i.producerVersion))return"producerVersion: string expected";if(i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain))return"domain: string expected";if(i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&!a.isInteger(i.modelVersion)&&!(i.modelVersion&&a.isInteger(i.modelVersion.low)&&a.isInteger(i.modelVersion.high)))return"modelVersion: integer|Long expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.graph!=null&&i.hasOwnProperty("graph")){var f=u.onnx.GraphProto.verify(i.graph);if(f)return"graph."+f}if(i.metadataProps!=null&&i.hasOwnProperty("metadataProps")){if(!Array.isArray(i.metadataProps))return"metadataProps: array expected";for(var c=0;c<i.metadataProps.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.metadataProps[c]);if(f)return"metadataProps."+f}}if(i.trainingInfo!=null&&i.hasOwnProperty("trainingInfo")){if(!Array.isArray(i.trainingInfo))return"trainingInfo: array expected";for(var c=0;c<i.trainingInfo.length;++c){var f=u.onnx.TrainingInfoProto.verify(i.trainingInfo[c]);if(f)return"trainingInfo."+f}}if(i.functions!=null&&i.hasOwnProperty("functions")){if(!Array.isArray(i.functions))return"functions: array expected";for(var c=0;c<i.functions.length;++c){var f=u.onnx.FunctionProto.verify(i.functions[c]);if(f)return"functions."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.ModelProto)return i;var c=new u.onnx.ModelProto;if(i.irVersion!=null&&(a.Long?(c.irVersion=a.Long.fromValue(i.irVersion)).unsigned=!1:typeof i.irVersion=="string"?c.irVersion=parseInt(i.irVersion,10):typeof i.irVersion=="number"?c.irVersion=i.irVersion:typeof i.irVersion=="object"&&(c.irVersion=new a.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber())),i.opsetImport){if(!Array.isArray(i.opsetImport))throw TypeError(".onnx.ModelProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<i.opsetImport.length;++f){if(typeof i.opsetImport[f]!="object")throw TypeError(".onnx.ModelProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(i.opsetImport[f])}}if(i.producerName!=null&&(c.producerName=String(i.producerName)),i.producerVersion!=null&&(c.producerVersion=String(i.producerVersion)),i.domain!=null&&(c.domain=String(i.domain)),i.modelVersion!=null&&(a.Long?(c.modelVersion=a.Long.fromValue(i.modelVersion)).unsigned=!1:typeof i.modelVersion=="string"?c.modelVersion=parseInt(i.modelVersion,10):typeof i.modelVersion=="number"?c.modelVersion=i.modelVersion:typeof i.modelVersion=="object"&&(c.modelVersion=new a.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber())),i.docString!=null&&(c.docString=String(i.docString)),i.graph!=null){if(typeof i.graph!="object")throw TypeError(".onnx.ModelProto.graph: object expected");c.graph=u.onnx.GraphProto.fromObject(i.graph)}if(i.metadataProps){if(!Array.isArray(i.metadataProps))throw TypeError(".onnx.ModelProto.metadataProps: array expected");c.metadataProps=[];for(var f=0;f<i.metadataProps.length;++f){if(typeof i.metadataProps[f]!="object")throw TypeError(".onnx.ModelProto.metadataProps: object expected");c.metadataProps[f]=u.onnx.StringStringEntryProto.fromObject(i.metadataProps[f])}}if(i.trainingInfo){if(!Array.isArray(i.trainingInfo))throw TypeError(".onnx.ModelProto.trainingInfo: array expected");c.trainingInfo=[];for(var f=0;f<i.trainingInfo.length;++f){if(typeof i.trainingInfo[f]!="object")throw TypeError(".onnx.ModelProto.trainingInfo: object expected");c.trainingInfo[f]=u.onnx.TrainingInfoProto.fromObject(i.trainingInfo[f])}}if(i.functions){if(!Array.isArray(i.functions))throw TypeError(".onnx.ModelProto.functions: array expected");c.functions=[];for(var f=0;f<i.functions.length;++f){if(typeof i.functions[f]!="object")throw TypeError(".onnx.ModelProto.functions: object expected");c.functions[f]=u.onnx.FunctionProto.fromObject(i.functions[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.opsetImport=[],f.metadataProps=[],f.trainingInfo=[],f.functions=[]),c.defaults){if(a.Long){var d=new a.Long(0,0,!1);f.irVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.irVersion=c.longs===String?"0":0;if(f.producerName="",f.producerVersion="",f.domain="",a.Long){var d=new a.Long(0,0,!1);f.modelVersion=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.modelVersion=c.longs===String?"0":0;f.docString="",f.graph=null}if(i.irVersion!=null&&i.hasOwnProperty("irVersion")&&(typeof i.irVersion=="number"?f.irVersion=c.longs===String?String(i.irVersion):i.irVersion:f.irVersion=c.longs===String?a.Long.prototype.toString.call(i.irVersion):c.longs===Number?new a.LongBits(i.irVersion.low>>>0,i.irVersion.high>>>0).toNumber():i.irVersion),i.producerName!=null&&i.hasOwnProperty("producerName")&&(f.producerName=i.producerName),i.producerVersion!=null&&i.hasOwnProperty("producerVersion")&&(f.producerVersion=i.producerVersion),i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.modelVersion!=null&&i.hasOwnProperty("modelVersion")&&(typeof i.modelVersion=="number"?f.modelVersion=c.longs===String?String(i.modelVersion):i.modelVersion:f.modelVersion=c.longs===String?a.Long.prototype.toString.call(i.modelVersion):c.longs===Number?new a.LongBits(i.modelVersion.low>>>0,i.modelVersion.high>>>0).toNumber():i.modelVersion),i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.graph!=null&&i.hasOwnProperty("graph")&&(f.graph=u.onnx.GraphProto.toObject(i.graph,c)),i.opsetImport&&i.opsetImport.length){f.opsetImport=[];for(var h=0;h<i.opsetImport.length;++h)f.opsetImport[h]=u.onnx.OperatorSetIdProto.toObject(i.opsetImport[h],c)}if(i.metadataProps&&i.metadataProps.length){f.metadataProps=[];for(var h=0;h<i.metadataProps.length;++h)f.metadataProps[h]=u.onnx.StringStringEntryProto.toObject(i.metadataProps[h],c)}if(i.trainingInfo&&i.trainingInfo.length){f.trainingInfo=[];for(var h=0;h<i.trainingInfo.length;++h)f.trainingInfo[h]=u.onnx.TrainingInfoProto.toObject(i.trainingInfo[h],c)}if(i.functions&&i.functions.length){f.functions=[];for(var h=0;h<i.functions.length;++h)f.functions[h]=u.onnx.FunctionProto.toObject(i.functions[h],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.ModelProto"},l}(),s.StringStringEntryProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.key="",l.prototype.value="",l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.key!=null&&Object.hasOwnProperty.call(i,"key")&&c.uint32(10).string(i.key),i.value!=null&&Object.hasOwnProperty.call(i,"value")&&c.uint32(18).string(i.value),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.StringStringEntryProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.key=i.string();break}case 2:{d.value=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){return typeof i!="object"||i===null?"object expected":i.key!=null&&i.hasOwnProperty("key")&&!a.isString(i.key)?"key: string expected":i.value!=null&&i.hasOwnProperty("value")&&!a.isString(i.value)?"value: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.StringStringEntryProto)return i;var c=new u.onnx.StringStringEntryProto;return i.key!=null&&(c.key=String(i.key)),i.value!=null&&(c.value=String(i.value)),c},l.toObject=function(i,c){c||(c={});var f={};return c.defaults&&(f.key="",f.value=""),i.key!=null&&i.hasOwnProperty("key")&&(f.key=i.key),i.value!=null&&i.hasOwnProperty("value")&&(f.value=i.value),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.StringStringEntryProto"},l}(),s.TensorAnnotation=function(){function l(i){if(this.quantParameterTensorNames=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.tensorName="",l.prototype.quantParameterTensorNames=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.tensorName!=null&&Object.hasOwnProperty.call(i,"tensorName")&&c.uint32(10).string(i.tensorName),i.quantParameterTensorNames!=null&&i.quantParameterTensorNames.length)for(var f=0;f<i.quantParameterTensorNames.length;++f)u.onnx.StringStringEntryProto.encode(i.quantParameterTensorNames[f],c.uint32(18).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorAnnotation;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.tensorName=i.string();break}case 2:{d.quantParameterTensorNames&&d.quantParameterTensorNames.length||(d.quantParameterTensorNames=[]),d.quantParameterTensorNames.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.tensorName!=null&&i.hasOwnProperty("tensorName")&&!a.isString(i.tensorName))return"tensorName: string expected";if(i.quantParameterTensorNames!=null&&i.hasOwnProperty("quantParameterTensorNames")){if(!Array.isArray(i.quantParameterTensorNames))return"quantParameterTensorNames: array expected";for(var c=0;c<i.quantParameterTensorNames.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.quantParameterTensorNames[c]);if(f)return"quantParameterTensorNames."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorAnnotation)return i;var c=new u.onnx.TensorAnnotation;if(i.tensorName!=null&&(c.tensorName=String(i.tensorName)),i.quantParameterTensorNames){if(!Array.isArray(i.quantParameterTensorNames))throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: array expected");c.quantParameterTensorNames=[];for(var f=0;f<i.quantParameterTensorNames.length;++f){if(typeof i.quantParameterTensorNames[f]!="object")throw TypeError(".onnx.TensorAnnotation.quantParameterTensorNames: object expected");c.quantParameterTensorNames[f]=u.onnx.StringStringEntryProto.fromObject(i.quantParameterTensorNames[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.quantParameterTensorNames=[]),c.defaults&&(f.tensorName=""),i.tensorName!=null&&i.hasOwnProperty("tensorName")&&(f.tensorName=i.tensorName),i.quantParameterTensorNames&&i.quantParameterTensorNames.length){f.quantParameterTensorNames=[];for(var d=0;d<i.quantParameterTensorNames.length;++d)f.quantParameterTensorNames[d]=u.onnx.StringStringEntryProto.toObject(i.quantParameterTensorNames[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorAnnotation"},l}(),s.GraphProto=function(){function l(i){if(this.node=[],this.initializer=[],this.sparseInitializer=[],this.input=[],this.output=[],this.valueInfo=[],this.quantizationAnnotation=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.node=a.emptyArray,l.prototype.name="",l.prototype.initializer=a.emptyArray,l.prototype.sparseInitializer=a.emptyArray,l.prototype.docString="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.valueInfo=a.emptyArray,l.prototype.quantizationAnnotation=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.node!=null&&i.node.length)for(var f=0;f<i.node.length;++f)u.onnx.NodeProto.encode(i.node[f],c.uint32(10).fork()).ldelim();if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(18).string(i.name),i.initializer!=null&&i.initializer.length)for(var f=0;f<i.initializer.length;++f)u.onnx.TensorProto.encode(i.initializer[f],c.uint32(42).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(82).string(i.docString),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)u.onnx.ValueInfoProto.encode(i.input[f],c.uint32(90).fork()).ldelim();if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)u.onnx.ValueInfoProto.encode(i.output[f],c.uint32(98).fork()).ldelim();if(i.valueInfo!=null&&i.valueInfo.length)for(var f=0;f<i.valueInfo.length;++f)u.onnx.ValueInfoProto.encode(i.valueInfo[f],c.uint32(106).fork()).ldelim();if(i.quantizationAnnotation!=null&&i.quantizationAnnotation.length)for(var f=0;f<i.quantizationAnnotation.length;++f)u.onnx.TensorAnnotation.encode(i.quantizationAnnotation[f],c.uint32(114).fork()).ldelim();if(i.sparseInitializer!=null&&i.sparseInitializer.length)for(var f=0;f<i.sparseInitializer.length;++f)u.onnx.SparseTensorProto.encode(i.sparseInitializer[f],c.uint32(122).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.GraphProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(i,i.uint32()));break}case 2:{d.name=i.string();break}case 5:{d.initializer&&d.initializer.length||(d.initializer=[]),d.initializer.push(u.onnx.TensorProto.decode(i,i.uint32()));break}case 15:{d.sparseInitializer&&d.sparseInitializer.length||(d.sparseInitializer=[]),d.sparseInitializer.push(u.onnx.SparseTensorProto.decode(i,i.uint32()));break}case 10:{d.docString=i.string();break}case 11:{d.input&&d.input.length||(d.input=[]),d.input.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 12:{d.output&&d.output.length||(d.output=[]),d.output.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 13:{d.valueInfo&&d.valueInfo.length||(d.valueInfo=[]),d.valueInfo.push(u.onnx.ValueInfoProto.decode(i,i.uint32()));break}case 14:{d.quantizationAnnotation&&d.quantizationAnnotation.length||(d.quantizationAnnotation=[]),d.quantizationAnnotation.push(u.onnx.TensorAnnotation.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.node!=null&&i.hasOwnProperty("node")){if(!Array.isArray(i.node))return"node: array expected";for(var c=0;c<i.node.length;++c){var f=u.onnx.NodeProto.verify(i.node[c]);if(f)return"node."+f}}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.initializer!=null&&i.hasOwnProperty("initializer")){if(!Array.isArray(i.initializer))return"initializer: array expected";for(var c=0;c<i.initializer.length;++c){var f=u.onnx.TensorProto.verify(i.initializer[c]);if(f)return"initializer."+f}}if(i.sparseInitializer!=null&&i.hasOwnProperty("sparseInitializer")){if(!Array.isArray(i.sparseInitializer))return"sparseInitializer: array expected";for(var c=0;c<i.sparseInitializer.length;++c){var f=u.onnx.SparseTensorProto.verify(i.sparseInitializer[c]);if(f)return"sparseInitializer."+f}}if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c){var f=u.onnx.ValueInfoProto.verify(i.input[c]);if(f)return"input."+f}}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c){var f=u.onnx.ValueInfoProto.verify(i.output[c]);if(f)return"output."+f}}if(i.valueInfo!=null&&i.hasOwnProperty("valueInfo")){if(!Array.isArray(i.valueInfo))return"valueInfo: array expected";for(var c=0;c<i.valueInfo.length;++c){var f=u.onnx.ValueInfoProto.verify(i.valueInfo[c]);if(f)return"valueInfo."+f}}if(i.quantizationAnnotation!=null&&i.hasOwnProperty("quantizationAnnotation")){if(!Array.isArray(i.quantizationAnnotation))return"quantizationAnnotation: array expected";for(var c=0;c<i.quantizationAnnotation.length;++c){var f=u.onnx.TensorAnnotation.verify(i.quantizationAnnotation[c]);if(f)return"quantizationAnnotation."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.GraphProto)return i;var c=new u.onnx.GraphProto;if(i.node){if(!Array.isArray(i.node))throw TypeError(".onnx.GraphProto.node: array expected");c.node=[];for(var f=0;f<i.node.length;++f){if(typeof i.node[f]!="object")throw TypeError(".onnx.GraphProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(i.node[f])}}if(i.name!=null&&(c.name=String(i.name)),i.initializer){if(!Array.isArray(i.initializer))throw TypeError(".onnx.GraphProto.initializer: array expected");c.initializer=[];for(var f=0;f<i.initializer.length;++f){if(typeof i.initializer[f]!="object")throw TypeError(".onnx.GraphProto.initializer: object expected");c.initializer[f]=u.onnx.TensorProto.fromObject(i.initializer[f])}}if(i.sparseInitializer){if(!Array.isArray(i.sparseInitializer))throw TypeError(".onnx.GraphProto.sparseInitializer: array expected");c.sparseInitializer=[];for(var f=0;f<i.sparseInitializer.length;++f){if(typeof i.sparseInitializer[f]!="object")throw TypeError(".onnx.GraphProto.sparseInitializer: object expected");c.sparseInitializer[f]=u.onnx.SparseTensorProto.fromObject(i.sparseInitializer[f])}}if(i.docString!=null&&(c.docString=String(i.docString)),i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.GraphProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f){if(typeof i.input[f]!="object")throw TypeError(".onnx.GraphProto.input: object expected");c.input[f]=u.onnx.ValueInfoProto.fromObject(i.input[f])}}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.GraphProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f){if(typeof i.output[f]!="object")throw TypeError(".onnx.GraphProto.output: object expected");c.output[f]=u.onnx.ValueInfoProto.fromObject(i.output[f])}}if(i.valueInfo){if(!Array.isArray(i.valueInfo))throw TypeError(".onnx.GraphProto.valueInfo: array expected");c.valueInfo=[];for(var f=0;f<i.valueInfo.length;++f){if(typeof i.valueInfo[f]!="object")throw TypeError(".onnx.GraphProto.valueInfo: object expected");c.valueInfo[f]=u.onnx.ValueInfoProto.fromObject(i.valueInfo[f])}}if(i.quantizationAnnotation){if(!Array.isArray(i.quantizationAnnotation))throw TypeError(".onnx.GraphProto.quantizationAnnotation: array expected");c.quantizationAnnotation=[];for(var f=0;f<i.quantizationAnnotation.length;++f){if(typeof i.quantizationAnnotation[f]!="object")throw TypeError(".onnx.GraphProto.quantizationAnnotation: object expected");c.quantizationAnnotation[f]=u.onnx.TensorAnnotation.fromObject(i.quantizationAnnotation[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.node=[],f.initializer=[],f.input=[],f.output=[],f.valueInfo=[],f.quantizationAnnotation=[],f.sparseInitializer=[]),c.defaults&&(f.name="",f.docString=""),i.node&&i.node.length){f.node=[];for(var d=0;d<i.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(i.node[d],c)}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.initializer&&i.initializer.length){f.initializer=[];for(var d=0;d<i.initializer.length;++d)f.initializer[d]=u.onnx.TensorProto.toObject(i.initializer[d],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=u.onnx.ValueInfoProto.toObject(i.input[d],c)}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=u.onnx.ValueInfoProto.toObject(i.output[d],c)}if(i.valueInfo&&i.valueInfo.length){f.valueInfo=[];for(var d=0;d<i.valueInfo.length;++d)f.valueInfo[d]=u.onnx.ValueInfoProto.toObject(i.valueInfo[d],c)}if(i.quantizationAnnotation&&i.quantizationAnnotation.length){f.quantizationAnnotation=[];for(var d=0;d<i.quantizationAnnotation.length;++d)f.quantizationAnnotation[d]=u.onnx.TensorAnnotation.toObject(i.quantizationAnnotation[d],c)}if(i.sparseInitializer&&i.sparseInitializer.length){f.sparseInitializer=[];for(var d=0;d<i.sparseInitializer.length;++d)f.sparseInitializer[d]=u.onnx.SparseTensorProto.toObject(i.sparseInitializer[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.GraphProto"},l}(),s.TensorProto=function(){function l(i){if(this.dims=[],this.floatData=[],this.int32Data=[],this.stringData=[],this.int64Data=[],this.externalData=[],this.doubleData=[],this.uint64Data=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.dims=a.emptyArray,l.prototype.dataType=0,l.prototype.segment=null,l.prototype.floatData=a.emptyArray,l.prototype.int32Data=a.emptyArray,l.prototype.stringData=a.emptyArray,l.prototype.int64Data=a.emptyArray,l.prototype.name="",l.prototype.docString="",l.prototype.rawData=a.newBuffer([]),l.prototype.externalData=a.emptyArray,l.prototype.dataLocation=0,l.prototype.doubleData=a.emptyArray,l.prototype.uint64Data=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.dims!=null&&i.dims.length){c.uint32(10).fork();for(var f=0;f<i.dims.length;++f)c.int64(i.dims[f]);c.ldelim()}if(i.dataType!=null&&Object.hasOwnProperty.call(i,"dataType")&&c.uint32(16).int32(i.dataType),i.segment!=null&&Object.hasOwnProperty.call(i,"segment")&&u.onnx.TensorProto.Segment.encode(i.segment,c.uint32(26).fork()).ldelim(),i.floatData!=null&&i.floatData.length){c.uint32(34).fork();for(var f=0;f<i.floatData.length;++f)c.float(i.floatData[f]);c.ldelim()}if(i.int32Data!=null&&i.int32Data.length){c.uint32(42).fork();for(var f=0;f<i.int32Data.length;++f)c.int32(i.int32Data[f]);c.ldelim()}if(i.stringData!=null&&i.stringData.length)for(var f=0;f<i.stringData.length;++f)c.uint32(50).bytes(i.stringData[f]);if(i.int64Data!=null&&i.int64Data.length){c.uint32(58).fork();for(var f=0;f<i.int64Data.length;++f)c.int64(i.int64Data[f]);c.ldelim()}if(i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(66).string(i.name),i.rawData!=null&&Object.hasOwnProperty.call(i,"rawData")&&c.uint32(74).bytes(i.rawData),i.doubleData!=null&&i.doubleData.length){c.uint32(82).fork();for(var f=0;f<i.doubleData.length;++f)c.double(i.doubleData[f]);c.ldelim()}if(i.uint64Data!=null&&i.uint64Data.length){c.uint32(90).fork();for(var f=0;f<i.uint64Data.length;++f)c.uint64(i.uint64Data[f]);c.ldelim()}if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(98).string(i.docString),i.externalData!=null&&i.externalData.length)for(var f=0;f<i.externalData.length;++f)u.onnx.StringStringEntryProto.encode(i.externalData[f],c.uint32(106).fork()).ldelim();return i.dataLocation!=null&&Object.hasOwnProperty.call(i,"dataLocation")&&c.uint32(112).int32(i.dataLocation),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.dims.push(i.int64());else d.dims.push(i.int64());break}case 2:{d.dataType=i.int32();break}case 3:{d.segment=u.onnx.TensorProto.Segment.decode(i,i.uint32());break}case 4:{if(d.floatData&&d.floatData.length||(d.floatData=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.floatData.push(i.float());else d.floatData.push(i.float());break}case 5:{if(d.int32Data&&d.int32Data.length||(d.int32Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.int32Data.push(i.int32());else d.int32Data.push(i.int32());break}case 6:{d.stringData&&d.stringData.length||(d.stringData=[]),d.stringData.push(i.bytes());break}case 7:{if(d.int64Data&&d.int64Data.length||(d.int64Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.int64Data.push(i.int64());else d.int64Data.push(i.int64());break}case 8:{d.name=i.string();break}case 12:{d.docString=i.string();break}case 9:{d.rawData=i.bytes();break}case 13:{d.externalData&&d.externalData.length||(d.externalData=[]),d.externalData.push(u.onnx.StringStringEntryProto.decode(i,i.uint32()));break}case 14:{d.dataLocation=i.int32();break}case 10:{if(d.doubleData&&d.doubleData.length||(d.doubleData=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.doubleData.push(i.double());else d.doubleData.push(i.double());break}case 11:{if(d.uint64Data&&d.uint64Data.length||(d.uint64Data=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.uint64Data.push(i.uint64());else d.uint64Data.push(i.uint64());break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dims!=null&&i.hasOwnProperty("dims")){if(!Array.isArray(i.dims))return"dims: array expected";for(var c=0;c<i.dims.length;++c)if(!a.isInteger(i.dims[c])&&!(i.dims[c]&&a.isInteger(i.dims[c].low)&&a.isInteger(i.dims[c].high)))return"dims: integer|Long[] expected"}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&!a.isInteger(i.dataType))return"dataType: integer expected";if(i.segment!=null&&i.hasOwnProperty("segment")){var f=u.onnx.TensorProto.Segment.verify(i.segment);if(f)return"segment."+f}if(i.floatData!=null&&i.hasOwnProperty("floatData")){if(!Array.isArray(i.floatData))return"floatData: array expected";for(var c=0;c<i.floatData.length;++c)if(typeof i.floatData[c]!="number")return"floatData: number[] expected"}if(i.int32Data!=null&&i.hasOwnProperty("int32Data")){if(!Array.isArray(i.int32Data))return"int32Data: array expected";for(var c=0;c<i.int32Data.length;++c)if(!a.isInteger(i.int32Data[c]))return"int32Data: integer[] expected"}if(i.stringData!=null&&i.hasOwnProperty("stringData")){if(!Array.isArray(i.stringData))return"stringData: array expected";for(var c=0;c<i.stringData.length;++c)if(!(i.stringData[c]&&typeof i.stringData[c].length=="number"||a.isString(i.stringData[c])))return"stringData: buffer[] expected"}if(i.int64Data!=null&&i.hasOwnProperty("int64Data")){if(!Array.isArray(i.int64Data))return"int64Data: array expected";for(var c=0;c<i.int64Data.length;++c)if(!a.isInteger(i.int64Data[c])&&!(i.int64Data[c]&&a.isInteger(i.int64Data[c].low)&&a.isInteger(i.int64Data[c].high)))return"int64Data: integer|Long[] expected"}if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.rawData!=null&&i.hasOwnProperty("rawData")&&!(i.rawData&&typeof i.rawData.length=="number"||a.isString(i.rawData)))return"rawData: buffer expected";if(i.externalData!=null&&i.hasOwnProperty("externalData")){if(!Array.isArray(i.externalData))return"externalData: array expected";for(var c=0;c<i.externalData.length;++c){var f=u.onnx.StringStringEntryProto.verify(i.externalData[c]);if(f)return"externalData."+f}}if(i.dataLocation!=null&&i.hasOwnProperty("dataLocation"))switch(i.dataLocation){default:return"dataLocation: enum value expected";case 0:case 1:break}if(i.doubleData!=null&&i.hasOwnProperty("doubleData")){if(!Array.isArray(i.doubleData))return"doubleData: array expected";for(var c=0;c<i.doubleData.length;++c)if(typeof i.doubleData[c]!="number")return"doubleData: number[] expected"}if(i.uint64Data!=null&&i.hasOwnProperty("uint64Data")){if(!Array.isArray(i.uint64Data))return"uint64Data: array expected";for(var c=0;c<i.uint64Data.length;++c)if(!a.isInteger(i.uint64Data[c])&&!(i.uint64Data[c]&&a.isInteger(i.uint64Data[c].low)&&a.isInteger(i.uint64Data[c].high)))return"uint64Data: integer|Long[] expected"}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorProto)return i;var c=new u.onnx.TensorProto;if(i.dims){if(!Array.isArray(i.dims))throw TypeError(".onnx.TensorProto.dims: array expected");c.dims=[];for(var f=0;f<i.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(i.dims[f])).unsigned=!1:typeof i.dims[f]=="string"?c.dims[f]=parseInt(i.dims[f],10):typeof i.dims[f]=="number"?c.dims[f]=i.dims[f]:typeof i.dims[f]=="object"&&(c.dims[f]=new a.LongBits(i.dims[f].low>>>0,i.dims[f].high>>>0).toNumber())}if(i.dataType!=null&&(c.dataType=i.dataType|0),i.segment!=null){if(typeof i.segment!="object")throw TypeError(".onnx.TensorProto.segment: object expected");c.segment=u.onnx.TensorProto.Segment.fromObject(i.segment)}if(i.floatData){if(!Array.isArray(i.floatData))throw TypeError(".onnx.TensorProto.floatData: array expected");c.floatData=[];for(var f=0;f<i.floatData.length;++f)c.floatData[f]=Number(i.floatData[f])}if(i.int32Data){if(!Array.isArray(i.int32Data))throw TypeError(".onnx.TensorProto.int32Data: array expected");c.int32Data=[];for(var f=0;f<i.int32Data.length;++f)c.int32Data[f]=i.int32Data[f]|0}if(i.stringData){if(!Array.isArray(i.stringData))throw TypeError(".onnx.TensorProto.stringData: array expected");c.stringData=[];for(var f=0;f<i.stringData.length;++f)typeof i.stringData[f]=="string"?a.base64.decode(i.stringData[f],c.stringData[f]=a.newBuffer(a.base64.length(i.stringData[f])),0):i.stringData[f].length>=0&&(c.stringData[f]=i.stringData[f])}if(i.int64Data){if(!Array.isArray(i.int64Data))throw TypeError(".onnx.TensorProto.int64Data: array expected");c.int64Data=[];for(var f=0;f<i.int64Data.length;++f)a.Long?(c.int64Data[f]=a.Long.fromValue(i.int64Data[f])).unsigned=!1:typeof i.int64Data[f]=="string"?c.int64Data[f]=parseInt(i.int64Data[f],10):typeof i.int64Data[f]=="number"?c.int64Data[f]=i.int64Data[f]:typeof i.int64Data[f]=="object"&&(c.int64Data[f]=new a.LongBits(i.int64Data[f].low>>>0,i.int64Data[f].high>>>0).toNumber())}if(i.name!=null&&(c.name=String(i.name)),i.docString!=null&&(c.docString=String(i.docString)),i.rawData!=null&&(typeof i.rawData=="string"?a.base64.decode(i.rawData,c.rawData=a.newBuffer(a.base64.length(i.rawData)),0):i.rawData.length>=0&&(c.rawData=i.rawData)),i.externalData){if(!Array.isArray(i.externalData))throw TypeError(".onnx.TensorProto.externalData: array expected");c.externalData=[];for(var f=0;f<i.externalData.length;++f){if(typeof i.externalData[f]!="object")throw TypeError(".onnx.TensorProto.externalData: object expected");c.externalData[f]=u.onnx.StringStringEntryProto.fromObject(i.externalData[f])}}switch(i.dataLocation){default:if(typeof i.dataLocation=="number"){c.dataLocation=i.dataLocation;break}break;case"DEFAULT":case 0:c.dataLocation=0;break;case"EXTERNAL":case 1:c.dataLocation=1;break}if(i.doubleData){if(!Array.isArray(i.doubleData))throw TypeError(".onnx.TensorProto.doubleData: array expected");c.doubleData=[];for(var f=0;f<i.doubleData.length;++f)c.doubleData[f]=Number(i.doubleData[f])}if(i.uint64Data){if(!Array.isArray(i.uint64Data))throw TypeError(".onnx.TensorProto.uint64Data: array expected");c.uint64Data=[];for(var f=0;f<i.uint64Data.length;++f)a.Long?(c.uint64Data[f]=a.Long.fromValue(i.uint64Data[f])).unsigned=!0:typeof i.uint64Data[f]=="string"?c.uint64Data[f]=parseInt(i.uint64Data[f],10):typeof i.uint64Data[f]=="number"?c.uint64Data[f]=i.uint64Data[f]:typeof i.uint64Data[f]=="object"&&(c.uint64Data[f]=new a.LongBits(i.uint64Data[f].low>>>0,i.uint64Data[f].high>>>0).toNumber(!0))}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[],f.floatData=[],f.int32Data=[],f.stringData=[],f.int64Data=[],f.doubleData=[],f.uint64Data=[],f.externalData=[]),c.defaults&&(f.dataType=0,f.segment=null,f.name="",c.bytes===String?f.rawData="":(f.rawData=[],c.bytes!==Array&&(f.rawData=a.newBuffer(f.rawData))),f.docString="",f.dataLocation=c.enums===String?"DEFAULT":0),i.dims&&i.dims.length){f.dims=[];for(var d=0;d<i.dims.length;++d)typeof i.dims[d]=="number"?f.dims[d]=c.longs===String?String(i.dims[d]):i.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(i.dims[d]):c.longs===Number?new a.LongBits(i.dims[d].low>>>0,i.dims[d].high>>>0).toNumber():i.dims[d]}if(i.dataType!=null&&i.hasOwnProperty("dataType")&&(f.dataType=i.dataType),i.segment!=null&&i.hasOwnProperty("segment")&&(f.segment=u.onnx.TensorProto.Segment.toObject(i.segment,c)),i.floatData&&i.floatData.length){f.floatData=[];for(var d=0;d<i.floatData.length;++d)f.floatData[d]=c.json&&!isFinite(i.floatData[d])?String(i.floatData[d]):i.floatData[d]}if(i.int32Data&&i.int32Data.length){f.int32Data=[];for(var d=0;d<i.int32Data.length;++d)f.int32Data[d]=i.int32Data[d]}if(i.stringData&&i.stringData.length){f.stringData=[];for(var d=0;d<i.stringData.length;++d)f.stringData[d]=c.bytes===String?a.base64.encode(i.stringData[d],0,i.stringData[d].length):c.bytes===Array?Array.prototype.slice.call(i.stringData[d]):i.stringData[d]}if(i.int64Data&&i.int64Data.length){f.int64Data=[];for(var d=0;d<i.int64Data.length;++d)typeof i.int64Data[d]=="number"?f.int64Data[d]=c.longs===String?String(i.int64Data[d]):i.int64Data[d]:f.int64Data[d]=c.longs===String?a.Long.prototype.toString.call(i.int64Data[d]):c.longs===Number?new a.LongBits(i.int64Data[d].low>>>0,i.int64Data[d].high>>>0).toNumber():i.int64Data[d]}if(i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.rawData!=null&&i.hasOwnProperty("rawData")&&(f.rawData=c.bytes===String?a.base64.encode(i.rawData,0,i.rawData.length):c.bytes===Array?Array.prototype.slice.call(i.rawData):i.rawData),i.doubleData&&i.doubleData.length){f.doubleData=[];for(var d=0;d<i.doubleData.length;++d)f.doubleData[d]=c.json&&!isFinite(i.doubleData[d])?String(i.doubleData[d]):i.doubleData[d]}if(i.uint64Data&&i.uint64Data.length){f.uint64Data=[];for(var d=0;d<i.uint64Data.length;++d)typeof i.uint64Data[d]=="number"?f.uint64Data[d]=c.longs===String?String(i.uint64Data[d]):i.uint64Data[d]:f.uint64Data[d]=c.longs===String?a.Long.prototype.toString.call(i.uint64Data[d]):c.longs===Number?new a.LongBits(i.uint64Data[d].low>>>0,i.uint64Data[d].high>>>0).toNumber(!0):i.uint64Data[d]}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.externalData&&i.externalData.length){f.externalData=[];for(var d=0;d<i.externalData.length;++d)f.externalData[d]=u.onnx.StringStringEntryProto.toObject(i.externalData[d],c)}return i.dataLocation!=null&&i.hasOwnProperty("dataLocation")&&(f.dataLocation=c.enums===String?u.onnx.TensorProto.DataLocation[i.dataLocation]===void 0?i.dataLocation:u.onnx.TensorProto.DataLocation[i.dataLocation]:i.dataLocation),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorProto"},l.DataType=function(){var i={},c=Object.create(i);return c[i[0]="UNDEFINED"]=0,c[i[1]="FLOAT"]=1,c[i[2]="UINT8"]=2,c[i[3]="INT8"]=3,c[i[4]="UINT16"]=4,c[i[5]="INT16"]=5,c[i[6]="INT32"]=6,c[i[7]="INT64"]=7,c[i[8]="STRING"]=8,c[i[9]="BOOL"]=9,c[i[10]="FLOAT16"]=10,c[i[11]="DOUBLE"]=11,c[i[12]="UINT32"]=12,c[i[13]="UINT64"]=13,c[i[14]="COMPLEX64"]=14,c[i[15]="COMPLEX128"]=15,c[i[16]="BFLOAT16"]=16,c[i[17]="FLOAT8E4M3FN"]=17,c[i[18]="FLOAT8E4M3FNUZ"]=18,c[i[19]="FLOAT8E5M2"]=19,c[i[20]="FLOAT8E5M2FNUZ"]=20,c}(),l.Segment=function(){function i(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}return i.prototype.begin=a.Long?a.Long.fromBits(0,0,!1):0,i.prototype.end=a.Long?a.Long.fromBits(0,0,!1):0,i.create=function(c){return new i(c)},i.encode=function(c,f){return f||(f=o.create()),c.begin!=null&&Object.hasOwnProperty.call(c,"begin")&&f.uint32(8).int64(c.begin),c.end!=null&&Object.hasOwnProperty.call(c,"end")&&f.uint32(16).int64(c.end),f},i.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},i.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TensorProto.Segment;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.begin=c.int64();break}case 2:{h.end=c.int64();break}default:c.skipType(p&7);break}}return h},i.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},i.verify=function(c){return typeof c!="object"||c===null?"object expected":c.begin!=null&&c.hasOwnProperty("begin")&&!a.isInteger(c.begin)&&!(c.begin&&a.isInteger(c.begin.low)&&a.isInteger(c.begin.high))?"begin: integer|Long expected":c.end!=null&&c.hasOwnProperty("end")&&!a.isInteger(c.end)&&!(c.end&&a.isInteger(c.end.low)&&a.isInteger(c.end.high))?"end: integer|Long expected":null},i.fromObject=function(c){if(c instanceof u.onnx.TensorProto.Segment)return c;var f=new u.onnx.TensorProto.Segment;return c.begin!=null&&(a.Long?(f.begin=a.Long.fromValue(c.begin)).unsigned=!1:typeof c.begin=="string"?f.begin=parseInt(c.begin,10):typeof c.begin=="number"?f.begin=c.begin:typeof c.begin=="object"&&(f.begin=new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber())),c.end!=null&&(a.Long?(f.end=a.Long.fromValue(c.end)).unsigned=!1:typeof c.end=="string"?f.end=parseInt(c.end,10):typeof c.end=="number"?f.end=c.end:typeof c.end=="object"&&(f.end=new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber())),f},i.toObject=function(c,f){f||(f={});var d={};if(f.defaults){if(a.Long){var h=new a.Long(0,0,!1);d.begin=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.begin=f.longs===String?"0":0;if(a.Long){var h=new a.Long(0,0,!1);d.end=f.longs===String?h.toString():f.longs===Number?h.toNumber():h}else d.end=f.longs===String?"0":0}return c.begin!=null&&c.hasOwnProperty("begin")&&(typeof c.begin=="number"?d.begin=f.longs===String?String(c.begin):c.begin:d.begin=f.longs===String?a.Long.prototype.toString.call(c.begin):f.longs===Number?new a.LongBits(c.begin.low>>>0,c.begin.high>>>0).toNumber():c.begin),c.end!=null&&c.hasOwnProperty("end")&&(typeof c.end=="number"?d.end=f.longs===String?String(c.end):c.end:d.end=f.longs===String?a.Long.prototype.toString.call(c.end):f.longs===Number?new a.LongBits(c.end.low>>>0,c.end.high>>>0).toNumber():c.end),d},i.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},i.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TensorProto.Segment"},i}(),l.DataLocation=function(){var i={},c=Object.create(i);return c[i[0]="DEFAULT"]=0,c[i[1]="EXTERNAL"]=1,c}(),l}(),s.SparseTensorProto=function(){function l(i){if(this.dims=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.values=null,l.prototype.indices=null,l.prototype.dims=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.values!=null&&Object.hasOwnProperty.call(i,"values")&&u.onnx.TensorProto.encode(i.values,c.uint32(10).fork()).ldelim(),i.indices!=null&&Object.hasOwnProperty.call(i,"indices")&&u.onnx.TensorProto.encode(i.indices,c.uint32(18).fork()).ldelim(),i.dims!=null&&i.dims.length){c.uint32(26).fork();for(var f=0;f<i.dims.length;++f)c.int64(i.dims[f]);c.ldelim()}return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.SparseTensorProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.values=u.onnx.TensorProto.decode(i,i.uint32());break}case 2:{d.indices=u.onnx.TensorProto.decode(i,i.uint32());break}case 3:{if(d.dims&&d.dims.length||(d.dims=[]),(h&7)===2)for(var p=i.uint32()+i.pos;i.pos<p;)d.dims.push(i.int64());else d.dims.push(i.int64());break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.values!=null&&i.hasOwnProperty("values")){var c=u.onnx.TensorProto.verify(i.values);if(c)return"values."+c}if(i.indices!=null&&i.hasOwnProperty("indices")){var c=u.onnx.TensorProto.verify(i.indices);if(c)return"indices."+c}if(i.dims!=null&&i.hasOwnProperty("dims")){if(!Array.isArray(i.dims))return"dims: array expected";for(var f=0;f<i.dims.length;++f)if(!a.isInteger(i.dims[f])&&!(i.dims[f]&&a.isInteger(i.dims[f].low)&&a.isInteger(i.dims[f].high)))return"dims: integer|Long[] expected"}return null},l.fromObject=function(i){if(i instanceof u.onnx.SparseTensorProto)return i;var c=new u.onnx.SparseTensorProto;if(i.values!=null){if(typeof i.values!="object")throw TypeError(".onnx.SparseTensorProto.values: object expected");c.values=u.onnx.TensorProto.fromObject(i.values)}if(i.indices!=null){if(typeof i.indices!="object")throw TypeError(".onnx.SparseTensorProto.indices: object expected");c.indices=u.onnx.TensorProto.fromObject(i.indices)}if(i.dims){if(!Array.isArray(i.dims))throw TypeError(".onnx.SparseTensorProto.dims: array expected");c.dims=[];for(var f=0;f<i.dims.length;++f)a.Long?(c.dims[f]=a.Long.fromValue(i.dims[f])).unsigned=!1:typeof i.dims[f]=="string"?c.dims[f]=parseInt(i.dims[f],10):typeof i.dims[f]=="number"?c.dims[f]=i.dims[f]:typeof i.dims[f]=="object"&&(c.dims[f]=new a.LongBits(i.dims[f].low>>>0,i.dims[f].high>>>0).toNumber())}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dims=[]),c.defaults&&(f.values=null,f.indices=null),i.values!=null&&i.hasOwnProperty("values")&&(f.values=u.onnx.TensorProto.toObject(i.values,c)),i.indices!=null&&i.hasOwnProperty("indices")&&(f.indices=u.onnx.TensorProto.toObject(i.indices,c)),i.dims&&i.dims.length){f.dims=[];for(var d=0;d<i.dims.length;++d)typeof i.dims[d]=="number"?f.dims[d]=c.longs===String?String(i.dims[d]):i.dims[d]:f.dims[d]=c.longs===String?a.Long.prototype.toString.call(i.dims[d]):c.longs===Number?new a.LongBits(i.dims[d].low>>>0,i.dims[d].high>>>0).toNumber():i.dims[d]}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.SparseTensorProto"},l}(),s.TensorShapeProto=function(){function l(i){if(this.dim=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.dim=a.emptyArray,l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.dim!=null&&i.dim.length)for(var f=0;f<i.dim.length;++f)u.onnx.TensorShapeProto.Dimension.encode(i.dim[f],c.uint32(10).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.TensorShapeProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.dim&&d.dim.length||(d.dim=[]),d.dim.push(u.onnx.TensorShapeProto.Dimension.decode(i,i.uint32()));break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.dim!=null&&i.hasOwnProperty("dim")){if(!Array.isArray(i.dim))return"dim: array expected";for(var c=0;c<i.dim.length;++c){var f=u.onnx.TensorShapeProto.Dimension.verify(i.dim[c]);if(f)return"dim."+f}}return null},l.fromObject=function(i){if(i instanceof u.onnx.TensorShapeProto)return i;var c=new u.onnx.TensorShapeProto;if(i.dim){if(!Array.isArray(i.dim))throw TypeError(".onnx.TensorShapeProto.dim: array expected");c.dim=[];for(var f=0;f<i.dim.length;++f){if(typeof i.dim[f]!="object")throw TypeError(".onnx.TensorShapeProto.dim: object expected");c.dim[f]=u.onnx.TensorShapeProto.Dimension.fromObject(i.dim[f])}}return c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.dim=[]),i.dim&&i.dim.length){f.dim=[];for(var d=0;d<i.dim.length;++d)f.dim[d]=u.onnx.TensorShapeProto.Dimension.toObject(i.dim[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.TensorShapeProto"},l.Dimension=function(){function i(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}i.prototype.dimValue=null,i.prototype.dimParam=null,i.prototype.denotation="";var c;return Object.defineProperty(i.prototype,"value",{get:a.oneOfGetter(c=["dimValue","dimParam"]),set:a.oneOfSetter(c)}),i.create=function(f){return new i(f)},i.encode=function(f,d){return d||(d=o.create()),f.dimValue!=null&&Object.hasOwnProperty.call(f,"dimValue")&&d.uint32(8).int64(f.dimValue),f.dimParam!=null&&Object.hasOwnProperty.call(f,"dimParam")&&d.uint32(18).string(f.dimParam),f.denotation!=null&&Object.hasOwnProperty.call(f,"denotation")&&d.uint32(26).string(f.denotation),d},i.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},i.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TensorShapeProto.Dimension;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.dimValue=f.int64();break}case 2:{p.dimParam=f.string();break}case 3:{p.denotation=f.string();break}default:f.skipType(m&7);break}}return p},i.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},i.verify=function(f){if(typeof f!="object"||f===null)return"object expected";var d={};if(f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(d.value=1,!a.isInteger(f.dimValue)&&!(f.dimValue&&a.isInteger(f.dimValue.low)&&a.isInteger(f.dimValue.high))))return"dimValue: integer|Long expected";if(f.dimParam!=null&&f.hasOwnProperty("dimParam")){if(d.value===1)return"value: multiple values";if(d.value=1,!a.isString(f.dimParam))return"dimParam: string expected"}return f.denotation!=null&&f.hasOwnProperty("denotation")&&!a.isString(f.denotation)?"denotation: string expected":null},i.fromObject=function(f){if(f instanceof u.onnx.TensorShapeProto.Dimension)return f;var d=new u.onnx.TensorShapeProto.Dimension;return f.dimValue!=null&&(a.Long?(d.dimValue=a.Long.fromValue(f.dimValue)).unsigned=!1:typeof f.dimValue=="string"?d.dimValue=parseInt(f.dimValue,10):typeof f.dimValue=="number"?d.dimValue=f.dimValue:typeof f.dimValue=="object"&&(d.dimValue=new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber())),f.dimParam!=null&&(d.dimParam=String(f.dimParam)),f.denotation!=null&&(d.denotation=String(f.denotation)),d},i.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.denotation=""),f.dimValue!=null&&f.hasOwnProperty("dimValue")&&(typeof f.dimValue=="number"?h.dimValue=d.longs===String?String(f.dimValue):f.dimValue:h.dimValue=d.longs===String?a.Long.prototype.toString.call(f.dimValue):d.longs===Number?new a.LongBits(f.dimValue.low>>>0,f.dimValue.high>>>0).toNumber():f.dimValue,d.oneofs&&(h.value="dimValue")),f.dimParam!=null&&f.hasOwnProperty("dimParam")&&(h.dimParam=f.dimParam,d.oneofs&&(h.value="dimParam")),f.denotation!=null&&f.hasOwnProperty("denotation")&&(h.denotation=f.denotation),h},i.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},i.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TensorShapeProto.Dimension"},i}(),l}(),s.TypeProto=function(){function l(c){if(c)for(var f=Object.keys(c),d=0;d<f.length;++d)c[f[d]]!=null&&(this[f[d]]=c[f[d]])}l.prototype.tensorType=null,l.prototype.sequenceType=null,l.prototype.mapType=null,l.prototype.optionalType=null,l.prototype.sparseTensorType=null,l.prototype.denotation="";var i;return Object.defineProperty(l.prototype,"value",{get:a.oneOfGetter(i=["tensorType","sequenceType","mapType","optionalType","sparseTensorType"]),set:a.oneOfSetter(i)}),l.create=function(c){return new l(c)},l.encode=function(c,f){return f||(f=o.create()),c.tensorType!=null&&Object.hasOwnProperty.call(c,"tensorType")&&u.onnx.TypeProto.Tensor.encode(c.tensorType,f.uint32(10).fork()).ldelim(),c.sequenceType!=null&&Object.hasOwnProperty.call(c,"sequenceType")&&u.onnx.TypeProto.Sequence.encode(c.sequenceType,f.uint32(34).fork()).ldelim(),c.mapType!=null&&Object.hasOwnProperty.call(c,"mapType")&&u.onnx.TypeProto.Map.encode(c.mapType,f.uint32(42).fork()).ldelim(),c.denotation!=null&&Object.hasOwnProperty.call(c,"denotation")&&f.uint32(50).string(c.denotation),c.sparseTensorType!=null&&Object.hasOwnProperty.call(c,"sparseTensorType")&&u.onnx.TypeProto.SparseTensor.encode(c.sparseTensorType,f.uint32(66).fork()).ldelim(),c.optionalType!=null&&Object.hasOwnProperty.call(c,"optionalType")&&u.onnx.TypeProto.Optional.encode(c.optionalType,f.uint32(74).fork()).ldelim(),f},l.encodeDelimited=function(c,f){return this.encode(c,f).ldelim()},l.decode=function(c,f){c instanceof n||(c=n.create(c));for(var d=f===void 0?c.len:c.pos+f,h=new u.onnx.TypeProto;c.pos<d;){var p=c.uint32();switch(p>>>3){case 1:{h.tensorType=u.onnx.TypeProto.Tensor.decode(c,c.uint32());break}case 4:{h.sequenceType=u.onnx.TypeProto.Sequence.decode(c,c.uint32());break}case 5:{h.mapType=u.onnx.TypeProto.Map.decode(c,c.uint32());break}case 9:{h.optionalType=u.onnx.TypeProto.Optional.decode(c,c.uint32());break}case 8:{h.sparseTensorType=u.onnx.TypeProto.SparseTensor.decode(c,c.uint32());break}case 6:{h.denotation=c.string();break}default:c.skipType(p&7);break}}return h},l.decodeDelimited=function(c){return c instanceof n||(c=new n(c)),this.decode(c,c.uint32())},l.verify=function(c){if(typeof c!="object"||c===null)return"object expected";var f={};if(c.tensorType!=null&&c.hasOwnProperty("tensorType")){f.value=1;{var d=u.onnx.TypeProto.Tensor.verify(c.tensorType);if(d)return"tensorType."+d}}if(c.sequenceType!=null&&c.hasOwnProperty("sequenceType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Sequence.verify(c.sequenceType);if(d)return"sequenceType."+d}}if(c.mapType!=null&&c.hasOwnProperty("mapType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Map.verify(c.mapType);if(d)return"mapType."+d}}if(c.optionalType!=null&&c.hasOwnProperty("optionalType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.Optional.verify(c.optionalType);if(d)return"optionalType."+d}}if(c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")){if(f.value===1)return"value: multiple values";f.value=1;{var d=u.onnx.TypeProto.SparseTensor.verify(c.sparseTensorType);if(d)return"sparseTensorType."+d}}return c.denotation!=null&&c.hasOwnProperty("denotation")&&!a.isString(c.denotation)?"denotation: string expected":null},l.fromObject=function(c){if(c instanceof u.onnx.TypeProto)return c;var f=new u.onnx.TypeProto;if(c.tensorType!=null){if(typeof c.tensorType!="object")throw TypeError(".onnx.TypeProto.tensorType: object expected");f.tensorType=u.onnx.TypeProto.Tensor.fromObject(c.tensorType)}if(c.sequenceType!=null){if(typeof c.sequenceType!="object")throw TypeError(".onnx.TypeProto.sequenceType: object expected");f.sequenceType=u.onnx.TypeProto.Sequence.fromObject(c.sequenceType)}if(c.mapType!=null){if(typeof c.mapType!="object")throw TypeError(".onnx.TypeProto.mapType: object expected");f.mapType=u.onnx.TypeProto.Map.fromObject(c.mapType)}if(c.optionalType!=null){if(typeof c.optionalType!="object")throw TypeError(".onnx.TypeProto.optionalType: object expected");f.optionalType=u.onnx.TypeProto.Optional.fromObject(c.optionalType)}if(c.sparseTensorType!=null){if(typeof c.sparseTensorType!="object")throw TypeError(".onnx.TypeProto.sparseTensorType: object expected");f.sparseTensorType=u.onnx.TypeProto.SparseTensor.fromObject(c.sparseTensorType)}return c.denotation!=null&&(f.denotation=String(c.denotation)),f},l.toObject=function(c,f){f||(f={});var d={};return f.defaults&&(d.denotation=""),c.tensorType!=null&&c.hasOwnProperty("tensorType")&&(d.tensorType=u.onnx.TypeProto.Tensor.toObject(c.tensorType,f),f.oneofs&&(d.value="tensorType")),c.sequenceType!=null&&c.hasOwnProperty("sequenceType")&&(d.sequenceType=u.onnx.TypeProto.Sequence.toObject(c.sequenceType,f),f.oneofs&&(d.value="sequenceType")),c.mapType!=null&&c.hasOwnProperty("mapType")&&(d.mapType=u.onnx.TypeProto.Map.toObject(c.mapType,f),f.oneofs&&(d.value="mapType")),c.denotation!=null&&c.hasOwnProperty("denotation")&&(d.denotation=c.denotation),c.sparseTensorType!=null&&c.hasOwnProperty("sparseTensorType")&&(d.sparseTensorType=u.onnx.TypeProto.SparseTensor.toObject(c.sparseTensorType,f),f.oneofs&&(d.value="sparseTensorType")),c.optionalType!=null&&c.hasOwnProperty("optionalType")&&(d.optionalType=u.onnx.TypeProto.Optional.toObject(c.optionalType,f),f.oneofs&&(d.value="optionalType")),d},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(c){return c===void 0&&(c="type.googleapis.com"),c+"/onnx.TypeProto"},l.Tensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Tensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Tensor)return f;var d=new u.onnx.TypeProto.Tensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.Tensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Tensor"},c}(),l.Sequence=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Sequence;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Sequence)return f;var d=new u.onnx.TypeProto.Sequence;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Sequence.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Sequence"},c}(),l.Map=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.keyType=0,c.prototype.valueType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.keyType!=null&&Object.hasOwnProperty.call(f,"keyType")&&d.uint32(8).int32(f.keyType),f.valueType!=null&&Object.hasOwnProperty.call(f,"valueType")&&u.onnx.TypeProto.encode(f.valueType,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Map;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.keyType=f.int32();break}case 2:{p.valueType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.keyType!=null&&f.hasOwnProperty("keyType")&&!a.isInteger(f.keyType))return"keyType: integer expected";if(f.valueType!=null&&f.hasOwnProperty("valueType")){var d=u.onnx.TypeProto.verify(f.valueType);if(d)return"valueType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Map)return f;var d=new u.onnx.TypeProto.Map;if(f.keyType!=null&&(d.keyType=f.keyType|0),f.valueType!=null){if(typeof f.valueType!="object")throw TypeError(".onnx.TypeProto.Map.valueType: object expected");d.valueType=u.onnx.TypeProto.fromObject(f.valueType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.keyType=0,h.valueType=null),f.keyType!=null&&f.hasOwnProperty("keyType")&&(h.keyType=f.keyType),f.valueType!=null&&f.hasOwnProperty("valueType")&&(h.valueType=u.onnx.TypeProto.toObject(f.valueType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Map"},c}(),l.Optional=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&u.onnx.TypeProto.encode(f.elemType,d.uint32(10).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.Optional;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=u.onnx.TypeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")){var d=u.onnx.TypeProto.verify(f.elemType);if(d)return"elemType."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.Optional)return f;var d=new u.onnx.TypeProto.Optional;if(f.elemType!=null){if(typeof f.elemType!="object")throw TypeError(".onnx.TypeProto.Optional.elemType: object expected");d.elemType=u.onnx.TypeProto.fromObject(f.elemType)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=u.onnx.TypeProto.toObject(f.elemType,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.Optional"},c}(),l.SparseTensor=function(){function c(f){if(f)for(var d=Object.keys(f),h=0;h<d.length;++h)f[d[h]]!=null&&(this[d[h]]=f[d[h]])}return c.prototype.elemType=0,c.prototype.shape=null,c.create=function(f){return new c(f)},c.encode=function(f,d){return d||(d=o.create()),f.elemType!=null&&Object.hasOwnProperty.call(f,"elemType")&&d.uint32(8).int32(f.elemType),f.shape!=null&&Object.hasOwnProperty.call(f,"shape")&&u.onnx.TensorShapeProto.encode(f.shape,d.uint32(18).fork()).ldelim(),d},c.encodeDelimited=function(f,d){return this.encode(f,d).ldelim()},c.decode=function(f,d){f instanceof n||(f=n.create(f));for(var h=d===void 0?f.len:f.pos+d,p=new u.onnx.TypeProto.SparseTensor;f.pos<h;){var m=f.uint32();switch(m>>>3){case 1:{p.elemType=f.int32();break}case 2:{p.shape=u.onnx.TensorShapeProto.decode(f,f.uint32());break}default:f.skipType(m&7);break}}return p},c.decodeDelimited=function(f){return f instanceof n||(f=new n(f)),this.decode(f,f.uint32())},c.verify=function(f){if(typeof f!="object"||f===null)return"object expected";if(f.elemType!=null&&f.hasOwnProperty("elemType")&&!a.isInteger(f.elemType))return"elemType: integer expected";if(f.shape!=null&&f.hasOwnProperty("shape")){var d=u.onnx.TensorShapeProto.verify(f.shape);if(d)return"shape."+d}return null},c.fromObject=function(f){if(f instanceof u.onnx.TypeProto.SparseTensor)return f;var d=new u.onnx.TypeProto.SparseTensor;if(f.elemType!=null&&(d.elemType=f.elemType|0),f.shape!=null){if(typeof f.shape!="object")throw TypeError(".onnx.TypeProto.SparseTensor.shape: object expected");d.shape=u.onnx.TensorShapeProto.fromObject(f.shape)}return d},c.toObject=function(f,d){d||(d={});var h={};return d.defaults&&(h.elemType=0,h.shape=null),f.elemType!=null&&f.hasOwnProperty("elemType")&&(h.elemType=f.elemType),f.shape!=null&&f.hasOwnProperty("shape")&&(h.shape=u.onnx.TensorShapeProto.toObject(f.shape,d)),h},c.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},c.getTypeUrl=function(f){return f===void 0&&(f="type.googleapis.com"),f+"/onnx.TypeProto.SparseTensor"},c}(),l}(),s.OperatorSetIdProto=function(){function l(i){if(i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.domain="",l.prototype.version=a.Long?a.Long.fromBits(0,0,!1):0,l.create=function(i){return new l(i)},l.encode=function(i,c){return c||(c=o.create()),i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(10).string(i.domain),i.version!=null&&Object.hasOwnProperty.call(i,"version")&&c.uint32(16).int64(i.version),c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.OperatorSetIdProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.domain=i.string();break}case 2:{d.version=i.int64();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){return typeof i!="object"||i===null?"object expected":i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain)?"domain: string expected":i.version!=null&&i.hasOwnProperty("version")&&!a.isInteger(i.version)&&!(i.version&&a.isInteger(i.version.low)&&a.isInteger(i.version.high))?"version: integer|Long expected":null},l.fromObject=function(i){if(i instanceof u.onnx.OperatorSetIdProto)return i;var c=new u.onnx.OperatorSetIdProto;return i.domain!=null&&(c.domain=String(i.domain)),i.version!=null&&(a.Long?(c.version=a.Long.fromValue(i.version)).unsigned=!1:typeof i.version=="string"?c.version=parseInt(i.version,10):typeof i.version=="number"?c.version=i.version:typeof i.version=="object"&&(c.version=new a.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber())),c},l.toObject=function(i,c){c||(c={});var f={};if(c.defaults)if(f.domain="",a.Long){var d=new a.Long(0,0,!1);f.version=c.longs===String?d.toString():c.longs===Number?d.toNumber():d}else f.version=c.longs===String?"0":0;return i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.version!=null&&i.hasOwnProperty("version")&&(typeof i.version=="number"?f.version=c.longs===String?String(i.version):i.version:f.version=c.longs===String?a.Long.prototype.toString.call(i.version):c.longs===Number?new a.LongBits(i.version.low>>>0,i.version.high>>>0).toNumber():i.version),f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.OperatorSetIdProto"},l}(),s.OperatorStatus=function(){var l={},i=Object.create(l);return i[l[0]="EXPERIMENTAL"]=0,i[l[1]="STABLE"]=1,i}(),s.FunctionProto=function(){function l(i){if(this.input=[],this.output=[],this.attribute=[],this.attributeProto=[],this.node=[],this.opsetImport=[],i)for(var c=Object.keys(i),f=0;f<c.length;++f)i[c[f]]!=null&&(this[c[f]]=i[c[f]])}return l.prototype.name="",l.prototype.input=a.emptyArray,l.prototype.output=a.emptyArray,l.prototype.attribute=a.emptyArray,l.prototype.attributeProto=a.emptyArray,l.prototype.node=a.emptyArray,l.prototype.docString="",l.prototype.opsetImport=a.emptyArray,l.prototype.domain="",l.create=function(i){return new l(i)},l.encode=function(i,c){if(c||(c=o.create()),i.name!=null&&Object.hasOwnProperty.call(i,"name")&&c.uint32(10).string(i.name),i.input!=null&&i.input.length)for(var f=0;f<i.input.length;++f)c.uint32(34).string(i.input[f]);if(i.output!=null&&i.output.length)for(var f=0;f<i.output.length;++f)c.uint32(42).string(i.output[f]);if(i.attribute!=null&&i.attribute.length)for(var f=0;f<i.attribute.length;++f)c.uint32(50).string(i.attribute[f]);if(i.node!=null&&i.node.length)for(var f=0;f<i.node.length;++f)u.onnx.NodeProto.encode(i.node[f],c.uint32(58).fork()).ldelim();if(i.docString!=null&&Object.hasOwnProperty.call(i,"docString")&&c.uint32(66).string(i.docString),i.opsetImport!=null&&i.opsetImport.length)for(var f=0;f<i.opsetImport.length;++f)u.onnx.OperatorSetIdProto.encode(i.opsetImport[f],c.uint32(74).fork()).ldelim();if(i.domain!=null&&Object.hasOwnProperty.call(i,"domain")&&c.uint32(82).string(i.domain),i.attributeProto!=null&&i.attributeProto.length)for(var f=0;f<i.attributeProto.length;++f)u.onnx.AttributeProto.encode(i.attributeProto[f],c.uint32(90).fork()).ldelim();return c},l.encodeDelimited=function(i,c){return this.encode(i,c).ldelim()},l.decode=function(i,c){i instanceof n||(i=n.create(i));for(var f=c===void 0?i.len:i.pos+c,d=new u.onnx.FunctionProto;i.pos<f;){var h=i.uint32();switch(h>>>3){case 1:{d.name=i.string();break}case 4:{d.input&&d.input.length||(d.input=[]),d.input.push(i.string());break}case 5:{d.output&&d.output.length||(d.output=[]),d.output.push(i.string());break}case 6:{d.attribute&&d.attribute.length||(d.attribute=[]),d.attribute.push(i.string());break}case 11:{d.attributeProto&&d.attributeProto.length||(d.attributeProto=[]),d.attributeProto.push(u.onnx.AttributeProto.decode(i,i.uint32()));break}case 7:{d.node&&d.node.length||(d.node=[]),d.node.push(u.onnx.NodeProto.decode(i,i.uint32()));break}case 8:{d.docString=i.string();break}case 9:{d.opsetImport&&d.opsetImport.length||(d.opsetImport=[]),d.opsetImport.push(u.onnx.OperatorSetIdProto.decode(i,i.uint32()));break}case 10:{d.domain=i.string();break}default:i.skipType(h&7);break}}return d},l.decodeDelimited=function(i){return i instanceof n||(i=new n(i)),this.decode(i,i.uint32())},l.verify=function(i){if(typeof i!="object"||i===null)return"object expected";if(i.name!=null&&i.hasOwnProperty("name")&&!a.isString(i.name))return"name: string expected";if(i.input!=null&&i.hasOwnProperty("input")){if(!Array.isArray(i.input))return"input: array expected";for(var c=0;c<i.input.length;++c)if(!a.isString(i.input[c]))return"input: string[] expected"}if(i.output!=null&&i.hasOwnProperty("output")){if(!Array.isArray(i.output))return"output: array expected";for(var c=0;c<i.output.length;++c)if(!a.isString(i.output[c]))return"output: string[] expected"}if(i.attribute!=null&&i.hasOwnProperty("attribute")){if(!Array.isArray(i.attribute))return"attribute: array expected";for(var c=0;c<i.attribute.length;++c)if(!a.isString(i.attribute[c]))return"attribute: string[] expected"}if(i.attributeProto!=null&&i.hasOwnProperty("attributeProto")){if(!Array.isArray(i.attributeProto))return"attributeProto: array expected";for(var c=0;c<i.attributeProto.length;++c){var f=u.onnx.AttributeProto.verify(i.attributeProto[c]);if(f)return"attributeProto."+f}}if(i.node!=null&&i.hasOwnProperty("node")){if(!Array.isArray(i.node))return"node: array expected";for(var c=0;c<i.node.length;++c){var f=u.onnx.NodeProto.verify(i.node[c]);if(f)return"node."+f}}if(i.docString!=null&&i.hasOwnProperty("docString")&&!a.isString(i.docString))return"docString: string expected";if(i.opsetImport!=null&&i.hasOwnProperty("opsetImport")){if(!Array.isArray(i.opsetImport))return"opsetImport: array expected";for(var c=0;c<i.opsetImport.length;++c){var f=u.onnx.OperatorSetIdProto.verify(i.opsetImport[c]);if(f)return"opsetImport."+f}}return i.domain!=null&&i.hasOwnProperty("domain")&&!a.isString(i.domain)?"domain: string expected":null},l.fromObject=function(i){if(i instanceof u.onnx.FunctionProto)return i;var c=new u.onnx.FunctionProto;if(i.name!=null&&(c.name=String(i.name)),i.input){if(!Array.isArray(i.input))throw TypeError(".onnx.FunctionProto.input: array expected");c.input=[];for(var f=0;f<i.input.length;++f)c.input[f]=String(i.input[f])}if(i.output){if(!Array.isArray(i.output))throw TypeError(".onnx.FunctionProto.output: array expected");c.output=[];for(var f=0;f<i.output.length;++f)c.output[f]=String(i.output[f])}if(i.attribute){if(!Array.isArray(i.attribute))throw TypeError(".onnx.FunctionProto.attribute: array expected");c.attribute=[];for(var f=0;f<i.attribute.length;++f)c.attribute[f]=String(i.attribute[f])}if(i.attributeProto){if(!Array.isArray(i.attributeProto))throw TypeError(".onnx.FunctionProto.attributeProto: array expected");c.attributeProto=[];for(var f=0;f<i.attributeProto.length;++f){if(typeof i.attributeProto[f]!="object")throw TypeError(".onnx.FunctionProto.attributeProto: object expected");c.attributeProto[f]=u.onnx.AttributeProto.fromObject(i.attributeProto[f])}}if(i.node){if(!Array.isArray(i.node))throw TypeError(".onnx.FunctionProto.node: array expected");c.node=[];for(var f=0;f<i.node.length;++f){if(typeof i.node[f]!="object")throw TypeError(".onnx.FunctionProto.node: object expected");c.node[f]=u.onnx.NodeProto.fromObject(i.node[f])}}if(i.docString!=null&&(c.docString=String(i.docString)),i.opsetImport){if(!Array.isArray(i.opsetImport))throw TypeError(".onnx.FunctionProto.opsetImport: array expected");c.opsetImport=[];for(var f=0;f<i.opsetImport.length;++f){if(typeof i.opsetImport[f]!="object")throw TypeError(".onnx.FunctionProto.opsetImport: object expected");c.opsetImport[f]=u.onnx.OperatorSetIdProto.fromObject(i.opsetImport[f])}}return i.domain!=null&&(c.domain=String(i.domain)),c},l.toObject=function(i,c){c||(c={});var f={};if((c.arrays||c.defaults)&&(f.input=[],f.output=[],f.attribute=[],f.node=[],f.opsetImport=[],f.attributeProto=[]),c.defaults&&(f.name="",f.docString="",f.domain=""),i.name!=null&&i.hasOwnProperty("name")&&(f.name=i.name),i.input&&i.input.length){f.input=[];for(var d=0;d<i.input.length;++d)f.input[d]=i.input[d]}if(i.output&&i.output.length){f.output=[];for(var d=0;d<i.output.length;++d)f.output[d]=i.output[d]}if(i.attribute&&i.attribute.length){f.attribute=[];for(var d=0;d<i.attribute.length;++d)f.attribute[d]=i.attribute[d]}if(i.node&&i.node.length){f.node=[];for(var d=0;d<i.node.length;++d)f.node[d]=u.onnx.NodeProto.toObject(i.node[d],c)}if(i.docString!=null&&i.hasOwnProperty("docString")&&(f.docString=i.docString),i.opsetImport&&i.opsetImport.length){f.opsetImport=[];for(var d=0;d<i.opsetImport.length;++d)f.opsetImport[d]=u.onnx.OperatorSetIdProto.toObject(i.opsetImport[d],c)}if(i.domain!=null&&i.hasOwnProperty("domain")&&(f.domain=i.domain),i.attributeProto&&i.attributeProto.length){f.attributeProto=[];for(var d=0;d<i.attributeProto.length;++d)f.attributeProto[d]=u.onnx.AttributeProto.toObject(i.attributeProto[d],c)}return f},l.prototype.toJSON=function(){return this.constructor.toObject(this,r.util.toJSONOptions)},l.getTypeUrl=function(i){return i===void 0&&(i="type.googleapis.com"),i+"/onnx.FunctionProto"},l}(),s}(),e.exports=u});function Bd(t,e){if(!t)throw new Error(typeof e=="string"?e:e())}function C1(t){return new TextDecoder().decode(t)}var Ut,gc,lD,Bi,XO,Pn,Li,Fe,O1,$d,Ac,Sc,ht=ee(()=>{"use strict";sy(),GO(),Ut=Ks(Cc()),Js(),gc=class{static arraysEqual(t,e){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++)if(t[r]!==e[r])return!1;return!0}},lD=class{static preprocessInputShapes(t,e){let r=t.length===1?[1,t[0]]:t,n=e.length===1?[e[0],1]:e;return[r,n]}static postprocessOutputShape(t,e,r){e===1&&t.splice(t.length-2,1),r===1&&t.pop()}static calcMatMulShape(t,e){return t[1]!==e[0]?void 0:[t[0],e[1]]}},Bi=class mc{static calcShape(e,r,n=!1){let o=e.length,a=r.length;if(o===0)return r;if(a===0)return e;let u=Math.max(e.length,r.length),s=new Array(u);if(n){if(o<2||a<2)return;let l=lD.calcMatMulShape([e[o-2],e[o-1]],[r[a-2],r[a-1]]);if(l===void 0)return;[s[u-2],s[u-1]]=l}for(let l=n?3:1;l<=u;l++){let i=o-l<0?1:e[o-l],c=a-l<0?1:r[a-l];if(i!==c&&i>1&&c>1)return;s[u-l]=Math.max(i,c)}return s}static index(e,r){let n=new Array(r.length);return mc.fillIndex(e,r,n),n}static fillIndex(e,r,n){let o=e.length-r.length;for(let a=0;a<r.length;a++)n[a]=e[o+a]%r[a]}static calc(e,r,n,o,a){let u=mc.calcShape(e.dims,r.dims);if(u){if(o&&!Fe.areEqual(u,e.dims))return;let s=Fe.size(u),l=o?e:new Nn(u,a||e.type);if(u.length===0)l.set([],n(e.get([]),r.get([])));else{let i=new Array(u.length),c=new Array(e.dims.length),f=new Array(r.dims.length),d=0,h=0,p=!1,m=!1;e.dims.length===0&&(d=e.get([]),p=!0),r.dims.length===0&&(h=r.get([]),m=!0);let v;for(let x=0;x<s;x++){v=x;for(let y=u.length-1;y>=0;y--)i[y]=v%u[y],v=Math.floor(v/u[y]);p||(mc.fillIndex(i,e.dims,c),d=e.get(c)),m||(mc.fillIndex(i,r.dims,f),h=r.get(f)),l.set(i,n(d,h))}}return l}}static isValidBroadcast(e,r){let n=e.length,o=r.length;if(n>o)return!1;for(let a=1;a<=n;a++)if(e[n-a]!==1&&e[n-a]!==r[o-a])return!1;return!0}static getBroadcastDims(e,r){let n=e.length,o=[];for(let a=0;a<n;a++){let u=n-1-a,s=e[u]||1;(r[r.length-1-a]||1)>1&&s===1&&o.unshift(u)}return o}},XO=class{static getShapeOfGemmResult(t,e,r,n,o){if(t.length!==2||r.length!==2)throw new Error("shape need to be of size 2");let a,u,s;e?(a=t[1],u=t[0]):(a=t[0],u=t[1]);let l=-1;if(n?(s=r[0],l=1):(s=r[1],l=0),r[l]!==u)throw new Error("dimension mismatch");if(a<=0||s<=0||u<=0)throw new Error("invalid shape specified");if(o&&!Bi.isValidBroadcast(o,[a,s]))throw new Error("gemm: invalid bias shape for broadcast");return[a,s,u]}},Pn=class P1{static tensorDataTypeFromProto(e){switch(e){case Ut.onnx.TensorProto.DataType.INT8:return"int8";case Ut.onnx.TensorProto.DataType.UINT8:return"uint8";case Ut.onnx.TensorProto.DataType.BOOL:return"bool";case Ut.onnx.TensorProto.DataType.INT16:return"int16";case Ut.onnx.TensorProto.DataType.UINT16:return"uint16";case Ut.onnx.TensorProto.DataType.INT32:return"int32";case Ut.onnx.TensorProto.DataType.UINT32:return"uint32";case Ut.onnx.TensorProto.DataType.FLOAT:return"float32";case Ut.onnx.TensorProto.DataType.DOUBLE:return"float64";case Ut.onnx.TensorProto.DataType.STRING:return"string";case Ut.onnx.TensorProto.DataType.INT64:return"int32";case Ut.onnx.TensorProto.DataType.UINT64:return"uint32";default:throw new Error(`unsupported data type: ${Ut.onnx.TensorProto.DataType[e]}`)}}static tensorDataTypeStringToEnum(e){switch(e){case"int8":return Ut.onnx.TensorProto.DataType.INT8;case"uint8":return Ut.onnx.TensorProto.DataType.UINT8;case"bool":return Ut.onnx.TensorProto.DataType.BOOL;case"int16":return Ut.onnx.TensorProto.DataType.INT16;case"uint16":return Ut.onnx.TensorProto.DataType.UINT16;case"int32":return Ut.onnx.TensorProto.DataType.INT32;case"uint32":return Ut.onnx.TensorProto.DataType.UINT32;case"float32":return Ut.onnx.TensorProto.DataType.FLOAT;case"float64":return Ut.onnx.TensorProto.DataType.DOUBLE;case"string":return Ut.onnx.TensorProto.DataType.STRING;case"int64":return Ut.onnx.TensorProto.DataType.INT64;case"uint64":return Ut.onnx.TensorProto.DataType.UINT64;default:throw new Error(`unsupported data type: ${e}`)}}static tensorDimsFromProto(e){return e.map(r=>Wo.isLong(r)?r.toNumber():r)}static tensorValueTypeFromProto(e){return{tensorType:P1.tensorDataTypeFromProto(e.elemType),shape:{dims:P1.tensorDimsFromProto(e.shape.dim.map(r=>r.dimValue))}}}static tensorDimsFromORTFormat(e){let r=[];for(let n=0;n<e.dimsLength();n++)r.push(Li.longToNumber(e.dims(n)));return r}static tensorAttributesFromORTFormat(e){let r=[];for(let n=0;n<e.attributesLength();n++)r.push(e.attributes(n));return r}},Li=class{static longToNumber(t,e){return Wo.isLong(t)?t.toNumber():t instanceof $.Long?Wo.fromValue({low:t.low,high:t.high,unsigned:e??!1}).toNumber():t}static isLong(t){return Wo.isLong(t)||t instanceof $.Long}},Fe=class zo{static size(e){return zo.getSizeFromDimensionRange(e,0,e.length)}static sizeFromDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeFromDimension as Tensor has ${e.length} dimensions.`);return zo.getSizeFromDimensionRange(e,r,e.length)}static sizeToDimension(e,r){if(r<0||r>e.length)throw new Error(`invalid dimension of ${r} for sizeToDimension as Tensor has ${e.length} dimensions.`);return zo.getSizeFromDimensionRange(e,0,r)}static getSizeFromDimensionRange(e,r,n){let o=1;for(let a=r;a<n;a++){if(e[a]<=0)throw new Error("cannot get valid size from specified dimension range. Most likely the range contains 0 or negative values in them.");o*=e[a]}return o}static computeStrides(e){let r=e.length;if(r===0)return[];if(r===1)return[1];let n=new Array(r);n[r-1]=1,n[r-2]=e[r-1];for(let o=r-3;o>=0;--o)n[o]=n[o+1]*e[o+1];return n}static transpose(e){return e.slice().reverse()}static indicesToOffset(e,r,n){n===void 0&&(n=e.length);let o=0;for(let a=0;a<n;++a)o+=r[a]*e[a];return o}static offsetToIndices(e,r){let n=r.length;if(n===0)return[];if(n===1)return[e*r[0]];let o=new Array(r.length);for(let a=0;a<o.length-1;++a)o[a]=Math.floor(e/r[a]),e-=o[a]*r[a];return o[o.length-1]=e,o}static normalizeAxis(e,r){if(e<-r&&e>=r)throw new Error("unsupported axis for this operation.");return e<0?e+r:e}static normalizeAxes(e,r){return e.map(n=>this.normalizeAxis(n,r))}static incrementIndex(e,r,n){if(r.length===0||e.length===0)throw new Error("Index incrementing unsupported for scalar Tensor");if(n===void 0)n=r.length;else if(n<=0||n>r.length)throw new Error("Incorrect axis to increment on");for(let o=n-1;o>=0&&(e[o]++,!(e[o]<r[o]));--o)e[o]=0}static calculateReshapedDims(e,r){if(r.length===0){if(e.length===0||zo.size(e)===1)return[];throw new Error("cannot reshape to a scalar Tensor")}let n=r.length,o=new Array(n),a=-1,u=1;for(let l=0;l<n;l++){if(r[l]<-1)throw new Error("a dimension in shape hints cannot be less than -1");if(r[l]===-1){if(a!==-1)throw new Error("at most one dimension in shape hints can be -1");a=l}else{if(r[l]===0){if(l>=e.length)throw new Error("the dimension with value zero exceeds the dimension size of the input tensor");o[l]=e[l]}else o[l]=r[l];u*=o[l]}}let s=zo.size(e);if(a!==-1){if(s%u!==0)throw new Error(`the input tensor cannot be reshaped to the requested shape. Input shape: [${e}] Output shape: [${r}]`);o[a]=s/u}else if(u!==s)throw new Error("reshapedDims and originalDims don't have matching sizes");return o}static sortBasedOnPerm(e,r){return r?r.map(n=>e[n]):e.slice().reverse()}static padShape(e,r){let n=e.length;return e.map((o,a)=>o+r[a]+r[a+n])}static areEqual(e,r){return e.length!==r.length?!1:e.every((n,o)=>n===r[o])}static validateDimsAndCalcSize(e){if(e.length>6)throw new TypeError("Only rank 0 to 6 is supported for tensor shape.");let r=1;for(let n of e){if(!Number.isInteger(n))throw new TypeError(`Invalid shape: ${n} is not an integer`);if(n<0||n>2147483647)throw new TypeError(`Invalid shape: length ${n} is not allowed`);r*=n}return r}static flattenShape(e,r){r<0&&(r+=e.length);let n=e.reduce((a,u)=>a*u,1),o=e.slice(r).reduce((a,u)=>a*u,1);return[n/o,o]}static squeezeShape(e,r){let n=new Array;r=zo.normalizeAxes(r,e.length);for(let o=0;o<e.length;o++){let a=r.indexOf(o)>=0;if(a&&e[o]!==1)throw new Error("squeeze an axis of size different than 1");(r.length===0&&e[o]>1||r.length>0&&!a)&&n.push(e[o])}return n}static unsqueezeShape(e,r){let n=new Array(e.length+r.length);n.fill(0);for(let a=0;a<r.length;a++){let u=zo.normalizeAxis(r[a],n.length);if(u>=n.length)throw new Error("'axes' has an out of range axis");if(n[u]!==0)throw new Error("'axes' has a duplicate axis");n[u]=1}let o=0;for(let a=0;a<n.length;a++)n[a]===0&&(n[a]=e[o++]);if(o!==e.length)throw new Error("the unsqueezed dimension could not be established");return n}},O1=class YO{static splitShape(e,r,n,o){if(n.length===0){if(!o)throw new Error("need to know number of outputs when the 'split' attribute is not specified");YO.determineSplit(e[r],o,n)}let a=[],u=[0];for(let s=0;s<n.length;++s){s!==0&&u.push(u[s-1]+n[s-1]);let l=e.slice();l[r]=n[s],a.push(l)}return[a,u]}static determineSplit(e,r,n){if(e%r!==0)throw new Error("cannot split tensor to equal sized parts");for(let o=0;o<r;++o)n.push(e/r)}},$d=class yc{static adjustPoolAttributes(e,r,n,o,a,u){if(!e&&n.length!==r.length-2)throw new Error("length of specified kernel shapes should be 2 less than length of input dimensions");if(e)for(let s=0;s<r.length-2;s++)s>=n.length?n.push(r[s+2]):n[s]=r[s+2];for(let s=0;s<n.length;s++)if(s<o.length){if(o[s]<0)throw new Error("strides should be greater than or equal to 1")}else o.push(1);for(let s=0;s<n.length;s++)if(s<a.length){if(a[s]<0)throw new Error("dilations should be greater than or equal to 1")}else a.push(1);for(let s=0;s<n.length*2;s++)if(s<u.length){if(u[s]<0)throw new Error("pad should be greater than or equal to 1")}else u.push(0);for(let s=0;s<n.length;s++){if(n[s]<=0)throw new Error("kernel shapes need to be greater than 0");if(u[s]>=n[s]||u[s+n.length]>=n[s])throw new Error("pads should be smaller than kernel")}}static adjustPadsBasedOnAutoPad(e,r,n,o,a,u){if(u){if(a.length!==2*(e.length-2))throw new Error("length of pads should be twice the length of data dimensions");if(r.length!==e.length-2)throw new Error("length of strides should be the length of data dimensions");if(o.length!==e.length-2)throw new Error("length of kernel shapes should be the length of data dimensions");for(let s=0;s<e.length-2;s++)yc.adjustPadAndReturnShape(e[s+2],r[s],n[s],o[s],a,s,s+e.length-2,u)}}static computePoolOutputShape(e,r,n,o,a,u,s){if(r.length<=0)throw new Error("input shape must be of size greater than 0");let l=[r[0],r[1]];return yc.computeShapeHelper(e,r,l,n,o,a,u,s),l}static computeConvOutputShape(e,r,n,o,a,u,s){if(e.length<=0||r.length<=0)throw new Error("invalid input tensor dims or invalid filter tensor dims");let l=[e[0],r[0]];return yc.computeShapeHelper(!1,e,l,n,o,a,u,s),l}static computeShapeHelper(e,r,n,o,a,u,s,l){if(e)for(let i=0;i<r.length-2;i++)n.push(1);else for(let i=0;i<r.length-2;i++)n.push(yc.adjustPadAndReturnShape(r[i+2],o[i],a[i],u[i],s,i,i+r.length-2,l))}static adjustPadAndReturnShape(e,r,n,o,a,u,s,l){let i=n*(o-1)+1;if(l&&l!=="NOTSET")switch(l){case"VALID":return a[u]=0,a[s]=0,Math.floor((e-i)/r+1);case"SAME_LOWER":case"SAME_UPPER":if(n!==1)throw new Error("Dilation not supported for SAME_UPPER or SAME_LOWER");{let c=((e+r-1)/r-1)*r+o-e;return a[u]=Math.floor(l==="SAME_LOWER"?(c+1)/2:c/2),a[s]=c-a[u],Math.floor((e+c-o)/r+1)}default:throw new Error("Unsupported AutoPad type")}else return Math.floor((e+a[u]+a[s]-i)/r+1)}},Ac=-34028234663852886e22,Sc=34028234663852886e22});function eH(t){switch(t){case"bool":case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;case"float64":return 8;default:throw new Error(`cannot calculate sizeof() on type ${t}`)}}function cD(t){switch(t){case $e.onnx.TensorProto.DataType.UINT8:case $e.onnx.TensorProto.DataType.INT8:case $e.onnx.TensorProto.DataType.BOOL:return 1;case $e.onnx.TensorProto.DataType.UINT16:case $e.onnx.TensorProto.DataType.INT16:return 2;case $e.onnx.TensorProto.DataType.FLOAT:case $e.onnx.TensorProto.DataType.INT32:case $e.onnx.TensorProto.DataType.UINT32:return 4;case $e.onnx.TensorProto.DataType.INT64:case $e.onnx.TensorProto.DataType.DOUBLE:case $e.onnx.TensorProto.DataType.UINT64:return 8;default:throw new Error(`cannot calculate sizeof() on type ${$e.onnx.TensorProto.DataType[t]}`)}}function tH(t,e){return new(ZO(e))(t)}function ZO(t){switch(t){case"bool":case"uint8":return Uint8Array;case"int8":return Int8Array;case"int16":return Int16Array;case"uint16":return Uint16Array;case"int32":return Int32Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"float32":return Float32Array;case"float64":return Float64Array;default:throw new Error("unspecified error")}}function M1(t,e){if(e===$e.onnx.TensorProto.DataType.INT64||e===Rd.TensorDataType.INT64){if(t.greaterThanOrEqual(2147483648)||t.lessThan(-2147483648))throw new TypeError("int64 is not supported")}else if(e===$e.onnx.TensorProto.DataType.UINT32||e===Rd.TensorDataType.UINT32||e===$e.onnx.TensorProto.DataType.UINT64||e===Rd.TensorDataType.UINT64){if(t.greaterThanOrEqual(4294967296)||t.lessThan(0))throw new TypeError("uint64 is not supported")}else throw new TypeError(`not a LONG type: ${$e.onnx.TensorProto.DataType[e]}`);return t.toNumber()}function fD(t,e,r){switch(e){case $e.onnx.TensorProto.DataType.BOOL:case $e.onnx.TensorProto.DataType.UINT8:return t.getUint8(r);case $e.onnx.TensorProto.DataType.INT8:return t.getInt8(r);case $e.onnx.TensorProto.DataType.UINT16:return t.getUint16(r,!0);case $e.onnx.TensorProto.DataType.INT16:return t.getInt16(r,!0);case $e.onnx.TensorProto.DataType.FLOAT:return t.getFloat32(r,!0);case $e.onnx.TensorProto.DataType.INT32:return t.getInt32(r,!0);case $e.onnx.TensorProto.DataType.UINT32:return t.getUint32(r,!0);case $e.onnx.TensorProto.DataType.INT64:return M1(Wo.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!1),e);case $e.onnx.TensorProto.DataType.DOUBLE:return t.getFloat64(r,!0);case $e.onnx.TensorProto.DataType.UINT64:return M1(Wo.fromBits(t.getUint32(r,!0),t.getUint32(r+4,!0),!0),e);default:throw new Error(`cannot read from DataView for type ${$e.onnx.TensorProto.DataType[e]}`)}}var dD,$e,Rd,Nn,Js=ee(()=>{"use strict";dD=Ks(BU()),GO(),Hd(),$e=Ks(Cc()),ht(),Rd=bt.experimental.fbs,Nn=class Fd{constructor(e,r,n,o,a,u=dD.Guid.create()){this.dims=e,this.type=r,this.dataProvider=n,this.asyncDataProvider=o,this.cache=a,this.dataId=u,this.size=Fe.validateDimsAndCalcSize(e);let s=this.size,l=n===void 0&&o===void 0&&a===void 0;if(a!==void 0&&a.length!==s)throw new RangeError("Input dims doesn't match data length.");if(r==="string"){if(a!==void 0&&(!Array.isArray(a)||!a.every(i=>typeof i=="string")))throw new TypeError("cache should be a string array");l&&(this.cache=new Array(s))}else{if(a!==void 0){let i=ZO(r);if(!(a instanceof i))throw new TypeError(`cache should be type ${i.name}`)}if(l){let i=new ArrayBuffer(s*eH(r));this.cache=tH(i,r)}}}get data(){if(this.cache===void 0){let e=this.dataProvider(this.dataId);if(e.length!==this.size)throw new Error("Length of data provided by the Data Provider is inconsistent with the dims of this Tensor.");this.cache=e}return this.cache}get stringData(){if(this.type!=="string")throw new TypeError("data type is not string");return this.data}get integerData(){switch(this.type){case"uint8":case"int8":case"uint16":case"int16":case"int32":case"uint32":case"bool":return this.data;default:throw new TypeError("data type is not integer (uint8, int8, uint16, int16, int32, uint32, bool)")}}get floatData(){switch(this.type){case"float32":case"float64":return this.data;default:throw new TypeError("data type is not float (float32, float64)")}}get numberData(){if(this.type!=="string")return this.data;throw new TypeError("type cannot be non-number (string)")}get(e){return this.data[Fe.indicesToOffset(e,this.strides)]}set(e,r){this.data[Fe.indicesToOffset(e,this.strides)]=r}getData(){return U(this,null,function*(){return this.cache===void 0&&(this.cache=yield this.asyncDataProvider(this.dataId)),this.cache})}get strides(){return this._strides||(this._strides=Fe.computeStrides(this.dims)),this._strides}static fromProto(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Pn.tensorDataTypeFromProto(e.dataType),n=Pn.tensorDimsFromProto(e.dims),o=new Fd(n,r);if(r==="string")e.stringData.forEach((a,u)=>{o.data[u]=C1(a)});else if(e.rawData&&typeof e.rawData.byteLength=="number"&&e.rawData.byteLength>0){let a=o.data,u=new DataView(e.rawData.buffer,e.rawData.byteOffset,e.rawData.byteLength),s=cD(e.dataType),l=e.rawData.byteLength/s;if(e.rawData.byteLength%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let i=0;i<l;i++){let c=fD(u,e.dataType,i*s);a[i]=c}}else{let a;switch(e.dataType){case $e.onnx.TensorProto.DataType.FLOAT:a=e.floatData;break;case $e.onnx.TensorProto.DataType.INT32:case $e.onnx.TensorProto.DataType.INT16:case $e.onnx.TensorProto.DataType.UINT16:case $e.onnx.TensorProto.DataType.INT8:case $e.onnx.TensorProto.DataType.UINT8:case $e.onnx.TensorProto.DataType.BOOL:a=e.int32Data;break;case $e.onnx.TensorProto.DataType.INT64:a=e.int64Data;break;case $e.onnx.TensorProto.DataType.DOUBLE:a=e.doubleData;break;case $e.onnx.TensorProto.DataType.UINT32:case $e.onnx.TensorProto.DataType.UINT64:a=e.uint64Data;break;default:throw new Error("unspecific error")}if(a==null)throw new Error("failed to populate data from a tensorproto value");let u=o.data;if(u.length!==a.length)throw new Error("array length mismatch");for(let s=0;s<a.length;s++){let l=a[s];Wo.isLong(l)?u[s]=M1(l,e.dataType):u[s]=l}}return o}static fromData(e,r,n){return new Fd(r,n,void 0,void 0,e)}static fromOrtTensor(e){if(!e)throw new Error("cannot construct Value from an empty tensor");let r=Pn.tensorDimsFromORTFormat(e),n=Pn.tensorDataTypeFromProto(e.dataType()),o=new Fd(r,n);if(n==="string")for(let a=0;a<e.stringDataLength();a++)o.data[a]=e.stringData(a);else if(e.rawDataArray()&&typeof e.rawDataLength()=="number"&&e.rawDataLength()>0){let a=o.data,u=new DataView(e.rawDataArray().buffer,e.rawDataArray().byteOffset,e.rawDataLength()),s=cD(e.dataType()),l=e.rawDataLength()/s;if(e.rawDataLength()%s!==0)throw new Error("invalid buffer length");if(a.length!==l)throw new Error("buffer length mismatch");for(let i=0;i<l;i++){let c=fD(u,e.dataType(),i*s);a[i]=c}}return o}}});function Je(t){return t===1?KO:QO}function rH(t){let e=Je(t);return`${e.version}
      precision highp float;
      ${e.attribute} vec3 position;
      ${e.attribute} vec2 textureCoord;

      ${e.varyingVertex} vec2 TexCoords;

      void main()
      {
          gl_Position = vec4(position, 1.0);
          TexCoords = textureCoord;
      }`}function nH(t){let e=Je(t);return`${e.version}
    precision highp float;
    precision highp int;
    precision highp sampler2D;
    ${e.varyingFrag} vec2 TexCoords;
    ${e.outputDeclaration}
    const vec2 halfCR = vec2(0.5, 0.5);

    // Custom vector types to handle higher dimenalities.
    struct ivec5
    {
      int x;
      int y;
      int z;
      int w;
      int u;
    };

    struct ivec6
    {
      int x;
      int y;
      int z;
      int w;
      int u;
      int v;
    };

    int imod(int x, int y) {
      return x - y * (x / y);
    }

    `}function iH(t,e){let r=Je(t);return`
  void main() {
    int indices[${e}];
    toVec(TexCoords, indices);
    vec4 result = vec4(process(indices));
    ${r.output} = result;
  }
  `}var KO,QO,rr=ee(()=>{"use strict";KO={version:"",attribute:"attribute",varyingVertex:"varying",varyingFrag:"varying",texture2D:"texture2D",output:"gl_FragColor",outputDeclaration:""},QO={version:"#version 300 es",attribute:"in",varyingVertex:"out",varyingFrag:"in",texture2D:"texture",output:"outputColor",outputDeclaration:"out vec4 outputColor;"}}),tt=ee(()=>{"use strict"});function hD(t,e=n=>0,r){return U(this,null,function*(){return new Promise((n,o)=>{let a=0,u=()=>{if(t()){n();return}a++;let s=e(a);if(r!=null&&a>=r){o();return}setTimeout(u,s)};u()})})}function Km(t){return Bd(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)}function oH(t){return Bd(typeof t<"u"&&t.length!==0,()=>"empty string found for sampler name"),"get"+t.charAt(0).toUpperCase()+t.slice(1)+"AtOutCoords"}function lc(t,e){let r=JSON.parse(JSON.stringify(t));return r=e,r}function cc(t,e){return e.map(r=>t[r]).join(", ")}function qo(t){if(t<=1)return"int";if(t===2)return"ivec2";if(t===3)return"ivec3";if(t===4)return"ivec4";if(t===5)return"ivec5";if(t===6)return"ivec6";throw Error(`GPU for rank ${t} is not yet supported`)}function Qs(t=6){return["x","y","z","w","u","v"].slice(0,t)}var go=ee(()=>{"use strict";ht()});function aH(t,e){return Qs(e).map(r=>`${t}.${r}`)}function uy(t,e){return e===1?[t]:aH(t,e)}function Oc(){return`
    float getChannel(vec4 frag, int dim) {
      int modCoord = imod(dim, 2);
      return modCoord == 0 ? frag.r : frag.g;
    }

    float getChannel(vec4 frag, vec2 innerDims) {
      vec2 modCoord = mod(innerDims, 2.);
      return modCoord.x == 0. ?
        (modCoord.y == 0. ? frag.r : frag.g) :
        (modCoord.y == 0. ? frag.b : frag.a);
    }
  `}var eu=ee(()=>{"use strict";go()});function sH(t,e,r){if(t===0)return"false";if(t===1)return`rc > ${e[0]}`;let n="";for(let o=t-2;o<t;o++)n+=`${r[o]} >= ${e[o-t+2]}`,o<t-1&&(n+="||");return n}function uH(t,e){let r=t.length;if(r===0)return"getA(), 0, 0, 0";if(r===1)return`getA(rc),
            rc + 1 >= ${t[0]} ? 0. : getA(rc + 1),
            0, 0`;let n="r, c",o="r, cp1",a="rp1, c",u="rp1, cp1",s="";if(r>2)for(let l=0;l<r-2;++l)s=s+`${e[l]},`;return`getA(${s}${n}),
          rEdge ? 0. : getA(${s}${a}),
          cEdge ? 0. : getA(${s}${o}),
          rEdge || cEdge ? 0. : getA(${s}${u})`}function lH(t,e,r,n){return t===0||t===1?"":`
    int r = ${e[t-2]};
    int c = ${e[t-1]};
    int rp1 = ${e[t-2]} + 1;
    int cp1 = ${e[t-1]} + 1;
    bool rEdge = rp1 >= ${n};
    bool cEdge = cp1 >= ${r};
    `}var Qm,pD,JO,cH=ee(()=>{"use strict";rr(),tt(),go(),eu(),Qm={name:"pack",inputNames:["A"],inputTypes:[1]},pD=(t,e)=>{let r=Je(t.session.backend.glContext.version),n=e.dims,o=n.length,a=e.dims.length,u=qo(a),s=uy("rc",a),l=lH(a,s,n[n.length-2],n[n.length-1]),i;o===0?i=[1,1]:o===1?i=[n[0],1]:i=[n[a-1],n[a-2]];let c=sH(a,i,s),f=uH(n,s),d=`
        void main() {
          ${u} rc = getOutputCoords();

          if(${c}) {
            ${r.output} = vec4(0);
          } else {
            ${l}

            ${r.output} = vec4(${f});
          }
        }
      `;return j(N({},Qm),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:2},shaderSource:d})},JO=(t,e)=>j(N({},Qm),{get:()=>pD(t,e)})});function gD(t){if(t.length===0)return[1,1,1];let e=1;for(let r=0;r<t.length-2;++r)e*=t[r];return[e,t.length>1?t[t.length-2]:1,t[t.length-1]]}function fH(t,e){let r=!1;return t.length===0||e.length===0?r=!0:t.length<2||e.length<2?r=t[t.length-1]===e[e.length-1]:r=t[t.length-1]===e[e.length-1]&&t[t.length-2]===e[e.length-2],r}function dH(t){let e=Fe.computeStrides(t),r=["b","r","c"],n="index";return`
    ivec3 inputCoordsFromReshapedOutCoords(int index) {
      ${e.map((o,a)=>{let u=`int ${r[a]} = ${n} / ${o}`,s=a===e.length-1?`int ${r[a+1]} = ${n} - ${r[a]} * ${o}`:`index -= ${r[a]} * ${o}`;return`${u}; ${s};`}).join("")}
      return ivec3(b, r, c);
    }
  `}function hH(t){let e=Fe.computeStrides(t);return`
  int getFlattenedIndex(ivec3 coords) {
    // reverse y, z order
    return coords.x * ${e[0]} + coords.z * ${e[1]} + coords.y;
  }
`}var mD,yD,e3,pH=ee(()=>{"use strict";ht(),rr(),tt(),eu(),mD=t=>({name:"Reshape (packed)",inputTypes:[2],inputNames:["A"],cacheHint:`${t}`}),yD=(t,e,r,n)=>{let o=e.dims,a=n,u="";for(let i=0;i<4;i++){let c="";switch(i){case 0:c="outputCoords = rc;";break;case 1:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z);";break;case 2:c="outputCoords = ivec3(rc.x, rc.y, rc.z+1);";break;case 3:c="outputCoords = ivec3(rc.x, rc.y+1, rc.z+1);";break;default:throw new Error}u+=`
        ${c}
        ${i>0?"if(outputCoords.y < rows && outputCoords.z < cols){":""}
          int flattenedIndex = getFlattenedIndex(outputCoords);

          ivec3 inputRC = inputCoordsFromReshapedOutCoords(flattenedIndex);
          vec2 innerDims = vec2(float(inputRC.y),float(inputRC.z));

          result[${i}] = getChannel(getA(inputRC.x, inputRC.y, inputRC.z), innerDims);

        ${i>0?"}":""}
      `}let s=Je(t.session.backend.glContext.version),l=`
      ${dH(o)}
      ${hH(a)}
      ${Oc()}

      void main() {
        ivec3 rc = getOutputCoords();

        vec4 result = vec4(0.0);

        ivec3 outputCoords;
        int rows = ${a[2]};
        int cols = ${a[1]};

        ${u}
        ${s.output} = result;
      }
    `;return j(N({},r),{output:{dims:a,type:e.type,textureType:2},shaderSource:l,hasMain:!0})},e3=(t,e,r)=>{let n=mD(r);return j(N({},n),{get:()=>yD(t,e,n,r)})}}),N1,gH=ee(()=>{"use strict";rr(),tt(),N1=(t,e)=>{let r=e.shape,n=Je(t.session.backend.glContext.version),o=`
    const float FLOAT_MAX = 1.70141184e38;
    const float FLOAT_MIN = 1.17549435e-38;

    bool isNaN(float val) {
      return (val < 1.0 || 0.0 < val || val == 0.0) ? false : true;
    }

    highp vec4 encodeAsUint8(highp float v) {
      if (isNaN(v)) {
        return vec4(255, 255, 255, 255);
      }

      highp float av = abs(v);

      if(av < FLOAT_MIN) {
        return vec4(0.0, 0.0, 0.0, 0.0);
      } else if(v > FLOAT_MAX) {
        return vec4(0.0, 0.0, 128.0, 127.0) / 255.0;
      } else if(v < -FLOAT_MAX) {
        return vec4(0.0, 0.0,  128.0, 255.0) / 255.0;
      }

      highp vec4 c = vec4(0,0,0,0);

      highp float e = floor(log2(av));
      highp float m = exp2(fract(log2(av))) - 1.0;

      c[2] = floor(128.0 * m);
      m -= c[2] / 128.0;
      c[1] = floor(32768.0 * m);
      m -= c[1] / 32768.0;
      c[0] = floor(8388608.0 * m);

      highp float ebias = e + 127.0;
      c[3] = floor(ebias / 2.0);
      ebias -= c[3] * 2.0;
      c[2] += floor(ebias) * 128.0;

      c[3] += 128.0 * step(0.0, -v);

      return c / 255.0;
    }

    void main() {
      float value = ${n.texture2D}(X,TexCoords).r;
      ${n.output} = encodeAsUint8(value);
    }`,a={name:"Uint8Encode",inputTypes:[0],inputNames:["X"],output:{dims:r,type:e.tensor.type,textureType:3},shaderSource:o,hasMain:!0};return t.executeProgram(a,[e.tensor])}});function mH(t,e){if(t===1)return"rc";let r="";for(let n=0;n<t;n++)r+=e[n],n<t-1&&(r+=",");return r}var Jm,vD,t3,yH=ee(()=>{"use strict";rr(),tt(),go(),eu(),Jm={name:"unpack",inputNames:["A"],inputTypes:[2]},vD=(t,e)=>{let r=e.dims.length,n=uy("rc",r),o=n.slice(-2),a=qo(r),u=Oc(),s=e.dims.length===0?"":mH(r,n),l=r<=1?"rc":`vec2(${o.join(",")})`,i=Je(t.session.backend.glContext.version),c=`
    ${u}
    void main() {
      ${a} rc = getOutputCoords();

       // Sample the texture with the coords to get the rgba channel value.
       vec4 packedInput = getA(${s});

       ${i.output} = vec4(getChannel(packedInput, ${l}), 0, 0, 0);
     }
   `;return j(N({},Jm),{hasMain:!0,output:{dims:e.dims,type:e.type,textureType:0},shaderSource:c})},t3=(t,e)=>j(N({},Jm),{get:()=>vD(t,e)})}),r3,R1,n3,Vd=ee(()=>{"use strict";wi(),r3=class{constructor(t,e=1){if(e===1)this.internalFormat=t.R32F,this.format=t.RED,this.textureType=t.FLOAT,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA32F,this.format=t.RGBA,this.textureType=t.FLOAT,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){let r,n;return t.constructor!==Float32Array&&(ur.warning("Encoder","data was not of type Float32; creating new Float32Array"),n=new Float32Array(t)),e*this.channelSize>t.length?(ur.warning("Encoder","Source data too small. Allocating larger array"),n=t,r=this.allocate(e*this.channelSize),n.forEach((o,a)=>r[a]=o)):(n=t,r=n),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},R1=class{constructor(t,e=1,r){if(e!==1&&e!==4)throw new Error(`Invalid number of channels: ${e}`);this.internalFormat=t.RGBA,this.format=t.RGBA,this.channelSize=e,this.textureType=r||t.FLOAT}encode(t,e){let r=t;return this.channelSize===1&&(ur.verbose("Encoder","Exploding into a larger array"),r=this.allocate(e),t.forEach((n,o)=>r[o*4]=n)),r}allocate(t){return new Float32Array(t*4)}decode(t,e){return this.channelSize===1?t.filter((r,n)=>n%4===0).subarray(0,e):t.subarray(0,e)}},n3=class{constructor(t,e=1){if(this.channelSize=4,e===1)this.internalFormat=t.ALPHA,this.format=t.ALPHA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else if(e===4)this.internalFormat=t.RGBA,this.format=t.RGBA,this.textureType=t.UNSIGNED_BYTE,this.channelSize=e;else throw new Error(`Invalid number of channels: ${e}`)}encode(t,e){return new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}allocate(t){return new Uint8Array(t*this.channelSize)}decode(t,e){if(t instanceof Uint8Array)return t.subarray(0,e);throw new Error(`Invalid array type: ${t.constructor}`)}}}),Ec,i3,F1,vH=ee(()=>{"use strict";ht(),tt(),Ec=(t,e,r)=>{let n=r===0||r===1?1:4,o=r===2,a=r===1||r===2,u=r===4?e.length-1:void 0,s=r===4?e.map((l,i)=>i===e.length-1?l*4:l):void 0;return F1(t,e,n,s,{isPacked:o,reverseWH:a,breakAxis:u})},i3=(t,e,r)=>{let n=Ec(t,e,r);return[n.width,n.height]},F1=(t,e,r=1,n,o)=>{let a=!!(o&&o.isPacked),[u,s]=t.computeTextureWH(a&&n||e,o),l=e.length,i=e.slice(0);if(l===0&&(i=[1]),r===1)n=e;else if(a){if(r!==4)throw new Error("a packed texture must be 4-channel");n=e,l>0&&(i[l-1]=Math.ceil(i[l-1]/2)),l>1&&(i[l-2]=Math.ceil(i[l-2]/2))}else if(!n)throw new Error("Unpacked shape is needed when using channels > 1");return{width:u,height:s,channels:r,isPacked:a,shape:i,strides:Fe.computeStrides(i),unpackedShape:n,reversedWH:o&&o.reverseWH}}}),bD,o3,bH=ee(()=>{"use strict";wi(),Js(),ht(),cH(),pH(),gH(),yH(),Vd(),vH(),tt(),bD=(t,e)=>{let r=e.map(o=>`${o.unpackedShape.join(",")};${o.width}x${o.height}`).join("_"),n=t.name;return t.cacheHint&&(n+="["+t.cacheHint+"]"),n+=":"+r,n},o3=class{constructor(t){this.session=t,this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map}calculateTextureWidthAndHeight(t,e){return i3(this.session.layoutStrategy,t,e)}executeProgram(t,e){if(e.length<t.inputNames.length)throw new Error(`Input size mustn't be less than ${t.inputNames.length}.`);if(t.inputNames.length!==t.inputTypes.length)throw new Error("input names size does not match input types");let r=[];for(let l=0;l<t.inputNames.length;++l)r[l]=this.getOrCreateTextureData(e[l],t.inputTypes[l]);let n=bD(t,r),o=this.session.programManager.getArtifact(n),a=o?o.programInfo:typeof t.get=="function"?t.get():t,u=Ec(this.session.layoutStrategy,a.output.dims,a.output.textureType),s=this.createTextureData(u,a.output.type);return o||(o=this.session.programManager.build(a,r,s),this.session.programManager.setArtifact(n,o)),this.runProgram(o,r,s),s}run(t,e){return this.executeProgram(t,e).tensor}runProgram(t,e,r){for(let n=0;n<e.length;++n)if(!!e[n].isPacked!=(t.programInfo.inputTypes[n]===2))throw new Error(`input[${n}] property packed inconsistent`);if(!!r.isPacked!=(t.programInfo.output.textureType===2))throw new Error("output property packed inconsistent");this.session.programManager.run(t,e,r)}getOrCreateTextureData(t,e){let r=this.getTextureData(t.dataId,e===2);if(!r&&(r=this.getTextureData(t.dataId,e!==2),r))return e===2?this.pack(r):this.unpack(r);if(!r){let n=Ec(this.session.layoutStrategy,t.dims,e);if(e===4){let o=t.dims;if(o.length===4){let a=[o[0],Math.ceil(o[1]*o[2]*o[3]/4)],u=Ec(this.session.layoutStrategy,a,e),s=t.numberData;if(o[1]*o[2]*o[3]%4!==0){let l=o[0],i=o[1]*o[2]*o[3],c=Math.ceil(i*1/4)*4,f=l*c;s=new Float32Array(f);for(let d=0;d<l;++d){let h=d*i,p=d*c+d%1*i;s.set(t.numberData.subarray(h,h+i),p)}}return this.createTextureData(u,t.type,s,t,1)}}if(e===2){let o=F1(this.session.layoutStrategy,t.dims,1,[],{reverseWH:!0}),a=this.createTextureData(o,t.type,t.numberData,t,1);r=this.pack(a)}else r=this.createTextureData(n,t.type,t.numberData,t,1)}return r}createTextureDataFromLayoutBindTensor(t,e,r,n){return this.createTextureData(t,e,r,n,1)}createTextureData(t,e,r,n,o){ur.verbose("InferenceHandler",`Creating TextureData: layout:[${JSON.stringify(t)}]`);let a=this.session.textureManager.createTextureFromLayout(e,t,r,o);return this.createTextureDataFromTexture(t,e,a,n)}reshapeUnpacked(t,e){let r=this.getOrCreateTextureData(t,0),n={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Fe.computeStrides(e),unpackedShape:e};return this.createTextureDataFromTexture(n,t.type,r.texture).tensor}reshapePacked(t,e){let r=this.getOrCreateTextureData(t,2);if(fH(t.dims,e)){let s={channels:r.channels,height:r.height,width:r.width,shape:e.length!==0?e:[1],strides:Fe.computeStrides(e),unpackedShape:e,isPacked:!0};return this.createTextureDataFromTexture(s,t.type,r.texture).tensor}let n=gD(t.dims),o=gD(e),a=this.reshapePacked(t,n),u=this.run(e3(this,a,o),[a]);return this.reshapePacked(u,e)}cast(t,e){let r=this.getOrCreateTextureData(t,0);return this.createTextureDataFromTexture(r,e,r.texture).tensor}createTextureDataFromTexture(t,e,r,n,o){let a=j(N({},t),{tensor:n||new Nn(t.unpackedShape,e,u=>this.readTexture(a),u=>U(this,null,function*(){return this.readTextureAsync(a)}),void 0,o),texture:r});return this.setTextureData(a.tensor.dataId,a,t.isPacked),a}getTextureData(t,e=!1){return this.session.isInitializer(t)?this.session.getTextureData(t,e):e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){this.session.isInitializer(t)?this.session.setTextureData(t,e,r):(r?this.packedTextureDataCache:this.unpackedTextureDataCache).set(t,e)}isTextureLayoutCached(t,e=!1){return!!this.getTextureData(t.dataId,e)}dispose(){this.session.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.session.textureManager.releaseTexture(t)),this.unpackedTextureDataCache=new Map}readTexture(t){return t.isPacked?this.readTexture(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTexture(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(N1(this,t))}readTextureAsync(t){return U(this,null,function*(){return t.isPacked?this.readTextureAsync(this.unpack(t)):this.session.backend.glContext.isFloat32DownloadSupported?this.session.textureManager.readTextureAsync(t,t.tensor.type,t.channels):this.session.textureManager.readUint8TextureAsFloat(N1(this,t))})}pack(t){return this.executeProgram(JO(this,t.tensor),[t.tensor])}unpack(t){return this.executeProgram(t3(this,t.tensor),[t.tensor])}}}),wD,zt,zr=ee(()=>{"use strict";wD=class{constructor(t){Object.assign(this,t)}get cacheKey(){return this.key||(this.key=Object.getOwnPropertyNames(this).sort().map(t=>`${this[t]}`).join(";")),this.key}},zt=t=>new wD(t)}),e1,a3,s3,xD,_D,wH=ee(()=>{"use strict";zr(),rr(),tt(),e1={name:"BatchNormalization",inputNames:["A","Scale","B","Mean","Variance"],inputTypes:[0,0,0,0,0]},a3=(t,e,r)=>(_D(e),[t.run(j(N({},e1),{cacheHint:r.cacheKey,get:()=>xD(t,e,r)}),e)]),s3=t=>{let e=t.attributes.getFloat("epsilon",1e-5),r=t.attributes.getFloat("momentum",.9),n=t.attributes.getInt("spatial",1);return zt({epsilon:e,momentum:r,spatial:n})},xD=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),o=e[0].dims.length,[a,u]=t.calculateTextureWidthAndHeight(e[1].dims,0),s=`
  float process(int[${o}] indices) {
    vec2 position = offsetToCoords(indices[1], ${a}, ${u});
    float scale = getColorAsFloat(${n.texture2D}(Scale, position));
    float mean = getColorAsFloat(${n.texture2D}(Mean, position));
    float variance = getColorAsFloat(${n.texture2D}(Variance, position));
    float b = getColorAsFloat(${n.texture2D}(B, position));

    return scale * ( (_A(indices) - mean) / sqrt(variance + float(${r.epsilon})) ) + b;
  }`;return j(N({},e1),{output:{dims:e[0].dims,type:e[0].type,textureType:0},shaderSource:s})},_D=t=>{if(!t||t.length!==5)throw new Error("BatchNormalization requires 5 inputs.");let e=t[0],r=t[1],n=t[2],o=t[3],a=t[4];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1||o.dims.length!==1||a.dims.length!==1)throw new Error("invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1]||o.dims[0]!==e.dims[1]||a.dims[0]!==e.dims[1])throw new Error("invalid input shape.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64"||o.type!=="float32"&&o.type!=="float64"||a.type!=="float32"&&a.type!=="float64")throw new Error("invalid input tensor types.")}}),u3,tu,fe,k1,l3,Xo=ee(()=>{"use strict";u3=class{constructor(t,e,r,n){this.glContext=t,this.programInfo=e,this.inputTextureLayouts=r,this.outputTextureLayout=n}},tu=class{constructor(t){this.context=t}},fe=class{constructor(t,e){this.routineBody=t,this.dependencies=e}},k1=class{constructor(t,e,r){this.name=t,r?this.dependencies=r:this.dependencies=[],e&&(this.routineBody=e)}addDependency(t){t&&this.dependencies.push(t)}},l3=class{static returnOrderedNodes(t){if(!t||t.length===0)return[];if(t.length===1)return t;let e=new Set,r=new Set,n=new Array;return this.createOrderedNodes(t,e,r,n),n}static createOrderedNodes(t,e,r,n){for(let o=0;o<t.length;++o)this.dfsTraverse(t[o],e,r,n)}static dfsTraverse(t,e,r,n){if(!t||r.has(t.name))return;if(e.has(t.name))throw new Error("Cyclic dependency detected. Can't topologically sort routines needed for shader.");e.add(t.name);let o=t.dependencies;if(o&&o.length>0)for(let a=0;a<o.length;++a)this.dfsTraverse(o[a],e,r,n);n.push(t),r.add(t.name),e.delete(t.name)}}});function xH(){let t="add_";return{body:`
  float ${t}(float a, float b) {
    return a + b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 + v2;
  }
  `,name:t,type:0}}function _H(){let t="div_";return{body:`
  float ${t}(float a, float b) {
    return a / b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 / v2;
  }
  `,name:t,type:0}}function EH(){let t="mul_";return{body:`
  float ${t}(float a, float b) {
    return a * b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 * v2;
  }
  `,name:t,type:0}}function TH(){let t="sub_";return{body:`
  float ${t}(float a, float b) {
    return a - b;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return v1 - v2;
  }
  `,name:t,type:0}}function IH(){let t="equal_";return{body:`
  float ${t}(float a, float b) {
    return float(a == b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(equal(v1, v2));
  }
  `,name:t,type:0}}function AH(){let t="greater_";return{body:`
  float ${t}(float a, float b) {
    return float(a > b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r > v2.r ,
      v1.g > v2.g,
      v1.b > v2.b,
      v1.a > v2.a );
  }
  `,name:t,type:0}}function SH(){let t="less_";return{body:`
  float ${t}(float a, float b) {
    return float(a < b);
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4( v1.r < v2.r ,
                v1.g < v2.g,
                v1.b < v2.b,
                v1.a < v2.a );
  }
  `,name:t,type:0}}function DH(){let t="and_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) && bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r && b2.r ,
                b1.g && b2.g,
                b1.b && b2.b,
                b1.a && b2.a );
  }
  `,name:t,type:0}}function CH(){let t="or_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) || bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r || b2.r ,
                b1.g || b2.g,
                b1.b || b2.b,
                b1.a || b2.a );
  }
  `,name:t,type:0}}function OH(){let t="xor_";return{body:`
  float ${t}(float a, float b) {
    return float( bool(a) ^^ bool(b) );
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    bvec4 b1 = bvec4(v1);
    bvec4 b2 = bvec4(v2);
    return vec4( b1.r ^^ b2.r ,
                b1.g ^^ b2.g,
                b1.b ^^ b2.b,
                b1.a ^^ b2.a );
  }
  `,name:t,type:0}}function PH(){return NH("pow")}function MH(){let t="prelu_";return{body:`
  float ${t}(float a, float b) {
    return a < 0.0 ? a * b: a;
  }
  vec4 ${t}(vec4 v1, vec4 v2) {
    return vec4(
      v1.r < 0.0 ? v1.r * v2.r: v1.r,
      v1.g < 0.0 ? v1.g * v2.g: v1.g,
      v1.b < 0.0 ? v1.b * v2.b: v1.b,
      v1.a < 0.0 ? v1.a * v2.a: v1.a
      );
  }
  `,name:t,type:0}}function NH(t){let e=`${t}_`;return{body:`
  float ${e}(float a, float b) {
    return ${t}(a, b);
  }
  vec4 ${e}(vec4 v1, vec4 v2) {
    return ${t}(v1, v2);
  }
  `,name:e,type:0}}var Cn,ED,c3,f3,d3,h3,p3,g3,m3,y3,v3,b3,w3,x3,RH=ee(()=>{"use strict";ht(),Xo(),rr(),tt(),Cn=(t,e,r,n=e[0].type,o)=>{let a=t.session.pack?2:0;return{name:r.name,inputNames:["A","B"],inputTypes:[a,a],cacheHint:o,get:()=>ED(t,e,r,n)}},ED=(t,e,r,n=e[0].type)=>{let o=t.session.pack?2:0,a=!Fe.areEqual(e[0].dims,e[1].dims),u=e[0].dims,s=t.session.pack;if(a){let c=Bi.calcShape(e[0].dims,e[1].dims,!1);if(!c)throw new Error("Can't perform binary op on the given tensors");u=c;let f=u.length,d=e[0].dims.length!==0?e[0].dims.length:1,h=e[1].dims.length!==0?e[1].dims.length:1,p=e[0].dims.length!==0?"bcastIndices_A(indices, aindices);":"aindices[0] = 0;",m=e[1].dims.length!==0?"bcastIndices_B(indices, bindices);":"bindices[0] = 0;",v=Je(t.session.backend.glContext.version),x=s?`
      ${r.body}
      void main() {
        vec4 a = getAAtOutCoords();
        vec4 b = getBAtOutCoords();
        vec4 result = ${r.name}(a, b);
        ${v.output} = result;
      }`:`
      ${r.body}
      float process(int indices[${f}]) {
        int aindices[${d}];
        int bindices[${h}];
        ${p}
        ${m}
        return ${r.name}(_A(aindices), _B(bindices));
      }`;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:u,type:n,textureType:o},shaderSource:x,hasMain:s}}let l=Je(t.session.backend.glContext.version),i=`
    ${r.body}
    void main() {
      vec4 v1 = ${l.texture2D}(A, TexCoords);
      vec4 v2 = ${l.texture2D}(B, TexCoords);
      vec4 result = ${r.name}(v1, v2);
      ${l.output} = result;
    }
    `;return{name:r.name,inputNames:["A","B"],inputTypes:[o,o],output:{dims:e[0].dims,type:n,textureType:o},shaderSource:i,hasMain:!0}},c3=(t,e)=>[t.run(Cn(t,e,xH()),e)],f3=(t,e)=>[t.run(Cn(t,e,DH(),"bool"),e)],d3=(t,e)=>[t.run(Cn(t,e,_H()),e)],h3=(t,e)=>[t.run(Cn(t,e,IH(),"bool"),e)],p3=(t,e)=>[t.run(Cn(t,e,AH(),"bool"),e)],g3=(t,e)=>[t.run(Cn(t,e,SH(),"bool"),e)],m3=(t,e)=>[t.run(Cn(t,e,EH()),e)],y3=(t,e)=>[t.run(Cn(t,e,CH(),"bool"),e)],v3=(t,e)=>[t.run(Cn(t,e,PH()),e)],b3=(t,e)=>[t.run(Cn(t,e,MH()),e)],w3=(t,e)=>[t.run(Cn(t,e,TH()),e)],x3=(t,e)=>[t.run(Cn(t,e,OH(),"bool"),e)]}),_3,E3,TD,FH=ee(()=>{"use strict";ht(),_3=(t,e,r)=>(TD(e),[t.cast(e[0],r)]),E3=t=>Pn.tensorDataTypeFromProto(t.attributes.getInt("to")),TD=t=>{if(!t||t.length!==1)throw new Error("Cast requires 1 input.");if(t[0].type==="string")throw new Error("Invalid input type.")}}),ID,AD,T3,fc,kH=ee(()=>{"use strict";rr(),tt(),go(),eu(),ID=(t,e)=>({name:"Concat (packed)",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(2),cacheHint:e}),AD=(t,e,r,n)=>{let o=r[0].dims.slice();if(n>=o.length||n<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=o.length+n);let a=o.slice(0);for(let C=1;C<r.length;C++){let V=r[C].dims.slice();for(let z=0;z<o.length;z++)if(z===n)a[n]+=V[z];else if(o[z]!==V[z])throw new Error("non concat dimensions must match")}let u=a.length,s=uy("coords",u),l=qo(u),i=Oc(),c=r.map(C=>C.dims),f=Qs(u),d=new Array(c.length-1);d[0]=c[0][n];for(let C=1;C<d.length;C++)d[C]=d[C-1]+c[C][n];let h=f[n],p=f.slice(-2),m=f.join(),v=`if (${h} < ${d[0]}) {
        return getChannel(
            getX0(${m}), vec2(${p.join()}));
        }`;for(let C=1;C<d.length;C++){let V=d[C-1];v+=`
            if (${h} < ${d[C]}  && ${h} >= ${d[C-1]}) {
              return getChannel(
                getX${C}(${fc(f,h,V)}),
                vec2(${fc(p,h,V)}));
            }`}let x=d.length,y=d[d.length-1];v+=`
            return getChannel(
              getX${x}(${fc(f,h,y)}),
              vec2(${fc(p,h,y)}));`;let _=Je(t.session.backend.glContext.version),I=`
          ${i}
          float getValue(${f.map(C=>"int "+C)}) {
            ${v}
          }

          void main() {
            ${l} coords = getOutputCoords();
            int lastDim = coords.${f[u-1]};
            coords.${f[u-1]} = coords.${f[u-2]};
            coords.${f[u-2]} = lastDim;

            vec4 result = vec4(getValue(${s}), 0., 0., 0.);

            ${s[u-1]} = ${s[u-1]} + 1;
            if (${s[u-1]} < ${a[u-1]}) {
              result.g = getValue(${s});
            }

            ${s[u-2]} = ${s[u-2]} + 1;
            if (${s[u-2]} < ${a[u-2]}) {
              result.a = getValue(${s});
            }

            ${s[u-1]} = ${s[u-1]} - 1;
            if (${s[u-2]} < ${a[u-2]} &&
                ${s[u-1]} < ${a[u-1]}) {
              result.b = getValue(${s});
            }
            ${_.output} = result;
          }
        `;return j(N({},e),{output:{dims:a,type:r[0].type,textureType:2},shaderSource:I,hasMain:!0})},T3=(t,e,r)=>{let n=ID(e.length,r.cacheKey);return j(N({},n),{get:()=>AD(t,n,e,r.axis)})},fc=(t,e,r)=>{let n=t.indexOf(e);return t.map((o,a)=>a===n?`${o} - ${r}`:o).join()}}),I3,SD,DD,CD,t1,OD,PD,MD,A3,ND,LH=ee(()=>{"use strict";zr(),tt(),kH(),I3=(t,e,r)=>(ND(e),t.session.pack&&e[0].dims.length>1?[t.run(T3(t,e,r),e)]:[t.run(CD(t,e,r),e)]),SD=(t,e)=>({name:"Concat",inputNames:Array.from({length:t},(r,n)=>`X${n}`),inputTypes:Array(t).fill(0),cacheHint:e}),DD=(t,e,r,n)=>{let o=r[0].dims.slice();if(n>=o.length||n<-1*o.length)throw new Error("axis specified for concat doesn't match input dimensionality");n<0&&(n=o.length+n);let a=o.slice(0);for(let h=1;h<r.length;h++){let p=r[h].dims.slice();for(let m=0;m<o.length;m++)if(m===n)a[n]+=p[m];else if(o[m]!==p[m])throw new Error("non concat dimensions must match")}let u=a.length,s=new Array(r.length),l=0;for(let h=0;h<s.length;++h)l+=r[h].dims[n],s[h]=l;let i="";r.length<5?i=t1(s):i=OD(s);let c=PD(r.length,u),f=MD(s),d=`
        ${c}
        ${f}
        ${i}
        float process(int indices[${u}]) {
          int textureIndex = getTextureWhereDataResides (indices[${n}]);

          if(textureIndex != 0) {
            indices[${n}] = indices[${n}] - int(getSizeInConcatAxisValueFromIndex(textureIndex-int(1)));
          }

          return fetchDataFromCorrectTexture(textureIndex, indices);
        }`;return j(N({},e),{output:{dims:a,type:r[0].type,textureType:0},shaderSource:d})},CD=(t,e,r)=>{let n=SD(e.length,r.cacheKey);return j(N({},n),{get:()=>DD(t,n,e,r.axis)})},t1=t=>`int getTextureWhereDataResides(int index) {
      ${t.map((e,r)=>`if(index<${e}) {return ${r};}
`).join("")}
    }`,OD=t=>t1(t),PD=(t,e)=>{let r=[`float fetchDataFromCorrectTexture(int textureIndex, int indices[${e}]) {`];for(let n=0;n<t;++n)n===0?r.push(`	if (textureIndex == ${n}) { return _X${n}(indices); }`):n===t-1?r.push(`	else { return _X${n}(indices); }`):r.push(`	else if (textureIndex == ${n}) { return _X${n}(indices); }`);return r.push("	}"),r.join(`
`)},MD=t=>{let e=["int getSizeInConcatAxisValueFromIndex(int index) {"];for(let r=0;r<t.length;++r)r===0?e.push(`	if (index == ${r}) { return ${t[r]}; }`):r===t.length-1?e.push(`	else { return ${t[r]}; }`):e.push(`	else if (index == ${r}) { return ${t[r]}; }`);return e.push("	}"),e.join(`
`)},A3=t=>zt({axis:t.attributes.getInt("axis")}),ND=t=>{if(!t||t.length<1)throw new Error("too few inputs");let e=t[0].type,r=t[0].dims.length;if(e==="string")throw new Error("string tensor is not supported yet");for(let n of t){if(n.type!==e)throw new Error("input tensors should be one type");if(n.dims.length!==r)throw new Error("input tensors should have the same shape")}}});function BH(){return Gn("abs")}function $H(){return Gn("acos")}function VH(){return Gn("asin")}function jH(){return Gn("atan")}function UH(){return Gn("ceil")}function HH(){return Gn("cos")}function zH(t){let e="elu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a >= 0.0 ? a: (exp(a) - 1.0) * alpha;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function GH(){return Gn("exp")}function WH(){return Gn("floor")}function S3(t,e){let r="clip";return{body:`
  const float min = float(${t});
  const float max = float(${e});

  float ${r}_(float a) {
    return clamp(a, min, max);
  }
  vec4 ${r}_(vec4 v) {
    return clamp(v, min, max);
  }
  `,name:r,type:0}}function qH(){let t="indentity";return{body:`
  float ${t}_(float a) {
    return a;
  }
  vec4 ${t}_(vec4 v) {
    return v;
  }
  `,name:t,type:0}}function XH(t){let e="leakyRelu";return{body:`
  const float alpha = float(${t});

  float ${e}_(float a) {
    return a < 0.0 ? a * alpha : a;
  }
  vec4 ${e}_(vec4 v) {
    return vec4(${e}_(v.x), ${e}_(v.y), ${e}_(v.z), ${e}_(v.w));
  }
  `,name:e,type:0}}function YH(){return Gn("log")}function ZH(){let t="neg";return{body:`
  float ${t}_(float a) {
    return -a;
  }
  vec4 ${t}_(vec4 v) {
    return -v;
  }
  `,name:t,type:0}}function KH(){let t="not";return{body:`
  float ${t}_(float a) {
    return float( ! bool(a) );
  }
  bool ${t}_(bool a) {
    return !a;
  }
  vec4 ${t}_(vec4 v) {
    return vec4(!bool(v.x), !bool(v.y), !bool(v.z), !bool(v.w));
  }
  bvec4 ${t}_(bvec4 v) {
    return bvec4(!v.x, !v.y, !v.z, !v.w);
  }
  `,name:t,type:0}}function QH(){return Gn("sin")}function D3(){let t="relu";return{body:`
  float ${t}_(float a) {
    return max( a, 0.0 );
  }
  vec4 ${t}_(vec4 v) {
    return max( v, 0.0 );
  }
  `,name:t,type:0}}function C3(){let t="sigmoid";return{body:`
  float ${t}_(float a) {
    return 1.0 / (1.0 + exp(-a));
  }
  vec4 ${t}_(vec4 v) {
    return 1.0 / (1.0 + exp(-v));
  }
  `,name:t,type:0}}function JH(){return Gn("sqrt")}function ez(){return Gn("tan")}function tz(){let t="tanh";return{body:`
  float ${t}_(float a) {
    a = clamp(a, -10., 10.);
    a = exp(2.*a);
    return (a - 1.) / (a + 1.);
  }
  vec4 ${t}_(vec4 v) {
    v = clamp(v, -10., 10.);
    v = exp(2.*v);
    return (v - 1.) / (v + 1.);
  }
  `,name:t,type:0}}function Gn(t){return{body:`
  float ${t}_(float a) {
    return ${t}(a);
  }
  vec4 ${t}_(vec4 v) {
    return ${t}(v);
  }
  `,name:t,type:0}}var RD,sr,O3,P3,M3,N3,L1,R3,F3,FD,k3,L3,B3,$3,V3,j3,B1,U3,H3,z3,G3,W3,q3,X3,Y3,Z3,K3,Q3,J3=ee(()=>{"use strict";zr(),ht(),Xo(),rr(),tt(),RD=(t,e,r,n)=>{let o=t.session.pack?2:0,a=Je(t.session.backend.glContext.version);return j(N({},e),{output:{dims:r.dims,type:r.type,textureType:o},shaderSource:`
     ${n.body}
     void main() {
       vec4 v = ${a.texture2D}(A, TexCoords);
       v = ${n.name}_(v);
       ${a.output} = v;
     }
     `,hasMain:!0})},sr=(t,e,r,n)=>{let o=t.session.pack?2:0,a={name:r.name,inputTypes:[o],inputNames:["A"],cacheHint:n};return j(N({},a),{get:()=>RD(t,a,e,r)})},O3=(t,e)=>[t.run(sr(t,e[0],BH()),e)],P3=(t,e)=>[t.run(sr(t,e[0],$H()),e)],M3=(t,e)=>[t.run(sr(t,e[0],VH()),e)],N3=(t,e)=>[t.run(sr(t,e[0],jH()),e)],L1=(t,e,r)=>[t.run(sr(t,e[0],S3(r.min,r.max),r.cacheKey),e)],R3=t=>zt({min:t.attributes.getFloat("min",Ac),max:t.attributes.getFloat("max",Sc)}),F3=(t,e)=>{let r=FD(t,e);return L1(t,[e[0]],r)},FD=(t,e)=>{if(e.length>=3&&(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)))throw new Error("dynamic clip attributes are not allowed");let r=e.length>=3?e[1].numberData[0]:Ac,n=e.length>=3?e[2].numberData[0]:Sc;return zt({min:r,max:n})},k3=(t,e)=>[t.run(sr(t,e[0],UH()),e)],L3=(t,e)=>[t.run(sr(t,e[0],HH()),e)],B3=(t,e,r)=>[t.run(sr(t,e[0],zH(r.alpha),r.cacheKey),e)],$3=t=>zt({alpha:t.attributes.getFloat("alpha",1)}),V3=(t,e)=>[t.run(sr(t,e[0],GH()),e)],j3=(t,e)=>[t.run(sr(t,e[0],WH()),e)],B1=(t,e)=>[t.run(sr(t,e[0],qH()),e)],U3=(t,e,r)=>[t.run(sr(t,e[0],XH(r.alpha),r.cacheKey),e)],H3=t=>zt({alpha:t.attributes.getFloat("alpha",.01)}),z3=(t,e)=>[t.run(sr(t,e[0],YH()),e)],G3=(t,e)=>[t.run(sr(t,e[0],ZH()),e)],W3=(t,e)=>[t.run(sr(t,e[0],KH()),e)],q3=(t,e)=>[t.run(sr(t,e[0],D3()),e)],X3=(t,e)=>[t.run(sr(t,e[0],C3()),e)],Y3=(t,e)=>[t.run(sr(t,e[0],QH()),e)],Z3=(t,e)=>[t.run(sr(t,e[0],JH()),e)],K3=(t,e)=>[t.run(sr(t,e[0],ez()),e)],Q3=(t,e)=>[t.run(sr(t,e[0],tz()),e)]});function Pc(t){let e;switch(t.activation){case"Relu":e=D3();break;case"Sigmoid":e=C3();break;case"Clip":e=S3(t.clipMin,t.clipMax);break;default:return{activationFunction:"",applyActivation:""}}let r=e.name,n=e.body,o=`value = ${r}_(value);`;return{activationFunction:n,applyActivation:o}}var zd,ru=ee(()=>{"use strict";ht(),J3(),zd=t=>{let e=t.getString("activation","");if(e==="Clip"){let[r,n]=t.getFloats("activation_params",[Ac,Sc]);return{activation:e,clipMax:n,clipMin:r,activationCacheKey:`${e}:${r},${n}`}}return{activation:e,activationCacheKey:e}}}),kD,LD,eP,rz=ee(()=>{"use strict";wi(),rr(),tt(),fy(),ru(),kD=(t,e)=>({name:"GroupedConv",inputNames:t?["X","W","Bias"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),LD=(t,e,r,n)=>{let o=e.length>2?"value += getBias(output_channel);":"",a=e[0].dims.slice(),u=e[1].dims.slice(),s=u[0]/n.group;ur.verbose("GroupedConv",`autpPad:${n.autoPad}, dilations:${n.dilations}, group:${n.group}, kernelShape:${n.kernelShape}, pads:${n.pads}, strides:${n.strides}`);let l=Tc(a,u,n.dilations,n.pads,n.strides),i=Je(t.session.backend.glContext.version),{activationFunction:c,applyActivation:f}=Pc(n),d=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${c}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;
    ivec2 xRCCorner = coords.zw * strides - pads;
    int group_id = output_channel / ${s};

    float value = 0.0;
    for (int wInChannel = 0; wInChannel < ${u[1]}; wInChannel++) {
      int input_channel = group_id * ${u[1]} + wInChannel;
      for (int wHeight = 0; wHeight < ${u[2]}; wHeight++) {
        int xHeight = xRCCorner.x + wHeight * ${n.dilations[0]};

        if (xHeight < 0 || xHeight >= ${a[2]}) {
          continue;
        }

        for (int wWidth = 0; wWidth < ${u[3]}; wWidth++) {
          int xWidth = xRCCorner.y + wWidth * ${n.dilations[1]};
          if (xWidth < 0 || xWidth >= ${a[3]}) {
            continue;
          }

          float xVal = getX(batch, input_channel, xWidth, xHeight);
          float wVal = getW(output_channel, wInChannel, wWidth, wHeight);
          value += xVal*wVal;
        }
      }
    }
    ${o}
    ${f}
    ${i.output} = vec4(value, .0, .0, .0);
  }
`;return j(N({},r),{output:{dims:l,type:e[0].type,textureType:0},shaderSource:d,hasMain:!0})},eP=(t,e,r)=>{let n=kD(e.length>2,r.cacheKey);return j(N({},n),{get:()=>LD(t,e,n,r)})}}),BD,$D,tP,nz=ee(()=>{"use strict";rr(),tt(),eu(),BD=t=>({name:"Im2Col (packed)",inputNames:["A"],inputTypes:[2],cacheHint:t}),$D=(t,e,r,n,o,a)=>{let u=r.dims,s=n.dims,l=2,i=3,c=o.length,f=[s[1]*s[2]*s[3],o[2]*o[3]],d=s[2]*s[3],h=Oc(),p=Je(t.session.backend.glContext.version),m="";for(let x=0;x<=1;x++)for(let y=0;y<=1;y++)m+=`
            blockIndex = rc.x + ${y};
            pos = rc.y + ${x};

            if(blockIndex < ${f[1]} && pos < ${f[0]}) {
              offsetY = int(blockIndex / (${o[c-1]})) * ${a.strides[0]} -
                ${a.pads[0]};
              d0 = offsetY + ${a.dilations[0]} * (imod(pos, ${d}) / ${s[2]});

              if(d0 < ${u[l]} && d0 >= 0) {
                offsetX = imod(blockIndex, ${o[c-1]}) * ${a.strides[1]} -
                  ${a.pads[1]};
                d1 = offsetX + ${a.dilations[1]} * imod(imod(pos, ${d}), ${s[2]});

                if(d1 < ${u[i]} && d1 >= 0) {

                  ch = int(float(pos)/ ${d}.);
                    innerDims = vec2(d0, d1);
                    result[${x*2+y}] = getChannel(
                      getA(0, ch, int(innerDims.x),
                      int(innerDims.y)), innerDims);
                }
              }
            }

          `;let v=`
      ${h}

      void main() {
        ivec2 rc = getOutputCoords();
          vec4 result = vec4(0.0);
          int blockIndex, pos, offsetY, d0, offsetX, d1, ch;
          vec2 innerDims;
          ${m}
          ${p.output} = result;
      }
            `;return j(N({},e),{output:{dims:f,type:r.type,textureType:2},shaderSource:v,hasMain:!0})},tP=(t,e,r,n,o)=>{let a=BD(o.cacheKey);return j(N({},a),{get:()=>$D(t,a,e,r,n,o)})}});function iz(t,e,r){let n=e[0].dims,o=e[1].dims,a=Bi.calcShape(n,o,!0);if(!a)throw new Error("Can't use matmul on the given tensors");let u=qo(a.length),s=Qs(),{activationFunction:l,applyActivation:i}=Pc(r),c=e.length>2,f=c?"value += getBiasForMatmul();":"",d=c?`${nP(u,s,e[2].dims,a,!1)}`:"",h=a.length,p=n.length,m=o.length,v=n[n.length-1],x=`
    ${l}
    ${d}
    float process(int indices[${h}]) {
        int a[${p}];
        int b[${m}];
        bcastMatmulIndices_A(indices, a);
        bcastMatmulIndices_B(indices, b);

        float value;
        for (int k=0; k<${v}; ++k) {
            a[${p-1}] = k;
            b[${m-2}] = k;
            value += _A(a) * _B(b);
        }
        ${f}
        ${i}
        return value;
    }`;return j(N({},t),{output:{dims:a,type:e[0].type,textureType:0},shaderSource:x})}function rP(t,e){let r=aP(t.length>2,e.activationCacheKey);return j(N({},r),{get:()=>iz(r,t,e)})}function nP(t,e,r,n,o){let a="",u=r.length,s=n.length,l=s-u;s<2&&u>0?a="coords":a=r.map((d,h)=>`coords.${e[h+l]}`).join(", ");let i=Bi.getBroadcastDims(r,n).map(d=>`coords.${e[d+l]} = 0;`).join(`
`),c=Fe.size(r)===1,f="vec4(outputValue.xx, outputValue.yy)";return c&&(f="vec4(outputValue.x)"),o?`
vec4 getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${i}
  vec4 outputValue = getBias(${a});
  return ${f};
}`:`
float getBiasForMatmul() {
  ${t} coords = getOutputCoords();
  ${i}
  return getBias(coords.x);
}`}var iP,oP,aP,VD,ly=ee(()=>{"use strict";ht(),tt(),go(),ru(),sP(),iP=(t,e,r)=>(VD(e),t.session.pack?[t.run(cy(t,e,r),e)]:[t.run(rP(e,r),e)]),oP=t=>zd(t.attributes),aP=(t,e)=>({name:"MatMul",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),VD=t=>{if(!t||t.length!==2)throw new Error("MatMul requires 2 inputs.");if(t[0].dims[t[0].dims.length-1]!==t[1].dims[t[1].dims.length-2])throw new Error("shared dimension does not match.");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64")throw new Error("inputs should be float type");if(t[0].type!==t[1].type)throw new Error("inputs types should match")}});function oz(t,e,r,n){let o=[],a=[],u=r[0].dims,s=r[1].dims,l=u.length,i=s.length,c=n.length,f=c-l,d=c-i;o=u.map((y,_)=>`coords.${e[_+f]}`),o[l-1]="i*2",o.join(", "),a=s.map((y,_)=>`coords.${e[_+d]}`),a[i-2]="i*2",a.join(", ");let h=Bi.getBroadcastDims(u,n),p=Bi.getBroadcastDims(s,n),m=h.map(y=>`coords.${e[y+f]} = 0;`).join(`
`),v=p.map(y=>`coords.${e[y+d]} = 0;`).join(`
`),x=`int lastDim = coords.${e[c-1]};
  coords.${e[c-1]} = coords.${e[c-2]};
  coords.${e[c-2]} = lastDim;`;return`
vec4 getAAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${m}
  vec4 outputValue = getA(${o});
  return outputValue;
}

vec4 getBAtOutCoordsMatmul(int i) {
  ${t} coords = getOutputCoords();
  ${x}
  ${v}
  vec4 outputValue = getB(${a});
  return outputValue;
}`}function az(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`rc.${t[e-2]}, i*2`,r}function sz(t,e){let r="";for(let n=0;n<e-2;n++)r+=`rc.${t[n]}, `;return r+=`i*2, rc.${t[e-1]}`,r}var jD,UD,cy,sP=ee(()=>{"use strict";ht(),rr(),tt(),go(),ru(),ly(),jD=(t,e)=>({name:"MatMul (packed)",inputNames:t?["A","B","Bias"]:["A","B"],inputTypes:t?[2,2,2]:[2,2],cacheHint:e}),UD=(t,e,r,n)=>{let o=r.length>2,a=o?"value += getBiasForMatmul();":"",u=r[0].dims,s=r[1].dims,l=Bi.calcShape(u,s,!0),i=!Fe.areEqual(r[0].dims,r[1].dims);if(!l)throw new Error("Can't use matmul on the given tensors");let c=u[u.length-1],f=Math.ceil(c/2),d=u.length,h=s.length,p=Je(t.session.backend.glContext.version),m=qo(l.length),v=l.length,x=Qs(),{activationFunction:y,applyActivation:_}=Pc(n),I=o?`${nP(m,x,r[2].dims,l,!0)}`:"",C=i?`${oz(m,x,r,l)}`:"",V=i?"getAAtOutCoordsMatmul(i)":`getA(${az(x,d)})`,z=i?"getBAtOutCoordsMatmul(i)":`getB(${sz(x,h)})`,W=i?"":`${m} rc =
          getOutputCoords(); int lastDim = rc.${x[v-1]}; rc.${x[v-1]} =
          rc.${x[v-2]}; rc.${x[v-2]} = lastDim;
      `,k=`
            ${C}
            ${I}
            ${y}
            void main() {
              ${W}

              vec4 value = vec4(0);
              for (int i = 0; i < ${f}; i++) {
                vec4 a = ${V};
                vec4 b = ${z};

                value += (a.rrbb * b.rgrg);
                value += (a.ggaa * b.baba);
              }
              ${a}
              ${_}
              ${p.output} = value;
            }`;return j(N({},e),{output:{dims:l,type:r[0].type,textureType:2},shaderSource:k,hasMain:!0})},cy=(t,e,r)=>{let n=jD(e.length>2,r.activationCacheKey);return j(N({},n),{get:()=>UD(t,n,e,r)})}}),uP,uz=ee(()=>{"use strict";fy(),nz(),sP(),uP=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Tc(n,o,r.dilations,r.pads,r.strides),u=t.run(tP(t,e[0],e[1],a,r),[e[0]]),s=t.reshapePacked(e[1],[o[0],o[1]*o[2]*o[3]]),l=e.length===3?[s,u,e[2]]:[s,u],i=t.run(cy(t,l,r),l);return t.reshapePacked(i,a)}}),HD,zD,lP,$1,cP=ee(()=>{"use strict";tt(),HD=t=>({name:"Im2Col",inputNames:["X"],inputTypes:[0],cacheHint:t}),zD=(t,e,r,n,o,a)=>{let u=r.dims,s=n.dims,l=o.length,i=$1(u,s,o,4),c=`
        const int XC = ${u[1]};
        const int XH = ${u[2]};
        const int XW = ${u[3]};
        const int KH = ${a.kernelShape[0]};
        const int KW = ${a.kernelShape[1]};
        const int dilationH = ${a.dilations[0]};
        const int dilationW = ${a.dilations[1]};
        const int strideH = ${a.strides[0]};
        const int strideW = ${a.strides[1]};
        const int padH = ${a.pads[0]};
        const int padW = ${a.pads[1]};
        const int KHKW = KH*KW;
        const int XCKHKW = XC * KHKW;
        const int outputChannels = 4;
        vec4 process(int indices[${l}]) {
          int b  = indices[0]; // batch size
          int oh = indices[1] * strideH - padH; //output height
          int ow = indices[2] * strideW - padW; //output width
          int p = indices[3] * outputChannels; //patch
          vec4 value = vec4(0.0);
          for(int i=0; i < outputChannels; ++i) {
            if(p < XCKHKW) {
              int patchC = p / KHKW;
              int patchH = (p - patchC*KHKW) / KW;
              int patchW = (p - patchC*KHKW) - patchH * KW;
              int xh2 = oh + patchH * dilationH;
              int xw2 = ow + patchW * dilationW;
              int x[${u.length}];
              x[0] = b;
              x[1] = patchC;
              x[2] = xh2;
              x[3] = xw2;
              if(xh2 >= 0 &&
                  xh2 < XH &&
                  xw2 >= 0 &&
                  xw2 < XW) {
                value[i] = _X(x);
              }
            }
            ++p;
          }
          return value;
        }
        `;return j(N({},e),{output:{dims:i,type:r.type,textureType:4},shaderSource:c})},lP=(t,e,r,n,o)=>{let a=HD(o.cacheKey);return j(N({},a),{get:()=>zD(t,a,e,r,n,o)})},$1=(t,e,r,n=4)=>[r[0],r[2],r[3],Math.ceil(t[1]*e[2]*e[3]/n)]}),GD,WD,fP,lz=ee(()=>{"use strict";ht(),rr(),tt(),ru(),cP(),GD=(t,e)=>({name:"ConvDotProduct",inputNames:t?["Im2Col","K","B"]:["Im2Col","K"],inputTypes:t?[0,4,0]:[0,4],cacheKey:e.activationCacheKey}),WD=(t,e,r,n,o)=>{let a=r[0].dims,u=r[1].dims,s=[u[0],Math.ceil(a[1]*u[2]*u[3]/4)],l=$1(a,u,n),[i,c]=t.calculateTextureWidthAndHeight(s,4),f=Fe.computeStrides(l),[d,h]=t.calculateTextureWidthAndHeight(l,4),p=n.length,m=r.length<3?"0.0":"_B(b)",v=Math.ceil(a[1]*u[2]*u[3]/4),{activationFunction:x,applyActivation:y}=Pc(o),_=Je(t.session.backend.glContext.version),I=`
${x}
float process(int indices[${p}]) {
  int b[1];
  b[0] = indices[1];
  int im2col[4];
  im2col[0] = indices[0];
  im2col[1] = indices[2];
  im2col[2] = indices[3];
  int im2colOffset = im2col[0] * ${f[0]} + im2col[1] * ${f[1]} + im2col[2] * ${f[2]};
  int kernelOffset = indices[1] * ${s[1]};
  float value = ${m};
  for (int i = 0; i < ${v}; ++i) {
    vec2 im2colCoords = offsetToCoords(im2colOffset, ${d}, ${h});
    vec2 kernelCoords = offsetToCoords(kernelOffset, ${i}, ${c});
    value += dot(${_.texture2D}(Im2Col, im2colCoords), ${_.texture2D}(K, kernelCoords));
    ++im2colOffset;
    ++kernelOffset;
  }
  ${y}
  return value;
}`;return j(N({},e),{output:{dims:n,type:r[0].type,textureType:0},shaderSource:I})},fP=(t,e,r,n)=>{let o=GD(e.length>2,n);return j(N({},o),{get:()=>WD(t,o,e,r,n)})}}),Tc,V1,qD,XD,YD,ZD,j1,KD,fy=ee(()=>{"use strict";zr(),ht(),rz(),uz(),lz(),ru(),cP(),ly(),Tc=(t,e,r,n,o)=>{let a=t[0],u=t.slice(2),s=u.length,l=e[0],i=e.slice(2).map((f,d)=>f+(f-1)*(r[d]-1)),c=u.map((f,d)=>f+n[d]+n[d+s]).map((f,d)=>Math.floor((f-i[d]+o[d])/o[d]));return[a,l].concat(...c)},V1=(t,e,r)=>(KD(e,r),qD(t,e,r)),qD=(t,e,r)=>{let n=ZD(r,e),o=t.session.pack,a=n.kernelShape[0]===1&&n.kernelShape[1]===1;return n.group>1?[t.run(eP(t,e,n),e)]:a&&o?[XD(t,e,n)]:o&&e[0].dims.length===4&&e[0].dims[0]===1&&!a?[uP(t,e,n)]:[YD(t,e,n)]},XD=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Tc(n,o,r.dilations,r.pads,r.strides),u=t.reshapeUnpacked(e[0],[n[1],n[2]*n[3]]),s=t.reshapeUnpacked(e[1],[o[0],o[1]]),l=e.length>2?[s,u,e[2]]:[s,u],i=t.run(rP(l,r),l);return t.reshapeUnpacked(i,a)},YD=(t,e,r)=>{let n=e[0].dims,o=e[1].dims,a=Tc(n,o,r.dilations,r.pads,r.strides),u=t.run(lP(t,e[0],e[1],a,r),[e[0]]),s=e.length===3?[u,e[1],e[2]]:[u,e[1]];return t.run(fP(t,e,a,r),s)},ZD=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let a=2;a<e[1].dims.length;++a)r.push(e[1].dims[a]);let n=t.pads.slice();$d.adjustPadsBasedOnAutoPad(e[0].dims,t.strides,t.dilations,r,n,t.autoPad);let o=Object.assign({},t);return Object.assign(o,{kernelShape:r,pads:n,cacheKey:t.cacheKey}),o},j1=t=>{let e=t.attributes,r=zd(e),n=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("pads",[0,0,0,0]),l=e.getInts("strides",[1,1]);return zt(N({autoPad:n,dilations:o,group:a,kernelShape:u,pads:s,strides:l},r))},KD=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[1]*e.group;if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");if(t.length===3&&(t[2].dims.length!==1||t[1].dims[0]!==t[2].dims[0]))throw new Error("invalid bias");let o=t[0].dims.length-2;if(e.dilations.length!==o)throw new Error(`dilations should be ${o}D`);if(e.strides.length!==o)throw new Error(`strides should be ${o}D`);if(e.pads.length!==o*2)throw new Error(`pads should be ${o*2}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("Conv input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("Conv input(bias) should be float tensor")}}),QD,JD,eC,dP,tC,rC,nC,iC,oC,aC,hP,sC,cz=ee(()=>{"use strict";zr(),rr(),tt(),ru(),QD=(t,e,r,n,o,a)=>(t-1)*e+r+(n-1)*o+1-a,JD=(t,e,r,n,o)=>{let a=Math.floor(t/2);e==="SAME_UPPER"?(r[n]=a,r[o]=t-a):e==="SAME_LOWER"&&(r[n]=t-a,r[o]=a)},eC=(t,e,r,n,o,a,u,s)=>{let l=t.length-2,i=s.length===0;for(let c=0;c<l;++c){let f=i?t[c+2]*a[c]:s[c],d=QD(t[c+2],a[c],o[c],e[c],r[c],f);JD(d,n,o,c,c+l),i&&s.push(a[c]*(t[c+2]-1)+u[c]+(e[c]-1)*r[c]+1-o[c]-o[c+l])}},dP=(t,e,r)=>(sC(e,r),tC(t,e,r)),tC=(t,e,r)=>{let n=aC(r,e);return[oC(t,e,n)]},rC=(t,e)=>({name:"ConvTranspose",inputNames:t?["X","W","B"]:["X","W"],inputTypes:t?[0,0,0]:[0,0],cacheHint:e}),nC=(t,e,r,n)=>{let o=e.length>2?"getB(output_channel)":"0.0",a=e[0].dims,u=e[1].dims,s=u[1],l=u[0]/n.group,i=[e[0].dims[0],e[1].dims[1]*n.group,...n.outputShape],c=Je(t.session.backend.glContext.version),{activationFunction:f,applyActivation:d}=Pc(n),h=`
  const ivec2 strides = ivec2(${n.strides[0]}, ${n.strides[1]});
  const ivec2 pads = ivec2(${n.pads[0]}, ${n.pads[1]});
  ${f}
  void main() {
    ivec4 coords = getOutputCoords();
    int batch = coords.x;
    int output_channel = coords.y;

    ivec2 loc = coords.zw + pads;

    int group_id = output_channel / ${s};
    int wOutChannel = output_channel - group_id * ${s};

    float value = ${o};
    for (int inChannelOffset = 0; inChannelOffset < ${l}; inChannelOffset++) {
      int input_channel = group_id * ${l} + inChannelOffset;
      for (int wWOff = 0; wWOff < ${u[2]}; wWOff++) {
        for (int wHOff = 0; wHOff < ${u[3]}; wHOff++) {
          ivec2 wOff = ivec2(wWOff * ${n.dilations[0]}, wHOff * ${n.dilations[1]});
          ivec2 wLoc = loc - wOff;
          ivec2 wLocIn = wLoc / strides;
          if (
            wLocIn * strides == wLoc &&
            wLocIn.x >= 0 && wLocIn.x < ${a[2]} &&
            wLocIn.y >= 0 && wLocIn.y < ${a[3]}
          ) {
            float xVal = getX(batch, input_channel, wLocIn.y, wLocIn.x);
            float wVal = getW(input_channel, wOutChannel, wHOff, wWOff);
            value += xVal * wVal;
          }
        }
      }
    }
    ${d}
    ${c.output} = vec4(value, .0, .0, .0);
  }
`;return j(N({},r),{output:{dims:i,type:e[0].type,textureType:0},shaderSource:h,hasMain:!0})},iC=(t,e,r)=>{let n=rC(e.length>2,r.cacheKey);return j(N({},n),{get:()=>nC(t,e,n,r)})},oC=(t,e,r)=>t.run(iC(t,e,r),e),aC=(t,e)=>{let r=t.kernelShape.slice();if(t.kernelShape.length===0)for(let s=2;s<e[1].dims.length;++s)r.push(e[1].dims[s]);let n=t.pads.slice(),o=t.outputShape.slice(),a=e[0].dims;eC(a,r,t.dilations,t.autoPad,n,t.strides,t.outputPadding,o);let u=Object.assign({},t);return Object.assign(u,{kernelShape:r,pads:n,outputShape:o,cacheKey:t.cacheKey}),u},hP=t=>{let e=t.attributes,r=zd(e),n=e.getString("auto_pad","NOTSET"),o=e.getInts("dilations",[1,1]),a=e.getInt("group",1),u=e.getInts("kernel_shape",[]),s=e.getInts("output_padding",[0,0]),l=e.getInts("output_shape",[]),i=e.getInts("pads",[0,0,0,0]),c=e.getInts("strides",[1,1]);return zt(N({autoPad:n,dilations:o,group:a,kernelShape:u,outputPadding:s,outputShape:l,pads:i,strides:c},r))},sC=(t,e)=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Conv requires 2 or 3 inputs");if(t[0].dims.length!==4||t[1].dims.length!==4)throw new Error("currently only support 2-dimensional conv");let r=t[0].dims[1],n=t[1].dims[0];if(r!==n)throw new Error("FILTER_IN_CHANNEL should be equal to DATA_CHANNEL");let o=t[1].dims[1]*e.group;if(t.length===3&&(t[2].dims.length!==1||t[2].dims[0]!==o))throw new Error("invalid bias");let a=t[0].dims.length-2;if(e.dilations.length!==a)throw new Error(`dilations should be ${a}D`);if(e.strides.length!==a)throw new Error(`strides should be ${a}D`);if(e.pads.length!==a*2)throw new Error(`pads should be ${a*2}D`);if(e.outputPadding.length!==a)throw new Error(`output_padding should be ${a}D`);if(e.kernelShape.length!==0&&e.kernelShape.length!==t[1].dims.length-2)throw new Error("invalid kernel shape");if(e.outputShape.length!==0&&e.outputShape.length!==t[0].dims.length-2)throw new Error("invalid output shape");if(t[0].type!=="float32"||t[1].type!=="float32")throw new Error("ConvTranspose input(X,W) should be float tensor");if(t.length===3&&t[2].type!=="float32")throw new Error("ConvTranspose input(bias) should be float tensor")}}),r1,Dc,pP,uC,n1,lC,cC,fC,dy=ee(()=>{"use strict";zr(),ht(),tt(),r1={name:"Transpose",inputNames:["A"],inputTypes:[0]},Dc=(t,e,r)=>(fC(e),[t.run(j(N({},r1),{cacheHint:r.cacheKey,get:()=>uC(t,e[0],r.perm)}),e)]),pP=t=>zt({perm:t.attributes.getInts("perm",[])}),uC=(t,e,r)=>{let n=e.dims;r=n1(n,r);let o=lC(n,r),a=n.length,u=`
      ${cC("perm",r,a)}
      float process(int indices[${a}]) {
        int a[${a}];
        perm(a, indices);
        return _A(a);
      }`;return j(N({},r1),{output:{dims:o,type:e.type,textureType:0},shaderSource:u})},n1=(t,e)=>(e&&e.length!==t.length&&(e=[...t.keys()].reverse()),e),lC=(t,e)=>(e=n1(t,e),Fe.sortBasedOnPerm(t,e)),cC=(t,e,r)=>{let n=[];n.push(`void ${t}(out int a[${r}], int src[${r}]) {`);for(let o=0;o<r;++o)n.push(`	a[${e[o]}]=src[${o}];`);return n.push("	}"),n.join(`
`)},fC=t=>{if(!t||t.length!==1)throw new Error("Transpose requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("input should be float tensor")}}),gP,mP,dC,fz=ee(()=>{"use strict";dy(),gP=(t,e,r)=>{dC(e);let n=r.blocksize,o=n*n,a=r.mode==="DCR"?[0,3,4,1,5,2]:[0,1,4,2,5,3],u=r.mode==="DCR"?[e[0].dims[0],n,n,e[0].dims[1]/o,e[0].dims[2],e[0].dims[3]]:[e[0].dims[0],e[0].dims[1]/o,n,n,e[0].dims[2],e[0].dims[3]],s=t.reshapeUnpacked(e[0],u),l={perm:a,cacheKey:`${a}`},[i]=Dc(t,[s],l),c=[e[0].dims[0],e[0].dims[1]/o,e[0].dims[2]*n,e[0].dims[3]*n];return[t.reshapeUnpacked(i,c)]},mP=t=>{let e=t.attributes.getInt("blocksize");if(e<1)throw new Error(`blocksize must be >= 1, but got : ${e} for DepthToSpace`);let r=t.attributes.getString("mode","DCR");if(r!=="DCR"&&r!=="CRD")throw new Error(`unrecognized mode: ${r} for DepthToSpace`);return{mode:r,blocksize:e}},dC=t=>{if(t.length!==1)throw new Error(`DepthToSpace expect 1 inputs, but got ${t.length}`);if(t[0].type==="string"||t[0].dims.length!==4)throw new TypeError("DepthToSpace input should be a 4-D numeric tensor")}}),yP,vP,hC,dz=ee(()=>{"use strict";ht(),yP=(t,e,r)=>{hC(e,r);let n=Fe.flattenShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},vP=t=>t.attributes.getInt("axis",1),hC=(t,e)=>{if(!t||t.length!==1)throw new Error("Flatten requires 1 input.");let r=t[0].dims.length;if(r===0)throw new Error("scalar tensor is not supported.");if(e<-r||e>r)throw new Error("Invalid axis");if(t[0].type==="string")throw new Error("string tensor is not supported.")}}),Mc,Gd=ee(()=>{"use strict";Mc=["float32","float64","int32","int16","int8","uint16","uint32","uint8"]}),bP,wP,pC,gC,mC,yC,hz=ee(()=>{"use strict";zr(),Gd(),ht(),tt(),bP=(t,e,r)=>(yC(e,r.axis),[t.run(mC(t,e,r),e)]),wP=t=>zt({axis:t.attributes.getInt("axis",0)}),pC={name:"Gather",inputNames:["A","B"],inputTypes:[0,0]},gC=(t,e,r,n)=>{let o=r[0].dims.slice(),a=r[1].dims.slice(),u=new Array(o.length+a.length-1);n=Fe.normalizeAxis(n,o.length);let s=[];for(let d=0;d<u.length;d++)d<n?(u[d]=o[d],s.push(`inputIdx[${d}] = outputIdx[${d}];`)):d<n+a.length?(u[d]=a[d-n],s.push(`indexDataIdx[${d-n}] = outputIdx[${d}];`)):(u[d]=o[d-a.length+1],s.push(`inputIdx[${d-a.length+1}] = outputIdx[${d}];`));let l=u.length||1,i=o.length,c=a.length||1,f=`
      float process(int outputIdx[${l}]) {
        int inputIdx[${i}];
        int indexDataIdx[${c}];
        indexDataIdx[0] = 0;
        ${s.join(`
        `)}
        int idx = int(_B(indexDataIdx));
        inputIdx[${n}] = idx < 0 ? idx + ${o[n]} : idx;
        return _A(inputIdx);
      }`;return j(N({},e),{output:{dims:u,type:r[0].type,textureType:0},shaderSource:f})},mC=(t,e,r)=>{let n=j(N({},pC),{cacheHint:r.cacheKey});return j(N({},n),{get:()=>gC(t,n,e,r.axis)})},yC=(t,e)=>{if(!t||t.length!==2)throw new Error("Gather requires 2 inputs.");let r=t[0].dims.length;if(r<1)throw new Error("Invalid input shape.");if(e<-r||e>r-1)throw new Error("Invalid axis.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invaid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invaid input type.")}}),U1,i1,xP,_P,vC,bC,wC,pz=ee(()=>{"use strict";zr(),ht(),tt(),U1=(t,e,r)=>(wC(e,r),[t.run(vC(e,r),e)]),i1=(t,e)=>{let r=t.attributes.getInt("transA",0)!==0,n=t.attributes.getInt("transB",0)!==0,o=t.attributes.getFloat("alpha",1),a=t.attributes.getFloat("beta",1);return zt({transA:r,transB:n,alpha:o,beta:a,isOptionalC:e})},xP=t=>i1(t,!1),_P=t=>i1(t,!0),vC=(t,e)=>{let r={name:"Gemm",inputNames:t.length===3?["A","B","C"]:["A","B"],inputTypes:t.length===3?[0,0,0]:[0,0],key:e.cacheKey};return j(N({},r),{get:()=>bC(r,t,e)})},bC=(t,e,r)=>{let n=e[0].dims.slice(),o=e[1].dims.slice(),[a,u]=XO.getShapeOfGemmResult(n,r.transA,o,r.transB,e.length===3?e[2].dims:void 0),s=[a,u];if(!s)throw new Error("Can't use gemm on the given tensors");let l=n[n.length-1],i="";r.transA&&(l=n[0]),r.transA&&r.transB?i="value += _A_T(a) * _B_T(b);":r.transA&&!r.transB?i="value += _A_T(a) * _B(b);":!r.transA&&r.transB?i="value += _A(a) * _B_T(b);":!r.transA&&!r.transB&&(i="value += _A(a) * _B(b);");let c=s.length,f=e.length===3?`int c[${e[2].dims.length}];`:"",d=e.length===3?"bcastIndices_C(indices, c);":"",h=e.length===3?"value += beta * _C(c);":"",p=`
      float process(int indices[${c}]) {
          int a[${c}];
          int b[${c}];
          ${f}

          copyVec(indices, a);
          copyVec(indices, b);
          ${d}

          float value = 0.0;
          for (int k=0; k<${l}; ++k) {
              a[${c-1}] = k;
              b[${c-2}] = k;
              ${i}
          }

          value = value * alpha;
          ${h}
          return value;
      }`;return j(N({},t),{output:{dims:s,type:e[0].type,textureType:0},variables:[{name:"alpha",type:"float",data:r.alpha},{name:"beta",type:"float",data:r.beta}],shaderSource:p})},wC=(t,e)=>{if(!t)throw new Error("Input is missing");if(e.isOptionalC&&(t.length<2||t.length>3))throw new Error("Invaid input shape.");if(!e.isOptionalC&&t.length!==3)throw new Error("Gemm requires 3 inputs");if(t.length===3&&t[2].dims.length!==1&&t[2].dims.length!==2)throw new Error("Invalid input shape of C");if(t[0].type!=="float32"&&t[0].type!=="float64"||t[1].type!=="float32"&&t[1].type!=="float64"||t.length===3&&t[2].type!=="float32"&&t[2].type!=="float64")throw new Error("Invalid input type.");if(t[0].type!==t[1].type||t.length===3&&t[0].type!==t[2].type)throw new Error("Input types are mismatched")}}),EP,TP,xC,_C,EC,TC,IC,gz=ee(()=>{"use strict";zr(),tt(),EP=(t,e,r)=>(IC(e),[t.run(EC(t,e,r),e)]),TP=t=>{let e=t.attributes.getFloat("scale"),r=t.attributes.getFloats("bias");return zt({scale:e,bias:r})},xC={name:"ImageScaler",inputNames:["X"],inputTypes:[0]},_C=(t,e,r,n)=>{let o=r[0].dims.slice(),a=o.length,u=`
      ${TC(n.bias.length)}
      float process(int indices[${a}]) {
        return _X(indices) * scale + getBias(bias, indices[1]);
      }`;return j(N({},e),{output:{dims:o,type:r[0].type,textureType:0},variables:[{name:"bias",type:"float",arrayLength:n.bias.length,data:n.bias},{name:"scale",type:"float",data:n.scale}],shaderSource:u})},EC=(t,e,r)=>{let n=j(N({},xC),{cacheHint:r.cacheKey});return j(N({},n),{get:()=>_C(t,n,e,r)})},TC=t=>{let e=[`float getBias(float bias[${t}], int channel) {`];for(let r=0;r<t;++r)r===0?e.push(`	if (channel == ${r}) { return bias[${r}]; }`):r===t-1?e.push(`	else { return bias[${r}]; }`):e.push(`	else if (channel == ${r}) { return bias[${r}]; }`);return e.push("	}"),e.join(`
`)},IC=t=>{if(!t||t.length!==1)throw new Error("ImageScaler requires 1 input.");if(t[0].dims.length!==4)throw new Error("Invalid input shape.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")}}),IP,AP,o1,AC,SC,DC,CC,OC,PC,mz=ee(()=>{"use strict";rr(),tt(),IP=(t,e,r)=>{PC(e);let n=t.run(SC(e[0]),e);return[t.run(OC(t,e[0],r,n.dims),[e[0],n,e[1],e[2]])]},AP=t=>t.attributes.getFloat("epsilon",1e-5),o1={name:"InstanceNormalization_MeanAndVariance",inputNames:["X"],inputTypes:[0]},AC=(t,e)=>{let r=e.dims.slice(),n=r[1],o=r[2]*r[3],a=[r[0],n],u=`
      vec4 process(int[2] indices) {
        vec4 v = vec4(0.0);
        int a[4];
        a[0] = indices[0];
        a[1] = indices[1];
        float temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += x;
          }
        }
        float mean = temp / float(${o});
        temp = 0.0;
        for(int a2=0; a2<${r[2]}; a2++) {
          a[2] = a2;
          for(int a3=0; a3<${r[3]}; a3++) {
            a[3] = a3;
            float x = _X(a);
            temp += (x - mean) * (x - mean);
          }
        }
        v.r = mean;
        v.g = temp / float(${o});

        return v;
      }`;return j(N({},t),{output:{dims:a,type:e.type,textureType:4},shaderSource:u})},SC=t=>j(N({},o1),{get:()=>AC(o1,t)}),DC={name:"InstanceNormalization_ComputeOutput",inputNames:["X","MeanAndVariance","Scale","B"],inputTypes:[0,4,0,0]},CC=(t,e,r,n,o)=>{let a=Je(t.session.backend.glContext.version),[u,s]=t.calculateTextureWidthAndHeight(o,4),[l,i]=[u/4,s],c=`
      vec4 get_MeanAndVariance(int[2] mv) {
        int offset = indicesToOffset_MeanAndVariance(mv);
        vec2 coords = offsetToCoords(offset, ${l}, ${i});
        return ${a.texture2D}(MeanAndVariance, coords);
      }

      float process(int[4] indices) {
        int mv[2];
        mv[0] = indices[0];
        mv[1] = indices[1];
        vec4 mean_and_variance = get_MeanAndVariance(mv);
        float mean = mean_and_variance.r;
        float variance = mean_and_variance.g;

        int sb[1];
        sb[0] = indices[1];
        float scale = _Scale(sb);
        float b = _B(sb);

        return scale * (_X(indices) - mean) / sqrt(variance + epsilon) + b;
      }`;return j(N({},e),{output:{dims:r.dims,type:r.type,textureType:0},variables:[{name:"epsilon",type:"float",data:n}],shaderSource:c})},OC=(t,e,r,n)=>{let o=j(N({},DC),{cacheHint:`${r}`});return j(N({},o),{get:()=>CC(t,o,e,r,n)})},PC=t=>{if(!t||t.length!==3)throw new Error("InstanceNormalization requires 3 inputs.");let e=t[0],r=t[1],n=t[2];if(e.dims.length<3||r.dims.length!==1||n.dims.length!==1)throw new Error("Invalid input shape.");if(r.dims[0]!==e.dims[1]||n.dims[0]!==e.dims[1])throw new Error("Input shapes are mismatched.");if(e.type!=="float32"&&e.type!=="float64"||r.type!=="float32"&&r.type!=="float64"||n.type!=="float32"&&n.type!=="float64")throw new Error("Invalid input type.");if(t[0].dims.length!==4)throw new Error("Only support 4-D input shape.")}});function yz(t,e){let r=t[0].dims[1],n=t[0].dims.length,o=-Math.floor((e.size-1)/2),a=Math.ceil((e.size-1)/2),u=`float(${e.alpha}) / float(${e.size})`,s=`float(${e.bias})`,l=`float(${e.beta})`,i=`
    float process(int indices[${n}]) {
        int c = indices[1];
        float x = _X(indices);
        float square_sum = 0.0;

        for (int i = ${o}; i <= ${a}; i++) {
          int idx = c + i;
          if (c >= 0 && c < ${r}) {
            indices[1] = idx;
            float j = _X(indices);
            square_sum += j * j;
          }
        }
        return x / pow(${s} + ${u} * square_sum, ${l});
    }`;return j(N({},hy),{cacheHint:e.cacheKey,output:{dims:t[0].dims,type:t[0].type,textureType:0},shaderSource:i})}function vz(t,e){return j(N({},hy),{cacheHint:e.cacheKey,get:()=>yz(t,e)})}var SP,DP,hy,MC,bz=ee(()=>{"use strict";zr(),tt(),SP=(t,e,r)=>(MC(e),[t.run(vz(e,r),e)]),DP=t=>{let e=t.attributes.getFloat("alpha",1e-4),r=t.attributes.getFloat("beta",.75),n=t.attributes.getFloat("bias",1),o=t.attributes.getInt("size");return zt({alpha:e,beta:r,bias:n,size:o})},hy={name:"LRN",inputNames:["X"],inputTypes:[0]},MC=t=>{if(!t||t.length!==1)throw new Error("LRN requires 1 input.");if(t[0].dims.length!==4)throw new Error('currently only support LRN for input with "NCHW" format');if(t[0].type!=="float32")throw new Error("input should be float type")}}),NC,H1,CP,OP,PP,RC,FC,kC,LC,BC,$C,VC,jC,wz=ee(()=>{"use strict";zr(),ht(),rr(),tt(),NC={name:"Pad",inputNames:["A"],inputTypes:[0]},H1=(t,e,r)=>(kC(e),[t.run(j(N({},NC),{cacheHint:r.cacheKey,get:()=>FC(t,e[0],r)}),e)]),CP=t=>{let e=t.attributes.getString("mode","constant"),r=t.attributes.getFloat("value",0),n=t.attributes.getInts("pads");return zt({mode:e,value:r,pads:n})},OP=(t,e,r)=>{LC(e);let n=RC(t,e,r);return H1(t,[e[0]],n)},PP=t=>t.attributes.getString("mode","constant"),RC=(t,e,r)=>{if(!t.session.isInitializer(e[1].dataId)||e.length>=3&&!t.session.isInitializer(e[2].dataId))throw new Error("dynamic pad attributes are not allowed");let n=Array.from(e[1].integerData),o=e.length>=3?e[2].floatData[0]:0;return zt({mode:r,pads:n,value:o})},FC=(t,e,r)=>{let n=Fe.padShape(e.dims.slice(),r.pads),o=n.length,a=`
      ${BC(t,e,r)}
      float process(int[${o}] indices) {
          return padA(indices);
      }`;return{name:"Pad",inputNames:["A"],inputTypes:[0],output:{dims:n,type:e.type,textureType:0},shaderSource:a}},kC=t=>{if(!t||t.length!==1)throw new Error("Pad requires 1 input");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},LC=t=>{if(!t||t.length!==2&&t.length!==3)throw new Error("Pad requires 2 or 3 inputs");if(t[1].type!=="int32")throw new Error("Invalid input type.");if(t.length>=3&&t[2].type==="string")throw new Error("Invalid input type.")},BC=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e.dims,0),u=Fe.computeStrides(e.dims);switch(r.mode){case"constant":return $C(n,e.dims,u,o,a,r.pads,r.value);case"reflect":return VC(n,e.dims,u,o,a,r.pads);case"edge":return jC(n,e.dims,u,o,a,r.pads);default:throw new Error("Invalid mode")}},$C=(t,e,r,n,o,a,u)=>{let s=e.length,l="";for(let i=s-1;i>=0;--i)l+=`
        k = m[${i}] - ${a[i]};
        if (k < 0)  return constant;
        if (k >= ${e[i]}) return constant;
        offset += k * ${r[i]};
        `;return`
      float padA(int m[${s}]) {
        const float constant = float(${u});
        int offset = 0;
        int k = 0;
        ${l}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},VC=(t,e,r,n,o,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0) { k = -k; }
        {
          const int _2n_1 = ${2*(e[l]-1)};
          k = int( mod( float(k), float(_2n_1) ) ) ;
          if(k >= ${e[l]}) { k = _2n_1 - k; }
        }
        offset += k * ${r[l]};
        `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `},jC=(t,e,r,n,o,a)=>{let u=e.length,s="";for(let l=u-1;l>=0;--l)s+=`
        k = m[${l}] - ${a[l]};
        if (k < 0)  k = 0;
        if (k >= ${e[l]}) k = ${e[l]-1};
        offset += k * ${r[l]};
      `;return`
      float padA(int m[${u}]) {
        int offset = 0;
        int k = 0;
        ${s}
        vec2 coords = offsetToCoords(offset, ${n}, ${o});
        float value = getColorAsFloat(${t.texture2D}(A, coords));
        return value;
      }
      `}}),MP,NP,a1,RP,FP,kP,LP,s1,u1,UC,l1,BP,dc,c1,hc,HC,xz=ee(()=>{"use strict";zr(),ht(),tt(),MP=(t,e,r)=>{dc(e);let n={name:"AveragePool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(j(N({},n),{get:()=>a1(e,n,!1,r)}),e)]},NP=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInt("count_include_pad",0)!==0,o=t.attributes.getInts("kernel_shape"),a=t.attributes.getInts("strides",[]),u=t.attributes.getInts("pads",[]);if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for AveragePool");return zt({autoPad:e,ceilMode:r,countIncludePad:n,kernelShape:o,strides:a,pads:u})},a1=(t,e,r,n)=>{let[o,a]=u1(t,n,r),u=Fe.size(o.kernelShape),s="value += _X(x);",l="";o.countIncludePad?l+=`value /= float(${u});`:l+=`value /= float(${u} - pad);`;let i=`
        ${c1(t[0].dims,o,s,l,"0.0")}
      `;return j(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:i})},RP=(t,e,r)=>{dc(e);let n={name:"GlobalAveragePool",inputNames:["X"],inputTypes:[0],cacheHint:`${r.countIncludePad}`};return[t.run(j(N({},n),{get:()=>a1(e,n,!0,r)}),e)]},FP=t=>{let e=t.attributes.getInt("count_include_pad",0)!==0;return zt({autoPad:"",ceilMode:0,countIncludePad:e,kernelShape:[],strides:[],pads:[]})},kP=(t,e,r)=>{dc(e);let n={name:"MaxPool",inputNames:["X"],inputTypes:[0],cacheHint:r.cacheKey};return[t.run(j(N({},n),{get:()=>s1(e,n,!1,r)}),e)]},LP=t=>{let e=t.attributes.getString("auto_pad","NOTSET"),r=t.attributes.getInt("ceil_mode",0),n=t.attributes.getInts("kernel_shape"),o=t.attributes.getInts("strides",[]),a=t.attributes.getInts("pads",[]),u=t.attributes.getInt("storage_order",0),s=t.attributes.getInts("dilations",[]);if(u!==0)throw new Error("column major storage order is not yet supported for MaxPool");if(r!==0)throw new Error("using ceil() in shape computation is not yet supported for MaxPool");return zt({autoPad:e,ceilMode:r,countIncludePad:!1,kernelShape:n,strides:o,pads:a,storageOrder:u,dilations:s})},s1=(t,e,r,n)=>{let[o,a]=u1(t,n,r),u=`
      value = max(_X(x), value);
    `,s="",l=`
      ${c1(t[0].dims,o,u,s,"-1e5")}
    `;return j(N({},e),{output:{dims:a,type:t[0].type,textureType:0},shaderSource:l})},u1=(t,e,r)=>{let n=t[0].dims.slice(),o=Object.hasOwnProperty.call(e,"dilations"),a=e.kernelShape.slice(),u=e.strides.slice(),s=o?e.dilations.slice():[],l=e.pads.slice();$d.adjustPoolAttributes(r,n,a,u,s,l);let i=$d.computePoolOutputShape(r,n,u,s,a,l,e.autoPad),c=Object.assign({},e);return o?Object.assign(c,{kernelShape:a,strides:u,pads:l,dilations:s,cacheKey:e.cacheKey}):Object.assign(c,{kernelShape:a,strides:u,pads:l,cacheKey:e.cacheKey}),[c,i]},UC={autoPad:"",ceilMode:0,countIncludePad:!1,kernelShape:[],strides:[],pads:[],storageOrder:0,dilations:[],cacheKey:""},l1={name:"GlobalMaxPool",inputNames:["X"],inputTypes:[0]},BP=(t,e)=>(dc(e),[t.run(j(N({},l1),{get:()=>s1(e,l1,!0,UC)}),e)]),dc=t=>{if(!t||t.length!==1)throw new Error("Pool ops requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.")},c1=(t,e,r,n,o)=>{let a=t.length;if(e.kernelShape.length<=2){let u=e.kernelShape[e.kernelShape.length-1],s=e.strides[e.strides.length-1],l=e.pads[e.pads.length/2-1],i=e.pads[e.pads.length-1],c=t[a-1],f="",d="",h="";if(l+i!==0?f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            if (x[${a} - 1] < 0 || x[${a} - 1] >= ${c}) {
              pad++;
              continue;
            }
            ${r}
          }`:f=`
          for (int i = 0; i < ${u}; i++) {
            x[${a} - 1] = indices[${a} - 1] * ${s} - ${l} + i;
            ${r}
          }`,e.kernelShape.length===2){let p=e.kernelShape[e.kernelShape.length-2],m=e.strides[e.strides.length-2],v=e.pads[e.pads.length/2-2],x=e.pads[e.pads.length-2],y=t[a-2];v+x!==0?d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
              if (x[${a} - 2] < 0 || x[${a} - 2] >= ${y}) {
                pad+= ${u};
                continue;
              }
          `:d=`
            for (int j = 0; j < ${p}; j++) {
              x[${a} - 2] = indices[${a} - 2] * ${m} - ${v} + j;
            `,h=`
          }
        `}return`
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);

          float value = ${o};
          int pad = 0;
          ${d}
          ${f}
          ${h}
          ${n}
          return value;
        }
      `}else{let u=Fe.size(e.kernelShape),s=Fe.computeStrides(e.kernelShape),l=s.length,i=e.pads.length,c=HC(l),f=hc(t,"inputDims"),d=hc(e.pads,"pads"),h=hc(s,"kernelStrides"),p=hc(e.strides,"strides"),m=e.pads.reduce((x,y)=>x+y),v="";return m?v=`
            if (x[j] >= inputDims[j] || x[j] < 0) {
              pad++;
              isPad = true;
              break;
            }
          }
          if (!isPad) {
            ${r}
          }`:v=`
          }
          ${r}
        `,`
        ${c}
        float process(int indices[${a}]) {
          int x[${a}];
          copyVec(indices, x);
          int offset[${l}];
          int pads[${i}];
          int inputDims[${a}];
          int kernelStrides[${l}];
          int strides[${l}];
          ${d}
          ${f}
          ${p}
          ${h}

          float value = ${o};
          int pad = 0;
          bool isPad = false;
          for (int i = 0; i < ${u}; i++) {
            offsetToIndices(i, kernelStrides, offset);
            isPad = false;
            for (int j = ${a} - ${l}; j < ${a}; j++) {
              x[j] = indices[j] * strides[j - ${a} + ${l}]
                + offset[j - ${a} + ${l}] - pads[j - 2];
              ${v}
          }
          ${n}

          return value;
        }
      `}},hc=(t,e)=>{let r="";for(let n=0;n<t.length;n++)r+=`
      ${e}[${n}] = ${t[n]};
    `;return r},HC=t=>`
  void offsetToIndices(int offset, int[${t}] strides, out int[${t}] indices) {
    if (${t} == 0) {
      return;
    }
    for (int i = 0; i < ${t} - 1; ++i) {
      indices[i] = offset / strides[i];
      offset -= indices[i] * strides[i];
    }
    indices[${t} - 1] = offset;
  }`}),Ho,Go,zC,GC,$P,VP,jP,UP,HP,zP,GP,_z=ee(()=>{"use strict";zr(),Gd(),ht(),tt(),Ho=(t,e,r,n,o)=>{GC(e);let a={name:n,inputNames:["A"],inputTypes:[0]};return[t.run(j(N({},a),{cacheHint:r.cacheKey,get:()=>zC(t,e,r,n,o,a)}),e)]},Go=t=>{let e=t.attributes.getInts("axes",[]),r=t.attributes.getInt("keepdims",1)===1;return zt({axes:e,keepDims:r})},zC=(t,e,r,n,o,a)=>{let u=[],s=e[0].dims.length||1,l=[],i=Fe.normalizeAxes(r.axes,e[0].dims.length),c=o(e,i),f=c[1];for(let h=0;h<e[0].dims.length;h++)i.indexOf(h)>=0||i.length===0?(r.keepDims&&u.push(1),f=`
          for(int j${h} = 0; j${h} < ${e[0].dims[h]}; j${h}++) {
            inputIdx[${h}] = j${h};
            ${f}
          }`):(l.push(`inputIdx[${h}] = outputIdx[${u.length}];`),u.push(e[0].dims[h]));let d=`
      float process(int outputIdx[${u.length||1}]) {
        float value;                 // final result
        int inputIdx[${s}];      // addressing input data
        ${l.join(`
`)}
        ${c[0]}       // init ops for reduce max/min
        ${f}
        ${c[2]}       // final computation for reduce mean
        return value;
      }`;return j(N({},a),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:d})},GC=t=>{if(!t||t.length!==1)throw new Error("Reduce op requires 1 input.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},$P=(t,e,r)=>Ho(t,e,r,"ReduceSum",()=>["value = 0.0;","value += _A(inputIdx);",""]),VP=(t,e,r)=>Ho(t,e,r,"ReduceMean",(n,o)=>{let a=1;for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&(a*=n[0].dims[u]);return["value = 0.0;","value += _A(inputIdx);",`value /= ${a}.;`]}),jP=(t,e,r)=>Ho(t,e,r,"ReduceMax",(n,o)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = max(value, _A(inputIdx));",""]}),UP=(t,e,r)=>Ho(t,e,r,"ReduceMin",(n,o)=>{let a=[];for(let u=0;u<n[0].dims.length;u++)(o.indexOf(u)>=0||o.length===0)&&a.push(`inputIdx[${u}] = 0;`);return[`${a.join(`
`)}
value = _A(inputIdx);`,"value = min(value, _A(inputIdx));",""]}),HP=(t,e,r)=>Ho(t,e,r,"ReduceProd",()=>["value = 1.0;","value *= _A(inputIdx);",""]),zP=(t,e,r)=>Ho(t,e,r,"ReduceLogSum",()=>["value = 0.0;","value += _A(inputIdx);","value = log(value);"]),GP=(t,e,r)=>Ho(t,e,r,"ReduceLogSumSquare",()=>["float t; value = 0.0;","t = _A(inputIdx); value += t * t;",""])}),WP,Ez=ee(()=>{"use strict";ht(),WP=(t,e)=>{let r=Fe.calculateReshapedDims(e[0].dims,e[1].integerData);return t.session.pack?[t.reshapePacked(e[0],r)]:[t.reshapeUnpacked(e[0],r)]}}),f1,z1,qP,XP,Ic,WC,G1,jd,YP=ee(()=>{"use strict";zr(),rr(),tt(),f1={name:"Upsample",inputNames:["X"],inputTypes:[0]},z1=(t,e,r)=>(G1(e,r),[t.run(j(N({},f1),{cacheHint:r.cacheKey,get:()=>WC(t,e,r)}),e)]),qP=t=>Ic(t,7),XP=t=>Ic(t,9),Ic=(t,e)=>{let r=e>=10,n=t.attributes.getString("mode","nearest");if(n!=="nearest"&&n!=="linear"&&(e<11||n!=="cubic"))throw new Error(`unrecognized mode: ${n}`);let o=[];e<9&&(o=t.attributes.getFloats("scales"),jd(o,n,r));let a=t.attributes.getFloat("extrapolation_value",0),u=e>10?t.attributes.getString("coordinate_transformation_mode","half_pixel"):"asymmetric";if(["asymmetric","pytorch_half_pixel","tf_half_pixel_for_nn","align_corners","tf_crop_and_resize","half_pixel"].indexOf(u)===-1)throw new Error(`coordinate_transform_mode '${u}' is not supported`);let s=u==="tf_crop_and_resize",l=s,i=n==="nearest"&&e>=11?t.attributes.getString("nearest_mode","round_prefer_floor"):"";if(["round_prefer_floor","round_prefer_ceil","floor","ceil",""].indexOf(i)===-1)throw new Error(`nearest_mode '${i}' is not supported`);let c=t.attributes.getFloat("cubic_coeff_a",-.75),f=t.attributes.getInt("exclude_outside",0)!==0;if(f&&n!=="cubic")throw new Error("exclude_outside can be set to 1 only when mode is CUBIC.");let d=e<11?!0:n==="nearest"&&u==="asymmetric"&&i==="floor",h=0,p=0,m=0;return e>10?t.inputs.length>2?(h=1,p=2,m=3):(p=1,m=2):e===9&&(p=1),zt({opset:e,isResize:r,mode:n,scales:o,extrapolationValue:a,coordinateTransformMode:u,useExtrapolation:l,needRoiInput:s,nearestMode:i,cubicCoefficientA:c,excludeOutside:f,useNearest2xOptimization:d,roiInputIdx:h,scalesInputIdx:p,sizesInputIdx:m})},WC=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[o,a]=t.calculateTextureWidthAndHeight(e[0].dims,0),u=e[0].dims.map((m,v)=>Math.floor(m*r.scales[v])),[s,l]=t.calculateTextureWidthAndHeight(u,0),i=u.length,c=new Array(i),f=new Array(i),d=`
      int output_pitches[${i}];
      int input_pitches[${i}];
      `;for(let m=i-1;m>=0;m--)c[m]=m===i-1?1:c[m+1]*u[m+1],f[m]=m===i-1?1:f[m+1]*e[0].dims[m+1],d+=`
        output_pitches[${m}] = ${c[m]};
        input_pitches[${m}] = ${f[m]};
        `;let h=`
      float getInputFloat(int index) {
        vec2 coords = offsetToCoords(index, ${o}, ${a});
        float value = getColorAsFloat(${n.texture2D}(X, coords));
        return value;
      }
      `,p=r.mode==="nearest"?`
    ${h}
    float process(int indices[${i}]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int d, m;
      for (int dim = 0; dim < ${i}; ++dim) {
        d = output_index / output_pitches[dim];
        m = output_index - d * output_pitches[dim];
        output_index = m;

        if (scales[dim] != 1 && d > 0) {
          int d2 = d / scales[dim];
          m = d - d2 * scales[dim];
          d = d2;
        }
        input_index += input_pitches[dim] * d;
      }

      return getInputFloat(input_index);
    }`:i===4?`
    ${h}
    float process(int indices[4]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1, index_of_dim2, index_of_dim3;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m / output_pitches[1];
      m = m - index_of_dim1 * output_pitches[1];
      index_of_dim2 = m / output_pitches[2];
      m = m - index_of_dim2 * output_pitches[2];
      index_of_dim3 = m;

      int index_of_input_dim2, index_of_input_dim3, x_offset, y_offset;
      index_of_input_dim2 = index_of_dim2 / scales[2];
      y_offset = index_of_dim2 - index_of_input_dim2 * scales[2];
      index_of_input_dim3 = index_of_dim3 / scales[3];
      x_offset = index_of_dim3 - index_of_input_dim3 * scales[3];

      input_index = index_of_dim0 * input_pitches[0] +
            index_of_dim1 * input_pitches[1] +
            index_of_input_dim2 * input_pitches[2] +
            index_of_input_dim3;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim2 = false;
      if (index_of_input_dim2 == (${e[0].dims[2]} - 1)) {
        // It's the end in dimension 2
        x01 = x00;
        end_of_dim2 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[2]);
      }

      if (index_of_input_dim3 == (input_pitches[2] - 1)) {
        // It's the end in dimension 3
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim2 ? x10 : getInputFloat(input_index + input_pitches[2] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[2]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[2]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[3]);
    }`:`
    ${h}
    float process(int indices[2]) {
      int input_index = 0;
      int output_index = coordsToOffset(TexCoords, ${s}, ${l});

      ${d}

      int m;
      int index_of_dim0, index_of_dim1;
      index_of_dim0 = output_index / output_pitches[0];
      m = output_index - index_of_dim0 * output_pitches[0];
      index_of_dim1 = m;

      int index_of_input_dim0, index_of_input_dim1, x_offset, y_offset;
      index_of_input_dim0 = index_of_dim0 / scales[0];
      y_offset = index_of_dim0 - index_of_input_dim0 * scales[0];
      index_of_input_dim1 = index_of_dim1 / scales[1];
      x_offset = index_of_dim1 - index_of_input_dim1 * scales[1];

      input_index = index_of_input_dim0 * input_pitches[0] + index_of_input_dim1;

      float x00 = getInputFloat(input_index);
      float x10, x01, x11;

      bool end_of_dim0 = false;
      if (index_of_input_dim0 == (${e[0].dims[0]} - 1)) {
        // It's the end in dimension 0
        x01 = x00;
        end_of_dim0 = true;
      } else {
        x01 = getInputFloat(input_index + input_pitches[0]);
      }

      if (index_of_input_dim1 == (input_pitches[0] - 1)) {
        // It's the end in dimension 1
        x10 = x00;
        x11 = x01;
      }
      else {
        x10 = getInputFloat(input_index + 1);
        x11 = end_of_dim0 ? x10 : getInputFloat(input_index + input_pitches[0] + 1);
      }

      float y0 = x00 + float(y_offset) * (x01 - x00) / float(scales[0]);
      float y1 = x10 + float(y_offset) * (x11 - x10) / float(scales[0]);
      return y0 + float(x_offset) * (y1 - y0) / float(scales[1]);
    }`;return j(N({},f1),{output:{dims:u,type:e[0].type,textureType:0},shaderSource:p,variables:[{name:"scales",type:"int",arrayLength:r.scales.length,data:r.scales.map(m=>Math.ceil(m))}]})},G1=(t,e)=>{if(!t||e.opset<9&&t.length!==1||e.opset>=9&&e.opset<11&&t.length!==2||e.opset>=11&&t.length<2)throw new Error("invalid inputs.");if(e.scales.length>0&&t[0].dims.length!==e.scales.length)throw new Error("Invalid input shape.");if(t[0].type==="string")throw new Error("Invalid input tensor types.")},jd=(t,e,r)=>{if(r){for(let n of t)if(n<=0)throw new Error("Scale value should be greater than 0.")}else for(let n of t)if(n<1)throw new Error("Scale value should be greater than or equal to 1.");if((e==="linear"||e==="cubic")&&t.length!==2&&(t.length!==4||t[0]!==1||t[1]!==1))throw new Error(`'Linear' mode and 'Cubic' mode only support 2-D inputs ('Bilinear', 'Bicubic')         or 4-D inputs with the corresponding outermost 2 scale values being 1         in the ${r?"Resize":"Upsample"} opeartor.`)}}),Pd,W1,ZP,KP,qC,XC,YC,ZC,Tz=ee(()=>{"use strict";rr(),tt(),go(),eu(),YP(),Pd={name:"Resize",inputNames:["A"],inputTypes:[2]},W1=(t,e,r)=>(G1(e,r),[t.run(j(N({},Pd),{cacheHint:r.cacheKey,get:()=>qC(t,e,r)}),e)]),ZP=t=>Ic(t,10),KP=t=>Ic(t,11),qC=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),[o,a]=XC(e,r);if(o.every(y=>y===1)&&r.coordinateTransformMode!=="tf_crop_and_resize")return j(N({},Pd),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:`void main() {
                    vec4 v = ${n.texture2D}(X, TexCoords);
                    ${n.output} = v;
                }`});let u=a.length;if(u<2)throw new Error(`output dimension should be at least 2, but got ${u}`);let s=a[u-2],l=a[u-1],i=e[0].dims;if(u!==i.length)throw new Error(`output dimension should match input ${i.length}, but got ${u}`);let c=i[u-2],f=i[u-1],d=o[u-2],h=o[u-1],p="";if(r.mode!=="linear")throw new Error(`resize (packed) does not support mode: '${r.mode}'`);switch(r.coordinateTransformMode){case"asymmetric":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return vec4(coords) / scaleWHWH;
                    }
                `;break;case"half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        return (vec4(coords) + 0.5) / scaleWHWH - 0.5;
                    }
                `;break;case"pytorch_half_pixel":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 fcoords = vec4(coords);
                        return vec4(
                            ${l}.0 > 1.0 ? (fcoords.x + 0.5) / scaleWHWH.x - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.y + 0.5) / scaleWHWH.y - 0.5 : 0.0,
                            ${l}.0 > 1.0 ? (fcoords.z + 0.5) / scaleWHWH.z - 0.5 : 0.0,
                            ${s}.0 > 1.0 ? (fcoords.w + 0.5) / scaleWHWH.w - 0.5 : 0.0
                          );
                    }
                `;break;case"align_corners":p=`
                    vec4 getSourceFracIndex(ivec4 coords) {
                        vec4 resized = vec4(${l}.0 - 1.0, ${s}.0 - 1.0, ${l}.0 - 1.0,
                            ${s}.0 - 1.0);
                        vec4 original = vec4(${f}.0 - 1.0, ${c}.0 - 1.0, ${f}.0 - 1.0,
                            ${c}.0 - 1.0);
                        vec4 new_scale = original / resized;
                        return vec4(coords) * new_scale;
                    }
                `;break;default:throw new Error(`resize (packed) does not support coordinateTransformMode:                                 '${r.coordinateTransformMode}'`)}let m=qo(u),v=Oc(),x=`
            const vec2 inputWH = vec2(${c}.0, ${f}.0);
            const vec4 scaleWHWH = vec4(float(${d}), float(${h}), float(${d}), float(${h}));
            ${v}
            ${p}
            float getAValue(int x10, int r, int c, int d) {
                return getChannel(getA(x10, r, c, d), vec2(c, d));
            }
            void main() {
                ${m} rc = getOutputCoords();

                int batch = rc[0];
                int depth = rc[1];

                // retrieve the 4 coordinates that is used in the 4 packed output values.
                ivec4 coords = ivec4(rc.wz, rc.w + 1, rc.z + 1);

                // calculate the source index in fraction
                vec4 sourceFrac = getSourceFracIndex(coords);

                // get the lower and upper bound of the 4 values that will be packed into one texel.
                ivec4 x00 = ivec4(max(sourceFrac.xy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xy)));
                ivec4 x01 = ivec4(max(sourceFrac.xw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.xw)));
                ivec4 x10 = ivec4(max(sourceFrac.zy, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zy)));
                ivec4 x11 = ivec4(max(sourceFrac.zw, vec2(0.0)), min(inputWH - 1.0, ceil(sourceFrac.zw)));

                bool hasNextRow = rc.w < ${s-1};
                bool hasNextCol = rc.z < ${l-1};

                // pack x00, x01, x10, x11's top-left corner into one vec4 structure
                vec4 topLeft = vec4(
                    getAValue(batch, depth, x00.x, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.y) : 0.0);

                // pack x00, x01, x10, x11's top-right corner into one vec4 structure
                vec4 topRight = vec4(
                    getAValue(batch, depth, x00.x, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.x, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.x, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.x, x11.w) : 0.0);

                // pack x00, x01, x10, x11's bottom-left corner into one vec4 structure
                vec4 bottomLeft = vec4(
                    getAValue(batch, depth, x00.z, x00.y),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.y) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.y) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.y) : 0.0);

                // pack x00, x01, x10, x11's bottom-right corner into one vec4 structure
                vec4 bottomRight = vec4(
                    getAValue(batch, depth, x00.z, x00.w),
                    hasNextCol ? getAValue(batch, depth, x01.z, x01.w) : 0.0,
                    hasNextRow ? getAValue(batch, depth, x10.z, x10.w) : 0.0,
                    (hasNextRow && hasNextCol) ? getAValue(batch, depth, x11.z, x11.w) : 0.0);

                // calculate the interpolation fraction on u and v direction
                vec4 frac = vec4(sourceFrac) - floor(sourceFrac);
                vec4 clampFrac = clamp(frac, vec4(0.0), vec4(1.0));

                vec4 top = mix(topLeft, topRight, clampFrac.ywyw);
                vec4 bottom = mix(bottomLeft, bottomRight, clampFrac.ywyw);
                vec4 newValue = mix(top, bottom, clampFrac.xxzz);

                ${n.output} = vec4(newValue);
            }
        `;return j(N({},Pd),{output:{dims:a,type:e[0].type,textureType:2},hasMain:!0,shaderSource:x})},XC=(t,e)=>{let r=t[0].dims,n=e.scales,o;if(n.length===0){let u=t[e.scalesInputIdx];if(u&&u.size!==0){if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");n=YC(u,e.mode,e.isResize)}else{let s=t[e.sizesInputIdx];if(!s||s.size===0)throw new Error("Either scales or sizes MUST be provided as input.");o=Array.from(s.integerData),n=ZC(o,r,e.mode,e.isResize)}}else if(t[e.sizesInputIdx])throw new Error("Only one of scales or sizes must be provided as input.");let a=o||r.map((u,s)=>Math.floor(u*n[s]));return[n,a]},YC=(t,e,r)=>{let n=Array.from(t.floatData);return jd(n,e,r),n},ZC=(t,e,r,n)=>{let o=e.length,a=new Array(o);for(let u=0,s=o;u<s;u++)if(e[u]===0){if(t[u]!==0)throw new Error("Input dim is zero but required output dim is non-zero.");a[u]=1}else a[u]=t[u]/e[u];return jd(a,r,n),a}}),QP,KC,Iz=ee(()=>{"use strict";Js(),QP=(t,e)=>(KC(e),[new Nn([e[0].dims.length],"int32",void 0,void 0,new Int32Array(e[0].dims))]),KC=t=>{if(!t||t.length!==1)throw new Error("Shape requires 1 input.")}}),Md,JP,e4,d1,QC,t4,JC,eO,Az=ee(()=>{"use strict";zr(),Gd(),ht(),tt(),Md={name:"Slice",inputNames:["A"],inputTypes:[0]},JP=(t,e,r)=>(QC(e),[t.run(j(N({},Md),{cacheHint:r.cacheKey,get:()=>d1(t,e[0],r)}),e)]),e4=t=>{let e=t.attributes.getInts("starts"),r=t.attributes.getInts("ends"),n=t.attributes.getInts("axes",[]);return zt({starts:e,ends:r,axes:n})},d1=(t,e,r)=>{let n=r.axes.length===0?e.dims.slice(0).map((c,f)=>f):r.axes,o=Fe.normalizeAxes(n,e.dims.length),a=r.starts.map((c,f)=>c>e.dims[o[f]]-1?e.dims[o[f]]:Fe.normalizeAxis(c,e.dims[o[f]])),u=r.ends.map((c,f)=>c>e.dims[o[f]]-1?e.dims[o[f]]:Fe.normalizeAxis(c,e.dims[o[f]])),s=e.dims.slice(),l=[];for(let c=0;c<o.length;c++)s[o[c]]=u[c]-a[c],a[c]>0&&l.push(`outputIdx[${o[c]}] += ${a[c]};`);let i=`
      float process(int outputIdx[${s.length}]) {
        ${l.join(`
      `)}
        return _A(outputIdx);
      }`;return j(N({},Md),{output:{dims:s,type:e.type,textureType:0},shaderSource:i})},QC=t=>{if(!t||t.length!==1)throw new Error("Slice requires 1 input.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.")},t4=(t,e)=>{eO(e);let r=JC(t,e);return[t.run(j(N({},Md),{cacheHint:r.cacheKey,get:()=>d1(t,e[0],r)}),[e[0]])]},JC=(t,e)=>{if(!t.session.isInitializer(e[1].dataId)||!t.session.isInitializer(e[2].dataId)||e.length>=4&&!t.session.isInitializer(e[3].dataId)||e.length>=5&&!t.session.isInitializer(e[4].dataId))throw new Error("dynamic slice attributes are not allowed");if(e.length>=5&&e[4].integerData.some(u=>u!==1))throw new Error("currently non-1 steps is not supported for Slice");let r=Array.from(e[1].integerData),n=Array.from(e[2].integerData),o=e.length>=4?Array.from(e[3].integerData):[],a=`${o};${r};${n}`;return{starts:r,ends:n,axes:o,cacheKey:a}},eO=t=>{if(!t||t.length<3||t.length>5)throw new Error("Invalid input number.");if(t[1].type!=="int32"||t[1].dims.length!==1)throw new Error("Invalid input type.");if(t[2].type!=="int32"||t[2].dims.length!==1)throw new Error("Invalid input type.");if(t.length>=4&&(t[3].type!=="int32"||t[3].dims.length!==1))throw new Error("Invalid input type.");if(t.length>=5&&(t[4].type!=="int32"||t[4].dims.length!==1))throw new Error("Invalid input type.")}}),h1,p1,g1,r4,n4,i4,o4,m1,tO,rO,nO,y1,Sz=ee(()=>{"use strict";zr(),ht(),rr(),tt(),dy(),h1={name:"SoftmaxComputeMax",inputNames:["A"],inputTypes:[0]},p1={name:"SoftmaxComputeScale",inputNames:["A","Max"],inputTypes:[0,0]},g1={name:"SoftMax",inputNames:["A","Max","Norm"],inputTypes:[0,0,0]},r4=(t,e,r)=>{y1(e);let n=e[0].dims.slice(),o=Fe.normalizeAxis(r.axis,n.length),a=Fe.sizeToDimension(n,o),u=Fe.sizeFromDimension(n,o);return m1(t,e,r,a,u)},n4=t=>zt({axis:t.attributes.getInt("axis",1)}),i4=t=>zt({axis:t.attributes.getInt("axis",-1)}),o4=(t,e,r)=>{y1(e);let n=e[0].dims.slice(),o=Fe.normalizeAxis(r.axis,n.length),a=n.length,u=o!==a-1,s=[],l=[],i=[],c;u&&(l=Array.from({length:a}).map((p,m)=>m),l[o]=a-1,l[a-1]=o,l.map(p=>s.push(n[p])),c=zt({perm:l}),i=Dc(t,e,c));let f=u?Fe.sizeToDimension(s,a-1):Fe.sizeToDimension(n,a-1),d=u?Fe.sizeFromDimension(s,a-1):Fe.sizeFromDimension(n,a-1),h=m1(t,u?i:e,r,f,d);return u?Dc(t,h,c):h},m1=(t,e,r,n,o)=>{let a=tO(t,e[0],n,o,[n]),u=t.run(j(N({},h1),{cacheHint:r.cacheKey,get:()=>a}),e),s=rO(t,e[0],n,o,a.output.dims,[n]),l=t.run(j(N({},p1),{cacheHint:r.cacheKey,get:()=>s}),[e[0],u]),i=nO(t,e[0],n,o,a.output.dims,s.output.dims);return[t.run(j(N({},g1),{cacheHint:r.cacheKey,get:()=>i}),[e[0],u,l])]},tO=(t,e,r,n,o)=>{let[a,u]=t.calculateTextureWidthAndHeight(e.dims,0),s=o.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1)throw new Error("Dimensionality of the output should be 1");if(o[0]!==r)throw new Error("Shape of the output should be equal to logical row count");let l=Je(t.session.backend.glContext.version),i=`
      float process(int[${s}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float max = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset, ${a},
        ${u} )));
        for(int i=1; i<${n}; ++i)
        {
          float current = getColorAsFloat(${l.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${a}, ${u})));
          if(current > max)
          max = current;
        }

        return max;
      }`;return j(N({},h1),{output:{dims:o,type:e.type,textureType:0},shaderSource:i})},rO=(t,e,r,n,o,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=a.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(a.length!==1)throw new Error("Dimensionality of the output should be 1");if(a[0]!==r)throw new Error("Shape of the output should be equal to logical row count");if(o.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let i=Je(t.session.backend.glContext.version),c=`
      float process(int[${l}] indices) {
        int logical_row_start_offset = indices[0] * ${n};

        float norm_factor = 0.0;
        float max = _Max(indices);
        for(int i=0; i<${n}; ++i)
        {
          norm_factor += exp(getColorAsFloat(${i.texture2D}(A, offsetToCoords(logical_row_start_offset + i,
            ${u}, ${s}))) - max);
        }

        return norm_factor;
      }`;return j(N({},p1),{output:{dims:a,type:e.type,textureType:0},shaderSource:c})},nO=(t,e,r,n,o,a)=>{let[u,s]=t.calculateTextureWidthAndHeight(e.dims,0),l=e.dims.length;if(r<1||n<1)throw new Error("Logical row count N and feature count D must be greater than or equal to 1");if(o.length!==1||a.length!==1)throw new Error("Dimensionality of the intermediate results should be 1");if(o[0]!==r||a[0]!==r)throw new Error("Shape of the intermediate results should be equal to logical row count");let i=`
      float process(int[${l}] indices) {

      // get offset of current logical tensor index from the 2-D texture coordinates (TexCoords)
      int offset = coordsToOffset(TexCoords, ${u}, ${s});

      //determine the logical row for this index
      int logical_row_index[1];
      logical_row_index[0] = offset / ${n};

      float norm_factor = _Norm(logical_row_index);

      // avoid possible division by 0
      // if norm_facor is 0, all elements are zero
      // if so, return 0
      if(norm_factor == 0.0)
        return 0.0;

      return exp(_A(indices) - _Max(logical_row_index)) / norm_factor;
    }`;return j(N({},g1),{output:{dims:e.dims,type:e.type,textureType:0},shaderSource:i})},y1=t=>{if(!t||t.length!==1)throw new Error("Softmax requires 1 input.");if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type")}}),v1,a4,s4,iO,oO,aO,Dz=ee(()=>{"use strict";zr(),ht(),tt(),v1={name:"Split",inputNames:["A"],inputTypes:[0]},a4=(t,e,r)=>{aO(e);let n=Fe.normalizeAxis(r.axis,e[0].dims.length),o=iO(t,e,n,r),a=[];for(let u=0;u<o;++u)a.push(t.run(j(N({},v1),{cacheHint:`${r.cacheKey};${u}`,get:()=>oO(t,e[0],r,n,u)}),e));return a},s4=t=>{let e=t.attributes.getInt("axis",0),r=t.attributes.getInts("split",[]),n=t.outputs.length;return zt({axis:e,split:r,numOutputs:n})},iO=(t,e,r,n)=>{let[,o]=O1.splitShape(e[0].dims,r,n.split,n.numOutputs);return o.length},oO=(t,e,r,n,o)=>{let[a,u]=O1.splitShape(e.dims,n,r.split,r.numOutputs),s=u[o],l=a[o],i=`
      float process(int indices[${l.length}]) {
        indices[${n}] += ${s};
        return _A(indices);
      }
    `;return j(N({},v1),{cacheHint:`${r.cacheKey}:${o}`,output:{dims:l,type:e.type,textureType:0},shaderSource:i})},aO=t=>{if(!t||t.length!==1)throw new Error("Split requires one input.");if(t[0].type!=="int8"&&t[0].type!=="uint8"&&t[0].type!=="int16"&&t[0].type!=="uint16"&&t[0].type!=="int32"&&t[0].type!=="uint32"&&t[0].type!=="float32"&&t[0].type!=="float64"&&t[0].type!=="bool")throw new Error("Invalid input type.")}}),q1,u4,l4,sO,uO,Cz=ee(()=>{"use strict";ht(),q1=(t,e,r)=>{sO(e);let n=Fe.squeezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},u4=(t,e)=>(uO(e),q1(t,[e[0]],Array.from(e[1].integerData))),l4=t=>t.attributes.getInts("axes"),sO=t=>{if(!t||t.length!==1)throw new Error("Squeeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},uO=t=>{if(!t||t.length!==2)throw new Error("Squeeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),c4,lO,cO,Oz=ee(()=>{"use strict";rr(),tt(),c4=(t,e)=>{cO(e);let r={name:"Sum",inputNames:e.map((n,o)=>`X${o}`),inputTypes:new Array(e.length).fill(0)};return[t.run(j(N({},r),{get:()=>lO(t,e,r)}),e)]},lO=(t,e,r)=>{let n=Je(t.session.backend.glContext.version),o=e[0].dims.slice(),a=`
      void main() {
        vec4 result = ${e.map((u,s)=>`${n.texture2D}(X${s},TexCoords)`).join(" + ")};
        ${n.output} = result;
      }
    `;return j(N({},r),{output:{dims:o,type:e[0].type,textureType:0},hasMain:!0,shaderSource:a})},cO=t=>{if(!t||t.length===0)throw new Error("Sum requires inputs.");let e=t[0].dims.length;for(let r=1;r<t.length;r++){if(e!==t[r].dims.length)throw new Error("Input shapes are mismatched.");for(let n=0;n<e;n++)if(t[0].dims[n]!==t[r].dims[n])throw new Error("Input shapes are not matched.")}if(t[0].type!=="float32"&&t[0].type!=="float64")throw new Error("Invalid input type.");for(let r=1;r<t.length;r++)if(t[0].type!==t[r].type)throw new Error("Input types are not matched.")}}),f4,fO,dO,Pz=ee(()=>{"use strict";Gd(),tt(),f4=(t,e)=>{dO(e);let r={name:"Tile",inputNames:["A"],inputTypes:[0]};return[t.run(j(N({},r),{get:()=>fO(t,e,r)}),e)]},fO=(t,e,r)=>{let n=e[0].dims.slice(),o=new Array(n.length),a=[];for(let l=0;l<n.length;l++)o[l]=n[l]*e[1].numberData[l],a.push(`inputIdx[${l}] = int(mod(float(outputIdx[${l}]), ${n[l]}.));`);let u=o.length,s=`
      float process(int outputIdx[${u}]) {
        int inputIdx[${u}];
        ${a.join(`
`)}
        return _A(inputIdx);
      }
    `;return j(N({},r),{output:{dims:o,type:e[0].type,textureType:0},shaderSource:s})},dO=t=>{if(!t||t.length!==2)throw new Error("Tile requires 2 input.");if(t[1].dims.length!==1)throw new Error("The second input shape must 1 dimension.");if(t[1].dims[0]!==t[0].dims.length)throw new Error("Invalid input shape.");if(Mc.indexOf(t[0].type)===-1)throw new Error("Invalid input type.");if(t[1].type!=="int32"&&t[1].type!=="int16")throw new Error("Invalid repeat type.")}}),X1,d4,h4,hO,pO,Mz=ee(()=>{"use strict";ht(),X1=(t,e,r)=>{hO(e);let n=Fe.unsqueezeShape(e[0].dims,r);return[t.reshapeUnpacked(e[0],n)]},d4=(t,e)=>(pO(e),X1(t,[e[0]],Array.from(e[1].integerData))),h4=t=>t.attributes.getInts("axes"),hO=t=>{if(!t||t.length!==1)throw new Error("Unsqueeze requires 1 input.");if(t[0].type==="string")throw new Error("invalid input tensor types.")},pO=t=>{if(!t||t.length!==2)throw new Error("Unsqueeze requires 2 inputs.");if(t[1].type!=="int32")throw new Error("Invalid input type.")}}),p4,Nz=ee(()=>{"use strict";wH(),RH(),FH(),LH(),fy(),cz(),fz(),dz(),hz(),pz(),gz(),mz(),bz(),ly(),wz(),xz(),_z(),Ez(),Tz(),Iz(),Az(),Sz(),Dz(),Cz(),Oz(),Pz(),dy(),J3(),Mz(),YP(),p4=[["Abs","","6+",O3],["Acos","","7+",P3],["Add","","7+",c3],["And","","7+",f3],["Asin","","7+",M3],["Atan","","7+",N3],["AveragePool","","7+",MP,NP],["BatchNormalization","","7+",a3,s3],["Cast","","6+",_3,E3],["Ceil","","6+",k3],["Clip","","6-10",L1,R3],["Clip","","11+",F3],["Concat","","4+",I3,A3],["Conv","","1+",V1,j1],["ConvTranspose","","1+",dP,hP],["Cos","","7+",L3],["Div","","7+",d3],["Dropout","","7+",B1],["DepthToSpace","","1+",gP,mP],["Equal","","7+",h3],["Elu","","6+",B3,$3],["Exp","","6+",V3],["Flatten","","1+",yP,vP],["Floor","","6+",j3],["FusedConv","com.microsoft","1+",V1,j1],["Gather","","1+",bP,wP],["Gemm","","7-10",U1,xP],["Gemm","","11+",U1,_P],["GlobalAveragePool","","1+",RP,FP],["GlobalMaxPool","","1+",BP],["Greater","","7+",p3],["Identity","","1+",B1],["ImageScaler","","1+",EP,TP],["InstanceNormalization","","6+",IP,AP],["LeakyRelu","","6+",U3,H3],["Less","","7+",g3],["LRN","","1+",SP,DP],["Log","","6+",z3],["MatMul","","1+",iP,oP],["MaxPool","","1+",kP,LP],["Mul","","7+",m3],["Neg","","6+",G3],["Not","","1+",W3],["Or","","7+",y3],["Pad","","2-10",H1,CP],["Pad","","11+",OP,PP],["Pow","","7+",v3],["PRelu","","7+",b3],["ReduceLogSum","","1+",zP,Go],["ReduceMax","","1+",jP,Go],["ReduceMean","","1+",VP,Go],["ReduceMin","","1+",UP,Go],["ReduceProd","","1+",HP,Go],["ReduceSum","","1-12",$P,Go],["ReduceSumSquare","","1+",GP,Go],["Relu","","6+",q3],["Reshape","","5+",WP],["Resize","","10",W1,ZP],["Resize","","11+",W1,KP],["Shape","","1+",QP],["Sigmoid","","6+",X3],["Sin","","7+",Y3],["Slice","","10+",t4],["Slice","","1-9",JP,e4],["Softmax","","1-12",r4,n4],["Softmax","","13+",o4,i4],["Split","","2-12",a4,s4],["Sqrt","","6+",Z3],["Squeeze","","1-12",q1,l4],["Squeeze","","13+",u4],["Sub","","7+",w3],["Sum","","6+",c4],["Tan","","7+",K3],["Tanh","","6+",Q3],["Tile","","6+",f4],["Transpose","","1+",Dc,pP],["Upsample","","7-8",z1,qP],["Upsample","","9",z1,XP],["Unsqueeze","","1-12",X1,h4],["Unsqueeze","","13+",d4],["Xor","","7+",x3]]});function Rz(t){let e={},r;for(;(r=Y1.exec(t))!==null;){let n=r[3].split(",").map(o=>{let a=o.trim().split(" ");return a&&a.length===2?{type:a[0],name:a[1]}:null}).filter(o=>o!==null);e[r[2]]={params:n,body:r[4]}}for(let n in e){let o=g4.replace("__FUNC__",n),a=new RegExp(o,"gm");for(;(r=a.exec(t))!==null;){let u=r[1],s=r[2],l=r[3].split(","),i=u?`${u} ${s};`:"",c=e[n].body,f="";e[n].params.forEach((h,p)=>{h&&(f+=`${h.type} ${h.name} = ${l[p]};
`)}),c=`${f}
 ${c}`,c=c.replace("return",`${s} = `);let d=`
      ${i}
      {
        ${c}
      }
      `;t=t.replace(r[0],d)}}return t=t.replace(Y1,""),t}var Y1,g4,Fz=ee(()=>{"use strict";Y1=/@inline[\s\n\r]+(\w+)[\s\n\r]+([0-9a-zA-Z_]+)\s*\(([^)]*)\)\s*{(([^}]|[\n\r])*)}/gm,g4="(\\w+)?\\s+([_0-9a-zA-Z]+)\\s+=\\s+__FUNC__\\((.*)\\)\\s*;"});function vc(t,e){let r=[],n=[],o=e!=null&&Array.isArray(e)&&e.length===0,a=e==null||o?null:kz(e,t).sort(),u=0;for(let s=0;s<t.length;++s){if(a!=null){if(a[u]===s&&t[s]!==1)throw new Error(`Can't squeeze axis ${s} since its dim '${t[s]}' is not 1`);(a[u]==null||a[u]>s)&&t[s]===1&&(r.push(t[s]),n.push(s)),a[u]<=s&&u++}t[s]!==1&&(r.push(t[s]),n.push(s))}return{newShape:r,keptDims:n}}function kz(t,e){let r=e.length;return t=t==null?e.map((n,o)=>o):[].concat(t),Bd(t.every(n=>n>=-r&&n<r),()=>`All values in axis param must be in range [-${r}, ${r}) but got axis ${t}`),Bd(t.every(Lz),()=>`All values in axis param must be integers but got axis ${t}`),t.map(n=>n<0?r+n:n)}function Lz(t){return t%1===0}function Bz(t){if(t.length===0)return 1;let e=t[0];for(let r=1;r<t.length;r++)e*=t[r];return e}function gO(t){let e=Math.ceil(Math.sqrt(t));return[e,Math.ceil(t/e)]}var m4,y4=ee(()=>{"use strict";wi(),ht(),m4=class{constructor(t){this.maxTextureSize=t}computeTextureWH(t,e){let r=this.computeTexture(t,e);return e&&e.isPacked&&(r[0]/=2,r[1]/=2),e&&e.reverseWH?[r[1],r[0]]:r}computeTexture(t,e){let r=e&&e.isPacked;if(t.length===0)return r?[2,2]:[1,1];let n=this.maxTextureSize;if(e&&e.breakAxis!==void 0){let u=e.breakAxis>=t.length?1:t.slice(e.breakAxis).reduce((l,i)=>l*i),s=e.breakAxis<=0?1:t.slice(0,e.breakAxis).reduce((l,i)=>l*i);if(u>n||s>n)ur.verbose("TextureLayout",`Given width/height preferences were unattainable: shape:${t}, breakAxis:${e.breakAxis}`);else return[u,s]}let o=t.slice(0);r&&(n=n*2,o=o.map((u,s)=>s>=o.length-2?o[s]%2===0?o[s]:o[s]+1:o[s]),o.length===1&&(o=[2,o[0]])),o.length!==2&&(o=vc(o).newShape);let a=Bz(o);return o.length<=1&&a<=n?[1,a]:o.length===2&&o[0]<=n&&o[1]<=n?o:o.length===3&&o[0]*o[1]<=n&&o[2]<=n?[o[0]*o[1],o[2]]:o.length===3&&o[0]<=n&&o[1]*o[2]<=n?[o[0],o[1]*o[2]]:o.length===4&&o[0]*o[1]*o[2]<=n&&o[3]<=n?[o[0]*o[1]*o[2],o[3]]:o.length===4&&o[0]<=n&&o[1]*o[2]*o[3]<=n?[o[0],o[1]*o[2]*o[3]]:r?gO(a/4).map(u=>u*2):gO(a)}}}),v4,$z=ee(()=>{"use strict";ht(),Xo(),rr(),y4(),go(),v4=class extends tu{constructor(t){super(t)}getFunctions(){return N(N(N(N(N(N(N({},this.offsetToCoords()),this.coordsToOffset()),this.toVec()),this.valueFrom()),this.getCommonUtilFuncs()),this.getInputsSamplingSnippets()),this.getOutputSamplingSnippet())}getCustomTypes(){return{}}offsetToCoords(){let t="offsetToCoords";return{offsetToCoords:new fe(`
      vec2 ${t}(int offset, int width, int height) {
        int t = offset / width;
        int s = offset - t*width;
        vec2 coords = (vec2(s,t) + vec2(0.5,0.5)) / vec2(width, height);
        return coords;
      }
      `)}}coordsToOffset(){let t="coordsToOffset";return{coordsToOffset:new fe(`
      int ${t}(vec2 coords, int width, int height) {
        float s = coords.s * float(width);
        float t = coords.t * float(height);
        int offset = int(t) * width + int(s);
        return offset;
      }
      `)}}getOutputSamplingSnippet(){let t=this.context.outputTextureLayout;return t.isPacked?this.getPackedOutputSamplingSnippet(t):this.getUnpackedOutputSamplingSnippet(t)}getPackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},o="getOutputCoords";switch(e.length){case 0:n[o]=this.getOutputScalarCoords();break;case 1:n[o]=this.getOutputPacked1DCoords(e,r);break;case 2:n[o]=this.getOutputPacked2DCoords(e,r);break;case 3:n[o]=this.getOutputPacked3DCoords(e,r);break;default:n[o]=this.getOutputPackedNDCoords(e,r)}let a=`
      void setOutput(vec4 val) {
        ${Je(this.context.glContext.version).output} = val;
      }
    `,u="floatTextureSetRGBA";return n[u]=new fe(a),n}getUnpackedOutputSamplingSnippet(t){let e=t.unpackedShape,r=[t.width,t.height],n={},o="getOutputCoords";switch(e.length){case 0:n[o]=this.getOutputScalarCoords();break;case 1:n[o]=this.getOutputUnpacked1DCoords(e,r);break;case 2:n[o]=this.getOutputUnpacked2DCoords(e,r);break;case 3:n[o]=this.getOutputUnpacked3DCoords(e,r);break;case 4:n[o]=this.getOutputUnpacked4DCoords(e,r);break;case 5:n[o]=this.getOutputUnpacked5DCoords(e,r);break;case 6:n[o]=this.getOutputUnpacked6DCoords(e,r);break;default:throw new Error(`Unsupported output dimensionality: ${e.length}`)}let a=`
        void setOutput(float val) {
          ${Je(this.context.glContext.version).output} = vec4(val, 0, 0, 0);
        }
    `,u="floatTextureSetR";return n[u]=new fe(a),n}getOutputScalarCoords(){return new fe(`
      int getOutputCoords() {
        return 0;
      }
    `)}getOutputPacked1DCoords(t,e){let r=e,n="";return r[0]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.y * ${r[1]}.0);
          }
        `,new fe(n)):r[1]===1?(n=`
          int getOutputCoords() {
            return 2 * int(TexCoords.x * ${r[0]}.0);
          }
        `,new fe(n)):(n=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                 vec2(${r[0]}, ${r[1]}));
          return 2 * (resTexRC.y * ${r[0]} + resTexRC.x);
        }
      `,new fe(n))}getOutputPacked2DCoords(t,e){let r="";if(gc.arraysEqual(t,e))return r=`
        ivec2 getOutputCoords() {
          return 2 * ivec2(TexCoords.xy * vec2(${e[0]}, ${e[1]}));
        }
      `,new fe(r);let n=e,o=Math.ceil(t[1]/2);return r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${n[0]}, ${n[1]}));

          int index = resTexRC.y * ${n[0]} + resTexRC.x;

          // reverse r and c order for packed texture
          int r = imod(index, ${o}) * 2;
          int c = 2 * (index / ${o});

          return ivec2(r, c);
        }
      `,new fe(r)}getOutputPacked3DCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[2]/2),o=n*Math.ceil(t[1]/2),a=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${r[0]}, ${r[1]}));
          int index = resTexRC.y * ${r[0]} + resTexRC.x;

          int b = index / ${o};
          index -= b * ${o};

          // reverse r and c order for packed texture
          int r = imod(index, ${n}) * 2;
          int c = 2 * (index / ${n});

          return ivec3(b, r, c);
        }
      `;return new fe(a)}getOutputPackedNDCoords(t,e){let r=[e[0],e[1]],n=Math.ceil(t[t.length-1]/2),o=n*Math.ceil(t[t.length-2]/2),a=o,u="",s="b, r, c";for(let i=2;i<t.length-1;i++)a*=t[t.length-i-1],u=`
      int b${i} = index / ${a};
      index -= b${i} * ${a};
    `+u,s=`b${i}, `+s;let l=`
      ivec${t.length} getOutputCoords() {
        ivec2 resTexRC = ivec2(TexCoords.xy *
                              vec2(${r[0]}, ${r[1]}));
        int index = resTexRC.y * ${r[0]} + resTexRC.x;

        ${u}

        int b = index / ${o};
        index -= b * ${o};

        // reverse r and c order for packed texture
        int r = imod(index, ${n}) * 2;
        int c = 2 * (index / ${n});

        return ivec${t.length}(${s});
      }
    `;return new fe(l)}getOutputUnpacked1DCoords(t,e){let r=`
        int getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          return resTexRC.y * ${e[0]} + resTexRC.x;
        }
      `;return new fe(r)}getOutputUnpacked2DCoords(t,e){let r=`
        ivec2 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          int r = index / ${t[1]};
          int c = index - r * ${t[1]};
          return ivec2(r, c);
        }
      `;return new fe(r)}getOutputUnpacked3DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
        ivec3 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec3(r, c, d);
        }
      `,new fe(r)}getOutputUnpacked4DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
      ivec4 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec4(r, c, d, d2);
        }
      `,new fe(r)}getOutputUnpacked5DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2","d3"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
      ivec5 getOutputCoords() {
          ivec2 resTexRC = ivec2(TexCoords.xy *
                                vec2(${e[0]}, ${e[1]}));
          int index = resTexRC.y * ${e[0]} + resTexRC.x;
          ${u}
          return ivec5(r, c, d, d2, d3);
        }
      `,new fe(r)}getOutputUnpacked6DCoords(t,e){let r="",n=t.length,o=null;n<2&&(o=[]),o=new Array(n-1),o[n-2]=t[n-1];for(let s=n-3;s>=0;--s)o[s]=o[s+1]*t[s+1];let a=["r","c","d","d2","d3","d4"],u=o.map((s,l)=>{let i=`int ${a[l]} = index / ${s}`,c=l===o.length-1?`int ${a[l+1]} = index - ${a[l]} * ${s}`:`index -= ${a[l]} * ${s}`;return`${i}; ${c};`}).join("");return r=`
     ivec6 getOutputCoords() {
         ivec2 resTexRC = ivec2(TexCoords.xy *
                               vec2(${e[0]}, ${e[1]}));
         int index = resTexRC.y * ${e[0]} + resTexRC.x;
         ${u}
         return ivec6(r, c, d, d2, d3, d4);
       }
     `,new fe(r)}getCommonUtilFuncs(){let t={},e="uvFromFlat";t[e]=new fe(`
    vec2 uvFromFlat(int texNumR, int texNumC, int index) {
      int texC = index / texNumR;
      int texR = index - texC * texNumR;
      // TODO: swap texR, texC order in following function so row is corresponding to u and column is corresponding to
      //       v.
      return (vec2(texR, texC) + halfCR) / vec2(texNumR, texNumC);
    }
    `),e="packedUVfrom1D",t[e]=new fe(`
      vec2 packedUVfrom1D(int texNumR, int texNumC, int index) {
        int texelIndex = index / 2;
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom2D",t[e]=new fe(`
      vec2 packedUVfrom2D(int texNumR, int texNumC, int texelsInLogicalRow, int row, int col) {
        int texelIndex = (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = texelIndex / texNumC;
        int texC = texelIndex - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="packedUVfrom3D",t[e]=new fe(`
      vec2 packedUVfrom3D(int texNumR, int texNumC,
          int texelsInBatch, int texelsInLogicalRow, int b,
          int row, int col) {
        int index = b * texelsInBatch + (row / 2) * texelsInLogicalRow + (col / 2);
        int texR = index / texNumC;
        int texC = index - texR * texNumC;
        return (vec2(texC, texR) + halfCR) / vec2(texNumC, texNumR);
      }
      `),e="sampleTexture";let r=Je(this.context.glContext.version);return t[e]=new fe(`
        float sampleTexture(sampler2D textureSampler, vec2 uv) {
            return ${r.texture2D}(textureSampler, uv).r;
        }`),t}getInputsSamplingSnippets(){let t={},e=this.context.outputTextureLayout;return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n],a=Km(r);o.isPacked?t[a]=this.getPackedSamplerFromInput(a,r,o):t[a]=this.getUnpackedSamplerFromInput(a,r,o);let u=oH(r);o.unpackedShape.length<=e.unpackedShape.length&&(o.isPacked?t[u]=this.getPackedSamplerAtOutputCoords(u,o,e,r):t[u]=this.getUnpackedSamplerAtOutputCoords(u,o,e,r))}),t}getPackedSamplerAtOutputCoords(t,e,r,n){let o=e.unpackedShape,a=r.unpackedShape,u=Km(n),s=o.length,l=a.length,i=Bi.getBroadcastDims(o,a),c=qo(l),f=l-s,d,h=Qs();s===0?d="":l<2&&i.length>=1?d="coords = 0;":d=i.map(I=>`coords.${h[I+f]} = 0;`).join(`
`);let p="";l<2&&s>0?p="coords":p=o.map((I,C)=>`coords.${h[C+f]}`).join(", ");let m="return outputValue;",v=Fe.size(o)===1,x=Fe.size(a)===1;if(s===1&&!v&&!x)m=`
        return vec4(outputValue.xy, outputValue.xy);
      `;else if(v&&!x)l===1?m=`
          return vec4(outputValue.x, outputValue.x, 0., 0.);
        `:m=`
          return vec4(outputValue.x);
        `;else if(i.length){let I=s-2,C=s-1;i.indexOf(I)>-1&&i.indexOf(C)>-1?m="return vec4(outputValue.x);":i.indexOf(I)>-1?m="return vec4(outputValue.x, outputValue.y, outputValue.x, outputValue.y);":i.indexOf(C)>-1&&(m="return vec4(outputValue.xx, outputValue.zz);")}let y=`
        int lastDim = coords.${h[l-1]};
        coords.${h[l-1]} = coords.${h[l-2]};
        coords.${h[l-2]} = lastDim;
      `,_=`
      vec4 ${t}() {
        ${c} coords = getOutputCoords();
        ${y}
        ${d}
        vec4 outputValue = ${u}(${p});
        ${m}
      }
    `;return new fe(_,["coordinates.getOutputCoords"])}getUnpackedSamplerAtOutputCoords(t,e,r,n){let o=[r.width,r.height],a=[e.width,e.height],u=e.unpackedShape.length,s=r.unpackedShape.length,l=e.unpackedShape,i=r.unpackedShape,c=Km(n);if(u===s&&gc.arraysEqual(a,o)){let y=`
          float ${t}() {
            return sampleTexture(${n}, TexCoords);
          }
        `;return new fe(y,["coordinates.sampleTexture"])}let f=qo(s),d=Bi.getBroadcastDims(l,i),h=s-u,p,m=Qs();u===0?p="":s<2&&d.length>=1?p="coords = 0;":p=d.map(y=>`coords.${m[y+h]} = 0;`).join(`
`);let v="";s<2&&u>0?v="coords":v=e.unpackedShape.map((y,_)=>`coords.${m[_+h]}`).join(", ");let x=`
        float ${t}() {
          ${f} coords = getOutputCoords();
          ${p}
          return ${c}(${v});
        }
      `;return new fe(x,["coordinates.getOutputCoords"])}getPackedSamplerFromInput(t,e,r){switch(r.unpackedShape.length){case 0:return this.getPackedSamplerScalar(t,e);case 1:return this.getPackedSampler1D(t,e,r);case 2:return this.getPackedSampler2D(t,e,r);case 3:return this.getPackedSampler3D(t,e,r);default:return this.getPackedSamplerND(t,e,r)}}getUnpackedSamplerFromInput(t,e,r){let n=r.unpackedShape;switch(n.length){case 0:return this.getUnpackedSamplerScalar(t,e,r);case 1:return this.getUnpackedSampler1D(t,e,r);case 2:return this.getUnpackedSampler2D(t,e,r);case 3:return this.getUnpackedSampler3D(t,e,r);case 4:return this.getUnpackedSampler4D(t,e,r);case 5:return this.getUnpackedSampler5D(t,e,r);case 6:return this.getUnpackedSampler6D(t,e,r);default:throw new Error(`Unsupported dimension ${n.length}-D`)}}getPackedSamplerScalar(t,e){let r=Je(this.context.glContext.version),n=`
          vec4 ${t}() {
            return ${r.texture2D}(${e}, halfCR);
          }
        `;return new fe(n)}getPackedSampler1D(t,e,r){let n=[r.width,r.height],o=[n[1],n[0]],a=Je(this.context.glContext.version),u=`vec4 ${t}(int index) {
      vec2 uv = packedUVfrom1D(
      ${o[0]}, ${o[1]}, index);
      return ${a.texture2D}(${e}, uv);
    }`;return new fe(u,["coordinates.packedUVfrom1D"])}getPackedSampler2D(t,e,r){let n=r.unpackedShape,o=[r.width,r.height],a=Je(this.context.glContext.version),u=o[0],s=o[1];if(o!=null&&gc.arraysEqual(n,o)){let f=`vec4 ${t}(int row, int col) {
        vec2 uv = (vec2(col, row) + halfCR) / vec2(${s}.0, ${u}.0);
        return ${a.texture2D}(${e}, uv);
      }`;return new fe(f)}let l=o,i=Math.ceil(n[1]/2),c=`vec4 ${t}(int row, int col) {
      vec2 uv = packedUVfrom2D(${l[1]}, ${l[0]}, ${i}, row, col);
      return ${a.texture2D}(${e}, uv);
    }`;return new fe(c,["coordinates.packedUVfrom2D"])}getPackedSampler3D(t,e,r){let n=r.unpackedShape,o=[r.width,r.height],a=[o[0],o[1]],u=Je(this.context.glContext.version);if(n[0]===1){let d=n.slice(1),h=[1,2],p=lc(n,d),m=["b","row","col"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=this.getPackedSamplerFromInput(t,e,v),y=`${x.routineBody}
      vec4 ${t}(int b, int row, int col) {
        return ${t}(${cc(m,h)});
      } `;return new fe(y,x.dependencies)}let s=a[0],l=a[1],i=Math.ceil(n[2]/2),c=i*Math.ceil(n[1]/2),f=`vec4 ${t}(int b, int row, int col) {
      vec2 uv = packedUVfrom3D(
        ${l}, ${s}, ${c}, ${i}, b, row, col);
      return ${u.texture2D}(${e}, uv);}`;return new fe(f,["coordinates.packedUVfrom3D"])}getPackedSamplerND(t,e,r){let n=r.unpackedShape,o=n.length,a=[r.width,r.height],u=Je(this.context.glContext.version),s=[a[0],a[1]],l=s[1],i=s[0],c=Math.ceil(n[o-1]/2),f=c*Math.ceil(n[o-2]/2),d="int b, int row, int col",h=`b * ${f} + (row / 2) * ${c} + (col / 2)`;for(let m=2;m<o-1;m++)d=`int b${m}, `+d,f*=n[o-m-1],h=`b${m} * ${f} + `+h;let p=`vec4 ${t}(${d}) {
      int index = ${h};
      int texR = index / ${i};
      int texC = index - texR * ${i};
      vec2 uv = (vec2(texC, texR) + halfCR) / vec2(${i}, ${l});
      return ${u.texture2D}(${e}, uv);
    }`;return new fe(p)}getUnpackedSamplerScalar(t,e,r){let[n,o]=[r.width,r.height];if(n===1&&o===1){let u=`
          float ${t}() {
            return sampleTexture(${e}, halfCR);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}let a=`
        float ${t}() {
          int offset_${e} = coordsToOffset(TexCoords, ${n}, ${o});
          vec2 uv = uvFromFlat(${n}, ${o}, offset_${e});
          return sampleTexture(${e}, uv);
        }
      `;return new fe(a,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler1D(t,e,r){let n=r.width,o=r.height;if(o===1&&n===1){let u=`
        float ${t}(int index) {
          return sampleTexture(${e}, halfCR);
        }
      `;return new fe(u,["coordinates.sampleTexture"])}if(o===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2((float(index) + 0.5) / ${n}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}if(n===1){let u=`
          float ${t}(int index) {
            vec2 uv = vec2(0.5, (float(index) + 0.5) / ${o}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(u,["coordinates.sampleTexture"])}let a=`
        float ${t}(int index) {
          vec2 uv = uvFromFlat(${n}, ${o}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(a,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler2D(t,e,r){let n=r.unpackedShape,o=[r.height,r.width];if(o!=null&&gc.arraysEqual(n,o)){let f=o[1],d=o[0],h=`
          float ${t}(int row, int col) {
            vec2 uv = (vec2(row, col) + halfCR) / vec2(${f}.0, ${d}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(h,["coordinates.sampleTexture"])}let{newShape:a,keptDims:u}=vc(n),s=a;if(s.length<n.length){let f=lc(n,s),d=JSON.parse(JSON.stringify(r));d.unpackedShape=f;let h=["col","row"],p=`
          ${this.getUnpackedSamplerFromInput(t,e,d).routineBody}
          float ${t}(int row, int col) {
            return ${t}(${cc(h,u)});
          }
        `;return new fe(p,["coordinates.sampleTexture"])}let l=o[1],i=o[0];if(i===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${i});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2(0.5, (index + 0.5) / ${l}.0);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}if(l===1){let f=`
          float ${t}(int row, int col) {
            int offset_${e} = coordsToOffset(TexCoords, ${l}, ${i});
            float index = dot(vec3(row, col, offset_${e}), vec3(${n[1]}, 1, 1));
            vec2 uv = vec2((index + 0.5) / ${i}.0, 0.5);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(f,["coordinates.sampleTexture","coordinates.coordsToOffset"])}let c=`
        float ${t}(int row, int col) {
          int index = col * ${n[1]} + row;
          vec2 uv = uvFromFlat(${l}, ${i}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(c,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler3D(t,e,r){let n=r.unpackedShape,o=n[1]*n[2],a=n[2],{newShape:u,keptDims:s}=vc(n),l=u;if(l.length<n.length){let d=lc(n,l),h=["batch","col","row"],p=JSON.parse(JSON.stringify(r));p.unpackedShape=d;let m=this.getUnpackedSamplerFromInput(t,e,p),v=s.reverse(),x=`
          ${m.routineBody}
          float ${t}(int batch, int row, int col) {
            return ${t}(${cc(h,v)});
          }
        `;return new fe(x,m.dependencies)}let i=r.width,c=r.height,f=`
          float ${t}(int depth, int row, int col) {
            // Explicitly use integer operations as dot() only works on floats.
            int index = depth * ${o} + col * ${a} + row;
            vec2 uv = uvFromFlat(${i}, ${c}, index);
            return sampleTexture(${e}, uv);
          }
      `;return new fe(f,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}getUnpackedSampler4D(t,e,r){let n=r.unpackedShape,o=n[3],a=n[2]*o,u=n[1]*a,s=r.width,l=r.height,i=`
        float ${t}(int row, int col, int depth, int depth2) {
          int index = row * ${u} + col * ${a} +
              depth2 * ${o} + depth;
          vec2 uv = uvFromFlat(${s}, ${l}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(i,["coordinates.uvFromFlat","coordinates.sampleTexture"])}getUnpackedSampler5D(t,e,r){let n=r.unpackedShape,o=n[4],a=n[3]*o,u=n[2]*a,s=n[1]*u,{newShape:l,keptDims:i}=vc(n);if(l.length<n.length){let h=lc(n,l),p=["row","col","depth","depth2","depth3"],m=JSON.parse(JSON.stringify(r));m.unpackedShape=h;let v=`
          ${this.getUnpackedSamplerFromInput(t,e,m).routineBody}
          float ${t}(int row, int col, int depth, int depth2, int depth3) {
            return ${t}(${cc(p,i)});
          }
        `;return new fe(v,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let c=r.width,f=r.height,d=`
        float ${t}(int row, int col, int depth, int depth2, int depth3) {
          int index = row * ${s} + col * ${u} + depth * ${a} +
          depth3 * ${o} + depth2;
          vec2 uv = uvFromFlat(${c}, ${f}, index);
          return sampleTexture(${e}, uv);
        }
      `;return new fe(d,["coordinates.sampleTexture","coordinates.uvFromFlat"])}getUnpackedSampler6D(t,e,r){let n=r.unpackedShape,o=n[5],a=n[4]*o,u=n[3]*a,s=n[2]*u,l=n[1]*s,{newShape:i,keptDims:c}=vc(n);if(i.length<n.length){let p=lc(n,i),m=["row","col","depth","depth2","depth3","depth4"],v=JSON.parse(JSON.stringify(r));v.unpackedShape=p;let x=`
            ${this.getUnpackedSamplerFromInput(t,e,v).routineBody}
            float ${t}(int row, int col, int depth,
              int depth2, int depth3, int depth4) {
              return ${t}(${cc(m,c)});
            }
          `;return new fe(x,["coordinates.sampleTexture","coordinates.uvFromFlat"])}let f=r.width,d=r.height,h=`
          float ${t}(int row, int col, int depth,
            int depth2, int depth3, int depth4) {
            int index = row * ${l} + col * ${s} + depth * ${u} +
            depth2 * ${a} + depth3 * ${o} + depth4;
            vec2 uv = uvFromFlat(${f}, ${d}, index);
            return sampleTexture(${e}, uv);
          }
        `;return new fe(h,["coordinates.uvFromFlat","coordinates.sampleTexture","coordinates.coordsToOffset"])}toVec(){let t=this.context.outputTextureLayout,e=t.shape.length,r=t.strides,n=t.width,o=t.height,a=[];for(let s=0;s<e-1;++s)a.push(`
        c[${s}] = offset / ${r[s]};`),a.push(`
        offset -= c[${s}] * ${r[s]};`);a.push(`
        c[${e-1}] = offset;`);let u=`
      void toVec(vec2 texCoords, out int c[${e}]) {
        int offset = coordsToOffset(texCoords, ${n}, ${o});
        ${a.join("")}
      }
      void toVec(int offset, out int c[${e}]) {
        ${a.join("")}
      }
    `;return{toVec:new fe(u,["coordinates.coordsToOffset"])}}valueFrom(){let t={};return this.context.programInfo.inputNames.forEach((e,r)=>{let n=this.context.inputTextureLayouts[r],o=(n.unpackedShape.length>0?n.unpackedShape:n.shape).length,a=`_${e}`;t[a]=new fe(this.getValueFromSingle(e,o,n.width,n.height,!1),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"]),a=a+"_T",t[a]=new fe(this.getValueFromSingle(e,o,n.width,n.height,!0),[`shapeUtils.indicesToOffset${a}`,"coordinates.offsetToCoords","fragcolor.getColorAsFloat"])}),t}getValueFromSingle(t,e,r,n,o){let a=`_${t}`;o&&(a=a+"_T");let u=Je(this.context.glContext.version);return`
        float ${a}(int m[${e}]) {
          int offset = indicesToOffset${a}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          float value = getColorAsFloat(${u.texture2D}(${t}, coords));
          return value;
        }
        `}getPackedValueFrom(t,e,r,n,o){let a=`_${t}_Pack`;o&&(a=a+"_T");let u=Je(this.context.glContext.version);return`
        vec4 ${a}(int m[${e}]) {
          int offset = indicesToOffset_${t}(m);
          vec2 coords = offsetToCoords(offset, ${r}, ${n});
          return ${u.texture2D}(${t}, coords);
        }
        `}}}),b4,Vz=ee(()=>{"use strict";Xo(),b4=class Z1 extends tu{constructor(e){super(e)}getFunctions(){return N(N({},this.encodeFloat32()),this.decodeFloat32())}getCustomTypes(){return{}}encodeFloat32(){return{encode:new fe(`highp vec4 encode(highp float f) {
        return vec4(f, 0.0, 0.0, 0.0);
      }
        `)}}decodeFloat32(){return{decode:new fe(`highp float decode(highp vec4 rgba) {
        return rgba.r;
      }
        `)}}encodeUint8(){let e=Z1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{encode:new fe(`
      highp vec4 encode(highp float f) {
        highp float F = abs(f);
        highp float Sign = step(0.0,-f);
        highp float Exponent = floor(log2(F));
        highp float Mantissa = (exp2(- Exponent) * F);
        Exponent = floor(log2(F) + 127.0) + floor(log2(Mantissa));
        highp vec4 rgba;
        rgba[0] = 128.0 * Sign  + floor(Exponent*exp2(-1.0));
        rgba[1] = 128.0 * mod(Exponent,2.0) + mod(floor(Mantissa*128.0),128.0);
        rgba[2] = floor(mod(floor(Mantissa*exp2(23.0 -8.0)),exp2(8.0)));
        rgba[3] = floor(exp2(23.0)*mod(Mantissa,exp2(-15.0)));
        ${e}
        rgba = rgba / 255.0; // values need to be normalized to [0,1]
        return rgba;
    }
        `)}}decodeUint8(){let e=Z1.isLittleEndian()?"rgba.rgba=rgba.abgr;":"";return{decode:new fe(`
        highp float decode(highp vec4 rgba) {
          rgba = rgba * 255.0; // values need to be de-normalized from [0,1] to [0,255]
          ${e}
          highp float Sign = 1.0 - step(128.0,rgba[0])*2.0;
          highp float Exponent = 2.0 * mod(rgba[0],128.0) + step(128.0,rgba[1]) - 127.0;
          highp float Mantissa = mod(rgba[1],128.0)*65536.0 + rgba[2]*256.0 +rgba[3] + float(0x800000);
          highp float Result =  Sign * exp2(Exponent) * (Mantissa * exp2(-23.0 ));
          return Result;
      }
        `)}}static isLittleEndian(){let e=new ArrayBuffer(4),r=new Uint32Array(e),n=new Uint8Array(e);if(r[0]=3735928559,n[0]===239)return!0;if(n[0]===222)return!1;throw new Error("unknown endianness")}}}),w4,jz=ee(()=>{"use strict";Xo(),rr(),w4=class extends tu{constructor(t){super(t)}getFunctions(){return N(N({},this.setFragColor()),this.getColorAsFloat())}getCustomTypes(){return{}}setFragColor(){let t=Je(this.context.glContext.version);return{setFragColor:new fe(`
        void setFragColor(float value) {
            ${t.output} = encode(value);
        }
        `,["encoding.encode"])}}getColorAsFloat(){return{getColorAsFloat:new fe(`
        float getColorAsFloat(vec4 color) {
            return decode(color);
        }
        `,["encoding.decode"])}}}}),x4,Uz=ee(()=>{"use strict";Xo(),x4=class bc extends tu{constructor(e){super(e)}getFunctions(){return N(N(N(N(N({},this.bcastIndex()),this.bcastMatmulIndex()),this.offsetToIndices()),this.indicesToOffset()),this.incrementIndices())}getCustomTypes(){return{}}bcastIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,o)=>{let a=this.context.inputTextureLayouts[o].unpackedShape;if(a.length<=e){let u=a.length,s=e-u,l=`bcastIndices_${n}`,i="";for(let f=0;f<u;++f)i+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l} (int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${i}
        }
        `;r[l]=new fe(c)}}),r}bcastMatmulIndex(){let e=this.context.outputTextureLayout.shape.length,r={};return this.context.programInfo.inputNames.forEach((n,o)=>{let a=this.context.inputTextureLayouts[o].shape;if(!(a.length<2||a.length>e)){let u=a.length,s=e-u,l=`bcastMatmulIndices_${n}`,i="";for(let f=0;f<u-2;++f)i+=`
          realIndices[${f}] = int( mod(float(bcastedIndices[${s+f}]), ${a[f]}.0) );
          `;let c=`
        void ${l}(int bcastedIndices[${e}], out int realIndices[${u}]) {
          ${i}
          realIndices[${u-1}] = bcastedIndices[${e-1}];
          realIndices[${u-2}] = bcastedIndices[${e-2}];
        }
        `;r[l]=new fe(c)}}),r}indicesToOffset(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=o.length,s=`indicesToOffset_${r}`;e[s]=new fe(bc.indexToOffsetSingle(s,u,a)),s=`indicesToOffset_${r}_T`,e[s]=new fe(bc.indexToOffsetSingle(s,u,a.slice().reverse()))}),e}static indexToOffsetSingle(e,r,n){let o="";for(let a=r-1;a>=0;--a)o+=`
        offset += indices[${a}] * ${n[a]};
        `;return`
      int ${e}(int indices[${r}]) {
        int offset = 0;
        ${o}
        return offset;
      }
      `}offsetToIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=this.context.inputTextureLayouts[n].strides,u=o.length,s=`offsetToIndices_${r}`;e[s]=new fe(bc.offsetToIndicesSingle(s,u,a)),s=`offsetToIndices_${r}_T`,e[s]=new fe(bc.offsetToIndicesSingle(s,u,a.slice().reverse()))}),e}static offsetToIndicesSingle(e,r,n){let o=[];for(let a=0;a<r-1;++a)o.push(`
      indices[${a}] = offset / ${n[a]};`),o.push(`
        offset -= indices[${a}] * ${n[a]};`);return o.push(`
      indices[${r-1}] = offset;`),`
      void ${e}(int offset, out int indices[${r}]) {
        ${o.join("")}
      }
      `}incrementIndices(){let e={};return this.context.programInfo.inputNames.forEach((r,n)=>{let o=this.context.inputTextureLayouts[n].shape,a=o.length,u=`incrementIndices_${r}`,s="";for(let i=0;i<a;++i)s+=`
        shape[${i}] = ${o[i]};`;let l=`
        void ${u}(int axis, out int indices[${a}]) {
          int shape[${a}];
          ${s};
          for(int i = ${a} -1 ; i >= 0; --i) {
            if(i > axis) continue;
            indices[i] += 1;
            if(indices[i] < shape[i]) {
              break;
            }
            indices[i] = 0;
          }
        }
        `;e[u]=new fe(l)}),e}}}),_4,Hz=ee(()=>{"use strict";Xo(),_4=class extends tu{constructor(t){super(t)}getCustomTypes(){return{}}getFunctions(){return N(N(N(N({},this.binaryVecFunctions()),this.copyVec()),this.setVecItem()),this.getVecItem())}binaryVecFunctions(){let t=this.context.outputTextureLayout.shape.length,e={add:"+=",sub:"-=",mul:"*=",div:"/="},r={};for(let n in e){let o=`${n}Vec`,a="";for(let s=0;s<t;++s)a+=`
          dest[${s}] ${e[n]} src[${s}];
          `;let u=`
        void ${o}(int src[${t}], out int dest[${t}]) {
          ${a}
        }
        `;r[o]=new fe(u)}return r}copyVec(){let t=this.context.outputTextureLayout.shape.length,e="";for(let n=0;n<t;++n)e+=`
        dest[${n}] = src[${n}];
        `;let r=`
      void copyVec(int src[${t}], out int dest[${t}]) {
        ${e}
      }
      `;return{copyVec:new fe(r)}}setVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index =${t} + index;
        if (index == 0)
            m[0] = value;
        `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            m[${n}] = value;
            `;e+=`
        else
            m[${t-1}] = value;
        `;let r=`
      void setVecItem(out int m[${t}], int index, int value) {
        ${e}
      }
        `;return{setVecItem:new fe(r)}}getVecItem(){let t=this.context.outputTextureLayout.shape.length,e=`
        if(index < 0)
            index = ${t} + index;
        if (index == 0)
            return m[0];
      `;for(let n=1;n<t-1;++n)e+=`
        else if (index == ${n})
            return m[${n}];
      `;e+=`
        else
            return m[${t-1}];
        `;let r=`
      int getVecItem(int m[${t}], int index) {
        ${e}
      }
    `;return{getVecItem:new fe(r)}}}}),K1,zz=ee(()=>{"use strict";$z(),Vz(),jz(),Uz(),Hz(),K1={encoding:b4,fragcolor:w4,vec:_4,shapeUtils:x4,coordinates:v4}}),E4,Gz=ee(()=>{"use strict";Xo(),Fz(),zz(),rr(),E4=class{constructor(t,e,r,n){this.libs={},this.glslLibRoutineDependencyGraph={},this.context=new u3(t,e,r,n),Object.keys(K1).forEach(a=>{let u=new K1[a](this.context);this.libs[a]=u});let o=this.glslLibRoutineDependencyGraph;for(let a in this.libs){let u=this.libs[a].getFunctions();for(let s in u){let l=a+"."+s,i;o[l]?(i=o[l],i.routineBody=u[s].routineBody):(i=new k1(l,u[s].routineBody),o[l]=i);let c=u[s].dependencies;if(c)for(let f=0;f<c.length;++f)if(o[c[f]])i.addDependency(o[c[f]]);else{let d=new k1(c[f]);o[c[f]]=d,i.addDependency(d)}}}}preprocess(){let t=this.context.programInfo,e=t.shaderSource;return this.context.programInfo.hasMain||(e=`${e}
      ${iH(this.context.glContext.version,this.context.outputTextureLayout.shape.length)}`),e=Rz(e),`${nH(this.context.glContext.version)}
    ${this.getUniforms(t.inputNames,t.variables)}
    ${this.getImports(e)}
    ${e}`}getImports(t){let e=this.selectGlslLibRoutinesToBeIncluded(t);if(e.length===0)return"";let r="";for(let n=0;n<e.length;++n)if(e[n].routineBody)r+=e[n].routineBody+`
`;else throw new Error(`Missing body for the Glsl Library routine: ${e[n].name}`);return r}selectGlslLibRoutinesToBeIncluded(t){let e=[];return Object.keys(this.glslLibRoutineDependencyGraph).forEach(r=>{let n=r.split(".")[1];t.indexOf(n)!==-1&&e.push(this.glslLibRoutineDependencyGraph[r])}),l3.returnOrderedNodes(e)}getUniforms(t,e){let r=[];if(t)for(let n of t)r.push(`uniform sampler2D ${n};`);if(e)for(let n of e)r.push(`uniform ${n.type} ${n.name}${n.arrayLength?`[${n.arrayLength}]`:""};`);return r.join(`
`)}}}),T4,Wz=ee(()=>{"use strict";Ha(),wi(),Gz(),rr(),T4=class{constructor(t,e,r){this.profiler=t,this.glContext=e,this.textureLayoutStrategy=r,this.repo=new Map,this.attributesBound=!1}getArtifact(t){return this.repo.get(t)}setArtifact(t,e){this.repo.set(t,e)}run(t,e,r){this.profiler.event("op",`ProgramManager.run ${t.programInfo.name??"unknown kernel"}`,()=>{let n=this.glContext.gl,o=t.program;n.useProgram(o);try{this.bindOutput(r),this.attributesBound||this.bindAttributes(t.attribLocations),this.bindUniforms(t.uniformLocations,t.programInfo.variables??[],e)}catch(a){throw ur.error("ProgramManager",t.programInfo.shaderSource),a}this.profiler.event("backend","GlContext.draw()",()=>{this.glContext.draw()})},this.glContext)}dispose(){this.vertexShader&&this.glContext.deleteShader(this.vertexShader),this.repo.forEach(t=>this.glContext.deleteProgram(t.program))}build(t,e,r){return this.profiler.event("backend","ProgramManager.build",()=>{let n=new E4(this.glContext,t,e,r),o=n.preprocess(),a=this.compile(o);return{programInfo:t,program:a,uniformLocations:this.getUniformLocations(a,n.context.programInfo.inputNames,n.context.programInfo.variables),attribLocations:this.getAttribLocations(a)}})}compile(t){if(!this.vertexShader){ur.verbose("ProrgramManager","Compiling and caching Vertex shader for the first time");let n=rH(this.glContext.version);this.vertexShader=this.glContext.compileShader(n,this.glContext.gl.VERTEX_SHADER)}Fr.debug&&ur.verbose("ProrgramManager",`FragShader:
${t}
`);let e=this.glContext.compileShader(t,this.glContext.gl.FRAGMENT_SHADER),r=this.glContext.createProgram(this.vertexShader,e);return this.glContext.deleteShader(e),r}bindOutput(t){let e=t.width,r=t.height;ur.verbose("ProrgramManager",`Binding output texture to Framebuffer: w/h=${e}/${r}, shape=${t.shape}, type=${t.tensor.type}`),this.glContext.attachFramebuffer(t.texture,e,r)}bindAttributes(t){let e=t.position,r=t.textureCoord;this.glContext.setVertexAttributes(e,r),this.attributesBound=!0}bindUniforms(t,e,r){let n=this.glContext.gl,o=0;for(let{name:a,type:u,location:s,arrayLength:l}of t){let i=e.find(c=>c.name===a)?.data;if(u!=="sampler2D"&&!i)throw new Error(`variable '${a}' does not have data defined in program info`);switch(u){case"sampler2D":this.bindTexture(r[o],s,o),o++;break;case"float":l?n.uniform1fv(s,i):n.uniform1f(s,i);break;case"int":l?n.uniform1iv(s,i):n.uniform1i(s,i);break;default:throw new Error(`Uniform not implemented: ${u}`)}}}bindTexture(t,e,r){this.glContext.bindTextureToUniform(t.texture,r,e)}getAttribLocations(t){return{position:this.getAttribLocation(t,"position"),textureCoord:this.getAttribLocation(t,"textureCoord")}}getUniformLocations(t,e,r){let n=[];if(e)for(let o of e)n.push({name:o,type:"sampler2D",location:this.getUniformLocation(t,o)});if(r)for(let o of r)n.push(j(N({},o),{location:this.getUniformLocation(t,o.name)}));return n}getUniformLocation(t,e){let r=this.glContext.gl.getUniformLocation(t,e);if(r===null)throw new Error(`Uniform ${e} not found.`);return r}getAttribLocation(t,e){return this.glContext.gl.getAttribLocation(t,e)}}}),I4,qz=ee(()=>{"use strict";wi(),Vd(),I4=class{constructor(t,e,r,n){this.glContext=t,this.layoutStrategy=e,this.profiler=r,this.config=n,this.pendingRead=new Map,n.reuseTextures&&(this.inUseTextures=new Map,this.idleTextures=new Map,this.textureLookup=new Map)}createTextureFromLayout(t,e,r,n){let o=this.toEncoderType(t),a=this.glContext.getEncoder(o,e.channels||1,n);if(e.isPacked&&n===1)throw new Error("not implemented");let u=e.width,s=e.height,l,i;if(this.config.reuseTextures){l=`${u}x${s}_${a.format}_${a.internalFormat}_${a.textureType}`,i=this.inUseTextures.get(l),i||(i=[],this.inUseTextures.set(l,i));let f=this.idleTextures.get(l);if(f&&f.length>0){let d=f.pop();return i.push(d),n===1&&this.glContext.updateTexture(d,u,s,a,this.toTextureData(t,r)),d}}ur.verbose("TextureManager",`Creating new texture of size ${e.width}x${e.height}`);let c=this.glContext.allocateTexture(u,s,a,this.toTextureData(t,r));return this.config.reuseTextures&&(i.push(c),this.textureLookup.set(c,l)),c}readTexture(t,e,r){return r||(r=1),this.profiler.event("backend","TextureManager.readTexture",()=>{let n=t.shape.reduce((a,u)=>a*u)*r,o=this.glContext.readTexture(t.texture,t.width,t.height,n,this.toEncoderType(e),r);return this.toTensorData(e,o)})}readTextureAsync(t,e,r){return U(this,null,function*(){let n=t.tensor.dataId;if(r||(r=1),this.pendingRead.has(n)){let o=this.pendingRead.get(n);return new Promise(a=>o?.push(a))}return this.profiler.event("backend","TextureManager.readTextureAsync",()=>U(this,null,function*(){this.pendingRead.set(n,[]);let o=t.shape.reduce((l,i)=>l*i)*r;yield this.glContext.createAndWaitForFence();let a=this.glContext.readTexture(t.texture,t.width,t.height,o,this.toEncoderType(e),r),u=this.toTensorData(e,a),s=this.pendingRead.get(n);return this.pendingRead.delete(n),s?.forEach(l=>l(u)),u}))})}readUint8TextureAsFloat(t){return this.profiler.event("backend","TextureManager.readUint8TextureAsFloat",()=>{let e=t.shape.reduce((n,o)=>n*o),r=this.glContext.readTexture(t.texture,t.width,t.height,e*4,"byte",4);return new Float32Array(r.buffer,r.byteOffset,e)})}releaseTexture(t,e){let r;if(this.config.reuseTextures&&(r=this.textureLookup.get(t.texture),r)){e&&this.textureLookup.delete(r);let n=this.inUseTextures.get(r);if(n){let o=n.indexOf(t.texture);if(o!==-1){n.splice(o,1);let a=this.idleTextures.get(r);a||(a=[],this.idleTextures.set(r,a)),a.push(t.texture)}}}(!r||e)&&(ur.verbose("TextureManager",`Deleting texture of size ${t.width}x${t.height}`),this.glContext.deleteTexture(t.texture))}toTensorData(t,e){switch(t){case"int16":return e instanceof Int16Array?e:Int16Array.from(e);case"int32":return e instanceof Int32Array?e:Int32Array.from(e);case"int8":return e instanceof Int8Array?e:Int8Array.from(e);case"uint16":return e instanceof Uint16Array?e:Uint16Array.from(e);case"uint32":return e instanceof Uint32Array?e:Uint32Array.from(e);case"uint8":case"bool":return e instanceof Uint8Array?e:Uint8Array.from(e);case"float32":return e instanceof Float32Array?e:Float32Array.from(e);case"float64":return e instanceof Float64Array?e:Float64Array.from(e);default:throw new Error(`TensorData type ${t} is not supported`)}}toTextureData(t,e){if(e)return e instanceof Float32Array?e:new Float32Array(e)}toEncoderType(t){return"float"}clearActiveTextures(){this.glContext.clearActiveTextures()}}}),A4,Xz=ee(()=>{"use strict";wi(),LU(),bH(),Nz(),Wz(),y4(),qz(),A4=class{constructor(t,e){this.backend=t,this.context=e,this.layoutStrategy=new m4(t.glContext.maxTextureSize),this.programManager=new T4(this.context.profiler,t.glContext,this.layoutStrategy),this.textureManager=new I4(t.glContext,this.layoutStrategy,this.context.profiler,{reuseTextures:t.textureCacheMode==="full"}),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache=new Map,this.pack=t.pack,this.pack2unpackMap=new Map,this.unpack2packMap=new Map}createInferenceHandler(){return new o3(this)}onGraphInitialized(t){let e=t.getValues().filter(r=>r.from===-1&&r.tensor).map(r=>r.tensor.dataId);this.initializers=new Set(e)}isInitializer(t){return this.initializers?this.initializers.has(t):!1}addInitializer(t){this.initializers.add(t)}getTextureData(t,e){return e?this.packedTextureDataCache.get(t):this.unpackedTextureDataCache.get(t)}setTextureData(t,e,r=!1){ur.verbose("WebGLSessionHandler","Storing Texture data in cache"),r?this.packedTextureDataCache.set(t,e):this.unpackedTextureDataCache.set(t,e)}dispose(){this.programManager.dispose(),this.textureManager.clearActiveTextures(),this.packedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.packedTextureDataCache=new Map,this.unpackedTextureDataCache.forEach(t=>this.textureManager.releaseTexture(t,!0)),this.unpackedTextureDataCache=new Map}resolve(t,e,r){let n=FU(t,e,p4);return{impl:n.opImpl,context:n.opInit?n.opInit(t,r):t}}}});function Yz(t){let e=0;for(;e<t.length&&t[e]();++e);return e-1}var Q1,Zz=ee(()=>{"use strict";Ha(),Vd(),Vd(),go(),Q1=class{constructor(t,e){this.frameBufferBound=!1,this.itemsToPoll=[],this.gl=t,this.version=e,this.getExtensions(),this.vertexbuffer=this.createVertexbuffer(),this.framebuffer=this.createFramebuffer(),this.queryVitalParameters()}allocateTexture(t,e,r,n){let o=this.gl,a=o.createTexture();o.bindTexture(o.TEXTURE_2D,a),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MIN_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_MAG_FILTER,o.NEAREST),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_S,o.CLAMP_TO_EDGE),o.texParameteri(o.TEXTURE_2D,o.TEXTURE_WRAP_T,o.CLAMP_TO_EDGE);let u=n?r.encode(n,t*e):null;return o.texImage2D(o.TEXTURE_2D,0,r.internalFormat,t,e,0,r.format,r.textureType,u),this.checkError(),a}updateTexture(t,e,r,n,o){let a=this.gl;a.bindTexture(a.TEXTURE_2D,t);let u=n.encode(o,e*r);a.texSubImage2D(a.TEXTURE_2D,0,0,0,e,r,n.format,n.textureType,u),this.checkError()}attachFramebuffer(t,e,r){let n=this.gl;n.bindTexture(n.TEXTURE_2D,t),n.bindFramebuffer(n.FRAMEBUFFER,this.framebuffer),n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,t,0),this.checkError(),n.viewport(0,0,e,r),n.scissor(0,0,e,r)}readTexture(t,e,r,n,o,a){let u=this.gl;a||(a=1),this.frameBufferBound||this.attachFramebuffer(t,e,r);let s=this.getEncoder(o,a),l=s.allocate(e*r);return u.bindTexture(u.TEXTURE_2D,t),u.framebufferTexture2D(u.FRAMEBUFFER,u.COLOR_ATTACHMENT0,u.TEXTURE_2D,t,0),u.readPixels(0,0,e,r,u.RGBA,s.textureType,l),this.checkError(),s.decode(l,n)}isFramebufferReady(){return!0}getActiveTexture(){let t=this.gl;return`TEXTURE${t.getParameter(this.gl.ACTIVE_TEXTURE)-t.TEXTURE0}`}getTextureBinding(){return this.gl.getParameter(this.gl.TEXTURE_BINDING_2D)}getFramebufferBinding(){return this.gl.getParameter(this.gl.FRAMEBUFFER_BINDING)}setVertexAttributes(t,e){let r=this.gl;r.vertexAttribPointer(t,3,r.FLOAT,!1,20,0),r.enableVertexAttribArray(t),e!==-1&&(r.vertexAttribPointer(e,2,r.FLOAT,!1,20,12),r.enableVertexAttribArray(e)),this.checkError()}createProgram(t,e){let r=this.gl,n=r.createProgram();return r.attachShader(n,t),r.attachShader(n,e),r.linkProgram(n),n}compileShader(t,e){let r=this.gl,n=r.createShader(e);if(!n)throw new Error(`createShader() returned null with type ${e}`);if(r.shaderSource(n,t),r.compileShader(n),r.getShaderParameter(n,r.COMPILE_STATUS)===!1)throw new Error(`Failed to compile shader: ${r.getShaderInfoLog(n)}
Shader source:
${t}`);return n}deleteShader(t){this.gl.deleteShader(t)}bindTextureToUniform(t,e,r){let n=this.gl;n.activeTexture(n.TEXTURE0+e),this.checkError(),n.bindTexture(n.TEXTURE_2D,t),this.checkError(),n.uniform1i(r,e),this.checkError()}draw(){this.gl.drawArrays(this.gl.TRIANGLE_STRIP,0,4),this.checkError()}checkError(){if(Fr.debug){let t=this.gl,e=t.getError(),r="";switch(e){case t.NO_ERROR:return;case t.INVALID_ENUM:r="INVALID_ENUM";break;case t.INVALID_VALUE:r="INVALID_VALUE";break;case t.INVALID_OPERATION:r="INVALID_OPERATION";break;case t.INVALID_FRAMEBUFFER_OPERATION:r="INVALID_FRAMEBUFFER_OPERATION";break;case t.OUT_OF_MEMORY:r="OUT_OF_MEMORY";break;case t.CONTEXT_LOST_WEBGL:r="CONTEXT_LOST_WEBGL";break;default:r=`Unknown WebGL Error: ${e.toString(16)}`}throw new Error(r)}}deleteTexture(t){this.gl.deleteTexture(t)}deleteProgram(t){this.gl.deleteProgram(t)}getEncoder(t,e,r=0){if(this.version===2)return new r3(this.gl,e);switch(t){case"float":return r===1||this.isRenderFloat32Supported?new R1(this.gl,e):new R1(this.gl,e,this.textureHalfFloatExtension.HALF_FLOAT_OES);case"int":throw new Error("not implemented");case"byte":return new n3(this.gl,e);default:throw new Error(`Invalid dataType: ${t}`)}}clearActiveTextures(){let t=this.gl;for(let e=0;e<this.maxTextureImageUnits;++e)t.activeTexture(t.TEXTURE0+e),t.bindTexture(t.TEXTURE_2D,null)}dispose(){if(this.disposed)return;let t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(this.framebuffer),t.bindBuffer(t.ARRAY_BUFFER,null),t.deleteBuffer(this.vertexbuffer),t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,null),t.finish(),this.disposed=!0}createDefaultGeometry(){return new Float32Array([-1,1,0,0,1,-1,-1,0,0,0,1,1,0,1,1,1,-1,0,1,0])}createVertexbuffer(){let t=this.gl,e=t.createBuffer();if(!e)throw new Error("createBuffer() returned null");let r=this.createDefaultGeometry();return t.bindBuffer(t.ARRAY_BUFFER,e),t.bufferData(t.ARRAY_BUFFER,r,t.STATIC_DRAW),this.checkError(),e}createFramebuffer(){let t=this.gl.createFramebuffer();if(!t)throw new Error("createFramebuffer returned null");return t}queryVitalParameters(){let t=this.gl;if(this.isFloatTextureAttachableToFrameBuffer=this.checkFloatTextureAttachableToFrameBuffer(),this.isRenderFloat32Supported=this.checkRenderFloat32(),this.isFloat32DownloadSupported=this.checkFloat32Download(),this.version===1&&!this.textureHalfFloatExtension&&!this.isRenderFloat32Supported)throw new Error("both float32 and float16 TextureType are not supported");this.isBlendSupported=!this.isRenderFloat32Supported||this.checkFloat32Blend(),this.maxTextureSize=t.getParameter(t.MAX_TEXTURE_SIZE),this.maxTextureImageUnits=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),this.version}getExtensions(){this.version===2?(this.colorBufferFloatExtension=this.gl.getExtension("EXT_color_buffer_float"),this.disjointTimerQueryWebgl2Extension=this.gl.getExtension("EXT_disjoint_timer_query_webgl2")):(this.textureFloatExtension=this.gl.getExtension("OES_texture_float"),this.textureHalfFloatExtension=this.gl.getExtension("OES_texture_half_float"))}checkFloatTextureAttachableToFrameBuffer(){let t=this.gl,e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e);let r=this.version===2?t.RGBA32F:t.RGBA;t.texImage2D(t.TEXTURE_2D,0,r,1,1,0,t.RGBA,t.FLOAT,null);let n=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,n),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0);let o=t.checkFramebufferStatus(t.FRAMEBUFFER)===t.FRAMEBUFFER_COMPLETE;return t.bindTexture(t.TEXTURE_2D,null),t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteTexture(e),t.deleteFramebuffer(n),o}checkRenderFloat32(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension)return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Download(){if(this.version===2){if(!this.colorBufferFloatExtension)return!1}else if(!this.textureFloatExtension||!this.gl.getExtension("WEBGL_color_buffer_float"))return!1;return this.isFloatTextureAttachableToFrameBuffer}checkFloat32Blend(){let t=this.gl,e,r,n,o,a;try{e=t.createTexture(),r=t.createFramebuffer(),t.bindTexture(t.TEXTURE_2D,e);let u=this.version===2?t.RGBA32F:t.RGBA;return t.texImage2D(t.TEXTURE_2D,0,u,1,1,0,t.RGBA,t.FLOAT,null),t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0),t.enable(t.BLEND),n=t.createShader(t.VERTEX_SHADER),!n||(t.shaderSource(n,"void main(){}"),t.compileShader(n),o=t.createShader(t.FRAGMENT_SHADER),!o)||(t.shaderSource(o,"precision highp float;void main(){gl_FragColor=vec4(0.5);}"),t.compileShader(o),a=t.createProgram(),!a)?!1:(t.attachShader(a,n),t.attachShader(a,o),t.linkProgram(a),t.useProgram(a),t.drawArrays(t.POINTS,0,1),t.getError()===t.NO_ERROR)}finally{t.disable(t.BLEND),a&&t.deleteProgram(a),n&&t.deleteShader(n),o&&t.deleteShader(o),r&&(t.bindFramebuffer(t.FRAMEBUFFER,null),t.deleteFramebuffer(r)),e&&(t.bindTexture(t.TEXTURE_2D,null),t.deleteTexture(e))}}beginTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension,r=t.createQuery();return t.beginQuery(e.TIME_ELAPSED_EXT,r),r}else throw new Error("WebGL1 profiling currently not supported.")}endTimer(){if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let t=this.gl,e=this.disjointTimerQueryWebgl2Extension;t.endQuery(e.TIME_ELAPSED_EXT);return}else throw new Error("WebGL1 profiling currently not supported")}isTimerResultAvailable(t){let e=!1,r=!1;if(this.version===2&&this.disjointTimerQueryWebgl2Extension){let n=this.gl,o=this.disjointTimerQueryWebgl2Extension;e=n.getQueryParameter(t,n.QUERY_RESULT_AVAILABLE),r=n.getParameter(o.GPU_DISJOINT_EXT)}else throw new Error("WebGL1 profiling currently not supported");return e&&!r}getTimerResult(t){let e=0;if(this.version===2){let r=this.gl;e=r.getQueryParameter(t,r.QUERY_RESULT),r.deleteQuery(t)}else throw new Error("WebGL1 profiling currently not supported");return e/1e6}waitForQueryAndGetTime(t){return U(this,null,function*(){return yield hD(()=>this.isTimerResultAvailable(t)),this.getTimerResult(t)})}createAndWaitForFence(){return U(this,null,function*(){let t=this.createFence(this.gl);return this.pollFence(t)})}createFence(t){let e,r=t,n=r.fenceSync(r.SYNC_GPU_COMMANDS_COMPLETE,0);return t.flush(),n===null?e=()=>!0:e=()=>{let o=r.clientWaitSync(n,0,0);return o===r.ALREADY_SIGNALED||o===r.CONDITION_SATISFIED},{query:n,isFencePassed:e}}pollFence(t){return U(this,null,function*(){return new Promise(e=>{this.addItemToPoll(()=>t.isFencePassed(),()=>e())})})}pollItems(){let t=Yz(this.itemsToPoll.map(e=>e.isDoneFn));for(let e=0;e<=t;++e){let{resolveFn:r}=this.itemsToPoll[e];r()}this.itemsToPoll=this.itemsToPoll.slice(t+1)}addItemToPoll(t,e){return U(this,null,function*(){this.itemsToPoll.push({isDoneFn:t,resolveFn:e}),!(this.itemsToPoll.length>1)&&(yield hD(()=>(this.pollItems(),this.itemsToPoll.length===0)))})}}});function S4(t){let e;if((!t||t==="webgl2")&&"webgl2"in Va?e=Va.webgl2:(!t||t==="webgl")&&"webgl"in Va&&(e=Va.webgl),!e)try{let n=Qz();e=mO(n,t)}catch{let n=Kz();e=mO(n,t)}t=t||e.version===1?"webgl":"webgl2";let r=e.gl;return Va[t]=e,r.isContextLost()?(delete Va[t],S4(t)):(r.disable(r.DEPTH_TEST),r.disable(r.STENCIL_TEST),r.disable(r.BLEND),r.disable(r.DITHER),r.disable(r.POLYGON_OFFSET_FILL),r.disable(r.SAMPLE_COVERAGE),r.enable(r.SCISSOR_TEST),r.enable(r.CULL_FACE),r.cullFace(r.BACK),e)}function mO(t,e){let r={alpha:!1,depth:!1,antialias:!1,stencil:!1,preserveDrawingBuffer:!1,premultipliedAlpha:!1,failIfMajorPerformanceCaveat:!1},n,o=r;if((!e||e==="webgl2")&&(n=t.getContext("webgl2",o),n))try{return new Q1(n,2)}catch(a){ur.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl2'. Error: ${a}`)}if((!e||e==="webgl")&&(n=t.getContext("webgl",o)||t.getContext("experimental-webgl",o),n))try{return new Q1(n,1)}catch(a){ur.warning("GlContextFactory",`failed to create WebGLContext using contextId 'webgl' or 'experimental-webgl'. Error: ${a}`)}throw new Error("WebGL is not supported")}function Kz(){if(typeof document>"u")throw new TypeError("failed to create canvas: document is not supported");let t=document.createElement("canvas");return t.width=1,t.height=1,t}function Qz(){if(typeof OffscreenCanvas>"u")throw new TypeError("failed to create offscreen canvas: OffscreenCanvas is not supported");return new OffscreenCanvas(1,1)}var Va,Jz=ee(()=>{"use strict";wi(),Zz(),Va={}}),D4,eG=ee(()=>{"use strict";Ha(),wi(),Xz(),Jz(),D4=class{get contextId(){return Fr.webgl.contextId}set contextId(t){Fr.webgl.contextId=t}get matmulMaxBatchSize(){return Fr.webgl.matmulMaxBatchSize}set matmulMaxBatchSize(t){Fr.webgl.matmulMaxBatchSize=t}get textureCacheMode(){return Fr.webgl.textureCacheMode}set textureCacheMode(t){Fr.webgl.textureCacheMode=t}get pack(){return Fr.webgl.pack}set pack(t){Fr.webgl.pack=t}get async(){return Fr.webgl.async}set async(t){Fr.webgl.async=t}initialize(){try{return this.glContext=S4(this.contextId),typeof this.matmulMaxBatchSize!="number"&&(this.matmulMaxBatchSize=16),typeof this.textureCacheMode!="string"&&(this.textureCacheMode="full"),typeof this.pack!="boolean"&&(this.pack=!1),typeof this.async!="boolean"&&(this.async=!1),ur.setWithEnv(Fr),Fr.webgl.context||Object.defineProperty(Fr.webgl,"context",{value:this.glContext.gl}),ur.verbose("WebGLBackend",`Created WebGLContext: ${typeof this.glContext} with matmulMaxBatchSize: ${this.matmulMaxBatchSize}; textureCacheMode: ${this.textureCacheMode}; pack: ${this.pack}; async: ${this.async}.`),!0}catch(t){return ur.warning("WebGLBackend",`Unable to initialize WebGLBackend. ${t}`),!1}}createSessionHandler(t){return new A4(this,t)}dispose(){this.glContext.dispose()}}});function C4(t){return U(this,null,function*(){if(t){let e=typeof t=="string"?[t]:t;for(let r of e){let n=py.get(r);if(n)return n;let o=yield tG(r);if(o)return o}}else return C4(["webgl"]);throw new Error("no available backend to use")})}function tG(t){return U(this,null,function*(){let e=O4;if(typeof e[t]<"u"&&rG(e[t])){let r=e[t],n=r.initialize();if(typeof n=="object"&&"then"in n&&(n=yield n),n)return py.set(t,r),r}})}function rG(t){let e=t;return"initialize"in e&&typeof e.initialize=="function"&&"createSessionHandler"in e&&typeof e.createSessionHandler=="function"&&"dispose"in e&&typeof e.dispose=="function"}var py,O4,nG=ee(()=>{"use strict";eG(),py=new Map,O4={webgl:new D4}}),yO,P4,iG=ee(()=>{"use strict";wi(),yO=class{constructor(t,e){this.op=t,this.node=e}},P4=class{constructor(t,e,r){this.graph=t,this.profiler=r,this.initialize(e)}initialize(t){this.profiler.event("session","ExecutionPlan.initialize",()=>{let e=this.graph.getNodes();if(e.length!==t.length)throw new Error("The size of nodes and OPs do not match.");this._ops=t.map((r,n)=>new yO(r,e[n])),this.reset(),this._starter=[],this._ops.forEach((r,n)=>{let o=!0;for(let a of r.node.inputs)if(!this._values[a]&&this.graph.getInputIndices().indexOf(a)===-1){o=!1;break}o&&this._starter.push(n)})})}reset(){this._values=this.graph.getValues().map(t=>t.tensor)}execute(t,e){return U(this,null,function*(){return this.profiler.event("session","ExecutionPlan.execute",()=>U(this,null,function*(){this.reset();let r=t.createInferenceHandler(),n=this.graph.getInputIndices();if(e.length!==n.length)throw new Error(`number of input tensors don't match the number of inputs to the model: actual: ${e.length} expected: ${n.length}`);e.forEach((i,c)=>{let f=n[c];this._values[f]=i});let o=this._starter.slice(0),a=this.graph.getValues(),u=this.graph.getNodes(),s=0;for(;s<o.length;){let i=o[s++],c=this._ops[i],f=c.node.inputs.map(m=>this._values[m]);if(f.indexOf(void 0)!==-1)throw new Error(`unresolved input detected: op: ${c.node}`);let d=f;ur.verbose("ExecPlan",`Runing op:${c.node.name} (${d.map((m,v)=>`'${c.node.inputs[v]}': ${m.type}[${m.dims.join(",")}]`).join(", ")})`);let h=yield this.profiler.event("node",c.node.name,()=>U(this,null,function*(){return c.op.impl(r,d,c.op.context)}));if(h.length!==c.node.outputs.length)throw new Error("the size of output does not match model definition.");h.forEach((m,v)=>{let x=c.node.outputs[v];if(this._values[x])throw new Error(`output [${x}] already has value: op:${c.node.name}`);this._values[x]=m});let p=new Set;h.forEach((m,v)=>{let x=c.node.outputs[v];for(let y of a[x].to){let _=u[y],I=!0;for(let C of _.inputs)if(!this._values[C]){I=!1;break}I&&p.add(y)}}),o.push(...p)}let l=[];for(let i=0;i<this.graph.getOutputIndices().length;i++){let c=this.graph.getOutputIndices()[i],f=this._values[c];if(f===void 0)throw new Error(`required output [${c}] does not have value`);c===0?yield f.getData():f.data,l.push(f)}return ur.verbose("ExecPlan","disposing of inferenceHandler"),r.dispose(),l}))})}}}),We,On,J1,oG=ee(()=>{"use strict";Hd(),We=Ks(Cc()),Js(),ht(),On=bt.experimental.fbs,J1=class wc{constructor(e){if(this._attributes=new Map,e!=null){for(let r of e)r instanceof We.onnx.AttributeProto?this._attributes.set(r.name,[wc.getValue(r),wc.getType(r)]):r instanceof On.Attribute&&this._attributes.set(r.name(),[wc.getValue(r),wc.getType(r)]);if(this._attributes.size<e.length)throw new Error("duplicated attribute names")}}set(e,r,n){this._attributes.set(e,[n,r])}delete(e){this._attributes.delete(e)}getFloat(e,r){return this.get(e,"float",r)}getInt(e,r){return this.get(e,"int",r)}getString(e,r){return this.get(e,"string",r)}getTensor(e,r){return this.get(e,"tensor",r)}getFloats(e,r){return this.get(e,"floats",r)}getInts(e,r){return this.get(e,"ints",r)}getStrings(e,r){return this.get(e,"strings",r)}getTensors(e,r){return this.get(e,"tensors",r)}get(e,r,n){let o=this._attributes.get(e);if(o===void 0){if(n!==void 0)return n;throw new Error(`required attribute not found: ${e}`)}if(o[1]!==r)throw new Error(`type mismatch: expected ${r} but got ${o[1]}`);return o[0]}static getType(e){let r=e instanceof We.onnx.AttributeProto?e.type:e.type();switch(r){case We.onnx.AttributeProto.AttributeType.FLOAT:return"float";case We.onnx.AttributeProto.AttributeType.INT:return"int";case We.onnx.AttributeProto.AttributeType.STRING:return"string";case We.onnx.AttributeProto.AttributeType.TENSOR:return"tensor";case We.onnx.AttributeProto.AttributeType.FLOATS:return"floats";case We.onnx.AttributeProto.AttributeType.INTS:return"ints";case We.onnx.AttributeProto.AttributeType.STRINGS:return"strings";case We.onnx.AttributeProto.AttributeType.TENSORS:return"tensors";default:throw new Error(`attribute type is not supported yet: ${We.onnx.AttributeProto.AttributeType[r]}`)}}static getValue(e){let r=e instanceof We.onnx.AttributeProto?e.type:e.type();if(r===We.onnx.AttributeProto.AttributeType.GRAPH||r===We.onnx.AttributeProto.AttributeType.GRAPHS)throw new Error("graph attribute is not supported yet");let n=this.getValueNoCheck(e);if(r===We.onnx.AttributeProto.AttributeType.INT&&Li.isLong(n))return Li.longToNumber(n);if(r===We.onnx.AttributeProto.AttributeType.INTS){let o=n,a=new Array(o.length);for(let u=0;u<o.length;u++){let s=o[u];a[u]=Li.longToNumber(s)}return a}if(r===We.onnx.AttributeProto.AttributeType.TENSOR)return e instanceof We.onnx.AttributeProto?Nn.fromProto(n):Nn.fromOrtTensor(n);if(r===We.onnx.AttributeProto.AttributeType.TENSORS){if(e instanceof We.onnx.AttributeProto)return n.map(o=>Nn.fromProto(o));if(e instanceof On.Attribute)return n.map(o=>Nn.fromOrtTensor(o))}return r===We.onnx.AttributeProto.AttributeType.STRING&&e instanceof We.onnx.AttributeProto?C1(n):r===We.onnx.AttributeProto.AttributeType.STRINGS&&e instanceof We.onnx.AttributeProto?n.map(C1):n}static getValueNoCheck(e){return e instanceof We.onnx.AttributeProto?this.getValueNoCheckFromOnnxFormat(e):this.getValueNoCheckFromOrtFormat(e)}static getValueNoCheckFromOnnxFormat(e){switch(e.type){case We.onnx.AttributeProto.AttributeType.FLOAT:return e.f;case We.onnx.AttributeProto.AttributeType.INT:return e.i;case We.onnx.AttributeProto.AttributeType.STRING:return e.s;case We.onnx.AttributeProto.AttributeType.TENSOR:return e.t;case We.onnx.AttributeProto.AttributeType.GRAPH:return e.g;case We.onnx.AttributeProto.AttributeType.FLOATS:return e.floats;case We.onnx.AttributeProto.AttributeType.INTS:return e.ints;case We.onnx.AttributeProto.AttributeType.STRINGS:return e.strings;case We.onnx.AttributeProto.AttributeType.TENSORS:return e.tensors;case We.onnx.AttributeProto.AttributeType.GRAPHS:return e.graphs;default:throw new Error(`unsupported attribute type: ${We.onnx.AttributeProto.AttributeType[e.type]}`)}}static getValueNoCheckFromOrtFormat(e){switch(e.type()){case On.AttributeType.FLOAT:return e.f();case On.AttributeType.INT:return e.i();case On.AttributeType.STRING:return e.s();case On.AttributeType.TENSOR:return e.t();case On.AttributeType.GRAPH:return e.g();case On.AttributeType.FLOATS:return e.floatsArray();case On.AttributeType.INTS:{let r=[];for(let n=0;n<e.intsLength();n++)r.push(e.ints(n));return r}case On.AttributeType.STRINGS:{let r=[];for(let n=0;n<e.stringsLength();n++)r.push(e.strings(n));return r}case On.AttributeType.TENSORS:{let r=[];for(let n=0;n<e.tensorsLength();n++)r.push(e.tensors(n));return r}default:throw new Error(`unsupported attribute type: ${On.AttributeType[e.type()]}`)}}}}),b1,pc,ey,po,w1,vO,aG=ee(()=>{"use strict";oG(),Hd(),b1=Ks(Cc()),Js(),ht(),pc=bt.experimental.fbs,ey={from:(t,e)=>new vO(t,e)},po=class{constructor(t){this._from=void 0,this._to=[],this.tensor=void 0,this.type=void 0,t&&(this.type=Pn.tensorValueTypeFromProto(t.type.tensorType))}get from(){return this._from}get to(){return this._to}},w1=class{constructor(t,e){t instanceof b1.onnx.NodeProto?(this.name=t.name,this.opType=t.opType,this.attributes=new J1(t.attribute)):t instanceof pc.Node&&(this.name=e??t.name(),this.opType=t.opType(),this.attributes=new J1(Pn.tensorAttributesFromORTFormat(t))),this.inputs=[],this.outputs=[],this.executeNode=!0}},vO=class{constructor(t,e){if(!t)throw new TypeError("graph is empty");this.buildGraph(t),this.transformGraph(e),this.checkIsAcyclic()}getInputIndices(){return this._allInputIndices}getInputNames(){return this._allInputNames}getOutputIndices(){return this._allOutputIndices}getOutputNames(){return this._allOutputNames}getValues(){return this._allData}getNodes(){return this._nodes}buildGraph(t){if(t instanceof b1.onnx.GraphProto)this.buildGraphFromOnnxFormat(t);else if(t instanceof pc.Graph)this.buildGraphFromOrtFormat(t);else throw new TypeError("Graph type is not supported.")}buildGraphFromOnnxFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map;if(!t.input)throw new Error("missing information in graph: input");let n=[];for(let o of t.input){if(e.has(o.name))throw new Error(`duplicated input name: ${o.name}`);let a=this._allData.push(new po(o))-1;e.set(o.name,a),n.push(o.name)}if(!t.initializer)throw new Error("missing information in graph: initializer");for(let o of t.initializer){let a=e.get(o.name);if(a===void 0){let u=new po;u.type={shape:{dims:Pn.tensorDimsFromProto(o.dims)},tensorType:Pn.tensorDataTypeFromProto(o.dataType)},a=this._allData.push(u)-1,e.set(o.name,a)}this._allData[a]._from=-1,this._allData[a].tensor=Nn.fromProto(o)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(n[o]));if(!t.output)throw new Error("missing information in graph: output");for(let o of t.output){if(e.has(o.name))throw new Error(`duplicated output name: ${o.name}`);let a=this._allData.push(new po(o))-1;e.set(o.name,a),this._allOutputIndices.push(a),this._allOutputNames.push(o.name)}if(!t.node)throw new Error("missing information in graph: node");for(let o of t.node){if(!o.name)for(let u=0;;u++){let s=`unnamed_${o.opType}_${u}`;if(!r.has(s)){o.name=s;break}}if(r.has(o.name))throw new Error(`duplicated node name: ${o.name}`);let a=this._nodes.push(new w1(o))-1;r.set(o.name,a)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.node[o];if(!u.output)throw new Error(`missing output for node: ${u.name}`);for(let s of u.output){let l=e.get(s);if(typeof l>"u"&&(l=this._allData.push(new po)-1,e.set(s,l)),a.outputs.push(l),this._allData[l]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${l}`);if(this._allData[l]._from=o,u.opType==="Constant"){if(!u.attribute||u.attribute.length!==1||!u.attribute[0].t)throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(!u.output||u.output.length!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[l]._from=-1,this._allData[l].tensor=Nn.fromProto(u.attribute[0].t)}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.node[o];if(!u.input)throw new Error(`missing input for node: ${u.name}`);for(let s of u.input){let l=e.get(s);if(typeof l>"u"){if(s===""&&(u.input.length===3||u.input.length===4)&&u.opType==="Resize")continue;throw new Error(`unrecognized input '${s}' for node: ${u.name}`)}a.inputs.push(l),this._allData[l]._to.push(o)}}return!0}buildGraphFromOrtFormat(t){let e=new Map;this._allData=[],this._allInputIndices=[],this._allInputNames=[],this._allOutputIndices=[],this._allOutputNames=[],this._nodes=[];let r=new Map,n=[];for(let o=0;o<t.inputsLength();o++){let a=t.inputs(o);if(e.has(a))throw new Error(`duplicated input name: ${a}`);for(let u=0;u<t.nodeArgsLength();u++)if(t.nodeArgs(u)?.name()===a){let s=new po;if(t.nodeArgs(u)?.type()?.valueType()!==pc.TypeInfoValue.tensor_type)throw new Error("Unexpected value type for the nodeArg.");let l=t.nodeArgs(u).type().value(new pc.TensorTypeAndShape),i=Pn.tensorDataTypeFromProto(l.elemType()),c=l.shape(),f=[];for(let h=0;h<c.dimLength();h++)f.push(Li.longToNumber(c.dim(h).value().dimValue()));s.type={shape:{dims:f},tensorType:i};let d=this._allData.push(s)-1;e.set(a,d),n.push(a)}}for(let o=0;o<t.initializersLength();o++){let a=t.initializers(o),u=e.get(a.name());if(u===void 0){let s=new po,l=Pn.tensorDimsFromORTFormat(a),i=Pn.tensorDataTypeFromProto(a.dataType());s.type={shape:{dims:l},tensorType:i},u=this._allData.push(s)-1,e.set(a.name(),u)}this._allData[u]._from=-1,this._allData[u].tensor=Nn.fromOrtTensor(a)}for(let o=0;o<this._allData.length;o++)this._allData[o].tensor||(this._allInputIndices.push(o),this._allInputNames.push(n[o]));for(let o=0;o<t.outputsLength();o++){let a=t.outputs(o);if(e.has(a))throw new Error(`duplicated output name: ${a}`);let u=this._allData.push(new po)-1;e.set(a,u),this._allOutputIndices.push(u),this._allOutputNames.push(a)}if(!t.nodes)throw new Error("missing information in graph: node");for(let o=0;o<t.nodesLength();o++){let a=t.nodes(o),u=a.name();if(!u)for(let l=0;u=`unnamed_${a.opType()}_${l}`,!!r.has(u);l++);if(r.has(u))throw new Error(`duplicated node name: ${u}`);let s=this._nodes.push(new w1(a,u))-1;r.set(u,s)}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.nodes(o);if(u==null)throw new Error(`No node exists at index ${o}`);if(u?.outputsLength()===0)throw new Error(`missing output for node: ${u.name}`);for(let s=0;s<u?.outputsLength();s++){let l=u?.outputs(s),i=e.get(l);if(typeof i>"u"&&(i=this._allData.push(new po)-1,e.set(l,i)),a.outputs.push(i),this._allData[i]._from!==void 0)throw new Error(`multiple nodes output to one data value: ${i}`);if(this._allData[i]._from=o,u.opType()==="Constant"){if(u.attributesLength()!==1||!u.attributes(0).t())throw new Error("missing attributes or missing tensor value in attributes for this Constant operator");if(u.outputsLength()!==1)throw new Error("missing output or incorrect number of outputs for this Constant operator");a.outputs.pop(),a.executeNode=!1,this._allData[i]._from=-1,this._allData[i].tensor=Nn.fromOrtTensor(u.attributes(0).t())}}}for(let o=0;o<this._nodes.length;o++){let a=this._nodes[o],u=t.nodes(o);if(u.inputsLength()===0)throw new Error(`missing input for node: ${u.name}`);for(let s=0;s<u.inputsLength();s++){let l=u.inputs(s),i=e.get(l);if(typeof i>"u")throw new Error(`unrecognized input '${l}' for node: ${u.name()}`);a.inputs.push(i),this._allData[i]._to.push(o)}}}checkIsAcyclic(){let t=new Set;this._allInputIndices.forEach(n=>{this._allData[n]._to.forEach(o=>{t.add(o)})});let e=Array.from(t),r=new Array(this._nodes.length).fill("white");for(;e.length>0;){let n=e.pop();r[n]==="gray"?r[n]="black":(e.push(n),r[n]="gray",this._nodes[n].outputs.forEach(o=>{let a=this._allData[o];if(typeof a.tensor<"u")throw new Error("node outputs should not be initialized");if(a._from!==n)throw new Error("from property of the Value object doesn't match index of Node being processed");a._to.forEach(u=>{if(r[u]==="gray")throw new Error("model graph is cyclic");r[u]==="white"&&e.push(u)})}))}}transformGraph(t){this.removeAllIdentityNodes(),this.removeAllDropoutNodes(),this.fuseConvActivationNodes(),t&&t.transformGraph(this),this.finalizeGraph()}finalizeGraph(){let t=0,e=new Array(this._nodes.length,0),r=0;for(let n=0;n<this._nodes.length;n++)e[n]=r,this._nodes[n].executeNode?(r!==n&&(this._nodes[r]=this._nodes[n]),r++):this._nodes[n].outputs.forEach(o=>{this._allData[o]._from=-2});this._nodes.splice(r,this._nodes.length-r);for(let n=0;n<this._allData.length;n++){let o=this._allData[n];o._from!==void 0&&o._from!==-1&&o._from!==-2&&(o._from=e[o._from]);for(let a=0;a<o._to.length;a++)if(o._to[a]>=0)o._to[a]=e[o._to[a]];else throw new Error("Trying to update a removed node")}t=0;for(let n=0;n<this._allData.length;n++){if(this._allData[n].from===-2&&this._allOutputIndices.indexOf(n+t)===-1){t++,this._allData.splice(n,1),n--;continue}if(t>0){let o=-1;this._allData[n].from!==void 0&&this._allData[n].from!==-1?(o=this._nodes[this._allData[n].from].outputs.indexOf(n+t),o!==-1&&(this._nodes[this._allData[n].from].outputs[o]=n)):(o=this._allInputIndices.indexOf(n+t),o!==-1&&(this._allInputIndices[o]=n)),this._allData[n].to.forEach(a=>{o=this._nodes[a].inputs.indexOf(n+t),o!==-1&&(this._nodes[a].inputs[o]=n)}),this._allData[n].to.length===0&&(o=this._allOutputIndices.indexOf(n+t),o!==-1&&(this._allOutputIndices[o]=n))}}}deleteNode(t){let e=this._nodes[t];if(e.outputs.length>1){for(let u=1;u<e.outputs.length;u++)if(this._allData[e.outputs[u]].to.length>0)throw new Error("Node deletion with more than one output connected to other nodes is not supported. ")}e.executeNode=!1;let r=e.inputs[0],n=e.outputs[0],o=this._allData[n].to;for(let u=0;u<e.inputs.length;u++){let s=this._allData[e.inputs[u]].to.indexOf(t);if(s===-1)throw new Error("The Value object doesn't have the current Node in it's 'to' property ");this._allData[e.inputs[u]].to.splice(s,1)}this._allData[n]._to=[];let a=this._allOutputIndices.indexOf(n);if(a!==-1&&(this._allOutputIndices[a]=r),o&&o.length>0)for(let u of o){let s=this._nodes[u].inputs.indexOf(n);if(s===-1)throw new Error("The Node object doesn't have the output Value in it's 'inputs' property ");this._nodes[u].inputs[s]=r,this._allData[r].to.push(u)}}removeAllDropoutNodes(){let t=0;for(let e of this._nodes){if(e.opType==="Dropout"){if(e.inputs.length!==1)throw new Error("Dropout nodes should only contain one input. ");if(e.outputs.length!==1&&e.outputs.length!==2)throw new Error("Dropout nodes should contain either 1 or 2 output(s)");if(e.outputs.length===2&&this._allData[e.outputs[1]]._to.length!==0)throw new Error("Dropout nodes's second output should not be referenced by other nodes");this.deleteNode(t)}t++}}removeAllIdentityNodes(){let t=0;for(let e of this._nodes)e.opType==="Identity"&&this.deleteNode(t),t++}isActivation(t){switch(t.opType){case"Relu":case"Sigmoid":case"Clip":return!0;default:return!1}}fuseConvActivationNodes(){for(let t of this._nodes)if(t.opType==="Conv"){let e=this._allData[t.outputs[0]]._to;if(e.length===1&&this.isActivation(this._nodes[e[0]])){let r=this._nodes[e[0]];if(r.opType==="Clip")if(r.inputs.length===1)try{t.attributes.set("activation_params","floats",[r.attributes.getFloat("min"),r.attributes.getFloat("max")])}catch{t.attributes.set("activation_params","floats",[Ac,Sc])}else if(r.inputs.length>=3&&this._allData[r.inputs[1]].tensor!==void 0&&this._allData[r.inputs[2]].tensor!==void 0)t.attributes.set("activation_params","floats",[this._allData[r.inputs[1]].tensor.floatData[0],this._allData[r.inputs[2]].tensor.floatData[0]]);else continue;t.attributes.set("activation","string",r.opType),this.deleteNode(e[0])}}}}}),bO,wO,M4,sG=ee(()=>{"use strict";sy(),aG(),Hd(),bO=Ks(Cc()),ht(),wO=bt.experimental.fbs,M4=class{constructor(){}load(t,e,r){if(!r)try{this.loadFromOnnxFormat(t,e);return}catch(n){if(r!==void 0)throw n}this.loadFromOrtFormat(t,e)}loadFromOnnxFormat(t,e){let r=bO.onnx.ModelProto.decode(t);if(Li.longToNumber(r.irVersion)<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=r.opsetImport.map(n=>({domain:n.domain,version:Li.longToNumber(n.version)})),this._graph=ey.from(r.graph,e)}loadFromOrtFormat(t,e){let r=new $.ByteBuffer(t),n=wO.InferenceSession.getRootAsInferenceSession(r).model();if(Li.longToNumber(n.irVersion())<3)throw new Error("only support ONNX model with IR_VERSION>=3");this._opsets=[];for(let o=0;o<n.opsetImportLength();o++){let a=n.opsetImport(o);this._opsets.push({domain:a?.domain(),version:Li.longToNumber(a.version())})}this._graph=ey.from(n.graph(),e)}get graph(){return this._graph}get opsets(){return this._opsets}}}),N4,uG=ee(()=>{"use strict";nG(),iG(),wi(),sG(),N4=class{constructor(t={}){this._initialized=!1,this.backendHint=t.backendHint,this.profiler=zO.create(t.profiler),this.context={profiler:this.profiler,graphInputTypes:[],graphInputDims:[]}}get inputNames(){return this._model.graph.getInputNames()}get outputNames(){return this._model.graph.getOutputNames()}startProfiling(){this.profiler.start()}endProfiling(){this.profiler.stop()}loadModel(t,e,r){return U(this,null,function*(){yield this.profiler.event("session","Session.loadModel",()=>U(this,null,function*(){let n=yield C4(this.backendHint);if(this.sessionHandler=n.createSessionHandler(this.context),this._model=new M4,typeof t=="string"){let o=t.endsWith(".ort");if(typeof process<"u"&&process.versions&&process.versions.node){let a=yield(void 0)(t);this.initialize(a,o)}else{let a=yield(yield fetch(t)).arrayBuffer();this.initialize(new Uint8Array(a),o)}}else if(ArrayBuffer.isView(t))this.initialize(t);else{let o=new Uint8Array(t,e||0,r||t.byteLength);this.initialize(o)}}))})}initialize(t,e){if(this._initialized)throw new Error("already initialized");this.profiler.event("session","Session.initialize",()=>{let r=this.sessionHandler.transformGraph?this.sessionHandler:void 0;this._model.load(t,r,e),this.sessionHandler.onGraphInitialized&&this.sessionHandler.onGraphInitialized(this._model.graph),this.initializeOps(this._model.graph),this._executionPlan=new P4(this._model.graph,this._ops,this.profiler)}),this._initialized=!0}run(t){return U(this,null,function*(){if(!this._initialized)throw new Error("session not initialized yet");return this.profiler.event("session","Session.run",()=>U(this,null,function*(){let e=this.normalizeAndValidateInputs(t),r=yield this._executionPlan.execute(this.sessionHandler,e);return this.createOutput(r)}))})}normalizeAndValidateInputs(t){let e=this._model.graph.getInputNames();if(Array.isArray(t)){if(t.length!==e.length)throw new Error(`incorrect input array length: expected ${e.length} but got ${t.length}`)}else{if(t.size!==e.length)throw new Error(`incorrect input map size: expected ${e.length} but got ${t.size}`);let r=new Array(t.size),n=0;for(let o=0;o<e.length;++o){let a=t.get(e[o]);if(!a)throw new Error(`missing input tensor for: '${name}'`);r[n++]=a}t=r}if(!this.context.graphInputTypes||this.context.graphInputTypes.length===0||!this.context.graphInputDims||this.context.graphInputDims.length===0){let r=this._model.graph.getInputIndices(),n=this._model.graph.getValues(),o=new Array(r.length);for(let a=0;a<r.length;++a){let u=n[r[a]];o[a]=u.type.shape.dims,this.context.graphInputTypes.push(u.type.tensorType),this.context.graphInputDims.push(t[a].dims)}this.validateInputTensorDims(o,t,!0)}else this.validateInputTensorDims(this.context.graphInputDims,t,!1);return this.validateInputTensorTypes(this.context.graphInputTypes,t),t}validateInputTensorTypes(t,e){for(let r=0;r<e.length;r++){let n=t[r],o=e[r].type;if(n!==o)throw new Error(`input tensor[${r}] check failed: expected type '${n}' but got ${o}`)}}validateInputTensorDims(t,e,r){for(let n=0;n<e.length;n++){let o=t[n],a=e[n].dims;if(!this.compareTensorDims(o,a,r))throw new Error(`input tensor[${n}] check failed: expected shape '[${o.join(",")}]' but got [${a.join(",")}]`)}}compareTensorDims(t,e,r){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n]&&(!r||t[n]!==0))return!1;return!0}createOutput(t){let e=this._model.graph.getOutputNames();if(t.length!==e.length)throw new Error("expected number of outputs do not match number of generated outputs");let r=new Map;for(let n=0;n<e.length;++n)r.set(e[n],t[n]);return r}initializeOps(t){let e=t.getNodes();this._ops=new Array(e.length);for(let r=0;r<e.length;r++)this._ops[r]=this.sessionHandler.resolve(e[r],this._model.opsets,t)}}}),R4,lG=ee(()=>{"use strict";Ha(),Js(),R4=class{constructor(t){this.session=t,this.inputNames=this.session.inputNames,this.outputNames=this.session.outputNames}dispose(){return U(this,null,function*(){})}run(t,e,r){return U(this,null,function*(){let n=new Map;for(let u in t)if(Object.hasOwnProperty.call(t,u)){let s=t[u];n.set(u,new Nn(s.dims,s.type,void 0,void 0,s.data))}let o=yield this.session.run(n),a={};return o.forEach((u,s)=>{a[s]=new Mn(u.type,u.data,u.dims)}),a})}startProfiling(){this.session.startProfiling()}endProfiling(){this.session.endProfiling()}}}),F4={};_O(F4,{onnxjsBackend:()=>k4});var xO,k4,cG=ee(()=>{"use strict";uG(),lG(),xO=class{init(){return U(this,null,function*(){})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new N4(e);return typeof t=="string"?yield r.loadModel(t):yield r.loadModel(t),new R4(r)})}},k4=new xO});Ha();Ha();Ha();var fG="1.17.1",Epe=UO;{let t=(cG(),xU(F4)).onnxjsBackend;ty("webgl",t,-10)}Object.defineProperty(Fr.versions,"web",{value:fG,enumerable:!0});var Sy=Object.defineProperty,dG=Object.getOwnPropertyDescriptor,hG=Object.getOwnPropertyNames,pG=Object.prototype.hasOwnProperty,st=(t,e)=>()=>(t&&(e=t(t=0)),e),lu=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Vc=(t,e)=>{for(var r in e)Sy(t,r,{get:e[r],enumerable:!0})},gG=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of hG(e))!pG.call(t,o)&&o!==r&&Sy(t,o,{get:()=>e[o],enumerable:!(n=dG(e,o))||n.enumerable});return t},ou=t=>gG(Sy({},"__esModule",{value:!0}),t),Nc,Yo,Bc,Dy,Cy=st(()=>{"use strict";Nc=new Map,Yo=[],Bc=(t,e,r)=>{if(e&&typeof e.init=="function"&&typeof e.createInferenceSessionHandler=="function"){let n=Nc.get(t);if(n===void 0)Nc.set(t,{backend:e,priority:r});else{if(n.priority>r)return;if(n.priority===r&&n.backend!==e)throw new Error(`cannot register backend "${t}" using priority ${r}`)}if(r>=0){let o=Yo.indexOf(t);o!==-1&&Yo.splice(o,1);for(let a=0;a<Yo.length;a++)if(Nc.get(Yo[a]).priority<=r){Yo.splice(a,0,t);return}Yo.push(t)}return}throw new TypeError("not a valid backend")},Dy=t=>U(void 0,null,function*(){let e=t.length===0?Yo:t,r=[];for(let n of e){let o=Nc.get(n);if(o){if(o.initialized)return o.backend;if(o.aborted)continue;let a=!!o.initPromise;try{return a||(o.initPromise=o.backend.init(n)),yield o.initPromise,o.initialized=!0,o.backend}catch(u){a||r.push({name:n,err:u}),o.aborted=!0}finally{delete o.initPromise}}}throw new Error(`no available backend found. ERR: ${r.map(n=>`[${n.name}] ${n.err}`).join(", ")}`)})}),mG=st(()=>{"use strict";Cy()}),Q4,yG=st(()=>{"use strict";Q4="1.17.1"}),gy,au,J4=st(()=>{"use strict";yG(),gy="warning",au={wasm:{},webgl:{},webgpu:{},versions:{common:Q4},set logLevel(t){if(t!==void 0){if(typeof t!="string"||["verbose","info","warning","error","fatal"].indexOf(t)===-1)throw new Error(`Unsupported logging level: ${t}`);gy=t}},get logLevel(){return gy}},Object.defineProperty(au,"logLevel",{enumerable:!0})}),Yt,vG=st(()=>{"use strict";J4(),Yt=au}),eM,tM,bG=st(()=>{"use strict";eM=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);r.width=t.dims[3],r.height=t.dims[2];let n=r.getContext("2d");if(n!=null){let o,a;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[3]):(o=t.dims[3],a=t.dims[2]);let u=e?.format!==void 0?e.format:"RGB",s=e?.norm,l,i;s===void 0||s.mean===void 0?l=[255,255,255,255]:typeof s.mean=="number"?l=[s.mean,s.mean,s.mean,s.mean]:(l=[s.mean[0],s.mean[1],s.mean[2],0],s.mean[3]!==void 0&&(l[3]=s.mean[3])),s===void 0||s.bias===void 0?i=[0,0,0,0]:typeof s.bias=="number"?i=[s.bias,s.bias,s.bias,s.bias]:(i=[s.bias[0],s.bias[1],s.bias[2],0],s.bias[3]!==void 0&&(i[3]=s.bias[3]));let c=a*o,f=0,d=c,h=c*2,p=-1;u==="RGBA"?(f=0,d=c,h=c*2,p=c*3):u==="RGB"?(f=0,d=c,h=c*2):u==="RBG"&&(f=0,h=c,d=c*2);for(let m=0;m<a;m++)for(let v=0;v<o;v++){let x=(t.data[f++]-i[0])*l[0],y=(t.data[d++]-i[1])*l[1],_=(t.data[h++]-i[2])*l[2],I=p===-1?255:(t.data[p++]-i[3])*l[3];n.fillStyle="rgba("+x+","+y+","+_+","+I+")",n.fillRect(v,m,1,1)}if("toDataURL"in r)return r.toDataURL();throw new Error("toDataURL is not supported")}else throw new Error("Can not access image data")},tM=(t,e)=>{let r=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d"),n;if(r!=null){let o,a,u;e?.tensorLayout!==void 0&&e.tensorLayout==="NHWC"?(o=t.dims[2],a=t.dims[1],u=t.dims[3]):(o=t.dims[3],a=t.dims[2],u=t.dims[1]);let s=e!==void 0&&e.format!==void 0?e.format:"RGB",l=e?.norm,i,c;l===void 0||l.mean===void 0?i=[255,255,255,255]:typeof l.mean=="number"?i=[l.mean,l.mean,l.mean,l.mean]:(i=[l.mean[0],l.mean[1],l.mean[2],255],l.mean[3]!==void 0&&(i[3]=l.mean[3])),l===void 0||l.bias===void 0?c=[0,0,0,0]:typeof l.bias=="number"?c=[l.bias,l.bias,l.bias,l.bias]:(c=[l.bias[0],l.bias[1],l.bias[2],0],l.bias[3]!==void 0&&(c[3]=l.bias[3]));let f=a*o;if(e!==void 0&&(e.format!==void 0&&u===4&&e.format!=="RGBA"||u===3&&e.format!=="RGB"&&e.format!=="BGR"))throw new Error("Tensor format doesn't match input tensor dims");let d=4,h=0,p=1,m=2,v=3,x=0,y=f,_=f*2,I=-1;s==="RGBA"?(x=0,y=f,_=f*2,I=f*3):s==="RGB"?(x=0,y=f,_=f*2):s==="RBG"&&(x=0,_=f,y=f*2),n=r.createImageData(o,a);for(let C=0;C<a*o;h+=d,p+=d,m+=d,v+=d,C++)n.data[h]=(t.data[x++]-c[0])*i[0],n.data[p]=(t.data[y++]-c[1])*i[1],n.data[m]=(t.data[_++]-c[2])*i[2],n.data[v]=I===-1?255:(t.data[I++]-c[3])*i[3]}else throw new Error("Can not access image data");return n}}),Wd,rM,nM,iM,oM,wG=st(()=>{"use strict";Oy(),Wd=(t,e)=>{if(t===void 0)throw new Error("Image buffer must be defined");if(e.height===void 0||e.width===void 0)throw new Error("Image height and width must be defined");if(e.tensorLayout==="NHWC")throw new Error("NHWC Tensor layout is not supported yet");let{height:r,width:n}=e,o=e.norm??{mean:255,bias:0},a,u;typeof o.mean=="number"?a=[o.mean,o.mean,o.mean,o.mean]:a=[o.mean[0],o.mean[1],o.mean[2],o.mean[3]??255],typeof o.bias=="number"?u=[o.bias,o.bias,o.bias,o.bias]:u=[o.bias[0],o.bias[1],o.bias[2],o.bias[3]??0];let s=e.format!==void 0?e.format:"RGBA",l=e.tensorFormat!==void 0&&e.tensorFormat!==void 0?e.tensorFormat:"RGB",i=r*n,c=l==="RGBA"?new Float32Array(i*4):new Float32Array(i*3),f=4,d=0,h=1,p=2,m=3,v=0,x=i,y=i*2,_=-1;s==="RGB"&&(f=3,d=0,h=1,p=2,m=-1),l==="RGBA"?_=i*3:l==="RBG"?(v=0,y=i,x=i*2):l==="BGR"&&(y=0,x=i,v=i*2);for(let I=0;I<i;I++,d+=f,p+=f,h+=f,m+=f)c[v++]=(t[d]+u[0])/a[0],c[x++]=(t[h]+u[1])/a[1],c[y++]=(t[p]+u[2])/a[2],_!==-1&&m!==-1&&(c[_++]=(t[m]+u[3])/a[3]);return l==="RGBA"?new xi("float32",c,[1,4,r,n]):new xi("float32",c,[1,3,r,n])},rM=(t,e)=>U(void 0,null,function*(){let r=typeof HTMLImageElement<"u"&&t instanceof HTMLImageElement,n=typeof ImageData<"u"&&t instanceof ImageData,o=typeof ImageBitmap<"u"&&t instanceof ImageBitmap,a=typeof t=="string",u,s=e??{},l=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},i=c=>c instanceof HTMLCanvasElement||c instanceof OffscreenCanvas?c.getContext("2d"):null;if(r){let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;if(e!==void 0&&e.resizedHeight!==void 0&&e.resizedWidth!==void 0&&(d=e.resizedHeight,h=e.resizedWidth),e!==void 0){if(s=e,e.tensorFormat!==void 0)throw new Error("Image input config format must be RGBA for HTMLImageElement");s.tensorFormat="RGBA",s.height=d,s.width=h}else s.tensorFormat="RGBA",s.height=d,s.width=h;f.drawImage(t,0,0),u=f.getImageData(0,0,h,d).data}else throw new Error("Can not access image data")}else if(n){let c,f;if(e!==void 0&&e.resizedWidth!==void 0&&e.resizedHeight!==void 0?(c=e.resizedHeight,f=e.resizedWidth):(c=t.height,f=t.width),e!==void 0&&(s=e),s.format="RGBA",s.height=c,s.width=f,e!==void 0){let d=l();d.width=f,d.height=c;let h=i(d);if(h!=null)h.putImageData(t,0,0),u=h.getImageData(0,0,f,c).data;else throw new Error("Can not access image data")}else u=t.data}else if(o){if(e===void 0)throw new Error("Please provide image config with format for Imagebitmap");let c=l();c.width=t.width,c.height=t.height;let f=i(c);if(f!=null){let d=t.height,h=t.width;return f.drawImage(t,0,0,h,d),u=f.getImageData(0,0,h,d).data,s.height=d,s.width=h,Wd(u,s)}else throw new Error("Can not access image data")}else{if(a)return new Promise((c,f)=>{let d=l(),h=i(d);if(!t||!h)return f();let p=new Image;p.crossOrigin="Anonymous",p.src=t,p.onload=()=>{d.width=p.width,d.height=p.height,h.drawImage(p,0,0,d.width,d.height);let m=h.getImageData(0,0,d.width,d.height);s.height=d.height,s.width=d.width,c(Wd(m.data,s))}});throw new Error("Input data provided is not supported - aborted tensor creation")}if(u!==void 0)return Wd(u,s);throw new Error("Input data provided is not supported - aborted tensor creation")}),nM=(t,e)=>{let{width:r,height:n,download:o,dispose:a}=e,u=[1,n,r,4];return new xi({location:"texture",type:"float32",texture:t,dims:u,download:o,dispose:a})},iM=(t,e)=>{let{dataType:r,dims:n,download:o,dispose:a}=e;return new xi({location:"gpu-buffer",type:r??"float32",gpuBuffer:t,dims:n,download:o,dispose:a})},oM=(t,e,r)=>new xi({location:"cpu-pinned",type:t,data:e,dims:r??[e.length]})}),$c,Yd,my,aM,xG=st(()=>{"use strict";$c=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["float16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),Yd=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),my=!1,aM=()=>{if(!my){my=!0;let t=typeof BigInt64Array<"u"&&typeof BigInt64Array.from=="function",e=typeof BigUint64Array<"u"&&typeof BigUint64Array.from=="function";t&&($c.set("int64",BigInt64Array),Yd.set(BigInt64Array,"int64")),e&&($c.set("uint64",BigUint64Array),Yd.set(BigUint64Array,"uint64"))}}}),sM,uM,_G=st(()=>{"use strict";Oy(),sM=t=>{let e=1;for(let r=0;r<t.length;r++){let n=t[r];if(typeof n!="number"||!Number.isSafeInteger(n))throw new TypeError(`dims[${r}] must be an integer, got: ${n}`);if(n<0)throw new RangeError(`dims[${r}] must be a non-negative integer, got: ${n}`);e*=n}return e},uM=(t,e)=>{switch(t.location){case"cpu":return new xi(t.type,t.data,e);case"cpu-pinned":return new xi({location:"cpu-pinned",data:t.data,type:t.type,dims:e});case"texture":return new xi({location:"texture",texture:t.texture,type:t.type,dims:e});case"gpu-buffer":return new xi({location:"gpu-buffer",gpuBuffer:t.gpuBuffer,type:t.type,dims:e});default:throw new Error(`tensorReshape: tensor location ${t.location} is not supported`)}}}),xi,Oy=st(()=>{"use strict";bG(),wG(),xG(),_G(),xi=class{constructor(t,e,r){aM();let n,o;if(typeof t=="object"&&"location"in t)switch(this.dataLocation=t.location,n=t.type,o=t.dims,t.location){case"cpu-pinned":{let u=$c.get(n);if(!u)throw new TypeError(`unsupported type "${n}" to create tensor from pinned buffer`);if(!(t.data instanceof u))throw new TypeError(`buffer should be of type ${u.name}`);this.cpuData=t.data;break}case"texture":{if(n!=="float32")throw new TypeError(`unsupported type "${n}" to create tensor from texture`);this.gpuTextureData=t.texture,this.downloader=t.download,this.disposer=t.dispose;break}case"gpu-buffer":{if(n!=="float32"&&n!=="float16"&&n!=="int32"&&n!=="int64"&&n!=="uint32"&&n!=="bool")throw new TypeError(`unsupported type "${n}" to create tensor from gpu buffer`);this.gpuBufferData=t.gpuBuffer,this.downloader=t.download,this.disposer=t.dispose;break}default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let u,s;if(typeof t=="string")if(n=t,s=r,t==="string"){if(!Array.isArray(e))throw new TypeError("A string tensor's data must be a string array.");u=e}else{let l=$c.get(t);if(l===void 0)throw new TypeError(`Unsupported tensor type: ${t}.`);if(Array.isArray(e)){if(t==="float16")throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");t==="uint64"||t==="int64"?u=l.from(e,BigInt):u=l.from(e)}else if(e instanceof l)u=e;else throw new TypeError(`A ${n} tensor's data must be type of ${l}`)}else if(s=e,Array.isArray(t)){if(t.length===0)throw new TypeError("Tensor type cannot be inferred from an empty array.");let l=typeof t[0];if(l==="string")n="string",u=t;else if(l==="boolean")n="bool",u=Uint8Array.from(t);else throw new TypeError(`Invalid element type of data array: ${l}.`)}else{let l=Yd.get(t.constructor);if(l===void 0)throw new TypeError(`Unsupported type for tensor data: ${t.constructor}.`);n=l,u=t}if(s===void 0)s=[u.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");o=s,this.cpuData=u,this.dataLocation="cpu"}let a=sM(o);if(this.cpuData&&a!==this.cpuData.length)throw new Error(`Tensor's size(${a}) does not match data length(${this.cpuData.length}).`);this.type=n,this.dims=o,this.size=a}static fromImage(t,e){return U(this,null,function*(){return rM(t,e)})}static fromTexture(t,e){return nM(t,e)}static fromGpuBuffer(t,e){return iM(t,e)}static fromPinnedBuffer(t,e,r){return oM(t,e,r)}toDataURL(t){return eM(this,t)}toImageData(t){return tM(this,t)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}getData(t){return U(this,null,function*(){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":{if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let e=yield this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=e,t&&this.disposer&&(this.disposer(),this.disposer=void 0),e}finally{this.isDownloading=!1}}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}})}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if(this.dataLocation==="none")throw new Error("The tensor is disposed.")}reshape(t){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return uM(this,t)}}}),fn,Py=st(()=>{"use strict";Oy(),fn=xi}),Ey,yy,su,uu,lM=st(()=>{"use strict";J4(),Ey=(t,e)=>{au.wasm.trace&&console.timeStamp(`${t}::ORT::${e}`)},yy=(t,e)=>{let r=new Error().stack?.split(/\r\n|\r|\n/g)||[],n=!1;for(let o=0;o<r.length;o++){if(n&&!r[o].includes("TRACE_FUNC")){let a=`FUNC_${t}::${r[o].trim().split(" ")[1]}`;e&&(a+=`::${e}`),Ey("CPU",a);return}r[o].includes("TRACE_FUNC")&&(n=!0)}},su=t=>{au.wasm.trace&&yy("BEGIN",t)},uu=t=>{au.wasm.trace&&yy("END",t)}}),cM,EG=st(()=>{"use strict";Cy(),Py(),lM(),cM=class fM{constructor(e){this.handler=e}run(e,r,n){return U(this,null,function*(){su();let o={},a={};if(typeof e!="object"||e===null||e instanceof fn||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let u=!0;if(typeof r=="object"){if(r===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof fn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(r.length===0)throw new TypeError("'fetches' cannot be an empty array.");u=!1;for(let i of r){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(this.outputNames.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);o[i]=null}if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(r);for(let f of this.outputNames)if(c.indexOf(f)!==-1){let d=r[f];(d===null||d instanceof fn)&&(i=!0,u=!1,o[f]=d)}if(i){if(typeof n=="object"&&n!==null)a=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else a=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of this.inputNames)if(typeof e[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(u)for(let i of this.outputNames)o[i]=null;let s=yield this.handler.run(e,o,a),l={};for(let i in s)if(Object.hasOwnProperty.call(s,i)){let c=s[i];c instanceof fn?l[i]=c:l[i]=new fn(c.type,c.data,c.dims)}return uu(),l})}release(){return U(this,null,function*(){return this.handler.dispose()})}static create(e,r,n,o){return U(this,null,function*(){su();let a,u={};if(typeof e=="string"){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof Uint8Array){if(a=e,typeof r=="object"&&r!==null)u=r;else if(typeof r<"u")throw new TypeError("'options' must be an object.")}else if(e instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&e instanceof SharedArrayBuffer){let i=e,c=0,f=e.byteLength;if(typeof r=="object"&&r!==null)u=r;else if(typeof r=="number"){if(c=r,!Number.isSafeInteger(c))throw new RangeError("'byteOffset' must be an integer.");if(c<0||c>=i.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${i.byteLength}).`);if(f=e.byteLength-c,typeof n=="number"){if(f=n,!Number.isSafeInteger(f))throw new RangeError("'byteLength' must be an integer.");if(f<=0||c+f>i.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${i.byteLength-c}].`);if(typeof o=="object"&&o!==null)u=o;else if(typeof o<"u")throw new TypeError("'options' must be an object.")}else if(typeof n<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof r<"u")throw new TypeError("'options' must be an object.");a=new Uint8Array(i,c,f)}else throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");let s=(u.executionProviders||[]).map(i=>typeof i=="string"?i:i.name),l=yield(yield Dy(s)).createInferenceSessionHandler(a,u);return uu(),new fM(l)})}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}}),dM,TG=st(()=>{"use strict";EG(),dM=cM}),IG=st(()=>{"use strict"}),L4,hM,AG=st(()=>{"use strict";Cy(),Py(),L4="Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.",hM=class pM{constructor(e,r,n){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=n}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static create(e,r){return U(this,null,function*(){let n=e.evalModel||"",o=e.optimizerModel||"",a=r||{},u=(a.executionProviders||[]).map(l=>typeof l=="string"?l:l.name),s=yield Dy(u);if(s.createTrainingSessionHandler){let l=yield s.createTrainingSessionHandler(e.checkpointState,e.trainModel,n,o,a);return new pM(l,!!e.optimizerModel,!!e.evalModel)}else throw new Error(L4)})}typeNarrowingForRunStep(e,r,n,o,a){let u={},s={};if(typeof n!="object"||n===null||n instanceof fn||Array.isArray(n))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if(typeof o=="object"){if(o===null)throw new TypeError("Unexpected argument[1]: cannot be null.");if(o instanceof fn)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(o)){if(o.length===0)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let i of o){if(typeof i!="string")throw new TypeError("'fetches' must be a string array or an object.");if(r.indexOf(i)===-1)throw new RangeError(`'fetches' contains invalid output name: ${i}.`);u[i]=null}if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let i=!1,c=Object.getOwnPropertyNames(o);for(let f of r)if(c.indexOf(f)!==-1){let d=o[f];(d===null||d instanceof fn)&&(i=!0,l=!1,u[f]=d)}if(i){if(typeof a=="object"&&a!==null)s=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else s=o}}else if(typeof o<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let i of e)if(typeof n[i]>"u")throw new Error(`input '${i}' is missing in 'feeds'.`);if(l)for(let i of r)u[i]=null;return[u,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let n in e)if(Object.hasOwnProperty.call(e,n)){let o=e[n];o instanceof fn?r[n]=o:r[n]=new fn(o.type,o.data,o.dims)}return r}lazyResetGrad(){return U(this,null,function*(){yield this.handler.lazyResetGrad()})}runTrainStep(e,r,n){return U(this,null,function*(){let[o,a]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,n),u=yield this.handler.runTrainStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)})}runOptimizerStep(e){return U(this,null,function*(){if(this.hasOptimizerModel)yield this.handler.runOptimizerStep(e||{});else throw new Error("This TrainingSession has no OptimizerModel loaded.")})}runEvalStep(e,r,n){return U(this,null,function*(){if(this.hasEvalModel){let[o,a]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,n),u=yield this.handler.runEvalStep(e,o,a);return this.convertHandlerReturnTypeToMapOfTensors(u)}else throw new Error("This TrainingSession has no EvalModel loaded.")})}getParametersSize(e=!0){return U(this,null,function*(){return this.handler.getParametersSize(e)})}loadParametersBuffer(e,r=!0){return U(this,null,function*(){let n=yield this.getParametersSize(r);if(e.length!==4*n)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)})}getContiguousParameters(e=!0){return U(this,null,function*(){return this.handler.getContiguousParameters(e)})}release(){return U(this,null,function*(){return this.handler.dispose()})}}}),gM,SG=st(()=>{"use strict";AG(),gM=hM}),DG={};Vc(DG,{InferenceSession:()=>dM,TRACE:()=>Ey,TRACE_FUNC_BEGIN:()=>su,TRACE_FUNC_END:()=>uu,Tensor:()=>fn,TrainingSession:()=>gM,env:()=>Yt,registerBackend:()=>Bc});var cu=st(()=>{"use strict";mG(),vG(),TG(),Py(),lM(),IG(),SG()}),My={};Vc(My,{createReadStream:()=>vM,readFile:()=>mM,readFileSync:()=>yM});var mM,yM,vM,bM=st(()=>{mM=void 0,yM=void 0,vM=void 0}),Ny={};Vc(Ny,{join:()=>wM});var wM,xM=st(()=>{wM=void 0}),CG=lu((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(o={}){var a=o,u,s;a.ready=new Promise((w,T)=>{u=w,s=T});var l=Object.assign({},a),i="./this.program",c=typeof window=="object",f=typeof importScripts=="function",d=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",h="",p,m,v;if(d){var x=(bM(),ou(My)),y=(xM(),ou(Ny));h=f?y.dirname(h)+"/":__dirname+"/",p=(w,T)=>(w=xt(w)?new URL(w):y.normalize(w),x.readFileSync(w,T?void 0:"utf8")),v=w=>(w=p(w,!0),w.buffer||(w=new Uint8Array(w)),w),m=(w,T,A,M=!0)=>{w=xt(w)?new URL(w):y.normalize(w),x.readFile(w,M?void 0:"utf8",(G,Q)=>{G?A(G):T(M?Q.buffer:Q)})},!a.thisProgram&&1<process.argv.length&&(i=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(c||f)&&(f?h=self.location.href:typeof document<"u"&&document.currentScript&&(h=document.currentScript.src),n&&(h=n),h.indexOf("blob:")!==0?h=h.substr(0,h.replace(/[?#].*/,"").lastIndexOf("/")+1):h="",p=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.send(null),T.responseText},f&&(v=w=>{var T=new XMLHttpRequest;return T.open("GET",w,!1),T.responseType="arraybuffer",T.send(null),new Uint8Array(T.response)}),m=(w,T,A)=>{var M=new XMLHttpRequest;M.open("GET",w,!0),M.responseType="arraybuffer",M.onload=()=>{M.status==200||M.status==0&&M.response?T(M.response):A()},M.onerror=A,M.send(null)});var _=console.log.bind(console),I=console.error.bind(console);Object.assign(a,l),l=null,typeof WebAssembly!="object"&&Ee("no native wasm support detected");var C,V=!1,z,W,k,X,ke;function me(){var w=C.buffer;a.HEAP8=z=new Int8Array(w),a.HEAP16=new Int16Array(w),a.HEAPU8=W=new Uint8Array(w),a.HEAPU16=new Uint16Array(w),a.HEAP32=k=new Int32Array(w),a.HEAPU32=X=new Uint32Array(w),a.HEAPF32=new Float32Array(w),a.HEAPF64=ke=new Float64Array(w)}var ye=[],Z=[],he=[],pt=0,qe=null,Ue=null;function Ee(w){throw w="Aborted("+w+")",I(w),V=!0,w=new WebAssembly.RuntimeError(w+". Build with -sASSERTIONS for more info."),s(w),w}var wt=w=>w.startsWith("data:application/octet-stream;base64,"),xt=w=>w.startsWith("file://"),Ct;if(Ct="ort-wasm.wasm",!wt(Ct)){var gr=Ct;Ct=a.locateFile?a.locateFile(gr,h):h+gr}function It(w){if(v)return v(w);throw"both async and sync fetching of the wasm failed"}function lr(w){if(c||f){if(typeof fetch=="function"&&!xt(w))return fetch(w,{credentials:"same-origin"}).then(T=>{if(!T.ok)throw"failed to load wasm binary file at '"+w+"'";return T.arrayBuffer()}).catch(()=>It(w));if(m)return new Promise((T,A)=>{m(w,M=>T(new Uint8Array(M)),A)})}return Promise.resolve().then(()=>It(w))}function Gt(w,T,A){return lr(w).then(M=>WebAssembly.instantiate(M,T)).then(M=>M).then(A,M=>{I(`failed to asynchronously prepare wasm: ${M}`),Ee(M)})}function Lr(w,T){var A=Ct;return typeof WebAssembly.instantiateStreaming!="function"||wt(A)||xt(A)||d||typeof fetch!="function"?Gt(A,w,T):fetch(A,{credentials:"same-origin"}).then(M=>WebAssembly.instantiateStreaming(M,w).then(T,function(G){return I(`wasm streaming compile failed: ${G}`),I("falling back to ArrayBuffer instantiation"),Gt(A,w,T)}))}var Ae,Se={919888:(w,T,A,M)=>{if(typeof a>"u"||!a.za)return 1;if(w=xr(w>>>0),w.startsWith("./")&&(w=w.substring(2)),w=a.za.get(w),!w)return 2;if(T>>>=0,A>>>=0,T+A>w.byteLength)return 3;try{return W.set(w.subarray(T,T+A),M>>>0>>>0),0}catch{return 4}}};function wr(w){this.xa=w-24,this.Ha=function(T){X[this.xa+4>>>2>>>0]=T},this.Ga=function(T){X[this.xa+8>>>2>>>0]=T},this.Aa=function(T,A){this.Fa(),this.Ha(T),this.Ga(A)},this.Fa=function(){X[this.xa+16>>>2>>>0]=0}}var Kt=0,dn=0,hn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,qn=(w,T,A)=>{T>>>=0;var M=T+A;for(A=T;w[A]&&!(A>=M);)++A;if(16<A-T&&w.buffer&&hn)return hn.decode(w.subarray(T,A));for(M="";T<A;){var G=w[T++];if(G&128){var Q=w[T++]&63;if((G&224)==192)M+=String.fromCharCode((G&31)<<6|Q);else{var le=w[T++]&63;G=(G&240)==224?(G&15)<<12|Q<<6|le:(G&7)<<18|Q<<12|le<<6|w[T++]&63,65536>G?M+=String.fromCharCode(G):(G-=65536,M+=String.fromCharCode(55296|G>>10,56320|G&1023))}}else M+=String.fromCharCode(G)}return M},xr=(w,T)=>(w>>>=0)?qn(W,w,T):"",_r=w=>{for(var T=0,A=0;A<w.length;++A){var M=w.charCodeAt(A);127>=M?T++:2047>=M?T+=2:55296<=M&&57343>=M?(T+=4,++A):T+=3}return T},pn=(w,T,A,M)=>{if(A>>>=0,!(0<M))return 0;var G=A;M=A+M-1;for(var Q=0;Q<w.length;++Q){var le=w.charCodeAt(Q);if(55296<=le&&57343>=le){var Ve=w.charCodeAt(++Q);le=65536+((le&1023)<<10)|Ve&1023}if(127>=le){if(A>=M)break;T[A++>>>0]=le}else{if(2047>=le){if(A+1>=M)break;T[A++>>>0]=192|le>>6}else{if(65535>=le){if(A+2>=M)break;T[A++>>>0]=224|le>>12}else{if(A+3>=M)break;T[A++>>>0]=240|le>>18,T[A++>>>0]=128|le>>12&63}T[A++>>>0]=128|le>>6&63}T[A++>>>0]=128|le&63}}return T[A>>>0]=0,A-G},Br=w=>w%4===0&&(w%100!==0||w%400===0),Xn=[0,31,60,91,121,152,182,213,244,274,305,335],$i=[0,31,59,90,120,151,181,212,243,273,304,334],Er=w=>{var T=_r(w)+1,A=ji(T);return A&&pn(w,W,A,T),A},gn=[],$r={},mn=()=>{if(!yn){var w={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:i||"./this.program"},T;for(T in $r)$r[T]===void 0?delete w[T]:w[T]=$r[T];var A=[];for(T in w)A.push(`${T}=${w[T]}`);yn=A}return yn},yn,Zr=[null,[],[]],Yn=[31,29,31,30,31,30,31,31,30,31,30,31],Zn=[31,28,31,30,31,30,31,31,30,31,30,31];function vn(w){var T=Array(_r(w)+1);return pn(w,T,0,T.length),T}function Vi(w,T,A,M){function G(O,pe,xe){for(O=typeof O=="number"?O.toString():O||"";O.length<pe;)O=xe[0]+O;return O}function Q(O,pe){return G(O,pe,"0")}function le(O,pe){function xe(ti){return 0>ti?-1:0<ti?1:0}var cr;return(cr=xe(O.getFullYear()-pe.getFullYear()))===0&&(cr=xe(O.getMonth()-pe.getMonth()))===0&&(cr=xe(O.getDate()-pe.getDate())),cr}function Ve(O){switch(O.getDay()){case 0:return new Date(O.getFullYear()-1,11,29);case 1:return O;case 2:return new Date(O.getFullYear(),0,3);case 3:return new Date(O.getFullYear(),0,2);case 4:return new Date(O.getFullYear(),0,1);case 5:return new Date(O.getFullYear()-1,11,31);case 6:return new Date(O.getFullYear()-1,11,30)}}function ut(O){var pe=O.ta;for(O=new Date(new Date(O.ua+1900,0,1).getTime());0<pe;){var xe=O.getMonth(),cr=(Br(O.getFullYear())?Yn:Zn)[xe];if(pe>cr-O.getDate())pe-=cr-O.getDate()+1,O.setDate(1),11>xe?O.setMonth(xe+1):(O.setMonth(0),O.setFullYear(O.getFullYear()+1));else{O.setDate(O.getDate()+pe);break}}return xe=new Date(O.getFullYear()+1,0,4),pe=Ve(new Date(O.getFullYear(),0,4)),xe=Ve(xe),0>=le(pe,O)?0>=le(xe,O)?O.getFullYear()+1:O.getFullYear():O.getFullYear()-1}w>>>=0,T>>>=0,A>>>=0,M>>>=0;var Xe=X[M+40>>>2>>>0];M={Da:k[M>>>2>>>0],Ca:k[M+4>>>2>>>0],va:k[M+8>>>2>>>0],ya:k[M+12>>>2>>>0],wa:k[M+16>>>2>>>0],ua:k[M+20>>>2>>>0],oa:k[M+24>>>2>>>0],ta:k[M+28>>>2>>>0],Ia:k[M+32>>>2>>>0],Ba:k[M+36>>>2>>>0],Ea:Xe?xr(Xe):""},A=xr(A),Xe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var Ye in Xe)A=A.replace(new RegExp(Ye,"g"),Xe[Ye]);var Jn="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),ei="January February March April May June July August September October November December".split(" ");Xe={"%a":O=>Jn[O.oa].substring(0,3),"%A":O=>Jn[O.oa],"%b":O=>ei[O.wa].substring(0,3),"%B":O=>ei[O.wa],"%C":O=>Q((O.ua+1900)/100|0,2),"%d":O=>Q(O.ya,2),"%e":O=>G(O.ya,2," "),"%g":O=>ut(O).toString().substring(2),"%G":O=>ut(O),"%H":O=>Q(O.va,2),"%I":O=>(O=O.va,O==0?O=12:12<O&&(O-=12),Q(O,2)),"%j":O=>{for(var pe=0,xe=0;xe<=O.wa-1;pe+=(Br(O.ua+1900)?Yn:Zn)[xe++]);return Q(O.ya+pe,3)},"%m":O=>Q(O.wa+1,2),"%M":O=>Q(O.Ca,2),"%n":()=>`
`,"%p":O=>0<=O.va&&12>O.va?"AM":"PM","%S":O=>Q(O.Da,2),"%t":()=>"	","%u":O=>O.oa||7,"%U":O=>Q(Math.floor((O.ta+7-O.oa)/7),2),"%V":O=>{var pe=Math.floor((O.ta+7-(O.oa+6)%7)/7);if(2>=(O.oa+371-O.ta-2)%7&&pe++,pe)pe==53&&(xe=(O.oa+371-O.ta)%7,xe==4||xe==3&&Br(O.ua)||(pe=1));else{pe=52;var xe=(O.oa+7-O.ta-1)%7;(xe==4||xe==5&&Br(O.ua%400-1))&&pe++}return Q(pe,2)},"%w":O=>O.oa,"%W":O=>Q(Math.floor((O.ta+7-(O.oa+6)%7)/7),2),"%y":O=>(O.ua+1900).toString().substring(2),"%Y":O=>O.ua+1900,"%z":O=>{O=O.Ba;var pe=0<=O;return O=Math.abs(O)/60,(pe?"+":"-")+("0000"+(O/60*100+O%60)).slice(-4)},"%Z":O=>O.Ea,"%%":()=>"%"},A=A.replace(/%%/g,"\0\0");for(Ye in Xe)A.includes(Ye)&&(A=A.replace(new RegExp(Ye,"g"),Xe[Ye](M)));return A=A.replace(/\0\0/g,"%"),Ye=vn(A),Ye.length>T?0:(z.set(Ye,w>>>0),Ye.length-1)}var be={a:function(w,T,A){throw w>>>=0,new wr(w).Aa(T>>>0,A>>>0),Kt=w,dn++,Kt},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getUTCSeconds(),k[A+4>>>2>>>0]=w.getUTCMinutes(),k[A+8>>>2>>>0]=w.getUTCHours(),k[A+12>>>2>>>0]=w.getUTCDate(),k[A+16>>>2>>>0]=w.getUTCMonth(),k[A+20>>>2>>>0]=w.getUTCFullYear()-1900,k[A+24>>>2>>>0]=w.getUTCDay(),k[A+28>>>2>>>0]=(w.getTime()-Date.UTC(w.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(w,T,A){w=T+2097152>>>0<4194305-!!w?(w>>>0)+4294967296*T:NaN,A>>>=0,w=new Date(1e3*w),k[A>>>2>>>0]=w.getSeconds(),k[A+4>>>2>>>0]=w.getMinutes(),k[A+8>>>2>>>0]=w.getHours(),k[A+12>>>2>>>0]=w.getDate(),k[A+16>>>2>>>0]=w.getMonth(),k[A+20>>>2>>>0]=w.getFullYear()-1900,k[A+24>>>2>>>0]=w.getDay(),k[A+28>>>2>>>0]=(Br(w.getFullYear())?Xn:$i)[w.getMonth()]+w.getDate()-1|0,k[A+36>>>2>>>0]=-(60*w.getTimezoneOffset()),T=new Date(w.getFullYear(),6,1).getTimezoneOffset();var M=new Date(w.getFullYear(),0,1).getTimezoneOffset();k[A+32>>>2>>>0]=(T!=M&&w.getTimezoneOffset()==Math.min(M,T))|0},p:function(w){w>>>=0;var T=new Date(k[w+20>>>2>>>0]+1900,k[w+16>>>2>>>0],k[w+12>>>2>>>0],k[w+8>>>2>>>0],k[w+4>>>2>>>0],k[w>>>2>>>0],0),A=k[w+32>>>2>>>0],M=T.getTimezoneOffset(),G=new Date(T.getFullYear(),6,1).getTimezoneOffset(),Q=new Date(T.getFullYear(),0,1).getTimezoneOffset(),le=Math.min(Q,G);return 0>A?k[w+32>>>2>>>0]=+(G!=Q&&le==M):0<A!=(le==M)&&(G=Math.max(Q,G),T.setTime(T.getTime()+6e4*((0<A?le:G)-M))),k[w+24>>>2>>>0]=T.getDay(),k[w+28>>>2>>>0]=(Br(T.getFullYear())?Xn:$i)[T.getMonth()]+T.getDate()-1|0,k[w>>>2>>>0]=T.getSeconds(),k[w+4>>>2>>>0]=T.getMinutes(),k[w+8>>>2>>>0]=T.getHours(),k[w+12>>>2>>>0]=T.getDate(),k[w+16>>>2>>>0]=T.getMonth(),k[w+20>>>2>>>0]=T.getYear(),w=T.getTime(),isNaN(w)?(k[bn()>>>2>>>0]=61,w=-1):w/=1e3,Kn((Ae=w,1<=+Math.abs(Ae)?0<Ae?+Math.floor(Ae/4294967296)>>>0:~~+Math.ceil((Ae-+(~~Ae>>>0))/4294967296)>>>0:0)),w>>>0},l:function(){return-52},m:function(){},t:function(w,T,A){function M(ut){return(ut=ut.toTimeString().match(/\(([A-Za-z ]+)\)$/))?ut[1]:"GMT"}A>>>=0;var G=new Date().getFullYear(),Q=new Date(G,0,1),le=new Date(G,6,1);G=Q.getTimezoneOffset();var Ve=le.getTimezoneOffset();X[w>>>0>>>2>>>0]=60*Math.max(G,Ve),k[T>>>0>>>2>>>0]=+(G!=Ve),w=M(Q),T=M(le),w=Er(w),T=Er(T),Ve<G?(X[A>>>2>>>0]=w,X[A+4>>>2>>>0]=T):(X[A>>>2>>>0]=T,X[A+4>>>2>>>0]=w)},d:()=>{Ee("")},B:function(w,T,A){w>>>=0,T>>>=0,A>>>=0,gn.length=0;for(var M;M=W[T++>>>0];){var G=M!=105;G&=M!=112,A+=G&&A%8?4:0,gn.push(M==112?X[A>>>2>>>0]:M==105?k[A>>>2>>>0]:ke[A>>>3>>>0]),A+=G?8:4}return Se[w].apply(null,gn)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(w,T,A){return T>>>=0,W.copyWithin(w>>>0>>>0,T>>>0,T+(A>>>0)>>>0)},s:function(w){w>>>=0;var T=W.length;if(4294901760<w)return!1;for(var A=1;4>=A;A*=2){var M=T*(1+.2/A);M=Math.min(M,w+100663296);var G=Math;M=Math.max(w,M);e:{G=(G.min.call(G,4294901760,M+(65536-M%65536)%65536)-C.buffer.byteLength+65535)/65536;try{C.grow(G),me();var Q=1;break e}catch{}Q=void 0}if(Q)return!0}return!1},C:function(w,T){w>>>=0,T>>>=0;var A=0;return mn().forEach((M,G)=>{var Q=T+A;for(G=X[w+4*G>>>2>>>0]=Q,Q=0;Q<M.length;++Q)z[G++>>>0>>>0]=M.charCodeAt(Q);z[G>>>0>>>0]=0,A+=M.length+1}),0},D:function(w,T){w>>>=0,T>>>=0;var A=mn();X[w>>>2>>>0]=A.length;var M=0;return A.forEach(G=>M+=G.length+1),X[T>>>2>>>0]=M,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(w,T,A,M){T>>>=0,A>>>=0,M>>>=0;for(var G=0,Q=0;Q<A;Q++){var le=X[T>>>2>>>0],Ve=X[T+4>>>2>>>0];T+=8;for(var ut=0;ut<Ve;ut++){var Xe=W[le+ut>>>0],Ye=Zr[w];Xe===0||Xe===10?((w===1?_:I)(qn(Ye,0)),Ye.length=0):Ye.push(Xe)}G+=Ve}return X[M>>>2>>>0]=G,0},r:Vi,c:function(w,T,A,M){return Vi(w>>>0,T>>>0,A>>>0,M>>>0)}},oe=function(){function w(A){return oe=A.exports,oe=Hi(),C=oe.K,me(),Z.unshift(oe.L),pt--,pt==0&&(qe!==null&&(clearInterval(qe),qe=null),Ue&&(A=Ue,Ue=null,A())),oe}var T={a:be};if(pt++,a.instantiateWasm)try{return a.instantiateWasm(T,w)}catch(A){I(`Module.instantiateWasm callback failed with error: ${A}`),s(A)}return Lr(T,function(A){w(A.instance)}).catch(s),{}}();a._OrtInit=(w,T)=>(a._OrtInit=oe.M)(w,T),a._OrtGetLastError=(w,T)=>(a._OrtGetLastError=oe.N)(w,T),a._OrtCreateSessionOptions=(w,T,A,M,G,Q,le,Ve,ut,Xe)=>(a._OrtCreateSessionOptions=oe.O)(w,T,A,M,G,Q,le,Ve,ut,Xe),a._OrtAppendExecutionProvider=(w,T)=>(a._OrtAppendExecutionProvider=oe.P)(w,T),a._OrtAddFreeDimensionOverride=(w,T,A)=>(a._OrtAddFreeDimensionOverride=oe.Q)(w,T,A),a._OrtAddSessionConfigEntry=(w,T,A)=>(a._OrtAddSessionConfigEntry=oe.R)(w,T,A),a._OrtReleaseSessionOptions=w=>(a._OrtReleaseSessionOptions=oe.S)(w),a._OrtCreateSession=(w,T,A)=>(a._OrtCreateSession=oe.T)(w,T,A),a._OrtReleaseSession=w=>(a._OrtReleaseSession=oe.U)(w),a._OrtGetInputOutputCount=(w,T,A)=>(a._OrtGetInputOutputCount=oe.V)(w,T,A),a._OrtGetInputName=(w,T)=>(a._OrtGetInputName=oe.W)(w,T),a._OrtGetOutputName=(w,T)=>(a._OrtGetOutputName=oe.X)(w,T),a._OrtFree=w=>(a._OrtFree=oe.Y)(w),a._OrtCreateTensor=(w,T,A,M,G,Q)=>(a._OrtCreateTensor=oe.Z)(w,T,A,M,G,Q),a._OrtGetTensorData=(w,T,A,M,G)=>(a._OrtGetTensorData=oe._)(w,T,A,M,G),a._OrtReleaseTensor=w=>(a._OrtReleaseTensor=oe.$)(w),a._OrtCreateRunOptions=(w,T,A,M)=>(a._OrtCreateRunOptions=oe.aa)(w,T,A,M),a._OrtAddRunConfigEntry=(w,T,A)=>(a._OrtAddRunConfigEntry=oe.ba)(w,T,A),a._OrtReleaseRunOptions=w=>(a._OrtReleaseRunOptions=oe.ca)(w),a._OrtCreateBinding=w=>(a._OrtCreateBinding=oe.da)(w),a._OrtBindInput=(w,T,A)=>(a._OrtBindInput=oe.ea)(w,T,A),a._OrtBindOutput=(w,T,A,M)=>(a._OrtBindOutput=oe.fa)(w,T,A,M),a._OrtClearBoundOutputs=w=>(a._OrtClearBoundOutputs=oe.ga)(w),a._OrtReleaseBinding=w=>(a._OrtReleaseBinding=oe.ha)(w),a._OrtRunWithBinding=(w,T,A,M,G)=>(a._OrtRunWithBinding=oe.ia)(w,T,A,M,G),a._OrtRun=(w,T,A,M,G,Q,le,Ve)=>(a._OrtRun=oe.ja)(w,T,A,M,G,Q,le,Ve),a._OrtEndProfiling=w=>(a._OrtEndProfiling=oe.ka)(w);var bn=()=>(bn=oe.la)(),ji=a._malloc=w=>(ji=a._malloc=oe.ma)(w);a._free=w=>(a._free=oe.na)(w);var Kn=w=>(Kn=oe.pa)(w),Ui=()=>(Ui=oe.qa)(),te=w=>(te=oe.ra)(w),Kr=w=>(Kr=oe.sa)(w);function Hi(){var w=oe;w=Object.assign({},w);var T=M=>()=>M()>>>0,A=M=>G=>M(G)>>>0;return w.la=T(w.la),w.ma=A(w.ma),w.qa=T(w.qa),w.sa=A(w.sa),w}a.stackAlloc=Kr,a.stackSave=Ui,a.stackRestore=te,a.UTF8ToString=xr,a.stringToUTF8=(w,T,A)=>pn(w,W,T,A),a.lengthBytesUTF8=_r;var Tr;Ue=function w(){Tr||Qn(),Tr||(Ue=w)};function Qn(){if(!(0<pt)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var w=a.preRun.shift();ye.unshift(w)}for(;0<ye.length;)ye.shift()(a);if(!(0<pt||Tr||(Tr=!0,a.calledRun=!0,V))){for(;0<Z.length;)Z.shift()(a);for(u(a);0<he.length;)he.shift()(a)}}}return Qn(),o.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),OG=lu(()=>{}),PG=lu(()=>{}),_M={};Vc(_M,{cpus:()=>EM});var EM,MG=st(()=>{EM=void 0}),NG=lu((t,e)=>{"use strict";var r=(()=>{var n=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(n=n||__filename),function(o={}){function a(){return he.buffer!=Ee.buffer&&It(),Ee}function u(){return he.buffer!=Ee.buffer&&It(),wt}function s(){return he.buffer!=Ee.buffer&&It(),xt}function l(){return he.buffer!=Ee.buffer&&It(),Ct}function i(){return he.buffer!=Ee.buffer&&It(),gr}var c=o,f,d;c.ready=new Promise((g,b)=>{f=g,d=b});var h=Object.assign({},c),p="./this.program",m=(g,b)=>{throw b},v=typeof window=="object",x=typeof importScripts=="function",y=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=c.ENVIRONMENT_IS_PTHREAD||!1,I="";function C(g){return c.locateFile?c.locateFile(g,I):I+g}var V,z,W;if(y){var k=(bM(),ou(My)),X=(xM(),ou(Ny));I=x?X.dirname(I)+"/":__dirname+"/",V=(b,E)=>(b=xr(b)?new URL(b):X.normalize(b),k.readFileSync(b,E?void 0:"utf8")),W=b=>(b=V(b,!0),b.buffer||(b=new Uint8Array(b)),b),z=(b,E,S,R=!0)=>{b=xr(b)?new URL(b):X.normalize(b),k.readFile(b,R?void 0:"utf8",(F,q)=>{F?S(F):E(R?q.buffer:q)})},!c.thisProgram&&1<process.argv.length&&(p=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),m=(b,E)=>{throw process.exitCode=b,E},c.inspect=()=>"[Emscripten Module object]";let g;try{g=OG()}catch(b){throw console.error('The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?'),b}global.Worker=g.Worker}else(v||x)&&(x?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),typeof n<"u"&&n&&(I=n),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",y||(V=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.send(null),b.responseText},x&&(W=g=>{var b=new XMLHttpRequest;return b.open("GET",g,!1),b.responseType="arraybuffer",b.send(null),new Uint8Array(b.response)}),z=(g,b,E)=>{var S=new XMLHttpRequest;S.open("GET",g,!0),S.responseType="arraybuffer",S.onload=()=>{S.status==200||S.status==0&&S.response?b(S.response):E()},S.onerror=E,S.send(null)}));y&&typeof performance>"u"&&(global.performance=PG().performance);var ke=console.log.bind(console),me=console.error.bind(console);y&&(ke=(...g)=>k.writeSync(1,g.join(" ")+`
`),me=(...g)=>k.writeSync(2,g.join(" ")+`
`));var ye=ke,Z=me;Object.assign(c,h),h=null,typeof WebAssembly!="object"&&hn("no native wasm support detected");var he,pt,qe=!1,Ue,Ee,wt,xt,Ct,gr;function It(){var g=he.buffer;c.HEAP8=Ee=new Int8Array(g),c.HEAP16=new Int16Array(g),c.HEAPU8=wt=new Uint8Array(g),c.HEAPU16=new Uint16Array(g),c.HEAP32=xt=new Int32Array(g),c.HEAPU32=Ct=new Uint32Array(g),c.HEAPF32=new Float32Array(g),c.HEAPF64=gr=new Float64Array(g)}var lr=16777216;if(_)he=c.wasmMemory;else if(c.wasmMemory)he=c.wasmMemory;else if(he=new WebAssembly.Memory({initial:lr/65536,maximum:65536,shared:!0}),!(he.buffer instanceof SharedArrayBuffer))throw Z("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),y&&Z("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");It(),lr=he.buffer.byteLength;var Gt=[],Lr=[],Ae=[],Se=0,wr=null,Kt=null;function dn(){if(Se--,Se==0&&(wr!==null&&(clearInterval(wr),wr=null),Kt)){var g=Kt;Kt=null,g()}}function hn(g){throw g="Aborted("+g+")",Z(g),qe=!0,Ue=1,g=new WebAssembly.RuntimeError(g+". Build with -sASSERTIONS for more info."),d(g),g}var qn=g=>g.startsWith("data:application/octet-stream;base64,"),xr=g=>g.startsWith("file://"),_r;_r="ort-wasm-threaded.wasm",qn(_r)||(_r=C(_r));function pn(g){if(W)return W(g);throw"both async and sync fetching of the wasm failed"}function Br(g){if(v||x){if(typeof fetch=="function"&&!xr(g))return fetch(g,{credentials:"same-origin"}).then(b=>{if(!b.ok)throw"failed to load wasm binary file at '"+g+"'";return b.arrayBuffer()}).catch(()=>pn(g));if(z)return new Promise((b,E)=>{z(g,S=>b(new Uint8Array(S)),E)})}return Promise.resolve().then(()=>pn(g))}function Xn(g,b,E){return Br(g).then(S=>WebAssembly.instantiate(S,b)).then(S=>S).then(E,S=>{Z(`failed to asynchronously prepare wasm: ${S}`),hn(S)})}function $i(g,b){var E=_r;return typeof WebAssembly.instantiateStreaming!="function"||qn(E)||xr(E)||y||typeof fetch!="function"?Xn(E,g,b):fetch(E,{credentials:"same-origin"}).then(S=>WebAssembly.instantiateStreaming(S,g).then(b,function(R){return Z(`wasm streaming compile failed: ${R}`),Z("falling back to ArrayBuffer instantiation"),Xn(E,g,b)}))}var Er,gn={921276:(g,b,E,S)=>{if(typeof c>"u"||!c.cb)return 1;if(g=vn(g>>>0),g.startsWith("./")&&(g=g.substring(2)),g=c.cb.get(g),!g)return 2;if(b>>>=0,E>>>=0,S>>>=0,b+E>g.byteLength)return 3;try{return u().set(g.subarray(b,b+E),S>>>0),0}catch{return 4}}};function $r(g){this.name="ExitStatus",this.message=`Program terminated with exit(${g})`,this.status=g}var mn=g=>{g.terminate(),g.onmessage=()=>{}},yn=g=>{te.Pa.length==0&&(Kn(),te.Ya(te.Pa[0]));var b=te.Pa.pop();if(!b)return 6;te.Qa.push(b),te.Ma[g.Oa]=b,b.Oa=g.Oa;var E={cmd:"run",start_routine:g.kb,arg:g.hb,pthread_ptr:g.Oa};return y&&b.unref(),b.postMessage(E,g.qb),0},Zr=0,Yn=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Zn=(g,b,E)=>{b>>>=0;var S=b+E;for(E=b;g[E]&&!(E>=S);)++E;if(16<E-b&&g.buffer&&Yn)return Yn.decode(g.buffer instanceof SharedArrayBuffer?g.slice(b,E):g.subarray(b,E));for(S="";b<E;){var R=g[b++];if(R&128){var F=g[b++]&63;if((R&224)==192)S+=String.fromCharCode((R&31)<<6|F);else{var q=g[b++]&63;R=(R&240)==224?(R&15)<<12|F<<6|q:(R&7)<<18|F<<12|q<<6|g[b++]&63,65536>R?S+=String.fromCharCode(R):(R-=65536,S+=String.fromCharCode(55296|R>>10,56320|R&1023))}}else S+=String.fromCharCode(R)}return S},vn=(g,b)=>(g>>>=0)?Zn(u(),g,b):"",Vi=g=>{var b=ia();return g=g(),Wi(b),g};function be(g,b){var E=arguments.length-2,S=arguments;return Vi(()=>{for(var R=oa(8*E),F=R>>>3,q=0;q<E;q++){var De=S[2+q];i()[F+q>>>0]=De}return Mu(g,E,R,b)})}function oe(g){if(_)return be(0,1,g);Ue=g,0<Zr||(te.lb(),c.onExit?.(g),qe=!0),m(g,new $r(g))}var bn=g=>{if(Ue=g,_)throw Hi(g),"unwind";oe(g)};function ji(){for(var g=c.numThreads;g--;)Kn();Gt.unshift(()=>{Se++,Ui(()=>dn())})}function Kn(){var g=C("ort-wasm-threaded.worker.js");g=new Worker(g),te.Pa.push(g)}function Ui(g){_?g():Promise.all(te.Pa.map(te.Ya)).then(g)}var te={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(te.receiveObjectTransfer=te.jb,te.threadInitTLS=te.ab,te.setExitStatus=te.$a):ji()},$a:g=>Ue=g,tb:["$terminateWorker"],lb:()=>{for(var g of te.Qa)mn(g);for(g of te.Pa)mn(g);te.Pa=[],te.Qa=[],te.Ma=[]},Za:g=>{var b=g.Oa;delete te.Ma[b],te.Pa.push(g),te.Qa.splice(te.Qa.indexOf(g),1),g.Oa=0,ra(b)},jb(){},ab(){te.bb.forEach(g=>g())},Ya:g=>new Promise(b=>{g.onmessage=F=>{F=F.data;var q=F.cmd;if(F.targetThread&&F.targetThread!=Gi()){var De=te.Ma[F.targetThread];De?De.postMessage(F,F.transferList):Z(`Internal error! Worker sent a message "${q}" to target pthread ${F.targetThread}, but that thread no longer exists!`)}else q==="checkMailbox"?zi():q==="spawnThread"?yn(F):q==="cleanupThread"?te.Za(te.Ma[F.thread]):q==="killThread"?(F=F.thread,q=te.Ma[F],delete te.Ma[F],mn(q),ra(F),te.Qa.splice(te.Qa.indexOf(q),1),q.Oa=0):q==="cancelThread"?te.Ma[F.thread].postMessage({cmd:"cancel"}):q==="loaded"?(g.loaded=!0,y&&!g.Oa&&g.unref(),b(g)):q==="alert"?alert(`Thread ${F.threadId}: ${F.text}`):F.target==="setimmediate"?g.postMessage(F):q==="callHandler"?c[F.handler](...F.args):q&&Z(`worker sent an unknown command ${q}`)},g.onerror=F=>{throw Z(`worker sent an error! ${F.filename}:${F.lineno}: ${F.message}`),F},y&&(g.on("message",F=>g.onmessage({data:F})),g.on("error",F=>g.onerror(F)));var E=[],S=["onExit"],R;for(R of S)c.hasOwnProperty(R)&&E.push(R);g.postMessage({cmd:"load",handlers:E,urlOrBlob:c.mainScriptUrlOrBlob||n,wasmMemory:he,wasmModule:pt})})};c.PThread=te;var Kr=g=>{for(;0<g.length;)g.shift()(c)};c.establishStackSpace=()=>{var g=Gi(),b=l()[g+52>>>2>>>0];g=l()[g+56>>>2>>>0],Fu(b,b-g),Wi(b)};function Hi(g){if(_)return be(1,0,g);bn(g)}var Tr=[],Qn;c.invokeEntryPoint=(g,b)=>{var E=Tr[g];E||(g>=Tr.length&&(Tr.length=g+1),Tr[g]=E=Qn.get(g)),g=E(b),0<Zr?te.$a(g):na(g)};function w(g){this.Va=g-24,this.gb=function(b){l()[this.Va+4>>>2>>>0]=b},this.fb=function(b){l()[this.Va+8>>>2>>>0]=b},this.Wa=function(b,E){this.eb(),this.gb(b),this.fb(E)},this.eb=function(){l()[this.Va+16>>>2>>>0]=0}}var T=0,A=0;function M(g,b,E,S){return _?be(2,1,g,b,E,S):G(g,b,E,S)}function G(g,b,E,S){if(g>>>=0,b>>>=0,E>>>=0,S>>>=0,typeof SharedArrayBuffer>"u")return Z("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var R=[];return _&&R.length===0?M(g,b,E,S):(g={kb:E,Oa:g,hb:S,qb:R},_?(g.sb="spawnThread",postMessage(g,R),0):yn(g))}function Q(g,b,E){return _?be(3,1,g,b,E):0}function le(g,b){if(_)return be(4,1,g,b)}var Ve=g=>{for(var b=0,E=0;E<g.length;++E){var S=g.charCodeAt(E);127>=S?b++:2047>=S?b+=2:55296<=S&&57343>=S?(b+=4,++E):b+=3}return b},ut=(g,b,E,S)=>{if(E>>>=0,!(0<S))return 0;var R=E;S=E+S-1;for(var F=0;F<g.length;++F){var q=g.charCodeAt(F);if(55296<=q&&57343>=q){var De=g.charCodeAt(++F);q=65536+((q&1023)<<10)|De&1023}if(127>=q){if(E>=S)break;b[E++>>>0]=q}else{if(2047>=q){if(E+1>=S)break;b[E++>>>0]=192|q>>6}else{if(65535>=q){if(E+2>=S)break;b[E++>>>0]=224|q>>12}else{if(E+3>=S)break;b[E++>>>0]=240|q>>18,b[E++>>>0]=128|q>>12&63}b[E++>>>0]=128|q>>6&63}b[E++>>>0]=128|q&63}}return b[E>>>0]=0,E-R},Xe=(g,b,E)=>ut(g,u(),b,E);function Ye(g,b){if(_)return be(5,1,g,b)}function Jn(g,b,E){if(_)return be(6,1,g,b,E)}function ei(g,b,E){return _?be(7,1,g,b,E):0}function O(g,b){if(_)return be(8,1,g,b)}function pe(g,b,E){if(_)return be(9,1,g,b,E)}function xe(g,b,E,S){if(_)return be(10,1,g,b,E,S)}function cr(g,b,E,S){if(_)return be(11,1,g,b,E,S)}function ti(g,b,E,S){if(_)return be(12,1,g,b,E,S)}function fu(g){if(_)return be(13,1,g)}function du(g,b){if(_)return be(14,1,g,b)}function hu(g,b,E){if(_)return be(15,1,g,b,E)}function Ko(g){g>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(s(),g>>>2,g).value.then(zi),g+=128,Atomics.store(s(),g>>>2,1))}c.__emscripten_thread_mailbox_await=Ko;var zi=()=>{var g=Gi();if(g&&(Ko(g),g=Nu,!qe))try{if(g(),!(0<Zr))try{_?na(Ue):bn(Ue)}catch(b){b instanceof $r||b=="unwind"||m(1,b)}}catch(b){b instanceof $r||b=="unwind"||m(1,b)}};c.checkMailbox=zi;var Qo=[],wn=g=>g%4===0&&(g%100!==0||g%400===0),pu=[0,31,60,91,121,152,182,213,244,274,305,335],gu=[0,31,59,90,120,151,181,212,243,273,304,334];function mu(g,b,E,S,R,F,q,De){return _?be(16,1,g,b,E,S,R,F,q,De):-52}function yu(g,b,E,S,R,F,q){if(_)return be(17,1,g,b,E,S,R,F,q)}var vu=g=>{var b=Ve(g)+1,E=Ou(b);return E&&Xe(g,E,b),E},Jo=[],ea={},bu=()=>{if(!ta){var g={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:p||"./this.program"},b;for(b in ea)ea[b]===void 0?delete g[b]:g[b]=ea[b];var E=[];for(b in g)E.push(`${b}=${g[b]}`);ta=E}return ta},ta;function wu(g,b){if(_)return be(18,1,g,b);g>>>=0,b>>>=0;var E=0;return bu().forEach((S,R)=>{var F=b+E;for(R=l()[g+4*R>>>2>>>0]=F,F=0;F<S.length;++F)a()[R++>>>0>>>0]=S.charCodeAt(F);a()[R>>>0>>>0]=0,E+=S.length+1}),0}function xu(g,b){if(_)return be(19,1,g,b);g>>>=0,b>>>=0;var E=bu();l()[g>>>2>>>0]=E.length;var S=0;return E.forEach(R=>S+=R.length+1),l()[b>>>2>>>0]=S,0}function _u(g){return _?be(20,1,g):52}function Eu(g,b,E,S){return _?be(21,1,g,b,E,S):52}function Tu(g,b,E,S,R){return _?be(22,1,g,b,E,S,R):70}var Qd=[null,[],[]];function Iu(g,b,E,S){if(_)return be(23,1,g,b,E,S);b>>>=0,E>>>=0,S>>>=0;for(var R=0,F=0;F<E;F++){var q=l()[b>>>2>>>0],De=l()[b+4>>>2>>>0];b+=8;for(var fr=0;fr<De;fr++){var He=u()[q+fr>>>0],_t=Qd[g];He===0||He===10?((g===1?ye:Z)(Zn(_t,0)),_t.length=0):_t.push(He)}R+=De}return l()[S>>>2>>>0]=R,0}var Au=[31,29,31,30,31,30,31,31,30,31,30,31],Su=[31,28,31,30,31,30,31,31,30,31,30,31];function Jd(g){var b=Array(Ve(g)+1);return ut(g,b,0,b.length),b}var eh=(g,b)=>{a().set(g,b>>>0)};function Du(g,b,E,S){function R(P,ve,Ce){for(P=typeof P=="number"?P.toString():P||"";P.length<ve;)P=Ce[0]+P;return P}function F(P,ve){return R(P,ve,"0")}function q(P,ve){function Ce($u){return 0>$u?-1:0<$u?1:0}var Qr;return(Qr=Ce(P.getFullYear()-ve.getFullYear()))===0&&(Qr=Ce(P.getMonth()-ve.getMonth()))===0&&(Qr=Ce(P.getDate()-ve.getDate())),Qr}function De(P){switch(P.getDay()){case 0:return new Date(P.getFullYear()-1,11,29);case 1:return P;case 2:return new Date(P.getFullYear(),0,3);case 3:return new Date(P.getFullYear(),0,2);case 4:return new Date(P.getFullYear(),0,1);case 5:return new Date(P.getFullYear()-1,11,31);case 6:return new Date(P.getFullYear()-1,11,30)}}function fr(P){var ve=P.Ra;for(P=new Date(new Date(P.Sa+1900,0,1).getTime());0<ve;){var Ce=P.getMonth(),Qr=(wn(P.getFullYear())?Au:Su)[Ce];if(ve>Qr-P.getDate())ve-=Qr-P.getDate()+1,P.setDate(1),11>Ce?P.setMonth(Ce+1):(P.setMonth(0),P.setFullYear(P.getFullYear()+1));else{P.setDate(P.getDate()+ve);break}}return Ce=new Date(P.getFullYear()+1,0,4),ve=De(new Date(P.getFullYear(),0,4)),Ce=De(Ce),0>=q(ve,P)?0>=q(Ce,P)?P.getFullYear()+1:P.getFullYear():P.getFullYear()-1}g>>>=0,b>>>=0,E>>>=0,S>>>=0;var He=l()[S+40>>>2>>>0];S={ob:s()[S>>>2>>>0],nb:s()[S+4>>>2>>>0],Ta:s()[S+8>>>2>>>0],Xa:s()[S+12>>>2>>>0],Ua:s()[S+16>>>2>>>0],Sa:s()[S+20>>>2>>>0],Na:s()[S+24>>>2>>>0],Ra:s()[S+28>>>2>>>0],ub:s()[S+32>>>2>>>0],mb:s()[S+36>>>2>>>0],pb:He?vn(He):""},E=vn(E),He={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var _t in He)E=E.replace(new RegExp(_t,"g"),He[_t]);var Lu="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Bu="January February March April May June July August September October November December".split(" ");He={"%a":P=>Lu[P.Na].substring(0,3),"%A":P=>Lu[P.Na],"%b":P=>Bu[P.Ua].substring(0,3),"%B":P=>Bu[P.Ua],"%C":P=>F((P.Sa+1900)/100|0,2),"%d":P=>F(P.Xa,2),"%e":P=>R(P.Xa,2," "),"%g":P=>fr(P).toString().substring(2),"%G":P=>fr(P),"%H":P=>F(P.Ta,2),"%I":P=>(P=P.Ta,P==0?P=12:12<P&&(P-=12),F(P,2)),"%j":P=>{for(var ve=0,Ce=0;Ce<=P.Ua-1;ve+=(wn(P.Sa+1900)?Au:Su)[Ce++]);return F(P.Xa+ve,3)},"%m":P=>F(P.Ua+1,2),"%M":P=>F(P.nb,2),"%n":()=>`
`,"%p":P=>0<=P.Ta&&12>P.Ta?"AM":"PM","%S":P=>F(P.ob,2),"%t":()=>"	","%u":P=>P.Na||7,"%U":P=>F(Math.floor((P.Ra+7-P.Na)/7),2),"%V":P=>{var ve=Math.floor((P.Ra+7-(P.Na+6)%7)/7);if(2>=(P.Na+371-P.Ra-2)%7&&ve++,ve)ve==53&&(Ce=(P.Na+371-P.Ra)%7,Ce==4||Ce==3&&wn(P.Sa)||(ve=1));else{ve=52;var Ce=(P.Na+7-P.Ra-1)%7;(Ce==4||Ce==5&&wn(P.Sa%400-1))&&ve++}return F(ve,2)},"%w":P=>P.Na,"%W":P=>F(Math.floor((P.Ra+7-(P.Na+6)%7)/7),2),"%y":P=>(P.Sa+1900).toString().substring(2),"%Y":P=>P.Sa+1900,"%z":P=>{P=P.mb;var ve=0<=P;return P=Math.abs(P)/60,(ve?"+":"-")+("0000"+(P/60*100+P%60)).slice(-4)},"%Z":P=>P.pb,"%%":()=>"%"},E=E.replace(/%%/g,"\0\0");for(_t in He)E.includes(_t)&&(E=E.replace(new RegExp(_t,"g"),He[_t](S)));return E=E.replace(/\0\0/g,"%"),_t=Jd(E),_t.length>b?0:(eh(_t,g),_t.length-1)}te.Wa();var th=[oe,Hi,M,Q,le,Ye,Jn,ei,O,pe,xe,cr,ti,fu,du,hu,mu,yu,wu,xu,_u,Eu,Tu,Iu],rh={b:function(g,b,E){throw g>>>=0,new w(g).Wa(b>>>0,E>>>0),T=g,A++,T},L:function(g){Pu(g>>>0,!x,1,!v,131072,!1),te.ab()},j:function(g){g>>>=0,_?postMessage({cmd:"cleanupThread",thread:g}):te.Za(te.Ma[g])},H:G,h:Q,S:le,D:Ye,F:Jn,T:ei,Q:O,J:pe,P:xe,n:cr,E:ti,B:fu,R:du,C:hu,p:()=>1,z:function(g,b){g>>>=0,g==b>>>0?setTimeout(()=>zi()):_?postMessage({targetThread:g,cmd:"checkMailbox"}):(g=te.Ma[g])&&g.postMessage({cmd:"checkMailbox"})},I:function(g,b,E,S){b>>>=0,Qo.length=E,S=S>>>0>>>3;for(var R=0;R<E;R++)Qo[R]=i()[S+R>>>0];return g=0>g?gn[-g-1]:th[g],te.ib=b,b=g.apply(null,Qo),te.ib=0,b},K:Ko,o:function(g){y&&te.Ma[g>>>0].ref()},s:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getUTCSeconds(),s()[E+4>>>2>>>0]=g.getUTCMinutes(),s()[E+8>>>2>>>0]=g.getUTCHours(),s()[E+12>>>2>>>0]=g.getUTCDate(),s()[E+16>>>2>>>0]=g.getUTCMonth(),s()[E+20>>>2>>>0]=g.getUTCFullYear()-1900,s()[E+24>>>2>>>0]=g.getUTCDay(),g=(g.getTime()-Date.UTC(g.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,s()[E+28>>>2>>>0]=g},t:function(g,b,E){g=b+2097152>>>0<4194305-!!g?(g>>>0)+4294967296*b:NaN,E>>>=0,g=new Date(1e3*g),s()[E>>>2>>>0]=g.getSeconds(),s()[E+4>>>2>>>0]=g.getMinutes(),s()[E+8>>>2>>>0]=g.getHours(),s()[E+12>>>2>>>0]=g.getDate(),s()[E+16>>>2>>>0]=g.getMonth(),s()[E+20>>>2>>>0]=g.getFullYear()-1900,s()[E+24>>>2>>>0]=g.getDay(),b=(wn(g.getFullYear())?pu:gu)[g.getMonth()]+g.getDate()-1|0,s()[E+28>>>2>>>0]=b,s()[E+36>>>2>>>0]=-(60*g.getTimezoneOffset()),b=new Date(g.getFullYear(),6,1).getTimezoneOffset();var S=new Date(g.getFullYear(),0,1).getTimezoneOffset();g=(b!=S&&g.getTimezoneOffset()==Math.min(S,b))|0,s()[E+32>>>2>>>0]=g},u:function(g){g>>>=0;var b=new Date(s()[g+20>>>2>>>0]+1900,s()[g+16>>>2>>>0],s()[g+12>>>2>>>0],s()[g+8>>>2>>>0],s()[g+4>>>2>>>0],s()[g>>>2>>>0],0),E=s()[g+32>>>2>>>0],S=b.getTimezoneOffset(),R=new Date(b.getFullYear(),6,1).getTimezoneOffset(),F=new Date(b.getFullYear(),0,1).getTimezoneOffset(),q=Math.min(F,R);return 0>E?s()[g+32>>>2>>>0]=+(R!=F&&q==S):0<E!=(q==S)&&(R=Math.max(F,R),b.setTime(b.getTime()+6e4*((0<E?q:R)-S))),s()[g+24>>>2>>>0]=b.getDay(),E=(wn(b.getFullYear())?pu:gu)[b.getMonth()]+b.getDate()-1|0,s()[g+28>>>2>>>0]=E,s()[g>>>2>>>0]=b.getSeconds(),s()[g+4>>>2>>>0]=b.getMinutes(),s()[g+8>>>2>>>0]=b.getHours(),s()[g+12>>>2>>>0]=b.getDate(),s()[g+16>>>2>>>0]=b.getMonth(),s()[g+20>>>2>>>0]=b.getYear(),g=b.getTime(),isNaN(g)?(s()[Cu()>>>2>>>0]=61,g=-1):g/=1e3,Ru((Er=g,1<=+Math.abs(Er)?0<Er?+Math.floor(Er/4294967296)>>>0:~~+Math.ceil((Er-+(~~Er>>>0))/4294967296)>>>0:0)),g>>>0},q:mu,r:yu,y:function(g,b,E){function S(He){return(He=He.toTimeString().match(/\(([A-Za-z ]+)\)$/))?He[1]:"GMT"}g>>>=0,b>>>=0,E>>>=0;var R=new Date().getFullYear(),F=new Date(R,0,1),q=new Date(R,6,1);R=F.getTimezoneOffset();var De=q.getTimezoneOffset(),fr=Math.max(R,De);l()[g>>>2>>>0]=60*fr,s()[b>>>2>>>0]=+(R!=De),g=S(F),b=S(q),g=vu(g),b=vu(b),De<R?(l()[E>>>2>>>0]=g,l()[E+4>>>2>>>0]=b):(l()[E>>>2>>>0]=b,l()[E+4>>>2>>>0]=g)},c:()=>{hn("")},O:function(g,b,E){g>>>=0,b>>>=0,E>>>=0,Jo.length=0;for(var S;S=u()[b++>>>0];){var R=S!=105;R&=S!=112,E+=R&&E%8?4:0,Jo.push(S==112?l()[E>>>2>>>0]:S==105?s()[E>>>2>>>0]:i()[E>>>3>>>0]),E+=R?8:4}return gn[g].apply(null,Jo)},k:()=>{},i:()=>Date.now(),U:()=>{throw Zr+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>y?(MG(),ou(_M)).cpus().length:navigator.hardwareConcurrency,x:function(g){g>>>=0;var b=u().length;if(g<=b||4294901760<g)return!1;for(var E=1;4>=E;E*=2){var S=b*(1+.2/E);S=Math.min(S,g+100663296);var R=Math;S=Math.max(g,S);e:{R=(R.min.call(R,4294901760,S+(65536-S%65536)%65536)-he.buffer.byteLength+65535)/65536;try{he.grow(R),It();var F=1;break e}catch{}F=void 0}if(F)return!0}return!1},M:wu,N:xu,G:bn,g:_u,m:Eu,v:Tu,l:Iu,a:he||c.wasmMemory,w:Du,d:function(g,b,E,S){return Du(g>>>0,b>>>0,E>>>0,S>>>0)}},J=function(){function g(E,S){return J=E.exports,J=nh(),te.bb.push(J.za),Qn=J.Aa,Lr.unshift(J.V),pt=S,dn(),J}var b={a:rh};if(Se++,c.instantiateWasm)try{return c.instantiateWasm(b,g)}catch(E){Z(`Module.instantiateWasm callback failed with error: ${E}`),d(E)}return $i(b,function(E){g(E.instance,E.module)}).catch(d),{}}();c._OrtInit=(g,b)=>(c._OrtInit=J.W)(g,b),c._OrtGetLastError=(g,b)=>(c._OrtGetLastError=J.X)(g,b),c._OrtCreateSessionOptions=(g,b,E,S,R,F,q,De,fr,He)=>(c._OrtCreateSessionOptions=J.Y)(g,b,E,S,R,F,q,De,fr,He),c._OrtAppendExecutionProvider=(g,b)=>(c._OrtAppendExecutionProvider=J.Z)(g,b),c._OrtAddFreeDimensionOverride=(g,b,E)=>(c._OrtAddFreeDimensionOverride=J._)(g,b,E),c._OrtAddSessionConfigEntry=(g,b,E)=>(c._OrtAddSessionConfigEntry=J.$)(g,b,E),c._OrtReleaseSessionOptions=g=>(c._OrtReleaseSessionOptions=J.aa)(g),c._OrtCreateSession=(g,b,E)=>(c._OrtCreateSession=J.ba)(g,b,E),c._OrtReleaseSession=g=>(c._OrtReleaseSession=J.ca)(g),c._OrtGetInputOutputCount=(g,b,E)=>(c._OrtGetInputOutputCount=J.da)(g,b,E),c._OrtGetInputName=(g,b)=>(c._OrtGetInputName=J.ea)(g,b),c._OrtGetOutputName=(g,b)=>(c._OrtGetOutputName=J.fa)(g,b),c._OrtFree=g=>(c._OrtFree=J.ga)(g),c._OrtCreateTensor=(g,b,E,S,R,F)=>(c._OrtCreateTensor=J.ha)(g,b,E,S,R,F),c._OrtGetTensorData=(g,b,E,S,R)=>(c._OrtGetTensorData=J.ia)(g,b,E,S,R),c._OrtReleaseTensor=g=>(c._OrtReleaseTensor=J.ja)(g),c._OrtCreateRunOptions=(g,b,E,S)=>(c._OrtCreateRunOptions=J.ka)(g,b,E,S),c._OrtAddRunConfigEntry=(g,b,E)=>(c._OrtAddRunConfigEntry=J.la)(g,b,E),c._OrtReleaseRunOptions=g=>(c._OrtReleaseRunOptions=J.ma)(g),c._OrtCreateBinding=g=>(c._OrtCreateBinding=J.na)(g),c._OrtBindInput=(g,b,E)=>(c._OrtBindInput=J.oa)(g,b,E),c._OrtBindOutput=(g,b,E,S)=>(c._OrtBindOutput=J.pa)(g,b,E,S),c._OrtClearBoundOutputs=g=>(c._OrtClearBoundOutputs=J.qa)(g),c._OrtReleaseBinding=g=>(c._OrtReleaseBinding=J.ra)(g),c._OrtRunWithBinding=(g,b,E,S,R)=>(c._OrtRunWithBinding=J.sa)(g,b,E,S,R),c._OrtRun=(g,b,E,S,R,F,q,De)=>(c._OrtRun=J.ta)(g,b,E,S,R,F,q,De),c._OrtEndProfiling=g=>(c._OrtEndProfiling=J.ua)(g);var Cu=()=>(Cu=J.va)(),Gi=c._pthread_self=()=>(Gi=c._pthread_self=J.wa)(),Ou=c._malloc=g=>(Ou=c._malloc=J.xa)(g);c._free=g=>(c._free=J.ya)(g),c.__emscripten_tls_init=()=>(c.__emscripten_tls_init=J.za)();var Pu=c.__emscripten_thread_init=(g,b,E,S,R,F)=>(Pu=c.__emscripten_thread_init=J.Ba)(g,b,E,S,R,F);c.__emscripten_thread_crashed=()=>(c.__emscripten_thread_crashed=J.Ca)();var Mu=(g,b,E,S)=>(Mu=J.Da)(g,b,E,S),ra=g=>(ra=J.Ea)(g),na=c.__emscripten_thread_exit=g=>(na=c.__emscripten_thread_exit=J.Fa)(g),Nu=()=>(Nu=J.Ga)(),Ru=g=>(Ru=J.Ha)(g),Fu=(g,b)=>(Fu=J.Ia)(g,b),ia=()=>(ia=J.Ja)(),Wi=g=>(Wi=J.Ka)(g),oa=g=>(oa=J.La)(g);function nh(){var g=J;g=Object.assign({},g);var b=S=>()=>S()>>>0,E=S=>R=>S(R)>>>0;return g.va=b(g.va),g.wa=b(g.wa),g.xa=E(g.xa),g.emscripten_main_runtime_thread_id=b(g.emscripten_main_runtime_thread_id),g.Ja=b(g.Ja),g.La=E(g.La),g}c.wasmMemory=he,c.stackAlloc=oa,c.stackSave=ia,c.stackRestore=Wi,c.keepRuntimeAlive=()=>0<Zr,c.UTF8ToString=vn,c.stringToUTF8=Xe,c.lengthBytesUTF8=Ve,c.ExitStatus=$r,c.PThread=te;var qi;Kt=function g(){qi||ku(),qi||(Kt=g)};function ku(){if(!(0<Se))if(_)f(c),_||Kr(Lr),startWorker(c);else{if(c.preRun)for(typeof c.preRun=="function"&&(c.preRun=[c.preRun]);c.preRun.length;)Gt.unshift(c.preRun.shift());Kr(Gt),0<Se||qi||(qi=!0,c.calledRun=!0,qe||(_||Kr(Lr),f(c),_||Kr(Ae)))}}return ku(),o.ready}})();typeof t=="object"&&typeof e=="object"?e.exports=r:typeof define=="function"&&define.amd&&define([],()=>r)}),RG=lu((t,e)=>{e.exports='"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\n'}),B4,$4,vy,qd,Rc,by,V4,j4,U4,TM,kr,jc=st(()=>{"use strict";B4=CG(),$4=NG(),qd=!1,Rc=!1,by=!1,V4=t=>{if(t===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+t+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+t+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},j4=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},U4=(t,e)=>t?e?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":e?"ort-wasm-threaded.wasm":"ort-wasm.wasm",TM=t=>U(void 0,null,function*(){if(qd)return Promise.resolve();if(Rc)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(by)throw new Error("previous call to 'initializeWebAssembly()' failed.");Rc=!0;let e=t.initTimeout,r=t.numThreads,n=t.simd,o=V4(r),a=n&&j4(),u=t.wasmPaths,s=typeof u=="string"?u:void 0,l=U4(a,o),i=typeof u=="object"?u[l]:void 0,c=!1,f=[];if(e>0&&f.push(new Promise(d=>{setTimeout(()=>{c=!0,d()},e)})),f.push(new Promise((d,h)=>{let p=o?$4:B4,m={locateFile:(v,x)=>o&&v.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([RG()],{type:"text/javascript"})):v.endsWith(".wasm")?i||(s??x)+l:x+v};if(o)if(m.numThreads=r,typeof Blob>"u")m.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let v=`var ortWasmThreaded=${p.toString()};`;m.mainScriptUrlOrBlob=new Blob([v],{type:"text/javascript"})}p(m).then(v=>{Rc=!1,qd=!0,vy=v,d()},v=>{Rc=!1,by=!0,h(v)})})),yield Promise.race(f),c)throw new Error(`WebAssembly backend initializing failed due to timeout: ${e}ms`)}),kr=()=>{if(qd&&vy)return vy;throw new Error("WebAssembly is not initialized yet.")}}),Or,Zd,br,Ry=st(()=>{"use strict";jc(),Or=(t,e)=>{let r=kr(),n=r.lengthBytesUTF8(t)+1,o=r._malloc(n);return r.stringToUTF8(t,o,n),e.push(o),o},Zd=(t,e,r,n)=>{if(typeof t=="object"&&t!==null){if(r.has(t))throw new Error("Circular reference in options");r.add(t)}Object.entries(t).forEach(([o,a])=>{let u=e?e+o:o;if(typeof a=="object")Zd(a,u+".",r,n);else if(typeof a=="string"||typeof a=="number")n(u,a.toString());else if(typeof a=="boolean")n(u,a?"1":"0");else throw new Error(`Can't handle extra config type: ${typeof a}`)})},br=t=>{let e=kr(),r=e.stackSave();try{let n=e.stackAlloc(8);e._OrtGetLastError(n,n+4);let o=e.HEAP32[n/4],a=e.HEAPU32[n/4+1],u=a?e.UTF8ToString(a):"";throw new Error(`${t} ERROR_CODE: ${o}, ERROR_MESSAGE: ${u}`)}finally{e.stackRestore(r)}}}),IM,FG=st(()=>{"use strict";jc(),Ry(),IM=t=>{let e=kr(),r=0,n=[],o=t||{};try{if(t?.logSeverityLevel===void 0)o.logSeverityLevel=2;else if(typeof t.logSeverityLevel!="number"||!Number.isInteger(t.logSeverityLevel)||t.logSeverityLevel<0||t.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${t.logSeverityLevel}`);if(t?.logVerbosityLevel===void 0)o.logVerbosityLevel=0;else if(typeof t.logVerbosityLevel!="number"||!Number.isInteger(t.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${t.logVerbosityLevel}`);t?.terminate===void 0&&(o.terminate=!1);let a=0;return t?.tag!==void 0&&(a=Or(t.tag,n)),r=e._OrtCreateRunOptions(o.logSeverityLevel,o.logVerbosityLevel,!!o.terminate,a),r===0&&br("Can't create run options."),t?.extra!==void 0&&Zd(t.extra,"",new WeakSet,(u,s)=>{let l=Or(u,n),i=Or(s,n);e._OrtAddRunConfigEntry(r,l,i)!==0&&br(`Can't set a run config entry: ${u} - ${s}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseRunOptions(r),n.forEach(u=>e._free(u)),a}}}),H4,z4,G4,W4,AM,kG=st(()=>{"use strict";jc(),Ry(),H4=t=>{switch(t){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${t}`)}},z4=t=>{switch(t){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${t}`)}},G4=t=>{t.extra||(t.extra={}),t.extra.session||(t.extra.session={});let e=t.extra.session;e.use_ort_model_bytes_directly||(e.use_ort_model_bytes_directly="1"),t.executionProviders&&t.executionProviders.some(r=>(typeof r=="string"?r:r.name)==="webgpu")&&(t.enableMemPattern=!1)},W4=(t,e,r)=>{for(let n of e){let o=typeof n=="string"?n:n.name;switch(o){case"webnn":if(o="WEBNN",typeof n!="string"){let u=n;if(u?.deviceType){let s=Or("deviceType",r),l=Or(u.deviceType,r);kr()._OrtAddSessionConfigEntry(t,s,l)!==0&&br(`Can't set a session config entry: 'deviceType' - ${u.deviceType}.`)}if(u?.numThreads){let s=u.numThreads;(typeof s!="number"||!Number.isInteger(s)||s<0)&&(s=0);let l=Or("numThreads",r),i=Or(s.toString(),r);kr()._OrtAddSessionConfigEntry(t,l,i)!==0&&br(`Can't set a session config entry: 'numThreads' - ${u.numThreads}.`)}if(u?.powerPreference){let s=Or("powerPreference",r),l=Or(u.powerPreference,r);kr()._OrtAddSessionConfigEntry(t,s,l)!==0&&br(`Can't set a session config entry: 'powerPreference' - ${u.powerPreference}.`)}}break;case"webgpu":if(o="JS",typeof n!="string"){let u=n;if(u?.preferredLayout){if(u.preferredLayout!=="NCHW"&&u.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${u.preferredLayout}`);let s=Or("preferredLayout",r),l=Or(u.preferredLayout,r);kr()._OrtAddSessionConfigEntry(t,s,l)!==0&&br(`Can't set a session config entry: 'preferredLayout' - ${u.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${o}`)}let a=Or(o,r);kr()._OrtAppendExecutionProvider(t,a)!==0&&br(`Can't append execution provider: ${o}.`)}},AM=t=>{let e=kr(),r=0,n=[],o=t||{};G4(o);try{let a=H4(o.graphOptimizationLevel??"all"),u=z4(o.executionMode??"sequential"),s=typeof o.logId=="string"?Or(o.logId,n):0,l=o.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let i=o.logVerbosityLevel??0;if(!Number.isInteger(i)||i<0||i>4)throw new Error(`log verbosity level is not valid: ${i}`);let c=typeof o.optimizedModelFilePath=="string"?Or(o.optimizedModelFilePath,n):0;if(r=e._OrtCreateSessionOptions(a,!!o.enableCpuMemArena,!!o.enableMemPattern,u,!!o.enableProfiling,0,s,l,i,c),r===0&&br("Can't create session options."),o.executionProviders&&W4(r,o.executionProviders,n),o.freeDimensionOverrides)for(let[f,d]of Object.entries(o.freeDimensionOverrides)){if(typeof f!="string")throw new Error(`free dimension override name must be a string: ${f}`);if(typeof d!="number"||!Number.isInteger(d)||d<0)throw new Error(`free dimension override value must be a non-negative integer: ${d}`);let h=Or(f,n);e._OrtAddFreeDimensionOverride(r,h,d)!==0&&br(`Can't set a free dimension override: ${f} - ${d}.`)}return o.extra!==void 0&&Zd(o.extra,"",new WeakSet,(f,d)=>{let h=Or(f,n),p=Or(d,n);e._OrtAddSessionConfigEntry(r,h,p)!==0&&br(`Can't set a session config entry: ${f} - ${d}.`)}),[r,n]}catch(a){throw r!==0&&e._OrtReleaseSessionOptions(r),n.forEach(u=>e._free(u)),a}}}),Ty,SM,Iy,DM,CM,Fy,OM,PM=st(()=>{"use strict";Ty=t=>{switch(t){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${t}`)}},SM=t=>{switch(t){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${t}`)}},Iy=t=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][t],DM=t=>{switch(t){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${t}`)}},CM=t=>{switch(t){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${t}`)}},Fy=t=>t==="float32"||t==="int32"||t==="int64"||t==="bool"||t==="float16"||t==="uint32",OM=t=>{switch(t){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${t}`)}}}),Kd,MM=st(()=>{"use strict";Kd=t=>U(void 0,null,function*(){if(typeof t=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(yield(void 0)(t))}catch(a){if(a.code==="ERR_FS_FILE_TOO_LARGE"){let u=(void 0)(t),s=[];try{for(var e=Uc(u),r,n,o;r=!(n=yield e.next()).done;r=!1){let l=n.value;s.push(l)}}catch{o=[n]}finally{try{r&&(n=e.return)&&(yield n.call(e))}finally{if(o)throw o[0]}}return new Uint8Array(Buffer.concat(s))}throw a}else{let a=yield fetch(t);if(!a.ok)throw new Error(`failed to load external data file: ${t}`);let u=a.headers.get("Content-Length"),s=u?parseInt(u,10):0;if(s<1073741824)return new Uint8Array(yield a.arrayBuffer());{if(!a.body)throw new Error(`failed to load external data file: ${t}, no response body.`);let l=a.body.getReader(),i;try{i=new ArrayBuffer(s)}catch(f){if(f instanceof RangeError){let d=Math.ceil(s/65536);i=new WebAssembly.Memory({initial:d,maximum:d}).buffer}else throw f}let c=0;for(;;){let{done:f,value:d}=yield l.read();if(f)break;let h=d.byteLength;new Uint8Array(i,c,h).set(d),c+=h}return new Uint8Array(i,0,s)}}else return t instanceof Blob?new Uint8Array(yield t.arrayBuffer()):t instanceof Uint8Array?t:new Uint8Array(t)})}),q4,NM,RM,nu,X4,Ay,FM,kM,wy,LM,BM,$M,LG=st(()=>{"use strict";FG(),kG(),PM(),jc(),Ry(),MM(),q4=(t,e)=>{kr()._OrtInit(t,e)!==0&&br("Can't initialize onnxruntime.")},NM=t=>U(void 0,null,function*(){q4(t.wasm.numThreads,CM(t.logLevel))}),RM=(t,e)=>U(void 0,null,function*(){}),nu=new Map,X4=t=>{let e=kr(),r=e.stackSave();try{let n=e.stackAlloc(8);return e._OrtGetInputOutputCount(t,n,n+4)!==0&&br("Can't get session input/output count."),[e.HEAP32[n/4],e.HEAP32[n/4+1]]}finally{e.stackRestore(r)}},Ay=t=>{let e=kr(),r=e._malloc(t.byteLength);if(r===0)throw new Error(`Can't create a session. failed to allocate a buffer of size ${t.byteLength}.`);return e.HEAPU8.set(t,r),[r,t.byteLength]},FM=(t,e)=>U(void 0,null,function*(){let r,n,o=kr();Array.isArray(t)?[r,n]=t:t.buffer===o.HEAPU8.buffer?[r,n]=[t.byteOffset,t.byteLength]:[r,n]=Ay(t);let a=0,u=0,s=0,l=[],i=[],c=[];try{if([u,l]=AM(e),e?.externalData&&o.mountExternalData){let x=[];for(let y of e.externalData){let _=typeof y=="string"?y:y.path;x.push(Kd(typeof y=="string"?y:y.data).then(I=>{o.mountExternalData(_,I)}))}yield Promise.all(x)}a=o._OrtCreateSession(r,n,u),a===0&&br("Can't create a session.");let[f,d]=X4(a),h=[],p=[],m=[];for(let x=0;x<f;x++){let y=o._OrtGetInputName(a,x);y===0&&br("Can't get an input name."),i.push(y),h.push(o.UTF8ToString(y))}for(let x=0;x<d;x++){let y=o._OrtGetOutputName(a,x);y===0&&br("Can't get an output name."),c.push(y);let _=o.UTF8ToString(y);p.push(_)}return nu.set(a,[a,i,c,null]),[a,h,p]}catch(f){throw i.forEach(d=>o._OrtFree(d)),c.forEach(d=>o._OrtFree(d)),s!==0&&o._OrtReleaseBinding(s),a!==0&&o._OrtReleaseSession(a),f}finally{o._free(r),u!==0&&o._OrtReleaseSessionOptions(u),l.forEach(f=>o._free(f)),o.unmountExternalData?.()}}),kM=t=>{let e=kr(),r=nu.get(t);if(!r)throw new Error(`cannot release session. invalid session id: ${t}`);let[n,o,a,u]=r;u&&e._OrtReleaseBinding(u.handle),e.jsepUnregisterBuffers?.(t),o.forEach(s=>e._OrtFree(s)),a.forEach(s=>e._OrtFree(s)),e._OrtReleaseSession(n),nu.delete(t)},wy=(t,e,r,n,o)=>{if(!t){e.push(0);return}let a=kr(),u=t[0],s=t[1],l=t[3],i,c;if(u==="string"&&l==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(l==="gpu-buffer"){let h=t[2].gpuBuffer,p=Iy(Ty(u));c=s.reduce((m,v)=>m*v,1)*p,i=a.jsepRegisterBuffer(n,o,h,c)}else{let h=t[2];if(Array.isArray(h)){c=4*h.length,i=a._malloc(c),r.push(i);let p=i/4;for(let m=0;m<h.length;m++){if(typeof h[m]!="string")throw new TypeError(`tensor data at index ${m} is not a string`);a.HEAPU32[p++]=Or(h[m],r)}}else c=h.byteLength,i=a._malloc(c),r.push(i),a.HEAPU8.set(new Uint8Array(h.buffer,h.byteOffset,c),i)}let f=a.stackSave(),d=a.stackAlloc(4*s.length);try{let h=d/4;s.forEach(m=>a.HEAP32[h++]=m);let p=a._OrtCreateTensor(Ty(u),i,c,d,s.length,OM(l));p===0&&br(`Can't create tensor for input/output. session=${n}, index=${o}.`),e.push(p)}finally{a.stackRestore(f)}},LM=(t,e,r,n,o,a)=>U(void 0,null,function*(){let u=kr(),s=nu.get(t);if(!s)throw new Error(`cannot run inference. invalid session id: ${t}`);let[l,i,c,f]=s,d=e.length,h=n.length,p=0,m=[],v=[],x=[],y=[],_=u.stackSave(),I=u.stackAlloc(d*4),C=u.stackAlloc(d*4),V=u.stackAlloc(h*4),z=u.stackAlloc(h*4);try{[p,m]=IM(a);for(let Z=0;Z<d;Z++)wy(r[Z],v,y,t,e[Z]);for(let Z=0;Z<h;Z++)wy(o[Z],x,y,t,d+n[Z]);let W=I/4,k=C/4,X=V/4,ke=z/4;for(let Z=0;Z<d;Z++)u.HEAPU32[W++]=v[Z],u.HEAPU32[k++]=i[e[Z]];for(let Z=0;Z<h;Z++)u.HEAPU32[X++]=x[Z],u.HEAPU32[ke++]=c[n[Z]];let me;me=yield u._OrtRun(l,C,I,d,z,h,V,p),me!==0&&br("failed to call OrtRun().");let ye=[];for(let Z=0;Z<h;Z++){let he=u.HEAPU32[V/4+Z];if(he===x[Z]){ye.push(o[Z]);continue}let pt=u.stackSave(),qe=u.stackAlloc(4*4),Ue=!1,Ee,wt=0;try{u._OrtGetTensorData(he,qe,qe+4,qe+8,qe+12)!==0&&br(`Can't access output tensor data on index ${Z}.`);let xt=qe/4,Ct=u.HEAPU32[xt++];wt=u.HEAPU32[xt++];let gr=u.HEAPU32[xt++],It=u.HEAPU32[xt++],lr=[];for(let Ae=0;Ae<It;Ae++)lr.push(u.HEAPU32[gr/4+Ae]);u._OrtFree(gr);let Gt=lr.reduce((Ae,Se)=>Ae*Se,1);Ee=SM(Ct);let Lr=f?.outputPreferredLocations[n[Z]];if(Ee==="string"){if(Lr==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let Ae=[],Se=wt/4;for(let wr=0;wr<Gt;wr++){let Kt=u.HEAPU32[Se++],dn=wr===Gt-1?void 0:u.HEAPU32[Se]-Kt;Ae.push(u.UTF8ToString(Kt,dn))}ye.push([Ee,lr,Ae,"cpu"])}else if(Lr==="gpu-buffer"&&Gt>0){let Ae=u.jsepGetBuffer(wt),Se=Iy(Ct);if(Se===void 0||!Fy(Ee))throw new Error(`Unsupported data type: ${Ee}`);Ue=!0,ye.push([Ee,lr,{gpuBuffer:Ae,download:u.jsepCreateDownloader(Ae,Gt*Se,Ee),dispose:()=>{u._OrtReleaseTensor(he)}},"gpu-buffer"])}else{let Ae=DM(Ee),Se=new Ae(Gt);new Uint8Array(Se.buffer,Se.byteOffset,Se.byteLength).set(u.HEAPU8.subarray(wt,wt+Se.byteLength)),ye.push([Ee,lr,Se,"cpu"])}}finally{u.stackRestore(pt),Ee==="string"&&wt&&u._free(wt),Ue||u._OrtReleaseTensor(he)}}return f&&u._OrtClearBoundOutputs(f.handle),ye}finally{u.stackRestore(_),v.forEach(W=>u._OrtReleaseTensor(W)),x.forEach(W=>u._OrtReleaseTensor(W)),y.forEach(W=>u._free(W)),p!==0&&u._OrtReleaseRunOptions(p),m.forEach(W=>u._free(W))}}),BM=t=>{let e=kr(),r=nu.get(t);if(!r)throw new Error("invalid session id");let n=r[0],o=e._OrtEndProfiling(n);o===0&&br("Can't get an profile file name."),e._OrtFree(o)},$M=t=>{let e=[];for(let r of t){let n=r[2];!Array.isArray(n)&&"buffer"in n&&e.push(n.buffer)}return e}}),BG=lu((t,e)=>{e.exports='/*!\n * ONNX Runtime Web v1.17.1\n * Copyright (c) Microsoft Corporation. All rights reserved.\n * Licensed under the MIT License.\n */\n"use strict";(()=>{var Et=Object.defineProperty;var Jr=Object.getOwnPropertyDescriptor;var Xr=Object.getOwnPropertyNames;var Qr=Object.prototype.hasOwnProperty;var St=(u,d)=>()=>(u&&(d=u(u=0)),d);var et=(u,d)=>()=>(d||u((d={exports:{}}).exports,d),d.exports),Tt=(u,d)=>{for(var a in d)Et(u,a,{get:d[a],enumerable:!0})},Zr=(u,d,a,h)=>{if(d&&typeof d=="object"||typeof d=="function")for(let l of Xr(d))!Qr.call(u,l)&&l!==a&&Et(u,l,{get:()=>d[l],enumerable:!(h=Jr(d,l))||h.enumerable});return u};var tt=u=>Zr(Et({},"__esModule",{value:!0}),u);var At={};Tt(At,{createReadStream:()=>dr,readFile:()=>Kr,readFileSync:()=>en});var Kr,en,dr,Mt=St(()=>{Kr=void 0,en=void 0,dr=void 0});var Ct={};Tt(Ct,{join:()=>tn});var tn,Dt=St(()=>{tn=void 0});var gr=et((mr,xt)=>{"use strict";var pr=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){var a=d,h,l;a.ready=new Promise((r,o)=>{h=r,l=o});var w=Object.assign({},a),g="./this.program",i=typeof window=="object",A=typeof importScripts=="function",D=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",I="",B,F,U;if(D){var k=(Mt(),tt(At)),L=(Dt(),tt(Ct));I=A?L.dirname(I)+"/":__dirname+"/",B=(r,o)=>(r=ye(r)?new URL(r):L.normalize(r),k.readFileSync(r,o?void 0:"utf8")),U=r=>(r=B(r,!0),r.buffer||(r=new Uint8Array(r)),r),F=(r,o,s,m=!0)=>{r=ye(r)?new URL(r):L.normalize(r),k.readFile(r,m?void 0:"utf8",(O,S)=>{O?s(O):o(m?S.buffer:S)})},!a.thisProgram&&1<process.argv.length&&(g=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),a.inspect=()=>"[Emscripten Module object]"}else(i||A)&&(A?I=self.location.href:typeof document<"u"&&document.currentScript&&(I=document.currentScript.src),u&&(I=u),I.indexOf("blob:")!==0?I=I.substr(0,I.replace(/[?#].*/,"").lastIndexOf("/")+1):I="",B=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.send(null),o.responseText},A&&(U=r=>{var o=new XMLHttpRequest;return o.open("GET",r,!1),o.responseType="arraybuffer",o.send(null),new Uint8Array(o.response)}),F=(r,o,s)=>{var m=new XMLHttpRequest;m.open("GET",r,!0),m.responseType="arraybuffer",m.onload=()=>{m.status==200||m.status==0&&m.response?o(m.response):s()},m.onerror=s,m.send(null)});var _=console.log.bind(console),x=console.error.bind(console);Object.assign(a,w),w=null,typeof WebAssembly!="object"&&de("no native wasm support detected");var N,he=!1,ie,ae,E,Y,ue;function Re(){var r=N.buffer;a.HEAP8=ie=new Int8Array(r),a.HEAP16=new Int16Array(r),a.HEAPU8=ae=new Uint8Array(r),a.HEAPU16=new Uint16Array(r),a.HEAP32=E=new Int32Array(r),a.HEAPU32=Y=new Uint32Array(r),a.HEAPF32=new Float32Array(r),a.HEAPF64=ue=new Float64Array(r)}var Ie=[],ee=[],j=[],ce=0,P=null,te=null;function de(r){throw r="Aborted("+r+")",x(r),he=!0,r=new WebAssembly.RuntimeError(r+". Build with -sASSERTIONS for more info."),l(r),r}var ge=r=>r.startsWith("data:application/octet-stream;base64,"),ye=r=>r.startsWith("file://"),J;if(J="ort-wasm.wasm",!ge(J)){var fe=J;J=a.locateFile?a.locateFile(fe,I):I+fe}function we(r){if(U)return U(r);throw"both async and sync fetching of the wasm failed"}function Ae(r){if(i||A){if(typeof fetch=="function"&&!ye(r))return fetch(r,{credentials:"same-origin"}).then(o=>{if(!o.ok)throw"failed to load wasm binary file at \'"+r+"\'";return o.arrayBuffer()}).catch(()=>we(r));if(F)return new Promise((o,s)=>{F(r,m=>o(new Uint8Array(m)),s)})}return Promise.resolve().then(()=>we(r))}function Me(r,o,s){return Ae(r).then(m=>WebAssembly.instantiate(m,o)).then(m=>m).then(s,m=>{x(`failed to asynchronously prepare wasm: ${m}`),de(m)})}function Fe(r,o){var s=J;return typeof WebAssembly.instantiateStreaming!="function"||ge(s)||ye(s)||D||typeof fetch!="function"?Me(s,r,o):fetch(s,{credentials:"same-origin"}).then(m=>WebAssembly.instantiateStreaming(m,r).then(o,function(O){return x(`wasm streaming compile failed: ${O}`),x("falling back to ArrayBuffer instantiation"),Me(s,r,o)}))}var Ee,pe={919888:(r,o,s,m)=>{if(typeof a>"u"||!a.za)return 1;if(r=be(r>>>0),r.startsWith("./")&&(r=r.substring(2)),r=a.za.get(r),!r)return 2;if(o>>>=0,s>>>=0,o+s>r.byteLength)return 3;try{return ae.set(r.subarray(o,o+s),m>>>0>>>0),0}catch{return 4}}};function Oe(r){this.xa=r-24,this.Ha=function(o){Y[this.xa+4>>>2>>>0]=o},this.Ga=function(o){Y[this.xa+8>>>2>>>0]=o},this.Aa=function(o,s){this.Fa(),this.Ha(o),this.Ga(s)},this.Fa=function(){Y[this.xa+16>>>2>>>0]=0}}var ve=0,re=0,Z=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ce=(r,o,s)=>{o>>>=0;var m=o+s;for(s=o;r[s]&&!(s>=m);)++s;if(16<s-o&&r.buffer&&Z)return Z.decode(r.subarray(o,s));for(m="";o<s;){var O=r[o++];if(O&128){var S=r[o++]&63;if((O&224)==192)m+=String.fromCharCode((O&31)<<6|S);else{var R=r[o++]&63;O=(O&240)==224?(O&15)<<12|S<<6|R:(O&7)<<18|S<<12|R<<6|r[o++]&63,65536>O?m+=String.fromCharCode(O):(O-=65536,m+=String.fromCharCode(55296|O>>10,56320|O&1023))}}else m+=String.fromCharCode(O)}return m},be=(r,o)=>(r>>>=0)?Ce(ae,r,o):"",_e=r=>{for(var o=0,s=0;s<r.length;++s){var m=r.charCodeAt(s);127>=m?o++:2047>=m?o+=2:55296<=m&&57343>=m?(o+=4,++s):o+=3}return o},ke=(r,o,s,m)=>{if(s>>>=0,!(0<m))return 0;var O=s;m=s+m-1;for(var S=0;S<r.length;++S){var R=r.charCodeAt(S);if(55296<=R&&57343>=R){var K=r.charCodeAt(++S);R=65536+((R&1023)<<10)|K&1023}if(127>=R){if(s>=m)break;o[s++>>>0]=R}else{if(2047>=R){if(s+1>=m)break;o[s++>>>0]=192|R>>6}else{if(65535>=R){if(s+2>=m)break;o[s++>>>0]=224|R>>12}else{if(s+3>=m)break;o[s++>>>0]=240|R>>18,o[s++>>>0]=128|R>>12&63}o[s++>>>0]=128|R>>6&63}o[s++>>>0]=128|R&63}}return o[s>>>0]=0,s-O},Ue=r=>r%4===0&&(r%100!==0||r%400===0),ze=[0,31,60,91,121,152,182,213,244,274,305,335],at=[0,31,59,90,120,151,181,212,243,273,304,334],De=r=>{var o=_e(r)+1,s=st(o);return s&&ke(r,ae,s,o),s},Ne=[],Pe={},He=()=>{if(!$e){var r={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:g||"./this.program"},o;for(o in Pe)Pe[o]===void 0?delete r[o]:r[o]=Pe[o];var s=[];for(o in r)s.push(`${o}=${r[o]}`);$e=s}return $e},$e,Le=[null,[],[]],qe=[31,29,31,30,31,30,31,31,30,31,30,31],Ve=[31,28,31,30,31,30,31,31,30,31,30,31];function Ge(r){var o=Array(_e(r)+1);return ke(r,o,0,o.length),o}function ot(r,o,s,m){function O(c,W,G){for(c=typeof c=="number"?c.toString():c||"";c.length<W;)c=G[0]+c;return c}function S(c,W){return O(c,W,"0")}function R(c,W){function G(Ke){return 0>Ke?-1:0<Ke?1:0}var Se;return(Se=G(c.getFullYear()-W.getFullYear()))===0&&(Se=G(c.getMonth()-W.getMonth()))===0&&(Se=G(c.getDate()-W.getDate())),Se}function K(c){switch(c.getDay()){case 0:return new Date(c.getFullYear()-1,11,29);case 1:return c;case 2:return new Date(c.getFullYear(),0,3);case 3:return new Date(c.getFullYear(),0,2);case 4:return new Date(c.getFullYear(),0,1);case 5:return new Date(c.getFullYear()-1,11,31);case 6:return new Date(c.getFullYear()-1,11,30)}}function le(c){var W=c.ta;for(c=new Date(new Date(c.ua+1900,0,1).getTime());0<W;){var G=c.getMonth(),Se=(Ue(c.getFullYear())?qe:Ve)[G];if(W>Se-c.getDate())W-=Se-c.getDate()+1,c.setDate(1),11>G?c.setMonth(G+1):(c.setMonth(0),c.setFullYear(c.getFullYear()+1));else{c.setDate(c.getDate()+W);break}}return G=new Date(c.getFullYear()+1,0,4),W=K(new Date(c.getFullYear(),0,4)),G=K(G),0>=R(W,c)?0>=R(G,c)?c.getFullYear()+1:c.getFullYear():c.getFullYear()-1}r>>>=0,o>>>=0,s>>>=0,m>>>=0;var oe=Y[m+40>>>2>>>0];m={Da:E[m>>>2>>>0],Ca:E[m+4>>>2>>>0],va:E[m+8>>>2>>>0],ya:E[m+12>>>2>>>0],wa:E[m+16>>>2>>>0],ua:E[m+20>>>2>>>0],oa:E[m+24>>>2>>>0],ta:E[m+28>>>2>>>0],Ia:E[m+32>>>2>>>0],Ba:E[m+36>>>2>>>0],Ea:oe?be(oe):""},s=be(s),oe={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var se in oe)s=s.replace(new RegExp(se,"g"),oe[se]);var Qe="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),Ze="January February March April May June July August September October November December".split(" ");oe={"%a":c=>Qe[c.oa].substring(0,3),"%A":c=>Qe[c.oa],"%b":c=>Ze[c.wa].substring(0,3),"%B":c=>Ze[c.wa],"%C":c=>S((c.ua+1900)/100|0,2),"%d":c=>S(c.ya,2),"%e":c=>O(c.ya,2," "),"%g":c=>le(c).toString().substring(2),"%G":c=>le(c),"%H":c=>S(c.va,2),"%I":c=>(c=c.va,c==0?c=12:12<c&&(c-=12),S(c,2)),"%j":c=>{for(var W=0,G=0;G<=c.wa-1;W+=(Ue(c.ua+1900)?qe:Ve)[G++]);return S(c.ya+W,3)},"%m":c=>S(c.wa+1,2),"%M":c=>S(c.Ca,2),"%n":()=>`\n`,"%p":c=>0<=c.va&&12>c.va?"AM":"PM","%S":c=>S(c.Da,2),"%t":()=>"	","%u":c=>c.oa||7,"%U":c=>S(Math.floor((c.ta+7-c.oa)/7),2),"%V":c=>{var W=Math.floor((c.ta+7-(c.oa+6)%7)/7);if(2>=(c.oa+371-c.ta-2)%7&&W++,W)W==53&&(G=(c.oa+371-c.ta)%7,G==4||G==3&&Ue(c.ua)||(W=1));else{W=52;var G=(c.oa+7-c.ta-1)%7;(G==4||G==5&&Ue(c.ua%400-1))&&W++}return S(W,2)},"%w":c=>c.oa,"%W":c=>S(Math.floor((c.ta+7-(c.oa+6)%7)/7),2),"%y":c=>(c.ua+1900).toString().substring(2),"%Y":c=>c.ua+1900,"%z":c=>{c=c.Ba;var W=0<=c;return c=Math.abs(c)/60,(W?"+":"-")+("0000"+(c/60*100+c%60)).slice(-4)},"%Z":c=>c.Ea,"%%":()=>"%"},s=s.replace(/%%/g,"\\0\\0");for(se in oe)s.includes(se)&&(s=s.replace(new RegExp(se,"g"),oe[se](m)));return s=s.replace(/\\0\\0/g,"%"),se=Ge(s),se.length>o?0:(ie.set(se,r>>>0),se.length-1)}var $={a:function(r,o,s){throw r>>>=0,new Oe(r).Aa(o>>>0,s>>>0),ve=r,re++,ve},e:function(){return 0},H:function(){},x:function(){},z:function(){},J:function(){return 0},F:function(){},A:function(){},E:function(){},g:function(){},y:function(){},v:function(){},G:function(){},w:function(){},k:()=>1,n:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getUTCSeconds(),E[s+4>>>2>>>0]=r.getUTCMinutes(),E[s+8>>>2>>>0]=r.getUTCHours(),E[s+12>>>2>>>0]=r.getUTCDate(),E[s+16>>>2>>>0]=r.getUTCMonth(),E[s+20>>>2>>>0]=r.getUTCFullYear()-1900,E[s+24>>>2>>>0]=r.getUTCDay(),E[s+28>>>2>>>0]=(r.getTime()-Date.UTC(r.getUTCFullYear(),0,1,0,0,0,0))/864e5|0},o:function(r,o,s){r=o+2097152>>>0<4194305-!!r?(r>>>0)+4294967296*o:NaN,s>>>=0,r=new Date(1e3*r),E[s>>>2>>>0]=r.getSeconds(),E[s+4>>>2>>>0]=r.getMinutes(),E[s+8>>>2>>>0]=r.getHours(),E[s+12>>>2>>>0]=r.getDate(),E[s+16>>>2>>>0]=r.getMonth(),E[s+20>>>2>>>0]=r.getFullYear()-1900,E[s+24>>>2>>>0]=r.getDay(),E[s+28>>>2>>>0]=(Ue(r.getFullYear())?ze:at)[r.getMonth()]+r.getDate()-1|0,E[s+36>>>2>>>0]=-(60*r.getTimezoneOffset()),o=new Date(r.getFullYear(),6,1).getTimezoneOffset();var m=new Date(r.getFullYear(),0,1).getTimezoneOffset();E[s+32>>>2>>>0]=(o!=m&&r.getTimezoneOffset()==Math.min(m,o))|0},p:function(r){r>>>=0;var o=new Date(E[r+20>>>2>>>0]+1900,E[r+16>>>2>>>0],E[r+12>>>2>>>0],E[r+8>>>2>>>0],E[r+4>>>2>>>0],E[r>>>2>>>0],0),s=E[r+32>>>2>>>0],m=o.getTimezoneOffset(),O=new Date(o.getFullYear(),6,1).getTimezoneOffset(),S=new Date(o.getFullYear(),0,1).getTimezoneOffset(),R=Math.min(S,O);return 0>s?E[r+32>>>2>>>0]=+(O!=S&&R==m):0<s!=(R==m)&&(O=Math.max(S,O),o.setTime(o.getTime()+6e4*((0<s?R:O)-m))),E[r+24>>>2>>>0]=o.getDay(),E[r+28>>>2>>>0]=(Ue(o.getFullYear())?ze:at)[o.getMonth()]+o.getDate()-1|0,E[r>>>2>>>0]=o.getSeconds(),E[r+4>>>2>>>0]=o.getMinutes(),E[r+8>>>2>>>0]=o.getHours(),E[r+12>>>2>>>0]=o.getDate(),E[r+16>>>2>>>0]=o.getMonth(),E[r+20>>>2>>>0]=o.getYear(),r=o.getTime(),isNaN(r)?(E[Ye()>>>2>>>0]=61,r=-1):r/=1e3,Je((Ee=r,1<=+Math.abs(Ee)?0<Ee?+Math.floor(Ee/4294967296)>>>0:~~+Math.ceil((Ee-+(~~Ee>>>0))/4294967296)>>>0:0)),r>>>0},l:function(){return-52},m:function(){},t:function(r,o,s){function m(le){return(le=le.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?le[1]:"GMT"}s>>>=0;var O=new Date().getFullYear(),S=new Date(O,0,1),R=new Date(O,6,1);O=S.getTimezoneOffset();var K=R.getTimezoneOffset();Y[r>>>0>>>2>>>0]=60*Math.max(O,K),E[o>>>0>>>2>>>0]=+(O!=K),r=m(S),o=m(R),r=De(r),o=De(o),K<O?(Y[s>>>2>>>0]=r,Y[s+4>>>2>>>0]=o):(Y[s>>>2>>>0]=o,Y[s+4>>>2>>>0]=r)},d:()=>{de("")},B:function(r,o,s){r>>>=0,o>>>=0,s>>>=0,Ne.length=0;for(var m;m=ae[o++>>>0];){var O=m!=105;O&=m!=112,s+=O&&s%8?4:0,Ne.push(m==112?Y[s>>>2>>>0]:m==105?E[s>>>2>>>0]:ue[s>>>3>>>0]),s+=O?8:4}return pe[r].apply(null,Ne)},h:()=>Date.now(),u:function(){return 4294901760},b:()=>performance.now(),I:function(r,o,s){return o>>>=0,ae.copyWithin(r>>>0>>>0,o>>>0,o+(s>>>0)>>>0)},s:function(r){r>>>=0;var o=ae.length;if(4294901760<r)return!1;for(var s=1;4>=s;s*=2){var m=o*(1+.2/s);m=Math.min(m,r+100663296);var O=Math;m=Math.max(r,m);e:{O=(O.min.call(O,4294901760,m+(65536-m%65536)%65536)-N.buffer.byteLength+65535)/65536;try{N.grow(O),Re();var S=1;break e}catch{}S=void 0}if(S)return!0}return!1},C:function(r,o){r>>>=0,o>>>=0;var s=0;return He().forEach((m,O)=>{var S=o+s;for(O=Y[r+4*O>>>2>>>0]=S,S=0;S<m.length;++S)ie[O++>>>0>>>0]=m.charCodeAt(S);ie[O>>>0>>>0]=0,s+=m.length+1}),0},D:function(r,o){r>>>=0,o>>>=0;var s=He();Y[r>>>2>>>0]=s.length;var m=0;return s.forEach(O=>m+=O.length+1),Y[o>>>2>>>0]=m,0},f:()=>52,j:function(){return 52},q:function(){return 70},i:function(r,o,s,m){o>>>=0,s>>>=0,m>>>=0;for(var O=0,S=0;S<s;S++){var R=Y[o>>>2>>>0],K=Y[o+4>>>2>>>0];o+=8;for(var le=0;le<K;le++){var oe=ae[R+le>>>0],se=Le[r];oe===0||oe===10?((r===1?_:x)(Ce(se,0)),se.length=0):se.push(oe)}O+=K}return Y[m>>>2>>>0]=O,0},r:ot,c:function(r,o,s,m){return ot(r>>>0,o>>>0,s>>>0,m>>>0)}},C=function(){function r(s){return C=s.exports,C=ut(),N=C.K,Re(),ee.unshift(C.L),ce--,ce==0&&(P!==null&&(clearInterval(P),P=null),te&&(s=te,te=null,s())),C}var o={a:$};if(ce++,a.instantiateWasm)try{return a.instantiateWasm(o,r)}catch(s){x(`Module.instantiateWasm callback failed with error: ${s}`),l(s)}return Fe(o,function(s){r(s.instance)}).catch(l),{}}();a._OrtInit=(r,o)=>(a._OrtInit=C.M)(r,o),a._OrtGetLastError=(r,o)=>(a._OrtGetLastError=C.N)(r,o),a._OrtCreateSessionOptions=(r,o,s,m,O,S,R,K,le,oe)=>(a._OrtCreateSessionOptions=C.O)(r,o,s,m,O,S,R,K,le,oe),a._OrtAppendExecutionProvider=(r,o)=>(a._OrtAppendExecutionProvider=C.P)(r,o),a._OrtAddFreeDimensionOverride=(r,o,s)=>(a._OrtAddFreeDimensionOverride=C.Q)(r,o,s),a._OrtAddSessionConfigEntry=(r,o,s)=>(a._OrtAddSessionConfigEntry=C.R)(r,o,s),a._OrtReleaseSessionOptions=r=>(a._OrtReleaseSessionOptions=C.S)(r),a._OrtCreateSession=(r,o,s)=>(a._OrtCreateSession=C.T)(r,o,s),a._OrtReleaseSession=r=>(a._OrtReleaseSession=C.U)(r),a._OrtGetInputOutputCount=(r,o,s)=>(a._OrtGetInputOutputCount=C.V)(r,o,s),a._OrtGetInputName=(r,o)=>(a._OrtGetInputName=C.W)(r,o),a._OrtGetOutputName=(r,o)=>(a._OrtGetOutputName=C.X)(r,o),a._OrtFree=r=>(a._OrtFree=C.Y)(r),a._OrtCreateTensor=(r,o,s,m,O,S)=>(a._OrtCreateTensor=C.Z)(r,o,s,m,O,S),a._OrtGetTensorData=(r,o,s,m,O)=>(a._OrtGetTensorData=C._)(r,o,s,m,O),a._OrtReleaseTensor=r=>(a._OrtReleaseTensor=C.$)(r),a._OrtCreateRunOptions=(r,o,s,m)=>(a._OrtCreateRunOptions=C.aa)(r,o,s,m),a._OrtAddRunConfigEntry=(r,o,s)=>(a._OrtAddRunConfigEntry=C.ba)(r,o,s),a._OrtReleaseRunOptions=r=>(a._OrtReleaseRunOptions=C.ca)(r),a._OrtCreateBinding=r=>(a._OrtCreateBinding=C.da)(r),a._OrtBindInput=(r,o,s)=>(a._OrtBindInput=C.ea)(r,o,s),a._OrtBindOutput=(r,o,s,m)=>(a._OrtBindOutput=C.fa)(r,o,s,m),a._OrtClearBoundOutputs=r=>(a._OrtClearBoundOutputs=C.ga)(r),a._OrtReleaseBinding=r=>(a._OrtReleaseBinding=C.ha)(r),a._OrtRunWithBinding=(r,o,s,m,O)=>(a._OrtRunWithBinding=C.ia)(r,o,s,m,O),a._OrtRun=(r,o,s,m,O,S,R,K)=>(a._OrtRun=C.ja)(r,o,s,m,O,S,R,K),a._OrtEndProfiling=r=>(a._OrtEndProfiling=C.ka)(r);var Ye=()=>(Ye=C.la)(),st=a._malloc=r=>(st=a._malloc=C.ma)(r);a._free=r=>(a._free=C.na)(r);var Je=r=>(Je=C.pa)(r),it=()=>(it=C.qa)(),M=r=>(M=C.ra)(r),Be=r=>(Be=C.sa)(r);function ut(){var r=C;r=Object.assign({},r);var o=m=>()=>m()>>>0,s=m=>O=>m(O)>>>0;return r.la=o(r.la),r.ma=s(r.ma),r.qa=o(r.qa),r.sa=s(r.sa),r}a.stackAlloc=Be,a.stackSave=it,a.stackRestore=M,a.UTF8ToString=be,a.stringToUTF8=(r,o,s)=>ke(r,ae,o,s),a.lengthBytesUTF8=_e;var xe;te=function r(){xe||Xe(),xe||(te=r)};function Xe(){if(!(0<ce)){if(a.preRun)for(typeof a.preRun=="function"&&(a.preRun=[a.preRun]);a.preRun.length;){var r=a.preRun.shift();Ie.unshift(r)}for(;0<Ie.length;)Ie.shift()(a);if(!(0<ce||xe||(xe=!0,a.calledRun=!0,he))){for(;0<ee.length;)ee.shift()(a);for(h(a);0<j.length;)j.shift()(a)}}}return Xe(),d.ready}})();typeof mr=="object"&&typeof xt=="object"?xt.exports=pr:typeof define=="function"&&define.amd&&define([],()=>pr)});var hr=et(()=>{});var yr=et(()=>{});var br={};Tt(br,{cpus:()=>rn});var rn,wr=St(()=>{rn=void 0});var _r=et((vr,Ft)=>{"use strict";var Or=(()=>{var u=typeof document<"u"&&document.currentScript?document.currentScript.src:void 0;return typeof __filename<"u"&&(u=u||__filename),function(d={}){function a(){return j.buffer!=de.buffer&&we(),de}function h(){return j.buffer!=de.buffer&&we(),ge}function l(){return j.buffer!=de.buffer&&we(),ye}function w(){return j.buffer!=de.buffer&&we(),J}function g(){return j.buffer!=de.buffer&&we(),fe}var i=d,A,D;i.ready=new Promise((e,t)=>{A=e,D=t});var I=Object.assign({},i),B="./this.program",F=(e,t)=>{throw t},U=typeof window=="object",k=typeof importScripts=="function",L=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string",_=i.ENVIRONMENT_IS_PTHREAD||!1,x="";function N(e){return i.locateFile?i.locateFile(e,x):x+e}var he,ie,ae;if(L){var E=(Mt(),tt(At)),Y=(Dt(),tt(Ct));x=k?Y.dirname(x)+"/":__dirname+"/",he=(t,n)=>(t=be(t)?new URL(t):Y.normalize(t),E.readFileSync(t,n?void 0:"utf8")),ae=t=>(t=he(t,!0),t.buffer||(t=new Uint8Array(t)),t),ie=(t,n,f,y=!0)=>{t=be(t)?new URL(t):Y.normalize(t),E.readFile(t,y?void 0:"utf8",(b,v)=>{b?f(b):n(y?v.buffer:v)})},!i.thisProgram&&1<process.argv.length&&(B=process.argv[1].replace(/\\\\/g,"/")),process.argv.slice(2),F=(t,n)=>{throw process.exitCode=t,n},i.inspect=()=>"[Emscripten Module object]";let e;try{e=hr()}catch(t){throw console.error(\'The "worker_threads" module is not supported in this node.js build - perhaps a newer version is needed?\'),t}global.Worker=e.Worker}else(U||k)&&(k?x=self.location.href:typeof document<"u"&&document.currentScript&&(x=document.currentScript.src),typeof u<"u"&&u&&(x=u),x.indexOf("blob:")!==0?x=x.substr(0,x.replace(/[?#].*/,"").lastIndexOf("/")+1):x="",L||(he=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.send(null),t.responseText},k&&(ae=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),ie=(e,t,n)=>{var f=new XMLHttpRequest;f.open("GET",e,!0),f.responseType="arraybuffer",f.onload=()=>{f.status==200||f.status==0&&f.response?t(f.response):n()},f.onerror=n,f.send(null)}));L&&typeof performance>"u"&&(global.performance=yr().performance);var ue=console.log.bind(console),Re=console.error.bind(console);L&&(ue=(...e)=>E.writeSync(1,e.join(" ")+`\n`),Re=(...e)=>E.writeSync(2,e.join(" ")+`\n`));var Ie=ue,ee=Re;Object.assign(i,I),I=null,typeof WebAssembly!="object"&&Z("no native wasm support detected");var j,ce,P=!1,te,de,ge,ye,J,fe;function we(){var e=j.buffer;i.HEAP8=de=new Int8Array(e),i.HEAP16=new Int16Array(e),i.HEAPU8=ge=new Uint8Array(e),i.HEAPU16=new Uint16Array(e),i.HEAP32=ye=new Int32Array(e),i.HEAPU32=J=new Uint32Array(e),i.HEAPF32=new Float32Array(e),i.HEAPF64=fe=new Float64Array(e)}var Ae=16777216;if(_)j=i.wasmMemory;else if(i.wasmMemory)j=i.wasmMemory;else if(j=new WebAssembly.Memory({initial:Ae/65536,maximum:65536,shared:!0}),!(j.buffer instanceof SharedArrayBuffer))throw ee("requested a shared WebAssembly.Memory but the returned buffer is not a SharedArrayBuffer, indicating that while the browser has SharedArrayBuffer it does not have WebAssembly threads support - you may need to set a flag"),L&&ee("(on node you may need: --experimental-wasm-threads --experimental-wasm-bulk-memory and/or recent version)"),Error("bad memory");we(),Ae=j.buffer.byteLength;var Me=[],Fe=[],Ee=[],pe=0,Oe=null,ve=null;function re(){if(pe--,pe==0&&(Oe!==null&&(clearInterval(Oe),Oe=null),ve)){var e=ve;ve=null,e()}}function Z(e){throw e="Aborted("+e+")",ee(e),P=!0,te=1,e=new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info."),D(e),e}var Ce=e=>e.startsWith("data:application/octet-stream;base64,"),be=e=>e.startsWith("file://"),_e;_e="ort-wasm-threaded.wasm",Ce(_e)||(_e=N(_e));function ke(e){if(ae)return ae(e);throw"both async and sync fetching of the wasm failed"}function Ue(e){if(U||k){if(typeof fetch=="function"&&!be(e))return fetch(e,{credentials:"same-origin"}).then(t=>{if(!t.ok)throw"failed to load wasm binary file at \'"+e+"\'";return t.arrayBuffer()}).catch(()=>ke(e));if(ie)return new Promise((t,n)=>{ie(e,f=>t(new Uint8Array(f)),n)})}return Promise.resolve().then(()=>ke(e))}function ze(e,t,n){return Ue(e).then(f=>WebAssembly.instantiate(f,t)).then(f=>f).then(n,f=>{ee(`failed to asynchronously prepare wasm: ${f}`),Z(f)})}function at(e,t){var n=_e;return typeof WebAssembly.instantiateStreaming!="function"||Ce(n)||be(n)||L||typeof fetch!="function"?ze(n,e,t):fetch(n,{credentials:"same-origin"}).then(f=>WebAssembly.instantiateStreaming(f,e).then(t,function(y){return ee(`wasm streaming compile failed: ${y}`),ee("falling back to ArrayBuffer instantiation"),ze(n,e,t)}))}var De,Ne={921276:(e,t,n,f)=>{if(typeof i>"u"||!i.cb)return 1;if(e=Ge(e>>>0),e.startsWith("./")&&(e=e.substring(2)),e=i.cb.get(e),!e)return 2;if(t>>>=0,n>>>=0,f>>>=0,t+n>e.byteLength)return 3;try{return h().set(e.subarray(t,t+n),f>>>0),0}catch{return 4}}};function Pe(e){this.name="ExitStatus",this.message=`Program terminated with exit(${e})`,this.status=e}var He=e=>{e.terminate(),e.onmessage=()=>{}},$e=e=>{M.Pa.length==0&&(Je(),M.Ya(M.Pa[0]));var t=M.Pa.pop();if(!t)return 6;M.Qa.push(t),M.Ma[e.Oa]=t,t.Oa=e.Oa;var n={cmd:"run",start_routine:e.kb,arg:e.hb,pthread_ptr:e.Oa};return L&&t.unref(),t.postMessage(n,e.qb),0},Le=0,qe=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0,Ve=(e,t,n)=>{t>>>=0;var f=t+n;for(n=t;e[n]&&!(n>=f);)++n;if(16<n-t&&e.buffer&&qe)return qe.decode(e.buffer instanceof SharedArrayBuffer?e.slice(t,n):e.subarray(t,n));for(f="";t<n;){var y=e[t++];if(y&128){var b=e[t++]&63;if((y&224)==192)f+=String.fromCharCode((y&31)<<6|b);else{var v=e[t++]&63;y=(y&240)==224?(y&15)<<12|b<<6|v:(y&7)<<18|b<<12|v<<6|e[t++]&63,65536>y?f+=String.fromCharCode(y):(y-=65536,f+=String.fromCharCode(55296|y>>10,56320|y&1023))}}else f+=String.fromCharCode(y)}return f},Ge=(e,t)=>(e>>>=0)?Ve(h(),e,t):"",ot=e=>{var t=vt();return e=e(),ct(t),e};function $(e,t){var n=arguments.length-2,f=arguments;return ot(()=>{for(var y=_t(8*n),b=y>>>3,v=0;v<n;v++){var z=f[2+v];g()[b+v>>>0]=z}return ar(e,n,y,t)})}function C(e){if(_)return $(0,1,e);te=e,0<Le||(M.lb(),i.onExit?.(e),P=!0),F(e,new Pe(e))}var Ye=e=>{if(te=e,_)throw ut(e),"unwind";C(e)};function st(){for(var e=i.numThreads;e--;)Je();Me.unshift(()=>{pe++,it(()=>re())})}function Je(){var e=N("ort-wasm-threaded.worker.js");e=new Worker(e),M.Pa.push(e)}function it(e){_?e():Promise.all(M.Pa.map(M.Ya)).then(e)}var M={Pa:[],Qa:[],bb:[],Ma:{},Wa(){_?(M.receiveObjectTransfer=M.jb,M.threadInitTLS=M.ab,M.setExitStatus=M.$a):st()},$a:e=>te=e,tb:["$terminateWorker"],lb:()=>{for(var e of M.Qa)He(e);for(e of M.Pa)He(e);M.Pa=[],M.Qa=[],M.Ma=[]},Za:e=>{var t=e.Oa;delete M.Ma[t],M.Pa.push(e),M.Qa.splice(M.Qa.indexOf(e),1),e.Oa=0,wt(t)},jb(){},ab(){M.bb.forEach(e=>e())},Ya:e=>new Promise(t=>{e.onmessage=b=>{b=b.data;var v=b.cmd;if(b.targetThread&&b.targetThread!=lt()){var z=M.Ma[b.targetThread];z?z.postMessage(b,b.transferList):ee(`Internal error! Worker sent a message "${v}" to target pthread ${b.targetThread}, but that thread no longer exists!`)}else v==="checkMailbox"?ft():v==="spawnThread"?$e(b):v==="cleanupThread"?M.Za(M.Ma[b.thread]):v==="killThread"?(b=b.thread,v=M.Ma[b],delete M.Ma[b],He(v),wt(b),M.Qa.splice(M.Qa.indexOf(v),1),v.Oa=0):v==="cancelThread"?M.Ma[b.thread].postMessage({cmd:"cancel"}):v==="loaded"?(e.loaded=!0,L&&!e.Oa&&e.unref(),t(e)):v==="alert"?alert(`Thread ${b.threadId}: ${b.text}`):b.target==="setimmediate"?e.postMessage(b):v==="callHandler"?i[b.handler](...b.args):v&&ee(`worker sent an unknown command ${v}`)},e.onerror=b=>{throw ee(`worker sent an error! ${b.filename}:${b.lineno}: ${b.message}`),b},L&&(e.on("message",b=>e.onmessage({data:b})),e.on("error",b=>e.onerror(b)));var n=[],f=["onExit"],y;for(y of f)i.hasOwnProperty(y)&&n.push(y);e.postMessage({cmd:"load",handlers:n,urlOrBlob:i.mainScriptUrlOrBlob||u,wasmMemory:j,wasmModule:ce})})};i.PThread=M;var Be=e=>{for(;0<e.length;)e.shift()(i)};i.establishStackSpace=()=>{var e=lt(),t=w()[e+52>>>2>>>0];e=w()[e+56>>>2>>>0],ir(t,t-e),ct(t)};function ut(e){if(_)return $(1,0,e);Ye(e)}var xe=[],Xe;i.invokeEntryPoint=(e,t)=>{var n=xe[e];n||(e>=xe.length&&(xe.length=e+1),xe[e]=n=Xe.get(e)),e=n(t),0<Le?M.$a(e):Ot(e)};function r(e){this.Va=e-24,this.gb=function(t){w()[this.Va+4>>>2>>>0]=t},this.fb=function(t){w()[this.Va+8>>>2>>>0]=t},this.Wa=function(t,n){this.eb(),this.gb(t),this.fb(n)},this.eb=function(){w()[this.Va+16>>>2>>>0]=0}}var o=0,s=0;function m(e,t,n,f){return _?$(2,1,e,t,n,f):O(e,t,n,f)}function O(e,t,n,f){if(e>>>=0,t>>>=0,n>>>=0,f>>>=0,typeof SharedArrayBuffer>"u")return ee("Current environment does not support SharedArrayBuffer, pthreads are not available!"),6;var y=[];return _&&y.length===0?m(e,t,n,f):(e={kb:n,Oa:e,hb:f,qb:y},_?(e.sb="spawnThread",postMessage(e,y),0):$e(e))}function S(e,t,n){return _?$(3,1,e,t,n):0}function R(e,t){if(_)return $(4,1,e,t)}var K=e=>{for(var t=0,n=0;n<e.length;++n){var f=e.charCodeAt(n);127>=f?t++:2047>=f?t+=2:55296<=f&&57343>=f?(t+=4,++n):t+=3}return t},le=(e,t,n,f)=>{if(n>>>=0,!(0<f))return 0;var y=n;f=n+f-1;for(var b=0;b<e.length;++b){var v=e.charCodeAt(b);if(55296<=v&&57343>=v){var z=e.charCodeAt(++b);v=65536+((v&1023)<<10)|z&1023}if(127>=v){if(n>=f)break;t[n++>>>0]=v}else{if(2047>=v){if(n+1>=f)break;t[n++>>>0]=192|v>>6}else{if(65535>=v){if(n+2>=f)break;t[n++>>>0]=224|v>>12}else{if(n+3>=f)break;t[n++>>>0]=240|v>>18,t[n++>>>0]=128|v>>12&63}t[n++>>>0]=128|v>>6&63}t[n++>>>0]=128|v&63}}return t[n>>>0]=0,n-y},oe=(e,t,n)=>le(e,h(),t,n);function se(e,t){if(_)return $(5,1,e,t)}function Qe(e,t,n){if(_)return $(6,1,e,t,n)}function Ze(e,t,n){return _?$(7,1,e,t,n):0}function c(e,t){if(_)return $(8,1,e,t)}function W(e,t,n){if(_)return $(9,1,e,t,n)}function G(e,t,n,f){if(_)return $(10,1,e,t,n,f)}function Se(e,t,n,f){if(_)return $(11,1,e,t,n,f)}function Ke(e,t,n,f){if(_)return $(12,1,e,t,n,f)}function Bt(e){if(_)return $(13,1,e)}function Wt(e,t){if(_)return $(14,1,e,t)}function kt(e,t,n){if(_)return $(15,1,e,t,n)}function mt(e){e>>>=0,typeof Atomics.rb=="function"&&(Atomics.rb(l(),e>>>2,e).value.then(ft),e+=128,Atomics.store(l(),e>>>2,1))}i.__emscripten_thread_mailbox_await=mt;var ft=()=>{var e=lt();if(e&&(mt(e),e=or,!P))try{if(e(),!(0<Le))try{_?Ot(te):Ye(te)}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}}catch(t){t instanceof Pe||t=="unwind"||F(1,t)}};i.checkMailbox=ft;var gt=[],je=e=>e%4===0&&(e%100!==0||e%400===0),Nt=[0,31,60,91,121,152,182,213,244,274,305,335],Ht=[0,31,59,90,120,151,181,212,243,273,304,334];function $t(e,t,n,f,y,b,v,z){return _?$(16,1,e,t,n,f,y,b,v,z):-52}function Gt(e,t,n,f,y,b,v){if(_)return $(17,1,e,t,n,f,y,b,v)}var Yt=e=>{var t=K(e)+1,n=rr(t);return n&&oe(e,n,t),n},ht=[],yt={},jt=()=>{if(!bt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:B||"./this.program"},t;for(t in yt)yt[t]===void 0?delete e[t]:e[t]=yt[t];var n=[];for(t in e)n.push(`${t}=${e[t]}`);bt=n}return bt},bt;function zt(e,t){if(_)return $(18,1,e,t);e>>>=0,t>>>=0;var n=0;return jt().forEach((f,y)=>{var b=t+n;for(y=w()[e+4*y>>>2>>>0]=b,b=0;b<f.length;++b)a()[y++>>>0>>>0]=f.charCodeAt(b);a()[y>>>0>>>0]=0,n+=f.length+1}),0}function qt(e,t){if(_)return $(19,1,e,t);e>>>=0,t>>>=0;var n=jt();w()[e>>>2>>>0]=n.length;var f=0;return n.forEach(y=>f+=y.length+1),w()[t>>>2>>>0]=f,0}function Vt(e){return _?$(20,1,e):52}function Jt(e,t,n,f){return _?$(21,1,e,t,n,f):52}function Xt(e,t,n,f,y){return _?$(22,1,e,t,n,f,y):70}var Gr=[null,[],[]];function Qt(e,t,n,f){if(_)return $(23,1,e,t,n,f);t>>>=0,n>>>=0,f>>>=0;for(var y=0,b=0;b<n;b++){var v=w()[t>>>2>>>0],z=w()[t+4>>>2>>>0];t+=8;for(var Te=0;Te<z;Te++){var ne=h()[v+Te>>>0],me=Gr[e];ne===0||ne===10?((e===1?Ie:ee)(Ve(me,0)),me.length=0):me.push(ne)}y+=z}return w()[f>>>2>>>0]=y,0}var Zt=[31,29,31,30,31,30,31,31,30,31,30,31],Kt=[31,28,31,30,31,30,31,31,30,31,30,31];function Yr(e){var t=Array(K(e)+1);return le(e,t,0,t.length),t}var jr=(e,t)=>{a().set(e,t>>>0)};function er(e,t,n,f){function y(p,H,q){for(p=typeof p=="number"?p.toString():p||"";p.length<H;)p=q[0]+p;return p}function b(p,H){return y(p,H,"0")}function v(p,H){function q(cr){return 0>cr?-1:0<cr?1:0}var We;return(We=q(p.getFullYear()-H.getFullYear()))===0&&(We=q(p.getMonth()-H.getMonth()))===0&&(We=q(p.getDate()-H.getDate())),We}function z(p){switch(p.getDay()){case 0:return new Date(p.getFullYear()-1,11,29);case 1:return p;case 2:return new Date(p.getFullYear(),0,3);case 3:return new Date(p.getFullYear(),0,2);case 4:return new Date(p.getFullYear(),0,1);case 5:return new Date(p.getFullYear()-1,11,31);case 6:return new Date(p.getFullYear()-1,11,30)}}function Te(p){var H=p.Ra;for(p=new Date(new Date(p.Sa+1900,0,1).getTime());0<H;){var q=p.getMonth(),We=(je(p.getFullYear())?Zt:Kt)[q];if(H>We-p.getDate())H-=We-p.getDate()+1,p.setDate(1),11>q?p.setMonth(q+1):(p.setMonth(0),p.setFullYear(p.getFullYear()+1));else{p.setDate(p.getDate()+H);break}}return q=new Date(p.getFullYear()+1,0,4),H=z(new Date(p.getFullYear(),0,4)),q=z(q),0>=v(H,p)?0>=v(q,p)?p.getFullYear()+1:p.getFullYear():p.getFullYear()-1}e>>>=0,t>>>=0,n>>>=0,f>>>=0;var ne=w()[f+40>>>2>>>0];f={ob:l()[f>>>2>>>0],nb:l()[f+4>>>2>>>0],Ta:l()[f+8>>>2>>>0],Xa:l()[f+12>>>2>>>0],Ua:l()[f+16>>>2>>>0],Sa:l()[f+20>>>2>>>0],Na:l()[f+24>>>2>>>0],Ra:l()[f+28>>>2>>>0],ub:l()[f+32>>>2>>>0],mb:l()[f+36>>>2>>>0],pb:ne?Ge(ne):""},n=Ge(n),ne={"%c":"%a %b %d %H:%M:%S %Y","%D":"%m/%d/%y","%F":"%Y-%m-%d","%h":"%b","%r":"%I:%M:%S %p","%R":"%H:%M","%T":"%H:%M:%S","%x":"%m/%d/%y","%X":"%H:%M:%S","%Ec":"%c","%EC":"%C","%Ex":"%m/%d/%y","%EX":"%H:%M:%S","%Ey":"%y","%EY":"%Y","%Od":"%d","%Oe":"%e","%OH":"%H","%OI":"%I","%Om":"%m","%OM":"%M","%OS":"%S","%Ou":"%u","%OU":"%U","%OV":"%V","%Ow":"%w","%OW":"%W","%Oy":"%y"};for(var me in ne)n=n.replace(new RegExp(me,"g"),ne[me]);var fr="Sunday Monday Tuesday Wednesday Thursday Friday Saturday".split(" "),lr="January February March April May June July August September October November December".split(" ");ne={"%a":p=>fr[p.Na].substring(0,3),"%A":p=>fr[p.Na],"%b":p=>lr[p.Ua].substring(0,3),"%B":p=>lr[p.Ua],"%C":p=>b((p.Sa+1900)/100|0,2),"%d":p=>b(p.Xa,2),"%e":p=>y(p.Xa,2," "),"%g":p=>Te(p).toString().substring(2),"%G":p=>Te(p),"%H":p=>b(p.Ta,2),"%I":p=>(p=p.Ta,p==0?p=12:12<p&&(p-=12),b(p,2)),"%j":p=>{for(var H=0,q=0;q<=p.Ua-1;H+=(je(p.Sa+1900)?Zt:Kt)[q++]);return b(p.Xa+H,3)},"%m":p=>b(p.Ua+1,2),"%M":p=>b(p.nb,2),"%n":()=>`\n`,"%p":p=>0<=p.Ta&&12>p.Ta?"AM":"PM","%S":p=>b(p.ob,2),"%t":()=>"	","%u":p=>p.Na||7,"%U":p=>b(Math.floor((p.Ra+7-p.Na)/7),2),"%V":p=>{var H=Math.floor((p.Ra+7-(p.Na+6)%7)/7);if(2>=(p.Na+371-p.Ra-2)%7&&H++,H)H==53&&(q=(p.Na+371-p.Ra)%7,q==4||q==3&&je(p.Sa)||(H=1));else{H=52;var q=(p.Na+7-p.Ra-1)%7;(q==4||q==5&&je(p.Sa%400-1))&&H++}return b(H,2)},"%w":p=>p.Na,"%W":p=>b(Math.floor((p.Ra+7-(p.Na+6)%7)/7),2),"%y":p=>(p.Sa+1900).toString().substring(2),"%Y":p=>p.Sa+1900,"%z":p=>{p=p.mb;var H=0<=p;return p=Math.abs(p)/60,(H?"+":"-")+("0000"+(p/60*100+p%60)).slice(-4)},"%Z":p=>p.pb,"%%":()=>"%"},n=n.replace(/%%/g,"\\0\\0");for(me in ne)n.includes(me)&&(n=n.replace(new RegExp(me,"g"),ne[me](f)));return n=n.replace(/\\0\\0/g,"%"),me=Yr(n),me.length>t?0:(jr(me,e),me.length-1)}M.Wa();var zr=[C,ut,m,S,R,se,Qe,Ze,c,W,G,Se,Ke,Bt,Wt,kt,$t,Gt,zt,qt,Vt,Jt,Xt,Qt],qr={b:function(e,t,n){throw e>>>=0,new r(e).Wa(t>>>0,n>>>0),o=e,s++,o},L:function(e){nr(e>>>0,!k,1,!U,131072,!1),M.ab()},j:function(e){e>>>=0,_?postMessage({cmd:"cleanupThread",thread:e}):M.Za(M.Ma[e])},H:O,h:S,S:R,D:se,F:Qe,T:Ze,Q:c,J:W,P:G,n:Se,E:Ke,B:Bt,R:Wt,C:kt,p:()=>1,z:function(e,t){e>>>=0,e==t>>>0?setTimeout(()=>ft()):_?postMessage({targetThread:e,cmd:"checkMailbox"}):(e=M.Ma[e])&&e.postMessage({cmd:"checkMailbox"})},I:function(e,t,n,f){t>>>=0,gt.length=n,f=f>>>0>>>3;for(var y=0;y<n;y++)gt[y]=g()[f+y>>>0];return e=0>e?Ne[-e-1]:zr[e],M.ib=t,t=e.apply(null,gt),M.ib=0,t},K:mt,o:function(e){L&&M.Ma[e>>>0].ref()},s:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getUTCSeconds(),l()[n+4>>>2>>>0]=e.getUTCMinutes(),l()[n+8>>>2>>>0]=e.getUTCHours(),l()[n+12>>>2>>>0]=e.getUTCDate(),l()[n+16>>>2>>>0]=e.getUTCMonth(),l()[n+20>>>2>>>0]=e.getUTCFullYear()-1900,l()[n+24>>>2>>>0]=e.getUTCDay(),e=(e.getTime()-Date.UTC(e.getUTCFullYear(),0,1,0,0,0,0))/864e5|0,l()[n+28>>>2>>>0]=e},t:function(e,t,n){e=t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,n>>>=0,e=new Date(1e3*e),l()[n>>>2>>>0]=e.getSeconds(),l()[n+4>>>2>>>0]=e.getMinutes(),l()[n+8>>>2>>>0]=e.getHours(),l()[n+12>>>2>>>0]=e.getDate(),l()[n+16>>>2>>>0]=e.getMonth(),l()[n+20>>>2>>>0]=e.getFullYear()-1900,l()[n+24>>>2>>>0]=e.getDay(),t=(je(e.getFullYear())?Nt:Ht)[e.getMonth()]+e.getDate()-1|0,l()[n+28>>>2>>>0]=t,l()[n+36>>>2>>>0]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var f=new Date(e.getFullYear(),0,1).getTimezoneOffset();e=(t!=f&&e.getTimezoneOffset()==Math.min(f,t))|0,l()[n+32>>>2>>>0]=e},u:function(e){e>>>=0;var t=new Date(l()[e+20>>>2>>>0]+1900,l()[e+16>>>2>>>0],l()[e+12>>>2>>>0],l()[e+8>>>2>>>0],l()[e+4>>>2>>>0],l()[e>>>2>>>0],0),n=l()[e+32>>>2>>>0],f=t.getTimezoneOffset(),y=new Date(t.getFullYear(),6,1).getTimezoneOffset(),b=new Date(t.getFullYear(),0,1).getTimezoneOffset(),v=Math.min(b,y);return 0>n?l()[e+32>>>2>>>0]=+(y!=b&&v==f):0<n!=(v==f)&&(y=Math.max(b,y),t.setTime(t.getTime()+6e4*((0<n?v:y)-f))),l()[e+24>>>2>>>0]=t.getDay(),n=(je(t.getFullYear())?Nt:Ht)[t.getMonth()]+t.getDate()-1|0,l()[e+28>>>2>>>0]=n,l()[e>>>2>>>0]=t.getSeconds(),l()[e+4>>>2>>>0]=t.getMinutes(),l()[e+8>>>2>>>0]=t.getHours(),l()[e+12>>>2>>>0]=t.getDate(),l()[e+16>>>2>>>0]=t.getMonth(),l()[e+20>>>2>>>0]=t.getYear(),e=t.getTime(),isNaN(e)?(l()[tr()>>>2>>>0]=61,e=-1):e/=1e3,sr((De=e,1<=+Math.abs(De)?0<De?+Math.floor(De/4294967296)>>>0:~~+Math.ceil((De-+(~~De>>>0))/4294967296)>>>0:0)),e>>>0},q:$t,r:Gt,y:function(e,t,n){function f(ne){return(ne=ne.toTimeString().match(/\\(([A-Za-z ]+)\\)$/))?ne[1]:"GMT"}e>>>=0,t>>>=0,n>>>=0;var y=new Date().getFullYear(),b=new Date(y,0,1),v=new Date(y,6,1);y=b.getTimezoneOffset();var z=v.getTimezoneOffset(),Te=Math.max(y,z);w()[e>>>2>>>0]=60*Te,l()[t>>>2>>>0]=+(y!=z),e=f(b),t=f(v),e=Yt(e),t=Yt(t),z<y?(w()[n>>>2>>>0]=e,w()[n+4>>>2>>>0]=t):(w()[n>>>2>>>0]=t,w()[n+4>>>2>>>0]=e)},c:()=>{Z("")},O:function(e,t,n){e>>>=0,t>>>=0,n>>>=0,ht.length=0;for(var f;f=h()[t++>>>0];){var y=f!=105;y&=f!=112,n+=y&&n%8?4:0,ht.push(f==112?w()[n>>>2>>>0]:f==105?l()[n>>>2>>>0]:g()[n>>>3>>>0]),n+=y?8:4}return Ne[e].apply(null,ht)},k:()=>{},i:()=>Date.now(),U:()=>{throw Le+=1,"unwind"},A:function(){return 4294901760},e:()=>performance.timeOrigin+performance.now(),f:()=>L?(wr(),tt(br)).cpus().length:navigator.hardwareConcurrency,x:function(e){e>>>=0;var t=h().length;if(e<=t||4294901760<e)return!1;for(var n=1;4>=n;n*=2){var f=t*(1+.2/n);f=Math.min(f,e+100663296);var y=Math;f=Math.max(e,f);e:{y=(y.min.call(y,4294901760,f+(65536-f%65536)%65536)-j.buffer.byteLength+65535)/65536;try{j.grow(y),we();var b=1;break e}catch{}b=void 0}if(b)return!0}return!1},M:zt,N:qt,G:Ye,g:Vt,m:Jt,v:Xt,l:Qt,a:j||i.wasmMemory,w:er,d:function(e,t,n,f){return er(e>>>0,t>>>0,n>>>0,f>>>0)}},T=function(){function e(n,f){return T=n.exports,T=Vr(),M.bb.push(T.za),Xe=T.Aa,Fe.unshift(T.V),ce=f,re(),T}var t={a:qr};if(pe++,i.instantiateWasm)try{return i.instantiateWasm(t,e)}catch(n){ee(`Module.instantiateWasm callback failed with error: ${n}`),D(n)}return at(t,function(n){e(n.instance,n.module)}).catch(D),{}}();i._OrtInit=(e,t)=>(i._OrtInit=T.W)(e,t),i._OrtGetLastError=(e,t)=>(i._OrtGetLastError=T.X)(e,t),i._OrtCreateSessionOptions=(e,t,n,f,y,b,v,z,Te,ne)=>(i._OrtCreateSessionOptions=T.Y)(e,t,n,f,y,b,v,z,Te,ne),i._OrtAppendExecutionProvider=(e,t)=>(i._OrtAppendExecutionProvider=T.Z)(e,t),i._OrtAddFreeDimensionOverride=(e,t,n)=>(i._OrtAddFreeDimensionOverride=T._)(e,t,n),i._OrtAddSessionConfigEntry=(e,t,n)=>(i._OrtAddSessionConfigEntry=T.$)(e,t,n),i._OrtReleaseSessionOptions=e=>(i._OrtReleaseSessionOptions=T.aa)(e),i._OrtCreateSession=(e,t,n)=>(i._OrtCreateSession=T.ba)(e,t,n),i._OrtReleaseSession=e=>(i._OrtReleaseSession=T.ca)(e),i._OrtGetInputOutputCount=(e,t,n)=>(i._OrtGetInputOutputCount=T.da)(e,t,n),i._OrtGetInputName=(e,t)=>(i._OrtGetInputName=T.ea)(e,t),i._OrtGetOutputName=(e,t)=>(i._OrtGetOutputName=T.fa)(e,t),i._OrtFree=e=>(i._OrtFree=T.ga)(e),i._OrtCreateTensor=(e,t,n,f,y,b)=>(i._OrtCreateTensor=T.ha)(e,t,n,f,y,b),i._OrtGetTensorData=(e,t,n,f,y)=>(i._OrtGetTensorData=T.ia)(e,t,n,f,y),i._OrtReleaseTensor=e=>(i._OrtReleaseTensor=T.ja)(e),i._OrtCreateRunOptions=(e,t,n,f)=>(i._OrtCreateRunOptions=T.ka)(e,t,n,f),i._OrtAddRunConfigEntry=(e,t,n)=>(i._OrtAddRunConfigEntry=T.la)(e,t,n),i._OrtReleaseRunOptions=e=>(i._OrtReleaseRunOptions=T.ma)(e),i._OrtCreateBinding=e=>(i._OrtCreateBinding=T.na)(e),i._OrtBindInput=(e,t,n)=>(i._OrtBindInput=T.oa)(e,t,n),i._OrtBindOutput=(e,t,n,f)=>(i._OrtBindOutput=T.pa)(e,t,n,f),i._OrtClearBoundOutputs=e=>(i._OrtClearBoundOutputs=T.qa)(e),i._OrtReleaseBinding=e=>(i._OrtReleaseBinding=T.ra)(e),i._OrtRunWithBinding=(e,t,n,f,y)=>(i._OrtRunWithBinding=T.sa)(e,t,n,f,y),i._OrtRun=(e,t,n,f,y,b,v,z)=>(i._OrtRun=T.ta)(e,t,n,f,y,b,v,z),i._OrtEndProfiling=e=>(i._OrtEndProfiling=T.ua)(e);var tr=()=>(tr=T.va)(),lt=i._pthread_self=()=>(lt=i._pthread_self=T.wa)(),rr=i._malloc=e=>(rr=i._malloc=T.xa)(e);i._free=e=>(i._free=T.ya)(e),i.__emscripten_tls_init=()=>(i.__emscripten_tls_init=T.za)();var nr=i.__emscripten_thread_init=(e,t,n,f,y,b)=>(nr=i.__emscripten_thread_init=T.Ba)(e,t,n,f,y,b);i.__emscripten_thread_crashed=()=>(i.__emscripten_thread_crashed=T.Ca)();var ar=(e,t,n,f)=>(ar=T.Da)(e,t,n,f),wt=e=>(wt=T.Ea)(e),Ot=i.__emscripten_thread_exit=e=>(Ot=i.__emscripten_thread_exit=T.Fa)(e),or=()=>(or=T.Ga)(),sr=e=>(sr=T.Ha)(e),ir=(e,t)=>(ir=T.Ia)(e,t),vt=()=>(vt=T.Ja)(),ct=e=>(ct=T.Ka)(e),_t=e=>(_t=T.La)(e);function Vr(){var e=T;e=Object.assign({},e);var t=f=>()=>f()>>>0,n=f=>y=>f(y)>>>0;return e.va=t(e.va),e.wa=t(e.wa),e.xa=n(e.xa),e.emscripten_main_runtime_thread_id=t(e.emscripten_main_runtime_thread_id),e.Ja=t(e.Ja),e.La=n(e.La),e}i.wasmMemory=j,i.stackAlloc=_t,i.stackSave=vt,i.stackRestore=ct,i.keepRuntimeAlive=()=>0<Le,i.UTF8ToString=Ge,i.stringToUTF8=oe,i.lengthBytesUTF8=K,i.ExitStatus=Pe,i.PThread=M;var dt;ve=function e(){dt||ur(),dt||(ve=e)};function ur(){if(!(0<pe))if(_)A(i),_||Be(Fe),startWorker(i);else{if(i.preRun)for(typeof i.preRun=="function"&&(i.preRun=[i.preRun]);i.preRun.length;)Me.unshift(i.preRun.shift());Be(Me),0<pe||dt||(dt=!0,i.calledRun=!0,P||(_||Be(Fe),A(i),_||Be(Ee)))}}return ur(),d.ready}})();typeof vr=="object"&&typeof Ft=="object"?Ft.exports=Or:typeof define=="function"&&define.amd&&define([],()=>Or)});var Er=et((On,nn)=>{nn.exports=\'"use strict";var Module={},ENVIRONMENT_IS_NODE=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";if(ENVIRONMENT_IS_NODE){var nodeWorkerThreads=require("worker_threads"),parentPort=nodeWorkerThreads.parentPort;parentPort.on("message",e=>onmessage({data:e}));var fs=require("fs"),vm=require("vm");Object.assign(global,{self:global,require,Module,location:{href:__filename},Worker:nodeWorkerThreads.Worker,importScripts:e=>vm.runInThisContext(fs.readFileSync(e,"utf8"),{filename:e}),postMessage:e=>parentPort.postMessage(e),performance:global.performance||{now:Date.now}})}var initializedJS=!1;function threadPrintErr(){var e=Array.prototype.slice.call(arguments).join(" ");if(ENVIRONMENT_IS_NODE){fs.writeSync(2,e+`\\n`);return}console.error(e)}function threadAlert(){var e=Array.prototype.slice.call(arguments).join(" ");postMessage({cmd:"alert",text:e,threadId:Module._pthread_self()})}var err=threadPrintErr;self.alert=threadAlert,Module.instantiateWasm=(e,t)=>{var a=Module.wasmModule;Module.wasmModule=null;var r=new WebAssembly.Instance(a,e);return t(r)},self.onunhandledrejection=e=>{throw e.reason||e};function handleMessage(e){try{if(e.data.cmd==="load"){let a=[];self.onmessage=r=>a.push(r),self.startWorker=r=>{Module=r,postMessage({cmd:"loaded"});for(let s of a)handleMessage(s);self.onmessage=handleMessage},Module.wasmModule=e.data.wasmModule;for(const r of e.data.handlers)Module[r]=(...s)=>{postMessage({cmd:"callHandler",handler:r,args:s})};if(Module.wasmMemory=e.data.wasmMemory,Module.buffer=Module.wasmMemory.buffer,Module.ENVIRONMENT_IS_PTHREAD=!0,typeof e.data.urlOrBlob=="string")importScripts(e.data.urlOrBlob);else{var t=URL.createObjectURL(e.data.urlOrBlob);importScripts(t),URL.revokeObjectURL(t)}ortWasmThreaded(Module)}else if(e.data.cmd==="run"){Module.__emscripten_thread_init(e.data.pthread_ptr,0,0,1),Module.__emscripten_thread_mailbox_await(e.data.pthread_ptr),Module.establishStackSpace(),Module.PThread.receiveObjectTransfer(e.data),Module.PThread.threadInitTLS(),initializedJS||(initializedJS=!0);try{Module.invokeEntryPoint(e.data.start_routine,e.data.arg)}catch(a){if(a!="unwind")throw a}}else e.data.cmd==="cancel"?Module._pthread_self()&&Module.__emscripten_thread_exit(-1):e.data.target==="setimmediate"||(e.data.cmd==="checkMailbox"?initializedJS&&Module.checkMailbox():e.data.cmd&&(err(`worker.js received unknown command ${e.data.cmd}`),err(e.data)))}catch(a){throw Module.__emscripten_thread_crashed?.(),a}}self.onmessage=handleMessage;\\n\'});var Tr;Tr=gr();var an=_r(),Ut,Pt=!1,pt=!1,Sr=!1,on=u=>{if(u===1)return!1;if(typeof SharedArrayBuffer>"u")return typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+u+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),!1;typeof process<"u"&&process.versions&&process.versions.node&&console.warn("env.wasm.numThreads is set to "+u+", however, currently onnxruntime-web does not support multi-threads in Node.js. Please consider using onnxruntime-node for performance critical scenarios.");try{return typeof MessageChannel<"u"&&new MessageChannel().port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},sn=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},un=(u,d)=>u?d?"ort-wasm-simd-threaded.wasm":"ort-wasm-simd.wasm":d?"ort-wasm-threaded.wasm":"ort-wasm.wasm",Ar=async u=>{if(Pt)return Promise.resolve();if(pt)throw new Error("multiple calls to \'initializeWebAssembly()\' detected.");if(Sr)throw new Error("previous call to \'initializeWebAssembly()\' failed.");pt=!0;let d=u.initTimeout,a=u.numThreads,h=u.simd,l=on(a),w=h&&sn(),g=u.wasmPaths,i=typeof g=="string"?g:void 0,A=un(w,l),D=typeof g=="object"?g[A]:void 0,I=!1,B=[];if(d>0&&B.push(new Promise(F=>{setTimeout(()=>{I=!0,F()},d)})),B.push(new Promise((F,U)=>{let k=l?an:Tr,L={locateFile:(_,x)=>l&&_.endsWith(".worker.js")&&typeof Blob<"u"?URL.createObjectURL(new Blob([Er()],{type:"text/javascript"})):_.endsWith(".wasm")?D||(i??x)+A:x+_};if(l)if(L.numThreads=a,typeof Blob>"u")L.mainScriptUrlOrBlob=(void 0)(__dirname,"ort-wasm-threaded.js");else{let _=`var ortWasmThreaded=${k.toString()};`;L.mainScriptUrlOrBlob=new Blob([_],{type:"text/javascript"})}k(L).then(_=>{pt=!1,Pt=!0,Ut=_,F()},_=>{pt=!1,Sr=!0,U(_)})})),await Promise.race(B),I)throw new Error(`WebAssembly backend initializing failed due to timeout: ${d}ms`)},X=()=>{if(Pt&&Ut)return Ut;throw new Error("WebAssembly is not initialized yet.")};var Q=(u,d)=>{let a=X(),h=a.lengthBytesUTF8(u)+1,l=a._malloc(h);return a.stringToUTF8(u,l,h),d.push(l),l},rt=(u,d,a,h)=>{if(typeof u=="object"&&u!==null){if(a.has(u))throw new Error("Circular reference in options");a.add(u)}Object.entries(u).forEach(([l,w])=>{let g=d?d+l:l;if(typeof w=="object")rt(w,g+".",a,h);else if(typeof w=="string"||typeof w=="number")h(g,w.toString());else if(typeof w=="boolean")h(g,w?"1":"0");else throw new Error(`Can\'t handle extra config type: ${typeof w}`)})},V=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);d._OrtGetLastError(h,h+4);let l=d.HEAP32[h/4],w=d.HEAPU32[h/4+1],g=w?d.UTF8ToString(w):"";throw new Error(`${u} ERROR_CODE: ${l}, ERROR_MESSAGE: ${g}`)}finally{d.stackRestore(a)}};var Mr=u=>{let d=X(),a=0,h=[],l=u||{};try{if(u?.logSeverityLevel===void 0)l.logSeverityLevel=2;else if(typeof u.logSeverityLevel!="number"||!Number.isInteger(u.logSeverityLevel)||u.logSeverityLevel<0||u.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${u.logSeverityLevel}`);if(u?.logVerbosityLevel===void 0)l.logVerbosityLevel=0;else if(typeof u.logVerbosityLevel!="number"||!Number.isInteger(u.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${u.logVerbosityLevel}`);u?.terminate===void 0&&(l.terminate=!1);let w=0;return u?.tag!==void 0&&(w=Q(u.tag,h)),a=d._OrtCreateRunOptions(l.logSeverityLevel,l.logVerbosityLevel,!!l.terminate,w),a===0&&V("Can\'t create run options."),u?.extra!==void 0&&rt(u.extra,"",new WeakSet,(g,i)=>{let A=Q(g,h),D=Q(i,h);d._OrtAddRunConfigEntry(a,A,D)!==0&&V(`Can\'t set a run config entry: ${g} - ${i}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseRunOptions(a),h.forEach(g=>d._free(g)),w}};var fn=u=>{switch(u){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${u}`)}},ln=u=>{switch(u){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${u}`)}},cn=u=>{u.extra||(u.extra={}),u.extra.session||(u.extra.session={});let d=u.extra.session;d.use_ort_model_bytes_directly||(d.use_ort_model_bytes_directly="1"),u.executionProviders&&u.executionProviders.some(a=>(typeof a=="string"?a:a.name)==="webgpu")&&(u.enableMemPattern=!1)},dn=(u,d,a)=>{for(let h of d){let l=typeof h=="string"?h:h.name;switch(l){case"webnn":if(l="WEBNN",typeof h!="string"){let g=h;if(g?.deviceType){let i=Q("deviceType",a),A=Q(g.deviceType,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'deviceType\' - ${g.deviceType}.`)}if(g?.numThreads){let i=g.numThreads;(typeof i!="number"||!Number.isInteger(i)||i<0)&&(i=0);let A=Q("numThreads",a),D=Q(i.toString(),a);X()._OrtAddSessionConfigEntry(u,A,D)!==0&&V(`Can\'t set a session config entry: \'numThreads\' - ${g.numThreads}.`)}if(g?.powerPreference){let i=Q("powerPreference",a),A=Q(g.powerPreference,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'powerPreference\' - ${g.powerPreference}.`)}}break;case"webgpu":if(l="JS",typeof h!="string"){let g=h;if(g?.preferredLayout){if(g.preferredLayout!=="NCHW"&&g.preferredLayout!=="NHWC")throw new Error(`preferredLayout must be either \'NCHW\' or \'NHWC\': ${g.preferredLayout}`);let i=Q("preferredLayout",a),A=Q(g.preferredLayout,a);X()._OrtAddSessionConfigEntry(u,i,A)!==0&&V(`Can\'t set a session config entry: \'preferredLayout\' - ${g.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${l}`)}let w=Q(l,a);X()._OrtAppendExecutionProvider(u,w)!==0&&V(`Can\'t append execution provider: ${l}.`)}},Cr=u=>{let d=X(),a=0,h=[],l=u||{};cn(l);try{let w=fn(l.graphOptimizationLevel??"all"),g=ln(l.executionMode??"sequential"),i=typeof l.logId=="string"?Q(l.logId,h):0,A=l.logSeverityLevel??2;if(!Number.isInteger(A)||A<0||A>4)throw new Error(`log serverity level is not valid: ${A}`);let D=l.logVerbosityLevel??0;if(!Number.isInteger(D)||D<0||D>4)throw new Error(`log verbosity level is not valid: ${D}`);let I=typeof l.optimizedModelFilePath=="string"?Q(l.optimizedModelFilePath,h):0;if(a=d._OrtCreateSessionOptions(w,!!l.enableCpuMemArena,!!l.enableMemPattern,g,!!l.enableProfiling,0,i,A,D,I),a===0&&V("Can\'t create session options."),l.executionProviders&&dn(a,l.executionProviders,h),l.freeDimensionOverrides)for(let[B,F]of Object.entries(l.freeDimensionOverrides)){if(typeof B!="string")throw new Error(`free dimension override name must be a string: ${B}`);if(typeof F!="number"||!Number.isInteger(F)||F<0)throw new Error(`free dimension override value must be a non-negative integer: ${F}`);let U=Q(B,h);d._OrtAddFreeDimensionOverride(a,U,F)!==0&&V(`Can\'t set a free dimension override: ${B} - ${F}.`)}return l.extra!==void 0&&rt(l.extra,"",new WeakSet,(B,F)=>{let U=Q(B,h),k=Q(F,h);d._OrtAddSessionConfigEntry(a,U,k)!==0&&V(`Can\'t set a session config entry: ${B} - ${F}.`)}),[a,h]}catch(w){throw a!==0&&d._OrtReleaseSessionOptions(a),h.forEach(g=>d._free(g)),w}};var Rt=u=>{switch(u){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${u}`)}},Dr=u=>{switch(u){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${u}`)}},It=u=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][u],xr=u=>{switch(u){case"float16":return Uint16Array;case"float32":return Float32Array;case"uint8":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"bool":return Uint8Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${u}`)}},Fr=u=>{switch(u){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${u}`)}},Ur=u=>u==="float32"||u==="int32"||u==="int64"||u==="bool"||u==="float16"||u==="uint32",Pr=u=>{switch(u){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${u}`)}};var Rr=async u=>{if(typeof u=="string")if(typeof process<"u"&&process.versions&&process.versions.node)try{return new Uint8Array(await(void 0)(u))}catch(d){if(d.code==="ERR_FS_FILE_TOO_LARGE"){let a=(void 0)(u),h=[];for await(let l of a)h.push(l);return new Uint8Array(Buffer.concat(h))}throw d}else{let d=await fetch(u);if(!d.ok)throw new Error(`failed to load external data file: ${u}`);let a=d.headers.get("Content-Length"),h=a?parseInt(a,10):0;if(h<1073741824)return new Uint8Array(await d.arrayBuffer());{if(!d.body)throw new Error(`failed to load external data file: ${u}, no response body.`);let l=d.body.getReader(),w;try{w=new ArrayBuffer(h)}catch(i){if(i instanceof RangeError){let A=Math.ceil(h/65536);w=new WebAssembly.Memory({initial:A,maximum:A}).buffer}else throw i}let g=0;for(;;){let{done:i,value:A}=await l.read();if(i)break;let D=A.byteLength;new Uint8Array(w,g,D).set(A),g+=D}return new Uint8Array(w,0,h)}}else return u instanceof Blob?new Uint8Array(await u.arrayBuffer()):u instanceof Uint8Array?u:new Uint8Array(u)};var pn=(u,d)=>{X()._OrtInit(u,d)!==0&&V("Can\'t initialize onnxruntime.")},Lr=async u=>{pn(u.wasm.numThreads,Fr(u.logLevel))},Br=async(u,d)=>{},nt=new Map,mn=u=>{let d=X(),a=d.stackSave();try{let h=d.stackAlloc(8);return d._OrtGetInputOutputCount(u,h,h+4)!==0&&V("Can\'t get session input/output count."),[d.HEAP32[h/4],d.HEAP32[h/4+1]]}finally{d.stackRestore(a)}},Lt=u=>{let d=X(),a=d._malloc(u.byteLength);if(a===0)throw new Error(`Can\'t create a session. failed to allocate a buffer of size ${u.byteLength}.`);return d.HEAPU8.set(u,a),[a,u.byteLength]},Wr=async(u,d)=>{let a,h,l=X();Array.isArray(u)?[a,h]=u:u.buffer===l.HEAPU8.buffer?[a,h]=[u.byteOffset,u.byteLength]:[a,h]=Lt(u);let w=0,g=0,i=0,A=[],D=[],I=[];try{if([g,A]=Cr(d),d?.externalData&&l.mountExternalData){let x=[];for(let N of d.externalData){let he=typeof N=="string"?N:N.path;x.push(Rr(typeof N=="string"?N:N.data).then(ie=>{l.mountExternalData(he,ie)}))}await Promise.all(x)}w=l._OrtCreateSession(a,h,g),w===0&&V("Can\'t create a session.");let[B,F]=mn(w),U=[],k=[],L=[];for(let x=0;x<B;x++){let N=l._OrtGetInputName(w,x);N===0&&V("Can\'t get an input name."),D.push(N),U.push(l.UTF8ToString(N))}for(let x=0;x<F;x++){let N=l._OrtGetOutputName(w,x);N===0&&V("Can\'t get an output name."),I.push(N);let he=l.UTF8ToString(N);k.push(he)}let _=null;return nt.set(w,[w,D,I,_]),[w,U,k]}catch(B){throw D.forEach(F=>l._OrtFree(F)),I.forEach(F=>l._OrtFree(F)),i!==0&&l._OrtReleaseBinding(i),w!==0&&l._OrtReleaseSession(w),B}finally{l._free(a),g!==0&&l._OrtReleaseSessionOptions(g),A.forEach(B=>l._free(B)),l.unmountExternalData?.()}},kr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error(`cannot release session. invalid session id: ${u}`);let[h,l,w,g]=a;g&&d._OrtReleaseBinding(g.handle),d.jsepUnregisterBuffers?.(u),l.forEach(i=>d._OrtFree(i)),w.forEach(i=>d._OrtFree(i)),d._OrtReleaseSession(h),nt.delete(u)},Ir=(u,d,a,h,l)=>{if(!u){d.push(0);return}let w=X(),g=u[0],i=u[1],A=u[3],D,I;if(g==="string"&&A==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");if(A==="gpu-buffer"){let U=u[2].gpuBuffer,k=It(Rt(g));I=i.reduce((L,_)=>L*_,1)*k,D=w.jsepRegisterBuffer(h,l,U,I)}else{let U=u[2];if(Array.isArray(U)){I=4*U.length,D=w._malloc(I),a.push(D);let k=D/4;for(let L=0;L<U.length;L++){if(typeof U[L]!="string")throw new TypeError(`tensor data at index ${L} is not a string`);w.HEAPU32[k++]=Q(U[L],a)}}else I=U.byteLength,D=w._malloc(I),a.push(D),w.HEAPU8.set(new Uint8Array(U.buffer,U.byteOffset,I),D)}let B=w.stackSave(),F=w.stackAlloc(4*i.length);try{let U=F/4;i.forEach(L=>w.HEAP32[U++]=L);let k=w._OrtCreateTensor(Rt(g),D,I,F,i.length,Pr(A));k===0&&V(`Can\'t create tensor for input/output. session=${h}, index=${l}.`),d.push(k)}finally{w.stackRestore(B)}},Nr=async(u,d,a,h,l,w)=>{let g=X(),i=nt.get(u);if(!i)throw new Error(`cannot run inference. invalid session id: ${u}`);let[A,D,I,B]=i,F=d.length,U=h.length,k=0,L=[],_=[],x=[],N=[],he=g.stackSave(),ie=g.stackAlloc(F*4),ae=g.stackAlloc(F*4),E=g.stackAlloc(U*4),Y=g.stackAlloc(U*4);try{[k,L]=Mr(w);for(let P=0;P<F;P++)Ir(a[P],_,N,u,d[P]);for(let P=0;P<U;P++)Ir(l[P],x,N,u,F+h[P]);let ue=ie/4,Re=ae/4,Ie=E/4,ee=Y/4;for(let P=0;P<F;P++)g.HEAPU32[ue++]=_[P],g.HEAPU32[Re++]=D[d[P]];for(let P=0;P<U;P++)g.HEAPU32[Ie++]=x[P],g.HEAPU32[ee++]=I[h[P]];let j;j=await g._OrtRun(A,ae,ie,F,Y,U,E,k),j!==0&&V("failed to call OrtRun().");let ce=[];for(let P=0;P<U;P++){let te=g.HEAPU32[E/4+P];if(te===x[P]){ce.push(l[P]);continue}let de=g.stackSave(),ge=g.stackAlloc(4*4),ye=!1,J,fe=0;try{g._OrtGetTensorData(te,ge,ge+4,ge+8,ge+12)!==0&&V(`Can\'t access output tensor data on index ${P}.`);let Ae=ge/4,Me=g.HEAPU32[Ae++];fe=g.HEAPU32[Ae++];let Fe=g.HEAPU32[Ae++],Ee=g.HEAPU32[Ae++],pe=[];for(let re=0;re<Ee;re++)pe.push(g.HEAPU32[Fe/4+re]);g._OrtFree(Fe);let Oe=pe.reduce((re,Z)=>re*Z,1);J=Dr(Me);let ve=B?.outputPreferredLocations[h[P]];if(J==="string"){if(ve==="gpu-buffer")throw new Error("String tensor is not supported on GPU.");let re=[],Z=fe/4;for(let Ce=0;Ce<Oe;Ce++){let be=g.HEAPU32[Z++],_e=Ce===Oe-1?void 0:g.HEAPU32[Z]-be;re.push(g.UTF8ToString(be,_e))}ce.push([J,pe,re,"cpu"])}else if(ve==="gpu-buffer"&&Oe>0){let re=g.jsepGetBuffer(fe),Z=It(Me);if(Z===void 0||!Ur(J))throw new Error(`Unsupported data type: ${J}`);ye=!0,ce.push([J,pe,{gpuBuffer:re,download:g.jsepCreateDownloader(re,Oe*Z,J),dispose:()=>{g._OrtReleaseTensor(te)}},"gpu-buffer"])}else{let re=xr(J),Z=new re(Oe);new Uint8Array(Z.buffer,Z.byteOffset,Z.byteLength).set(g.HEAPU8.subarray(fe,fe+Z.byteLength)),ce.push([J,pe,Z,"cpu"])}}finally{g.stackRestore(de),J==="string"&&fe&&g._free(fe),ye||g._OrtReleaseTensor(te)}}return B&&g._OrtClearBoundOutputs(B.handle),ce}finally{g.stackRestore(he),_.forEach(ue=>g._OrtReleaseTensor(ue)),x.forEach(ue=>g._OrtReleaseTensor(ue)),N.forEach(ue=>g._free(ue)),k!==0&&g._OrtReleaseRunOptions(k),L.forEach(ue=>g._free(ue))}},Hr=u=>{let d=X(),a=nt.get(u);if(!a)throw new Error("invalid session id");let h=a[0],l=d._OrtEndProfiling(h);l===0&&V("Can\'t get an profile file name."),d._OrtFree(l)},$r=u=>{let d=[];for(let a of u){let h=a[2];!Array.isArray(h)&&"buffer"in h&&d.push(h.buffer)}return d};self.onmessage=u=>{let{type:d,in:a}=u.data;try{switch(d){case"init-wasm":Ar(a.wasm).then(()=>{Lr(a).then(()=>{postMessage({type:d})},h=>{postMessage({type:d,err:h})})},h=>{postMessage({type:d,err:h})});break;case"init-ep":{let{epName:h,env:l}=a;Br(l,h).then(()=>{postMessage({type:d})},w=>{postMessage({type:d,err:w})});break}case"copy-from":{let{buffer:h}=a,l=Lt(h);postMessage({type:d,out:l});break}case"create":{let{model:h,options:l}=a;Wr(h,l).then(w=>{postMessage({type:d,out:w})},w=>{postMessage({type:d,err:w})});break}case"release":kr(a),postMessage({type:d});break;case"run":{let{sessionId:h,inputIndices:l,inputs:w,outputIndices:g,options:i}=a;Nr(h,l,w,g,new Array(g.length).fill(null),i).then(A=>{A.some(D=>D[3]!=="cpu")?postMessage({type:d,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:d,out:A},$r(A))},A=>{postMessage({type:d,err:A})});break}case"end-profiling":Hr(a),postMessage({type:d});break;default:}}catch(h){postMessage({type:d,err:h})}};})();\n'}),Zo,Wn,iu,Fc,kc,xy,Xd,Ga,Wa,Y4,Lc,VM,jM,UM,HM,zM,GM,WM,qM=st(()=>{"use strict";cu(),LG(),jc(),Zo=()=>!!Yt.wasm.proxy&&typeof document<"u",iu=!1,Fc=!1,kc=!1,Xd=new Map,Ga=(t,e)=>{let r=Xd.get(t);r?r.push(e):Xd.set(t,[e])},Wa=()=>{if(iu||!Fc||kc||!Wn)throw new Error("worker not ready")},Y4=t=>{switch(t.data.type){case"init-wasm":iu=!1,t.data.err?(kc=!0,xy[1](t.data.err)):(Fc=!0,xy[0]());break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let e=Xd.get(t.data.type);t.data.err?e.shift()[1](t.data.err):e.shift()[0](t.data.out);break}default:}},Lc=typeof document<"u"?document?.currentScript?.src:void 0,VM=()=>U(void 0,null,function*(){if(!Fc){if(iu)throw new Error("multiple calls to 'initWasm()' detected.");if(kc)throw new Error("previous call to 'initWasm()' failed.");if(iu=!0,Zo())return Yt.wasm.wasmPaths===void 0&&Lc&&Lc.indexOf("blob:")!==0&&(Yt.wasm.wasmPaths=Lc.substr(0,+Lc.lastIndexOf("/")+1)),new Promise((t,e)=>{Wn?.terminate();let r=URL.createObjectURL(new Blob([BG()],{type:"text/javascript"}));Wn=new Worker(r,{name:"ort-wasm-proxy-worker"}),Wn.onerror=o=>e(o),Wn.onmessage=Y4,URL.revokeObjectURL(r),xy=[t,e];let n={type:"init-wasm",in:Yt};Wn.postMessage(n)});try{yield TM(Yt.wasm),yield NM(Yt),Fc=!0}catch(t){throw kc=!0,t}finally{iu=!1}}}),jM=t=>U(void 0,null,function*(){if(Zo())return Wa(),new Promise((e,r)=>{Ga("init-ep",[e,r]);let n={type:"init-ep",in:{epName:t,env:Yt}};Wn.postMessage(n)});yield RM(Yt,t)}),UM=t=>U(void 0,null,function*(){return Zo()?(Wa(),new Promise((e,r)=>{Ga("copy-from",[e,r]);let n={type:"copy-from",in:{buffer:t}};Wn.postMessage(n,[t.buffer])})):Ay(t)}),HM=(t,e)=>U(void 0,null,function*(){if(Zo()){if(e?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return Wa(),new Promise((r,n)=>{Ga("create",[r,n]);let o={type:"create",in:{model:t,options:e}},a=[];t instanceof Uint8Array&&a.push(t.buffer),Wn.postMessage(o,a)})}else return FM(t,e)}),zM=t=>U(void 0,null,function*(){if(Zo())return Wa(),new Promise((e,r)=>{Ga("release",[e,r]);let n={type:"release",in:t};Wn.postMessage(n)});kM(t)}),GM=(t,e,r,n,o,a)=>U(void 0,null,function*(){if(Zo()){if(r.some(u=>u[3]!=="cpu"))throw new Error("input tensor on GPU is not supported for proxy.");if(o.some(u=>u))throw new Error("pre-allocated output tensor is not supported for proxy.");return Wa(),new Promise((u,s)=>{Ga("run",[u,s]);let l=r,i={type:"run",in:{sessionId:t,inputIndices:e,inputs:l,outputIndices:n,options:a}};Wn.postMessage(i,$M(l))})}else return LM(t,e,r,n,o,a)}),WM=t=>U(void 0,null,function*(){if(Zo())return Wa(),new Promise((e,r)=>{Ga("end-profiling",[e,r]);let n={type:"end-profiling",in:t};Wn.postMessage(n)});BM(t)})}),_y,Z4,XM,$G=st(()=>{"use strict";cu(),qM(),PM(),MM(),_y=(t,e)=>{switch(t.location){case"cpu":return[t.type,t.dims,t.data,"cpu"];case"gpu-buffer":return[t.type,t.dims,{gpuBuffer:t.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${t.location} for ${e()}`)}},Z4=t=>{switch(t[3]){case"cpu":return new fn(t[0],t[2],t[1]);case"gpu-buffer":{let e=t[0];if(!Fy(e))throw new Error(`not supported data type: ${e} for deserializing GPU tensor`);let{gpuBuffer:r,download:n,dispose:o}=t[2];return fn.fromGpuBuffer(r,{dataType:e,dims:t[1],download:n,dispose:o})}default:throw new Error(`invalid data location: ${t[3]}`)}},XM=class{fetchModelAndCopyToWasmMemory(t){return U(this,null,function*(){return UM(yield Kd(t))})}loadModel(t,e){return U(this,null,function*(){su();let r;typeof t=="string"?typeof process<"u"&&process.versions&&process.versions.node?r=yield Kd(t):r=yield this.fetchModelAndCopyToWasmMemory(t):r=t,[this.sessionId,this.inputNames,this.outputNames]=yield HM(r,e),uu()})}dispose(){return U(this,null,function*(){return zM(this.sessionId)})}run(t,e,r){return U(this,null,function*(){su();let n=[],o=[];Object.entries(t).forEach(f=>{let d=f[0],h=f[1],p=this.inputNames.indexOf(d);if(p===-1)throw new Error(`invalid input '${d}'`);n.push(h),o.push(p)});let a=[],u=[];Object.entries(e).forEach(f=>{let d=f[0],h=f[1],p=this.outputNames.indexOf(d);if(p===-1)throw new Error(`invalid output '${d}'`);a.push(h),u.push(p)});let s=n.map((f,d)=>_y(f,()=>`input "${this.inputNames[o[d]]}"`)),l=a.map((f,d)=>f?_y(f,()=>`output "${this.outputNames[u[d]]}"`):null),i=yield GM(this.sessionId,o,s,u,l,r),c={};for(let f=0;f<i.length;f++)c[this.outputNames[u[f]]]=a[f]??Z4(i[f]);return uu(),c})}startProfiling(){}endProfiling(){WM(this.sessionId)}}}),K4,YM,VG=st(()=>{"use strict";cu(),qM(),$G(),K4=()=>{if((typeof Yt.wasm.initTimeout!="number"||Yt.wasm.initTimeout<0)&&(Yt.wasm.initTimeout=0),typeof Yt.wasm.simd!="boolean"&&(Yt.wasm.simd=!0),typeof Yt.wasm.proxy!="boolean"&&(Yt.wasm.proxy=!1),typeof Yt.wasm.trace!="boolean"&&(Yt.wasm.trace=!1),typeof Yt.wasm.numThreads!="number"||!Number.isInteger(Yt.wasm.numThreads)||Yt.wasm.numThreads<=0){(typeof self<"u"&&!self.crossOriginIsolated||typeof process<"u"&&process.versions&&process.versions.node)&&(Yt.wasm.numThreads=1);let t=typeof navigator>"u"?(void 0)().length:navigator.hardwareConcurrency;Yt.wasm.numThreads=Math.min(4,Math.ceil((t||1)/2))}},YM=class{init(t){return U(this,null,function*(){K4(),yield VM(),yield jM(t)})}createInferenceSessionHandler(t,e){return U(this,null,function*(){let r=new XM;return yield r.loadModel(t,e),Promise.resolve(r)})}}}),ZM={};Vc(ZM,{wasmBackend:()=>KM});var KM,jG=st(()=>{"use strict";VG(),KM=new YM});cu();cu();cu();var UG="1.17.1";{let t=(jG(),ou(ZM)).wasmBackend;Bc("cpu",t,10),Bc("wasm",t,10),Bc("webnn",t,9)}Object.defineProperty(Yt.versions,"web",{value:UG,enumerable:!0});var QM=(()=>{let e=class e{constructor(n){this.documentRef=n,this.session=null,this.modelLoaded=!1,this.inputSize=224,this.confThreshold=.1,this.iouThreshold=.45,this.debug=!1,this.isIOS=/iPad|iPhone|iPod/.test(navigator.userAgent);let o=this.documentRef.baseURI||window.location.href;if(we.wasm.wasmPaths=new URL("assets/wasm/",o).toString(),this.isIOS)we.wasm.numThreads=1,we.wasm.simd=!1,this.debugLog("iOS detected: Using single-threaded WASM without SIMD");else{let u=this.getOptimalThreadCount();we.wasm.numThreads=u,we.wasm.simd=!0,this.debugLog("Optimal thread count for this device:",u)}typeof SharedArrayBuffer<"u"&&window.crossOriginIsolated===!0||(we.wasm.numThreads=1,this.debugLog("SharedArrayBuffer not available: forcing single-thread WASM")),we.wasm.proxy=!1,this.debugLog("ONNX Runtime configured with WASM path:",we.wasm.wasmPaths)}getOptimalThreadCount(){let n=navigator.hardwareConcurrency||4,o=/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)||window.innerWidth<=768&&window.innerHeight>window.innerWidth,a="ontouchstart"in window||navigator.maxTouchPoints>0,u;return o||a?u=Math.min(2,Math.max(1,Math.floor(n/2))):u=Math.min(4,Math.max(2,Math.floor(n/2))),this.debugLog("Device detection:",{hardwareConcurrency:n,isMobile:o,isTouchDevice:a,optimalThreads:u}),u}debugLog(...n){this.debug&&console.log(...n)}getAvailableBackends(){try{let n=["webgl","wasm","webnn","cpu"];return this.debugLog("Checking ONNX Runtime backend availability..."),n}catch(n){return this.debugLog("Error checking backends:",n),[]}}hasWebGLSupport(){try{let n=document.createElement("canvas"),o=n.getContext("webgl2")||n.getContext("webgl")||n.getContext("experimental-webgl"),a=!!o;if(o&&typeof o.getParameter=="function"){let u=o.getParameter(o.VENDOR);this.debugLog("WebGL vendor:",u)}return this.debugLog("WebGL support:",a),a}catch(n){return this.debugLog("WebGL check failed:",n),!1}}hasWasmSupport(){try{return typeof WebAssembly<"u"&&typeof WebAssembly.instantiate=="function"}catch{return!1}}hasWasmSharedMemorySupport(){let n=typeof SharedArrayBuffer<"u",o=window.crossOriginIsolated===!0;return n&&o}loadModel(n){return U(this,null,function*(){try{if(this.debugLog("Loading ORT model from:",n),this.debugLog("ONNX Runtime version:",we.versions),this.debugLog("Available backends:",this.getAvailableBackends()),this.debugLog("Current location:",window.location.href),this.isIOS){let i=null;try{let c=new URL(n,window.location.href).toString(),f=[c];c.includes("?")&&f.push(c.split("?")[0]);let d=null;for(let h of f)try{this.debugLog("iOS: Fetching model as ArrayBuffer:",h);let p=yield fetch(h,{cache:"no-store"});if(!p.ok)throw new Error(`HTTP ${p.status}: ${p.statusText}`);i=yield p.arrayBuffer(),this.debugLog(`iOS: Model loaded, size: ${i.byteLength} bytes`);break}catch(p){d=p,this.debugLog("iOS: Fetch failed for URL:",h,p?.message||p)}if(!i)throw d||new Error("Unknown fetch error")}catch(c){throw new Error(`iOS: Cannot fetch model file: ${c.message}`)}try{this.debugLog("iOS Strategy 1: Trying explicit WebGL provider"),this.session=yield fo.create(i,{executionProviders:["webgl"],graphOptimizationLevel:"all"}),this.debugLog("\u2705 iOS: Successfully loaded with WebGL"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);console.error("iOS WebGL failed:",c),this.debugLog("\u274C iOS Strategy 1 failed:",f)}try{this.debugLog("iOS Strategy 2: Trying WASM provider"),this.session=yield fo.create(i,{executionProviders:["wasm"],graphOptimizationLevel:"basic"}),this.debugLog("\u2705 iOS: Successfully loaded with WASM"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);console.error("iOS WASM failed:",c),this.debugLog("\u274C iOS Strategy 2 failed:",f)}try{this.debugLog("iOS Strategy 3: Auto-select backend"),this.session=yield fo.create(i,{graphOptimizationLevel:"basic"}),this.debugLog("\u2705 iOS: Successfully loaded with auto-selected backend"),this.modelLoaded=!0;return}catch(c){let f=c?.message||String(c);throw console.error("iOS auto-select failed:",c),this.debugLog("\u274C iOS Strategy 3 failed:",f),new Error(`iOS: Cannot load model. All strategies failed.
Last error: ${f}
Model size: ${i.byteLength} bytes
Try: 1) Enable WebGL in Safari 2) Update iOS 3) Use different browser`)}}let o=this.hasWebGLSupport(),a=this.hasWasmSupport();this.debugLog("Backend support:",{webglSupported:o,wasmSupported:a});let u=[];if(o&&u.push("webgl"),a&&u.push("wasm"),u.length===0)throw new Error("No available backend. Both WebGL and WASM are unavailable.");let s=!1,l=null;for(let i of u)try{this.debugLog(`Trying execution provider: ${i}`),this.session=yield fo.create(n,{executionProviders:[i],graphOptimizationLevel:"all"}),this.debugLog(`Successfully loaded model with ${i} provider`);break}catch(c){if(l=c,console.warn(`Failed to load with ${i}:`,c),i==="wasm"&&we.wasm.simd&&!s)try{s=!0,we.wasm.simd=!1,console.warn("Retrying WASM without SIMD..."),this.session=yield fo.create(n,{executionProviders:[i],graphOptimizationLevel:"all"}),this.debugLog("Successfully loaded model with wasm provider (SIMD disabled)");break}catch(f){throw console.warn("Failed to load with wasm provider (SIMD disabled):",f),f}}if(!this.session)try{this.debugLog("All providers failed, trying default backend..."),this.session=yield fo.create(n,{graphOptimizationLevel:"basic"}),this.debugLog("Successfully loaded model with default backend")}catch(i){throw console.error("Default backend also failed:",i),l||i}if(!this.session)throw l||new Error("Failed to initialize inference session");this.modelLoaded=!0,this.debugLog("Model loaded successfully"),this.debugLog("Input names:",this.session.inputNames),this.debugLog("Output names:",this.session.outputNames)}catch(o){throw console.error("Failed to load ONNX model:",o),this.modelLoaded=!1,o}})}isModelLoaded(){return this.modelLoaded}detect(n){return U(this,null,function*(){if(!this.session)throw new Error("Model not loaded");try{let o=this.preprocessImage(n),a={};a[this.session.inputNames[0]]=o.tensor;let s=(yield this.session.run(a))[this.session.outputNames[0]];return this.postprocess(s,n.width,n.height,o)}catch(o){return console.error("Detection error:",o),[]}})}preprocessImage(n){let{width:o,height:a}=n,u=document.createElement("canvas");u.width=this.inputSize,u.height=this.inputSize;let s=u.getContext("2d"),l=Math.min(this.inputSize/o,this.inputSize/a),i=Math.round(o*l),c=Math.round(a*l),f=Math.round((this.inputSize-i)/2),d=Math.round((this.inputSize-c)/2);s.fillStyle="rgb(114, 114, 114)",s.fillRect(0,0,this.inputSize,this.inputSize);let h=document.createElement("canvas");h.width=o,h.height=a,h.getContext("2d").putImageData(n,0,0),s.drawImage(h,f,d,i,c);let v=s.getImageData(0,0,this.inputSize,this.inputSize).data,x=[],y=[],_=[];for(let C=0;C<v.length;C+=4)x.push(v[C]/255),y.push(v[C+1]/255),_.push(v[C+2]/255);let I=Float32Array.from([...x,...y,..._]);return{tensor:new Ur("float32",I,[1,3,this.inputSize,this.inputSize]),scale:l,padX:f,padY:d}}postprocess(n,o,a,u){let s=[],l=n.data,i=n.dims;this.debugLog("\xF0\u0178\u201D\x8D ONNX Output dimensions:",i),this.debugLog("\xF0\u0178\u201D\x8D Output data length:",l.length),this.debugLog("\xF0\u0178\u201D\x8D First 20 values:",Array.from(l.slice(0,20)));let c=0,f=0,d=0,h=!1,p=!1;if(i.length===3){let C=i[1],V=i[2],z=C<=100&&V>100,W=V<=100&&C>100;if(z?(d=C,c=V,h=!0):W?(d=V,c=C,h=!1):C>V?(d=C,c=V,h=!0):(d=V,c=C,h=!1),d===4)f=1,p=!1;else if(d===5)f=1,p=!0;else if(d===6)f=1,p=!0;else if(d===84)f=80,p=!1;else if(d===85)f=80,p=!0;else{let k=d-4,X=d-5;X>=1&&(X===1||X===80)?(f=X,p=!0):(f=k,p=!1)}}else return console.warn("Unexpected output dimensions:",i),s;let{scale:m,padX:v,padY:x}=u;this.debugLog("\xF0\u0178\u201D\x8D Processing predictions:",c,"features:",d,"classes:",f,"featuresFirst:",h,"hasObjectness:",p),this.debugLog("\u{1F50D} Letterbox scale:",m,"pad:",v,x),this.debugLog("\xF0\u0178\u201D\x8D Confidence threshold:",this.confThreshold);let y=(C,V)=>h?l[C*c+V]:l[V*d+C],_=0;for(let C=0;C<c;C++){let V,z,W,k,X;V=y(0,C),z=y(1,C),W=y(2,C),k=y(3,C);let ke=1,me=4;if(p&&(ke=y(4,C),me=5),X=0,d<=me)X=ke;else{for(let ye=0;ye<f;ye++){let Z=y(me+ye,C);Z>X&&(X=Z)}X*=ke}if(X>this.confThreshold){_++;let ye=V,Z=z,he=W,pt=k;V<2&&z<2&&W<2&&k<2&&(ye=V*this.inputSize,Z=z*this.inputSize,he=W*this.inputSize,pt=k*this.inputSize);let qe=(ye-he/2-v)/m,Ue=(Z-pt/2-x)/m,Ee=he/m,wt=pt/m,xt=Math.max(0,Math.min(o-1,qe)),Ct=Math.max(0,Math.min(a-1,Ue)),gr=Math.max(0,Math.min(o-xt,Ee)),It=Math.max(0,Math.min(a-Ct,wt));_<=3&&this.debugLog(`\xF0\u0178\u017D\xAF Detection ${_}:`,{raw:{x_center:V.toFixed(4),y_center:z.toFixed(4),w:W.toFixed(4),h:k.toFixed(4)},pixel:{x_pixel:ye.toFixed(1),y_pixel:Z.toFixed(1),w_pixel:he.toFixed(1),h_pixel:pt.toFixed(1)},confidence:X.toFixed(3),final_bbox:[xt.toFixed(1),Ct.toFixed(1),gr.toFixed(1),It.toFixed(1)]}),s.push({bbox:[xt,Ct,gr,It],confidence:X,class:0})}}this.debugLog(`\xE2\u0153\u2026 Found ${s.length} candidate detections (threshold: ${this.confThreshold})`);let I=this.nonMaxSuppression(s);return this.debugLog(`\xF0\u0178\u017D\xAF After NMS: ${I.length} final detections`),I}nonMaxSuppression(n){if(n.length===0)return[];n.sort((a,u)=>u.confidence-a.confidence);let o=[];for(;n.length>0;){let a=n.shift();o.push(a),n=n.filter(u=>this.calculateIoU(a.bbox,u.bbox)<this.iouThreshold)}return o}calculateIoU(n,o){let[a,u,s,l]=n,[i,c,f,d]=o,h=a+s,p=u+l,m=i+f,v=c+d,x=Math.max(a,i),y=Math.max(u,c),_=Math.min(h,m),I=Math.min(p,v),C=Math.max(0,_-x),V=Math.max(0,I-y),z=C*V,W=s*l,k=f*d,X=W+k-z;return z/X}};e.\u0275fac=function(o){return new(o||e)(Et(Ci))},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var JM=(()=>{let e=class e{constructor(){this.modelLoaded=!1,setTimeout(()=>{this.modelLoaded=!0,console.log("Mock detector ready")},1e3)}loadModel(n){return U(this,null,function*(){return console.log("Mock: Loading model from:",n),new Promise(o=>{setTimeout(()=>{this.modelLoaded=!0,console.log("Mock: Model loaded successfully"),o()},1500)})})}isModelLoaded(){return this.modelLoaded}detect(n){return U(this,null,function*(){if(!this.modelLoaded)throw new Error("Mock: Model not loaded");yield new Promise(u=>setTimeout(u,100));let o=[],a=Math.floor(Math.random()*3);for(let u=0;u<a;u++){let s=Math.random()*(n.width-100),l=Math.random()*(n.height-100),i=80+Math.random()*50,c=30+Math.random()*20,f=.7+Math.random()*.3;o.push({bbox:[s,l,i,c],confidence:f,class:0})}return console.log(`Mock: Detected ${o.length} barcodes`),o})}};e.\u0275fac=function(o){return new(o||e)},e.\u0275prov=Zt({token:e,factory:e.\u0275fac,providedIn:"root"});let t=e;return t})();var GG=["videoElement"],WG=["canvasElement"];function qG(t,e){if(t&1&&(kt(0,"span",18),Ar(1),Ot()),t&2){let r=va();qt(),Eo("Loading ",r.useMockDetector?"Mock":"ONNX"," model...")}}function XG(t,e){if(t&1&&(kt(0,"span",19),Ar(1),Ot()),t&2){let r=va();qt(),Eo("",r.useMockDetector?"Mock":"ONNX"," Model ready")}}function YG(t,e){if(t&1&&(kt(0,"span",20),Ar(1),Ot()),t&2){let r=va();qt(),_o(r.error)}}function ZG(t,e){if(t&1&&(kt(0,"div",21)(1,"div",22)(2,"span",23),Ar(3,"Camera FPS:"),Ot(),kt(4,"span",24),Ar(5),Ot()(),kt(6,"div",22)(7,"span",23),Ar(8,"Render FPS:"),Ot(),kt(9,"span",24),Ar(10),Ot()(),kt(11,"div",22)(12,"span",23),Ar(13,"Detections:"),Ot(),kt(14,"span",24),Ar(15),Ot()(),kt(16,"div",22)(17,"span",23),Ar(18,"Resolution:"),Ot(),kt(19,"span",25),Ar(20),Ot()()()),t&2){let r=va();qt(5),_o(r.actualCameraFps),qt(5),_o(r.fps),qt(4),xo("highlight",r.detectionCount>0),qt(),_o(r.detectionCount),qt(5),_o(r.currentResolution||"-")}}function KG(t,e){if(t&1&&(kt(0,"div",26)(1,"div",27),Ar(2),Ot(),kt(3,"div",28),Ar(4),Ot()()),t&2){let r=va();qt(2),_o(r.decodedText),qt(2),Eo("Format: ",r.decodedFormat,"")}}function QG(t,e){if(t&1&&(kt(0,"div",29),Ar(1),Ot()),t&2){let r=va();qt(),Eo(" ",r.streamMessage," ")}}function JG(t,e){t&1&&(kt(0,"div",30),ya(1,"div",31)(2,"div",32)(3,"div",33),Ot())}function eW(t,e){t&1&&(kt(0,"div",34)(1,"p"),Ar(2,'Click "Start Camera" to begin detecting barcodes'),Ot(),kt(3,"p"),Ar(4,"The detector will automatically identify and highlight barcodes in real-time"),Ot()())}var eN=(()=>{let e=class e{constructor(n,o,a){this.onnxDetectorService=n,this.mockDetectorService=o,this.ngZone=a,this.isStreaming=!1,this.isModelLoading=!1,this.modelLoaded=!1,this.error=null,this.detectionCount=0,this.fps=0,this.currentResolution="",this.decodedText="",this.decodedFormat="",this.decodedHistory=[],this.streamMessage="",this.desiredStreamMessage="",this.desiredStreamPriority=0,this.streamMessageSince=0,this.streamMessageHoldMs=1500,this.useMockDetector=!1,this.actualCameraFps=0,this.stream=null,this.animationFrameId=null,this.detectionIntervalId=null,this.overlayCanvas=null,this.currentDetections=[],this.lastFrameTime=0,this.frameCount=0,this.fpsUpdateTime=0,this.lastVideoTime=0,this.videoFrameCount=0,this.lastVideoFpsUpdate=0,this.debug=!1,this.decodeCooldownMs=0,this.lastDecodeAt=0,this.decodeInFlight=!1,this.lastDecodedAt=0,this.decodedStaleMs=4e3,this.zxingReader=new C2,this.roi={top:.25,right:.2,bottom:.25,left:.2}}getBasePath(){let n=document.baseURI||window.location.href,a=new URL(n).pathname;return a==="/"||a.endsWith("/")?a:a+"/"}debugLog(...n){this.debug&&console.log(...n)}ngOnInit(){return U(this,null,function*(){yield this.loadModel()})}ngOnDestroy(){this.stopCamera()}loadModel(){return U(this,null,function*(){try{this.isModelLoading=!0,this.error=null;let n=this.useMockDetector?this.mockDetectorService:this.onnxDetectorService;if(this.useMockDetector)yield n.loadModel("");else{let o=this.getBasePath();this.debugLog("Base path:",o);let a="2026-01-28-1",u=[`${o}assets/models/yolotiny.ort?v=${a}`,`${o}assets/models/yolotiny.onnx?v=${a}`,`${o}assets/yolotiny.ort?v=${a}`,`${o}assets/yolotiny.onnx?v=${a}`,`/assets/models/yolotiny.ort?v=${a}`,`/assets/yolotiny.ort?v=${a}`],s=null,l=0,i=u;if(/iPad|iPhone|iPod/.test(navigator.userAgent)){let f=new Set,d=[];for(let p of u){let m=new URL(p,window.location.href).toString();if(f.has(m)||(f.add(m),d.push(m)),m.includes("?")){let v=m.split("?")[0];f.has(v)||(f.add(v),d.push(v))}}let h=null;for(let p of d)try{if((yield fetch(p,{method:"HEAD",cache:"no-store"})).ok){h=p;break}}catch{}h?i=[h]:i=d}for(let f of i)try{l++,this.debugLog(`[${l}/${i.length}] Trying to load model from: ${f}`),yield n.loadModel(f),this.debugLog(`\u2705 Successfully loaded model from: ${f}`);break}catch(d){let h=d.message;console.warn(`\u274C Failed to load from ${f}:`,h),s=d}if(!n.isModelLoaded())throw s||new Error(`All ${i.length} model paths failed. Check console for details.`)}this.modelLoaded=!0,this.isModelLoading=!1}catch(n){let o=n.message;o.includes("iOS requires WebGL")?this.error=`iOS Safari: WebGL is required but not available. Please check:
1. Safari Settings > Advanced > Enable WebGL
2. Try updating iOS to the latest version
3. Restart Safari browser`:o.includes("backend not found")||o.includes("no available backend")?this.error="No compatible graphics backend found. Your browser may not support WebGL or WebAssembly.":this.error="Failed to load model: "+o,this.isModelLoading=!1,console.error("Model loading error:",n)}})}getUserMediaWithFallbacks(){return U(this,null,function*(){let n=[{video:{facingMode:{ideal:"environment"},width:{ideal:1920},height:{ideal:1080},frameRate:{ideal:60,min:30}},audio:!1},{video:{facingMode:{ideal:"environment"},width:{ideal:1280},height:{ideal:720}},audio:!1},{video:{facingMode:{ideal:"environment"}},audio:!1},{video:!0,audio:!1}],o=null;for(let a of n)try{return yield navigator.mediaDevices.getUserMedia(a)}catch(u){o=u,console.warn("getUserMedia failed with constraints:",a,u)}throw o||new Error("Failed to access camera")})}waitForVideoReady(n){return U(this,null,function*(){n.readyState>=2&&n.videoWidth>0||(yield new Promise((o,a)=>{let u=()=>{i(),o()},s=()=>{i(),a(new Error("Video failed to load"))},l=window.setTimeout(()=>{i(),o()},2e3),i=()=>{window.clearTimeout(l),n.removeEventListener("loadeddata",u),n.removeEventListener("loadedmetadata",u),n.removeEventListener("error",s)};n.addEventListener("loadeddata",u,{once:!0}),n.addEventListener("loadedmetadata",u,{once:!0}),n.addEventListener("error",s,{once:!0})}))})}startCamera(){return U(this,null,function*(){try{this.error=null,this.isStreaming&&this.stopCamera(),this.stream=yield this.getUserMediaWithFallbacks();let n=this.videoElement.nativeElement;n.setAttribute("playsinline","true"),n.setAttribute("webkit-playsinline","true"),n.muted=!0,n.playsInline=!0,n.srcObject=this.stream;try{yield n.play()}catch(u){console.warn("Autoplay prevented, waiting for metadata:",u)}yield this.waitForVideoReady(n);let o=this.stream.getVideoTracks()[0],a=o?.getCapabilities?.();if(a){let u={};if(a.focusMode?.includes("auto")&&(u.focusMode="auto"),a.exposureMode?.includes("continuous")&&(u.exposureMode="continuous"),a.whiteBalanceMode?.includes("continuous")&&(u.whiteBalanceMode="continuous"),Object.keys(u).length>0)try{yield o.applyConstraints({advanced:[u]})}catch(s){console.warn("Failed to apply camera constraints:",s)}}this.isStreaming=!0,this.currentResolution=`${n.videoWidth}x${n.videoHeight}`,this.lastVideoTime=0,this.videoFrameCount=0,this.lastVideoFpsUpdate=performance.now(),this.actualCameraFps=0,this.frameCount=0,this.fpsUpdateTime=performance.now(),this.fps=0,this.setupCanvas(),this.startStreamRendering(),this.startDetectionLoop()}catch(n){this.error="Failed to access camera: "+n.message,console.error(n)}})}stopCamera(){this.animationFrameId&&(cancelAnimationFrame(this.animationFrameId),this.animationFrameId=null),this.detectionIntervalId&&(clearInterval(this.detectionIntervalId),this.detectionIntervalId=null),this.stream&&(this.stream.getTracks().forEach(n=>n.stop()),this.stream=null),this.isStreaming=!1}setupCanvas(){let n=this.videoElement.nativeElement,o=this.canvasElement.nativeElement;o.width=n.videoWidth,o.height=n.videoHeight}startStreamRendering(){let n=0,a=1e3/30,u=()=>{if(!this.isStreaming)return;let s=performance.now();if(s-n<a){this.animationFrameId=requestAnimationFrame(u);return}let l=this.videoElement.nativeElement,i=this.canvasElement.nativeElement,c=i.getContext("2d",{willReadFrequently:!0});c.drawImage(l,0,0,i.width,i.height),this.detectionsChanged()&&this.redrawDetectionOverlay(i),this.overlayCanvas&&c.drawImage(this.overlayCanvas,0,0),n=s,this.ngZone.run(()=>{this.updateFPS()}),this.animationFrameId=requestAnimationFrame(u)};this.animationFrameId=requestAnimationFrame(u)}startDetectionLoop(){this.detectionIntervalId=setInterval(()=>U(this,null,function*(){this.isStreaming&&(yield this.runDetectionCycle())}),300)}runDetectionCycle(){return U(this,null,function*(){let n=this.videoElement.nativeElement,o=this.canvasElement.nativeElement,a=o.getContext("2d"),u=Math.round(o.width*this.roi.left),s=Math.round(o.height*this.roi.top),l=Math.round(o.width*(1-this.roi.left-this.roi.right)),i=Math.round(o.height*(1-this.roi.top-this.roi.bottom)),c=a.getImageData(u,s,l,i);try{let p=(yield(this.useMockDetector?this.mockDetectorService:this.onnxDetectorService).detect(c)).map(y=>{let[_,I,C,V]=y.bbox;return j(N({},y),{bbox:[_+u,I+s,C,V]})}).filter(y=>y.confidence>=.3),m=p.length>0?p.reduce((y,_)=>_.confidence>y.confidence?_:y):null,v=m?[m]:[];this.detectionCount=v.length,yield this.decodeBarcodes(o,v);let x=performance.now();this.decodedText&&x-this.lastDecodedAt>this.decodedStaleMs&&(this.decodedText="",this.decodedFormat=""),v.length===0?(this.desiredStreamMessage="Please place barcode inside the red box",this.desiredStreamPriority=0):this.decodedText?(this.desiredStreamMessage="",this.desiredStreamPriority=2):(this.desiredStreamMessage="Move closer to the barcode for better scanning",this.desiredStreamPriority=1),this.updateStreamMessage(),this.cacheDetectionOverlay(o,v),v.length>0&&this.frameCount%30===0&&this.debugLog(`\xF0\u0178\u201C\u0160 Frame detection: ${v.length} barcodes`)}catch(f){console.error("Detection error:",f)}})}decodeBarcodes(n,o){return U(this,null,function*(){if(this.decodeInFlight||o.length===0)return;this.decodeInFlight=!0,this.lastDecodeAt=performance.now();let a=document.createElement("canvas"),u=a.getContext("2d");if(!u){this.decodeInFlight=!1;return}try{for(let s of o){let[l,i,c,f]=s.bbox;if(!(c<10||f<10)){a.width=Math.max(1,Math.round(c)),a.height=Math.max(1,Math.round(f)),u.clearRect(0,0,a.width,a.height),u.drawImage(n,l,i,c,f,0,0,a.width,a.height);try{let d=yield this.zxingReader.decodeFromCanvas(a);this.applyDecodeResult(d);break}catch{}}}}finally{this.decodeInFlight=!1}})}applyDecodeResult(n){let o=n.getText();if(!o)return;let a=String(n.getBarcodeFormat()),u=new Date().toLocaleTimeString();this.decodedHistory.length>0&&this.decodedHistory[0].text===o||(this.decodedText=o,this.decodedFormat=a,this.decodedHistory=[{text:o,format:a,time:u},...this.decodedHistory].slice(0,5),this.lastDecodedAt=performance.now())}drawDetections(n,o){o.length!==0&&(this.debugLog(`\xF0\u0178\u017D\xA8 Drawing ${o.length} detections`),o.forEach((a,u)=>{let[s,l,i,c]=a.bbox;this.debugLog(`Drawing box ${u+1}:`,{x:s.toFixed(1),y:l.toFixed(1),width:i.toFixed(1),height:c.toFixed(1)}),n.strokeStyle="#00FF00",n.lineWidth=4,n.strokeRect(s,l,i,c);let f=`Barcode ${(a.confidence*100).toFixed(1)}%`;n.font="bold 18px Arial";let d=n.measureText(f);n.fillStyle="rgba(0, 255, 0, 0.8)",n.fillRect(s,Math.max(0,l-28),d.width+12,28),n.fillStyle="#000000",n.fillText(f,s+6,Math.max(20,l-8));let h=15;n.strokeStyle="#00FF00",n.lineWidth=3,n.beginPath(),n.moveTo(s,l+h),n.lineTo(s,l),n.lineTo(s+h,l),n.stroke(),n.beginPath(),n.moveTo(s+i-h,l),n.lineTo(s+i,l),n.lineTo(s+i,l+h),n.stroke(),n.beginPath(),n.moveTo(s,l+c-h),n.lineTo(s,l+c),n.lineTo(s+h,l+c),n.stroke(),n.beginPath(),n.moveTo(s+i-h,l+c),n.lineTo(s+i,l+c),n.lineTo(s+i,l+c-h),n.stroke()}))}updateStreamMessage(){let n=performance.now(),o=this.getMessagePriority(this.streamMessage);if(this.desiredStreamMessage===this.streamMessage){this.streamMessageSince=0;return}if(this.desiredStreamPriority>=o){this.streamMessage=this.desiredStreamMessage,this.streamMessageSince=0;return}this.streamMessageSince===0&&(this.streamMessageSince=n),n-this.streamMessageSince>=this.streamMessageHoldMs&&(this.streamMessage=this.desiredStreamMessage,this.streamMessageSince=0)}getMessagePriority(n){return n.startsWith("Move closer")?1:n.startsWith("No barcode")?0:2}startFPSOnlyLoop(){let n=()=>{this.isStreaming&&(this.updateFPS(),this.animationFrameId=requestAnimationFrame(n))};n()}updateFPS(){let n=performance.now();this.frameCount++,n-this.fpsUpdateTime>=1e3&&(this.fps=Math.round(this.frameCount/((n-this.fpsUpdateTime)/1e3)),this.frameCount=0,this.fpsUpdateTime=n),this.updateCameraFPS()}updateCameraFPS(){let n=this.videoElement.nativeElement,o=performance.now();n.currentTime!==this.lastVideoTime&&(this.videoFrameCount++,this.lastVideoTime=n.currentTime),o-this.lastVideoFpsUpdate>=1e3&&(this.actualCameraFps=Math.round(this.videoFrameCount/((o-this.lastVideoFpsUpdate)/1e3)),this.videoFrameCount=0,this.lastVideoFpsUpdate=o)}detectionsChanged(){return!0}redrawDetectionOverlay(n){if(!this.overlayCanvas)return;n.getContext("2d").drawImage(this.overlayCanvas,0,0)}cacheDetectionOverlay(n,o){this.overlayCanvas||(this.overlayCanvas=document.createElement("canvas")),this.overlayCanvas.width=n.width,this.overlayCanvas.height=n.height;let a=this.overlayCanvas.getContext("2d");a.clearRect(0,0,this.overlayCanvas.width,this.overlayCanvas.height),this.drawDetections(a,o),this.currentDetections=o}toggleDetector(){this.debugLog("Switching detector mode:",this.useMockDetector?"Mock":"ONNX"),this.modelLoaded=!1,this.loadModel()}toggleCamera(){this.isStreaming?this.stopCamera():this.startCamera()}};e.\u0275fac=function(o){return new(o||e)(to(QM),to(JM),to(Pr))},e.\u0275cmp=wf({type:e,selectors:[["app-barcode-detector"]],viewQuery:function(o,a){if(o&1&&(rg(GG,5),rg(WG,5)),o&2){let u;ng(u=ig())&&(a.videoElement=u.first),ng(u=ig())&&(a.canvasElement=u.first)}},standalone:!0,features:[Cf],decls:22,vars:18,consts:[["videoElement",""],["canvasElement",""],[1,"detector-container"],[1,"header"],[1,"status"],["class","loading",4,"ngIf"],["class","ready",4,"ngIf"],["class","error",4,"ngIf"],[1,"controls"],[3,"click","disabled"],["class","stats",4,"ngIf"],[1,"video-container"],["autoplay","","playsinline","","muted",""],["class","decoded-overlay",4,"ngIf"],["class","status-overlay",4,"ngIf"],["aria-hidden","true",1,"roi-overlay",2,"--roi-top","25%","--roi-right","20%","--roi-bottom","25%","--roi-left","20%"],["class","center-crosshair","aria-hidden","true",4,"ngIf"],["class","info",4,"ngIf"],[1,"loading"],[1,"ready"],[1,"error"],[1,"stats"],[1,"stat-item"],[1,"stat-label"],[1,"stat-value"],[1,"stat-value","small"],[1,"decoded-overlay"],[1,"decoded-value"],[1,"decoded-meta"],[1,"status-overlay"],["aria-hidden","true",1,"center-crosshair"],[1,"crosshair-line","horizontal"],[1,"crosshair-line","vertical"],[1,"crosshair-center"],[1,"info"]],template:function(o,a){if(o&1){let u=Mw();kt(0,"div",2)(1,"div",3)(2,"h1"),Ar(3,"Barcode Detector"),Ot(),kt(4,"div",4),ma(5,qG,2,1,"span",5)(6,XG,2,1,"span",6)(7,YG,2,1,"span",7),Ot()(),kt(8,"div",8)(9,"button",9),Df("click",function(){return vb(u),bb(a.toggleCamera())}),Ar(10),Ot()(),ma(11,ZG,21,6,"div",10),kt(12,"div",11),ya(13,"video",12,0)(15,"canvas",null,1),ma(17,KG,5,2,"div",13)(18,QG,2,1,"div",14),ya(19,"div",15),ma(20,JG,4,0,"div",16),Ot(),ma(21,eW,5,0,"div",17),Ot()}o&2&&(qt(5),ci("ngIf",a.isModelLoading),qt(),ci("ngIf",a.modelLoaded&&!a.isModelLoading),qt(),ci("ngIf",a.error),qt(2),xo("stop",a.isStreaming),ci("disabled",!a.modelLoaded||a.isModelLoading),qt(),Eo(" ",a.isStreaming?"Stop Camera":"Start Camera"," "),qt(),ci("ngIf",a.isStreaming),qt(2),xo("hidden",!a.isStreaming),qt(2),xo("hidden",!a.isStreaming),qt(2),ci("ngIf",a.isStreaming&&a.decodedText),qt(),ci("ngIf",a.isStreaming&&a.streamMessage),qt(),xo("hidden",!a.isStreaming),qt(),ci("ngIf",a.isStreaming),qt(),ci("ngIf",!a.isStreaming&&a.modelLoaded))},dependencies:[sl,Gw,rx],styles:['.detector-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;padding:20px;max-width:100vw;min-height:100vh}.detector-toggle[_ngcontent-%COMP%]{margin-bottom:10px}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{display:flex;align-items:center;gap:8px;color:#fff;font-size:.9rem;cursor:pointer}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{width:16px;height:16px;cursor:pointer}.header[_ngcontent-%COMP%]{text-align:center;margin-bottom:20px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:10px;color:#fff}.status[_ngcontent-%COMP%]{margin:10px 0;font-size:1rem}.status[_ngcontent-%COMP%]   .loading[_ngcontent-%COMP%]{color:orange}.status[_ngcontent-%COMP%]   .ready[_ngcontent-%COMP%]{color:#4caf50}.status[_ngcontent-%COMP%]   .error[_ngcontent-%COMP%]{color:#ff5252}.controls[_ngcontent-%COMP%]{margin:20px 0}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:150px;font-size:1.1rem;padding:15px 30px}.controls[_ngcontent-%COMP%]   button.stop[_ngcontent-%COMP%]{background-color:#f44336}.controls[_ngcontent-%COMP%]   button.stop[_ngcontent-%COMP%]:hover{background-color:#da190b}.stats[_ngcontent-%COMP%]{display:flex;gap:30px;margin:20px 0;padding:15px 30px;background-color:#ffffff1a;border-radius:8px}.stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:5px}.stats[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.9rem;color:#aaa}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#4caf50}.stats[_ngcontent-%COMP%]   .stat-value.highlight[_ngcontent-%COMP%]{color:#0f0;text-shadow:0 0 10px rgba(0,255,0,.5);animation:_ngcontent-%COMP%_pulse 1s ease-in-out infinite}.stats[_ngcontent-%COMP%]   .stat-value.small[_ngcontent-%COMP%]{font-size:1rem}@keyframes _ngcontent-%COMP%_pulse{0%,to{opacity:1}50%{opacity:.7}}.video-container[_ngcontent-%COMP%]{position:relative;width:100%;max-width:1280px;margin:20px auto;background-color:#000;border-radius:8px;overflow:hidden;box-shadow:0 4px 6px #0000004d}.video-container[_ngcontent-%COMP%]:before{content:"";display:block;padding-bottom:75%}@media (min-width: 768px){.video-container[_ngcontent-%COMP%]:before{padding-bottom:56.25%}}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;display:block}.video-container[_ngcontent-%COMP%]   video.hidden[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas.hidden[_ngcontent-%COMP%]{display:none}.video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{z-index:2}.video-container[_ngcontent-%COMP%]   .roi-overlay[_ngcontent-%COMP%]{position:absolute;top:var(--roi-top);left:var(--roi-left);right:var(--roi-right);bottom:var(--roi-bottom);pointer-events:none;z-index:3;border:1px solid #ff0000;box-sizing:border-box}.video-container[_ngcontent-%COMP%]   .roi-overlay.hidden[_ngcontent-%COMP%]{display:none}.decoded-overlay[_ngcontent-%COMP%]{position:absolute;top:12px;left:50%;transform:translate(-50%);z-index:4;text-align:center;background:#0000004d;color:#fff;padding:8px 14px;border-radius:8px;max-width:90%}.status-overlay[_ngcontent-%COMP%]{position:absolute;top:60px;left:50%;transform:translate(-50%);z-index:4;text-align:center;background:#0000004d;color:#fff;padding:6px 12px;border-radius:6px;font-size:1.1rem;font-weight:600;max-width:90%}.decoded-value[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:700;word-break:break-all}.decoded-meta[_ngcontent-%COMP%]{font-size:1.6rem;font-weight:700;color:#e0e0e0;margin-top:4px}.info[_ngcontent-%COMP%]{text-align:center;margin-top:30px;padding:20px;background-color:#ffffff0d;border-radius:8px;max-width:600px}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px 0;color:#ccc;line-height:1.6}.center-crosshair[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);z-index:5;pointer-events:none;width:60px;height:60px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line[_ngcontent-%COMP%]{position:absolute;background:#fffc;box-shadow:0 0 4px #00000080}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.horizontal[_ngcontent-%COMP%]{top:50%;left:10px;right:10px;height:2px;transform:translateY(-50%)}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.vertical[_ngcontent-%COMP%]{left:50%;top:10px;bottom:10px;width:2px;transform:translate(-50%)}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{position:absolute;top:50%;left:50%;width:8px;height:8px;background:#ffffffe6;border:2px solid rgba(0,0,0,.7);border-radius:50%;transform:translate(-50%,-50%);box-shadow:0 0 6px #0000004d}@keyframes _ngcontent-%COMP%_crosshair-pulse{0%,to{opacity:.8}50%{opacity:1}}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{animation:_ngcontent-%COMP%_crosshair-pulse 2s ease-in-out infinite}@media (max-width: 768px){.center-crosshair[_ngcontent-%COMP%]{width:50px;height:50px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.horizontal[_ngcontent-%COMP%]{left:8px;right:8px;height:1.5px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-line.vertical[_ngcontent-%COMP%]{top:8px;bottom:8px;width:1.5px}.center-crosshair[_ngcontent-%COMP%]   .crosshair-center[_ngcontent-%COMP%]{width:6px;height:6px}}@media (max-width: 768px){.detector-container[_ngcontent-%COMP%]{padding:10px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:8px}.status[_ngcontent-%COMP%]{font-size:.9rem}.controls[_ngcontent-%COMP%]{margin:15px 0}.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-width:120px;font-size:1rem;padding:12px 20px}.stats[_ngcontent-%COMP%]{flex-direction:column;gap:10px;padding:12px 15px;margin:15px 0}.stats[_ngcontent-%COMP%]   .stat-item[_ngcontent-%COMP%]{flex-direction:row;justify-content:space-between;align-items:center;gap:10px}.stats[_ngcontent-%COMP%]   .stat-label[_ngcontent-%COMP%]{font-size:.8rem;color:#ccc}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.1rem}.stats[_ngcontent-%COMP%]   .stat-value.small[_ngcontent-%COMP%]{font-size:.9rem}.video-container[_ngcontent-%COMP%]{margin:15px auto;border-radius:6px}.video-container[_ngcontent-%COMP%]   video[_ngcontent-%COMP%], .video-container[_ngcontent-%COMP%]   canvas[_ngcontent-%COMP%]{border-radius:6px}.decoded-overlay[_ngcontent-%COMP%]{top:8px;padding:8px 12px;border-radius:4px}.decoded-overlay[_ngcontent-%COMP%]   .decoded-value[_ngcontent-%COMP%]{font-size:.9rem;font-weight:700}.decoded-overlay[_ngcontent-%COMP%]   .decoded-meta[_ngcontent-%COMP%]{font-size:.7rem;margin-top:2px}.status-overlay[_ngcontent-%COMP%]{font-size:.8rem;padding:6px 10px;border-radius:4px}.info[_ngcontent-%COMP%]{padding:15px;text-align:center}.info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.9rem;margin:5px 0}}@media (min-width: 769px) and (max-width: 1024px){.detector-container[_ngcontent-%COMP%]{padding:15px}.header[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.stats[_ngcontent-%COMP%]{gap:20px;padding:12px 25px}.stats[_ngcontent-%COMP%]   .stat-value[_ngcontent-%COMP%]{font-size:1.3rem}.video-container[_ngcontent-%COMP%]{max-width:800px}}@media (hover: none) and (pointer: coarse){.controls[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{min-height:48px;font-size:1.1rem}.detector-toggle[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{min-height:44px;padding:8px 0;align-items:flex-start}}']});let t=e;return t})();var tN=(()=>{let e=class e{constructor(){this.title="Angular Barcode Detector"}};e.\u0275fac=function(o){return new(o||e)},e.\u0275cmp=wf({type:e,selectors:[["app-root"]],standalone:!0,features:[Cf],decls:2,vars:0,consts:[[1,"app-container"]],template:function(o,a){o&1&&(kt(0,"div",0),ya(1,"app-barcode-detector"),Ot())},dependencies:[sl,eN],styles:[".app-container[_ngcontent-%COMP%]{min-height:100vh;background:linear-gradient(135deg,#1a1a1a,#2d2d2d)}"]});let t=e;return t})();ex(tN,{providers:[]}).catch(t=>console.error(t));
